
		TMap = window.TMap || {};
		if (!TMap.__load) {
			TMap.__load = function(onLoad) {
				onLoad({"key":"RPUBZ-XETWN-SEBF7-SEXOI-ADMU7-XRB4O","version":"1.6.5.0","highQualityRender":false}, 1705224251557);
				delete TMap.__load;
			};
		}
        
/*! @version 1.6.5.0 */
!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=666)}([function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(73),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,r.default)(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}()},function(t,e){var n=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=n)},function(t,e,n){t.exports={default:n(173),__esModule:!0}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(152),a=i(r),o=n(80),s=i(o),l=n(19),u=i(l);e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,u.default)(e)));t.prototype=(0,s.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.default?(0,a.default)(t,e):t.__proto__=e)}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(19),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,r.default)(e))&&"function"!=typeof e?t:e}},function(t,e,n){var i=n(8),r=n(2),a=n(26),o=n(21),s=n(24),l=function(t,e,n){var u,c,f,d=t&l.F,h=t&l.G,p=t&l.S,v=t&l.P,m=t&l.B,g=t&l.W,_=h?r:r[e]||(r[e]={}),y=_.prototype,x=h?i:p?i[e]:(i[e]||{}).prototype;h&&(n=e);for(u in n)(c=!d&&x&&void 0!==x[u])&&s(_,u)||(f=c?x[u]:n[u],_[u]=h&&"function"!=typeof x[u]?n[u]:m&&c?a(f,i):g&&x[u]==f?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(f):v&&"function"==typeof f?a(Function.call,f):f,v&&((_.virtual||(_.virtual={}))[u]=f,t&l.R&&y&&!y[u]&&o(y,u,f)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var i=n(60)("wks"),r=n(47),a=n(8).Symbol,o="function"==typeof a;(t.exports=function(t){return i[t]||(i[t]=o&&a[t]||(o?a:r)("Symbol."+t))}).store=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){t&&(0,d.default)(t).forEach(function(t){e.apply(void 0,(0,c.default)(t))})}var a=n(17),o=i(a),s=n(19),l=i(s),u=n(18),c=i(u),f=n(110),d=i(f),h=n(25),p=i(h),v=n(130),m=i(v),g=n(159),_=i(g),y=n(46),x=i(y),b=n(157);e.getMax=function(t){for(var e=t.length,n=-1/0;e;)e-=1,n=t[e]>n?t[e]:n;return n},e.getMin=function(t){for(var e=t.length,n=1/0;e;)e-=1,n=t[e]<n?t[e]:n;return n},e.isInRange=function(t,e,n){return t>=e&&t<=n},e.clamp=function(t,e,n){return Math.min(n,Math.max(e,t))},e.wrap=function(t,e,n){var i=n-e,r=((t-e)%i+i)%i+e;return r===e?n:r},e.round=function(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n},e.mix=function(t,e,n){return t*(1-n)+e*n},e.degreeToRadian=m.default,e.radianToDegree=_.default,e.extend=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var a=!0,o=!1,s=void 0;try{for(var l,u=(0,p.default)(n);!(a=(l=u.next()).done);a=!0){r(l.value,function(e,n){t[e]=n})}}catch(t){o=!0,s=t}finally{try{!a&&u.return&&u.return()}finally{if(o)throw s}}return t},e.bindAll=function(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})},e.forIn=r,e.endsWith=function(t,e){return-1!==t.indexOf(e,t.length-e.length)},e.isDefined=function(t){return null!==t&&void 0!==t},e.isUndefined=function(t){return void 0===t},e.isString=function(t){return"[object String]"===Object.prototype.toString.call(t)},e.parseJson=function(t){return!JSON||!JSON.stringify?new Function("return "+t)():JSON.parse(t)},e.colorToRGBA=function(t){if(t instanceof Array)return t;var e=t>>0&255,n=t>>8&255,i=t>>16&255,r=t>>24&255;return r/=255,new Array(e,n,i,r)},e.rgbaToGLColor=function(t){t=String(t).replace(/ /g,"");var e=t.substring(t.indexOf("(")+1,t.indexOf(")")).split(",");return 3===e.length&&(e[3]=1),e=e.map(function(t,e){return 3===e?Number(t):Number(t)/255})},e.uniqueId=function(){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),e=new Array(36),n=0,i=void 0;return function(){for(var r=0;r<36;r++)8===r||13===r||18===r||23===r?e[r]="-":14===r?e[r]="4":(n<=2&&(n=33554432+16777216*Math.random()|0),i=15&n,n>>=4,e[r]=t[19===r?3&i|8:i]);return e.join("")}}(),e.objectClone=function(t){var e=this;if("object"!==(void 0===t?"undefined":(0,l.default)(t))||null===t)return t;if(t instanceof Array)return[].concat(t);var n=new Object;return r(t,function(t,i){n[t]=e.objectClone(i)}),n},e.keysDifference=function(t,e){var n=[];return r(t,function(t){t in e||n.push(t)}),n},e.bezier=function(t,e,n,i){var r=new b(t,e,n,i);return function(t){return r.solve(t)}},e.ease=e.bezier(.25,.1,.25,1),e.linearEase=function(t){return t},e.asyncAll=function(t,e,n){if(!t.length)return n(null,[]);var i=t.length,r=new Array(t.length),a=null;t.forEach(function(t,o){e(t,function(t,e){t&&(a=t),r[o]=e,0===i&&n(a,r),i-=1})})},e.deepEqual=function(t,n){if(Array.isArray(t)){if(!Array.isArray(n)||t.length!==n.length)return!1;for(var i=0;i<t.length;i++)if(!e.deepEqual(t[i],n[i]))return!1;return!0}if("object"===(void 0===t?"undefined":(0,l.default)(t))&&null!==t&&null!==n){if("object"!==(void 0===n?"undefined":(0,l.default)(n)))return!1;if((0,o.default)(t).length!==(0,o.default)(n).length)return!1;for(var r in t)if(t.hasOwnProperty(r)&&!e.deepEqual(t[r],n[r]))return!1;return!0}return t===n};var S={};e.warnOnce=function(t){S[t]||("undefined"!=typeof console&&console.warn(t),S[t]=!0)},e.clone=function(t){if(null===t||"object"!==(void 0===t?"undefined":(0,l.default)(t)))return t;if(t instanceof x.default)return new x.default(t.getLat(),t.getLng(),t.getHeight());if(t instanceof Date){var e=new Date;return e.setTime(t.getTime()),e}if(t instanceof Array){for(var n=[],i=0,r=t.length;i<r;++i)n[i]=this.clone(t[i]);return n}if(t instanceof Object){var a={};for(var o in t)t.hasOwnProperty(o)&&(a[o]=this.clone(t[o]));return a}throw new Error("Unable to copy obj! Its type isn't supported.")},e.insertSort=function(t,e){for(var n=1,i=n;i<t.length;n+=1,i+=1)for(var r=0;r<n;r++)if(t[i][e]<=t[r][e]){t.splice(r,0,t[i]),t.splice(i+1,1);break}},e.bubbleSort=function(t,e){t.sort(function(t,n){return t[e]-n[e]})},e.isIntersect=function(t,e){var n=Math.abs(t.x-e.x),i=Math.abs(t.y-e.y),r=(t.w+e.w)/2,a=(t.h+e.h)/2;return n<=r&&i<=a}},function(t,e,n){var i=n(63),r=n(105),a=n(220),o=n(211),s=n(239),l=function(t,e,n){var u,c,f,d,h=t&l.F,p=t&l.G,v=t&l.S,m=t&l.P,g=t&l.B,_=p?i:v?i[e]||(i[e]={}):(i[e]||{}).prototype,y=p?r:r[e]||(r[e]={}),x=y.prototype||(y.prototype={});p&&(n=e);for(u in n)c=!h&&_&&void 0!==_[u],f=(c?_:n)[u],d=g&&c?s(f,i):m&&"function"==typeof f?s(Function.call,f):f,_&&o(_,u,f,t&l.U),y[u]!=f&&a(y,u,d),m&&x[u]!=f&&(x[u]=f)};i.core=r,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},function(t,e,n){t.exports=!n(31)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(7);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var i=n(13),r=n(84),a=n(65),o=Object.defineProperty;e.f=n(12)?Object.defineProperty:function(t,e,n){if(i(t),e=a(e,!0),i(n),r)try{return o(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){t.exports={default:n(250),__esModule:!0}},function(t,e,n){var i=n(6),r=n(2),a=n(31);t.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],o={};o[t]=e(n),i(i.S+i.F*a(function(){n(1)}),"Object",o)}},function(t,e,n){t.exports={default:n(177),__esModule:!0}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(82),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,r.default)(t)}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(116),a=i(r),o=n(124),s=i(o),l="function"==typeof s.default&&"symbol"==typeof a.default?function(t){return typeof t}:function(t){return t&&"function"==typeof s.default&&t.constructor===s.default&&t!==s.default.prototype?"symbol":typeof t};e.default="function"==typeof s.default&&"symbol"===l(a.default)?function(t){return void 0===t?"undefined":l(t)}:function(t){return t&&"function"==typeof s.default&&t.constructor===s.default&&t!==s.default.prototype?"symbol":void 0===t?"undefined":l(t)}},function(t,e,n){var i=n(81),r=n(54);t.exports=function(t){return i(r(t))}},function(t,e,n){var i=n(14),r=n(41);t.exports=n(12)?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){"use strict";var i={batchRender:!0,highQualityRender:!1,isClientRender:!1,isBatchVector:!0,defaultDataZoom:9,isForceNullDataProcess:!1,type:"default",minZoom:3,maxZoom:20,maxDataZoom:18,minPitch:0,maxPitch:80,minShowIndoorZoom:17,minBuildingDataZoom:14.5,tileSize:256,checkKeySrc:"https://apikey.map.qq.com/mkey/index.php/mkey/check",overseaSrc:"https://overseactrl.map.qq.com",prSrc:"https://pr.map.qq.com/pingd?appid=jsapi_v3",verSrc:"https://confinfo.map.qq.com/confinfo",iconSize:16,iconSrc:"https://vectorsdk.map.qq.com/fileupdate/jsapi/icon?id={id}&type=img&version={version}",iconIndexSrc:"https://vectorsdk.map.qq.com/fileupdate/jsapi/icon?id={id}&type=json&version={version}",styleSrc:"https://vectorsdk.map.qq.com/fileupdate/jsapi/style?autoup=1&id={id}&version={version}",batchVectorSrc:["https://rt0.map.gtimg.com/tile?styleid=0&tiles={tiles}&version={version}&building={building}&style=100&compress=1&mapType=hybrid","https://rt1.map.gtimg.com/tile?styleid=0&tiles={tiles}&version={version}&building={building}&style=100&compress=1&mapType=hybrid","https://rt2.map.gtimg.com/tile?styleid=0&tiles={tiles}&version={version}&building={building}&style=100&compress=1&mapType=hybrid","https://rt3.map.gtimg.com/tile?styleid=0&tiles={tiles}&version={version}&building={building}&style=100&compress=1&mapType=hybrid"],vectorSrc:["https://rt0.map.gtimg.com/tile?styleid=0&z={z}&x={x}&y={y}&version={version}&building={building}&style=100&compress=1&mapType=hybrid","https://rt1.map.gtimg.com/tile?styleid=0&z={z}&x={x}&y={y}&version={version}&building={building}&style=100&compress=1&mapType=hybrid","https://rt2.map.gtimg.com/tile?styleid=0&z={z}&x={x}&y={y}&version={version}&building={building}&style=100&compress=1&mapType=hybrid","https://rt3.map.gtimg.com/tile?styleid=0&z={z}&x={x}&y={y}&version={version}&building={building}&style=100&compress=1&mapType=hybrid"],satelliteSrc:["https://p0.map.gtimg.com/sateTiles","https://p1.map.gtimg.com/sateTiles","https://p2.map.gtimg.com/sateTiles","https://p3.map.gtimg.com/sateTiles"],roadSrc:["https://rt0.map.gtimg.com/tile","https://rt1.map.gtimg.com/tile","https://rt2.map.gtimg.com/tile","https://rt3.map.gtimg.com/tile"],trafficSrc:["https://rtt2.map.qq.com/rtt/","https://rtt2a.map.qq.com/rtt/","https://rtt2b.map.qq.com/rtt/","https://rtt2c.map.qq.com/rtt/"],handdrawSrc:["https://p0.map.gtimg.com/scenic/","https://p1.map.gtimg.com/scenic/","https://p2.map.gtimg.com/scenic/","https://p3.map.gtimg.com/scenic/"],indoorIndexSrc:" https://mapvectors.map.qq.com/indoormap2/index?type=1",indoorBuildingSrc:"https://mapvectors.map.qq.com/indoormap",indoorStyleSrc:"https://mapvectors.map.qq.com/indoormap/style.js?version={version}",indoorIconSrc:"https://rt%$%.map.gtimg.com/icons/indoor/",dataVersion:{sat:231,tile:405,scenic:157},cesiumStaticSrc:"https://mapapi.qq.com/web/visualization/real3d/cesium-static/",envSrc:"https://mapapi.qq.com/web/visualization/monet/resource/env.jpg",marker3DSrc:["https://mapapi.qq.com/web/jsapiGL/resource/radiation.glb","https://mapapi.qq.com/web/jsapiGL/resource/maglev.glb","https://mapapi.qq.com/web/jsapiGL/resource/location.glb"],dracoDecoderPath:"https://mapapi.qq.com/web/jsapiGL/three-137/libs/draco",basisTranscoderPath:"https://mapapi.qq.com/web/jsapiGL/three-137/libs/basis"};t.exports=i},function(t,e,n){t.exports={default:n(181),__esModule:!0}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){t.exports={default:n(133),__esModule:!0}},function(t,e,n){var i=n(42);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(131),a=i(r),o=n(25),s=i(o);e.default=function(){function t(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,l=(0,s.default)(t);!(i=(o=l.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{!i&&l.return&&l.return()}finally{if(r)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if((0,a.default)(Object(e)))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(){return!(self.navigator.userAgent.indexOf("MiniProgramEnv")<0)}function a(){for(var t=self.navigator.userAgent,e=["iOS","Android","MINA"],n=["Windows","Mac"],i="cannotrecongize",r=0;r<e.length;r++)if(t.indexOf("MiniProgramEnv/"+e[r])>=0){i="mobile";break}for(var a=0;a<n.length;a++)if(t.indexOf("MiniProgramEnv/"+n[a])>=0){i="pc";break}return i}function o(t,e,n){if(e.includes(":")){var i=n,r=e.split(":"),a=r[0].trim();e=r[1].trim(),n=function(t){for(var e=!1,n=t.target;n&&!(e=s(n,a));)n=n.parentNode;e&&(t.selectorTarget=n,i(t))}}return"addEventListener"in t?(t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}}):"attachEvent"in t?(t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}):"on"in t?(t.on(e,n),{remove:function(){t.off&&t.off(e,n),t.removeListener&&t.removeListener(e,n)}}):void 0}function s(t,e){var n=["matches","webkitMatchesSelector","msMatchesSelector","mozMatchesSelector","oMatchesSelector"],i=!0,r=!1,a=void 0;try{for(var o,s=(0,u.default)(n);!(i=(o=s.next()).done);i=!0){var l=o.value;if(t[l]&&"function"==typeof t[l])return t[l](e)}}catch(t){r=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return!1}var l=n(25),u=i(l),c=n(17),f=i(c),d=n(19),h=i(d),p=n(18),v=i(p);e.now=function(){return self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date)}();var m=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame;e.frame=function(t){return m(t)};var g=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame;e.cancelFrame=function(t){g(t)},e.timed=function(n,i,r,a){function o(i){l||(i=t.exports.now(),i>=u+r?n.call(a,1):(n.call(a,(i-u)/r),e.frame(o)))}var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!r)return n.call(a,1),null;var l=!1,u=t.exports.now()-s*r;return e.frame(o),function(){l=!0,i&&i.call(a)}},e.getImageData=function(t){var e=self.document.createElement("canvas"),n=e.getContext("2d");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0,t.width,t.height),n.getImageData(0,0,t.width,t.height).data},e.hardwareConcurrency=self.navigator.hardwareConcurrency||4,Object.defineProperty(e,"devicePixelRatio",{get:function(){return self.devicePixelRatio||1}}),e.isPC=function(){var t=self.navigator.userAgent,e=["Android","iPhone","iPad","iPod","SymbianOS","selfs Phone"],n=!0;if(r()){if("mobile"===a())return!1;if("pc"===a())return!0}for(var i=0;i<e.length;i++)if(t.indexOf(e[i])>=0){n=!1;break}return n},e.isMiniProgram=r,e.getMiniProgramEnv=a,e.isLowMobileDevice=function(){var t=self.navigator.userAgent;if(this.isPC())return!1;if(t.includes("SymbianOS")||t.includes("selfs Phone"))return!0;try{var e=t.includes("Android")&&parseFloat(t.match(/Android (\d+)/)[1]),n=(t.includes("iPhone")||t.includes("iPad")||t.includes("iPod"))&&t.match(/OS ((\d+_?){2,3})\s/)&&parseFloat(String(t.match(/OS ((\d+_?){2,3})\s/)[1]).replace("_","."));if(e&&e<6||n&&n<11)return!0}catch(t){return!1}return!1},e.mobileSystem=function(){var t=self.navigator.userAgent,e="";if(this.isPC())return!1;if(t.includes("SymbianOS")||t.includes("selfs Phone"))e=t.includes("SymbianOS")?"SymbianOS":"selfs Phone";else try{var n=t.includes("Android")&&parseFloat(t.match(/Android ([\d.]+?);/)[1]),i=(t.includes("iPhone")||t.includes("iPad")||t.includes("iPod"))&&t.match(/OS ((\d+_?){2,3})\s/)&&parseFloat(String(t.match(/OS ((\d+_?){2,3})\s/)[1]).replace("_","."));e=n?"Android"+n.toFixed(1):"iOS"+i.toFixed(1)}catch(e){return"无法识别: "+t}return e},e.debounce=function(t,e){var n=null;return function(){var i=arguments;n&&clearTimeout(n),n=setTimeout(function(){t.apply(void 0,(0,v.default)(i))},e)}},e.throttle=function(t,e){var n=0;return function(){var i=+new Date;if(i-n>e){n=i;for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];t.apply(this,a)}}},e.throttleWithFrame=function(t){var e=null;return function(){for(var n=this,i=arguments.length,r=Array(i),a=0;a<i;a++)r[a]=arguments[a];e||(e=m(function(){t.apply(n,r),e=null}))}};var _=function t(e,n,i,r){if(!e||!n)return void console.warn("arguments is invalid!",e,n,i);if("object"===(void 0===n?"undefined":(0,h.default)(n))){var a=null;return a="length"in n?n.map(function(n){return t(e,n.trim(),i,r)}):(0,f.default)(n).map(function(r){return t(e,r.trim(),n[r],i)}),{remove:function(){a.forEach(function(t){t&&t.remove&&t.remove()})}}}if(-1!==n.indexOf(",")){n=n.split(",");var s=n.map(function(n){return t(e,n.trim(),i,r)});return{remove:function(){s.forEach(function(t){t&&t.remove&&t.remove()})}}}return o(e,n,function(t){return i.call(r||e,t)})},y=function(t,e,n,i){var r=null,a=function(t){return function(){return r&&r.remove&&r.remove(),t.apply(this,arguments)}};return t&&e?("object"===(void 0===e?"undefined":(0,h.default)(e))&&("length"in e?n=a(n):(0,f.default)(e).forEach(function(t){e[t]=a(e[t])})),-1!==e.indexOf(",")&&(e=e.split(","),n=a(n)),r=_(t,e,n,i)):void console.warn("arguments is invalid!",t,e,n)};e.on=_,e.once=y},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.AJAXError=e.EnumError=e.ClassTypeError=e.BaseTypeError=void 0;var r=n(19),a=i(r),o=n(3),s=i(o),l=n(5),u=i(l),c=n(4),f=i(c),d=n(0),h=i(d),p=n(1),v=i(p),m=function(){function t(e){(0,h.default)(this,t),this.message=e}return(0,v.default)(t,[{key:"warn",value:function(){console.warn(this.message)}},{key:"error",value:function(){console.error(this.message)}},{key:"throw",value:function(){throw new Error(this.message)}}]),t}(),g=function(t){function e(t,n,i){return(0,h.default)(this,e),(0,u.default)(this,(e.__proto__||(0,s.default)(e)).call(this,"类型错误："+t+" 应该是 "+n.toUpperCase()+" 类型, 实际却是 "+(void 0===i?"undefined":(0,a.default)(i)).toUpperCase()+" 类型。"))}return(0,f.default)(e,t),e}(m),_=function(t){function e(t,n,i){return(0,h.default)(this,e),(0,u.default)(this,(e.__proto__||(0,s.default)(e)).call(this,"类型错误："+t+" 应该是 "+n+" 类型, 实际值为 "+i+"。"))}return(0,f.default)(e,t),e}(m),y=function(t){function e(t,n,i){return(0,h.default)(this,e),(0,u.default)(this,(e.__proto__||(0,s.default)(e)).call(this,"枚举错误："+t+" 的可枚举值为 "+n.join(",")+"，实际却是 "+i))}return(0,f.default)(e,t),e}(m),x=function t(e,n){(0,h.default)(this,t),this.message=e,this.status=n};e.BaseTypeError=g,e.ClassTypeError=_,e.EnumError=y,e.AJAXError=x},function(t,e){t.exports={}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(3),a=i(r),o=n(114),s=i(o);e.default=function t(e,n,i){null===e&&(e=Function.prototype);var r=(0,s.default)(e,n);if(void 0===r){var o=(0,a.default)(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var l=r.get;if(void 0!==l)return l.call(i)}},function(t,e,n){var i=n(54);t.exports=function(t){return Object(i(t))}},function(t,e,n){"use strict";var i=n(138)(!0);n(74)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var i=n(87),r=n(59);t.exports=Object.keys||function(t){return i(t,r)}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(27),a=i(r),o=n(149),s=i(o),l=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,u=/^rgb\((\d+,?\s*){3}\)$/,c=/^rgba\((\d+,?\s*){3},\s*[0-9.]+\)$/,f={};!function(t){["Number","String","Function","Undefined","Boolean","Object","Array"].forEach(function(e){var n=function(t){return"[object "+e+"]"===Object.prototype.toString.call(t)};t["is"+e]=n})}(f),f.isNaN=s.default,f.isValidLatLng=function(){var t=void 0,e=void 0;if(1===arguments.length){var n=arguments[0];if(f.isArray(n)){var i=(0,a.default)(n,2);t=i[0],e=i[1]}else t=n.lat,e=n.lng}else{if(2!==arguments.length)return!1;t=arguments[0],e=arguments[1]}return!(!f.isNumber(t)||!f.isNumber(e))&&(Math.abs(t)<=90&&Math.abs(e)<=180)},f.isValidColor=function(t){return f.isArray(t)?(3===t.length||4===t.length)&&t.every(function(t){return t>=0&&t<=255}):!!f.isString(t)&&(l.test(t)||u.test(t)||c.test(t))},f.isValidOffset=function(t){return!!(f.isObject(t)&&"x"in t&&"y"in t&&f.isNumber(t.x)&&f.isNumber(t.y))},e.default=f},function(t,e,n){n(142);for(var i=n(8),r=n(21),a=n(30),o=n(9)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var u=s[l],c=i[u],f=c&&c.prototype;f&&!f[o]&&r(f,o,u),a[u]=a.Array}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=!0},function(t,e,n){var i=n(47)("meta"),r=n(7),a=n(24),o=n(14).f,s=0,l=Object.isExtensible||function(){return!0},u=!n(31)(function(){return l(Object.preventExtensions({}))}),c=function(t){o(t,i,{value:{i:"O"+ ++s,w:{}}})},f=function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,i)){if(!l(t))return"F";if(!e)return"E";c(t)}return t[i].i},d=function(t,e){if(!a(t,i)){if(!l(t))return!0;if(!e)return!1;c(t)}return t[i].w},h=function(t){return u&&p.NEED&&l(t)&&!a(t,i)&&c(t),t},p=t.exports={KEY:i,NEED:!1,fastKey:f,getWeak:d,onFreeze:h}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var i=n(14).f,r=n(24),a=n(9)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,a)&&i(t,a,{configurable:!0,value:e})}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return function(){return L?void 0:t.apply(null,arguments)}}function a(t,e){var n=[];for(var i in e)e.hasOwnProperty(i)&&n.push(i+"="+e[i]);return t+(-1===t.indexOf("?")?"?":"&")+n.join("&")}function o(t){var e=(0,T.isWebGLSupportedCached)();(0,M.sendByAjax)(a(b.default.prSrc,{logid:"pv",key:t.key||w.default.key,v:t.version||"null",lt:t.loadDeltaTime||-1,d:location.host,dpr:window.devicePixelRatio,lss:A.default.support()?1:0,gls:e.context?1:0,ua:window.navigator.userAgent,dt:P.default.OS,dvn:e.renderer}))}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.type,n=t.code,i=t.message,r=void 0===i?"":i,o=t.key,s=void 0===o?w.default.key:o;(0,M.sendOnce)(a(b.default.prSrc,{logid:"err",key:s,type:e,code:n,msg:r,dt:P.default.OS}))}function l(t,e,n){t.once("tilesloaded",function(){(0,M.sendOnce)(a(b.default.prSrc,{logid:"rt",frt:Date.now()-e,device:n}))})}function u(t,e,n){(0,k.isPC)()||t.once("tilesloaded",function(){(0,M.sendOnce)(a(b.default.prSrc,{logid:"ds",lowdevice:e,systemid:n}))})}function c(t){var e=(0,T.isWebGLSupportedCached)(),n=null,i=0,r=null,o=function(){var o=(0,k.now)(),s=(o-r)/1e3,l=Math.round(i/(60*s)*60);t.removeRenderCallback(n),(0,M.sendOnce)(a(b.default.prSrc,{logid:"fps",dt:P.default.OS,num:l,cd:e.isIndependentDisplayCard?1:0}))};t.on("movestart",function(){n&&(t.removeListener("moveend",o),t.removeRenderCallback(n),i=0),r=(0,k.now)(),n=function(){i++},t.addRenderCallback(n),t.once("moveend",o)})}function f(t){(0,M.sendOnce)(a(b.default.prSrc,{logid:"cl",key:t.key||w.default.key,subkey:t.subkey||"",id:t.id||""}))}function d(t){(0,M.sendOnce)(a(b.default.prSrc,{logid:"cs",key:t.key||w.default.key,subkey:t.subkey||"",id:t.styleId}))}function h(t,e){(0,M.sendOnce)(a(b.default.prSrc,{logid:"os",key:t.key||w.default.key,num:e||0}))}function p(t){var e=t.zoom,n=t.pitch,i=t.rotation,r=t.width,o=t.height;(0,M.sendOnce)(a(b.default.prSrc,{logid:"minfo",zoom:Math.floor(e),pitch:n,rotation:i,width:r,height:o}))}function v(t,e){if("tile"===t){var n=e.id,i=e.status,r=e.time,o=C[n];o||(o=new R(n),C[n]=o),o.logStatus(i),0===i&&r&&o.logTime(r)}else{var s={logid:"qos",t:t,info:e.styleId+"|"+e.version};e.error||0===e.error?s.e=e.error:s.lt=e.loadTime,(0,M.sendOnce)(a(b.default.prSrc,s))}}Object.defineProperty(e,"__esModule",{value:!0}),e.statCn=e.qos=e.minfo=e.os=e.cs=e.cl=e.fps=e.ds=e.frt=e.err=e.pv=void 0;var m=n(0),g=i(m),_=n(1),y=i(_),x=n(22),b=i(x),S=n(108),w=i(S),E=n(89),A=i(E),T=n(156),M=n(155),I=n(147),P=i(I),k=n(28),L=!!w.default.isLocal,C=(e.pv=r(o),e.err=r(s),e.frt=r(l),e.ds=r(u),e.fps=r(c),e.cl=r(f),e.cs=r(d),e.os=r(h),e.minfo=r(p),{}),R=(e.qos=r(v),function(){function t(e){function n(){var t=this.id[0]+"_stat",e=this.id[0]+"_avg",n={},i=this.tilesStatus.join("|");if("0|0|0"!==i&&(n[t]=i,this.tilesStatus=[0,0,0]),this.tilesTime.length>0){var r=this.tilesTime.reduce(function(t,e){return t+e},0)/this.tilesTime.length;n[e]=Math.max(0,Math.floor(r)),this.tilesTime=[]}return n}(0,g.default)(this,t),this.id=e,this.tilesStatus=[0,0,0],this.tilesTime=[],(0,M.sendPeriodically)("tile",a(b.default.prSrc,{logid:"qos",t:"tile"}),n.bind(this))}return(0,y.default)(t,[{key:"logStatus",value:function(t){this.tilesStatus[t]+=1}},{key:"logTime",value:function(t){this.tilesTime.push(t)}}]),t}()),D=function(){function t(){setTimeout(function(){e.length>0&&((0,M.sendOnce)(a(b.default.prSrc,{logid:"cn",cn:e.join(",")})),e=[]),t()},5e3)}var e=[];return t(),function(t){t&&e.push(t)}}();e.statCn=r(D)},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(19),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(10),f=90,d=180,h=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments[3];if((0,s.default)(this,t),e=Number(e),n=Number(n),i=Number(i),isNaN(n)||isNaN(e)||isNaN(i))throw new Error("参数错误：LatLng 传入参数 ("+e+", "+n+") 非合法数字。");if(r)e=(0,c.clamp)(e,-f,f),n=(0,c.wrap)(n,-d,d);else{if(e>f||e<-f)throw new Error("参数错误：LatLng.lat 取值应在 ["+-f+", "+f+"] 区间内。");if(n>d||n<-d)throw new Error("参数错误：LatLng.lng 取值应在 ["+-d+", "+d+"] 区间内。")}this.lat=e,this.lng=n,this.height=i}return(0,u.default)(t,[{key:"toString",value:function(){return this.lat+", "+this.lng}},{key:"getLat",value:function(){return this.lat}},{key:"getLng",value:function(){return this.lng}},{key:"getHeight",value:function(){return this.height}},{key:"equals",value:function(t){return this.lat===t.lat&&this.lng===t.lng&&this.height===t.height}}],[{key:"convert",value:function(e){if(e instanceof t)return e;if(Array.isArray(e))return new t(e[0],e[1],e[2],!0);if(!Array.isArray(e)&&"object"===(void 0===e?"undefined":(0,a.default)(e))&&null!==e)return new t(e.lat,e.lng,e.height,!0);throw new Error("`LatLng` argument must be specified as a LatLng instance, an object {lat: <lat>, lng: <lng>}, or an array of [<lat>, <lng>]")}}]),t}();t.exports=h},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e,n){var i=n(38),r=n(9)("toStringTag"),a="Arguments"==i(function(){return arguments}()),o=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=o(e=Object(t),r))?n:a?i(e):"Object"==(s=i(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,n){var i=n(13),r=n(85),a=n(59),o=n(55)("IE_PROTO"),s=function(){},l=function(){var t,e=n(58)("iframe"),i=a.length;for(e.style.display="none",n(83).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;i--;)delete l.prototype[a[i]];return l()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=i(t),n=new s,s.prototype=null,n[o]=t):n=l(),void 0===e?n:r(n,e)}},function(t,e,n){!function(n,i){t.exports=e=i()}(0,function(){var t=t||function(t,e){var n=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),i={},r=i.lib={},a=r.Base=function(){return{extend:function(t){var e=n(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),o=r.WordArray=a.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=void 0!=e?e:4*t.length},toString:function(t){return(t||l).stringify(this)},concat:function(t){var e=this.words,n=t.words,i=this.sigBytes,r=t.sigBytes;if(this.clamp(),i%4)for(var a=0;a<r;a++){var o=n[a>>>2]>>>24-a%4*8&255;e[i+a>>>2]|=o<<24-(i+a)%4*8}else for(var a=0;a<r;a+=4)e[i+a>>>2]=n[a>>>2];return this.sigBytes+=r,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=a.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n,i=[],r=0;r<e;r+=4){var a=function(e){var e=e,n=987654321,i=4294967295;return function(){n=36969*(65535&n)+(n>>16)&i,e=18e3*(65535&e)+(e>>16)&i;var r=(n<<16)+e&i;return r/=4294967296,(r+=.5)*(t.random()>.5?1:-1)}}(4294967296*(n||t.random()));n=987654071*a(),i.push(4294967296*a()|0)}return new o.init(i,e)}}),s=i.enc={},l=s.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],r=0;r<n;r++){var a=e[r>>>2]>>>24-r%4*8&255;i.push((a>>>4).toString(16)),i.push((15&a).toString(16))}return i.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i+=2)n[i>>>3]|=parseInt(t.substr(i,2),16)<<24-i%8*4;return new o.init(n,e/2)}},u=s.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],r=0;r<n;r++){var a=e[r>>>2]>>>24-r%4*8&255;i.push(String.fromCharCode(a))}return i.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i++)n[i>>>2]|=(255&t.charCodeAt(i))<<24-i%4*8;return new o.init(n,e)}},c=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(u.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return u.parse(unescape(encodeURIComponent(t)))}},f=r.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=c.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,i=n.words,r=n.sigBytes,a=this.blockSize,s=4*a,l=r/s;l=e?t.ceil(l):t.max((0|l)-this._minBufferSize,0);var u=l*a,c=t.min(4*u,r);if(u){for(var f=0;f<u;f+=a)this._doProcessBlock(i,f);var d=i.splice(0,u);n.sigBytes-=c}return new o.init(d,c)},clone:function(){var t=a.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),d=(r.Hasher=f.extend({cfg:a.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new d.HMAC.init(t,n).finalize(e)}}}),i.algo={});return i}(Math);return t})},function(t,e,n){var i=n(56),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},,function(t,e,n){"use strict";function i(t){return[l.circle,l.ellipse,l.rectangle,l.polygon,l.polyline,l.marker,l.label].some(function(e){return t===e})}function r(t){return[l.grayTile].some(function(e){return t===e})}function a(t){return[l.imageGround,l.canvasGround].some(function(e){return t===e})}function o(t){return[l.indoorRegion,l.indoorPoi,l.indoorEscalator,l.indoor].some(function(e){return t===e})}Object.defineProperty(e,"__esModule",{value:!0}),e.isOverlayLayer=i,e.isGrayTileLayer=r,e.isTextureLayer=a,e.isIndoorLayer=o;var s=e.BASE_LAYER_TYPE={arrow:"arrow",point:"point",label:"label",line:"line",region:"region",ground:"ground",base:"base",building3d:"building3d",building2d:"building2d",text:"text"},l=e.RENDER_LAYER_TYPE={base:s.base,arrow:s.arrow,building3d:s.building3d,building2d:s.building2d,text:s.text,visualPlugin:"VISUAL_PLUGIN",marker:"MARKER",polyline:"POLYLINE",polygon:"POLYGON",label:"LABEL",circle:"CIRCLE",rectangle:"RECTANGLE",ellipse:"ELLIPSE",imageTile:"IMAGE_TILE",imageGround:"IMAGE_Ground",grayTile:"GRAY_TILE",canvasGround:"CANVAS_Ground",indoor:"INDOOR",indoorRegion:"INDOOR_REGION",indoorPoi:"INDOOR_POI",indoorEscalator:"INDOOR_ESCALATOR",mask:"MASK",highlight:"HIGHLIGHT",trafficFlow:"TRAFFIC_FLOW",trafficBase:"TRAFFIC_BASE"}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var i=n(60)("keys"),r=n(47);t.exports=function(t){return i[t]||(i[t]=r(t))}},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e,n){"use strict";t.exports="TMap"},function(t,e,n){var i=n(7),r=n(8).document,a=i(r)&&i(r.createElement);t.exports=function(t){return a?r.createElement(t):{}}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var i=n(2),r=n(8),a=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:n(39)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){var i=n(64);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var i=n(7);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var i=n(48),r=n(9)("iterator"),a=n(30);t.exports=n(2).getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||a[i(t)]}},function(t,e){},function(t,e,n){e.f=n(9)},function(t,e,n){var i=n(26),r=n(97),a=n(96),o=n(13),s=n(51),l=n(66),u={},c={},e=t.exports=function(t,e,n,f,d){var h,p,v,m,g=d?function(){return t}:l(t),_=i(n,f,e?2:1),y=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(a(g)){for(h=s(t.length);h>y;y++)if((m=e?_(o(p=t[y])[0],p[1]):_(t[y]))===u||m===c)return m}else for(v=g.call(t);!(p=v.next()).done;)if((m=r(v,_,p.value,e))===u||m===c)return m};e.BREAK=u,e.RETURN=c},function(t,e,n){"use strict";function i(t){var e,n;this.promise=new t(function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i}),this.resolve=r(e),this.reject=r(n)}var r=n(42);t.exports.f=function(t){return new i(t)}},function(t,e,n){var i=n(45),r=n(41),a=n(20),o=n(65),s=n(24),l=n(84),u=Object.getOwnPropertyDescriptor;e.f=n(12)?u:function(t,e){if(t=a(t),e=o(e,!0),l)try{return u(t,e)}catch(t){}if(s(t,e))return r(!i.f.call(t,e),t[e])}},function(t,e,n){var i=n(8),r=n(2),a=n(39),o=n(68),s=n(14).f;t.exports=function(t){var e=r.Symbol||(r.Symbol=a?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:o.f(t)})}},function(t,e,n){t.exports={default:n(168),__esModule:!0}},function(t,e,n){"use strict";var i=n(39),r=n(6),a=n(77),o=n(21),s=n(30),l=n(137),u=n(43),c=n(86),f=n(9)("iterator"),d=!([].keys&&"next"in[].keys()),h=function(){return this};t.exports=function(t,e,n,p,v,m,g){l(n,e,p);var _,y,x,b=function(t){if(!d&&t in A)return A[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},S=e+" Iterator",w="values"==v,E=!1,A=t.prototype,T=A[f]||A["@@iterator"]||v&&A[v],M=T||b(v),I=v?w?b("entries"):M:void 0,P="Array"==e?A.entries||T:T;if(P&&(x=c(P.call(new t)))!==Object.prototype&&x.next&&(u(x,S,!0),i||"function"==typeof x[f]||o(x,f,h)),w&&T&&"values"!==T.name&&(E=!0,M=function(){return T.call(this)}),i&&!g||!d&&!E&&A[f]||o(A,f,M),s[e]=M,s[S]=h,v)if(_={values:w?M:b("values"),keys:m?M:b("keys"),entries:I},g)for(y in _)y in A||a(A,y,_[y]);else r(r.P+r.F*(d||E),e,_);return _}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(0),a=i(r),o=n(1),s=i(o),l=function(){function t(e,n){(0,a.default)(this,t),this.x=e,this.y=n}return(0,s.default)(t,[{key:"toString",value:function(){return this.x+", "+this.y}},{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}},{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"add",value:function(t){return this.clone()._add(t)}},{key:"sub",value:function(t){return this.clone()._sub(t)}},{key:"mult",value:function(t){return this.clone()._mult(t)}},{key:"div",value:function(t){return this.clone()._div(t)}},{key:"rotate",value:function(t){return this.clone()._rotate(t)}},{key:"matMult",value:function(t){return this.clone()._matMult(t)}},{key:"unit",value:function(){return this.clone()._unit()}},{key:"perp",value:function(){return this.clone()._perp()}},{key:"round",value:function(){return this.clone()._round()}},{key:"mag",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"equals",value:function(t){return this.x===t.x&&this.y===t.y}},{key:"dist",value:function(t){return Math.sqrt(this.distSqr(t))}},{key:"distSqr",value:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n}},{key:"angle",value:function(){return Math.atan2(this.y,this.x)}},{key:"angleTo",value:function(t){return Math.atan2(this.y-t.y,this.x-t.x)}},{key:"angleWith",value:function(t){return this.angleWithSep(t.x,t.y)}},{key:"angleWithSep",value:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)}},{key:"normalize",value:function(){return this.clone()._unit()}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"length",value:function(){return this.mag()}},{key:"lengthSq",value:function(){return this.magSq()}},{key:"_matMult",value:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this}},{key:"_add",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"_sub",value:function(t){return this.x-=t.x,this.y-=t.y,this}},{key:"_mult",value:function(t){return this.x*=t,this.y*=t,this}},{key:"_div",value:function(t){return this.x/=t,this.y/=t,this}},{key:"_unit",value:function(){return 0===this.x&&0===this.y?this:(this._div(this.mag()),this)}},{key:"_perp",value:function(){var t=this.y;return this.y=this.x,this.x=-t,this}},{key:"_rotate",value:function(t){var e=Math.cos(t),n=Math.sin(t),i=e*this.x-n*this.y,r=n*this.x+e*this.y;return this.x=i,this.y=r,this}},{key:"_round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}}]),t}();l.convert=function(t){return t instanceof l?t:Array.isArray(t)?new l(t[0],t[1]):"x"in t&&"y"in t&&"number"==typeof t.x&&"number"==typeof t.y?new l(t.x,t.y):t},t.exports=l},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){t.exports=n(21)},function(t,e,n){var i=n(365)("wks"),r=n(278),a=n(63).Symbol,o="function"==typeof a;(t.exports=function(t){return i[t]||(i[t]=o&&a[t]||(o?a:r)("Symbol."+t))}).store=i},function(t,e,n){"use strict";var i=n(23),r=function(t){return t&&t.__esModule?t:{default:t}}(i),a=n(29);e.getJSON=function(t,n,i,r){r=r||0;var o=void 0,s=void 0,l=new XMLHttpRequest;return l.open("GET",n,!0),l.setRequestHeader("Accept","application/json"),l.onloadstart=function(){return o=+new Date},l.onerror=function(){console.error(l.response,l,n),r>2?i(new a.AJAXError(n,0)):(r+=1,e.getJSON(t,n,i,r))},l.onload=function(){if(l.status>=200&&l.status<300&&l.response){s=+new Date;var t=void 0;try{t=JSON.parse(l.response)}catch(t){return i(t)}i(null,t,s-o)}else i(new a.AJAXError(l.statusText,l.status))},l.send(),l},e.getArrayBuffer=function(t,e){var n=new XMLHttpRequest;return n.open("GET",t,!0),n.responseType="arraybuffer",n.onerror=function(t){e(t)},n.onload=function(){if(0===n.response.byteLength&&200===n.status)return e(new Error("http status 200 returned without content."));n.status>=200&&n.status<300&&n.response?e(null,{data:n.response,cacheControl:n.getResponseHeader("Cache-Control"),expires:n.getResponseHeader("Expires")}):e(new a.AJAXError(n.statusText,n.status))},n.send(),n},e.getImage=function(t,e){var n=new XMLHttpRequest,i=new r.default(function(i,r){n.open("GET",t),n.responseType="blob",n.timeout=e,n.onload=function(){n.status>=200&&n.status<300&&n.response?(0===n.response.size&&r(new a.AJAXError("The size of image is 0",404)),i(n.response)):r(new a.AJAXError(n.statusText,n.status))},n.onerror=function(){r(new a.AJAXError("error",0))},n.ontimeout=function(){r(new a.AJAXError("timeout",0))},n.onabort=function(){r(new a.AJAXError("abort",0))},n.send()});return{xhr:n,promise:i}},e.getImageData=function(t,n){return e.getArrayBuffer(t,function(t,e){if(t)return n(t);n(null,e)})}},function(t,e,n){t.exports={default:n(166),__esModule:!0}},function(t,e,n){var i=n(38);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e,n){t.exports={default:n(165),__esModule:!0}},function(t,e,n){var i=n(8).document;t.exports=i&&i.documentElement},function(t,e,n){t.exports=!n(12)&&!n(31)(function(){return 7!=Object.defineProperty(n(58)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(14),r=n(13),a=n(35);t.exports=n(12)?Object.defineProperties:function(t,e){r(t);for(var n,o=a(e),s=o.length,l=0;s>l;)i.f(t,n=o[l++],e[n]);return t}},function(t,e,n){var i=n(24),r=n(33),a=n(55)("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?o:null}},function(t,e,n){var i=n(24),r=n(20),a=n(136)(!1),o=n(55)("IE_PROTO");t.exports=function(t,e){var n,s=r(t),l=0,u=[];for(n in s)n!=o&&i(s,n)&&u.push(n);for(;e.length>l;)i(s,n=e[l++])&&(~a(u,n)||u.push(n));return u}},function(t,e,n){var i=n(242),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},function(t,e,n){"use strict";var i=n(213),r=i&&i.setItem&&i.getItem;t.exports={set:function(t,e,n){(null!==e?i.setItem(t,e):i.removeItem(t)).then(function(){n&&n()},function(t){console.error(t),n&&n(t)})},get:function(t,e){i.getItem(t).then(function(t){e&&e(t)},function(t){console.error(t),e&&e(null)})},support:function(){return r}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.SOURCE_TYPE={vector:"vector",geojson:"geojson",geoTask:"geo_task",imageTile:"image_tile",indoor:"indoor",indoorIndex:"indoor_index",ground:"ground",traffic:"traffic"}},function(t,e){t.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var i=n(21);t.exports=function(t,e,n){for(var r in e)n&&t[r]?t[r]=e[r]:i(t,r,e[r]);return t}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){n[t]=n[t]||[],n[t].push(e)}function a(t,e,n){if(n&&n[t]){var i=n[t].indexOf(e);-1!==i&&n[t].splice(i,1)}}var o=n(3),s=i(o),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),p=n(4),v=i(p),m=n(10),g=n(112),_=function(t){function e(){(0,u.default)(this,e);var t=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this));return t.setMaxListeners(500),t}return(0,v.default)(e,t),(0,f.default)(e,[{key:"_on",value:function(t,e){return this._listeners=this._listeners||{},r(t,e,this._listeners),this.on(t,e),e}},{key:"_off",value:function(t,e){return a(t,e,this._listeners),a(t,e,this._oneTimeListeners),this.off(t,e),this}},{key:"_once",value:function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},r(t,e,this._oneTimeListeners),this.once(t,e),e}},{key:"_fire",value:function(t,e,n){if(this._listens(t)){e=n?m.extend({},e,{type:t}):m.extend({},e,{type:t,target:this});for(var i=this._listeners&&this._listeners[t]?this._listeners[t].slice():[],r=0;r<i.length;r++)i[r].call(this,e);for(var o=this._oneTimeListeners&&this._oneTimeListeners[t]?this._oneTimeListeners[t].slice():[],s=0;s<o.length;s++)o[s].call(this,e),a(t,o[s],this._oneTimeListeners);this._eventedParent&&this._eventedParent._fire(t,m.extend({},e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData))}else m.endsWith(t,"error")&&console.error(e&&e.error||e||"Empty error event");return this.emit(t,e),this}},{key:"_listens",value:function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent._listens(t)||this.listenerCount(t)>0}},{key:"_setEventedParent",value:function(t,e){return this._eventedParent=t,this._eventedParentData=e,this}},{key:"_clearAllListeners",value:function(){this._listeners={},this.removeAllListeners()}}]),e}(g);t.exports=_},function(t,e,n){t.exports={default:n(427),__esModule:!0}},function(t,e,n){t.exports={default:n(317),__esModule:!0}},function(t,e,n){var i=n(30),r=n(9)("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||a[r]===t)}},function(t,e,n){var i=n(13);t.exports=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(e){var a=t.return;throw void 0!==a&&i(a.call(t)),e}}},function(t,e,n){var i=n(9)("iterator"),r=!1;try{var a=[7][i]();a.return=function(){r=!0},Array.from(a,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var a=[7],o=a[i]();o.next=function(){return{done:n=!0}},a[i]=function(){return o},t(a)}catch(t){}return n}},function(t,e,n){var i=n(20),r=n(100).f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return r(t)}catch(t){return o.slice()}};t.exports.f=function(t){return o&&"[object Window]"==a.call(t)?s(t):r(i(t))}},function(t,e,n){var i=n(87),r=n(59).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var i=n(13),r=n(7),a=n(70);t.exports=function(t,e){if(i(t),r(e)&&e.constructor===t)return e;var n=a.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){var i=n(13),r=n(42),a=n(9)("species");t.exports=function(t,e){var n,o=i(t).constructor;return void 0===o||void 0==(n=i(o)[a])?e:r(n)}},function(t,e,n){var i,r,a,o=n(26),s=n(153),l=n(83),u=n(58),c=n(8),f=c.process,d=c.setImmediate,h=c.clearImmediate,p=c.MessageChannel,v=c.Dispatch,m=0,g={},_=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},y=function(t){_.call(t.data)};d&&h||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return g[++m]=function(){s("function"==typeof t?t:Function(t),e)},i(m),m},h=function(t){delete g[t]},"process"==n(38)(f)?i=function(t){f.nextTick(o(_,t,1))}:v&&v.now?i=function(t){v.now(o(_,t,1))}:p?(r=new p,a=r.port2,r.port1.onmessage=y,i=o(a.postMessage,a,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(i=function(t){c.postMessage(t+"","*")},c.addEventListener("message",y,!1)):i="onreadystatechange"in u("script")?function(t){l.appendChild(u("script")).onreadystatechange=function(){l.removeChild(this),_.call(t)}}:function(t){setTimeout(o(_,t,1),0)}),t.exports={set:d,clear:h}},function(t,e){var n=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=n)},function(t,e,n){t.exports=!n(62)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(61),r=n(559),a=n(261),o=Object.defineProperty;e.f=n(106)?Object.defineProperty:function(t,e,n){if(i(t),e=a(e,!0),i(n),r)try{return o(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(128),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=r.default[0]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Vector4=e.Vector3=e.Matrix4=void 0;var i=n(19),r=function(t){return t&&t.__esModule?t:{default:t}}(i),a=function(t){var e=void 0,n=void 0,i=void 0;if(t&&"object"===(void 0===t?"undefined":(0,r.default)(t))&&t.hasOwnProperty("elements")){for(n=t.elements,i=new Float32Array(16),e=0;e<16;++e)i[e]=n[e];this.elements=i}else{var a=new Float32Array(16);a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,this.elements=a}};a.prototype.setIdentity=function(){var t=this.elements;return t[0]=1,t[4]=0,t[8]=0,t[12]=0,t[1]=0,t[5]=1,t[9]=0,t[13]=0,t[2]=0,t[6]=0,t[10]=1,t[14]=0,t[3]=0,t[7]=0,t[11]=0,t[15]=1,this},a.prototype.clone=function(){var t=new a,e=this.elements,n=t.elements;return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],t},a.prototype.set=function(t){var e=void 0,n=t.elements,i=this.elements;if(n!==i){for(e=0;e<16;++e)i[e]=n[e];return this}},a.prototype.concat=function(t){var e=void 0,n=void 0,i=void 0,r=void 0,a=void 0,o=void 0,s=this.elements,l=this.elements;if(n=t.elements,s===n)for(n=new Float32Array(16),e=0;e<16;++e)n[e]=s[e];for(e=0;e<4;e++)i=l[e],r=l[e+4],a=l[e+8],o=l[e+12],s[e]=i*n[0]+r*n[1]+a*n[2]+o*n[3],s[e+4]=i*n[4]+r*n[5]+a*n[6]+o*n[7],s[e+8]=i*n[8]+r*n[9]+a*n[10]+o*n[11],s[e+12]=i*n[12]+r*n[13]+a*n[14]+o*n[15];return this},a.prototype.multiply=a.prototype.concat,a.prototype.multiplyVector3=function(t){var e=this.elements,n=t.elements,i=new o,r=i.elements;return r[0]=n[0]*e[0]+n[1]*e[4]+n[2]*e[8]+e[12],r[1]=n[0]*e[1]+n[1]*e[5]+n[2]*e[9]+e[13],r[2]=n[0]*e[2]+n[1]*e[6]+n[2]*e[10]+e[14],i},a.prototype.multiplyVector4=function(t){var e=this.elements,n=t.elements,i=new s,r=i.elements;return r[0]=n[0]*e[0]+n[1]*e[4]+n[2]*e[8]+n[3]*e[12],r[1]=n[0]*e[1]+n[1]*e[5]+n[2]*e[9]+n[3]*e[13],r[2]=n[0]*e[2]+n[1]*e[6]+n[2]*e[10]+n[3]*e[14],r[3]=n[0]*e[3]+n[1]*e[7]+n[2]*e[11]+n[3]*e[15],i},a.prototype.transpose=function(){var t=void 0,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},a.prototype.setInverseOf=function(t){var e=void 0,n=void 0,i=t.elements,r=this.elements,a=new Float32Array(16);if(a[0]=i[5]*i[10]*i[15]-i[5]*i[11]*i[14]-i[9]*i[6]*i[15]+i[9]*i[7]*i[14]+i[13]*i[6]*i[11]-i[13]*i[7]*i[10],a[4]=-i[4]*i[10]*i[15]+i[4]*i[11]*i[14]+i[8]*i[6]*i[15]-i[8]*i[7]*i[14]-i[12]*i[6]*i[11]+i[12]*i[7]*i[10],a[8]=i[4]*i[9]*i[15]-i[4]*i[11]*i[13]-i[8]*i[5]*i[15]+i[8]*i[7]*i[13]+i[12]*i[5]*i[11]-i[12]*i[7]*i[9],a[12]=-i[4]*i[9]*i[14]+i[4]*i[10]*i[13]+i[8]*i[5]*i[14]-i[8]*i[6]*i[13]-i[12]*i[5]*i[10]+i[12]*i[6]*i[9],a[1]=-i[1]*i[10]*i[15]+i[1]*i[11]*i[14]+i[9]*i[2]*i[15]-i[9]*i[3]*i[14]-i[13]*i[2]*i[11]+i[13]*i[3]*i[10],a[5]=i[0]*i[10]*i[15]-i[0]*i[11]*i[14]-i[8]*i[2]*i[15]+i[8]*i[3]*i[14]+i[12]*i[2]*i[11]-i[12]*i[3]*i[10],a[9]=-i[0]*i[9]*i[15]+i[0]*i[11]*i[13]+i[8]*i[1]*i[15]-i[8]*i[3]*i[13]-i[12]*i[1]*i[11]+i[12]*i[3]*i[9],a[13]=i[0]*i[9]*i[14]-i[0]*i[10]*i[13]-i[8]*i[1]*i[14]+i[8]*i[2]*i[13]+i[12]*i[1]*i[10]-i[12]*i[2]*i[9],a[2]=i[1]*i[6]*i[15]-i[1]*i[7]*i[14]-i[5]*i[2]*i[15]+i[5]*i[3]*i[14]+i[13]*i[2]*i[7]-i[13]*i[3]*i[6],a[6]=-i[0]*i[6]*i[15]+i[0]*i[7]*i[14]+i[4]*i[2]*i[15]-i[4]*i[3]*i[14]-i[12]*i[2]*i[7]+i[12]*i[3]*i[6],a[10]=i[0]*i[5]*i[15]-i[0]*i[7]*i[13]-i[4]*i[1]*i[15]+i[4]*i[3]*i[13]+i[12]*i[1]*i[7]-i[12]*i[3]*i[5],a[14]=-i[0]*i[5]*i[14]+i[0]*i[6]*i[13]+i[4]*i[1]*i[14]-i[4]*i[2]*i[13]-i[12]*i[1]*i[6]+i[12]*i[2]*i[5],a[3]=-i[1]*i[6]*i[11]+i[1]*i[7]*i[10]+i[5]*i[2]*i[11]-i[5]*i[3]*i[10]-i[9]*i[2]*i[7]+i[9]*i[3]*i[6],a[7]=i[0]*i[6]*i[11]-i[0]*i[7]*i[10]-i[4]*i[2]*i[11]+i[4]*i[3]*i[10]+i[8]*i[2]*i[7]-i[8]*i[3]*i[6],a[11]=-i[0]*i[5]*i[11]+i[0]*i[7]*i[9]+i[4]*i[1]*i[11]-i[4]*i[3]*i[9]-i[8]*i[1]*i[7]+i[8]*i[3]*i[5],a[15]=i[0]*i[5]*i[10]-i[0]*i[6]*i[9]-i[4]*i[1]*i[10]+i[4]*i[2]*i[9]+i[8]*i[1]*i[6]-i[8]*i[2]*i[5],0===(n=i[0]*a[0]+i[1]*a[4]+i[2]*a[8]+i[3]*a[12]))return this;for(n=1/n,e=0;e<16;e++)r[e]=a[e]*n;return this},a.prototype.invert=function(){return this.setInverseOf(this)},a.prototype.setOrtho=function(t,e,n,i,r,a){if(t===e||n===i||r===a)throw"null frustum";var o=1/(e-t),s=1/(i-n),l=1/(a-r),u=this.elements;return u[0]=2*o,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=2*s,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=-2*l,u[11]=0,u[12]=-(e+t)*o,u[13]=-(i+n)*s,u[14]=-(a+r)*l,u[15]=1,this},a.prototype.ortho=function(t,e,n,i,r,o){return this.concat((new a).setOrtho(t,e,n,i,r,o))},a.prototype.setFrustum=function(t,e,n,i,r,a){if(t===e||i===n||r===a)throw"null frustum";if(r<=0)throw"near <= 0";if(a<=0)throw"far <= 0";var o=1/(e-t),s=1/(i-n),l=1/(a-r),u=this.elements;return u[0]=2*r*o,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=2*r*s,u[6]=0,u[7]=0,u[8]=(e+t)*o,u[9]=(i+n)*s,u[10]=-(a+r)*l,u[11]=-1,u[12]=0,u[13]=0,u[14]=-2*r*a*l,u[15]=0,this},a.prototype.frustum=function(t,e,n,i,r,o){return this.concat((new a).setFrustum(t,e,n,i,r,o))},a.prototype.setPerspective=function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(n===i||0===e)throw"null frustum";if(n<=0)throw"near <= 0";if(i<=0)throw"far <= 0";t=Math.PI*t/180/2;var o=Math.sin(t);if(0===o)throw"null frustum";var s=1/(i-n),l=Math.cos(t)/o,u=this.elements;return u[0]=l/e,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=l,u[6]=0,u[7]=0,u[8]=-r,u[9]=-a,u[10]=-(i+n)*s,u[11]=-1,u[12]=0,u[13]=0,u[14]=-2*n*i*s,u[15]=0,this},a.prototype.perspective=function(t,e,n,i){return this.concat((new a).setPerspective(t,e,n,i))},a.prototype.setScale=function(t,e,n){var i=this.elements;return i[0]=t,i[4]=0,i[8]=0,i[12]=0,i[1]=0,i[5]=e,i[9]=0,i[13]=0,i[2]=0,i[6]=0,i[10]=n,i[14]=0,i[3]=0,i[7]=0,i[11]=0,i[15]=1,this},a.prototype.scale=function(t,e,n){var i=this.elements;return i[0]*=t,i[4]*=e,i[8]*=n,i[1]*=t,i[5]*=e,i[9]*=n,i[2]*=t,i[6]*=e,i[10]*=n,i[3]*=t,i[7]*=e,i[11]*=n,this},a.prototype.setTranslate=function(t,e,n){var i=this.elements;return i[0]=1,i[4]=0,i[8]=0,i[12]=t,i[1]=0,i[5]=1,i[9]=0,i[13]=e,i[2]=0,i[6]=0,i[10]=1,i[14]=n,i[3]=0,i[7]=0,i[11]=0,i[15]=1,this},a.prototype.translate=function(t,e,n){var i=this.elements;return i[12]+=i[0]*t+i[4]*e+i[8]*n,i[13]+=i[1]*t+i[5]*e+i[9]*n,i[14]+=i[2]*t+i[6]*e+i[10]*n,i[15]+=i[3]*t+i[7]*e+i[11]*n,this},a.prototype.setRotate=function(t,e,n,i){var r=void 0,a=void 0,o=void 0,s=void 0,l=void 0,u=void 0,c=void 0,f=void 0,d=void 0,h=void 0;t=Math.PI*t/180;var p=this.elements;r=Math.sin(t);var v=Math.cos(t);return 0!==e&&0===n&&0===i?(e<0&&(r=-r),p[0]=1,p[4]=0,p[8]=0,p[12]=0,p[1]=0,p[5]=v,p[9]=-r,p[13]=0,p[2]=0,p[6]=r,p[10]=v,p[14]=0,p[3]=0,p[7]=0,p[11]=0,p[15]=1):0===e&&0!==n&&0===i?(n<0&&(r=-r),p[0]=v,p[4]=0,p[8]=r,p[12]=0,p[1]=0,p[5]=1,p[9]=0,p[13]=0,p[2]=-r,p[6]=0,p[10]=v,p[14]=0,p[3]=0,p[7]=0,p[11]=0,p[15]=1):0===e&&0===n&&0!==i?(i<0&&(r=-r),p[0]=v,p[4]=-r,p[8]=0,p[12]=0,p[1]=r,p[5]=v,p[9]=0,p[13]=0,p[2]=0,p[6]=0,p[10]=1,p[14]=0,p[3]=0,p[7]=0,p[11]=0,p[15]=1):(a=Math.sqrt(e*e+n*n+i*i),1!==a&&(o=1/a,e*=o,n*=o,i*=o),s=1-v,l=e*n,u=n*i,c=i*e,f=e*r,d=n*r,h=i*r,p[0]=e*e*s+v,p[1]=l*s+h,p[2]=c*s-d,p[3]=0,p[4]=l*s-h,p[5]=n*n*s+v,p[6]=u*s+f,p[7]=0,p[8]=c*s+d,p[9]=u*s-f,p[10]=i*i*s+v,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1),this},a.prototype.rotate=function(t,e,n,i){return this.concat((new a).setRotate(t,e,n,i))},a.prototype.setLookAt=function(t,e,n,i,r,a,o,s,l){var u=void 0,c=void 0,f=void 0,d=void 0,h=void 0,p=void 0;u=i-t,c=r-e,f=a-n;var v=1/Math.sqrt(u*u+c*c+f*f);u*=v,c*=v,f*=v,d=c*l-f*s,h=f*o-u*l,p=u*s-c*o;var m=1/Math.sqrt(d*d+h*h+p*p);d*=m,h*=m,p*=m;var g=h*f-p*c,_=p*u-d*f,y=d*c-h*u,x=this.elements;return x[0]=d,x[1]=g,x[2]=-u,x[3]=0,x[4]=h,x[5]=_,x[6]=-c,x[7]=0,x[8]=p,x[9]=y,x[10]=-f,x[11]=0,x[12]=0,x[13]=0,x[14]=0,x[15]=1,this.translate(-t,-e,-n)},a.prototype.lookAt=function(t,e,n,i,r,o,s,l,u){return this.concat((new a).setLookAt(t,e,n,i,r,o,s,l,u))},a.prototype.dropShadow=function(t,e){var n=new a,i=n.elements,r=t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3];return i[0]=r-e[0]*t[0],i[1]=-e[1]*t[0],i[2]=-e[2]*t[0],i[3]=-e[3]*t[0],i[4]=-e[0]*t[1],i[5]=r-e[1]*t[1],i[6]=-e[2]*t[1],i[7]=-e[3]*t[1],i[8]=-e[0]*t[2],i[9]=-e[1]*t[2],i[10]=r-e[2]*t[2],i[11]=-e[3]*t[2],i[12]=-e[0]*t[3],i[13]=-e[1]*t[3],i[14]=-e[2]*t[3],i[15]=r-e[3]*t[3],this.concat(n)},a.prototype.dropShadowDirectionally=function(t,e,n,i,r,a,o,s,l){var u=i*t+r*e+a*n;return this.dropShadow([t,e,n,-u],[o,s,l,0])};var o=function(){var t=1===arguments.length?arguments[0]:arguments,e=new Float32Array(3);t&&"object"===(void 0===t?"undefined":(0,r.default)(t))&&(e[0]=t[0],e[1]=t[1],e[2]=t[2]),this.elements=e};o.prototype.normalize=function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=Math.sqrt(e*e+n*n+i*i);return r?1===r?this:(r=1/r,t[0]=e*r,t[1]=n*r,t[2]=i*r,this):(t[0]=0,t[1]=0,t[2]=0,this)},o.prototype.scale=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=this.elements;return i[0]*=t,i[1]*=e,i[2]*=n,this},o.prototype.cross=function(t){var e=this.elements,n=t.elements;return new o(e[1]*n[2]-e[2]*n[1],e[2]*n[0]-e[0]*n[2],e[0]*n[1]-e[1]*n[0])},o.prototype.equals=function(t){var e=this.elements,n=t.elements;return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]};var s=function(){var t=1===arguments.length?arguments[0]:arguments,e=new Float32Array(4);t&&"object"===(void 0===t?"undefined":(0,r.default)(t))&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),this.elements=e};s.prototype.set=function(t,e,n){this.elements[0]=t,this.elements[1]=e,this.elements[2]=n},s.prototype.multiply=function(t){return this.elements[0]*=t,this.elements[1]*=t,this.elements[2]*=t,this.elements[3]*=t,this},s.prototype.add=function(t){return this.elements[0]+=t.elements[0],this.elements[1]+=t.elements[1],this.elements[2]+=t.elements[2],this.elements[3]+=t.elements[3],this},s.prototype.minus=function(t){return this.elements[0]-=t.elements[0],this.elements[1]-=t.elements[1],this.elements[2]-=t.elements[2],this.elements[3]-=t.elements[3],this},e.Matrix4=a,e.Vector3=o,e.Vector4=s},function(t,e,n){t.exports={default:n(169),__esModule:!0}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";function i(t){console&&console.warn&&console.warn(t)}function r(){r.init.call(this)}function a(t){return void 0===t._maxListeners?r.defaultMaxListeners:t._maxListeners}function o(t,e,n,r){var o,s,l;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(s=t._events,void 0===s?(s=t._events=Object.create(null),t._eventsCount=0):(void 0!==s.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),l=s[e]),void 0===l)l=s[e]=n,++t._eventsCount;else if("function"==typeof l?l=s[e]=r?[n,l]:[l,n]:r?l.unshift(n):l.push(n),(o=a(t))>0&&l.length>o&&!l.warned){l.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=l.length,i(u)}return t}function s(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,m(this.listener,this.target,t))}function l(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=s.bind(i);return r.listener=n,i.wrapFn=r,r}function u(t,e,n){var i=t._events;if(void 0===i)return[];var r=i[e];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?h(r):f(r,r.length)}function c(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function d(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function h(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}var p,v="object"==typeof Reflect?Reflect:null,m=v&&"function"==typeof v.apply?v.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};p=v&&"function"==typeof v.ownKeys?v.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var g=Number.isNaN||function(t){return t!==t};t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var _=10;Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return _},set:function(t){if("number"!=typeof t||t<0||g(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");_=t}}),r.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||g(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},r.prototype.getMaxListeners=function(){return a(this)},r.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i="error"===t,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var s=r[t];if(void 0===s)return!1;if("function"==typeof s)m(s,this,e);else for(var l=s.length,u=f(s,l),n=0;n<l;++n)m(u[n],this,e);return!0},r.prototype.addListener=function(t,e){return o(this,t,e,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(t,e){return o(this,t,e,!0)},r.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.on(t,l(this,t,e)),this},r.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.prependListener(t,l(this,t,e)),this},r.prototype.removeListener=function(t,e){var n,i,r,a,o;if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);if(void 0===(i=this._events))return this;if(void 0===(n=i[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(r=-1,a=n.length-1;a>=0;a--)if(n[a]===e||n[a].listener===e){o=n[a].listener,r=a;break}if(r<0)return this;0===r?n.shift():d(n,r),1===n.length&&(i[t]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",t,o||e)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(t){var e,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var r,a=Object.keys(n);for(i=0;i<a.length;++i)"removeListener"!==(r=a[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},r.prototype.listeners=function(t){return u(this,t,!0)},r.prototype.rawListeners=function(t){return u(this,t,!1)},r.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):c.call(t,e)},r.prototype.listenerCount=c,r.prototype.eventNames=function(){return this._eventsCount>0?p(this._events):[]}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Store=e.textures=void 0;var r=n(0),a=i(r),o=n(1),s=i(o),l=function(){},u=function(){function t(e,n,i,r){(0,a.default)(this,t),this.max=n||1e4,this.type=e||"default",this.count=0,this.store={},this.reduceRange=i||Math.max(1,~~this.max/100),this.deleteCallback=r||l}return(0,s.default)(t,[{key:"set",value:function(t,e){return this.count>=this.max&&this.reduce(),t in this.store||(this.count+=1),this.store[t]=e,e}},{key:"get",value:function(t){return this.store[t]}},{key:"reduce",value:function(){var t=0,e=this.reduceRange;for(var n in this.store)if(this.store.hasOwnProperty(n)){if(!(t<e))break;t+=1,this.deleteCallback(this.store[n]),delete this.store[n]}this.count-=e}},{key:"clear",value:function(){for(var t in this.store)this.store.hasOwnProperty(t)&&(this.deleteCallback(this.store[t]),this.store[t]=null);this.store={},this.count=0}},{key:"exist",value:function(t){return t in this.store}},{key:"remove",value:function(t){t in this.store&&(this.deleteCallback(this.store[t]),delete this.store[t],this.count-=1)}}]),t}(),c=new u("texture",1e3);e.textures=c,e.Store=u},function(t,e,n){t.exports={default:n(171),__esModule:!0}},function(t,e,n){t.exports={default:n(268),__esModule:!0}},function(t,e,n){t.exports={default:n(183),__esModule:!0}},function(t,e,n){var i=n(12),r=n(35),a=n(20),o=n(45).f;t.exports=function(t){return function(e){for(var n,s=a(e),l=r(s),u=l.length,c=0,f=[];u>c;)n=l[c++],i&&!o.call(s,n)||f.push(t?[n,s[n]]:s[n]);return f}}},function(t,e,n){var i=n(7);t.exports=function(t,e){if(!i(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,n){!function(i,r,a){t.exports=e=r(n(50),n(280))}(0,function(t){t.lib.Cipher||function(e){var n=t,i=n.lib,r=i.Base,a=i.WordArray,o=i.BufferedBlockAlgorithm,s=n.enc,l=(s.Utf8,s.Base64),u=n.algo,c=u.EvpKDF,f=i.Cipher=o.extend({cfg:r.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function t(t){return"string"==typeof t?w:x}return function(e){return{encrypt:function(n,i,r){return t(i).encrypt(e,n,i,r)},decrypt:function(n,i,r){return t(i).decrypt(e,n,i,r)}}}}()}),d=(i.StreamCipher=f.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),n.mode={}),h=i.BlockCipherMode=r.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}}),p=d.CBC=function(){function t(t,n,i){var r=this._iv;if(r){var a=r;this._iv=e}else var a=this._prevBlock;for(var o=0;o<i;o++)t[n+o]^=a[o]}var n=h.extend();return n.Encryptor=n.extend({processBlock:function(e,n){var i=this._cipher,r=i.blockSize;t.call(this,e,n,r),i.encryptBlock(e,n),this._prevBlock=e.slice(n,n+r)}}),n.Decryptor=n.extend({processBlock:function(e,n){var i=this._cipher,r=i.blockSize,a=e.slice(n,n+r);i.decryptBlock(e,n),t.call(this,e,n,r),this._prevBlock=a}}),n}(),v=n.pad={},m=v.Pkcs7={pad:function(t,e){for(var n=4*e,i=n-t.sigBytes%n,r=i<<24|i<<16|i<<8|i,o=[],s=0;s<i;s+=4)o.push(r);var l=a.create(o,i);t.concat(l)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},g=(i.BlockCipher=f.extend({cfg:f.cfg.extend({mode:p,padding:m}),reset:function(){f.reset.call(this);var t=this.cfg,e=t.iv,n=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var i=n.createEncryptor;else{var i=n.createDecryptor;this._minBufferSize=1}this._mode&&this._mode.__creator==i?this._mode.init(this,e&&e.words):(this._mode=i.call(n,this,e&&e.words),this._mode.__creator=i)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else{var e=this._process(!0);t.unpad(e)}return e},blockSize:4}),i.CipherParams=r.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}})),_=n.format={},y=_.OpenSSL={stringify:function(t){var e=t.ciphertext,n=t.salt;if(n)var i=a.create([1398893684,1701076831]).concat(n).concat(e);else var i=e;return i.toString(l)},parse:function(t){var e=l.parse(t),n=e.words;if(1398893684==n[0]&&1701076831==n[1]){var i=a.create(n.slice(2,4));n.splice(0,4),e.sigBytes-=16}return g.create({ciphertext:e,salt:i})}},x=i.SerializableCipher=r.extend({cfg:r.extend({format:y}),encrypt:function(t,e,n,i){i=this.cfg.extend(i);var r=t.createEncryptor(n,i),a=r.finalize(e),o=r.cfg;return g.create({ciphertext:a,key:n,iv:o.iv,algorithm:t,mode:o.mode,padding:o.padding,blockSize:t.blockSize,formatter:i.format})},decrypt:function(t,e,n,i){return i=this.cfg.extend(i),e=this._parse(e,i.format),t.createDecryptor(n,i).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),b=n.kdf={},S=b.OpenSSL={execute:function(t,e,n,i){i||(i=a.random(8));var r=c.create({keySize:e+n}).compute(t,i),o=a.create(r.words.slice(e),4*n);return r.sigBytes=4*e,g.create({key:r,iv:o,salt:i})}},w=i.PasswordBasedCipher=x.extend({cfg:x.cfg.extend({kdf:S}),encrypt:function(t,e,n,i){i=this.cfg.extend(i);var r=i.kdf.execute(n,t.keySize,t.ivSize);i.iv=r.iv;var a=x.encrypt.call(this,t,e,r.key,i);return a.mixIn(r),a},decrypt:function(t,e,n,i){i=this.cfg.extend(i),e=this._parse(e,i.format);var r=i.kdf.execute(n,t.keySize,t.ivSize,e.salt);return i.iv=r.iv,x.decrypt.call(this,t,e,r.key,i)}})}()})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={QMAPI_style:"QMAPI__style__",QMAPI_style_indoor:"QMAPI__style__indoor__",QMAPI_poi_icon:"QMAPI__poi__icon",QMAPI_poi_icon_json:"QMAPI__poi__icon__json",QMAPI_indoor_buffer:"QMAPI__indoor__buffer__",QMAPI_indoor_index:"QMAPI__indoor__index__",VECTOR_SOURCE_ID:"vector_source",QMAPI_oversea:"QMAPI__oversea"};e.IMAGE_DISPLAY={ORIGIN:0,SCALE:1,REPEAT:2},e.VIEW_MODE={MAP_2D:"2D",MAP_3D:"3D",SPHERE:"SPHERE"},e.AUTH_STATE={SUCCESS:"success",FAIL:"fail"},e.AUTH_ERROR={netError:{error:-1,msg:"NETWORK_ERROR"}},e.DEFAULT_MARKER_ANIMATION_PARAMS={scaleStart:1,scaleEnd:1,alphaStart:1,alphaEnd:1,duration:500};e.default=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){return{x:t/n.width*2-1,y:-e/n.height*2+1,z:1}}function a(t,e,n){return{x:(t+1)/2*n.width,y:(1-e)/2*n.height}}function o(t,e,n){var i=t.multiplyVector4(e),r=i.elements.map(function(t){return t/i.elements[3]}),o=a(r[0],r[1],n);return{x:o.x,y:o.y,depthScale:1}}function s(t,e){var n=t.multiplyVector4(e);return n.multiply(1/n.elements[3])}function l(t,e){var n=t.clone().invert(),i=new b.Vector4(e.x,e.y,0,1),r=new b.Vector4(e.x,e.y,1,1),a=n.multiplyVector4(i),o=n.multiplyVector4(r);a.multiply(1/a.elements[3]),o.multiply(1/o.elements[3]);var s=(0-a.elements[2])/(o.elements[2]-a.elements[2]),l=a.add(o.minus(a).multiply(s));return{x:l.elements[0],y:l.elements[1]}}function u(t,e,n){var i=t.clone().invert(),r=new b.Vector4(e.x,e.y,0,1),a=new b.Vector4(e.x,e.y,1,1),o=i.multiplyVector4(r),s=i.multiplyVector4(a);o.multiply(1/o.elements[3]),s.multiply(1/s.elements[3]);var l=new M.default(new b.Vector3(o.elements),new b.Vector3(s.elements)),u=new P.default(new b.Vector3(0,0,-n),n),c=u.intersectWithLine(l);if(c.length){var f=(0,p.default)(c,2),d=f[0],h=f[1],v=d.elements[2]>h.elements[2]?d:h,m=(0,p.default)(v.elements,3);return{x:m[0],y:m[1],z:m[2]}}return null}function c(t){return 2*Math.PI*m.default/(Math.pow(2,t)*_.default.tileSize)}function f(t){var e=t.x,n=t.y;return e=e/L*180,n=n/L*180,n=180/Math.PI*(2*Math.atan(Math.exp(n*Math.PI/180))-Math.PI/2),new w.default(n,e)}function d(t){var e=t.lng,n=t.lat;return e=e*L/180,n=Math.log(Math.tan((90+n)*Math.PI/360))/(Math.PI/180),n=n*L/180,new A.default(e,n)}Object.defineProperty(e,"__esModule",{value:!0});var h=n(27),p=i(h);e.fromScreenToNdc=r,e.fromNdcToScreen=a,e.getScreenCoordsByCustomMatrix=o,e.getNdcCoordsByCustomMatrix=s,e.getZPlaneCoordsByCustomMatrix=l,e.getSphereCoordsByCustomMatrix=u,e.getSpatialResolution=c,e.mercatorToLatLng=f,e.latLngToMercator=d;var v=n(303),m=i(v),g=n(22),_=i(g),y=n(245),x=i(y),b=n(109),S=n(46),w=i(S),E=n(75),A=i(E),T=n(393),M=i(T),I=n(394),P=i(I),k=x.default[1],L=k/2},function(t,e,n){t.exports={default:n(167),__esModule:!0}},function(t,e,n){t.exports={default:n(170),__esModule:!0}},function(t,e,n){t.exports={default:n(182),__esModule:!0}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(15),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=r.default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}},function(t,e,n){var i=n(38);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e,n){"use strict";var i=n(8),r=n(2),a=n(14),o=n(12),s=n(9)("species");t.exports=function(t){var e="function"==typeof r[t]?r[t]:i[t];o&&e&&!e[s]&&a.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){"use strict";function i(t,e){t.loadScriptTime=e,l[0]=t;for(var n in t)a.hasOwnProperty(n)&&(a[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0});var r=n(57),a=n(22),o=2*Math.PI*6378136.49,s=[6378136.49,o],l=[{},s],u=self[r]&&self[r].__load;u&&u(i),self.CESIUM_BASE_URL=a.cesiumStaticSrc,e.default=l},,function(t,e,n){"use strict";function i(t){return t*(Math.PI/180)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,n){t.exports={default:n(134),__esModule:!0}},function(t,e,n){t.exports={default:n(320),__esModule:!0}},function(t,e,n){n(37),n(34),t.exports=n(140)},function(t,e,n){n(37),n(34),t.exports=n(141)},function(t,e){t.exports=function(){}},function(t,e,n){var i=n(20),r=n(51),a=n(139);t.exports=function(t){return function(e,n,o){var s,l=i(e),u=r(l.length),c=a(o,u);if(t&&n!=n){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((t||c in l)&&l[c]===n)return t||c||0;return!t&&-1}}},function(t,e,n){"use strict";var i=n(49),r=n(41),a=n(43),o={};n(21)(o,n(9)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(o,{next:r(1,n)}),a(t,e+" Iterator")}},function(t,e,n){var i=n(56),r=n(54);t.exports=function(t){return function(e,n){var a,o,s=String(r(e)),l=i(n),u=s.length;return l<0||l>=u?t?"":void 0:(a=s.charCodeAt(l),a<55296||a>56319||l+1===u||(o=s.charCodeAt(l+1))<56320||o>57343?t?s.charAt(l):a:t?s.slice(l,l+2):o-56320+(a-55296<<10)+65536)}}},function(t,e,n){var i=n(56),r=Math.max,a=Math.min;t.exports=function(t,e){return t=i(t),t<0?r(t+e,0):a(t,e)}},function(t,e,n){var i=n(13),r=n(66);t.exports=n(2).getIterator=function(t){var e=r(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return i(e.call(t))}},function(t,e,n){var i=n(48),r=n(9)("iterator"),a=n(30);t.exports=n(2).isIterable=function(t){var e=Object(t);return void 0!==e[r]||"@@iterator"in e||a.hasOwnProperty(i(e))}},function(t,e,n){"use strict";var i=n(135),r=n(111),a=n(30),o=n(20);t.exports=n(74)(Array,"Array",function(t,e){this._t=o(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):"keys"==e?r(0,n):"values"==e?r(0,t[n]):r(0,[n,t[n]])},"values"),a.Arguments=a.Array,i("keys"),i("values"),i("entries")},function(t,e,n){var i=n(254);t.exports=function(t){return Object(i(t))}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},,function(t,e,n){"use strict";function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.GROUND,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 1e4*t+(0,a.clamp)(e,0,9999)}function r(){return 1e4*o.TEXT}Object.defineProperty(e,"__esModule",{value:!0}),e.LAYER_LEVEL=void 0,e.getRank=i,e.getNAALine=r;var a=n(10),o=e.LAYER_LEVEL={UNDERGROUND:0,BASE:1,GROUND:2,BUILDING:3,OVERLAY_AA:4,POST_PROCESS:5,TEXT:6,OVERLAY_NAA:7}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(t){for(var e=0;e<t.length;e++){var n=t[e].string,i=t[e].prop;if(this.versionSearchString=t[e].versionSearch||t[e].identity,n){if(-1!==n.indexOf(t[e].subString))return t[e].identity}else if(i)return t[e].identity}},searchVersion:function(t){var e=t.indexOf(this.versionSearchString);if(-1!==e)return parseFloat(t.substring(e+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:self.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};i.init(),e.default=i},function(t,e,n){"use strict";function i(t){return t-(0,o.default)(t)}function r(t){var e=(0,o.default)(t);return{high:e,low:t-e}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(418),o=function(t){return t&&t.__esModule?t:{default:t}}(a);e.fp64LowPart=i,e.splitLatLngNumber=r},function(t,e,n){t.exports={default:n(229),__esModule:!0}},function(t,e,n){t.exports={default:n(172),__esModule:!0}},function(t,e,n){t.exports={default:n(179),__esModule:!0}},function(t,e,n){t.exports={default:n(180),__esModule:!0}},function(t,e){t.exports=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(){return"&random="+(+new Date).toString(36)}function a(t){(0,b.getImage)(t+r())}function o(t){if(self.window){(new Image).src=t+r()}}function s(t,e,n){var i=S[t];return i||(i=new w({id:t,path:e})),i.on("send",function(){i.receiveData(n())}),S[t]}Object.defineProperty(e,"__esModule",{value:!0});var l=n(3),u=i(l),c=n(0),f=i(c),d=n(1),h=i(d),p=n(5),v=i(p),m=n(4),g=i(m);e.sendByAjax=a,e.sendOnce=o,e.sendPeriodically=s;var _=n(112),y=n(10),x=i(y),b=n(79),S={},w=function(t){function e(t){var n=t.id,i=t.path;(0,f.default)(this,e);var r=(0,v.default)(this,(e.__proto__||(0,u.default)(e)).call(this));return r.id=n,r.path=i,r.dataList=[],setInterval(function(){r.send()},5e3),window.addEventListener("beforeunload",function(){r.send()}),r}return(0,g.default)(e,t),(0,h.default)(e,[{key:"receiveData",value:function(t){var e=this;x.default.forIn(t,function(t,n){e.dataList.push(t+"="+n)})}},{key:"send",value:function(){if(this.emit("send"),this.dataList.length>0){var t=this.path+(-1===this.path.indexOf("?")?"?":"&")+this.dataList.join("&");this.dataList=[],o(t)}}}]),e}(_.EventEmitter)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(){return!!(a()&&o()&&s()&&l()&&u()&&c()&&f()&&d())}function a(){return"undefined"!=typeof window&&"undefined"!=typeof document}function o(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function s(){return Function.prototype&&Function.prototype.bind}function l(){return z.default&&O.default&&N.default&&R.default&&L.default&&P.default&&M.default&&A.default&&w.default&&b.default&&y.default&&g.default&&v.default}function u(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function c(){return"Worker"in window}function f(){return"Uint8ClampedArray"in window}function d(){var t=V.context||null;if(!t){t=h(),V.context=t;var e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e.UNMASKED_VENDOR_WEBGL),i=t.getParameter(e.UNMASKED_RENDERER_WEBGL);V.vendor=n,V.renderer=i,V.isIndependentDisplayCard=!/(\bHD\b)|(\bUHD\b)/.test(i)}return V}function h(){var t=document.createElement("canvas"),e=(0,O.default)(r.webGLContextAttributes);return t.getContext("webgl",e)||t.getContext("experimental-webgl",e)}Object.defineProperty(e,"__esModule",{value:!0});var p=n(163),v=i(p),m=n(123),g=i(m),_=n(151),y=i(_),x=n(122),b=i(x),S=n(73),w=i(S),E=n(114),A=i(E),T=n(160),M=i(T),I=n(161),P=i(I),k=n(162),L=i(k),C=n(150),R=i(C),D=n(3),N=i(D),B=n(80),O=i(B),F=n(17),z=i(F);e.isSupported=r,e.isWebGLSupportedCached=d;var V={};r.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(0),a=i(r),o=n(1),s=i(o),l=function(){function t(e,n,i,r){(0,a.default)(this,t),this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(r-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=n,this.p2x=i,this.p2y=r}return(0,s.default)(t,[{key:"sampleCurveX",value:function(t){return((this.ax*t+this.bx)*t+this.cx)*t}},{key:"sampleCurveY",value:function(t){return((this.ay*t+this.by)*t+this.cy)*t}},{key:"sampleCurveDerivativeX",value:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx}},{key:"solveCurveX",value:function(t,e){void 0===e&&(e=1e-6);var n=void 0,i=void 0,r=void 0,a=void 0,o=void 0;for(r=t,o=0;o<8;o++){if(a=this.sampleCurveX(r)-t,Math.abs(a)<e)return r;var s=this.sampleCurveDerivativeX(r);if(Math.abs(s)<1e-6)break;r-=a/s}if(n=0,i=1,(r=t)<n)return n;if(r>i)return i;for(;n<i;){if(a=this.sampleCurveX(r),Math.abs(a-t)<e)return r;t>a?n=r:i=r,r=.5*(i-n)+n}return r}},{key:"solve",value:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}}]),t}();t.exports=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.GEOMETRY_TYPES={POINT:"POINT",POLYLINE:"POLYLINE",POLYGON:"POLYGON",LABEL:"LABEL",CIRCLE:"CIRCLE",RECTANGLE:"RECTANGLE",ELLIPSE:"ELLIPSE",MASK:"MASK",HIGHLIGHT:"HIGHLIGHT"}},function(t,e,n){"use strict";function i(t){return t/(Math.PI/180)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,n){t.exports={default:n(174),__esModule:!0}},function(t,e,n){t.exports={default:n(175),__esModule:!0}},function(t,e,n){t.exports={default:n(176),__esModule:!0}},function(t,e,n){t.exports={default:n(178),__esModule:!0}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(73),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t,e,n){return e in t?(0,r.default)(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){n(34),n(189),t.exports=n(2).Array.from},function(t,e,n){n(190);var i=n(2).Object;t.exports=function(t,e){return i.create(t,e)}},function(t,e,n){n(191);var i=n(2).Object;t.exports=function(t,e){return i.defineProperties(t,e)}},function(t,e,n){n(192);var i=n(2).Object;t.exports=function(t,e,n){return i.defineProperty(t,e,n)}},function(t,e,n){n(206),t.exports=n(2).Object.entries},function(t,e,n){n(193),t.exports=n(2).Object.freeze},function(t,e,n){n(194);var i=n(2).Object;t.exports=function(t,e){return i.getOwnPropertyDescriptor(t,e)}},function(t,e,n){n(195);var i=n(2).Object;t.exports=function(t){return i.getOwnPropertyNames(t)}},function(t,e,n){n(196),t.exports=n(2).Object.getPrototypeOf},function(t,e,n){n(197),t.exports=n(2).Object.isExtensible},function(t,e,n){n(198),t.exports=n(2).Object.isFrozen},function(t,e,n){n(199),t.exports=n(2).Object.isSealed},function(t,e,n){n(200),t.exports=n(2).Object.keys},function(t,e,n){n(201),t.exports=n(2).Object.preventExtensions},function(t,e,n){n(202),t.exports=n(2).Object.seal},function(t,e,n){n(203),t.exports=n(2).Object.setPrototypeOf},function(t,e,n){n(67),n(34),n(37),n(204),n(207),n(208),t.exports=n(2).Promise},function(t,e,n){n(205),n(67),n(209),n(210),t.exports=n(2).Symbol},function(t,e,n){n(34),n(37),t.exports=n(68).f("iterator")},function(t,e,n){"use strict";var i=n(14),r=n(41);t.exports=function(t,e,n){e in t?i.f(t,e,r(0,n)):t[e]=n}},function(t,e,n){var i=n(35),r=n(76),a=n(45);t.exports=function(t){var e=i(t),n=r.f;if(n)for(var o,s=n(t),l=a.f,u=0;s.length>u;)l.call(t,o=s[u++])&&e.push(o);return e}},function(t,e,n){var i=n(8),r=n(104).set,a=i.MutationObserver||i.WebKitMutationObserver,o=i.process,s=i.Promise,l="process"==n(38)(o);t.exports=function(){var t,e,n,u=function(){var i,r;for(l&&(i=o.domain)&&i.exit();t;){r=t.fn,t=t.next;try{r()}catch(i){throw t?n():e=void 0,i}}e=void 0,i&&i.enter()};if(l)n=function(){o.nextTick(u)};else if(!a||i.navigator&&i.navigator.standalone)if(s&&s.resolve){var c=s.resolve(void 0);n=function(){c.then(u)}}else n=function(){r.call(i,u)};else{var f=!0,d=document.createTextNode("");new a(u).observe(d,{characterData:!0}),n=function(){d.data=f=!f}}return function(i){var r={fn:i,next:void 0};e&&(e.next=r),t||(t=r,n()),e=r}}},function(t,e,n){var i=n(7),r=n(13),a=function(t,e){if(r(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=n(26)(Function.call,n(71).f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return a(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:a}},function(t,e,n){var i=n(8),r=i.navigator;t.exports=r&&r.userAgent||""},function(t,e,n){"use strict";var i=n(26),r=n(6),a=n(33),o=n(97),s=n(96),l=n(51),u=n(184),c=n(66);r(r.S+r.F*!n(98)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,r,f,d=a(t),h="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,m=void 0!==v,g=0,_=c(d);if(m&&(v=i(v,p>2?arguments[2]:void 0,2)),void 0==_||h==Array&&s(_))for(e=l(d.length),n=new h(e);e>g;g++)u(n,g,m?v(d[g],g):d[g]);else for(f=_.call(d),n=new h;!(r=f.next()).done;g++)u(n,g,m?o(f,v,[r.value,g],!0):r.value);return n.length=g,n}})},function(t,e,n){var i=n(6);i(i.S,"Object",{create:n(49)})},function(t,e,n){var i=n(6);i(i.S+i.F*!n(12),"Object",{defineProperties:n(85)})},function(t,e,n){var i=n(6);i(i.S+i.F*!n(12),"Object",{defineProperty:n(14).f})},function(t,e,n){var i=n(7),r=n(40).onFreeze;n(16)("freeze",function(t){return function(e){return t&&i(e)?t(r(e)):e}})},function(t,e,n){var i=n(20),r=n(71).f;n(16)("getOwnPropertyDescriptor",function(){return function(t,e){return r(i(t),e)}})},function(t,e,n){n(16)("getOwnPropertyNames",function(){return n(99).f})},function(t,e,n){var i=n(33),r=n(86);n(16)("getPrototypeOf",function(){return function(t){return r(i(t))}})},function(t,e,n){var i=n(7);n(16)("isExtensible",function(t){return function(e){return!!i(e)&&(!t||t(e))}})},function(t,e,n){var i=n(7);n(16)("isFrozen",function(t){return function(e){return!i(e)||!!t&&t(e)}})},function(t,e,n){var i=n(7);n(16)("isSealed",function(t){return function(e){return!i(e)||!!t&&t(e)}})},function(t,e,n){var i=n(33),r=n(35);n(16)("keys",function(){return function(t){return r(i(t))}})},function(t,e,n){var i=n(7),r=n(40).onFreeze;n(16)("preventExtensions",function(t){return function(e){return t&&i(e)?t(r(e)):e}})},function(t,e,n){var i=n(7),r=n(40).onFreeze;n(16)("seal",function(t){return function(e){return t&&i(e)?t(r(e)):e}})},function(t,e,n){var i=n(6);i(i.S,"Object",{setPrototypeOf:n(187).set})},function(t,e,n){"use strict";var i,r,a,o,s=n(39),l=n(8),u=n(26),c=n(48),f=n(6),d=n(7),h=n(42),p=n(91),v=n(69),m=n(103),g=n(104).set,_=n(186)(),y=n(70),x=n(101),b=n(188),S=n(102),w=l.TypeError,E=l.process,A=E&&E.versions,T=A&&A.v8||"",M=l.Promise,I="process"==c(E),P=function(){},k=r=y.f,L=!!function(){try{var t=M.resolve(1),e=(t.constructor={})[n(9)("species")]=function(t){t(P,P)};return(I||"function"==typeof PromiseRejectionEvent)&&t.then(P)instanceof e&&0!==T.indexOf("6.6")&&-1===b.indexOf("Chrome/66")}catch(t){}}(),C=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},R=function(t,e){if(!t._n){t._n=!0;var n=t._c;_(function(){for(var i=t._v,r=1==t._s,a=0;n.length>a;)!function(e){var n,a,o,s=r?e.ok:e.fail,l=e.resolve,u=e.reject,c=e.domain;try{s?(r||(2==t._h&&B(t),t._h=1),!0===s?n=i:(c&&c.enter(),n=s(i),c&&(c.exit(),o=!0)),n===e.promise?u(w("Promise-chain cycle")):(a=C(n))?a.call(n,l,u):l(n)):u(i)}catch(t){c&&!o&&c.exit(),u(t)}}(n[a++]);t._c=[],t._n=!1,e&&!t._h&&D(t)})}},D=function(t){g.call(l,function(){var e,n,i,r=t._v,a=N(t);if(a&&(e=x(function(){I?E.emit("unhandledRejection",r,t):(n=l.onunhandledrejection)?n({promise:t,reason:r}):(i=l.console)&&i.error&&i.error("Unhandled promise rejection",r)}),t._h=I||N(t)?2:1),t._a=void 0,a&&e.e)throw e.v})},N=function(t){return 1!==t._h&&0===(t._a||t._c).length},B=function(t){g.call(l,function(){var e;I?E.emit("rejectionHandled",t):(e=l.onrejectionhandled)&&e({promise:t,reason:t._v})})},O=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),R(e,!0))},F=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw w("Promise can't be resolved itself");(e=C(t))?_(function(){var i={_w:n,_d:!1};try{e.call(t,u(F,i,1),u(O,i,1))}catch(t){O.call(i,t)}}):(n._v=t,n._s=1,R(n,!1))}catch(t){O.call({_w:n,_d:!1},t)}}};L||(M=function(t){p(this,M,"Promise","_h"),h(t),i.call(this);try{t(u(F,this,1),u(O,this,1))}catch(t){O.call(this,t)}},i=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=n(92)(M.prototype,{then:function(t,e){var n=k(m(this,M));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=I?E.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&R(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),a=function(){var t=new i;this.promise=t,this.resolve=u(F,t,1),this.reject=u(O,t,1)},y.f=k=function(t){return t===M||t===o?new a(t):r(t)}),f(f.G+f.W+f.F*!L,{Promise:M}),n(43)(M,"Promise"),n(127)("Promise"),o=n(2).Promise,f(f.S+f.F*!L,"Promise",{reject:function(t){var e=k(this);return(0,e.reject)(t),e.promise}}),f(f.S+f.F*(s||!L),"Promise",{resolve:function(t){return S(s&&this===o?M:this,t)}}),f(f.S+f.F*!(L&&n(98)(function(t){M.all(t).catch(P)})),"Promise",{all:function(t){var e=this,n=k(e),i=n.resolve,r=n.reject,a=x(function(){var n=[],a=0,o=1;v(t,!1,function(t){var s=a++,l=!1;n.push(void 0),o++,e.resolve(t).then(function(t){l||(l=!0,n[s]=t,--o||i(n))},r)}),--o||i(n)});return a.e&&r(a.v),n.promise},race:function(t){var e=this,n=k(e),i=n.reject,r=x(function(){v(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return r.e&&i(r.v),n.promise}})},function(t,e,n){"use strict";var i=n(8),r=n(24),a=n(12),o=n(6),s=n(77),l=n(40).KEY,u=n(31),c=n(60),f=n(43),d=n(47),h=n(9),p=n(68),v=n(72),m=n(185),g=n(126),_=n(13),y=n(7),x=n(33),b=n(20),S=n(65),w=n(41),E=n(49),A=n(99),T=n(71),M=n(76),I=n(14),P=n(35),k=T.f,L=I.f,C=A.f,R=i.Symbol,D=i.JSON,N=D&&D.stringify,B=h("_hidden"),O=h("toPrimitive"),F={}.propertyIsEnumerable,z=c("symbol-registry"),V=c("symbols"),U=c("op-symbols"),G=Object.prototype,H="function"==typeof R&&!!M.f,Y=i.QObject,j=!Y||!Y.prototype||!Y.prototype.findChild,W=a&&u(function(){return 7!=E(L({},"a",{get:function(){return L(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=k(G,e);i&&delete G[e],L(t,e,n),i&&t!==G&&L(G,e,i)}:L,X=function(t){var e=V[t]=E(R.prototype);return e._k=t,e},Z=H&&"symbol"==typeof R.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof R},q=function(t,e,n){return t===G&&q(U,e,n),_(t),e=S(e,!0),_(n),r(V,e)?(n.enumerable?(r(t,B)&&t[B][e]&&(t[B][e]=!1),n=E(n,{enumerable:w(0,!1)})):(r(t,B)||L(t,B,w(1,{})),t[B][e]=!0),W(t,e,n)):L(t,e,n)},Q=function(t,e){_(t);for(var n,i=m(e=b(e)),r=0,a=i.length;a>r;)q(t,n=i[r++],e[n]);return t},J=function(t,e){return void 0===e?E(t):Q(E(t),e)},K=function(t){var e=F.call(this,t=S(t,!0));return!(this===G&&r(V,t)&&!r(U,t))&&(!(e||!r(this,t)||!r(V,t)||r(this,B)&&this[B][t])||e)},$=function(t,e){if(t=b(t),e=S(e,!0),t!==G||!r(V,e)||r(U,e)){var n=k(t,e);return!n||!r(V,e)||r(t,B)&&t[B][e]||(n.enumerable=!0),n}},tt=function(t){for(var e,n=C(b(t)),i=[],a=0;n.length>a;)r(V,e=n[a++])||e==B||e==l||i.push(e);return i},et=function(t){for(var e,n=t===G,i=C(n?U:b(t)),a=[],o=0;i.length>o;)!r(V,e=i[o++])||n&&!r(G,e)||a.push(V[e]);return a};H||(R=function(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(n){this===G&&e.call(U,n),r(this,B)&&r(this[B],t)&&(this[B][t]=!1),W(this,t,w(1,n))};return a&&j&&W(G,t,{configurable:!0,set:e}),X(t)},s(R.prototype,"toString",function(){return this._k}),T.f=$,I.f=q,n(100).f=A.f=tt,n(45).f=K,M.f=et,a&&!n(39)&&s(G,"propertyIsEnumerable",K,!0),p.f=function(t){return X(h(t))}),o(o.G+o.W+o.F*!H,{Symbol:R});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),it=0;nt.length>it;)h(nt[it++]);for(var rt=P(h.store),at=0;rt.length>at;)v(rt[at++]);o(o.S+o.F*!H,"Symbol",{for:function(t){return r(z,t+="")?z[t]:z[t]=R(t)},keyFor:function(t){if(!Z(t))throw TypeError(t+" is not a symbol!");for(var e in z)if(z[e]===t)return e},useSetter:function(){j=!0},useSimple:function(){j=!1}}),o(o.S+o.F*!H,"Object",{create:J,defineProperty:q,defineProperties:Q,getOwnPropertyDescriptor:$,getOwnPropertyNames:tt,getOwnPropertySymbols:et});var ot=u(function(){M.f(1)});o(o.S+o.F*ot,"Object",{getOwnPropertySymbols:function(t){return M.f(x(t))}}),D&&o(o.S+o.F*(!H||u(function(){var t=R();return"[null]"!=N([t])||"{}"!=N({a:t})||"{}"!=N(Object(t))})),"JSON",{stringify:function(t){for(var e,n,i=[t],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=e=i[1],(y(e)||void 0!==t)&&!Z(t))return g(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Z(e))return e}),i[1]=e,N.apply(D,i)}}),R.prototype[O]||n(21)(R.prototype,O,R.prototype.valueOf),f(R,"Symbol"),f(Math,"Math",!0),f(i.JSON,"JSON",!0)},function(t,e,n){var i=n(6),r=n(117)(!0);i(i.S,"Object",{entries:function(t){return r(t)}})},function(t,e,n){"use strict";var i=n(6),r=n(2),a=n(8),o=n(103),s=n(102);i(i.P+i.R,"Promise",{finally:function(t){var e=o(this,r.Promise||a.Promise),n="function"==typeof t;return this.then(n?function(n){return s(e,t()).then(function(){return n})}:t,n?function(n){return s(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){"use strict";var i=n(6),r=n(70),a=n(101);i(i.S,"Promise",{try:function(t){var e=r.f(this),n=a(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){n(72)("asyncIterator")},function(t,e,n){n(72)("observable")},function(t,e,n){var i=n(63),r=n(220),a=n(219),o=n(278)("src"),s=n(859),l=(""+s).split("toString");n(105).inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,n,s){var u="function"==typeof n;u&&(a(n,"name")||r(n,"name",e)),t[e]!==n&&(u&&(a(n,o)||r(n,o,t[e]?""+t[e]:l.join(String(e)))),t===i?t[e]=n:s?t[e]?t[e]=n:r(t,e,n):(delete t[e],r(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[o]||s.call(this)})},function(t,e,n){var i=n(11),r=n(62),a=n(254),o=/"/g,s=function(t,e,n,i){var r=String(a(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(i).replace(o,"&quot;")+'"'),s+">"+r+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(s),i(i.P+i.F*r(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",n)}},function(t,e,n){(function(e){var n,n;/*!
    localForage -- Offline Storage, Improved
    Version 1.7.3
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
!function(e){t.exports=e()}(function(){return function t(e,i,r){function a(s,l){if(!i[s]){if(!e[s]){var u="function"==typeof n&&n;if(!l&&u)return n(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=i[s]={exports:{}};e[s][0].call(f.exports,function(t){var n=e[s][1][t];return a(n||t)},f,f.exports,t,e,i,r)}return i[s].exports}for(var o="function"==typeof n&&n,s=0;s<r.length;s++)a(r[s]);return a}({1:[function(t,n,i){(function(t){"use strict";function e(){c=!0;for(var t,e,n=f.length;n;){for(e=f,f=[],t=-1;++t<n;)e[t]();n=f.length}c=!1}function i(t){1!==f.push(t)||c||r()}var r,a=t.MutationObserver||t.WebKitMutationObserver;if(a){var o=0,s=new a(e),l=t.document.createTextNode("");s.observe(l,{characterData:!0}),r=function(){l.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)r="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var n=t.document.createElement("script");n.onreadystatechange=function(){e(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},t.document.documentElement.appendChild(n)}:function(){setTimeout(e,0)};else{var u=new t.MessageChannel;u.port1.onmessage=e,r=function(){u.port2.postMessage(0)}}var c,f=[];n.exports=i}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){"use strict";function i(){}function r(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=_,this.queue=[],this.outcome=void 0,t!==i&&l(this,t)}function a(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function o(t,e,n){p(function(){var i;try{i=e(n)}catch(e){return v.reject(t,e)}i===t?v.reject(t,new TypeError("Cannot resolve promise with itself")):v.resolve(t,i)})}function s(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function l(t,e){function n(e){a||(a=!0,v.reject(t,e))}function i(e){a||(a=!0,v.resolve(t,e))}function r(){e(i,n)}var a=!1,o=u(r);"error"===o.status&&n(o.value)}function u(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}function c(t){return t instanceof this?t:v.resolve(new this(i),t)}function f(t){var e=new this(i);return v.reject(e,t)}function d(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),o=0,s=-1,l=new this(i);++s<n;)!function(t,i){function s(t){a[i]=t,++o!==n||r||(r=!0,v.resolve(l,a))}e.resolve(t).then(s,function(t){r||(r=!0,v.reject(l,t))})}(t[s],s);return l}function h(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);for(var a=-1,o=new this(i);++a<n;)!function(t){e.resolve(t).then(function(t){r||(r=!0,v.resolve(o,t))},function(t){r||(r=!0,v.reject(o,t))})}(t[a]);return o}var p=t(1),v={},m=["REJECTED"],g=["FULFILLED"],_=["PENDING"];e.exports=r,r.prototype.catch=function(t){return this.then(null,t)},r.prototype.then=function(t,e){if("function"!=typeof t&&this.state===g||"function"!=typeof e&&this.state===m)return this;var n=new this.constructor(i);if(this.state!==_){o(n,this.state===g?t:e,this.outcome)}else this.queue.push(new a(n,t,e));return n},a.prototype.callFulfilled=function(t){v.resolve(this.promise,t)},a.prototype.otherCallFulfilled=function(t){o(this.promise,this.onFulfilled,t)},a.prototype.callRejected=function(t){v.reject(this.promise,t)},a.prototype.otherCallRejected=function(t){o(this.promise,this.onRejected,t)},v.resolve=function(t,e){var n=u(s,e);if("error"===n.status)return v.reject(t,n.value);var i=n.value;if(i)l(t,i);else{t.state=g,t.outcome=e;for(var r=-1,a=t.queue.length;++r<a;)t.queue[r].callFulfilled(e)}return t},v.reject=function(t,e){t.state=m,t.outcome=e;for(var n=-1,i=t.queue.length;++n<i;)t.queue[n].callRejected(e);return t},r.resolve=c,r.reject=f,r.all=d,r.race=h},{1:1}],3:[function(t,n,i){(function(e){"use strict";"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(a){if("TypeError"!==a.name)throw a;for(var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,i=new n,r=0;r<t.length;r+=1)i.append(t[r]);return i.getBlob(e.type)}}function a(t,e){e&&t.then(function(t){e(null,t)},function(t){e(t)})}function o(t,e,n){"function"==typeof e&&t.then(e),"function"==typeof n&&t.catch(n)}function s(t){return"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function l(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}function u(t){for(var e=t.length,n=new ArrayBuffer(e),i=new Uint8Array(n),r=0;r<e;r++)i[r]=t.charCodeAt(r);return n}function c(t){return new gt(function(e){var n=t.transaction(_t,wt),i=r([""]);n.objectStore(_t).put(i,"key"),n.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},n.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);e(n||!t||parseInt(t[1],10)>=43)}}).catch(function(){return!1})}function f(t){return"boolean"==typeof yt?gt.resolve(yt):c(t).then(function(t){return yt=t})}function d(t){var e=xt[t.name],n={};n.promise=new gt(function(t,e){n.resolve=t,n.reject=e}),e.deferredOperations.push(n),e.dbReady?e.dbReady=e.dbReady.then(function(){return n.promise}):e.dbReady=n.promise}function h(t){var e=xt[t.name],n=e.deferredOperations.pop();if(n)return n.resolve(),n.promise}function p(t,e){var n=xt[t.name],i=n.deferredOperations.pop();if(i)return i.reject(e),i.promise}function v(t,e){return new gt(function(n,i){if(xt[t.name]=xt[t.name]||A(),t.db){if(!e)return n(t.db);d(t),t.db.close()}var r=[t.name];e&&r.push(t.version);var a=mt.open.apply(mt,r);e&&(a.onupgradeneeded=function(e){var n=a.result;try{n.createObjectStore(t.storeName),e.oldVersion<=1&&n.createObjectStore(_t)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+t.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),a.onerror=function(t){t.preventDefault(),i(a.error)},a.onsuccess=function(){n(a.result),h(t)}})}function m(t){return v(t,!1)}function g(t){return v(t,!0)}function _(t,e){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),i=t.version<t.db.version,r=t.version>t.db.version;if(i&&(t.version!==e&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),r||n){if(n){var a=t.db.version+1;a>t.version&&(t.version=a)}return!0}return!1}function y(t){return new gt(function(e,n){var i=new FileReader;i.onerror=n,i.onloadend=function(n){var i=btoa(n.target.result||"");e({__local_forage_encoded_blob:!0,data:i,type:t.type})},i.readAsBinaryString(t)})}function x(t){return r([u(atob(t.data))],{type:t.type})}function b(t){return t&&t.__local_forage_encoded_blob}function S(t){var e=this,n=e._initReady().then(function(){var t=xt[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady});return o(n,t,t),n}function w(t){d(t);for(var e=xt[t.name],n=e.forages,i=0;i<n.length;i++){var r=n[i];r._dbInfo.db&&(r._dbInfo.db.close(),r._dbInfo.db=null)}return t.db=null,m(t).then(function(e){return t.db=e,_(t)?g(t):e}).then(function(i){t.db=e.db=i;for(var r=0;r<n.length;r++)n[r]._dbInfo.db=i}).catch(function(e){throw p(t,e),e})}function E(t,e,n,i){void 0===i&&(i=1);try{var r=t.db.transaction(t.storeName,e);n(null,r)}catch(r){if(i>0&&(!t.db||"InvalidStateError"===r.name||"NotFoundError"===r.name))return gt.resolve().then(function(){if(!t.db||"NotFoundError"===r.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),g(t)}).then(function(){return w(t).then(function(){E(t,e,n,i-1)})}).catch(n);n(r)}}function A(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function T(t){function e(){return gt.resolve()}var n=this,i={db:null};if(t)for(var r in t)i[r]=t[r];var a=xt[i.name];a||(a=A(),xt[i.name]=a),a.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=S);for(var o=[],s=0;s<a.forages.length;s++){var l=a.forages[s];l!==n&&o.push(l._initReady().catch(e))}var u=a.forages.slice(0);return gt.all(o).then(function(){return i.db=a.db,m(i)}).then(function(t){return i.db=t,_(i,n._defaultConfig.version)?g(i):t}).then(function(t){i.db=a.db=t,n._dbInfo=i;for(var e=0;e<u.length;e++){var r=u[e];r!==n&&(r._dbInfo.db=i.db,r._dbInfo.version=i.version)}})}function M(t,e){var n=this;t=s(t);var i=new gt(function(e,i){n.ready().then(function(){E(n._dbInfo,St,function(r,a){if(r)return i(r);try{var o=a.objectStore(n._dbInfo.storeName),s=o.get(t);s.onsuccess=function(){var t=s.result;void 0===t&&(t=null),b(t)&&(t=x(t)),e(t)},s.onerror=function(){i(s.error)}}catch(t){i(t)}})}).catch(i)});return a(i,e),i}function I(t,e){var n=this,i=new gt(function(e,i){n.ready().then(function(){E(n._dbInfo,St,function(r,a){if(r)return i(r);try{var o=a.objectStore(n._dbInfo.storeName),s=o.openCursor(),l=1;s.onsuccess=function(){var n=s.result;if(n){var i=n.value;b(i)&&(i=x(i));var r=t(i,n.key,l++);void 0!==r?e(r):n.continue()}else e()},s.onerror=function(){i(s.error)}}catch(t){i(t)}})}).catch(i)});return a(i,e),i}function P(t,e,n){var i=this;t=s(t);var r=new gt(function(n,r){var a;i.ready().then(function(){return a=i._dbInfo,"[object Blob]"===bt.call(e)?f(a.db).then(function(t){return t?e:y(e)}):e}).then(function(e){E(i._dbInfo,wt,function(a,o){if(a)return r(a);try{var s=o.objectStore(i._dbInfo.storeName);null===e&&(e=void 0);var l=s.put(e,t);o.oncomplete=function(){void 0===e&&(e=null),n(e)},o.onabort=o.onerror=function(){var t=l.error?l.error:l.transaction.error;r(t)}}catch(t){r(t)}})}).catch(r)});return a(r,n),r}function k(t,e){var n=this;t=s(t);var i=new gt(function(e,i){n.ready().then(function(){E(n._dbInfo,wt,function(r,a){if(r)return i(r);try{var o=a.objectStore(n._dbInfo.storeName),s=o.delete(t);a.oncomplete=function(){e()},a.onerror=function(){i(s.error)},a.onabort=function(){var t=s.error?s.error:s.transaction.error;i(t)}}catch(t){i(t)}})}).catch(i)});return a(i,e),i}function L(t){var e=this,n=new gt(function(t,n){e.ready().then(function(){E(e._dbInfo,wt,function(i,r){if(i)return n(i);try{var a=r.objectStore(e._dbInfo.storeName),o=a.clear();r.oncomplete=function(){t()},r.onabort=r.onerror=function(){var t=o.error?o.error:o.transaction.error;n(t)}}catch(t){n(t)}})}).catch(n)});return a(n,t),n}function C(t){var e=this,n=new gt(function(t,n){e.ready().then(function(){E(e._dbInfo,St,function(i,r){if(i)return n(i);try{var a=r.objectStore(e._dbInfo.storeName),o=a.count();o.onsuccess=function(){t(o.result)},o.onerror=function(){n(o.error)}}catch(t){n(t)}})}).catch(n)});return a(n,t),n}function R(t,e){var n=this,i=new gt(function(e,i){if(t<0)return void e(null);n.ready().then(function(){E(n._dbInfo,St,function(r,a){if(r)return i(r);try{var o=a.objectStore(n._dbInfo.storeName),s=!1,l=o.openCursor();l.onsuccess=function(){var n=l.result;if(!n)return void e(null);0===t?e(n.key):s?e(n.key):(s=!0,n.advance(t))},l.onerror=function(){i(l.error)}}catch(t){i(t)}})}).catch(i)});return a(i,e),i}function D(t){var e=this,n=new gt(function(t,n){e.ready().then(function(){E(e._dbInfo,St,function(i,r){if(i)return n(i);try{var a=r.objectStore(e._dbInfo.storeName),o=a.openCursor(),s=[];o.onsuccess=function(){var e=o.result;if(!e)return void t(s);s.push(e.key),e.continue()},o.onerror=function(){n(o.error)}}catch(t){n(t)}})}).catch(n)});return a(n,t),n}function N(t,e){e=l.apply(this,arguments);var n=this.config();t="function"!=typeof t&&t||{},t.name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var i,r=this;if(t.name){var o=t.name===n.name&&r._dbInfo.db,s=o?gt.resolve(r._dbInfo.db):m(t).then(function(e){var n=xt[t.name],i=n.forages;n.db=e;for(var r=0;r<i.length;r++)i[r]._dbInfo.db=e;return e});i=t.storeName?s.then(function(e){if(e.objectStoreNames.contains(t.storeName)){var n=e.version+1;d(t);var i=xt[t.name],r=i.forages;e.close();for(var a=0;a<r.length;a++){var o=r[a];o._dbInfo.db=null,o._dbInfo.version=n}return new gt(function(e,i){var r=mt.open(t.name,n);r.onerror=function(t){r.result.close(),i(t)},r.onupgradeneeded=function(){r.result.deleteObjectStore(t.storeName)},r.onsuccess=function(){var t=r.result;t.close(),e(t)}}).then(function(t){i.db=t;for(var e=0;e<r.length;e++){var n=r[e];n._dbInfo.db=t,h(n._dbInfo)}}).catch(function(e){throw(p(t,e)||gt.resolve()).catch(function(){}),e})}}):s.then(function(e){d(t);var n=xt[t.name],i=n.forages;e.close();for(var r=0;r<i.length;r++){i[r]._dbInfo.db=null}return new gt(function(e,n){var i=mt.deleteDatabase(t.name);i.onerror=i.onblocked=function(t){var e=i.result;e&&e.close(),n(t)},i.onsuccess=function(){var t=i.result;t&&t.close(),e(t)}}).then(function(t){n.db=t;for(var e=0;e<i.length;e++)h(i[e]._dbInfo)}).catch(function(e){throw(p(t,e)||gt.resolve()).catch(function(){}),e})})}else i=gt.reject("Invalid arguments");return a(i,e),i}function B(t){var e,n,i,r,a,o=.75*t.length,s=t.length,l=0;"="===t[t.length-1]&&(o--,"="===t[t.length-2]&&o--);var u=new ArrayBuffer(o),c=new Uint8Array(u);for(e=0;e<s;e+=4)n=At.indexOf(t[e]),i=At.indexOf(t[e+1]),r=At.indexOf(t[e+2]),a=At.indexOf(t[e+3]),c[l++]=n<<2|i>>4,c[l++]=(15&i)<<4|r>>2,c[l++]=(3&r)<<6|63&a;return u}function O(t){var e,n=new Uint8Array(t),i="";for(e=0;e<n.length;e+=3)i+=At[n[e]>>2],i+=At[(3&n[e])<<4|n[e+1]>>4],i+=At[(15&n[e+1])<<2|n[e+2]>>6],i+=At[63&n[e+2]];return n.length%3==2?i=i.substring(0,i.length-1)+"=":n.length%3==1&&(i=i.substring(0,i.length-2)+"=="),i}function F(t,e){var n="";if(t&&(n=Gt.call(t)),t&&("[object ArrayBuffer]"===n||t.buffer&&"[object ArrayBuffer]"===Gt.call(t.buffer))){var i,r=It;t instanceof ArrayBuffer?(i=t,r+=kt):(i=t.buffer,"[object Int8Array]"===n?r+=Ct:"[object Uint8Array]"===n?r+=Rt:"[object Uint8ClampedArray]"===n?r+=Dt:"[object Int16Array]"===n?r+=Nt:"[object Uint16Array]"===n?r+=Ot:"[object Int32Array]"===n?r+=Bt:"[object Uint32Array]"===n?r+=Ft:"[object Float32Array]"===n?r+=zt:"[object Float64Array]"===n?r+=Vt:e(new Error("Failed to get type for BinaryArray"))),e(r+O(i))}else if("[object Blob]"===n){var a=new FileReader;a.onload=function(){var n=Tt+t.type+"~"+O(this.result);e(It+Lt+n)},a.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(n){console.error("Couldn't convert value into a JSON string: ",t),e(null,n)}}function z(t){if(t.substring(0,Pt)!==It)return JSON.parse(t);var e,n=t.substring(Ut),i=t.substring(Pt,Ut);if(i===Lt&&Mt.test(n)){var a=n.match(Mt);e=a[1],n=n.substring(a[0].length)}var o=B(n);switch(i){case kt:return o;case Lt:return r([o],{type:e});case Ct:return new Int8Array(o);case Rt:return new Uint8Array(o);case Dt:return new Uint8ClampedArray(o);case Nt:return new Int16Array(o);case Ot:return new Uint16Array(o);case Bt:return new Int32Array(o);case Ft:return new Uint32Array(o);case zt:return new Float32Array(o);case Vt:return new Float64Array(o);default:throw new Error("Unkown type: "+i)}}function V(t,e,n,i){t.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,i)}function U(t){var e=this,n={db:null};if(t)for(var i in t)n[i]="string"!=typeof t[i]?t[i].toString():t[i];var r=new gt(function(t,i){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(t){return i(t)}n.db.transaction(function(r){V(r,n,function(){e._dbInfo=n,t()},function(t,e){i(e)})},i)});return n.serializer=Ht,r}function G(t,e,n,i,r,a){t.executeSql(n,i,r,function(t,o){o.code===o.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[e.storeName],function(t,s){s.rows.length?a(t,o):V(t,e,function(){t.executeSql(n,i,r,a)},a)},a):a(t,o)},a)}function H(t,e){var n=this;t=s(t);var i=new gt(function(e,i){n.ready().then(function(){var r=n._dbInfo;r.db.transaction(function(n){G(n,r,"SELECT * FROM "+r.storeName+" WHERE key = ? LIMIT 1",[t],function(t,n){var i=n.rows.length?n.rows.item(0).value:null;i&&(i=r.serializer.deserialize(i)),e(i)},function(t,e){i(e)})})}).catch(i)});return a(i,e),i}function Y(t,e){var n=this,i=new gt(function(e,i){n.ready().then(function(){var r=n._dbInfo;r.db.transaction(function(n){G(n,r,"SELECT * FROM "+r.storeName,[],function(n,i){for(var a=i.rows,o=a.length,s=0;s<o;s++){var l=a.item(s),u=l.value;if(u&&(u=r.serializer.deserialize(u)),void 0!==(u=t(u,l.key,s+1)))return void e(u)}e()},function(t,e){i(e)})})}).catch(i)});return a(i,e),i}function j(t,e,n,i){var r=this;t=s(t);var o=new gt(function(a,o){r.ready().then(function(){void 0===e&&(e=null);var s=e,l=r._dbInfo;l.serializer.serialize(e,function(e,u){u?o(u):l.db.transaction(function(n){G(n,l,"INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",[t,e],function(){a(s)},function(t,e){o(e)})},function(e){if(e.code===e.QUOTA_ERR){if(i>0)return void a(j.apply(r,[t,s,n,i-1]));o(e)}})})}).catch(o)});return a(o,n),o}function W(t,e,n){return j.apply(this,[t,e,n,1])}function X(t,e){var n=this;t=s(t);var i=new gt(function(e,i){n.ready().then(function(){var r=n._dbInfo;r.db.transaction(function(n){G(n,r,"DELETE FROM "+r.storeName+" WHERE key = ?",[t],function(){e()},function(t,e){i(e)})})}).catch(i)});return a(i,e),i}function Z(t){var e=this,n=new gt(function(t,n){e.ready().then(function(){var i=e._dbInfo;i.db.transaction(function(e){G(e,i,"DELETE FROM "+i.storeName,[],function(){t()},function(t,e){n(e)})})}).catch(n)});return a(n,t),n}function q(t){var e=this,n=new gt(function(t,n){e.ready().then(function(){var i=e._dbInfo;i.db.transaction(function(e){G(e,i,"SELECT COUNT(key) as c FROM "+i.storeName,[],function(e,n){var i=n.rows.item(0).c;t(i)},function(t,e){n(e)})})}).catch(n)});return a(n,t),n}function Q(t,e){var n=this,i=new gt(function(e,i){n.ready().then(function(){var r=n._dbInfo;r.db.transaction(function(n){G(n,r,"SELECT key FROM "+r.storeName+" WHERE id = ? LIMIT 1",[t+1],function(t,n){var i=n.rows.length?n.rows.item(0).key:null;e(i)},function(t,e){i(e)})})}).catch(i)});return a(i,e),i}function J(t){var e=this,n=new gt(function(t,n){e.ready().then(function(){var i=e._dbInfo;i.db.transaction(function(e){G(e,i,"SELECT key FROM "+i.storeName,[],function(e,n){for(var i=[],r=0;r<n.rows.length;r++)i.push(n.rows.item(r).key);t(i)},function(t,e){n(e)})})}).catch(n)});return a(n,t),n}function K(t){return new gt(function(e,n){t.transaction(function(i){i.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(n,i){for(var r=[],a=0;a<i.rows.length;a++)r.push(i.rows.item(a).name);e({db:t,storeNames:r})},function(t,e){n(e)})},function(t){n(t)})})}function $(t,e){e=l.apply(this,arguments);var n=this.config();t="function"!=typeof t&&t||{},t.name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var i,r=this;return i=t.name?new gt(function(e){var i;i=t.name===n.name?r._dbInfo.db:openDatabase(t.name,"","",0),e(t.storeName?{db:i,storeNames:[t.storeName]}:K(i))}).then(function(t){return new gt(function(e,n){t.db.transaction(function(i){for(var r=[],a=0,o=t.storeNames.length;a<o;a++)r.push(function(t){return new gt(function(e,n){i.executeSql("DROP TABLE IF EXISTS "+t,[],function(){e()},function(t,e){n(e)})})}(t.storeNames[a]));gt.all(r).then(function(){e()}).catch(function(t){n(t)})},function(t){n(t)})})}):gt.reject("Invalid arguments"),a(i,e),i}function tt(t,e){var n=t.name+"/";return t.storeName!==e.storeName&&(n+=t.storeName+"/"),n}function et(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch(t){return!0}}function nt(){return!et()||localStorage.length>0}function it(t){var e=this,n={};if(t)for(var i in t)n[i]=t[i];return n.keyPrefix=tt(t,e._defaultConfig),nt()?(e._dbInfo=n,n.serializer=Ht,gt.resolve()):gt.reject()}function rt(t){var e=this,n=e.ready().then(function(){for(var t=e._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var i=localStorage.key(n);0===i.indexOf(t)&&localStorage.removeItem(i)}});return a(n,t),n}function at(t,e){var n=this;t=s(t);var i=n.ready().then(function(){var e=n._dbInfo,i=localStorage.getItem(e.keyPrefix+t);return i&&(i=e.serializer.deserialize(i)),i});return a(i,e),i}function ot(t,e){var n=this,i=n.ready().then(function(){for(var e=n._dbInfo,i=e.keyPrefix,r=i.length,a=localStorage.length,o=1,s=0;s<a;s++){var l=localStorage.key(s);if(0===l.indexOf(i)){var u=localStorage.getItem(l);if(u&&(u=e.serializer.deserialize(u)),void 0!==(u=t(u,l.substring(r),o++)))return u}}});return a(i,e),i}function st(t,e){var n=this,i=n.ready().then(function(){var e,i=n._dbInfo;try{e=localStorage.key(t)}catch(t){e=null}return e&&(e=e.substring(i.keyPrefix.length)),e});return a(i,e),i}function lt(t){var e=this,n=e.ready().then(function(){for(var t=e._dbInfo,n=localStorage.length,i=[],r=0;r<n;r++){var a=localStorage.key(r);0===a.indexOf(t.keyPrefix)&&i.push(a.substring(t.keyPrefix.length))}return i});return a(n,t),n}function ut(t){var e=this,n=e.keys().then(function(t){return t.length});return a(n,t),n}function ct(t,e){var n=this;t=s(t);var i=n.ready().then(function(){var e=n._dbInfo;localStorage.removeItem(e.keyPrefix+t)});return a(i,e),i}function ft(t,e,n){var i=this;t=s(t);var r=i.ready().then(function(){void 0===e&&(e=null);var n=e;return new gt(function(r,a){var o=i._dbInfo;o.serializer.serialize(e,function(e,i){if(i)a(i);else try{localStorage.setItem(o.keyPrefix+t,e),r(n)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||a(t),a(t)}})})});return a(r,n),r}function dt(t,e){if(e=l.apply(this,arguments),t="function"!=typeof t&&t||{},!t.name){var n=this.config();t.name=t.name||n.name,t.storeName=t.storeName||n.storeName}var i,r=this;return i=t.name?new gt(function(e){e(t.storeName?tt(t,r._defaultConfig):t.name+"/")}).then(function(t){for(var e=localStorage.length-1;e>=0;e--){var n=localStorage.key(e);0===n.indexOf(t)&&localStorage.removeItem(n)}}):gt.reject("Invalid arguments"),a(i,e),i}function ht(t,e){t[e]=function(){var n=arguments;return t.ready().then(function(){return t[e].apply(t,n)})}}function pt(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var n in e)e.hasOwnProperty(n)&&(Zt(e[n])?arguments[0][n]=e[n].slice():arguments[0][n]=e[n])}return arguments[0]}var vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mt=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){return}}();"undefined"==typeof Promise&&t(3);var gt=Promise,_t="local-forage-detect-blob-support",yt=void 0,xt={},bt=Object.prototype.toString,St="readonly",wt="readwrite",Et={_driver:"asyncStorage",_initStorage:T,_support:function(){try{if(!mt)return!1;var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}}(),iterate:I,getItem:M,setItem:P,removeItem:k,clear:L,length:C,key:R,keys:D,dropInstance:N},At="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Tt="~~local_forage_type~",Mt=/^~~local_forage_type~([^~]+)~/,It="__lfsc__:",Pt=It.length,kt="arbf",Lt="blob",Ct="si08",Rt="ui08",Dt="uic8",Nt="si16",Bt="si32",Ot="ur16",Ft="ui32",zt="fl32",Vt="fl64",Ut=Pt+kt.length,Gt=Object.prototype.toString,Ht={serialize:F,deserialize:z,stringToBuffer:B,bufferToString:O},Yt={_driver:"webSQLStorage",_initStorage:U,_support:function(){return"function"==typeof openDatabase}(),iterate:Y,getItem:H,setItem:W,removeItem:X,clear:Z,length:q,key:Q,keys:J,dropInstance:$},jt={_driver:"localStorageWrapper",_initStorage:it,_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}(),iterate:ot,getItem:at,setItem:ft,removeItem:ct,clear:rt,length:ut,key:st,keys:lt,dropInstance:dt},Wt=function(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)},Xt=function(t,e){for(var n=t.length,i=0;i<n;){if(Wt(t[i],e))return!0;i++}return!1},Zt=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},qt={},Qt={},Jt={INDEXEDDB:Et,WEBSQL:Yt,LOCALSTORAGE:jt},Kt=[Jt.INDEXEDDB._driver,Jt.WEBSQL._driver,Jt.LOCALSTORAGE._driver],$t=["dropInstance"],te=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat($t),ee={description:"",driver:Kt.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},ne=function(){function t(e){i(this,t);for(var n in Jt)if(Jt.hasOwnProperty(n)){var r=Jt[n],a=r._driver;this[n]=a,qt[a]||this.defineDriver(r)}this._defaultConfig=pt({},ee),this._config=pt({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return t.prototype.config=function(t){if("object"===(void 0===t?"undefined":vt(t))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!=typeof t[e])return new Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t&&t.driver)||this.setDriver(this._config.driver)}return"string"==typeof t?this._config[t]:this._config},t.prototype.defineDriver=function(t,e,n){var i=new gt(function(e,n){try{var i=t._driver,r=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver)return void n(r);for(var o=te.concat("_initStorage"),s=0,l=o.length;s<l;s++){var u=o[s];if((!Xt($t,u)||t[u])&&"function"!=typeof t[u])return void n(r)}!function(){for(var e=0,n=$t.length;e<n;e++){var i=$t[e];t[i]||(t[i]=function(t){return function(){var e=new Error("Method "+t+" is not implemented by the current driver"),n=gt.reject(e);return a(n,arguments[arguments.length-1]),n}}(i))}}();var c=function(n){qt[i]&&console.info("Redefining LocalForage driver: "+i),qt[i]=t,Qt[i]=n,e()};"_support"in t?t._support&&"function"==typeof t._support?t._support().then(c,n):c(!!t._support):c(!0)}catch(t){n(t)}});return o(i,e,n),i},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(t,e,n){var i=qt[t]?gt.resolve(qt[t]):gt.reject(new Error("Driver not found."));return o(i,e,n),i},t.prototype.getSerializer=function(t){var e=gt.resolve(Ht);return o(e,t),e},t.prototype.ready=function(t){var e=this,n=e._driverSet.then(function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready});return o(n,t,t),n},t.prototype.setDriver=function(t,e,n){function i(){s._config.driver=s.driver()}function r(t){return s._extend(t),i(),s._ready=s._initStorage(s._config),s._ready}function a(t){return function(){function e(){for(;n<t.length;){var a=t[n];return n++,s._dbInfo=null,s._ready=null,s.getDriver(a).then(r).catch(e)}i();var o=new Error("No available storage method found.");return s._driverSet=gt.reject(o),s._driverSet}var n=0;return e()}}var s=this;Zt(t)||(t=[t]);var l=this._getSupportedDrivers(t),u=null!==this._driverSet?this._driverSet.catch(function(){return gt.resolve()}):gt.resolve();return this._driverSet=u.then(function(){var t=l[0];return s._dbInfo=null,s._ready=null,s.getDriver(t).then(function(t){s._driver=t._driver,i(),s._wrapLibraryMethodsWithReady(),s._initDriver=a(l)})}).catch(function(){i();var t=new Error("No available storage method found.");return s._driverSet=gt.reject(t),s._driverSet}),o(this._driverSet,e,n),this._driverSet},t.prototype.supports=function(t){return!!Qt[t]},t.prototype._extend=function(t){pt(this,t)},t.prototype._getSupportedDrivers=function(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n];this.supports(r)&&e.push(r)}return e},t.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,e=te.length;t<e;t++)ht(this,te[t])},t.prototype.createInstance=function(e){return new t(e)},t}(),ie=new ne;e.exports=ie},{3:3}]},{},[4])(4)})}).call(e,n(144))},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(0),a=i(r),o=n(1),s=i(o),l=n(29),u=n(46),c=function(){function t(e,n){return(0,a.default)(this,t),!e||e instanceof u?!n||n instanceof u?void(e&&(n?((e.getLat()>n.getLat()||e.getLng()>n.getLng())&&console.error("LatLngBounds中sw 的经纬度必须小于ne的经纬度，实际传入sw为：",e,"ne 为：",n),this.setSouthWest(e).setNorthEast(n)):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):2===e.length&&this.setSouthWest(e[0]).setNorthEast(e[1]))):void new l.BaseTypeError("LatLngBounds.ne","LatLng",n).error():void new l.BaseTypeError("LatLngBounds.sw","LatLng",e).error()}return(0,s.default)(t,[{key:"setNorthEast",value:function(t){return this._ne=u.convert(t),this}},{key:"setSouthWest",value:function(t){return this._sw=u.convert(t),this}},{key:"getCenter",value:function(){return new u((this._sw.lat+this._ne.lat)/2,(this._sw.lng+this._ne.lng)/2,0,!0)}},{key:"getSouthWest",value:function(){return this._sw}},{key:"getNorthEast",value:function(){return this._ne}},{key:"extend",value:function(e){var n=this._sw,i=this._ne,r=void 0,a=void 0;if(e instanceof u)r=e,a=e;else{if(!(e instanceof t))return Array.isArray(e)?e.every(Array.isArray)?this.extend(t.convert(e)):this.extend(u.convert(e)):this;if(r=e._sw,a=e._ne,!r||!a)return this}return n||i?(this._sw=new u(Math.min(r.lat,n.lat),Math.min(r.lng,n.lng),0,!0),this._ne=new u(Math.max(a.lat,i.lat),Math.max(a.lng,i.lng),0,!0)):(this._sw=new u(r.lat,r.lng,0,!0),this._ne=new u(a.lat,a.lng,0,!0)),this}},{key:"union",value:function(t){return this.extend(t)}},{key:"equals",value:function(t){var e=this._sw,n=this._ne,i=t.getSouthWest(),r=t.getNorthEast();return e.equals(i)&&n.equals(r)}},{key:"intersects",value:function(t){var e=this._sw,n=this._ne,i=t.getSouthWest(),r=t.getNorthEast();return!(i.lat>n.lat||r.lat<e.lat||i.lng>n.lng||r.lng<e.lng)}},{key:"covers",value:function(t){var e=t.getSouthWest(),n=t.getNorthEast(),i=t.getSouthEast(),r=t.getNorthWest();return this.contains(e)&&this.contains(n)&&this.contains(i)&&this.contains(r)}},{key:"isEmpty",value:function(){return!this._sw||!this._ne||this._sw.lat===this._ne.lat||this._sw.lng===this._ne.lng}},{key:"contains",value:function(t){return this._sw.lat<=t.lat&&this._sw.lng<=t.lng&&this._ne.lat>=t.lat&&this._ne.lng>=t.lng}},{key:"getNorthWest",value:function(){return new u(this.getNorth(),this.getWest(),0,!0)}},{key:"getSouthEast",value:function(){return new u(this.getSouth(),this.getEast(),0,!0)}},{key:"getWest",value:function(){return this._sw.lng}},{key:"getSouth",value:function(){return this._sw.lat}},{key:"getEast",value:function(){return this._ne.lng}},{key:"getNorth",value:function(){return this._ne.lat}},{key:"toString",value:function(){return"LatLngBounds("+this._sw.toString()+", "+this._ne.toString()+")"}}]),t}();c.convert=function(t){return!t||t instanceof c?t:new c(t)},c._convertFromWorker=function(t){return t._sw&&t._ne?new c(u.convert(t._sw),u.convert(t._ne)):t},t.exports=c},function(t,e,n){"use strict";function i(t,e,n){var i=window.document.createElement(t);return e&&(i.className=e),n&&n.appendChild(i),i}function r(t){for(var e=0;e<t.length;e++)if(t[e]in w)return t[e];return t[0]}function a(){E&&(A=w[E],w[E]="none")}function o(){E&&(w[E]=A)}function s(t,e){t.style[T]=e}function l(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",l,!0)}function u(){window.addEventListener("click",l,!0),window.setTimeout(function(){window.removeEventListener("click",l,!0)},0)}function c(t,e){var n=t.getBoundingClientRect();return e=e.touches?("touchend"===e.type?e.changedTouches:e.touches)[0]:e,d(t,new S(e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop))}function f(t,e){for(var n=t.getBoundingClientRect(),i=[],r="touchend"===e.type?e.changedTouches:e.touches,a=0;a<r.length;a++){var o=new S(r[a].clientX-n.left-t.clientLeft,r[a].clientY-n.top-t.clientTop),s=d(t,o);i.push(s)}return i}function d(t,e){var n=null,i=getComputedStyle(t),r=i.width,a=i.height,o=i.transform;for(r=r.replace("px",""),a=a.replace("px","");null!==t;){if(!o){o=getComputedStyle(t).transform}if("none"!==o){var s=o.match(/\(([^)]*)\)/),l=(0,x.default)(s,2),u=l[1],c=u.split(","),f=new b.Matrix4;f.elements[0]=parseFloat(c[0].trim()),f.elements[1]=parseFloat(c[1].trim()),f.elements[4]=parseFloat(c[2].trim()),f.elements[5]=parseFloat(c[3].trim()),n=n?f.multiply(n):f}t=t.parentElement,o=null}if(!n)return e;var d=new b.Vector3([r,0,0]),h=new b.Vector3([0,a,0]),p=new b.Vector3([r,a,0]),v=n.multiplyVector3(d),m=n.multiplyVector3(h),g=n.multiplyVector3(p),_=Math.min.apply(null,[0,v.elements[0],m.elements[0],g.elements[0]]),y=Math.min.apply(null,[0,v.elements[1],m.elements[1],g.elements[1]]),w=n.invert(),E=new b.Vector3([e.x+_,e.y+y,0]),A=w.multiplyVector3(E);return new S(A.elements[0],A.elements[1])}function h(t){t.parentNode&&t.parentNode.removeChild(t)}function p(t){var e=document.createElement("div");e.innerHTML=t;var n=document.createDocumentFragment();return Array.prototype.slice.apply(e.childNodes).forEach(function(t){n.appendChild(t)}),n}function v(t){if("pageX"in t&&"pageY"in t)return{x:t.pageX,y:t.pageY};if("touches"in t&&t.touches.length>0){var e=t.touches[0];return{x:e.pageX,y:e.pageY}}if("changedTouches"in t&&t.changedTouches.length>0){var n=t.changedTouches[0];return{x:n.pageX,y:n.pageY}}}function m(t,e){t&&(Array.isArray(e)||(e=[e]),e.forEach(function(e){_(t,e)||(t.className+=" "+e)}))}function g(t,e){t&&(Array.isArray(e)||(e=[e]),e.forEach(function(e){_(t,e)&&(t.className=t.className.replace(" "+e,""))}))}function _(t,e){if(t){var n=" "+e+" ";return(" "+t.className+" ").includes(n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.TRANSITIONTIMINGFUNCTION=e.TRANSITIONDURATION=e.TRANSITIONEND=e.TRANSITION=e.TRANSFORM=e.TRANSFORMORIGIN=void 0;var y=n(27),x=function(t){return t&&t.__esModule?t:{default:t}}(y);e.create=i,e.disableDrag=a,e.enableDrag=o,e.setTransform=s,e.suppressClick=u,e.mousePos=c,e.touchPos=f,e.remove=h,e.toDom=p,e.getPointerXY=v,e.addClass=m,e.removeClass=g,e.hasClass=_;var b=n(109),S=n(75),w=window.document.documentElement.style,E=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),A=void 0,T=(e.TRANSFORMORIGIN=r(["TRANSFORMORIGIN","WebkitTransformOrigin","OTransformOrigin","MozTransformOrigin","msTransformOrigin"]),e.TRANSFORM=r(["transform","WebkitTransform","OTransform","MozTransform","msTransform"])),M=e.TRANSITION=r(["transition","webkitTransition","OTransition","MozTransition","msTransition"]);e.TRANSITIONEND="transition"===M?M+"end":M+"End",e.TRANSITIONDURATION=M+"Duration",e.TRANSITIONTIMINGFUNCTION=M+"TimingFunction"},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(15),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(217),f=i(c),d=n(819),h=i(d),p=void 0,v={},m=function(){function t(e){(0,s.default)(this,t),this.gl=e.gl,this.location={},this.store=null,this.shaderSource=null,this.shaderParams=null}return(0,u.default)(t,[{key:"preDraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.programId;e!==p&&(p=e,this.enableProgram(t.updated)),this.loadTexture(t),this.applyLight(t.lightUniforms,t.shadowTexture)}},{key:"afterDraw",value:function(){if(this.enableLight){var t=this.gl;t.activeTexture(t.TEXTURE3),t.bindTexture(t.TEXTURE_2D,null)}}},{key:"loadTexture",value:function(){}},{key:"applyLight",value:function(t,e){if(t&&this.enableLight){var n=this.gl,i=t.lighting_uBase,r=t.lighting_uToneMapping,a=t.lighting_uAmbientColor,o=t.lighting_uDirDirection,s=t.lighting_uDirColor,l=t.lighting_uDirCount,u=t.lighting_uPointPosition,c=t.lighting_uPointAtt,f=t.lighting_uPointColor,d=t.lighting_uPointCount,h=t.lighting_uShadow,p=t.lighting_uViewPos,v=t.lighting_uShadowLightPVMatrix;e&&e.bind(n,{textureIndex:3}),n.uniform4f(this.lighting_uBase,i[0],i[1],i[2],i[3]),n.uniform4f(this.lighting_uAdvanced,r[0],r[1],h[0],h[1]),n.uniform3f(this.lighting_uAmbientColor,a[0],a[1],a[2]),n.uniform3fv(this.lighting_uDirDirection,o),n.uniform3fv(this.lighting_uDirColor,s),n.uniform3fv(this.lighting_uPointPosition,u),n.uniform3fv(this.lighting_uPointAtt,c),n.uniform3fv(this.lighting_uPointColor,f),n.uniform2f(this.lighting_uLightCount,l,d),n.uniform3f(this.lighting_uViewPos,p[0],p[1],p[2]),n.uniformMatrix4fv(this.lighting_uShadowLightPVMatrix,!1,v),e&&n.uniform1i(this.lighting_uShadowSampler,3)}}},{key:"createBuffer",value:function(t,e,n,i){var r=this.gl,a={};return e&&(a.vertices=new f.default(r,{data:e,usage:r.DYNAMIC_DRAW})),n&&(a.indices=new f.default(r,{target:r.ELEMENT_ARRAY_BUFFER,data:n,usage:r.DYNAMIC_DRAW}),a.length=n.byteLength/n.BYTES_PER_ELEMENT),i&&(a.fillCoordinates=new f.default(r,{data:i,usage:r.DYNAMIC_DRAW})),a}},{key:"bindVertexBuffer",value:function(t,e){var n=this.gl,i=t.attributes,r=void 0;e?e.bind():e=new f.default(n,{data:t.arrayBuffer,usage:n.DYNAMIC_DRAW});for(var a=0,o=i.length;a<o;a++){r=i[a],r.name in this.location||(this.location[r.name]=n.getAttribLocation(n.program,r.name));var s=this.location[r.name];s<0||e.pointToAttrib({location:s,size:r.components,type:n[r.type],stride:t.bytesPerElement,offset:r.offset})}return e}},{key:"unbindVertexBuffer",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=this.gl;n.forEach(function(t){t.name in e.location||(e.location[t.name]=i.getAttribLocation(i.program,t.name));var n=e.location[t.name];n<0||e.gl.disableVertexAttribArray(n)}),t.unbind()}},{key:"bindElementBuffer",value:function(t,e){var n=this.gl;return e?e.bind():e=new f.default(n,{target:n.ELEMENT_ARRAY_BUFFER,data:t.arrayBuffer,usage:n.DYNAMIC_DRAW}),e}},{key:"getVariableLocations",value:function(t){var e=(0,a.default)({},this.shaderParams);if(this.enableLight){var n;(n=e.uniforms).push.apply(n,["lighting_uBase","lighting_uAdvanced","lighting_uAmbientColor","lighting_uDirDirection","lighting_uDirColor","lighting_uPointPosition","lighting_uPointAtt","lighting_uPointColor","lighting_uLightCount","lighting_uViewPos","lighting_uShadowLightPVMatrix","lighting_uShadowSampler"])}return(0,a.default)({},t.getLocations("attributes",e.attributes),t.getLocations("uniforms",e.uniforms))}},{key:"enableProgram",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.gl,n=this.programId,i=this.shaderSource,r=v[n];r?t&&(r.attachShader(i.v,i.f,t),r.locations=this.getVariableLocations(r),v[n]=r):(r=new h.default(e,{vShader:i.v,fShader:i.f}),r.locations=this.getVariableLocations(r),v[n]=r),r.enable(),(0,a.default)(this,r.locations)}},{key:"clearStore",value:function(){this.store&&this.store.clear()}},{key:"destroy",value:function(){this.store&&(this.store.clear(),this.store=null);var t=this.shaderSource.name+this.gl.id;v[t]&&(v[t].delete(),delete v[t]),this.shaderParams=null,this.shaderSource=null,this.location=null,this.gl=null}},{key:"isBufferChanged",value:function(t,e){if(t&&e){for(var n in t)if(t.hasOwnProperty(n)&&e[n]&&t[n].data!==e[n])return!0;return!1}}},{key:"programId",get:function(){return this.shaderSource.name+this.gl.id}}]),t}();e.default=m},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(289),v=i(p),m=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.default)(this,e),(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t,n))}return(0,h.default)(e,t),(0,u.default)(e,[{key:"_onCreate",value:function(){return this.gl.createBuffer()}},{key:"_onDelete",value:function(){this.unbind(),this.gl.deleteBuffer(this._object),this.gl.disableVertexAttribArray(this.location)}},{key:"_initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.target=t.target||this.gl.ARRAY_BUFFER,t.data&&(this.bind(),this.bufferData(t.data,t))}},{key:"bind",value:function(t,e){t=t||this.gl,e=e||this.target,t.bindBuffer(e,this._object)}},{key:"unbind",value:function(t,e){t=t||this.gl,e=e||this.target,t.bindBuffer(e,null)}},{key:"bufferData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl.bufferData(this.target,t,e.usage||this.gl.STATIC_DRAW)}},{key:"bufferSubData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl.bufferSubData(this.target,e.offset||0,t)}},{key:"pointToAttrib",value:function(t){var e=t.location,n=t.size,i=t.type,r=t.normalized,a=void 0!==r&&r,o=t.stride,s=void 0===o?0:o,l=t.offset,u=void 0===l?0:l,c=t.enable,f=void 0===c||c;this.location=e,this.gl.vertexAttribPointer(e,n,i,a,s,u),f&&this.gl.enableVertexAttribArray(e)}},{key:"buffer",get:function(){return this._object}}]),e}(v.default);e.default=m},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(289),v=i(p),m=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.default)(this,e);var i=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t,n));return i._initialize(n),i}return(0,h.default)(e,t),(0,u.default)(e,[{key:"_onCreate",value:function(){return this.gl.createTexture()}},{key:"_onDelete",value:function(){this.unbind(),this.gl.deleteTexture(this._object)}},{key:"_initialize",value:function(t){var e=t.pixels,n=t.originalWidth,i=t.originalHeight,r=t.width,a=t.height,o=t.internalformat,s=t.type,l=void 0===s?"UNSIGNED_BYTE":s,u=t.format,c=void 0===u?"RGBA":u,f=t.target,d=void 0===f?"TEXTURE_2D":f,h=e&&e.width,p=e&&e.height;this.pixels=e||null,this.originalWidth=n||h,this.originalHeight=i||p,this.width=r||h,this.height=a||p,this.type=l,this.format=c,this.internalformat=o||c,this.target=d,this._uploaded=!1}},{key:"bind",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=t||this.gl;var n=this.target,i=this._object,r=t.TEXTURE0+(e.textureIndex||0);t.activeTexture(r),t.bindTexture(t[n],i)}},{key:"unbind",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=t||this.gl;var n=this.target,i=t.TEXTURE0+(e.textureIndex||0);t.activeTexture(i),t.bindTexture(this.gl[n],null)}},{key:"resize",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.width=t,this.height=e;var i=this.gl,r=this.target;i&&(this.bind(null,n),this._preSet(n),i.texImage2D(i[r],0,i[this.internalformat],t,e,0,i[this.format],i[this.type],this.pixels))}},{key:"update",value:function(t,e){t&&(this.originalWidth=t.width,this.width=t.width||e.width,this.height=t.height||e.height,this.originalHeight=t.height,this.pixels=t||null,this._uploaded=!1,this.upload(e))}},{key:"updateSub",value:function(t,e){if(t){this.bind(null,e),this._preSet(e);var n=this.gl,i=this.target,r=this.format,a=this.type,o=e.xOffset,s=e.yOffset;n.texSubImage2D(n[i],0,o,s,n[r],n[a],t)}}},{key:"upload",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.gl||console.error("Texture donnot have gl, unable upload to GPU!");var e=this.gl,n=this.target;this.bind(null,t),this._preSet(t),this._uploaded||(e.isWebGL2?e.texImage2D(e[n],0,e[this.internalformat],this.width,this.height,0,e[this.format],e[this.type],this.pixels):e.texImage2D(e[n],0,e[this.internalformat],e[this.format],e[this.type],this.pixels),t.useMipmap&&e.generateMipmap(e[n])),this._uploaded=!0}},{key:"copy",value:function(t){var e=this.gl,n=this.width,i=this.height,r=this.target;e||console.error("Texture donnot have gl, unable upload to GPU!"),this.bind(null,t),this._preSet(t),e.copyTexImage2D(e[r],0,e[this.internalformat],0,0,n,i,0)}},{key:"destroy",value:function(){this.gl&&this.delete()}},{key:"_preSet",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.gl,n=this.target;t.flipY&&e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1),t.premultiply&&e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texParameteri(e[n],e.TEXTURE_MIN_FILTER,t.minFilter||e.LINEAR),e.texParameteri(e[n],e.TEXTURE_MAG_FILTER,t.magFilter||e.LINEAR),e.texParameteri(e[n],e.TEXTURE_WRAP_S,t.wrapS||e.CLAMP_TO_EDGE),e.texParameteri(e[n],e.TEXTURE_WRAP_T,t.wrapT||e.CLAMP_TO_EDGE)}},{key:"texture",get:function(){return this._object}}]),e}(v.default);e.default=m},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var i=n(107),r=n(276);t.exports=n(106)?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var i=n(335),r=n(254);t.exports=function(t){return i(r(t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.UNIFORM_PART="\n    uniform mat4 uMatrix;\n    uniform vec4 uCenter;\n    uniform float uZoom;\n\n    uniform vec3 uPixelsPerMeter;\n\n    uniform vec2 uResolution;\n    uniform vec3 uProject_uCommonUnitsPerWorldUnit;\n    uniform vec3 uProject_uCommonUnitsPerWorldUnit2;\n",e.PROJECTION_PART="\n    float PI = 3.141592653589793;\n\n    float degreeToRadian(float deg) {\n      \treturn deg * PI / 180.;\n\t}\n\tconst float THRESHOLD_ZOOM = 9.0;\n\tfloat radianToDegree(float rad) {\n\t\treturn rad / PI * 180.;\n\t}\n\t\n\t\n\tvec2 fromPointToLatLng(vec2 point) {\n\t\tvec2 c = vec2(128.0, 128.0);\n\t\tfloat lng = (point.x - c.x) / 256. * 360.;\n\t\tfloat a = - (point.y - c.y) / 256. * 2. * PI;\n\t\tfloat lat = radianToDegree(2. * atan(exp(a)) - PI / 2.);\n\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\treturn vec2(lng, lat);\n\t}\n\n\n    vec2 fromLatLngToPoint(vec2 latlng) {\n      \tvec2 c = vec2(0.0, 0.0);\n      \tvec2 d = vec2(128.0, 128.0);\n      \tc.x = d.x + latlng.x * (256. / 360.);\n      \tfloat e = clamp(sin(degreeToRadian(latlng.y)), -(1. - 1E-15), 1. - 1E-15);\n      \tc.y = d.y + 0.5 * log((1. + e) / (1. - e)) * -(256. / (2. * PI));\n      \treturn c;\n    }\n\n\n\n    vec2 project_position(vec2 latlng, float mapzoom) {\n      \tvec2 tileCoord = fromLatLngToPoint(latlng);\n      \tfloat dimension = pow(2., mapzoom);\n      \ttileCoord.xy *= dimension;\n\n      \treturn tileCoord;\n    }\n\n\n    vec2 project_view_local_position(vec2 latlng) {\n      \tvec2 centerCoord = project_position(uCenter.xy, uZoom);\n      \tvec2 p = project_position(latlng.xy, uZoom);\n\n      \t\n      \treturn vec2(p.x - centerCoord.x, centerCoord.y - p.y);\n    }\n\n    vec3 project_offset(vec3 offset) {\n      \tfloat dy = offset.y;\n\t\t\n      \tdy = clamp(dy, -1., 1.);\n      \tvec3 commonUnitsPerWorldUnit = uProject_uCommonUnitsPerWorldUnit + uProject_uCommonUnitsPerWorldUnit2 * dy;\n\t\t\n      \treturn vec3(offset.xyz * commonUnitsPerWorldUnit.xyz);\n    }\n    \n\n\tvec3 project_view_local_position_precision(vec3 latlngHigh, vec2 latlngLow) {\n\t\t\n\n\t\t\n\t\tvec3 temp_latlng_high = vec3(latlngHigh.x ,latlngHigh.y, latlngHigh.z);\n\t\t\n\t\tif (uCenter.x > 0.0) {\n\t\t\ttemp_latlng_high = vec3(latlngHigh.x ,latlngHigh.y, latlngHigh.z);\n\t\t} else {\n\t\t\ttemp_latlng_high = vec3(latlngHigh.x ,latlngHigh.y, latlngHigh.z);\n\t\t}\n\n\t\tvec2 high = temp_latlng_high.xy - uCenter.xy;\n\t\tvec2 low = latlngLow.xy - uCenter.zw;\n\n\t\treturn mix(\n\t\t\tvec3(project_view_local_position(temp_latlng_high.xy), uProject_uCommonUnitsPerWorldUnit.z * temp_latlng_high.z),\n\t\t\tproject_offset(vec3(high + low, temp_latlng_high.z)),\n\t\t\tstep(9.0, uZoom)\n\t\t);\n\t}\n\n\n    vec2 project_view_local_position_precision(vec2 latlngHigh, vec2 latlngLow) {\n      \tvec3 result = project_view_local_position_precision(vec3(latlngHigh.xy, 0.0), latlngLow);\n\n      \treturn result.xy;\n\t}\n\t\n  vec2 centerPositiveCross0( vec3 startTemp, vec3 endTemp,vec3 latlngHigh,vec3 endLatlngHigh,float startLng,float endLng,float centerLng, float halfPixelDegree){\n    startTemp.x = mix(latlngHigh.x ,latlngHigh.x + 360.0, step(halfPixelDegree, centerLng - startLng) * step( halfPixelDegree, centerLng - endLng));\n    endTemp.x = mix(endLatlngHigh.x ,endLatlngHigh.x + 360.0, step(halfPixelDegree, centerLng - startLng) * step( halfPixelDegree, centerLng - endLng));\n    return vec2(startTemp.x, endTemp.x);\n  }\n\n  vec2 centerPositiveCross180( vec3 startTemp, vec3 endTemp,vec3 latlngHigh,vec3 endLatlngHigh,float startLng,float endLng,float centerLng, float halfPixelDegree){\n    float transit = 1.0;\n\n    startTemp.x = mix(latlngHigh.x , latlngHigh.x + 360.0, step( halfPixelDegree,centerLng -startLng));\n\n    endTemp.x = mix(endLatlngHigh.x , endLatlngHigh.x + 360.0, step( halfPixelDegree, centerLng -endLng));\n    transit = step(halfPixelDegree,centerLng -startLng) * step(halfPixelDegree, centerLng -endLng);\n\n\n\n    endTemp.x = mix(\n      endTemp.x,\n      mix(endLatlngHigh.x , endLatlngHigh.x + 360.0, step(startLng - endLng,180.0)),\n      transit\n    );\n\n    startTemp.x = mix(\n      startTemp.x,\n      mix(latlngHigh.x , latlngHigh.x + 360.0, step( endLng - startLng ,180.0)),\n      transit\n    );\n     return vec2(startTemp.x, endTemp.x);\n  }\n\n  vec2 centerNegativeCross0( vec3 startTemp, vec3 endTemp,vec3 latlngHigh,vec3 endLatlngHigh,float startLng,float endLng,float centerLng, float halfPixelDegree){\n    startTemp.x = mix(latlngHigh.x , latlngHigh.x - 360.0, step(halfPixelDegree, startLng - centerLng ) * step( halfPixelDegree, endLng - centerLng));\n    endTemp.x = mix(endLatlngHigh.x , endLatlngHigh.x - 360.0, step(halfPixelDegree, startLng - centerLng ) * step( halfPixelDegree, endLng - centerLng));\n    return vec2(startTemp.x, endTemp.x);\n  }\n\n  vec2 centerNegativeCross180( vec3 startTemp, vec3 endTemp,vec3 latlngHigh,vec3 endLatlngHigh,float startLng,float endLng,float centerLng, float halfPixelDegree){\n    float transit = 1.0;\n    startTemp.x = mix(latlngHigh.x , latlngHigh.x - 360.0, step( halfPixelDegree, startLng - centerLng));\n    endTemp.x = mix(endLatlngHigh.x , endLatlngHigh.x - 360.0, step( halfPixelDegree, endLng - centerLng));\n\n    transit = step(halfPixelDegree,centerLng -startLng) * step(halfPixelDegree, centerLng -endLng);\n    startTemp.x = mix(\n      startTemp.x,\n      mix(latlngHigh.x , latlngHigh.x - 360.0, step( startLng - endLng  ,180.0)),\n      transit\n    );\n    endTemp.x = mix(\n      endTemp.x,\n      mix(endLatlngHigh.x , endLatlngHigh.x - 360.0, step(endLng - startLng ,180.0)),\n      transit\n    );\n    return vec2(startTemp.x, endTemp.x);\n  }\n\n\tvoid geodesic_project_view_local_precision(vec3 latlngHigh, vec2 latlngLow,vec3 endLatlngHigh, vec2 endLatlngLow, inout vec3 geodesic_Position_Start, inout vec3 geodesic_Position_End, vec2 uProject_uDegreePerPixels) {\n\t\t\n    float halfPixelDegree = uResolution.x * uProject_uDegreePerPixels.x / 2.0;\n\t\tvec3 startTemp = latlngHigh;\n\t\tvec3 endTemp = endLatlngHigh;\n\t\tfloat startLng = latlngHigh.x + latlngLow.x;\n    float endLng = endLatlngHigh.x + endLatlngLow.x;\n    float centerLng = uCenter.x + uCenter.z;\n    vec2 startEndLngCross0 = mix(\n      centerNegativeCross0(startTemp,endTemp,latlngHigh,endLatlngHigh,startLng,endLng,centerLng, halfPixelDegree),\n      centerPositiveCross0(startTemp,endTemp,latlngHigh,endLatlngHigh,startLng,endLng,centerLng, halfPixelDegree),\n      step(0.0, uCenter.x)\n    );\n    vec2 startEndLngCross180 = mix(\n      centerNegativeCross180(startTemp,endTemp,latlngHigh,endLatlngHigh,startLng,endLng,centerLng, halfPixelDegree),\n      centerPositiveCross180(startTemp,endTemp,latlngHigh,endLatlngHigh,startLng,endLng,centerLng, halfPixelDegree),\n      step(0.0, uCenter.x)\n    );\n    startTemp.x = mix(\n      startEndLngCross180.x,\n      startEndLngCross0.x,\n      step(abs(startLng - endLng), 180.0));\n    endTemp.x = mix(\n      startEndLngCross180.y,\n      startEndLngCross0.y,\n      step(abs(startLng - endLng), 180.0));\n  \n\t\tvec3 startNew = project_view_local_position_precision(startTemp, latlngLow);\n\t\tvec3 endNew = project_view_local_position_precision(endTemp, endLatlngLow);\n\t\tgeodesic_Position_Start = startNew;\n\t\tgeodesic_Position_End = endNew;\n\t}\n\tvec3 latlng_to_cartesian(vec2 latlng) {\n\t\t\n\t\tvec2 spherical = vec2(degreeToRadian(latlng.x), degreeToRadian(latlng.y));\n\t\t\n\t\t\n\t\tvec3 cartesian = vec3(\n\t\t\tcos(spherical.y) * sin(spherical.x),\n\t\t\tsin(spherical.y),\n\t\t\tcos(spherical.y) * cos(spherical.x)\n\t\t);\n\n\t\treturn cartesian;\n\t}\n\t\n\t\n\tvec4 project_view_sphere_position(vec2 latlng) {\n\t\tvec3 cartesian = latlng_to_cartesian(latlng);\n\n\t\t\n\t\tfloat rotateY = - degreeToRadian(uCenter.x);\n\t\tfloat rotateX = degreeToRadian(uCenter.y);\n\t\tfloat r = 256. * pow(2., uZoom) / (2. * PI);\n\t\tmat4 rotate1 = mat4(\n\t\t\tcos(rotateY), 0., -sin(rotateY), 0.,\n\t\t\t0., 1., 0., 0.,\n\t\t\tsin(rotateY), 0., cos(rotateY), 0.,\n\t\t\t0., 0., 0., 1.\n\t\t);\n\t\tmat4 rotate2 = mat4(\n\t\t\t1., 0., 0., 0.,\n\t\t\t0., cos(rotateX), sin(rotateX), 0.,\n\t\t\t0., -sin(rotateX), cos(rotateX), 0.,\n\t\t\t0., 0., 0., 1.\n\t\t);\n\t\tmat4 scaleAndTrans = mat4(\n\t\t\tr, 0., 0., 0.,\n\t\t\t0., r, 0., 0.,\n\t\t\t0., 0., r, 0.,\n\t\t\t0., 0., -r, 1.\n\t\t);\n\t\tvec4 position = scaleAndTrans * rotate2 * rotate1 * vec4(cartesian, 1.0);\n\t\treturn position;\n\t}\n\n\n    vec2 proj_position_to_screen(vec4 device) {\n\t\tvec3 device_normal = device.xyz / device.w;\n\t\tvec2 clip_pos = (device_normal * 0.5 + 0.5).xy;\n\t\treturn clip_pos * uResolution;\n    }\n    \n\n\tvec4 screen_to_proj_position(vec2 screen, float z, float w) {\n\t    vec2 clip_pos = screen / uResolution;\n\t    vec2 device_normal = clip_pos * 2.0 - 1.0;\n\t    return vec4(device_normal * w, z, w);\n\t}\n\n    vec3 project_scale(vec3 meters) {\n      \treturn meters * uPixelsPerMeter;\n    }\n\n    vec2 rotate_by_angle_onScreen(vec2 vertex, float angle) {\n      \tfloat angle_radian = angle * PI / 180.0;\n      \tfloat cos_angle = cos(angle_radian);\n      \tfloat sin_angle = sin(angle_radian);\n      \tmat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n      \treturn rotationMatrix * vertex;\n    }\n",e.SDF_PART="\n\t\n\tfloat distance = texture2D(u_sampler, vTextureCoords).a;\n\n\t\n\tfloat finalAlpha = smoothstep(usedBuff - vGamma, usedBuff + vGamma, distance);\n\n\t\n\tfloat outlineFactor = smoothstep(u_buffer - vGamma, u_buffer + vGamma, distance);\n\n\t\n\tvec4 color = mix(vStrokeColor, vColor, outlineFactor) * finalAlpha;\n"},,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r,a,o,s=n(80),l=i(s),u=n(23),c=i(u),f=n(355),d=i(f),h=n(227),p=i(h),v=n(267),m=i(v),g=n(164),_=i(g),y=n(132),x=i(y),b=n(25),S=i(b),w=n(95),E=i(w),A=n(421),T=i(A),M=n(314),I=i(M),P=n(420),k=i(P),L=n(27),C=i(L),R=n(17),D=i(R),N=n(122),B=i(N),O=n(419),F=i(O),z=n(32),V=i(z),U=n(15),G=i(U),H=n(94),Y=i(H),j=n(3),W=i(j),X=n(5),Z=i(X),q=n(4),Q=i(q),J=n(228),K=i(J),$=n(116),tt=i($),et=n(123),nt=i(et),it=n(0),rt=i(it),at=n(1),ot=i(at),st=n(19),lt=i(st);/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
!function(n,i){"object"===(0,lt.default)(e)&&void 0!==t?i(e):(a=[e],r=i,void 0!==(o="function"==typeof r?r.apply(e,a):r)&&(t.exports=o))}(0,function(t){function e(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(xo[255&t]+xo[t>>8&255]+xo[t>>16&255]+xo[t>>24&255]+"-"+xo[255&e]+xo[e>>8&255]+"-"+xo[e>>16&15|64]+xo[e>>24&255]+"-"+xo[63&n|128]+xo[n>>8&255]+"-"+xo[n>>16&255]+xo[n>>24&255]+xo[255&i]+xo[i>>8&255]+xo[i>>16&255]+xo[i>>24&255]).toUpperCase()}function n(t,e,n){return Math.max(e,Math.min(n,t))}function i(t,e){return(t%e+e)%e}function r(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)}function a(t,e,n){return t!==e?(n-t)/(e-t):0}function o(t,e,n){return(1-n)*t+n*e}function s(t,e,n,i){return o(t,e,1-Math.exp(-n*i))}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e-Math.abs(i(t,2*e)-e)}function f(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)}function h(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)}function v(t,e){return t+Math.floor(Math.random()*(e-t+1))}function g(t,e){return t+Math.random()*(e-t)}function y(t){return t*(.5-Math.random())}function b(t){return void 0!==t&&(So=t%2147483647),((So=16807*So%2147483647)-1)/2147483646}function w(t){return t*wo}function A(t){return t*Eo}function M(t){return 0==(t&t-1)&&0!==t}function P(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function L(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function R(t,e,n,i,r){var a=Math.cos,o=Math.sin,s=a(n/2),l=o(n/2),u=a((e+i)/2),c=o((e+i)/2),f=a((e-i)/2),d=o((e-i)/2),h=a((i-e)/2),p=o((i-e)/2);switch(r){case"XYX":t.set(s*c,l*f,l*d,s*u);break;case"YZY":t.set(l*d,s*c,l*f,s*u);break;case"ZXZ":t.set(l*f,l*d,s*c,s*u);break;case"XZX":t.set(s*c,l*p,l*h,s*u);break;case"YXY":t.set(l*h,s*c,l*p,s*u);break;case"ZYZ":t.set(l*p,l*h,s*c,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function N(t){for(var e=t.length-1;e>=0;--e)if(t[e]>65535)return!0;return!1}function O(t,e){return new Io[t](e)}function z(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function U(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function H(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function j(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}function X(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?Do.getDataURL(t):t.data?{data:Array.prototype.slice.call(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}function q(t,e,n,i,r){for(var a=0,o=t.length-3;a<=o;a+=3){rs.fromArray(t,a);var s=r.x*Math.abs(rs.x)+r.y*Math.abs(rs.y)+r.z*Math.abs(rs.z),l=e.dot(rs),u=n.dot(rs),c=i.dot(rs);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>s)return!1}return!0}function J(t,e,n,i,r,a,o,s){if(null===(e.side===or?i.intersectTriangle(o,a,r,!0,s):i.intersectTriangle(r,a,o,e.side!==sr,s)))return null;Ul.copy(s),Ul.applyMatrix4(t.matrixWorld);var l=n.ray.origin.distanceTo(Ul);return l<n.near||l>n.far?null:{distance:l,point:Ul.clone(),object:t}}function $(t,e,n,i,r,a,o,s,l,u,c,f){Il.fromBufferAttribute(r,u),Pl.fromBufferAttribute(r,c),kl.fromBufferAttribute(r,f);var d=t.morphTargetInfluences;if(a&&d){Dl.set(0,0,0),Nl.set(0,0,0),Bl.set(0,0,0);for(var h=0,p=a.length;h<p;h++){var v=d[h],m=a[h];0!==v&&(Ll.fromBufferAttribute(m,u),Cl.fromBufferAttribute(m,c),Rl.fromBufferAttribute(m,f),o?(Dl.addScaledVector(Ll,v),Nl.addScaledVector(Cl,v),Bl.addScaledVector(Rl,v)):(Dl.addScaledVector(Ll.sub(Il),v),Nl.addScaledVector(Cl.sub(Pl),v),Bl.addScaledVector(Rl.sub(kl),v)))}Il.add(Dl),Pl.add(Nl),kl.add(Bl)}t.isSkinnedMesh&&(t.boneTransform(u,Il),t.boneTransform(c,Pl),t.boneTransform(f,kl));var g=J(t,e,n,i,Il,Pl,kl,Vl);if(g){s&&(Ol.fromBufferAttribute(s,u),Fl.fromBufferAttribute(s,c),zl.fromBufferAttribute(s,f),g.uv=tl.getUV(Vl,Il,Pl,kl,Ol,Fl,zl,new To)),l&&(Ol.fromBufferAttribute(l,u),Fl.fromBufferAttribute(l,c),zl.fromBufferAttribute(l,f),g.uv2=tl.getUV(Vl,Il,Pl,kl,Ol,Fl,zl,new To));var _={a:u,b:c,c:f,normal:new Go,materialIndex:0};tl.getNormal(Il,Pl,kl,_.normal),g.face=_}return g}function et(t){var e={};for(var n in t){e[n]={};for(var i in t[n]){var r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function it(t){for(var e={},n=0;n<t.length;n++){var i=et(t[n]);for(var r in i)e[r]=i[r]}return e}function at(){function t(n,a){i(n,a),r=e.requestAnimationFrame(t)}var e=null,n=!1,i=null,r=null;return{start:function(){!0!==n&&null!==i&&(r=e.requestAnimationFrame(t),n=!0)},stop:function(){e.cancelAnimationFrame(r),n=!1},setAnimationLoop:function(t){i=t},setContext:function(t){e=t}}}function st(t,e){function n(e,n){var i=e.array,r=e.usage,a=t.createBuffer();t.bindBuffer(n,a),t.bufferData(n,i,r),e.onUploadCallback();var o=t.FLOAT;return i instanceof Float32Array?o=t.FLOAT:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?e.isFloat16BufferAttribute?s?o=t.HALF_FLOAT:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):o=t.UNSIGNED_SHORT:i instanceof Int16Array?o=t.SHORT:i instanceof Uint32Array?o=t.UNSIGNED_INT:i instanceof Int32Array?o=t.INT:i instanceof Int8Array?o=t.BYTE:i instanceof Uint8Array?o=t.UNSIGNED_BYTE:i instanceof Uint8ClampedArray&&(o=t.UNSIGNED_BYTE),{buffer:a,type:o,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}function i(e,n,i){var r=n.array,a=n.updateRange;t.bindBuffer(i,e),-1===a.count?t.bufferSubData(i,0,r):(s?t.bufferSubData(i,a.offset*r.BYTES_PER_ELEMENT,r,a.offset,a.count):t.bufferSubData(i,a.offset*r.BYTES_PER_ELEMENT,r.subarray(a.offset,a.offset+a.count)),a.count=-1)}function r(t){return t.isInterleavedBufferAttribute&&(t=t.data),l.get(t)}function a(e){e.isInterleavedBufferAttribute&&(e=e.data);var n=l.get(e);n&&(t.deleteBuffer(n.buffer),l.delete(e))}function o(t,e){if(t.isGLBufferAttribute){var r=l.get(t);return void((!r||r.version<t.version)&&l.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);var a=l.get(t);void 0===a?l.set(t,n(t,e)):a.version<t.version&&(i(a.buffer,t,e),a.version=t.version)}var s=e.isWebGL2,l=new I.default;return{get:r,remove:a,update:o}}function lt(t,e,n,i,r,a){function o(n,r){var a=!1,o=!0===r.isScene?r.background:null;o&&o.isTexture&&(o=e.get(o));var v=t.xr,m=v.getSession&&v.getSession();m&&"additive"===m.environmentBlendMode&&(o=null),null===o?s(l,u):o&&o.isColor&&(s(o,1),a=!0),(t.autoClear||a)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),o&&(o.isCubeTexture||o.mapping===Jr)?(void 0===f&&(f=new Gl(new Hl(1,1,1),new Xl({name:"BackgroundCubeMaterial",uniforms:et(fu.cube.uniforms),vertexShader:fu.cube.vertexShader,fragmentShader:fu.cube.fragmentShader,side:or,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(f)),f.material.uniforms.envMap.value=o,f.material.uniforms.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,d===o&&h===o.version&&p===t.toneMapping||(f.material.needsUpdate=!0,d=o,h=o.version,p=t.toneMapping),n.unshift(f,f.geometry,f.material,0,0,null)):o&&o.isTexture&&(void 0===c&&(c=new Gl(new lu(2,2),new Xl({name:"BackgroundMaterial",uniforms:et(fu.background.uniforms),vertexShader:fu.background.vertexShader,fragmentShader:fu.background.fragmentShader,side:ar,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=o,!0===o.matrixAutoUpdate&&o.updateMatrix(),c.material.uniforms.uvTransform.value.copy(o.matrix),d===o&&h===o.version&&p===t.toneMapping||(c.material.needsUpdate=!0,d=o,h=o.version,p=t.toneMapping),n.unshift(c,c.geometry,c.material,0,0,null))}function s(t,e){n.buffers.color.setClear(t.r,t.g,t.b,e,a)}var l=new Co(0),u=!0===r?0:1,c=void 0,f=void 0,d=null,h=0,p=null;return{getClearColor:function(){return l},setClearColor:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;l.set(t),u=e,s(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(t){u=t,s(l,u)},render:o}}function ut(t,e,n,i){function r(e,i,r,a,s){var u=!1;if(A){var d=l(a,r,i);I!==d&&(I=d,o(I.object)),u=c(a,s),u&&f(a,s)}else{var h=!0===i.wireframe;I.geometry===a.id&&I.program===r.id&&I.wireframe===h||(I.geometry=a.id,I.program=r.id,I.wireframe=h,u=!0)}!0===e.isInstancedMesh&&(u=!0),null!==s&&n.update(s,t.ELEMENT_ARRAY_BUFFER),u&&(g(e,i,r,a),null!==s&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(s).buffer))}function a(){return i.isWebGL2?t.createVertexArray():E.createVertexArrayOES()}function o(e){return i.isWebGL2?t.bindVertexArray(e):E.bindVertexArrayOES(e)}function s(e){return i.isWebGL2?t.deleteVertexArray(e):E.deleteVertexArrayOES(e)}function l(t,e,n){var i=!0===n.wireframe,r=T[t.id];void 0===r&&(r={},T[t.id]=r);var o=r[e.id];void 0===o&&(o={},r[e.id]=o);var s=o[i];return void 0===s&&(s=u(a()),o[i]=s),s}function u(t){for(var e=[],n=[],i=[],r=0;r<w;r++)e[r]=0,n[r]=0,i[r]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:i,object:t,attributes:{},index:null}}function c(t,e){var n=I.attributes,i=t.attributes,r=0;for(var a in i){var o=n[a],s=i[a];if(void 0===o)return!0;if(o.attribute!==s)return!0;if(o.data!==s.data)return!0;r++}return I.attributesNum!==r||I.index!==e}function f(t,e){var n={},i=t.attributes,r=0;for(var a in i){var o=i[a],s={};s.attribute=o,o.data&&(s.data=o.data),n[a]=s,r++}I.attributes=n,I.attributesNum=r,I.index=e}function d(){for(var t=I.newAttributes,e=0,n=t.length;e<n;e++)t[e]=0}function h(t){p(t,0)}function p(n,r){var a=I.newAttributes,o=I.enabledAttributes,s=I.attributeDivisors;if(a[n]=1,0===o[n]&&(t.enableVertexAttribArray(n),o[n]=1),s[n]!==r){(i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),s[n]=r}}function v(){for(var e=I.newAttributes,n=I.enabledAttributes,i=0,r=n.length;i<r;i++)n[i]!==e[i]&&(t.disableVertexAttribArray(i),n[i]=0)}function m(e,n,r,a,o,s){!0!==i.isWebGL2||r!==t.INT&&r!==t.UNSIGNED_INT?t.vertexAttribPointer(e,n,r,a,o,s):t.vertexAttribIPointer(e,n,r,o,s)}function g(r,a,o,s){if(!1!==i.isWebGL2||!r.isInstancedMesh&&!s.isInstancedBufferGeometry||null!==e.get("ANGLE_instanced_arrays")){d();var l=s.attributes,u=o.getAttributes(),c=a.defaultAttributeValues;for(var f in u){var g=u[f];if(g.location>=0){var _=l[f];if(void 0===_&&("instanceMatrix"===f&&r.instanceMatrix&&(_=r.instanceMatrix),"instanceColor"===f&&r.instanceColor&&(_=r.instanceColor)),void 0!==_){var y=_.normalized,x=_.itemSize,b=n.get(_);if(void 0===b)continue;var S=b.buffer,w=b.type,E=b.bytesPerElement;if(_.isInterleavedBufferAttribute){var A=_.data,T=A.stride,M=_.offset;if(A&&A.isInstancedInterleavedBuffer){for(var I=0;I<g.locationSize;I++)p(g.location+I,A.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=A.meshPerAttribute*A.count)}else for(var P=0;P<g.locationSize;P++)h(g.location+P);t.bindBuffer(t.ARRAY_BUFFER,S);for(var k=0;k<g.locationSize;k++)m(g.location+k,x/g.locationSize,w,y,T*E,(M+x/g.locationSize*k)*E)}else{if(_.isInstancedBufferAttribute){for(var L=0;L<g.locationSize;L++)p(g.location+L,_.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=_.meshPerAttribute*_.count)}else for(var C=0;C<g.locationSize;C++)h(g.location+C);t.bindBuffer(t.ARRAY_BUFFER,S);for(var R=0;R<g.locationSize;R++)m(g.location+R,x/g.locationSize,w,y,x*E,x/g.locationSize*R*E)}}else if(void 0!==c){var D=c[f];if(void 0!==D)switch(D.length){case 2:t.vertexAttrib2fv(g.location,D);break;case 3:t.vertexAttrib3fv(g.location,D);break;case 4:t.vertexAttrib4fv(g.location,D);break;default:t.vertexAttrib1fv(g.location,D)}}}}v()}}function _(){b();for(var t in T){var e=T[t];for(var n in e){var i=e[n];for(var r in i)s(i[r].object),delete i[r];delete e[n]}delete T[t]}}function y(t){if(void 0!==T[t.id]){var e=T[t.id];for(var n in e){var i=e[n];for(var r in i)s(i[r].object),delete i[r];delete e[n]}delete T[t.id]}}function x(t){for(var e in T){var n=T[e];if(void 0!==n[t.id]){var i=n[t.id];for(var r in i)s(i[r].object),delete i[r];delete n[t.id]}}}function b(){S(),I!==M&&(I=M,o(I.object))}function S(){M.geometry=null,M.program=null,M.wireframe=!1}var w=t.getParameter(t.MAX_VERTEX_ATTRIBS),E=i.isWebGL2?null:e.get("OES_vertex_array_object"),A=i.isWebGL2||null!==E,T={},M=u(null),I=M;return{setup:r,reset:b,resetDefaultState:S,dispose:_,releaseStatesOfGeometry:y,releaseStatesOfProgram:x,initAttributes:d,enableAttribute:h,disableUnusedAttributes:v}}function ct(t,e,n,i){function r(t){l=t}function a(e,i){t.drawArrays(l,e,i),n.update(i,l,1)}function o(i,r,a){if(0!==a){var o=void 0,u=void 0;if(s)o=t,u="drawArraysInstanced";else if(o=e.get("ANGLE_instanced_arrays"),u="drawArraysInstancedANGLE",null===o)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");o[u](l,i,r,a),n.update(r,l,a)}}var s=i.isWebGL2,l=void 0;this.setMode=r,this.render=a,this.renderInstances=o}function ft(t,e,n){function i(){if(void 0!==a)return a;if(!0===e.has("EXT_texture_filter_anisotropic")){var n=e.get("EXT_texture_filter_anisotropic");a=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else a=0;return a}function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var a=void 0,o="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext,s=void 0!==n.precision?n.precision:"highp",l=r(s);l!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",l,"instead."),s=l);var u=o||e.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,f=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),d=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=t.getParameter(t.MAX_TEXTURE_SIZE),p=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),v=t.getParameter(t.MAX_VERTEX_ATTRIBS),m=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),g=t.getParameter(t.MAX_VARYING_VECTORS),_=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),y=d>0,x=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:r,precision:s,logarithmicDepthBuffer:c,maxTextures:f,maxVertexTextures:d,maxTextureSize:h,maxCubemapSize:p,maxAttributes:v,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:_,vertexTextures:y,floatFragmentTextures:x,floatVertexTextures:y&&x,maxSamples:o?t.getParameter(t.MAX_SAMPLES):0}}function dt(t){function e(){c.value!==r&&(c.value=r,c.needsUpdate=a>0),i.numPlanes=a,i.numIntersection=0}function n(t,e,n,r){var a=null!==t?t.length:0,o=null;if(0!==a){if(o=c.value,!0!==r||null===o){var s=n+4*a,f=e.matrixWorldInverse;u.getNormalMatrix(f),(null===o||o.length<s)&&(o=new Float32Array(s));for(var d=0,h=n;d!==a;++d,h+=4)l.copy(t[d]).applyMatrix4(f,u),l.normal.toArray(o,h),o[h+3]=l.constant}c.value=o,c.needsUpdate=!0}return i.numPlanes=a,i.numIntersection=0,o}var i=this,r=null,a=0,o=!1,s=!1,l=new ru,u=new Mo,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,i){var s=0!==t.length||e||0!==a||o;return o=e,r=n(t,i,0),a=t.length,s},this.beginShadows=function(){s=!0,n(null)},this.endShadows=function(){s=!1,e()},this.setState=function(i,l,u){var f=i.clippingPlanes,d=i.clipIntersection,h=i.clipShadows,p=t.get(i);if(!o||null===f||0===f.length||s&&!h)s?n(null):e();else{var v=s?0:a,m=4*v,g=p.clippingState||null;c.value=g,g=n(f,l,m,u);for(var _=0;_!==m;++_)g[_]=r[_];p.clippingState=g,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=v}}}function ht(t){function e(t,e){return e===qr?t.mapping=Xr:e===Qr&&(t.mapping=Zr),t}function n(n){if(n&&n.isTexture&&!1===n.isRenderTargetTexture){var r=n.mapping;if(r===qr||r===Qr){if(a.has(n)){return e(a.get(n).texture,n.mapping)}var o=n.image;if(o&&o.height>0){var s=new tu(o.height/2);return s.fromEquirectangularTexture(t,n),a.set(n,s),n.addEventListener("dispose",i),e(s.texture,n.mapping)}return null}}return n}function i(t){var e=t.target;e.removeEventListener("dispose",i);var n=a.get(e);void 0!==n&&(a.delete(e),n.dispose())}function r(){a=new I.default}var a=new I.default;return{get:n,dispose:r}}function pt(t){var e=new Fo(3*mu,3*mu,t);return e.texture.mapping=Jr,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function vt(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function mt(t){var e=new Float32Array(t),n=new Go(0,1,0);return new hu({name:"SphericalGaussianBlur",defines:{n:t},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:lr,depthTest:!1,depthWrite:!1})}function gt(){var t=new To(1,1);return new hu({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:t}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = texture2D ( envMap, uv ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t}\n\t\t",blending:lr,depthTest:!1,depthWrite:!1})}function _t(){return new hu({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:lr,depthTest:!1,depthWrite:!1})}function yt(t){function e(e){if(e&&e.isTexture){var r=e.mapping,s=r===qr||r===Qr,l=r===Xr||r===Zr;if(s||l){if(e.isRenderTargetTexture&&!0===e.needsPMREMUpdate){e.needsPMREMUpdate=!1;var u=a.get(e);return null===o&&(o=new ku(t)),u=s?o.fromEquirectangular(e,u):o.fromCubemap(e,u),a.set(e,u),u.texture}if(a.has(e))return a.get(e).texture;var c=e.image;if(s&&c&&c.height>0||l&&c&&n(c)){null===o&&(o=new ku(t));var f=s?o.fromEquirectangular(e):o.fromCubemap(e);return a.set(e,f),e.addEventListener("dispose",i),f.texture}return null}}return e}function n(t){for(var e=0,n=0;n<6;n++)void 0!==t[n]&&e++;return 6===e}function i(t){var e=t.target;e.removeEventListener("dispose",i);var n=a.get(e);void 0!==n&&(a.delete(e),n.dispose())}function r(){a=new I.default,null!==o&&(o.dispose(),o=null)}var a=new I.default,o=null;return{get:e,dispose:r}}function xt(t){function e(e){if(void 0!==n[e])return n[e];var i=void 0;switch(e){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(e)}return n[e]=i,i}var n={};return{has:function(t){return null!==e(t)},init:function(t){t.isWebGL2?e("EXT_color_buffer_float"):(e("WEBGL_depth_texture"),e("OES_texture_float"),e("OES_texture_half_float"),e("OES_texture_half_float_linear"),e("OES_standard_derivatives"),e("OES_element_index_uint"),e("OES_vertex_array_object"),e("ANGLE_instanced_arrays")),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture")},get:function(t){var n=e(t);return null===n&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),n}}}function bt(t,e,n,i){function r(t){var a=t.target;null!==a.index&&e.remove(a.index);for(var o in a.attributes)e.remove(a.attributes[o]);a.removeEventListener("dispose",r),delete u[a.id];var s=c.get(a);s&&(e.remove(s),c.delete(a)),i.releaseStatesOfGeometry(a),!0===a.isInstancedBufferGeometry&&delete a._maxInstanceCount,n.memory.geometries--}function a(t,e){return!0===u[e.id]?e:(e.addEventListener("dispose",r),u[e.id]=!0,n.memory.geometries++,e)}function o(n){var i=n.attributes;for(var r in i)e.update(i[r],t.ARRAY_BUFFER);var a=n.morphAttributes;for(var o in a)for(var s=a[o],l=0,u=s.length;l<u;l++)e.update(s[l],t.ARRAY_BUFFER)}function s(t){var n=[],i=t.index,r=t.attributes.position,a=0;if(null!==i){var o=i.array;a=i.version;for(var s=0,l=o.length;s<l;s+=3){var u=o[s+0],f=o[s+1],d=o[s+2];n.push(u,f,f,d,d,u)}}else{var h=r.array;a=r.version;for(var p=0,v=h.length/3-1;p<v;p+=3){var m=p+0,g=p+1,_=p+2;n.push(m,g,g,_,_,m)}}var y=new(N(n)?hl:fl)(n,1);y.version=a;var x=c.get(t);x&&e.remove(x),c.set(t,y)}function l(t){var e=c.get(t);if(e){var n=t.index;null!==n&&e.version<n.version&&s(t)}else s(t);return c.get(t)}var u={},c=new I.default;return{get:a,update:o,getWireframeAttribute:l}}function St(t,e,n,i){function r(t){u=t}function a(t){c=t.type,f=t.bytesPerElement}function o(e,i){t.drawElements(u,i,c,e*f),n.update(i,u,1)}function s(i,r,a){if(0!==a){var o=void 0,s=void 0;if(l)o=t,s="drawElementsInstanced";else if(o=e.get("ANGLE_instanced_arrays"),s="drawElementsInstancedANGLE",null===o)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");o[s](u,r,c,i*f,a),n.update(r,u,a)}}var l=i.isWebGL2,u=void 0,c=void 0,f=void 0;this.setMode=r,this.setIndex=a,this.render=o,this.renderInstances=s}function wt(t){function e(e,n,i){switch(r.calls++,n){case t.TRIANGLES:r.triangles+=i*(e/3);break;case t.LINES:r.lines+=i*(e/2);break;case t.LINE_STRIP:r.lines+=i*(e-1);break;case t.LINE_LOOP:r.lines+=i*e;break;case t.POINTS:r.points+=i*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}function n(){r.frame++,r.calls=0,r.triangles=0,r.points=0,r.lines=0}var i={geometries:0,textures:0},r={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:i,render:r,programs:null,autoReset:!0,reset:n,update:e}}function Et(t,e){return t[0]-e[0]}function At(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Tt(t,e){var n=1,i=e.isInterleavedBufferAttribute?e.data.array:e.array;i instanceof Int8Array?n=127:i instanceof Int16Array?n=32767:i instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",i),t.divideScalar(n)}function Mt(t,e,n){function i(i,u,c,f){var d=i.morphTargetInfluences;if(!0===e.isWebGL2){var h=u.morphAttributes.position.length,p=o.get(u);if(void 0===p||p.count!==h){var v=function t(){E.dispose(),o.delete(u),u.removeEventListener("dispose",t)};void 0!==p&&p.texture.dispose();var m=void 0!==u.morphAttributes.normal,g=u.morphAttributes.position,_=u.morphAttributes.normal||[],y=u.attributes.position.count,x=!0===m?2:1,b=y*x,S=1;b>e.maxTextureSize&&(S=Math.ceil(b/e.maxTextureSize),b=e.maxTextureSize);var w=new Float32Array(b*S*4*h),E=new Lu(w,b,S,h);E.format=ba,E.type=pa,E.needsUpdate=!0;for(var A=4*x,M=0;M<h;M++)for(var I=g[M],P=_[M],k=b*S*4*M,L=0;L<I.count;L++){s.fromBufferAttribute(I,L),!0===I.normalized&&Tt(s,I);var C=L*A;w[k+C+0]=s.x,w[k+C+1]=s.y,w[k+C+2]=s.z,w[k+C+3]=0,!0===m&&(s.fromBufferAttribute(P,L),!0===P.normalized&&Tt(s,P),w[k+C+4]=s.x,w[k+C+5]=s.y,w[k+C+6]=s.z,w[k+C+7]=0)}p={count:h,texture:E,size:new To(b,S)},o.set(u,p),u.addEventListener("dispose",v)}for(var R=0,D=0;D<d.length;D++)R+=d[D];var N=u.morphTargetsRelative?1:1-R;f.getUniforms().setValue(t,"morphTargetBaseInfluence",N),f.getUniforms().setValue(t,"morphTargetInfluences",d),f.getUniforms().setValue(t,"morphTargetsTexture",p.texture,n),f.getUniforms().setValue(t,"morphTargetsTextureSize",p.size)}else{var B=void 0===d?0:d.length,O=r[u.id];if(void 0===O||O.length!==B){O=[];for(var F=0;F<B;F++)O[F]=[F,0];r[u.id]=O}for(var z=0;z<B;z++){var V=O[z];V[0]=z,V[1]=d[z]}O.sort(At);for(var U=0;U<8;U++)U<B&&O[U][1]?(l[U][0]=O[U][0],l[U][1]=O[U][1]):(l[U][0]=T.default,l[U][1]=0);l.sort(Et);for(var G=u.morphAttributes.position,H=u.morphAttributes.normal,Y=0,j=0;j<8;j++){var W=l[j],X=W[0],Z=W[1];X!==T.default&&Z?(G&&u.getAttribute("morphTarget"+j)!==G[X]&&u.setAttribute("morphTarget"+j,G[X]),H&&u.getAttribute("morphNormal"+j)!==H[X]&&u.setAttribute("morphNormal"+j,H[X]),a[j]=Z,Y+=Z):(G&&!0===u.hasAttribute("morphTarget"+j)&&u.deleteAttribute("morphTarget"+j),H&&!0===u.hasAttribute("morphNormal"+j)&&u.deleteAttribute("morphNormal"+j),a[j]=0)}var q=u.morphTargetsRelative?1:1-Y;f.getUniforms().setValue(t,"morphTargetBaseInfluence",q),f.getUniforms().setValue(t,"morphTargetInfluences",a)}}for(var r={},a=new Float32Array(8),o=new I.default,s=new Go,l=[],u=0;u<8;u++)l[u]=[u,0];return{update:i}}function It(t,e,n,i){function r(r){var a=i.render.frame,l=r.geometry,u=e.get(r,l);return s.get(u)!==a&&(e.update(u),s.set(u,a)),r.isInstancedMesh&&(!1===r.hasEventListener("dispose",o)&&r.addEventListener("dispose",o),n.update(r.instanceMatrix,t.ARRAY_BUFFER),null!==r.instanceColor&&n.update(r.instanceColor,t.ARRAY_BUFFER)),u}function a(){s=new I.default}function o(t){var e=t.target;e.removeEventListener("dispose",o),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}var s=new I.default;return{update:r,dispose:a}}function Pt(t,e,n){var i=t[0];if(i<=0||i>0)return t;var r=e*n,a=Ou[r];if(void 0===a&&(a=new Float32Array(r),Ou[r]=a),0!==e){i.toArray(a,0);for(var o=1,s=0;o!==e;++o)s+=n,t[o].toArray(a,s)}return a}function kt(t,e){if(t.length!==e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Lt(t,e){for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}function Ct(t,e){var n=Fu[e];void 0===n&&(n=new Int32Array(e),Fu[e]=n);for(var i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function Rt(t,e){var n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Dt(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(kt(n,e))return;t.uniform2fv(this.addr,e),Lt(n,e)}}function Nt(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(kt(n,e))return;t.uniform3fv(this.addr,e),Lt(n,e)}}function Bt(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(kt(n,e))return;t.uniform4fv(this.addr,e),Lt(n,e)}}function Ot(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(kt(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Lt(n,e)}else{if(kt(n,i))return;Uu.set(i),t.uniformMatrix2fv(this.addr,!1,Uu),Lt(n,i)}}function Ft(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(kt(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Lt(n,e)}else{if(kt(n,i))return;Vu.set(i),t.uniformMatrix3fv(this.addr,!1,Vu),Lt(n,i)}}function zt(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(kt(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Lt(n,e)}else{if(kt(n,i))return;zu.set(i),t.uniformMatrix4fv(this.addr,!1,zu),Lt(n,i)}}function Vt(t,e){var n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Ut(t,e){var n=this.cache;kt(n,e)||(t.uniform2iv(this.addr,e),Lt(n,e))}function Gt(t,e){var n=this.cache;kt(n,e)||(t.uniform3iv(this.addr,e),Lt(n,e))}function Ht(t,e){var n=this.cache;kt(n,e)||(t.uniform4iv(this.addr,e),Lt(n,e))}function Yt(t,e){var n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function jt(t,e){var n=this.cache;kt(n,e)||(t.uniform2uiv(this.addr,e),Lt(n,e))}function Wt(t,e){var n=this.cache;kt(n,e)||(t.uniform3uiv(this.addr,e),Lt(n,e))}function Xt(t,e){var n=this.cache;kt(n,e)||(t.uniform4uiv(this.addr,e),Lt(n,e))}function Zt(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(e||Ru,r)}function qt(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||Nu,r)}function Qt(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(e||Bu,r)}function Jt(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||Du,r)}function Kt(t){switch(t){case 5126:return Rt;case 35664:return Dt;case 35665:return Nt;case 35666:return Bt;case 35674:return Ot;case 35675:return Ft;case 35676:return zt;case 5124:case 35670:return Vt;case 35667:case 35671:return Ut;case 35668:case 35672:return Gt;case 35669:case 35673:return Ht;case 5125:return Yt;case 36294:return jt;case 36295:return Wt;case 36296:return Xt;case 35678:case 36198:case 36298:case 36306:case 35682:return Zt;case 35679:case 36299:case 36307:return qt;case 35680:case 36300:case 36308:case 36293:return Qt;case 36289:case 36303:case 36311:case 36292:return Jt}}function $t(t,e){t.uniform1fv(this.addr,e)}function te(t,e){var n=Pt(e,this.size,2);t.uniform2fv(this.addr,n)}function ee(t,e){var n=Pt(e,this.size,3);t.uniform3fv(this.addr,n)}function ne(t,e){var n=Pt(e,this.size,4);t.uniform4fv(this.addr,n)}function ie(t,e){var n=Pt(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function re(t,e){var n=Pt(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function ae(t,e){var n=Pt(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function oe(t,e){t.uniform1iv(this.addr,e)}function se(t,e){t.uniform2iv(this.addr,e)}function le(t,e){t.uniform3iv(this.addr,e)}function ue(t,e){t.uniform4iv(this.addr,e)}function ce(t,e){t.uniform1uiv(this.addr,e)}function fe(t,e){t.uniform2uiv(this.addr,e)}function de(t,e){t.uniform3uiv(this.addr,e)}function he(t,e){t.uniform4uiv(this.addr,e)}function pe(t,e,n){var i=e.length,r=Ct(n,i);t.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.safeSetTexture2D(e[a]||Ru,r[a])}function ve(t,e,n){var i=e.length,r=Ct(n,i);t.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.setTexture3D(e[a]||Nu,r[a])}function me(t,e,n){var i=e.length,r=Ct(n,i);t.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.safeSetTextureCube(e[a]||Bu,r[a])}function ge(t,e,n){var i=e.length,r=Ct(n,i);t.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.setTexture2DArray(e[a]||Du,r[a])}function _e(t){switch(t){case 5126:return $t;case 35664:return te;case 35665:return ee;case 35666:return ne;case 35674:return ie;case 35675:return re;case 35676:return ae;case 5124:case 35670:return oe;case 35667:case 35671:return se;case 35668:case 35672:return le;case 35669:case 35673:return ue;case 5125:return ce;case 36294:return fe;case 36295:return de;case 36296:return he;case 35678:case 36198:case 36298:case 36306:case 35682:return pe;case 35679:case 36299:case 36307:return ve;case 35680:case 36300:case 36308:case 36293:return me;case 36289:case 36303:case 36311:case 36292:return ge}}function ye(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=Kt(e.type)}function xe(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=_e(e.type)}function be(t){this.id=t,this.seq=[],this.map={}}function Se(t,e){t.seq.push(e),t.map[e.id]=e}function we(t,e,n){var i=t.name,r=i.length;for(Gu.lastIndex=0;;){var a=Gu.exec(i),o=Gu.lastIndex,s=a[1],l="]"===a[2],u=a[3];if(l&&(s|=0),void 0===u||"["===u&&o+2===r){Se(n,void 0===u?new ye(s,t,e):new xe(s,t,e));break}var c=n.map,f=c[s];void 0===f&&(f=new be(s),Se(n,f)),n=f}}function Ee(t,e){this.seq=[],this.map={};for(var n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),i=0;i<n;++i){var r=t.getActiveUniform(e,i);we(r,t.getUniformLocation(e,r.name),this)}}function Ae(t,e,n){var i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}function Te(t){for(var e=t.split("\n"),n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}function Me(t){switch(t){case oo:return["Linear","( value )"];case so:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function Ie(t,e,n){var i=t.getShaderParameter(e,t.COMPILE_STATUS),r=t.getShaderInfoLog(e).trim();return i&&""===r?"":n.toUpperCase()+"\n\n"+r+"\n\n"+Te(t.getShaderSource(e))}function Pe(t,e){var n=Me(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function ke(t,e){var n=void 0;switch(e){case Gr:n="Linear";break;case Hr:n="Reinhard";break;case Yr:n="OptimizedCineon";break;case jr:n="ACESFilmic";break;case Wr:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Le(t){return[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(De).join("\n")}function Ce(t){var e=[];for(var n in t){var i=t[n];!1!==i&&e.push("#define "+n+" "+i)}return e.join("\n")}function Re(t,e){for(var n={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),r=0;r<i;r++){var a=t.getActiveAttrib(e,r),o=a.name,s=1;a.type===t.FLOAT_MAT2&&(s=2),a.type===t.FLOAT_MAT3&&(s=3),a.type===t.FLOAT_MAT4&&(s=4),n[o]={type:a.type,location:t.getAttribLocation(e,o),locationSize:s}}return n}function De(t){return""!==t}function Ne(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Be(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}function Oe(t){return t.replace(Yu,Fe)}function Fe(t,e){var n=uu[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return Oe(n)}function ze(t){return t.replace(Wu,Ue).replace(ju,Ve)}function Ve(t,e,n,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Ue(t,e,n,i)}function Ue(t,e,n,i){for(var r="",a=parseInt(e);a<parseInt(n);a++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function Ge(t){var e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function He(t){var e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===nr?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===ir?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===rr&&(e="SHADOWMAP_TYPE_VSM"),e}function Ye(t){var e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Xr:case Zr:e="ENVMAP_TYPE_CUBE";break;case Jr:case Kr:e="ENVMAP_TYPE_CUBE_UV"}return e}function je(t){var e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case Zr:case Kr:e="ENVMAP_MODE_REFRACTION"}return e}function We(t){var e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case Fr:e="ENVMAP_BLENDING_MULTIPLY";break;case zr:e="ENVMAP_BLENDING_MIX";break;case Vr:e="ENVMAP_BLENDING_ADD"}return e}function Xe(t,e,n,i){var r=t.getContext(),a=n.defines,o=n.vertexShader,s=n.fragmentShader,l=He(n),u=Ye(n),c=je(n),f=We(n),d=n.isWebGL2?"":Le(n),h=Ce(a),p=r.createProgram(),v=void 0,m=void 0,g=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(v=[h].filter(De).join("\n"),v.length>0&&(v+="\n"),m=[d,h].filter(De).join("\n"),m.length>0&&(m+="\n")):(v=[Ge(n),"#define SHADER_NAME "+n.shaderName,h,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(De).join("\n"),m=[d,Ge(n),"#define SHADER_NAME "+n.shaderName,h,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+c:"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Ur?"#define TONE_MAPPING":"",n.toneMapping!==Ur?uu.tonemapping_pars_fragment:"",n.toneMapping!==Ur?ke("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.transparent?"":"#define OPAQUE",uu.encodings_pars_fragment,Pe("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(De).join("\n")),o=Oe(o),o=Ne(o,n),o=Be(o,n),s=Oe(s),s=Ne(s,n),s=Be(s,n),o=ze(o),s=ze(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(g="#version 300 es\n",v=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+v,m=["#define varying in",n.glslVersion===go?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===go?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+m);var _=g+v+o,y=g+m+s,x=Ae(r,r.VERTEX_SHADER,_),b=Ae(r,r.FRAGMENT_SHADER,y);if(r.attachShader(p,x),r.attachShader(p,b),void 0!==n.index0AttributeName?r.bindAttribLocation(p,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(p,0,"position"),r.linkProgram(p),t.debug.checkShaderErrors){var S=r.getProgramInfoLog(p).trim(),w=r.getShaderInfoLog(x).trim(),E=r.getShaderInfoLog(b).trim(),A=!0,T=!0;if(!1===r.getProgramParameter(p,r.LINK_STATUS)){A=!1;var M=Ie(r,x,"vertex"),I=Ie(r,b,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(p,r.VALIDATE_STATUS)+"\n\nProgram Info Log: "+S+"\n"+M+"\n"+I)}else""!==S?console.warn("THREE.WebGLProgram: Program Info Log:",S):""!==w&&""!==E||(T=!1);T&&(this.diagnostics={runnable:A,programLog:S,vertexShader:{log:w,prefix:v},fragmentShader:{log:E,prefix:m}})}r.deleteShader(x),r.deleteShader(b);var P=void 0;this.getUniforms=function(){return void 0===P&&(P=new Ee(r,p)),P};var k=void 0;return this.getAttributes=function(){return void 0===k&&(k=Re(r,p)),k},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(p),this.program=void 0},this.name=n.shaderName,this.id=Hu++,this.cacheKey=e,this.usedTimes=1,this.program=p,this.vertexShader=x,this.fragmentShader=b,this}function Ze(t,e,n,i,r,a,o){function s(t){var e=t.skeleton,n=e.bones;if(S)return 1024;var i=w,r=Math.floor((i-20)/4),a=Math.min(r,n.length);return a<n.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+n.length+" bones. This GPU supports "+a+"."),0):a}function l(a,l,u,c,f){var d=c.fog,h=a.isMeshStandardMaterial?c.environment:null,p=(a.isMeshStandardMaterial?n:e).get(a.envMap||h),v=T[a.type],m=f.isSkinnedMesh?s(f):0;null!==a.precision&&(A=r.getMaxPrecision(a.precision))!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",A,"instead.");var g=void 0,y=void 0,w=void 0,M=void 0;if(v){var I=fu[v];g=I.vertexShader,y=I.fragmentShader}else g=a.vertexShader,y=a.fragmentShader,_.update(a),w=_.getVertexShaderID(a),M=_.getFragmentShaderID(a);var P=t.getRenderTarget(),k=a.alphaTest>0,L=a.clearcoat>0;return{isWebGL2:x,shaderID:v,shaderName:a.type,vertexShader:g,fragmentShader:y,defines:a.defines,customVertexShaderID:w,customFragmentShaderID:M,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:A,instancing:!0===f.isInstancedMesh,instancingColor:!0===f.isInstancedMesh&&null!==f.instanceColor,supportsVertexTextures:E,outputEncoding:null===P?t.outputEncoding:!0===P.isXRRenderTarget?P.texture.encoding:oo,map:!!a.map,matcap:!!a.matcap,envMap:!!p,envMapMode:p&&p.mapping,envMapCubeUV:!!p&&(p.mapping===Jr||p.mapping===Kr),lightMap:!!a.lightMap,aoMap:!!a.aoMap,emissiveMap:!!a.emissiveMap,bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,objectSpaceNormalMap:a.normalMapType===fo,tangentSpaceNormalMap:a.normalMapType===co,decodeVideoTexture:!!a.map&&!0===a.map.isVideoTexture&&a.map.encoding===so,clearcoat:L,clearcoatMap:L&&!!a.clearcoatMap,clearcoatRoughnessMap:L&&!!a.clearcoatRoughnessMap,clearcoatNormalMap:L&&!!a.clearcoatNormalMap,displacementMap:!!a.displacementMap,roughnessMap:!!a.roughnessMap,metalnessMap:!!a.metalnessMap,specularMap:!!a.specularMap,specularIntensityMap:!!a.specularIntensityMap,specularColorMap:!!a.specularColorMap,transparent:a.transparent,alphaMap:!!a.alphaMap,alphaTest:k,gradientMap:!!a.gradientMap,sheen:a.sheen>0,sheenColorMap:!!a.sheenColorMap,sheenRoughnessMap:!!a.sheenRoughnessMap,transmission:a.transmission>0,transmissionMap:!!a.transmissionMap,thicknessMap:!!a.thicknessMap,combine:a.combine,vertexTangents:!!a.normalMap&&!!f.geometry&&!!f.geometry.attributes.tangent,vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!f.geometry&&!!f.geometry.attributes.color&&4===f.geometry.attributes.color.itemSize,vertexUvs:!!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatMap||a.clearcoatRoughnessMap||a.clearcoatNormalMap||a.displacementMap||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||a.sheenColorMap||a.sheenRoughnessMap),uvsVertexOnly:!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatNormalMap||a.transmission>0||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||a.sheen>0||a.sheenColorMap||a.sheenRoughnessMap||!a.displacementMap),fog:!!d,useFog:a.fog,fogExp2:d&&d.isFogExp2,flatShading:!!a.flatShading,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:b,skinning:!0===f.isSkinnedMesh&&m>0,maxBones:m,useVertexTexture:S,morphTargets:!!f.geometry&&!!f.geometry.morphAttributes.position,morphNormals:!!f.geometry&&!!f.geometry.morphAttributes.normal,morphTargetsCount:f.geometry&&f.geometry.morphAttributes.position?f.geometry.morphAttributes.position.length:0,numDirLights:l.directional.length,numPointLights:l.point.length,numSpotLights:l.spot.length,numRectAreaLights:l.rectArea.length,numHemiLights:l.hemi.length,numDirLightShadows:l.directionalShadowMap.length,numPointLightShadows:l.pointShadowMap.length,numSpotLightShadows:l.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:a.dithering,shadowMapEnabled:t.shadowMap.enabled&&u.length>0,shadowMapType:t.shadowMap.type,toneMapping:a.toneMapped?t.toneMapping:Ur,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:a.premultipliedAlpha,doubleSided:a.side===sr,flipSided:a.side===or,depthPacking:void 0!==a.depthPacking&&a.depthPacking,index0AttributeName:a.index0AttributeName,extensionDerivatives:a.extensions&&a.extensions.derivatives,extensionFragDepth:a.extensions&&a.extensions.fragDepth,extensionDrawBuffers:a.extensions&&a.extensions.drawBuffers,extensionShaderTextureLOD:a.extensions&&a.extensions.shaderTextureLOD,rendererExtensionFragDepth:x||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:x||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:x||i.has("EXT_shader_texture_lod"),customProgramCacheKey:a.customProgramCacheKey()}}function u(e){var n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.customVertexShaderID),n.push(e.customFragmentShaderID)),void 0!==e.defines)for(var i in e.defines)n.push(i),n.push(e.defines[i]);return!1===e.isRawShaderMaterial&&(c(n,e),f(n,e),n.push(t.outputEncoding)),n.push(e.customProgramCacheKey),n.join()}function c(t,e){t.push(e.precision),t.push(e.outputEncoding),t.push(e.envMapMode),t.push(e.combine),t.push(e.vertexUvs),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.maxBones),t.push(e.morphTargetsCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection)}function f(t,e){g.disableAll(),e.isWebGL2&&g.enable(0),e.supportsVertexTextures&&g.enable(1),e.instancing&&g.enable(2),e.instancingColor&&g.enable(3),e.map&&g.enable(4),e.matcap&&g.enable(5),e.envMap&&g.enable(6),e.envMapCubeUV&&g.enable(7),e.lightMap&&g.enable(8),e.aoMap&&g.enable(9),e.emissiveMap&&g.enable(10),e.bumpMap&&g.enable(11),e.normalMap&&g.enable(12),e.objectSpaceNormalMap&&g.enable(13),e.tangentSpaceNormalMap&&g.enable(14),e.clearcoat&&g.enable(15),e.clearcoatMap&&g.enable(16),e.clearcoatRoughnessMap&&g.enable(17),e.clearcoatNormalMap&&g.enable(18),e.displacementMap&&g.enable(19),e.specularMap&&g.enable(20),e.roughnessMap&&g.enable(21),e.metalnessMap&&g.enable(22),e.gradientMap&&g.enable(23),e.alphaMap&&g.enable(24),e.alphaTest&&g.enable(25),e.vertexColors&&g.enable(26),e.vertexAlphas&&g.enable(27),e.vertexUvs&&g.enable(28),e.vertexTangents&&g.enable(29),e.uvsVertexOnly&&g.enable(30),e.fog&&g.enable(31),t.push(g.mask),g.disableAll(),e.useFog&&g.enable(0),e.flatShading&&g.enable(1),e.logarithmicDepthBuffer&&g.enable(2),e.skinning&&g.enable(3),e.useVertexTexture&&g.enable(4),e.morphTargets&&g.enable(5),e.morphNormals&&g.enable(6),e.premultipliedAlpha&&g.enable(7),e.shadowMapEnabled&&g.enable(8),e.physicallyCorrectLights&&g.enable(9),e.doubleSided&&g.enable(10),e.flipSided&&g.enable(11),e.depthPacking&&g.enable(12),e.dithering&&g.enable(13),e.specularIntensityMap&&g.enable(14),e.specularColorMap&&g.enable(15),e.transmission&&g.enable(16),e.transmissionMap&&g.enable(17),e.thicknessMap&&g.enable(18),e.sheen&&g.enable(19),e.sheenColorMap&&g.enable(20),e.sheenRoughnessMap&&g.enable(21),e.decodeVideoTexture&&g.enable(22),e.transparent&&g.enable(23),t.push(g.mask)}function d(t){var e=T[t.type],n=void 0;if(e){var i=fu[e];n=Yl.clone(i.uniforms)}else n=t.uniforms;return n}function h(e,n){for(var i=void 0,r=0,o=y.length;r<o;r++){var s=y[r];if(s.cacheKey===n){i=s,++i.usedTimes;break}}return void 0===i&&(i=new Xe(t,n,e,a),y.push(i)),i}function p(t){if(0==--t.usedTimes){var e=y.indexOf(t);y[e]=y[y.length-1],y.pop(),t.destroy()}}function v(t){_.remove(t)}function m(){_.dispose()}var g=new Ps,_=new Zu,y=[],x=r.isWebGL2,b=r.logarithmicDepthBuffer,S=r.floatVertexTextures,w=r.maxVertexUniforms,E=r.vertexTextures,A=r.precision,T={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:l,getProgramCacheKey:u,getUniforms:d,acquireProgram:h,releaseProgram:p,releaseShaderCache:v,programs:y,dispose:m}}function qe(){function t(t){var e=r.get(t);return void 0===e&&(e={},r.set(t,e)),e}function e(t){r.delete(t)}function n(t,e,n){r.get(t)[e]=n}function i(){r=new I.default}var r=new I.default;return{get:t,remove:e,update:n,dispose:i}}function Qe(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Je(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Ke(){function t(){s=0,l.length=0,u.length=0,c.length=0}function e(t,e,n,i,r,a){var l=o[s];return void 0===l?(l={id:t.id,object:t,geometry:e,material:n,groupOrder:i,renderOrder:t.renderOrder,z:r,group:a},o[s]=l):(l.id=t.id,l.object=t,l.geometry=e,l.material=n,l.groupOrder=i,l.renderOrder=t.renderOrder,l.z=r,l.group=a),s++,l}function n(t,n,i,r,a,o){var s=e(t,n,i,r,a,o);i.transmission>0?u.push(s):!0===i.transparent?c.push(s):l.push(s)}function i(t,n,i,r,a,o){var s=e(t,n,i,r,a,o);i.transmission>0?u.unshift(s):!0===i.transparent?c.unshift(s):l.unshift(s)}function r(t,e){l.length>1&&l.sort(t||Qe),u.length>1&&u.sort(e||Je),c.length>1&&c.sort(e||Je)}function a(){for(var t=s,e=o.length;t<e;t++){var n=o[t];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.group=null}}var o=[],s=0,l=[],u=[],c=[];return{opaque:l,transmissive:u,transparent:c,init:t,push:n,unshift:i,finish:a,sort:r}}function $e(){function t(t,e){var i=void 0;return!1===n.has(t)?(i=new Ke,n.set(t,[i])):e>=n.get(t).length?(i=new Ke,n.get(t).push(i)):i=n.get(t)[e],i}function e(){n=new I.default}var n=new I.default;return{get:t,dispose:e}}function tn(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n=void 0;switch(e.type){case"DirectionalLight":n={direction:new Go,color:new Co};break;case"SpotLight":n={position:new Go,direction:new Go,color:new Co,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Go,color:new Co,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Go,skyColor:new Co,groundColor:new Co};break;case"RectAreaLight":n={color:new Co,position:new Go,halfWidth:new Go,halfHeight:new Go}}return t[e.id]=n,n}}}function en(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n=void 0;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new To};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new To,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}}function nn(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function rn(t,e){function n(n,i){for(var s=0,l=0,u=0,c=0;c<9;c++)o.probe[c].set(0,0,0);var f=0,d=0,h=0,p=0,v=0,m=0,g=0,_=0;n.sort(nn);for(var y=!0!==i?Math.PI:1,x=0,b=n.length;x<b;x++){var S=n[x],w=S.color,E=S.intensity,A=S.distance,T=S.shadow&&S.shadow.map?S.shadow.map.texture:null;if(S.isAmbientLight)s+=w.r*E*y,l+=w.g*E*y,u+=w.b*E*y;else if(S.isLightProbe)for(var M=0;M<9;M++)o.probe[M].addScaledVector(S.sh.coefficients[M],E);else if(S.isDirectionalLight){var I=r.get(S);if(I.color.copy(S.color).multiplyScalar(S.intensity*y),S.castShadow){var P=S.shadow,k=a.get(S);k.shadowBias=P.bias,k.shadowNormalBias=P.normalBias,k.shadowRadius=P.radius,k.shadowMapSize=P.mapSize,o.directionalShadow[f]=k,o.directionalShadowMap[f]=T,o.directionalShadowMatrix[f]=S.shadow.matrix,m++}o.directional[f]=I,f++}else if(S.isSpotLight){var L=r.get(S);if(L.position.setFromMatrixPosition(S.matrixWorld),L.color.copy(w).multiplyScalar(E*y),L.distance=A,L.coneCos=Math.cos(S.angle),L.penumbraCos=Math.cos(S.angle*(1-S.penumbra)),L.decay=S.decay,S.castShadow){var C=S.shadow,R=a.get(S);R.shadowBias=C.bias,R.shadowNormalBias=C.normalBias,R.shadowRadius=C.radius,R.shadowMapSize=C.mapSize,o.spotShadow[h]=R,o.spotShadowMap[h]=T,o.spotShadowMatrix[h]=S.shadow.matrix,_++}o.spot[h]=L,h++}else if(S.isRectAreaLight){var D=r.get(S);D.color.copy(w).multiplyScalar(E),D.halfWidth.set(.5*S.width,0,0),D.halfHeight.set(0,.5*S.height,0),o.rectArea[p]=D,p++}else if(S.isPointLight){var N=r.get(S);if(N.color.copy(S.color).multiplyScalar(S.intensity*y),N.distance=S.distance,N.decay=S.decay,S.castShadow){var B=S.shadow,O=a.get(S);O.shadowBias=B.bias,O.shadowNormalBias=B.normalBias,O.shadowRadius=B.radius,O.shadowMapSize=B.mapSize,O.shadowCameraNear=B.camera.near,O.shadowCameraFar=B.camera.far,o.pointShadow[d]=O,o.pointShadowMap[d]=T,o.pointShadowMatrix[d]=S.shadow.matrix,g++}o.point[d]=N,d++}else if(S.isHemisphereLight){var F=r.get(S);F.skyColor.copy(S.color).multiplyScalar(E*y),F.groundColor.copy(S.groundColor).multiplyScalar(E*y),o.hemi[v]=F,v++}}p>0&&(e.isWebGL2?(o.rectAreaLTC1=cu.LTC_FLOAT_1,o.rectAreaLTC2=cu.LTC_FLOAT_2):!0===t.has("OES_texture_float_linear")?(o.rectAreaLTC1=cu.LTC_FLOAT_1,o.rectAreaLTC2=cu.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(o.rectAreaLTC1=cu.LTC_HALF_1,o.rectAreaLTC2=cu.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),o.ambient[0]=s,o.ambient[1]=l,o.ambient[2]=u;var z=o.hash;z.directionalLength===f&&z.pointLength===d&&z.spotLength===h&&z.rectAreaLength===p&&z.hemiLength===v&&z.numDirectionalShadows===m&&z.numPointShadows===g&&z.numSpotShadows===_||(o.directional.length=f,o.spot.length=h,o.rectArea.length=p,o.point.length=d,o.hemi.length=v,o.directionalShadow.length=m,o.directionalShadowMap.length=m,o.pointShadow.length=g,o.pointShadowMap.length=g,o.spotShadow.length=_,o.spotShadowMap.length=_,o.directionalShadowMatrix.length=m,o.pointShadowMatrix.length=g,o.spotShadowMatrix.length=_,z.directionalLength=f,z.pointLength=d,z.spotLength=h,z.rectAreaLength=p,z.hemiLength=v,z.numDirectionalShadows=m,z.numPointShadows=g,z.numSpotShadows=_,o.version=Qu++)}function i(t,e){for(var n=0,i=0,r=0,a=0,s=0,f=e.matrixWorldInverse,d=0,h=t.length;d<h;d++){var p=t[d];if(p.isDirectionalLight){var v=o.directional[n];v.direction.setFromMatrixPosition(p.matrixWorld),l.setFromMatrixPosition(p.target.matrixWorld),v.direction.sub(l),v.direction.transformDirection(f),n++}else if(p.isSpotLight){var m=o.spot[r];m.position.setFromMatrixPosition(p.matrixWorld),m.position.applyMatrix4(f),m.direction.setFromMatrixPosition(p.matrixWorld),l.setFromMatrixPosition(p.target.matrixWorld),m.direction.sub(l),m.direction.transformDirection(f),r++}else if(p.isRectAreaLight){var g=o.rectArea[a];g.position.setFromMatrixPosition(p.matrixWorld),g.position.applyMatrix4(f),c.identity(),u.copy(p.matrixWorld),u.premultiply(f),c.extractRotation(u),g.halfWidth.set(.5*p.width,0,0),g.halfHeight.set(0,.5*p.height,0),g.halfWidth.applyMatrix4(c),g.halfHeight.applyMatrix4(c),a++}else if(p.isPointLight){var _=o.point[i];_.position.setFromMatrixPosition(p.matrixWorld),_.position.applyMatrix4(f),i++}else if(p.isHemisphereLight){var y=o.hemi[s];y.direction.setFromMatrixPosition(p.matrixWorld),y.direction.transformDirection(f),y.direction.normalize(),s++}}}for(var r=new tn,a=en(),o={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},s=0;s<9;s++)o.probe.push(new Go);var l=new Go,u=new _s,c=new _s;return{setup:n,setupView:i,state:o}}function an(t,e){function n(){l.length=0,u.length=0}function i(t){l.push(t)}function r(t){u.push(t)}function a(t){s.setup(l,t)}function o(t){s.setupView(l,t)}var s=new rn(t,e),l=[],u=[];return{init:n,state:{lightsArray:l,shadowsArray:u,lights:s},setupLights:a,setupLightsView:o,pushLight:i,pushShadow:r}}function on(t,e){function n(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=void 0;return!1===r.has(n)?(a=new an(t,e),r.set(n,[a])):i>=r.get(n).length?(a=new an(t,e),r.get(n).push(a)):a=r.get(n)[i],a}function i(){r=new I.default}var r=new I.default;return{get:n,dispose:i}}function sn(t,e,n){function i(n,i){var r=e.update(_);v.defines.VSM_SAMPLES!==n.blurSamples&&(v.defines.VSM_SAMPLES=n.blurSamples,m.defines.VSM_SAMPLES=n.blurSamples,v.needsUpdate=!0,m.needsUpdate=!0),v.uniforms.shadow_pass.value=n.map.texture,v.uniforms.resolution.value=n.mapSize,v.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(i,null,r,v,_,null),m.uniforms.shadow_pass.value=n.mapPass.texture,m.uniforms.resolution.value=n.mapSize,m.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(i,null,r,m,_,null)}function r(e,n,i,r,a,o,s){var l=null,u=!0===r.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(l=void 0!==u?u:!0===r.isPointLight?f:c,t.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length||i.displacementMap&&0!==i.displacementScale||i.alphaMap&&i.alphaTest>0){var h=l.uuid,v=i.uuid,m=d[h];void 0===m&&(m={},d[h]=m);var g=m[v];void 0===g&&(g=l.clone(),m[v]=g),l=g}return l.visible=i.visible,l.wireframe=i.wireframe,l.side=s===rr?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:p[i.side],l.alphaMap=i.alphaMap,l.alphaTest=i.alphaTest,l.clipShadows=i.clipShadows,l.clippingPlanes=i.clippingPlanes,l.clipIntersection=i.clipIntersection,l.displacementMap=i.displacementMap,l.displacementScale=i.displacementScale,l.displacementBias=i.displacementBias,l.wireframeLinewidth=i.wireframeLinewidth,l.linewidth=i.linewidth,!0===r.isPointLight&&!0===l.isMeshDistanceMaterial&&(l.referencePosition.setFromMatrixPosition(r.matrixWorld),l.nearDistance=a,l.farDistance=o),l}function a(n,i,s,l,u){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&u===rr)&&(!n.frustumCulled||o.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,n.matrixWorld);var c=e.update(n),f=n.material;if(Array.isArray(f))for(var d=c.groups,h=0,p=d.length;h<p;h++){var v=d[h],m=f[v.materialIndex];if(m&&m.visible){var g=r(n,c,m,l,s.near,s.far,u);t.renderBufferDirect(s,null,c,g,n,v)}}else if(f.visible){var _=r(n,c,f,l,s.near,s.far,u);t.renderBufferDirect(s,null,c,_,n,null)}}for(var y=n.children,x=0,b=y.length;x<b;x++)a(y[x],i,s,l,u)}}var o=new su,s=new To,l=new To,u=new Oo,c=new Ju({depthPacking:uo}),f=new Ku,d={},h=n.maxTextureSize,p={0:or,1:ar,2:sr},v=new Xl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new To},radius:{value:4}},vertexShader:$u,fragmentShader:tc}),m=v.clone();m.defines.HORIZONTAL_PASS=1;var g=new El;g.setAttribute("position",new ol(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var _=new Gl(g,v),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=nr,this.render=function(e,n,r){if(!1!==y.enabled&&(!1!==y.autoUpdate||!1!==y.needsUpdate)&&0!==e.length){var c=t.getRenderTarget(),f=t.getActiveCubeFace(),d=t.getActiveMipmapLevel(),p=t.state;p.setBlending(lr),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);for(var v=0,m=e.length;v<m;v++){var g=e[v],_=g.shadow;if(void 0!==_){if(!1!==_.autoUpdate||!1!==_.needsUpdate){s.copy(_.mapSize);var x=_.getFrameExtents();if(s.multiply(x),l.copy(_.mapSize),(s.x>h||s.y>h)&&(s.x>h&&(l.x=Math.floor(h/x.x),s.x=l.x*x.x,_.mapSize.x=l.x),s.y>h&&(l.y=Math.floor(h/x.y),s.y=l.y*x.y,_.mapSize.y=l.y)),null===_.map&&!_.isPointLightShadow&&this.type===rr){var b={minFilter:aa,magFilter:aa,format:ba};_.map=new Fo(s.x,s.y,b),_.map.texture.name=g.name+".shadowMap",_.mapPass=new Fo(s.x,s.y,b),_.camera.updateProjectionMatrix()}if(null===_.map){var S={minFilter:na,magFilter:na,format:ba};_.map=new Fo(s.x,s.y,S),_.map.texture.name=g.name+".shadowMap",_.camera.updateProjectionMatrix()}t.setRenderTarget(_.map),t.clear();for(var w=_.getViewportCount(),E=0;E<w;E++){var A=_.getViewport(E);u.set(l.x*A.x,l.y*A.y,l.x*A.z,l.y*A.w),p.viewport(u),_.updateMatrices(g,E),o=_.getFrustum(),a(n,r,_.camera,g,this.type)}_.isPointLightShadow||this.type!==rr||i(_,r),_.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",g,"has no shadow.")}y.needsUpdate=!1,t.setRenderTarget(c,f,d)}}}function ln(t,e,n){function i(){var e=!1,n=new Oo,i=null,r=new Oo(0,0,0,0);return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,a,o,s){!0===s&&(e*=o,i*=o,a*=o),n.set(e,i,a,o),!1===r.equals(n)&&(t.clearColor(e,i,a,o),r.copy(n))},reset:function(){e=!1,i=null,r.set(-1,0,0,0)}}}function r(){var e=!1,n=null,i=null,r=null;return{setTest:function(e){e?s(t.DEPTH_TEST):l(t.DEPTH_TEST)},setMask:function(i){n===i||e||(t.depthMask(i),n=i)},setFunc:function(e){if(i!==e){if(e)switch(e){case kr:t.depthFunc(t.NEVER);break;case Lr:t.depthFunc(t.ALWAYS);break;case Cr:t.depthFunc(t.LESS);break;case Rr:t.depthFunc(t.LEQUAL);break;case Dr:t.depthFunc(t.EQUAL);break;case Nr:t.depthFunc(t.GEQUAL);break;case Br:t.depthFunc(t.GREATER);break;case Or:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}else t.depthFunc(t.LEQUAL);i=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,n=null,i=null,r=null}}}function a(){var e=!1,n=null,i=null,r=null,a=null,o=null,u=null,c=null,f=null;return{setTest:function(n){e||(n?s(t.STENCIL_TEST):l(t.STENCIL_TEST))},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,o){i===e&&r===n&&a===o||(t.stencilFunc(e,n,o),i=e,r=n,a=o)},setOp:function(e,n,i){o===e&&u===n&&c===i||(t.stencilOp(e,n,i),o=e,u=n,c=i)},setLocked:function(t){e=t},setClear:function(e){f!==e&&(t.clearStencil(e),f=e)},reset:function(){e=!1,n=null,i=null,r=null,a=null,o=null,u=null,c=null,f=null}}}function o(e,n,i){var r=new Uint8Array(4),a=t.createTexture();t.bindTexture(e,a),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(var o=0;o<i;o++)t.texImage2D(n+o,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,r);return a}function s(e){!0!==U[e]&&(t.enable(e),U[e]=!0)}function l(e){!1!==U[e]&&(t.disable(e),U[e]=!1)}function u(e,n){return G[e]!==n&&(t.bindFramebuffer(e,n),G[e]=n,O&&(e===t.DRAW_FRAMEBUFFER&&(G[t.FRAMEBUFFER]=n),e===t.FRAMEBUFFER&&(G[t.DRAW_FRAMEBUFFER]=n)),!0)}function c(i,r){var a=Y,o=!1;if(i)if(a=H.get(r),void 0===a&&(a=[],H.set(r,a)),i.isWebGLMultipleRenderTargets){var s=i.texture;if(a.length!==s.length||a[0]!==t.COLOR_ATTACHMENT0){for(var l=0,u=s.length;l<u;l++)a[l]=t.COLOR_ATTACHMENT0+l;a.length=s.length,o=!0}}else a[0]!==t.COLOR_ATTACHMENT0&&(a[0]=t.COLOR_ATTACHMENT0,o=!0);else a[0]!==t.BACK&&(a[0]=t.BACK,o=!0);o&&(n.isWebGL2?t.drawBuffers(a):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(a))}function f(e){return j!==e&&(t.useProgram(e),j=e,!0)}function d(e,n,i,r,a,o,u,c){if(e===lr)return void(!0===W&&(l(t.BLEND),W=!1));if(!1===W&&(s(t.BLEND),W=!0),e===hr)a=a||n,o=o||i,u=u||r,n===Z&&a===J||(t.blendEquationSeparate(gt[n],gt[a]),Z=n,J=a),i===q&&r===Q&&o===K&&u===$||(t.blendFuncSeparate(yt[i],yt[r],yt[o],yt[u]),q=i,Q=r,K=o,$=u),X=e,tt=null;else if(e!==X||c!==tt){if(Z===pr&&J===pr||(t.blendEquation(t.FUNC_ADD),Z=pr,J=pr),c)switch(e){case ur:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case cr:t.blendFunc(t.ONE,t.ONE);break;case fr:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case dr:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case ur:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case cr:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case fr:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case dr:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}q=null,Q=null,K=null,$=null,X=e,tt=c}}function h(e,n){e.side===sr?l(t.CULL_FACE):s(t.CULL_FACE);var i=e.side===or;n&&(i=!i),p(i),e.blending===ur&&!1===e.transparent?d(lr):d(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),z.setFunc(e.depthFunc),z.setTest(e.depthTest),z.setMask(e.depthWrite),F.setMask(e.colorWrite);var r=e.stencilWrite;V.setTest(r),r&&(V.setMask(e.stencilWriteMask),V.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),V.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),g(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?s(t.SAMPLE_ALPHA_TO_COVERAGE):l(t.SAMPLE_ALPHA_TO_COVERAGE)}function p(e){et!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),et=e)}function v(e){e!==$i?(s(t.CULL_FACE),e!==nt&&(e===tr?t.cullFace(t.BACK):e===er?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):l(t.CULL_FACE),nt=e}function m(e){e!==it&&(st&&t.lineWidth(e),it=e)}function g(e,n,i){e?(s(t.POLYGON_OFFSET_FILL),rt===n&&at===i||(t.polygonOffset(n,i),rt=n,at=i)):l(t.POLYGON_OFFSET_FILL)}function y(e){e?s(t.SCISSOR_TEST):l(t.SCISSOR_TEST)}function x(e){void 0===e&&(e=t.TEXTURE0+ot-1),ct!==e&&(t.activeTexture(e),ct=e)}function b(e,n){null===ct&&x();var i=ft[ct];void 0===i&&(i={type:void 0,texture:void 0},ft[ct]=i),i.type===e&&i.texture===n||(t.bindTexture(e,n||mt[e]),i.type=e,i.texture=n)}function S(){var e=ft[ct];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)}function w(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function E(){try{t.texSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function A(){try{t.texSubImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function T(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function M(){try{t.texStorage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function P(){try{t.texStorage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function k(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function L(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function C(e){!1===pt.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),pt.copy(e))}function R(e){!1===vt.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),vt.copy(e))}function D(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),!0===O&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),U={},ct=null,ft={},G={},H=new I.default,Y=[],j=null,W=!1,X=null,Z=null,q=null,Q=null,J=null,K=null,$=null,tt=!1,et=null,nt=null,it=null,rt=null,at=null,pt.set(0,0,t.canvas.width,t.canvas.height),vt.set(0,0,t.canvas.width,t.canvas.height),F.reset(),z.reset(),V.reset()}var N,B,O=n.isWebGL2,F=new i,z=new r,V=new a,U={},G={},H=new I.default,Y=[],j=null,W=!1,X=null,Z=null,q=null,Q=null,J=null,K=null,$=null,tt=!1,et=null,nt=null,it=null,rt=null,at=null,ot=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS),st=!1,lt=0,ut=t.getParameter(t.VERSION);-1!==ut.indexOf("WebGL")?(lt=parseFloat(/^WebGL (\d)/.exec(ut)[1]),st=lt>=1):-1!==ut.indexOf("OpenGL ES")&&(lt=parseFloat(/^OpenGL ES (\d)/.exec(ut)[1]),st=lt>=2);var ct=null,ft={},dt=t.getParameter(t.SCISSOR_BOX),ht=t.getParameter(t.VIEWPORT),pt=(new Oo).fromArray(dt),vt=(new Oo).fromArray(ht),mt={};mt[t.TEXTURE_2D]=o(t.TEXTURE_2D,t.TEXTURE_2D,1),mt[t.TEXTURE_CUBE_MAP]=o(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),F.setClear(0,0,0,1),z.setClear(1),V.setClear(0),s(t.DEPTH_TEST),z.setFunc(Rr),p(!1),v(tr),s(t.CULL_FACE),d(lr);var gt=(N={},(0,_.default)(N,pr,t.FUNC_ADD),(0,_.default)(N,vr,t.FUNC_SUBTRACT),(0,_.default)(N,mr,t.FUNC_REVERSE_SUBTRACT),N);if(O)gt[gr]=t.MIN,gt[_r]=t.MAX;else{var _t=e.get("EXT_blend_minmax");null!==_t&&(gt[gr]=_t.MIN_EXT,gt[_r]=_t.MAX_EXT)}var yt=(B={},(0,_.default)(B,yr,t.ZERO),(0,_.default)(B,xr,t.ONE),(0,_.default)(B,br,t.SRC_COLOR),(0,_.default)(B,wr,t.SRC_ALPHA),(0,_.default)(B,Pr,t.SRC_ALPHA_SATURATE),(0,_.default)(B,Mr,t.DST_COLOR),(0,_.default)(B,Ar,t.DST_ALPHA),(0,_.default)(B,Sr,t.ONE_MINUS_SRC_COLOR),(0,_.default)(B,Er,t.ONE_MINUS_SRC_ALPHA),(0,_.default)(B,Ir,t.ONE_MINUS_DST_COLOR),(0,_.default)(B,Tr,t.ONE_MINUS_DST_ALPHA),B);return{buffers:{color:F,depth:z,stencil:V},enable:s,disable:l,bindFramebuffer:u,drawBuffers:c,useProgram:f,setBlending:d,setMaterial:h,setFlipSided:p,setCullFace:v,setLineWidth:m,setPolygonOffset:g,setScissorTest:y,activeTexture:x,bindTexture:b,unbindTexture:S,compressedTexImage2D:w,texImage2D:k,texImage3D:L,texStorage2D:M,texStorage3D:P,texSubImage2D:E,texSubImage3D:A,compressedTexSubImage2D:T,scissor:C,viewport:R,reset:D}}function un(t,e,n,i,r,a,o){function s(t,e){return ot?new OffscreenCanvas(t,e):z("canvas")}function l(t,e,n,i){var r=1;if((t.width>i||t.height>i)&&(r=i/Math.max(t.width,t.height)),r<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){var a=e?L:Math.floor,o=a(r*t.width),l=a(r*t.height);void 0===at&&(at=s(o,l));var u=n?s(o,l):at;u.width=o,u.height=l;return u.getContext("2d").drawImage(t,0,0,o,l),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+o+"x"+l+")."),u}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function u(t){return M(t.width)&&M(t.height)}function c(t){return!J&&(t.wrapS!==ta||t.wrapT!==ta||t.minFilter!==na&&t.minFilter!==aa)}function f(t,e){return t.generateMipmaps&&e&&t.minFilter!==na&&t.minFilter!==aa}function d(e){t.generateMipmap(e)}function h(n,i,r,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===J)return i;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var s=i;return i===t.RED&&(r===t.FLOAT&&(s=t.R32F),r===t.HALF_FLOAT&&(s=t.R16F),r===t.UNSIGNED_BYTE&&(s=t.R8)),i===t.RG&&(r===t.FLOAT&&(s=t.RG32F),r===t.HALF_FLOAT&&(s=t.RG16F),r===t.UNSIGNED_BYTE&&(s=t.RG8)),i===t.RGBA&&(r===t.FLOAT&&(s=t.RGBA32F),r===t.HALF_FLOAT&&(s=t.RGBA16F),r===t.UNSIGNED_BYTE&&(s=a===so&&!1===o?t.SRGB8_ALPHA8:t.RGBA8),r===t.UNSIGNED_SHORT_4_4_4_4&&(s=t.RGBA4),r===t.UNSIGNED_SHORT_5_5_5_1&&(s=t.RGB5_A1)),s!==t.R16F&&s!==t.R32F&&s!==t.RG16F&&s!==t.RG32F&&s!==t.RGBA16F&&s!==t.RGBA32F||e.get("EXT_color_buffer_float"),s}function p(t,e,n){return!0===f(t,n)||t.isFramebufferTexture&&t.minFilter!==na&&t.minFilter!==aa?(0,m.default)(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function v(e){return e===na||e===ia||e===ra?t.NEAREST:t.LINEAR}function g(t){var e=t.target;e.removeEventListener("dispose",g),x(e),e.isVideoTexture&&rt.delete(e),o.memory.textures--}function y(t){var e=t.target;e.removeEventListener("dispose",y),b(e)}function x(e){var n=i.get(e);void 0!==n.__webglInit&&(t.deleteTexture(n.__webglTexture),i.remove(e))}function b(e){var n=e.texture,r=i.get(e),a=i.get(n);if(e){if(void 0!==a.__webglTexture&&(t.deleteTexture(a.__webglTexture),o.memory.textures--),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLCubeRenderTarget)for(var s=0;s<6;s++)t.deleteFramebuffer(r.__webglFramebuffer[s]),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer[s]);else t.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&t.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer&&t.deleteRenderbuffer(r.__webglColorRenderbuffer),r.__webglDepthRenderbuffer&&t.deleteRenderbuffer(r.__webglDepthRenderbuffer);if(e.isWebGLMultipleRenderTargets)for(var l=0,u=n.length;l<u;l++){var c=i.get(n[l]);c.__webglTexture&&(t.deleteTexture(c.__webglTexture),o.memory.textures--),i.remove(n[l])}i.remove(n),i.remove(e)}}function S(){st=0}function w(){var t=st;return t>=K&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+K),st+=1,t}function E(e,r){var a=i.get(e);if(e.isVideoTexture&&j(e),e.version>0&&a.__version!==e.version){var o=e.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==o.complete)return void R(a,e,r);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(t.TEXTURE0+r),n.bindTexture(t.TEXTURE_2D,a.__webglTexture)}function A(e,r){var a=i.get(e);if(e.version>0&&a.__version!==e.version)return void R(a,e,r);n.activeTexture(t.TEXTURE0+r),n.bindTexture(t.TEXTURE_2D_ARRAY,a.__webglTexture)}function T(e,r){var a=i.get(e);if(e.version>0&&a.__version!==e.version)return void R(a,e,r);n.activeTexture(t.TEXTURE0+r),n.bindTexture(t.TEXTURE_3D,a.__webglTexture)}function P(e,r){var a=i.get(e);if(e.version>0&&a.__version!==e.version)return void D(a,e,r);n.activeTexture(t.TEXTURE0+r),n.bindTexture(t.TEXTURE_CUBE_MAP,a.__webglTexture)}function k(n,a,o){if(o?(t.texParameteri(n,t.TEXTURE_WRAP_S,lt[a.wrapS]),t.texParameteri(n,t.TEXTURE_WRAP_T,lt[a.wrapT]),n!==t.TEXTURE_3D&&n!==t.TEXTURE_2D_ARRAY||t.texParameteri(n,t.TEXTURE_WRAP_R,lt[a.wrapR]),t.texParameteri(n,t.TEXTURE_MAG_FILTER,ut[a.magFilter]),t.texParameteri(n,t.TEXTURE_MIN_FILTER,ut[a.minFilter])):(t.texParameteri(n,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(n,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),n!==t.TEXTURE_3D&&n!==t.TEXTURE_2D_ARRAY||t.texParameteri(n,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),a.wrapS===ta&&a.wrapT===ta||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,t.TEXTURE_MAG_FILTER,v(a.magFilter)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,v(a.minFilter)),a.minFilter!==na&&a.minFilter!==aa&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){var s=e.get("EXT_texture_filter_anisotropic");if(a.type===pa&&!1===e.has("OES_texture_float_linear"))return;if(!1===J&&a.type===va&&!1===e.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||i.get(a).__currentAnisotropy)&&(t.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy)}}function C(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",g),e.__webglTexture=t.createTexture(),o.memory.textures++)}function R(e,i,r){var o=t.TEXTURE_2D;i.isDataTexture2DArray&&(o=t.TEXTURE_2D_ARRAY),i.isDataTexture3D&&(o=t.TEXTURE_3D),C(e,i),n.activeTexture(t.TEXTURE0+r),n.bindTexture(o,e.__webglTexture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,i.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,i.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);var s=c(i)&&!1===u(i.image),v=l(i.image,s,!1,tt);v=W(i,v);var m=u(v)||J,g=a.convert(i.format,i.encoding),_=a.convert(i.type),y=h(i.internalFormat,g,_,i.encoding,i.isVideoTexture);k(o,i,m);var x=void 0,b=i.mipmaps,S=J&&!0!==i.isVideoTexture,w=void 0===e.__version,E=p(i,v,m);if(i.isDepthTexture)y=t.DEPTH_COMPONENT,J?y=i.type===pa?t.DEPTH_COMPONENT32F:i.type===ha?t.DEPTH_COMPONENT24:i.type===_a?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT16:i.type===pa&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===Ea&&y===t.DEPTH_COMPONENT&&i.type!==fa&&i.type!==ha&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=fa,_=a.convert(i.type)),i.format===Aa&&y===t.DEPTH_COMPONENT&&(y=t.DEPTH_STENCIL,i.type!==_a&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=_a,_=a.convert(i.type))),S&&w?n.texStorage2D(t.TEXTURE_2D,1,y,v.width,v.height):n.texImage2D(t.TEXTURE_2D,0,y,v.width,v.height,0,g,_,null);else if(i.isDataTexture)if(b.length>0&&m){S&&w&&n.texStorage2D(t.TEXTURE_2D,E,y,b[0].width,b[0].height);for(var A=0,T=b.length;A<T;A++)x=b[A],S?n.texSubImage2D(t.TEXTURE_2D,0,0,0,x.width,x.height,g,_,x.data):n.texImage2D(t.TEXTURE_2D,A,y,x.width,x.height,0,g,_,x.data);i.generateMipmaps=!1}else S?(w&&n.texStorage2D(t.TEXTURE_2D,E,y,v.width,v.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,v.width,v.height,g,_,v.data)):n.texImage2D(t.TEXTURE_2D,0,y,v.width,v.height,0,g,_,v.data);else if(i.isCompressedTexture){S&&w&&n.texStorage2D(t.TEXTURE_2D,E,y,b[0].width,b[0].height);for(var M=0,I=b.length;M<I;M++)x=b[M],i.format!==ba?null!==g?S?n.compressedTexSubImage2D(t.TEXTURE_2D,M,0,0,x.width,x.height,g,x.data):n.compressedTexImage2D(t.TEXTURE_2D,M,y,x.width,x.height,0,x.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):S?n.texSubImage2D(t.TEXTURE_2D,M,0,0,x.width,x.height,g,_,x.data):n.texImage2D(t.TEXTURE_2D,M,y,x.width,x.height,0,g,_,x.data)}else if(i.isDataTexture2DArray)S?(w&&n.texStorage3D(t.TEXTURE_2D_ARRAY,E,y,v.width,v.height,v.depth),n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,v.width,v.height,v.depth,g,_,v.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,y,v.width,v.height,v.depth,0,g,_,v.data);else if(i.isDataTexture3D)S?(w&&n.texStorage3D(t.TEXTURE_3D,E,y,v.width,v.height,v.depth),n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,v.width,v.height,v.depth,g,_,v.data)):n.texImage3D(t.TEXTURE_3D,0,y,v.width,v.height,v.depth,0,g,_,v.data);else if(i.isFramebufferTexture)S&&w?n.texStorage2D(t.TEXTURE_2D,E,y,v.width,v.height):n.texImage2D(t.TEXTURE_2D,0,y,v.width,v.height,0,g,_,null);else if(b.length>0&&m){S&&w&&n.texStorage2D(t.TEXTURE_2D,E,y,b[0].width,b[0].height);for(var P=0,L=b.length;P<L;P++)x=b[P],S?n.texSubImage2D(t.TEXTURE_2D,P,0,0,g,_,x):n.texImage2D(t.TEXTURE_2D,P,y,g,_,x);i.generateMipmaps=!1}else S?(w&&n.texStorage2D(t.TEXTURE_2D,E,y,v.width,v.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,g,_,v)):n.texImage2D(t.TEXTURE_2D,0,y,g,_,v);f(i,m)&&d(o),e.__version=i.version,i.onUpdate&&i.onUpdate(i)}function D(e,i,r){if(6===i.image.length){C(e,i),n.activeTexture(t.TEXTURE0+r),n.bindTexture(t.TEXTURE_CUBE_MAP,e.__webglTexture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,i.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,i.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);for(var o=i&&(i.isCompressedTexture||i.image[0].isCompressedTexture),s=i.image[0]&&i.image[0].isDataTexture,c=[],v=0;v<6;v++)c[v]=o||s?s?i.image[v].image:i.image[v]:l(i.image[v],!1,!0,$),c[v]=W(i,c[v]);var m=c[0],g=u(m)||J,_=a.convert(i.format,i.encoding),y=a.convert(i.type),x=h(i.internalFormat,_,y,i.encoding),b=J&&!0!==i.isVideoTexture,S=void 0===e.__version,w=p(i,m,g);k(t.TEXTURE_CUBE_MAP,i,g);var E=void 0;if(o){b&&S&&n.texStorage2D(t.TEXTURE_CUBE_MAP,w,x,m.width,m.height);for(var A=0;A<6;A++){E=c[A].mipmaps;for(var T=0;T<E.length;T++){var M=E[T];i.format!==ba?null!==_?b?n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+A,T,0,0,M.width,M.height,_,M.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+A,T,x,M.width,M.height,0,M.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):b?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+A,T,0,0,M.width,M.height,_,y,M.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+A,T,x,M.width,M.height,0,_,y,M.data)}}}else{E=i.mipmaps,b&&S&&(E.length>0&&w++,n.texStorage2D(t.TEXTURE_CUBE_MAP,w,x,c[0].width,c[0].height));for(var I=0;I<6;I++)if(s){b?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+I,0,0,0,c[I].width,c[I].height,_,y,c[I].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+I,0,x,c[I].width,c[I].height,0,_,y,c[I].data);for(var P=0;P<E.length;P++){var L=E[P],R=L.image[I].image;b?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+I,P+1,0,0,R.width,R.height,_,y,R.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+I,P+1,x,R.width,R.height,0,_,y,R.data)}}else{b?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+I,0,0,0,_,y,c[I]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+I,0,x,_,y,c[I]);for(var D=0;D<E.length;D++){var N=E[D];b?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+I,D+1,0,0,_,y,N.image[I]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+I,D+1,x,_,y,N.image[I])}}}f(i,g)&&d(t.TEXTURE_CUBE_MAP),e.__version=i.version,i.onUpdate&&i.onUpdate(i)}}function N(e,r,o,s,l){var u=a.convert(o.format,o.encoding),c=a.convert(o.type),f=h(o.internalFormat,u,c,o.encoding);i.get(r).__hasExternalTextures||(l===t.TEXTURE_3D||l===t.TEXTURE_2D_ARRAY?n.texImage3D(l,0,f,r.width,r.height,r.depth,0,u,c,null):n.texImage2D(l,0,f,r.width,r.height,0,u,c,null)),n.bindFramebuffer(t.FRAMEBUFFER,e),r.useRenderToTexture?it.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,s,l,i.get(o).__webglTexture,0,Y(r)):t.framebufferTexture2D(t.FRAMEBUFFER,s,l,i.get(o).__webglTexture,0),n.bindFramebuffer(t.FRAMEBUFFER,null)}function B(e,n,i){if(t.bindRenderbuffer(t.RENDERBUFFER,e),n.depthBuffer&&!n.stencilBuffer){var r=t.DEPTH_COMPONENT16;if(i||n.useRenderToTexture){var o=n.depthTexture;o&&o.isDepthTexture&&(o.type===pa?r=t.DEPTH_COMPONENT32F:o.type===ha&&(r=t.DEPTH_COMPONENT24));var s=Y(n);n.useRenderToTexture?it.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,s,r,n.width,n.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,s,r,n.width,n.height)}else t.renderbufferStorage(t.RENDERBUFFER,r,n.width,n.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)}else if(n.depthBuffer&&n.stencilBuffer){var l=Y(n);i&&n.useRenderbuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,l,t.DEPTH24_STENCIL8,n.width,n.height):n.useRenderToTexture?it.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,l,t.DEPTH24_STENCIL8,n.width,n.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)}else{var u=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,c=a.convert(u.format,u.encoding),f=a.convert(u.type),d=h(u.internalFormat,c,f,u.encoding),p=Y(n);i&&n.useRenderbuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,p,d,n.width,n.height):n.useRenderToTexture?it.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,p,d,n.width,n.height):t.renderbufferStorage(t.RENDERBUFFER,d,n.width,n.height)}t.bindRenderbuffer(t.RENDERBUFFER,null)}function O(e,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,e),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),E(r.depthTexture,0);var a=i.get(r.depthTexture).__webglTexture,o=Y(r);if(r.depthTexture.format===Ea)r.useRenderToTexture?it.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,a,0,o):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,a,0);else{if(r.depthTexture.format!==Aa)throw new Error("Unknown depthTexture format");r.useRenderToTexture?it.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,a,0,o):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,a,0)}}function F(e){var r=i.get(e),a=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!r.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");O(r.__webglFramebuffer,e)}else if(a){r.__webglDepthbuffer=[];for(var o=0;o<6;o++)n.bindFramebuffer(t.FRAMEBUFFER,r.__webglFramebuffer[o]),r.__webglDepthbuffer[o]=t.createRenderbuffer(),B(r.__webglDepthbuffer[o],e,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,r.__webglFramebuffer),r.__webglDepthbuffer=t.createRenderbuffer(),B(r.__webglDepthbuffer,e,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function V(e,n,r){var a=i.get(e);void 0!==n&&N(a.__webglFramebuffer,e,e.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),void 0!==r&&F(e)}function U(e){var s=e.texture,l=i.get(e),c=i.get(s);e.addEventListener("dispose",y),!0!==e.isWebGLMultipleRenderTargets&&(void 0===c.__webglTexture&&(c.__webglTexture=t.createTexture()),c.__version=s.version,o.memory.textures++);var p=!0===e.isWebGLCubeRenderTarget,v=!0===e.isWebGLMultipleRenderTargets,m=s.isDataTexture3D||s.isDataTexture2DArray,g=u(e)||J;if(p){l.__webglFramebuffer=[];for(var _=0;_<6;_++)l.__webglFramebuffer[_]=t.createFramebuffer()}else if(l.__webglFramebuffer=t.createFramebuffer(),v)if(r.drawBuffers)for(var x=e.texture,b=0,S=x.length;b<S;b++){var w=i.get(x[b]);void 0===w.__webglTexture&&(w.__webglTexture=t.createTexture(),o.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(e.useRenderbuffer)if(J){l.__webglMultisampledFramebuffer=t.createFramebuffer(),l.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,l.__webglColorRenderbuffer);var E=a.convert(s.format,s.encoding),A=a.convert(s.type),T=h(s.internalFormat,E,A,s.encoding),M=Y(e);t.renderbufferStorageMultisample(t.RENDERBUFFER,M,T,e.width,e.height),n.bindFramebuffer(t.FRAMEBUFFER,l.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,l.__webglColorRenderbuffer),t.bindRenderbuffer(t.RENDERBUFFER,null),e.depthBuffer&&(l.__webglDepthRenderbuffer=t.createRenderbuffer(),B(l.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(p){n.bindTexture(t.TEXTURE_CUBE_MAP,c.__webglTexture),k(t.TEXTURE_CUBE_MAP,s,g);for(var I=0;I<6;I++)N(l.__webglFramebuffer[I],e,s,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+I);f(s,g)&&d(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(v){for(var P=e.texture,L=0,C=P.length;L<C;L++){var R=P[L],D=i.get(R);n.bindTexture(t.TEXTURE_2D,D.__webglTexture),k(t.TEXTURE_2D,R,g),N(l.__webglFramebuffer,e,R,t.COLOR_ATTACHMENT0+L,t.TEXTURE_2D),f(R,g)&&d(t.TEXTURE_2D)}n.unbindTexture()}else{var O=t.TEXTURE_2D;if(m)if(J){var z=s.isDataTexture3D;O=z?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY}else console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.");n.bindTexture(O,c.__webglTexture),k(O,s,g),N(l.__webglFramebuffer,e,s,t.COLOR_ATTACHMENT0,O),f(s,g)&&d(O),n.unbindTexture()}e.depthBuffer&&F(e)}function G(e){for(var r=u(e)||J,a=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture],o=0,s=a.length;o<s;o++){var l=a[o];if(f(l,r)){var c=e.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,h=i.get(l).__webglTexture;n.bindTexture(c,h),d(c),n.unbindTexture()}}}function H(e){if(e.useRenderbuffer)if(J){var r=e.width,a=e.height,o=t.COLOR_BUFFER_BIT,s=[t.COLOR_ATTACHMENT0],l=e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;e.depthBuffer&&s.push(l),e.ignoreDepthForMultisampleCopy||(e.depthBuffer&&(o|=t.DEPTH_BUFFER_BIT),e.stencilBuffer&&(o|=t.STENCIL_BUFFER_BIT));var u=i.get(e);n.bindFramebuffer(t.READ_FRAMEBUFFER,u.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,u.__webglFramebuffer),e.ignoreDepthForMultisampleCopy&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[l]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[l])),t.blitFramebuffer(0,0,r,a,0,0,r,a,o,t.NEAREST),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,s),n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,u.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function Y(t){return J&&(t.useRenderbuffer||t.useRenderToTexture)?Math.min(et,t.samples):0}function j(t){var e=o.render.frame;rt.get(t)!==e&&(rt.set(t,e),t.update())}function W(t,n){var i=t.encoding,r=t.format,a=t.type;return!0===t.isCompressedTexture||!0===t.isVideoTexture||t.format===_o?n:(i!==oo&&(i===so?!1===J?!0===e.has("EXT_sRGB")&&r===ba?(t.format=_o,t.minFilter=aa,t.generateMipmaps=!1):n=Do.sRGBToLinear(n):r===ba&&a===la||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",i)),n)}function X(t,e){t&&t.isWebGLRenderTarget&&(!1===ct&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),ct=!0),t=t.texture),E(t,e)}function Z(t,e){t&&t.isWebGLCubeRenderTarget&&(!1===ft&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),ft=!0),t=t.texture),P(t,e)}var q,Q,J=r.isWebGL2,K=r.maxTextures,$=r.maxCubemapSize,tt=r.maxTextureSize,et=r.maxSamples,nt=e.has("WEBGL_multisampled_render_to_texture"),it=nt?e.get("WEBGL_multisampled_render_to_texture"):void 0,rt=new I.default,at=void 0,ot=!1;try{ot="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}var st=0,lt=(q={},(0,_.default)(q,$r,t.REPEAT),(0,_.default)(q,ta,t.CLAMP_TO_EDGE),(0,_.default)(q,ea,t.MIRRORED_REPEAT),q),ut=(Q={},(0,_.default)(Q,na,t.NEAREST),(0,_.default)(Q,ia,t.NEAREST_MIPMAP_NEAREST),(0,_.default)(Q,ra,t.NEAREST_MIPMAP_LINEAR),(0,_.default)(Q,aa,t.LINEAR),(0,_.default)(Q,oa,t.LINEAR_MIPMAP_NEAREST),(0,_.default)(Q,sa,t.LINEAR_MIPMAP_LINEAR),Q),ct=!1,ft=!1;this.allocateTextureUnit=w,this.resetTextureUnits=S,this.setTexture2D=E,this.setTexture2DArray=A,this.setTexture3D=T,this.setTextureCube=P,this.rebindTextures=V,this.setupRenderTarget=U,this.updateRenderTargetMipmap=G,this.updateMultisampleRenderTarget=H,this.setupDepthRenderbuffer=F,this.setupFrameBufferTexture=N,this.safeSetTexture2D=X,this.safeSetTextureCube=Z}function cn(t,e,n){function i(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=void 0;if(n===la)return t.UNSIGNED_BYTE;if(n===ma)return t.UNSIGNED_SHORT_4_4_4_4;if(n===ga)return t.UNSIGNED_SHORT_5_5_5_1;if(n===ua)return t.BYTE;if(n===ca)return t.SHORT;if(n===fa)return t.UNSIGNED_SHORT;if(n===da)return t.INT;if(n===ha)return t.UNSIGNED_INT;if(n===pa)return t.FLOAT;if(n===va)return r?t.HALF_FLOAT:(a=e.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(n===ya)return t.ALPHA;if(n===ba)return t.RGBA;if(n===Sa)return t.LUMINANCE;if(n===wa)return t.LUMINANCE_ALPHA;if(n===Ea)return t.DEPTH_COMPONENT;if(n===Aa)return t.DEPTH_STENCIL;if(n===Ta)return t.RED;if(n===xa)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),t.RGBA;if(n===_o)return a=e.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(n===Ma)return t.RED_INTEGER;if(n===Ia)return t.RG;if(n===Pa)return t.RG_INTEGER;if(n===ka)return t.RGBA_INTEGER;if(n===La||n===Ca||n===Ra||n===Da)if(i===so){if(null===(a=e.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(n===La)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Ca)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Ra)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Da)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(a=e.get("WEBGL_compressed_texture_s3tc")))return null;if(n===La)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Ca)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Ra)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Da)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===Na||n===Ba||n===Oa||n===Fa){if(null===(a=e.get("WEBGL_compressed_texture_pvrtc")))return null;if(n===Na)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Ba)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Oa)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Fa)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===za)return a=e.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===Va||n===Ua){if(null===(a=e.get("WEBGL_compressed_texture_etc")))return null;if(n===Va)return i===so?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(n===Ua)return i===so?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(n===Ga||n===Ha||n===Ya||n===ja||n===Wa||n===Xa||n===Za||n===qa||n===Qa||n===Ja||n===Ka||n===$a||n===to||n===eo){if(null===(a=e.get("WEBGL_compressed_texture_astc")))return null;if(n===Ga)return i===so?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Ha)return i===so?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Ya)return i===so?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===ja)return i===so?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Wa)return i===so?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Xa)return i===so?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Za)return i===so?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===qa)return i===so?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Qa)return i===so?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Ja)return i===so?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Ka)return i===so?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===$a)return i===so?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===to)return i===so?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===eo)return i===so?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===no){if(null===(a=e.get("EXT_texture_compression_bptc")))return null;if(n===no)return i===so?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}return n===_a?r?t.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0}var r=n.isWebGL2;return{convert:i}}function fn(t){function e(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}function n(t,e,n,g,_){e.isMeshBasicMaterial?i(t,e):e.isMeshLambertMaterial?(i(t,e),l(t,e)):e.isMeshToonMaterial?(i(t,e),c(t,e)):e.isMeshPhongMaterial?(i(t,e),u(t,e)):e.isMeshStandardMaterial?(i(t,e),e.isMeshPhysicalMaterial?d(t,e,_):f(t,e)):e.isMeshMatcapMaterial?(i(t,e),h(t,e)):e.isMeshDepthMaterial?(i(t,e),p(t,e)):e.isMeshDistanceMaterial?(i(t,e),v(t,e)):e.isMeshNormalMaterial?(i(t,e),m(t,e)):e.isLineBasicMaterial?(r(t,e),e.isLineDashedMaterial&&a(t,e)):e.isPointsMaterial?o(t,e,n,g):e.isSpriteMaterial?s(t,e):e.isShadowMaterial?(t.color.value.copy(e.color),t.opacity.value=e.opacity):e.isShaderMaterial&&(e.uniformsNeedUpdate=!1)}function i(e,n){e.opacity.value=n.opacity,n.color&&e.diffuse.value.copy(n.color),n.emissive&&e.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(e.map.value=n.map),n.alphaMap&&(e.alphaMap.value=n.alphaMap),n.specularMap&&(e.specularMap.value=n.specularMap),n.alphaTest>0&&(e.alphaTest.value=n.alphaTest);var i=t.get(n).envMap;i&&(e.envMap.value=i,e.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,e.reflectivity.value=n.reflectivity,e.ior.value=n.ior,e.refractionRatio.value=n.refractionRatio),n.lightMap&&(e.lightMap.value=n.lightMap,e.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(e.aoMap.value=n.aoMap,e.aoMapIntensity.value=n.aoMapIntensity);var r=void 0;n.map?r=n.map:n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap?r=n.emissiveMap:n.clearcoatMap?r=n.clearcoatMap:n.clearcoatNormalMap?r=n.clearcoatNormalMap:n.clearcoatRoughnessMap?r=n.clearcoatRoughnessMap:n.specularIntensityMap?r=n.specularIntensityMap:n.specularColorMap?r=n.specularColorMap:n.transmissionMap?r=n.transmissionMap:n.thicknessMap?r=n.thicknessMap:n.sheenColorMap?r=n.sheenColorMap:n.sheenRoughnessMap&&(r=n.sheenRoughnessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix));var a=void 0;n.aoMap?a=n.aoMap:n.lightMap&&(a=n.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),e.uv2Transform.value.copy(a.matrix))}function r(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}function a(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function o(t,e,n,i){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*i,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest);var r=void 0;e.map?r=e.map:e.alphaMap&&(r=e.alphaMap),void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix))}function s(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest);var n=void 0;e.map?n=e.map:e.alphaMap&&(n=e.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}function l(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}function u(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===or&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===or&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function c(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===or&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===or&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function f(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(e.emissiveMap.value=n.emissiveMap),n.bumpMap&&(e.bumpMap.value=n.bumpMap,e.bumpScale.value=n.bumpScale,n.side===or&&(e.bumpScale.value*=-1)),n.normalMap&&(e.normalMap.value=n.normalMap,e.normalScale.value.copy(n.normalScale),n.side===or&&e.normalScale.value.negate()),n.displacementMap&&(e.displacementMap.value=n.displacementMap,e.displacementScale.value=n.displacementScale,e.displacementBias.value=n.displacementBias),t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}function d(t,e,n){f(t,e),t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap)),e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,e.side===or&&t.clearcoatNormalScale.value.negate())),e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=n.texture,t.transmissionSamplerSize.value.set(n.width,n.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor)),t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap),e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap)}function h(t,e){e.matcap&&(t.matcap.value=e.matcap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===or&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===or&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function p(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function v(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}function m(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===or&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===or&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}return{refreshFogUniforms:e,refreshMaterialUniforms:n}}function dn(){var t=z("canvas");return t.style.display="block",t}function hn(){function t(){return null===U?q:1}function e(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=S.getContext(i,e);if(null!==r)return r}return null}function n(){Et=new xt(mt),At=new ft(mt,Et,b),Et.init(At),Xt=new cn(mt,Et,At),Tt=new ln(mt,Et,At),Pt=new wt(mt),kt=new qe,Lt=new un(mt,Et,Tt,kt,At,Xt,Pt),Ct=new ht(O),Rt=new yt(O),Dt=new st(mt,At),Zt=new ut(mt,Et,Dt,At),Nt=new bt(mt,Dt,Pt,Zt),Bt=new It(mt,Nt,Dt,Pt),Yt=new Mt(mt,At,Lt),Ut=new dt(kt),Ot=new Ze(O,Ct,Rt,Et,At,Zt,Ut),Ft=new fn(kt),zt=new $e,Vt=new on(Et,At),Ht=new lt(O,Ct,Tt,Bt,A,P),Gt=new sn(O,Bt,At),jt=new ct(mt,Et,Pt,At),Wt=new St(mt,Et,Pt,At),Pt.programs=Ot.programs,O.capabilities=At,O.extensions=Et,O.properties=kt,O.renderLists=zt,O.shadowMap=Gt,O.state=Tt,O.info=Pt}function i(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),F=!0}function r(){console.log("THREE.WebGLRenderer: Context Restored."),F=!1;var t=Pt.autoReset,e=Gt.enabled,i=Gt.autoUpdate,r=Gt.needsUpdate,a=Gt.type;n(),Pt.autoReset=t,Gt.enabled=e,Gt.autoUpdate=i,Gt.needsUpdate=r,Gt.type=a}function a(t){var e=t.target;e.removeEventListener("dispose",a),o(e)}function o(t){s(t),kt.remove(t)}function s(t){var e=kt.get(t).programs;void 0!==e&&(e.forEach(function(t){Ot.releaseProgram(t)}),t.isShaderMaterial&&Ot.releaseShaderCache(t))}function l(t){Qt&&Qt(t)}function u(){Jt.stop()}function c(){Jt.start()}function f(t,e,n,i){if(!1!==t.visible){if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)D.pushLight(t),t.castShadow&&D.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||et.intersectsSprite(t)){i&&pt.setFromMatrixPosition(t.matrixWorld).applyMatrix4(ot);var r=Bt.update(t),a=t.material;a.visible&&R.push(t,r,a,n,pt.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==Pt.render.frame&&(t.skeleton.update(),t.skeleton.frame=Pt.render.frame),!t.frustumCulled||et.intersectsObject(t))){i&&pt.setFromMatrixPosition(t.matrixWorld).applyMatrix4(ot);var o=Bt.update(t),s=t.material;if(Array.isArray(s))for(var l=o.groups,u=0,c=l.length;u<c;u++){var d=l[u],h=s[d.materialIndex];h&&h.visible&&R.push(t,o,h,n,pt.z,d)}else s.visible&&R.push(t,o,s,n,pt.z,null)}for(var p=t.children,v=0,m=p.length;v<m;v++)f(p[v],e,n,i)}}function d(t,e,n,i){var r=t.opaque,a=t.transmissive,o=t.transparent;D.setupLightsView(n),a.length>0&&h(r,e,n),i&&Tt.viewport(Y.copy(i)),r.length>0&&p(r,e,n),a.length>0&&p(a,e,n),o.length>0&&p(o,e,n)}function h(t,e,n){if(null===rt){var i=!0===I&&!0===At.isWebGL2;rt=new(i?Vo:Fo)(1024,1024,{generateMipmaps:!0,type:null!==Xt.convert(va)?va:la,minFilter:sa,magFilter:na,wrapS:ta,wrapT:ta,useRenderToTexture:Et.has("WEBGL_multisampled_render_to_texture")})}var r=O.getRenderTarget();O.setRenderTarget(rt),O.clear();var a=O.toneMapping;O.toneMapping=Ur,p(t,e,n),O.toneMapping=a,Lt.updateMultisampleRenderTarget(rt),Lt.updateRenderTargetMipmap(rt),O.setRenderTarget(r)}function p(t,e,n){for(var i=!0===e.isScene?e.overrideMaterial:null,r=0,a=t.length;r<a;r++){var o=t[r],s=o.object,l=o.geometry,u=null===i?o.material:i,c=o.group;s.layers.test(n.layers)&&v(s,e,n,l,u,c)}}function v(t,e,n,i,r,a){t.onBeforeRender(O,e,n,i,r,a),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),r.onBeforeRender(O,e,n,i,t,a),!0===r.transparent&&r.side===sr?(r.side=or,r.needsUpdate=!0,O.renderBufferDirect(n,e,i,r,t,a),r.side=ar,r.needsUpdate=!0,O.renderBufferDirect(n,e,i,r,t,a),r.side=sr):O.renderBufferDirect(n,e,i,r,t,a),t.onAfterRender(O,e,n,i,r,a)}function m(t,e,n){!0!==e.isScene&&(e=vt);var i=kt.get(t),r=D.state.lights,o=D.state.shadowsArray,s=r.state.version,l=Ot.getParameters(t,r.state,o,e,n),u=Ot.getProgramCacheKey(l),c=i.programs;i.environment=t.isMeshStandardMaterial?e.environment:null,i.fog=e.fog,i.envMap=(t.isMeshStandardMaterial?Rt:Ct).get(t.envMap||i.environment),void 0===c&&(t.addEventListener("dispose",a),c=new E.default,i.programs=c);var f=c.get(u);if(void 0!==f){if(i.currentProgram===f&&i.lightsStateVersion===s)return g(t,l),f}else l.uniforms=Ot.getUniforms(t),t.onBuild(n,l,O),t.onBeforeCompile(l,O),f=Ot.acquireProgram(l,u),c.set(u,f),i.uniforms=l.uniforms;var d=i.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(d.clippingPlanes=Ut.uniform),g(t,l),i.needsLights=x(t),i.lightsStateVersion=s,i.needsLights&&(d.ambientLightColor.value=r.state.ambient,d.lightProbe.value=r.state.probe,d.directionalLights.value=r.state.directional,d.directionalLightShadows.value=r.state.directionalShadow,d.spotLights.value=r.state.spot,d.spotLightShadows.value=r.state.spotShadow,d.rectAreaLights.value=r.state.rectArea,d.ltc_1.value=r.state.rectAreaLTC1,d.ltc_2.value=r.state.rectAreaLTC2,d.pointLights.value=r.state.point,d.pointLightShadows.value=r.state.pointShadow,d.hemisphereLights.value=r.state.hemi,d.directionalShadowMap.value=r.state.directionalShadowMap,d.directionalShadowMatrix.value=r.state.directionalShadowMatrix,d.spotShadowMap.value=r.state.spotShadowMap,d.spotShadowMatrix.value=r.state.spotShadowMatrix,d.pointShadowMap.value=r.state.pointShadowMap,d.pointShadowMatrix.value=r.state.pointShadowMatrix);var h=f.getUniforms(),p=Ee.seqWithValue(h.seq,d);return i.currentProgram=f,i.uniformsList=p,f}function g(t,e){var n=kt.get(t);n.outputEncoding=e.outputEncoding,n.instancing=e.instancing,n.skinning=e.skinning,n.morphTargets=e.morphTargets,n.morphNormals=e.morphNormals,n.morphTargetsCount=e.morphTargetsCount,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas,n.vertexTangents=e.vertexTangents,n.toneMapping=e.toneMapping}function _(t,e,n,i,r){!0!==e.isScene&&(e=vt),Lt.resetTextureUnits();var a=e.fog,o=i.isMeshStandardMaterial?e.environment:null,s=null===U?O.outputEncoding:!0===U.isXRRenderTarget?U.texture.encoding:oo,l=(i.isMeshStandardMaterial?Rt:Ct).get(i.envMap||o),u=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!i.normalMap&&!!n.attributes.tangent,f=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,h=n.morphAttributes.position?n.morphAttributes.position.length:0,p=i.toneMapped?O.toneMapping:Ur,v=kt.get(i),g=D.state.lights;if(!0===nt&&(!0===it||t!==H)){var _=t===H&&i.id===G;Ut.setState(i,t,_)}var x=!1;i.version===v.__version?v.needsLights&&v.lightsStateVersion!==g.state.version?x=!0:v.outputEncoding!==s?x=!0:r.isInstancedMesh&&!1===v.instancing?x=!0:r.isInstancedMesh||!0!==v.instancing?r.isSkinnedMesh&&!1===v.skinning?x=!0:r.isSkinnedMesh||!0!==v.skinning?v.envMap!==l?x=!0:i.fog&&v.fog!==a?x=!0:void 0===v.numClippingPlanes||v.numClippingPlanes===Ut.numPlanes&&v.numIntersection===Ut.numIntersection?v.vertexAlphas!==u?x=!0:v.vertexTangents!==c?x=!0:v.morphTargets!==f?x=!0:v.morphNormals!==d?x=!0:v.toneMapping!==p?x=!0:!0===At.isWebGL2&&v.morphTargetsCount!==h&&(x=!0):x=!0:x=!0:x=!0:(x=!0,v.__version=i.version);var b=v.currentProgram;!0===x&&(b=m(i,e,r));var S=!1,w=!1,E=!1,A=b.getUniforms(),T=v.uniforms;if(Tt.useProgram(b.program)&&(S=!0,w=!0,E=!0),i.id!==G&&(G=i.id,w=!0),S||H!==t){if(A.setValue(mt,"projectionMatrix",t.projectionMatrix),At.logarithmicDepthBuffer&&A.setValue(mt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),H!==t&&(H=t,w=!0,E=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshStandardMaterial||i.envMap){var M=A.map.cameraPosition;void 0!==M&&M.setValue(mt,pt.setFromMatrixPosition(t.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&A.setValue(mt,"isOrthographic",!0===t.isOrthographicCamera),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.isShadowMaterial||r.isSkinnedMesh)&&A.setValue(mt,"viewMatrix",t.matrixWorldInverse)}if(r.isSkinnedMesh){A.setOptional(mt,r,"bindMatrix"),A.setOptional(mt,r,"bindMatrixInverse");var I=r.skeleton;I&&(At.floatVertexTextures?(null===I.boneTexture&&I.computeBoneTexture(),A.setValue(mt,"boneTexture",I.boneTexture,Lt),A.setValue(mt,"boneTextureSize",I.boneTextureSize)):A.setOptional(mt,I,"boneMatrices"))}return!n||void 0===n.morphAttributes.position&&void 0===n.morphAttributes.normal||Yt.update(r,n,i,b),(w||v.receiveShadow!==r.receiveShadow)&&(v.receiveShadow=r.receiveShadow,A.setValue(mt,"receiveShadow",r.receiveShadow)),w&&(A.setValue(mt,"toneMappingExposure",O.toneMappingExposure),v.needsLights&&y(T,E),a&&i.fog&&Ft.refreshFogUniforms(T,a),Ft.refreshMaterialUniforms(T,i,q,Z,rt),Ee.upload(mt,v.uniformsList,T,Lt)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(Ee.upload(mt,v.uniformsList,T,Lt),i.uniformsNeedUpdate=!1),i.isSpriteMaterial&&A.setValue(mt,"center",r.center),A.setValue(mt,"modelViewMatrix",r.modelViewMatrix),A.setValue(mt,"normalMatrix",r.normalMatrix),A.setValue(mt,"modelMatrix",r.matrixWorld),b}function y(t,e){t.ambientLightColor.needsUpdate=e,t.lightProbe.needsUpdate=e,t.directionalLights.needsUpdate=e,t.directionalLightShadows.needsUpdate=e,t.pointLights.needsUpdate=e,t.pointLightShadows.needsUpdate=e,t.spotLights.needsUpdate=e,t.spotLightShadows.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}function x(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},S=void 0!==b.canvas?b.canvas:dn(),w=void 0!==b.context?b.context:null,A=void 0!==b.alpha&&b.alpha,T=void 0===b.depth||b.depth,M=void 0===b.stencil||b.stencil,I=void 0!==b.antialias&&b.antialias,P=void 0===b.premultipliedAlpha||b.premultipliedAlpha,k=void 0!==b.preserveDrawingBuffer&&b.preserveDrawingBuffer,L=void 0!==b.powerPreference?b.powerPreference:"default",C=void 0!==b.failIfMajorPerformanceCaveat&&b.failIfMajorPerformanceCaveat,R=null,D=null,N=[],B=[];this.domElement=S,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=oo,this.physicallyCorrectLights=!1,this.toneMapping=Ur,this.toneMappingExposure=1;var O=this,F=!1,z=0,V=0,U=null,G=-1,H=null,Y=new Oo,j=new Oo,W=null,X=S.width,Z=S.height,q=1,Q=null,J=null,K=new Oo(0,0,X,Z),$=new Oo(0,0,X,Z),tt=!1,et=new su,nt=!1,it=!1,rt=null,ot=new _s,pt=new Go,vt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},mt=w;try{var gt={alpha:!0,depth:T,stencil:M,antialias:I,premultipliedAlpha:P,preserveDrawingBuffer:k,powerPreference:L,failIfMajorPerformanceCaveat:C};if("setAttribute"in S&&S.setAttribute("data-engine","three.js r"+Qi),S.addEventListener("webglcontextlost",i,!1),S.addEventListener("webglcontextrestored",r,!1),null===mt){var _t=["webgl2","webgl","experimental-webgl"];if(!0===O.isWebGL1Renderer&&_t.shift(),null===(mt=e(_t,gt)))throw e(_t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===mt.getShaderPrecisionFormat&&(mt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}var Et=void 0,At=void 0,Tt=void 0,Pt=void 0,kt=void 0,Lt=void 0,Ct=void 0,Rt=void 0,Dt=void 0,Nt=void 0,Bt=void 0,Ot=void 0,Ft=void 0,zt=void 0,Vt=void 0,Ut=void 0,Gt=void 0,Ht=void 0,Yt=void 0,jt=void 0,Wt=void 0,Xt=void 0,Zt=void 0;n();var qt=new oc(O,mt);this.xr=qt,this.getContext=function(){return mt},this.getContextAttributes=function(){return mt.getContextAttributes()},this.forceContextLoss=function(){var t=Et.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=Et.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return q},this.setPixelRatio=function(t){void 0!==t&&(q=t,this.setSize(X,Z,!1))},this.getSize=function(t){return t.set(X,Z)},this.setSize=function(t,e,n){if(qt.isPresenting)return void console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");X=t,Z=e,S.width=Math.floor(t*q),S.height=Math.floor(e*q),!1!==n&&(S.style.width=t+"px",S.style.height=e+"px"),this.setViewport(0,0,t,e)},this.getDrawingBufferSize=function(t){return t.set(X*q,Z*q).floor()},this.setDrawingBufferSize=function(t,e,n){X=t,Z=e,q=n,S.width=Math.floor(t*n),S.height=Math.floor(e*n),this.setViewport(0,0,t,e)},this.getCurrentViewport=function(t){return t.copy(Y)},this.getViewport=function(t){return t.copy(K)},this.setViewport=function(t,e,n,i){t.isVector4?K.set(t.x,t.y,t.z,t.w):K.set(t,e,n,i),Tt.viewport(Y.copy(K).multiplyScalar(q).floor())},this.getScissor=function(t){return t.copy($)},this.setScissor=function(t,e,n,i){t.isVector4?$.set(t.x,t.y,t.z,t.w):$.set(t,e,n,i),Tt.scissor(j.copy($).multiplyScalar(q).floor())},this.getScissorTest=function(){return tt},this.setScissorTest=function(t){Tt.setScissorTest(tt=t)},this.setOpaqueSort=function(t){Q=t},this.setTransparentSort=function(t){J=t},this.getClearColor=function(t){return t.copy(Ht.getClearColor())},this.setClearColor=function(){Ht.setClearColor.apply(Ht,arguments)},this.getClearAlpha=function(){return Ht.getClearAlpha()},this.setClearAlpha=function(){Ht.setClearAlpha.apply(Ht,arguments)},this.clear=function(t,e,n){var i=0;(void 0===t||t)&&(i|=mt.COLOR_BUFFER_BIT),(void 0===e||e)&&(i|=mt.DEPTH_BUFFER_BIT),(void 0===n||n)&&(i|=mt.STENCIL_BUFFER_BIT),mt.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){S.removeEventListener("webglcontextlost",i,!1),S.removeEventListener("webglcontextrestored",r,!1),zt.dispose(),Vt.dispose(),kt.dispose(),Ct.dispose(),Rt.dispose(),Bt.dispose(),Zt.dispose(),Ot.dispose(),qt.dispose(),qt.removeEventListener("sessionstart",u),qt.removeEventListener("sessionend",c),rt&&(rt.dispose(),rt=null),Jt.stop()},this.renderBufferDirect=function(e,n,i,r,a,o){null===n&&(n=vt);var s=a.isMesh&&a.matrixWorld.determinant()<0,l=_(e,n,i,r,a);Tt.setMaterial(r,s);var u=i.index,c=i.attributes.position;if(null===u){if(void 0===c||0===c.count)return}else if(0===u.count)return;var f=1;!0===r.wireframe&&(u=Nt.getWireframeAttribute(i),f=2),Zt.setup(a,r,l,i,u);var d=void 0,h=jt;null!==u&&(d=Dt.get(u),h=Wt,h.setIndex(d));var p=null!==u?u.count:c.count,v=i.drawRange.start*f,m=i.drawRange.count*f,g=null!==o?o.start*f:0,y=null!==o?o.count*f:1/0,x=Math.max(v,g),b=Math.min(p,v+m,g+y)-1,S=Math.max(0,b-x+1);if(0!==S){if(a.isMesh)!0===r.wireframe?(Tt.setLineWidth(r.wireframeLinewidth*t()),h.setMode(mt.LINES)):h.setMode(mt.TRIANGLES);else if(a.isLine){var w=r.linewidth;void 0===w&&(w=1),Tt.setLineWidth(w*t()),a.isLineSegments?h.setMode(mt.LINES):a.isLineLoop?h.setMode(mt.LINE_LOOP):h.setMode(mt.LINE_STRIP)}else a.isPoints?h.setMode(mt.POINTS):a.isSprite&&h.setMode(mt.TRIANGLES);if(a.isInstancedMesh)h.renderInstances(x,S,a.count);else if(i.isInstancedBufferGeometry){var E=Math.min(i.instanceCount,i._maxInstanceCount);h.renderInstances(x,S,E)}else h.render(x,S)}},this.compile=function(t,e){D=Vt.get(t),D.init(),B.push(D),t.traverseVisible(function(t){t.isLight&&t.layers.test(e.layers)&&(D.pushLight(t),t.castShadow&&D.pushShadow(t))}),D.setupLights(O.physicallyCorrectLights),t.traverse(function(e){var n=e.material;if(n)if(Array.isArray(n))for(var i=0;i<n.length;i++){var r=n[i];m(r,t,e)}else m(n,t,e)}),B.pop(),D=null};var Qt=null,Jt=new at;Jt.setAnimationLoop(l),"undefined"!=typeof window&&Jt.setContext(window),this.setAnimationLoop=function(t){Qt=t,qt.setAnimationLoop(t),null===t?Jt.stop():Jt.start()},qt.addEventListener("sessionstart",u),qt.addEventListener("sessionend",c),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0!==F){!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),!0===qt.enabled&&!0===qt.isPresenting&&(!0===qt.cameraAutoUpdate&&qt.updateCamera(e),e=qt.getCamera()),!0===t.isScene&&t.onBeforeRender(O,t,e,U),D=Vt.get(t,B.length),D.init(),B.push(D),ot.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),et.setFromProjectionMatrix(ot),it=this.localClippingEnabled,nt=Ut.init(this.clippingPlanes,it,e),R=zt.get(t,N.length),R.init(),N.push(R),f(t,e,0,O.sortObjects),R.finish(),!0===O.sortObjects&&R.sort(Q,J),!0===nt&&Ut.beginShadows();var n=D.state.shadowsArray;if(Gt.render(n,t,e),!0===nt&&Ut.endShadows(),!0===this.info.autoReset&&this.info.reset(),Ht.render(R,t),D.setupLights(O.physicallyCorrectLights),e.isArrayCamera)for(var i=e.cameras,r=0,a=i.length;r<a;r++){var o=i[r];d(R,t,o,o.viewport)}else d(R,t,e);null!==U&&(Lt.updateMultisampleRenderTarget(U),Lt.updateRenderTargetMipmap(U)),!0===t.isScene&&t.onAfterRender(O,t,e),Tt.buffers.depth.setTest(!0),Tt.buffers.depth.setMask(!0),Tt.buffers.color.setMask(!0),Tt.setPolygonOffset(!1),Zt.resetDefaultState(),G=-1,H=null,B.pop(),D=B.length>0?B[B.length-1]:null,N.pop(),R=N.length>0?N[N.length-1]:null}},this.getActiveCubeFace=function(){return z},this.getActiveMipmapLevel=function(){return V},this.getRenderTarget=function(){return U},this.setRenderTargetTextures=function(t,e,n){kt.get(t.texture).__webglTexture=e,kt.get(t.depthTexture).__webglTexture=n;var i=kt.get(t);i.__hasExternalTextures=!0,i.__hasExternalTextures&&(i.__autoAllocateDepthBuffer=void 0===n,i.__autoAllocateDepthBuffer||t.useRenderToTexture&&(console.warn("render-to-texture extension was disabled because an external texture was provided"),t.useRenderToTexture=!1,t.useRenderbuffer=!0))},this.setRenderTargetFramebuffer=function(t,e){var n=kt.get(t);n.__webglFramebuffer=e,n.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;U=t,z=e,V=n;var i=!0;if(t){var r=kt.get(t);void 0!==r.__useDefaultFramebuffer?(Tt.bindFramebuffer(mt.FRAMEBUFFER,null),i=!1):void 0===r.__webglFramebuffer?Lt.setupRenderTarget(t):r.__hasExternalTextures&&Lt.rebindTextures(t,kt.get(t.texture).__webglTexture,kt.get(t.depthTexture).__webglTexture)}var a=null,o=!1,s=!1;if(t){var l=t.texture;(l.isDataTexture3D||l.isDataTexture2DArray)&&(s=!0);var u=kt.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(a=u[e],o=!0):a=t.useRenderbuffer?kt.get(t).__webglMultisampledFramebuffer:u,Y.copy(t.viewport),j.copy(t.scissor),W=t.scissorTest}else Y.copy(K).multiplyScalar(q).floor(),j.copy($).multiplyScalar(q).floor(),W=tt;if(Tt.bindFramebuffer(mt.FRAMEBUFFER,a)&&At.drawBuffers&&i&&Tt.drawBuffers(t,a),Tt.viewport(Y),Tt.scissor(j),Tt.setScissorTest(W),o){var c=kt.get(t.texture);mt.framebufferTexture2D(mt.FRAMEBUFFER,mt.COLOR_ATTACHMENT0,mt.TEXTURE_CUBE_MAP_POSITIVE_X+e,c.__webglTexture,n)}else if(s){var f=kt.get(t.texture),d=e||0;mt.framebufferTextureLayer(mt.FRAMEBUFFER,mt.COLOR_ATTACHMENT0,f.__webglTexture,n||0,d)}G=-1},this.readRenderTargetPixels=function(t,e,n,i,r,a,o){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var s=kt.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){Tt.bindFramebuffer(mt.FRAMEBUFFER,s);try{var l=t.texture,u=l.format,c=l.type;if(u!==ba&&Xt.convert(u)!==mt.getParameter(mt.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var f=c===va&&(Et.has("EXT_color_buffer_half_float")||At.isWebGL2&&Et.has("EXT_color_buffer_float"));if(!(c===la||Xt.convert(c)===mt.getParameter(mt.IMPLEMENTATION_COLOR_READ_TYPE)||c===pa&&(At.isWebGL2||Et.has("OES_texture_float")||Et.has("WEBGL_color_buffer_float"))||f))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");mt.checkFramebufferStatus(mt.FRAMEBUFFER)===mt.FRAMEBUFFER_COMPLETE?e>=0&&e<=t.width-i&&n>=0&&n<=t.height-r&&mt.readPixels(e,n,i,r,Xt.convert(u),Xt.convert(c),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{var d=null!==U?kt.get(U).__webglFramebuffer:null;Tt.bindFramebuffer(mt.FRAMEBUFFER,d)}}},this.copyFramebufferToTexture=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!0!==e.isFramebufferTexture)return void console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");var i=Math.pow(2,-n),r=Math.floor(e.image.width*i),a=Math.floor(e.image.height*i);Lt.setTexture2D(e,0),mt.copyTexSubImage2D(mt.TEXTURE_2D,n,0,0,t.x,t.y,r,a),Tt.unbindTexture()},this.copyTextureToTexture=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=e.image.width,a=e.image.height,o=Xt.convert(n.format),s=Xt.convert(n.type);Lt.setTexture2D(n,0),mt.pixelStorei(mt.UNPACK_FLIP_Y_WEBGL,n.flipY),mt.pixelStorei(mt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),mt.pixelStorei(mt.UNPACK_ALIGNMENT,n.unpackAlignment),e.isDataTexture?mt.texSubImage2D(mt.TEXTURE_2D,i,t.x,t.y,r,a,o,s,e.image.data):e.isCompressedTexture?mt.compressedTexSubImage2D(mt.TEXTURE_2D,i,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,o,e.mipmaps[0].data):mt.texSubImage2D(mt.TEXTURE_2D,i,t.x,t.y,o,s,e.image),0===i&&n.generateMipmaps&&mt.generateMipmap(mt.TEXTURE_2D),Tt.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(O.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");var a=t.max.x-t.min.x+1,o=t.max.y-t.min.y+1,s=t.max.z-t.min.z+1,l=Xt.convert(i.format),u=Xt.convert(i.type),c=void 0;if(i.isDataTexture3D)Lt.setTexture3D(i,0),c=mt.TEXTURE_3D;else{if(!i.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Lt.setTexture2DArray(i,0),c=mt.TEXTURE_2D_ARRAY}mt.pixelStorei(mt.UNPACK_FLIP_Y_WEBGL,i.flipY),mt.pixelStorei(mt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),mt.pixelStorei(mt.UNPACK_ALIGNMENT,i.unpackAlignment);var f=mt.getParameter(mt.UNPACK_ROW_LENGTH),d=mt.getParameter(mt.UNPACK_IMAGE_HEIGHT),h=mt.getParameter(mt.UNPACK_SKIP_PIXELS),p=mt.getParameter(mt.UNPACK_SKIP_ROWS),v=mt.getParameter(mt.UNPACK_SKIP_IMAGES),m=n.isCompressedTexture?n.mipmaps[0]:n.image;mt.pixelStorei(mt.UNPACK_ROW_LENGTH,m.width),mt.pixelStorei(mt.UNPACK_IMAGE_HEIGHT,m.height),mt.pixelStorei(mt.UNPACK_SKIP_PIXELS,t.min.x),mt.pixelStorei(mt.UNPACK_SKIP_ROWS,t.min.y),mt.pixelStorei(mt.UNPACK_SKIP_IMAGES,t.min.z),n.isDataTexture||n.isDataTexture3D?mt.texSubImage3D(c,r,e.x,e.y,e.z,a,o,s,l,u,m.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),mt.compressedTexSubImage3D(c,r,e.x,e.y,e.z,a,o,s,l,m.data)):mt.texSubImage3D(c,r,e.x,e.y,e.z,a,o,s,l,u,m),mt.pixelStorei(mt.UNPACK_ROW_LENGTH,f),mt.pixelStorei(mt.UNPACK_IMAGE_HEIGHT,d),mt.pixelStorei(mt.UNPACK_SKIP_PIXELS,h),mt.pixelStorei(mt.UNPACK_SKIP_ROWS,p),mt.pixelStorei(mt.UNPACK_SKIP_IMAGES,v),0===r&&i.generateMipmaps&&mt.generateMipmap(c),Tt.unbindTexture()},this.initTexture=function(t){Lt.setTexture2D(t,0),Tt.unbindTexture()},this.resetState=function(){z=0,V=0,U=null,Tt.reset(),Zt.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function pn(t,e,n,i,r,a){yc.subVectors(t,n).addScalar(.5).multiply(i),void 0!==r?(xc.x=a*yc.x-r*yc.y,xc.y=r*yc.x+a*yc.y):xc.copy(yc),t.copy(e),t.x+=xc.x,t.y+=xc.y,t.applyMatrix4(bc)}function vn(t,e,n,i,r,a,o){var s=uf.distanceSqToPoint(t);if(s<n){var l=new Go;uf.closestPointToPoint(t,l),l.applyMatrix4(i);var u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;a.push({distance:u,distanceToRay:Math.sqrt(s),point:l,index:e,face:null,object:o})}}function mn(){function t(t,a,o,s){e=t,n=o,i=-3*t+3*a-2*o-s,r=2*t-2*a+o+s}var e=0,n=0,i=0,r=0;return{initCatmullRom:function(e,n,i,r,a){t(n,i,a*(i-e),a*(r-n))},initNonuniformCatmullRom:function(e,n,i,r,a,o,s){var l=(n-e)/a-(i-e)/(a+o)+(i-n)/o,u=(i-n)/o-(r-n)/(o+s)+(r-i)/s;l*=o,u*=o,t(n,i,l,u)},calc:function(t){var a=t*t;return e+n*t+i*a+r*(a*t)}}}function gn(t,e,n,i,r){var a=.5*(i-e),o=.5*(r-n),s=t*t;return(2*n-2*i+a+o)*(t*s)+(-3*n+3*i-2*a-o)*s+a*t+n}function _n(t,e){var n=1-t;return n*n*e}function yn(t,e){return 2*(1-t)*t*e}function xn(t,e){return t*t*e}function bn(t,e,n,i){return _n(t,e)+yn(t,n)+xn(t,i)}function Sn(t,e){var n=1-t;return n*n*n*e}function wn(t,e){var n=1-t;return 3*n*n*t*e}function En(t,e){return 3*(1-t)*t*t*e}function An(t,e){return t*t*t*e}function Tn(t,e,n,i,r){return Sn(t,e)+wn(t,n)+En(t,i)+An(t,r)}function Mn(t,e,n,i,r){var a=void 0,o=void 0;if(r===ii(t,e,n,i)>0)for(a=e;a<n;a+=i)o=ti(a,t[a],t[a+1],o);else for(a=n-i;a>=e;a-=i)o=ti(a,t[a],t[a+1],o);return o&&Wn(o,o.next)&&(ei(o),o=o.next),o}function In(t,e){if(!t)return t;e||(e=t);var n=t,i=void 0;do{if(i=!1,n.steiner||!Wn(n,n.next)&&0!==jn(n.prev,n,n.next))n=n.next;else{if(ei(n),(n=e=n.prev)===n.next)break;i=!0}}while(i||n!==e);return e}function Pn(t,e,n,i,r,a,o){if(t){!o&&a&&zn(t,i,r,a);for(var s=t,l=void 0,u=void 0;t.prev!==t.next;)if(l=t.prev,u=t.next,a?Ln(t,i,r,a):kn(t))e.push(l.i/n),e.push(t.i/n),e.push(u.i/n),ei(t),t=u.next,s=u.next;else if((t=u)===s){o?1===o?(t=Cn(In(t),e,n),Pn(t,e,n,i,r,a,2)):2===o&&Rn(t,e,n,i,r,a):Pn(In(t),e,n,i,r,a,1);break}}}function kn(t){var e=t.prev,n=t,i=t.next;if(jn(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(Hn(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&jn(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Ln(t,e,n,i){var r=t.prev,a=t,o=t.next;if(jn(r,a,o)>=0)return!1;for(var s=r.x<a.x?r.x<o.x?r.x:o.x:a.x<o.x?a.x:o.x,l=r.y<a.y?r.y<o.y?r.y:o.y:a.y<o.y?a.y:o.y,u=r.x>a.x?r.x>o.x?r.x:o.x:a.x>o.x?a.x:o.x,c=r.y>a.y?r.y>o.y?r.y:o.y:a.y>o.y?a.y:o.y,f=Un(s,l,e,n,i),d=Un(u,c,e,n,i),h=t.prevZ,p=t.nextZ;h&&h.z>=f&&p&&p.z<=d;){if(h!==t.prev&&h!==t.next&&Hn(r.x,r.y,a.x,a.y,o.x,o.y,h.x,h.y)&&jn(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,p!==t.prev&&p!==t.next&&Hn(r.x,r.y,a.x,a.y,o.x,o.y,p.x,p.y)&&jn(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;h&&h.z>=f;){if(h!==t.prev&&h!==t.next&&Hn(r.x,r.y,a.x,a.y,o.x,o.y,h.x,h.y)&&jn(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&Hn(r.x,r.y,a.x,a.y,o.x,o.y,p.x,p.y)&&jn(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function Cn(t,e,n){var i=t;do{var r=i.prev,a=i.next.next;!Wn(r,a)&&Xn(r,i,i.next,a)&&Jn(r,a)&&Jn(a,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(a.i/n),ei(i),ei(i.next),i=t=a),i=i.next}while(i!==t);return In(i)}function Rn(t,e,n,i,r,a){var o=t;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Yn(o,s)){var l=$n(o,s);return o=In(o,o.next),l=In(l,l.next),Pn(o,e,n,i,r,a),void Pn(l,e,n,i,r,a)}s=s.next}o=o.next}while(o!==t)}function Dn(t,e,n,i){var r=[],a=void 0,o=void 0,s=void 0,l=void 0,u=void 0;for(a=0,o=e.length;a<o;a++)s=e[a]*i,l=a<o-1?e[a+1]*i:t.length,u=Mn(t,s,l,i,!1),u===u.next&&(u.steiner=!0),r.push(Gn(u));for(r.sort(Nn),a=0;a<r.length;a++)Bn(r[a],n),n=In(n,n.next);return n}function Nn(t,e){return t.x-e.x}function Bn(t,e){if(e=On(t,e)){var n=$n(e,t);In(e,e.next),In(n,n.next)}}function On(t,e){var n=e,i=t.x,r=t.y,a=-1/0,o=void 0;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){var s=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>a){if(a=s,s===i){if(r===n.y)return n;if(r===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!o)return null;if(i===a)return o;var l=o,u=o.x,c=o.y,f=1/0,d=void 0;n=o;do{i>=n.x&&n.x>=u&&i!==n.x&&Hn(r<c?i:a,r,u,c,r<c?a:i,r,n.x,n.y)&&(d=Math.abs(r-n.y)/(i-n.x),Jn(n,t)&&(d<f||d===f&&(n.x>o.x||n.x===o.x&&Fn(o,n)))&&(o=n,f=d)),n=n.next}while(n!==l);return o}function Fn(t,e){return jn(t.prev,t,e.prev)<0&&jn(e.next,t,t.next)<0}function zn(t,e,n,i){var r=t;do{null===r.z&&(r.z=Un(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,Vn(r)}function Vn(t){var e=void 0,n=void 0,i=void 0,r=void 0,a=void 0,o=void 0,s=void 0,l=void 0,u=1;do{for(n=t,t=null,a=null,o=0;n;){for(o++,i=n,s=0,e=0;e<u&&(s++,i=i.nextZ);e++);for(l=u;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),a?a.nextZ=r:t=r,r.prevZ=a,a=r;n=i}a.nextZ=null,u*=2}while(o>1);return t}function Un(t,e,n,i,r){return t=32767*(t-n)*r,e=32767*(e-i)*r,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function Gn(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function Hn(t,e,n,i,r,a,o,s){return(r-o)*(e-s)-(t-o)*(a-s)>=0&&(t-o)*(i-s)-(n-o)*(e-s)>=0&&(n-o)*(a-s)-(r-o)*(i-s)>=0}function Yn(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Qn(t,e)&&(Jn(t,e)&&Jn(e,t)&&Kn(t,e)&&(jn(t.prev,t,e.prev)||jn(t,e.prev,e))||Wn(t,e)&&jn(t.prev,t,t.next)>0&&jn(e.prev,e,e.next)>0)}function jn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Wn(t,e){return t.x===e.x&&t.y===e.y}function Xn(t,e,n,i){var r=qn(jn(t,e,n)),a=qn(jn(t,e,i)),o=qn(jn(n,i,t)),s=qn(jn(n,i,e));return r!==a&&o!==s||(!(0!==r||!Zn(t,n,e))||(!(0!==a||!Zn(t,i,e))||(!(0!==o||!Zn(n,t,i))||!(0!==s||!Zn(n,e,i)))))}function Zn(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function qn(t){return t>0?1:t<0?-1:0}function Qn(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Xn(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Jn(t,e){return jn(t.prev,t,t.next)<0?jn(t,e,t.next)>=0&&jn(t,t.prev,e)>=0:jn(t,e,t.prev)<0||jn(t,t.next,e)<0}function Kn(t,e){var n=t,i=!1,r=(t.x+e.x)/2,a=(t.y+e.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}function $n(t,e){var n=new ni(t.i,t.x,t.y),i=new ni(e.i,e.x,e.y),r=t.next,a=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function ti(t,e,n,i){var r=new ni(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function ei(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function ni(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ii(t,e,n,i){for(var r=0,a=e,o=n-i;a<n;a+=i)r+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return r}function ri(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function ai(t,e){for(var n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}function oi(t,e,n){if(n.shapes=[],Array.isArray(t))for(var i=0,r=t.length;i<r;i++){var a=t[i];n.shapes.push(a.uuid)}else n.shapes.push(t.uuid);return void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}function si(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,i=t.length;n<i;n++){var r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}function li(t,e,n){var i=t.x+","+t.y+","+t.z+"-"+e.x+","+e.y+","+e.z,r=e.x+","+e.y+","+e.z+"-"+t.x+","+t.y+","+t.z;return!0!==n.has(i)&&!0!==n.has(r)&&(n.add(i,r),!0)}function ui(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Td;case"vector":case"vector2":case"vector3":case"vector4":return kd;case"color":return Ad;case"quaternion":return Id;case"bool":case"boolean":return Ed;case"string":return Pd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function ci(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=ui(t.type);if(void 0===t.times){var n=[],i=[];_d.flattenJSON(t.keys,n,i,"value"),t.times=n,t.values=i}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}function fi(){return("undefined"==typeof performance?Date:performance).now()}function di(t,e){return t.distance-e.distance}function hi(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===i)for(var r=t.children,a=0,o=r.length;a<o;a++)hi(r[a],e,n,!0)}function pi(t){var e=[];t&&t.isBone&&e.push(t);for(var n=0;n<t.children.length;n++)e.push.apply(e,pi(t.children[n]));return e}function vi(t,e,n,i,r,a,o){kp.set(r,a,o).unproject(i);var s=e[t];if(void 0!==s)for(var l=n.getAttribute("position"),u=0,c=s.length;u<c;u++)l.setXYZ(s[u],kp.x,kp.y,kp.z)}function mi(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t}function gi(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t}function _i(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new df(t,e)}function yi(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Ic(t)}function xi(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new df(t,e)}function bi(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new sf(t)}function Si(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new sf(t)}function wi(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new sf(t)}function Ei(t,e,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Go(t,e,n)}function Ai(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new ol(t,e).setUsage(mo)}function Ti(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new sl(t,e)}function Mi(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new ll(t,e)}function Ii(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new ul(t,e)}function Pi(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new cl(t,e)}function ki(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new fl(t,e)}function Li(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new dl(t,e)}function Ci(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new hl(t,e)}function Ri(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new vl(t,e)}function Di(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new ml(t,e)}function Ni(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new Up(t)}function Bi(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Dp(t,e)}function Oi(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new af(new Tf(t.geometry),new qc({color:void 0!==e?e:16777215}))}function Fi(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new af(new od(t.geometry),new qc({color:void 0!==e?e:16777215}))}function zi(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Od(t)}function Vi(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Gd(t)}function Ui(t,e,n){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new tu(t,n)}function Gi(){console.error("THREE.CanvasRenderer has been removed")}function Hi(){console.error("THREE.JSONLoader has been removed.")}function Yi(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}function ji(){return console.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js"),new El}function Wi(){return console.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js"),new El}function Xi(){console.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")}function Zi(){console.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")}function qi(){console.error("THREE.ImmediateRenderObject has been removed.")}for(var Qi="137",Ji={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Ki={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},$i=0,tr=1,er=2,nr=1,ir=2,rr=3,ar=0,or=1,sr=2,lr=0,ur=1,cr=2,fr=3,dr=4,hr=5,pr=100,vr=101,mr=102,gr=103,_r=104,yr=200,xr=201,br=202,Sr=203,wr=204,Er=205,Ar=206,Tr=207,Mr=208,Ir=209,Pr=210,kr=0,Lr=1,Cr=2,Rr=3,Dr=4,Nr=5,Br=6,Or=7,Fr=0,zr=1,Vr=2,Ur=0,Gr=1,Hr=2,Yr=3,jr=4,Wr=5,Xr=301,Zr=302,qr=303,Qr=304,Jr=306,Kr=307,$r=1e3,ta=1001,ea=1002,na=1003,ia=1004,ra=1005,aa=1006,oa=1007,sa=1008,la=1009,ua=1010,ca=1011,fa=1012,da=1013,ha=1014,pa=1015,va=1016,ma=1017,ga=1018,_a=1020,ya=1021,xa=1022,ba=1023,Sa=1024,wa=1025,Ea=1026,Aa=1027,Ta=1028,Ma=1029,Ia=1030,Pa=1031,ka=1033,La=33776,Ca=33777,Ra=33778,Da=33779,Na=35840,Ba=35841,Oa=35842,Fa=35843,za=36196,Va=37492,Ua=37496,Ga=37808,Ha=37809,Ya=37810,ja=37811,Wa=37812,Xa=37813,Za=37814,qa=37815,Qa=37816,Ja=37817,Ka=37818,$a=37819,to=37820,eo=37821,no=36492,io=2201,ro=2400,ao=2500,oo=3e3,so=3001,lo=3200,uo=3201,co=0,fo=1,ho=7680,po=519,vo=35044,mo=35048,go="300 es",_o=1035,yo=function(){function t(){(0,rt.default)(this,t)}return(0,ot.default)(t,[{key:"addEventListener",value:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}},{key:"hasEventListener",value:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}},{key:"removeEventListener",value:function(t,e){if(void 0!==this._listeners){var n=this._listeners,i=n[t];if(void 0!==i){var r=i.indexOf(e);-1!==r&&i.splice(r,1)}}}},{key:"dispatchEvent",value:function(t){if(void 0!==this._listeners){var e=this._listeners,n=e[t.type];if(void 0!==n){t.target=this;for(var i=n.slice(0),r=0,a=i.length;r<a;r++)i[r].call(this,t);t.target=null}}}}]),t}(),xo=[],bo=0;bo<256;bo++)xo[bo]=(bo<16?"0":"")+bo.toString(16);var So=1234567,wo=Math.PI/180,Eo=180/Math.PI,Ao=(0,nt.default)({__proto__:null,DEG2RAD:wo,RAD2DEG:Eo,generateUUID:e,clamp:n,euclideanModulo:i,mapLinear:r,inverseLerp:a,lerp:o,damp:s,pingpong:u,smoothstep:f,smootherstep:h,randInt:v,randFloat:g,randFloatSpread:y,seededRandom:b,degToRad:w,radToDeg:A,isPowerOfTwo:M,ceilPowerOfTwo:P,floorPowerOfTwo:L,setQuaternionFromProperEuler:R}),To=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,rt.default)(this,t),this.x=e,this.y=n}return(0,ot.default)(t,[{key:"set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setComponent",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this}},{key:"add",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this}},{key:"addVectors",value:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}},{key:"addScaledVector",value:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}},{key:"sub",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}},{key:"subScalar",value:function(t){return this.x-=t,this.y-=t,this}},{key:"subVectors",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}},{key:"multiply",value:function(t){return this.x*=t.x,this.y*=t.y,this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this}},{key:"divide",value:function(t){return this.x/=t.x,this.y/=t.y,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"applyMatrix3",value:function(t){var e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}},{key:"clamp",value:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}},{key:"clampScalar",value:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}},{key:"clampLength",value:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"cross",value:function(t){return this.x*t.y-this.y*t.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){return Math.atan2(-this.y,-this.x)+Math.PI}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"distanceToSquared",value:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n}},{key:"manhattanDistanceTo",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}},{key:"lerpVectors",value:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t}},{key:"fromBufferAttribute",value:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}},{key:"rotateAround",value:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,a=this.y-t.y;return this.x=r*n-a*i+t.x,this.y=r*i+a*n+t.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:tt.default,value:K.default.mark(function t(){return K.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.x;case 2:return t.next=4,this.y;case 4:case"end":return t.stop()}},t,this)})},{key:"width",get:function(){return this.x},set:function(t){this.x=t}},{key:"height",get:function(){return this.y},set:function(t){this.y=t}}]),t}();To.prototype.isVector2=!0;var Mo=function(){function t(){(0,rt.default)(this,t),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}return(0,ot.default)(t,[{key:"set",value:function(t,e,n,i,r,a,o,s,l){var u=this.elements;return u[0]=t,u[1]=i,u[2]=o,u[3]=e,u[4]=r,u[5]=s,u[6]=n,u[7]=a,u[8]=l,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}},{key:"extractBasis",value:function(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}},{key:"multiply",value:function(t){return this.multiplyMatrices(this,t)}},{key:"premultiply",value:function(t){return this.multiplyMatrices(t,this)}},{key:"multiplyMatrices",value:function(t,e){var n=t.elements,i=e.elements,r=this.elements,a=n[0],o=n[3],s=n[6],l=n[1],u=n[4],c=n[7],f=n[2],d=n[5],h=n[8],p=i[0],v=i[3],m=i[6],g=i[1],_=i[4],y=i[7],x=i[2],b=i[5],S=i[8];return r[0]=a*p+o*g+s*x,r[3]=a*v+o*_+s*b,r[6]=a*m+o*y+s*S,r[1]=l*p+u*g+c*x,r[4]=l*v+u*_+c*b,r[7]=l*m+u*y+c*S,r[2]=f*p+d*g+h*x,r[5]=f*v+d*_+h*b,r[8]=f*m+d*y+h*S,this}},{key:"multiplyScalar",value:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}},{key:"determinant",value:function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],s=t[6],l=t[7],u=t[8];return e*a*u-e*o*l-n*r*u+n*o*s+i*r*l-i*a*s}},{key:"invert",value:function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],s=t[6],l=t[7],u=t[8],c=u*a-o*l,f=o*s-u*r,d=l*r-a*s,h=e*c+n*f+i*d;if(0===h)return this.set(0,0,0,0,0,0,0,0,0);var p=1/h;return t[0]=c*p,t[1]=(i*l-u*n)*p,t[2]=(o*n-i*a)*p,t[3]=f*p,t[4]=(u*e-i*s)*p,t[5]=(i*r-o*e)*p,t[6]=d*p,t[7]=(n*s-l*e)*p,t[8]=(a*e-n*r)*p,this}},{key:"transpose",value:function(){var t=void 0,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}},{key:"getNormalMatrix",value:function(t){return this.setFromMatrix4(t).invert().transpose()}},{key:"transposeIntoArray",value:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}},{key:"setUvTransform",value:function(t,e,n,i,r,a,o){var s=Math.cos(r),l=Math.sin(r);return this.set(n*s,n*l,-n*(s*a+l*o)+a+t,-i*l,i*s,-i*(-l*a+s*o)+o+e,0,0,1),this}},{key:"scale",value:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}},{key:"rotate",value:function(t){var e=Math.cos(t),n=Math.sin(t),i=this.elements,r=i[0],a=i[3],o=i[6],s=i[1],l=i[4],u=i[7];return i[0]=e*r+n*s,i[3]=e*a+n*l,i[6]=e*o+n*u,i[1]=-n*r+e*s,i[4]=-n*a+e*l,i[7]=-n*o+e*u,this}},{key:"translate",value:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}},{key:"equals",value:function(t){for(var e=this.elements,n=t.elements,i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=t[n+e];return this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),t}();Mo.prototype.isMatrix3=!0;var Io={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array},Po={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ko={h:0,s:0,l:0},Lo={h:0,s:0,l:0},Co=function(){function t(e,n,i){return(0,rt.default)(this,t),void 0===n&&void 0===i?this.set(e):this.setRGB(e,n,i)}return(0,ot.default)(t,[{key:"set",value:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}},{key:"setScalar",value:function(t){return this.r=t,this.g=t,this.b=t,this}},{key:"setHex",value:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}},{key:"setRGB",value:function(t,e,n){return this.r=t,this.g=e,this.b=n,this}},{key:"setHSL",value:function(t,e,r){if(t=i(t,1),e=n(e,0,1),r=n(r,0,1),0===e)this.r=this.g=this.b=r;else{var a=r<=.5?r*(1+e):r+e-r*e,o=2*r-a;this.r=U(o,a,t+1/3),this.g=U(o,a,t),this.b=U(o,a,t-1/3)}return this}},{key:"setStyle",value:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n=void 0;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){var i=void 0,r=n[1],a=n[2];switch(r){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,e(i[4]),this;if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,e(i[4]),this;break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){var o=parseFloat(i[1])/360,s=parseInt(i[2],10)/100,l=parseInt(i[3],10)/100;return e(i[4]),this.setHSL(o,s,l)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(t)){var u=n[1],c=u.length;if(3===c)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}},{key:"setColorName",value:function(t){var e=Po[t.toLowerCase()];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}},{key:"copySRGBToLinear",value:function(t){return this.r=H(t.r),this.g=H(t.g),this.b=H(t.b),this}},{key:"copyLinearToSRGB",value:function(t){return this.r=j(t.r),this.g=j(t.g),this.b=j(t.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}},{key:"getHexString",value:function(){return("000000"+this.getHex().toString(16)).slice(-6)}},{key:"getHSL",value:function(t){var e=this.r,n=this.g,i=this.b,r=Math.max(e,n,i),a=Math.min(e,n,i),o=void 0,s=void 0,l=(a+r)/2;if(a===r)o=0,s=0;else{var u=r-a;switch(s=l<=.5?u/(r+a):u/(2-r-a),r){case e:o=(n-i)/u+(n<i?6:0);break;case n:o=(i-e)/u+2;break;case i:o=(e-n)/u+4}o/=6}return t.h=o,t.s=s,t.l=l,t}},{key:"getStyle",value:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}},{key:"offsetHSL",value:function(t,e,n){return this.getHSL(ko),ko.h+=t,ko.s+=e,ko.l+=n,this.setHSL(ko.h,ko.s,ko.l),this}},{key:"add",value:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}},{key:"addColors",value:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}},{key:"addScalar",value:function(t){return this.r+=t,this.g+=t,this.b+=t,this}},{key:"sub",value:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}},{key:"multiply",value:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}},{key:"multiplyScalar",value:function(t){return this.r*=t,this.g*=t,this.b*=t,this}},{key:"lerp",value:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}},{key:"lerpColors",value:function(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}},{key:"lerpHSL",value:function(t,e){this.getHSL(ko),t.getHSL(Lo);var n=o(ko.h,Lo.h,e),i=o(ko.s,Lo.s,e),r=o(ko.l,Lo.l,e);return this.setHSL(n,i,r),this}},{key:"equals",value:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}},{key:"fromBufferAttribute",value:function(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}},{key:"toJSON",value:function(){return this.getHex()}}]),t}();Co.NAMES=Po,Co.prototype.isColor=!0,Co.prototype.r=1,Co.prototype.g=1,Co.prototype.b=1;var Ro=void 0,Do=function(){function t(){(0,rt.default)(this,t)}return(0,ot.default)(t,null,[{key:"getDataURL",value:function(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;var e=void 0;if(t instanceof HTMLCanvasElement)e=t;else{void 0===Ro&&(Ro=z("canvas")),Ro.width=t.width,Ro.height=t.height;var n=Ro.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=Ro}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}},{key:"sRGBToLinear",value:function(t){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){var e=z("canvas");e.width=t.width,e.height=t.height;var n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);for(var i=n.getImageData(0,0,t.width,t.height),r=i.data,a=0;a<r.length;a++)r[a]=255*H(r[a]/255);return n.putImageData(i,0,0),e}if(t.data){for(var o=t.data.slice(0),s=0;s<o.length;s++)o instanceof Uint8Array||o instanceof Uint8ClampedArray?o[s]=Math.floor(255*H(o[s]/255)):o[s]=H(o[s]);return{data:o,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}]),t}(),No=0,Bo=function(t){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ta,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ta,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:aa,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:sa,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ba,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:la,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:oo;(0,rt.default)(this,n);var d=(0,Z.default)(this,(n.__proto__||(0,W.default)(n)).call(this));return Object.defineProperty(d,"id",{value:No++}),d.uuid=e(),d.name="",d.image=t,d.mipmaps=[],d.mapping=i,d.wrapS=r,d.wrapT=a,d.magFilter=o,d.minFilter=s,d.anisotropy=c,d.format=l,d.internalFormat=null,d.type=u,d.offset=new To(0,0),d.repeat=new To(1,1),d.center=new To(0,0),d.rotation=0,d.matrixAutoUpdate=!0,d.matrix=new Mo,d.generateMipmaps=!0,d.premultiplyAlpha=!1,d.flipY=!0,d.unpackAlignment=4,d.encoding=f,d.userData={},d.version=0,d.onUpdate=null,d.isRenderTargetTexture=!1,d.needsPMREMUpdate=!1,d}return(0,Q.default)(n,t),(0,ot.default)(n,[{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse((0,Y.default)(t.userData)),this}},{key:"toJSON",value:function(t){var n=void 0===t||"string"==typeof t;if(!n&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=e()),!n&&void 0===t.images[r.uuid]){var a=void 0;if(Array.isArray(r)){a=[];for(var o=0,s=r.length;o<s;o++)r[o].isDataTexture?a.push(X(r[o].image)):a.push(X(r[o]))}else a=X(r);t.images[r.uuid]={uuid:r.uuid,url:a}}i.image=r.uuid}return"{}"!==(0,Y.default)(this.userData)&&(i.userData=this.userData),n||(t.textures[this.uuid]=i),i}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case $r:t.x=t.x-Math.floor(t.x);break;case ta:t.x=t.x<0?0:1;break;case ea:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case $r:t.y=t.y-Math.floor(t.y);break;case ta:t.y=t.y<0?0:1;break;case ea:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}},{key:"needsUpdate",set:function(t){!0===t&&this.version++}}]),n}(yo);Bo.DEFAULT_IMAGE=void 0,Bo.DEFAULT_MAPPING=300,Bo.prototype.isTexture=!0;var Oo=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,rt.default)(this,t),this.x=e,this.y=n,this.z=i,this.w=r}return(0,ot.default)(t,[{key:"set",value:function(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setZ",value:function(t){return this.z=t,this}},{key:"setW",value:function(t){return this.w=t,this}},{key:"setComponent",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}},{key:"add",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}},{key:"addVectors",value:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}},{key:"addScaledVector",value:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}},{key:"sub",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}},{key:"subScalar",value:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}},{key:"subVectors",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}},{key:"multiply",value:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}},{key:"applyMatrix4",value:function(t){var e=this.x,n=this.y,i=this.z,r=this.w,a=t.elements;return this.x=a[0]*e+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*e+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*e+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*e+a[7]*n+a[11]*i+a[15]*r,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"setAxisAngleFromQuaternion",value:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}},{key:"setAxisAngleFromRotationMatrix",value:function(t){var e=void 0,n=void 0,i=void 0,r=void 0,a=t.elements,o=a[0],s=a[4],l=a[8],u=a[1],c=a[5],f=a[9],d=a[2],h=a[6],p=a[10];if(Math.abs(s-u)<.01&&Math.abs(l-d)<.01&&Math.abs(f-h)<.01){if(Math.abs(s+u)<.1&&Math.abs(l+d)<.1&&Math.abs(f+h)<.1&&Math.abs(o+c+p-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var v=(o+1)/2,m=(c+1)/2,g=(p+1)/2,_=(s+u)/4,y=(l+d)/4,x=(f+h)/4;return v>m&&v>g?v<.01?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(v),i=_/n,r=y/n):m>g?m<.01?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(m),n=_/i,r=x/i):g<.01?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(g),n=y/r,i=x/r),this.set(n,i,r,e),this}var b=Math.sqrt((h-f)*(h-f)+(l-d)*(l-d)+(u-s)*(u-s));return Math.abs(b)<.001&&(b=1),this.x=(h-f)/b,this.y=(l-d)/b,this.z=(u-s)/b,this.w=Math.acos((o+c+p-1)/2),this}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}},{key:"clamp",value:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}},{key:"clampScalar",value:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}},{key:"clampLength",value:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}},{key:"lerpVectors",value:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}},{key:"fromBufferAttribute",value:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:tt.default,value:K.default.mark(function t(){return K.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.x;case 2:return t.next=4,this.y;case 4:return t.next=6,this.z;case 6:return t.next=8,this.w;case 8:case"end":return t.stop()}},t,this)})},{key:"width",get:function(){return this.z},set:function(t){this.z=t}},{key:"height",get:function(){return this.w},set:function(t){this.w=t}}]),t}();Oo.prototype.isVector4=!0;var Fo=function(t){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,rt.default)(this,e);var r=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return r.width=t,r.height=n,r.depth=1,r.scissor=new Oo(0,0,t,n),r.scissorTest=!1,r.viewport=new Oo(0,0,t,n),r.texture=new Bo(void 0,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),r.texture.isRenderTargetTexture=!0,r.texture.image={width:t,height:n,depth:1},r.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,r.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,r.texture.minFilter=void 0!==i.minFilter?i.minFilter:aa,r.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,r.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,r.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,r}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"setTexture",value:function(t){t.image={width:this.width,height:this.height,depth:this.depth},this.texture=t}},{key:"setSize",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===t&&this.height===e&&this.depth===n||(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.image=(0,G.default)({},t.texture.image),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),e}(yo);Fo.prototype.isWebGLRenderTarget=!0;var zo=function(t){function e(t,n,i){(0,rt.default)(this,e);var r=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t,n)),a=r.texture;r.texture=[];for(var o=0;o<i;o++)r.texture[o]=a.clone();return r}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"setSize",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(var i=0,r=this.texture.length;i<r;i++)this.texture[i].image.width=t,this.texture[i].image.height=e,this.texture[i].image.depth=n;this.dispose()}return this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e),this}},{key:"copy",value:function(t){this.dispose(),this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this.texture.length=0;for(var e=0,n=t.texture.length;e<n;e++)this.texture[e]=t.texture[e].clone();return this}}]),e}(Fo);zo.prototype.isWebGLMultipleRenderTargets=!0;var Vo=function(t){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,rt.default)(this,e);var r=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t,n,i));return r.samples=4,r.ignoreDepthForMultisampleCopy=void 0===i.ignoreDepth||i.ignoreDepth,r.useRenderToTexture=void 0!==i.useRenderToTexture&&i.useRenderToTexture,r.useRenderbuffer=!1===r.useRenderToTexture,r}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.samples=t.samples,this.useRenderToTexture=t.useRenderToTexture,this.useRenderbuffer=t.useRenderbuffer,this}}]),e}(Fo);Vo.prototype.isWebGLMultisampleRenderTarget=!0;var Uo=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,rt.default)(this,t),this._x=e,this._y=n,this._z=i,this._w=r}return(0,ot.default)(t,[{key:"set",value:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,i=t._y,r=t._z,a=t._order,o=Math.cos,s=Math.sin,l=o(n/2),u=o(i/2),c=o(r/2),f=s(n/2),d=s(i/2),h=s(r/2);switch(a){case"XYZ":this._x=f*u*c+l*d*h,this._y=l*d*c-f*u*h,this._z=l*u*h+f*d*c,this._w=l*u*c-f*d*h;break;case"YXZ":this._x=f*u*c+l*d*h,this._y=l*d*c-f*u*h,this._z=l*u*h-f*d*c,this._w=l*u*c+f*d*h;break;case"ZXY":this._x=f*u*c-l*d*h,this._y=l*d*c+f*u*h,this._z=l*u*h+f*d*c,this._w=l*u*c-f*d*h;break;case"ZYX":this._x=f*u*c-l*d*h,this._y=l*d*c+f*u*h,this._z=l*u*h-f*d*c,this._w=l*u*c+f*d*h;break;case"YZX":this._x=f*u*c+l*d*h,this._y=l*d*c+f*u*h,this._z=l*u*h-f*d*c,this._w=l*u*c-f*d*h;break;case"XZY":this._x=f*u*c-l*d*h,this._y=l*d*c-f*u*h,this._z=l*u*h+f*d*c,this._w=l*u*c+f*d*h;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==e&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(t,e){var n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(t){var e=t.elements,n=e[0],i=e[4],r=e[8],a=e[1],o=e[5],s=e[9],l=e[2],u=e[6],c=e[10],f=n+o+c;if(f>0){var d=.5/Math.sqrt(f+1);this._w=.25/d,this._x=(u-s)*d,this._y=(r-l)*d,this._z=(a-i)*d}else if(n>o&&n>c){var h=2*Math.sqrt(1+n-o-c);this._w=(u-s)/h,this._x=.25*h,this._y=(i+a)/h,this._z=(r+l)/h}else if(o>c){var p=2*Math.sqrt(1+o-n-c);this._w=(r-l)/p,this._x=(i+a)/p,this._y=.25*p,this._z=(s+u)/p}else{var v=2*Math.sqrt(1+c-n-o);this._w=(a-i)/v,this._x=(r+l)/v,this._y=(s+u)/v,this._z=.25*v}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(t,e){var n=t.dot(e)+1;return n<F.default?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(t){return 2*Math.acos(Math.abs(n(this.dot(t),-1,1)))}},{key:"rotateTowards",value:function(t,e){var n=this.angleTo(t);if(0===n)return this;var i=Math.min(1,e/n);return this.slerp(t,i),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}},{key:"multiply",value:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}},{key:"premultiply",value:function(t){return this.multiplyQuaternions(t,this)}},{key:"multiplyQuaternions",value:function(t,e){var n=t._x,i=t._y,r=t._z,a=t._w,o=e._x,s=e._y,l=e._z,u=e._w;return this._x=n*u+a*o+i*l-r*s,this._y=i*u+a*s+r*o-n*l,this._z=r*u+a*l+n*s-i*o,this._w=a*u-n*o-i*s-r*l,this._onChangeCallback(),this}},{key:"slerp",value:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,i=this._y,r=this._z,a=this._w,o=a*t._w+n*t._x+i*t._y+r*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=a,this._x=n,this._y=i,this._z=r,this;var s=1-o*o;if(s<=F.default){var l=1-e;return this._w=l*a+e*this._w,this._x=l*n+e*this._x,this._y=l*i+e*this._y,this._z=l*r+e*this._z,this.normalize(),this._onChangeCallback(),this}var u=Math.sqrt(s),c=Math.atan2(u,o),f=Math.sin((1-e)*c)/u,d=Math.sin(e*c)/u;return this._w=a*f+this._w*d,this._x=n*f+this._x*d,this._y=i*f+this._y*d,this._z=r*f+this._z*d,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(t,e,n){return this.copy(t).slerp(e,n)}},{key:"random",value:function(){var t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(e*Math.cos(i),n*Math.sin(r),n*Math.cos(r),e*Math.sin(i))}},{key:"equals",value:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}},{key:"fromBufferAttribute",value:function(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}},{key:"_onChange",value:function(t){return this._onChangeCallback=t,this}},{key:"_onChangeCallback",value:function(){}},{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}],[{key:"slerp",value:function(t,e,n,i){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(t,e,i)}},{key:"slerpFlat",value:function(t,e,n,i,r,a,o){var s=n[i+0],l=n[i+1],u=n[i+2],c=n[i+3],f=r[a+0],d=r[a+1],h=r[a+2],p=r[a+3];if(0===o)return t[e+0]=s,t[e+1]=l,t[e+2]=u,void(t[e+3]=c);if(1===o)return t[e+0]=f,t[e+1]=d,t[e+2]=h,void(t[e+3]=p);if(c!==p||s!==f||l!==d||u!==h){var v=1-o,m=s*f+l*d+u*h+c*p,g=m>=0?1:-1,_=1-m*m;if(_>F.default){var y=Math.sqrt(_),x=Math.atan2(y,m*g);v=Math.sin(v*x)/y,o=Math.sin(o*x)/y}var b=o*g;if(s=s*v+f*b,l=l*v+d*b,u=u*v+h*b,c=c*v+p*b,v===1-o){var S=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=S,l*=S,u*=S,c*=S}}t[e]=s,t[e+1]=l,t[e+2]=u,t[e+3]=c}},{key:"multiplyQuaternionsFlat",value:function(t,e,n,i,r,a){var o=n[i],s=n[i+1],l=n[i+2],u=n[i+3],c=r[a],f=r[a+1],d=r[a+2],h=r[a+3];return t[e]=o*h+u*c+s*d-l*f,t[e+1]=s*h+u*f+l*c-o*d,t[e+2]=l*h+u*d+o*f-s*c,t[e+3]=u*h-o*c-s*f-l*d,t}}]),t}();Uo.prototype.isQuaternion=!0;var Go=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,rt.default)(this,t),this.x=e,this.y=n,this.z=i}return(0,ot.default)(t,[{key:"set",value:function(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this.z=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setZ",value:function(t){return this.z=t,this}},{key:"setComponent",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}},{key:"add",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this.z+=t,this}},{key:"addVectors",value:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}},{key:"addScaledVector",value:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}},{key:"sub",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}},{key:"subScalar",value:function(t){return this.x-=t,this.y-=t,this.z-=t,this}},{key:"subVectors",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}},{key:"multiply",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this}},{key:"multiplyVectors",value:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}},{key:"applyEuler",value:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Yo.setFromEuler(t))}},{key:"applyAxisAngle",value:function(t,e){return this.applyQuaternion(Yo.setFromAxisAngle(t,e))}},{key:"applyMatrix3",value:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this}},{key:"applyNormalMatrix",value:function(t){return this.applyMatrix3(t).normalize()}},{key:"applyMatrix4",value:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements,a=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*a,this}},{key:"applyQuaternion",value:function(t){var e=this.x,n=this.y,i=this.z,r=t.x,a=t.y,o=t.z,s=t.w,l=s*e+a*i-o*n,u=s*n+o*e-r*i,c=s*i+r*n-a*e,f=-r*e-a*n-o*i;return this.x=l*s+f*-r+u*-o-c*-a,this.y=u*s+f*-a+c*-r-l*-o,this.z=c*s+f*-o+l*-a-u*-r,this}},{key:"project",value:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}},{key:"unproject",value:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}},{key:"transformDirection",value:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()}},{key:"divide",value:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}},{key:"clamp",value:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}},{key:"clampScalar",value:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}},{key:"clampLength",value:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}},{key:"lerpVectors",value:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}},{key:"cross",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}},{key:"crossVectors",value:function(t,e){var n=t.x,i=t.y,r=t.z,a=e.x,o=e.y,s=e.z;return this.x=i*s-r*o,this.y=r*a-n*s,this.z=n*o-i*a,this}},{key:"projectOnVector",value:function(t){var e=t.lengthSq();if(0===e)return this.set(0,0,0);var n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}},{key:"projectOnPlane",value:function(t){return Ho.copy(this).projectOnVector(t),this.sub(Ho)}},{key:"reflect",value:function(t){return this.sub(Ho.copy(t).multiplyScalar(2*this.dot(t)))}},{key:"angleTo",value:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;var i=this.dot(t)/e;return Math.acos(n(i,-1,1))}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"distanceToSquared",value:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i}},{key:"manhattanDistanceTo",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}},{key:"setFromSpherical",value:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}},{key:"setFromSphericalCoords",value:function(t,e,n){var i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this}},{key:"setFromCylindrical",value:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}},{key:"setFromCylindricalCoords",value:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}},{key:"setFromMatrixPosition",value:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}},{key:"setFromMatrixScale",value:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this}},{key:"setFromMatrixColumn",value:function(t,e){return this.fromArray(t.elements,4*e)}},{key:"setFromMatrix3Column",value:function(t,e){return this.fromArray(t.elements,3*e)}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}},{key:"fromBufferAttribute",value:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-Math.pow(t,2));return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}},{key:tt.default,value:K.default.mark(function t(){return K.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.x;case 2:return t.next=4,this.y;case 4:return t.next=6,this.z;case 6:case"end":return t.stop()}},t,this)})}]),t}();Go.prototype.isVector3=!0;var Ho=new Go,Yo=new Uo,jo=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Go(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Go(-1/0,-1/0,-1/0);(0,rt.default)(this,t),this.min=e,this.max=n}return(0,ot.default)(t,[{key:"set",value:function(t,e){return this.min.copy(t),this.max.copy(e),this}},{key:"setFromArray",value:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,l=t.length;s<l;s+=3){var u=t[s],c=t[s+1],f=t[s+2];u<e&&(e=u),c<n&&(n=c),f<i&&(i=f),u>r&&(r=u),c>a&&(a=c),f>o&&(o=f)}return this.min.set(e,n,i),this.max.set(r,a,o),this}},{key:"setFromBufferAttribute",value:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,l=t.count;s<l;s++){var u=t.getX(s),c=t.getY(s),f=t.getZ(s);u<e&&(e=u),c<n&&(n=c),f<i&&(i=f),u>r&&(r=u),c>a&&(a=c),f>o&&(o=f)}return this.min.set(e,n,i),this.max.set(r,a,o),this}},{key:"setFromPoints",value:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}},{key:"setFromCenterAndSize",value:function(t,e){var n=Xo.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}},{key:"setFromObject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(t,e)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.min.copy(t.min),this.max.copy(t.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(t){return this.min.min(t),this.max.max(t),this}},{key:"expandByVector",value:function(t){return this.min.sub(t),this.max.add(t),this}},{key:"expandByScalar",value:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this}},{key:"expandByObject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.updateWorldMatrix(!1,!1);var n=t.geometry;if(void 0!==n)if(e&&void 0!=n.attributes&&void 0!==n.attributes.position)for(var i=n.attributes.position,r=0,a=i.count;r<a;r++)Xo.fromBufferAttribute(i,r).applyMatrix4(t.matrixWorld),this.expandByPoint(Xo);else null===n.boundingBox&&n.computeBoundingBox(),Zo.copy(n.boundingBox),Zo.applyMatrix4(t.matrixWorld),this.union(Zo);for(var o=t.children,s=0,l=o.length;s<l;s++)this.expandByObject(o[s],e);return this}},{key:"containsPoint",value:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}},{key:"containsBox",value:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}},{key:"getParameter",value:function(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}},{key:"intersectsSphere",value:function(t){return this.clampPoint(t.center,Xo),Xo.distanceToSquared(t.center)<=t.radius*t.radius}},{key:"intersectsPlane",value:function(t){var e=void 0,n=void 0;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}},{key:"intersectsTriangle",value:function(t){if(this.isEmpty())return!1;this.getCenter(es),ns.subVectors(this.max,es),qo.subVectors(t.a,es),Qo.subVectors(t.b,es),Jo.subVectors(t.c,es),Ko.subVectors(Qo,qo),$o.subVectors(Jo,Qo),ts.subVectors(qo,Jo);var e=[0,-Ko.z,Ko.y,0,-$o.z,$o.y,0,-ts.z,ts.y,Ko.z,0,-Ko.x,$o.z,0,-$o.x,ts.z,0,-ts.x,-Ko.y,Ko.x,0,-$o.y,$o.x,0,-ts.y,ts.x,0];return!!q(e,qo,Qo,Jo,ns)&&(e=[1,0,0,0,1,0,0,0,1],!!q(e,qo,Qo,Jo,ns)&&(is.crossVectors(Ko,$o),e=[is.x,is.y,is.z],q(e,qo,Qo,Jo,ns)))}},{key:"clampPoint",value:function(t,e){return e.copy(t).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(t){return Xo.copy(t).clamp(this.min,this.max).sub(t).length()}},{key:"getBoundingSphere",value:function(t){return this.getCenter(t.center),t.radius=.5*this.getSize(Xo).length(),t}},{key:"intersect",value:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(t){return this.min.min(t.min),this.max.max(t.max),this}},{key:"applyMatrix4",value:function(t){return this.isEmpty()?this:(Wo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Wo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Wo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Wo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Wo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Wo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Wo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Wo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Wo),this)}},{key:"translate",value:function(t){return this.min.add(t),this.max.add(t),this}},{key:"equals",value:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}]),t}();jo.prototype.isBox3=!0;var Wo=[new Go,new Go,new Go,new Go,new Go,new Go,new Go,new Go],Xo=new Go,Zo=new jo,qo=new Go,Qo=new Go,Jo=new Go,Ko=new Go,$o=new Go,ts=new Go,es=new Go,ns=new Go,is=new Go,rs=new Go,as=new jo,os=new Go,ss=new Go,ls=new Go,us=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Go,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;(0,rt.default)(this,t),this.center=e,this.radius=n}return(0,ot.default)(t,[{key:"set",value:function(t,e){return this.center.copy(t),this.radius=e,this}},{key:"setFromPoints",value:function(t,e){var n=this.center;void 0!==e?n.copy(e):as.setFromPoints(t).getCenter(n);for(var i=0,r=0,a=t.length;r<a;r++)i=Math.max(i,n.distanceToSquared(t[r]));return this.radius=Math.sqrt(i),this}},{key:"copy",value:function(t){return this.center.copy(t.center),this.radius=t.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(t){return t.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}},{key:"intersectsBox",value:function(t){return t.intersectsSphere(this)}},{key:"intersectsPlane",value:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(t,e){var n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}},{key:"getBoundingBox",value:function(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}},{key:"applyMatrix4",value:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}},{key:"translate",value:function(t){return this.center.add(t),this}},{key:"expandByPoint",value:function(t){ls.subVectors(t,this.center);var e=ls.lengthSq();if(e>this.radius*this.radius){var n=Math.sqrt(e),i=.5*(n-this.radius);this.center.add(ls.multiplyScalar(i/n)),this.radius+=i}return this}},{key:"union",value:function(t){return!0===this.center.equals(t.center)?ss.set(0,0,1).multiplyScalar(t.radius):ss.subVectors(t.center,this.center).normalize().multiplyScalar(t.radius),this.expandByPoint(os.copy(t.center).add(ss)),this.expandByPoint(os.copy(t.center).sub(ss)),this}},{key:"equals",value:function(t){return t.center.equals(this.center)&&t.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}(),cs=new Go,fs=new Go,ds=new Go,hs=new Go,ps=new Go,vs=new Go,ms=new Go,gs=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Go,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Go(0,0,-1);(0,rt.default)(this,t),this.origin=e,this.direction=n}return(0,ot.default)(t,[{key:"set",value:function(t,e){return this.origin.copy(t),this.direction.copy(e),this}},{key:"copy",value:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}},{key:"at",value:function(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}},{key:"lookAt",value:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this}},{key:"recast",value:function(t){return this.origin.copy(this.at(t,cs)),this}},{key:"closestPointToPoint",value:function(t,e){e.subVectors(t,this.origin);var n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}},{key:"distanceToPoint",value:function(t){return Math.sqrt(this.distanceSqToPoint(t))}},{key:"distanceSqToPoint",value:function(t){var e=cs.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(cs.copy(this.direction).multiplyScalar(e).add(this.origin),cs.distanceToSquared(t))}},{key:"distanceSqToSegment",value:function(t,e,n,i){fs.copy(t).add(e).multiplyScalar(.5),ds.copy(e).sub(t).normalize(),hs.copy(this.origin).sub(fs);var r=.5*t.distanceTo(e),a=-this.direction.dot(ds),o=hs.dot(this.direction),s=-hs.dot(ds),l=hs.lengthSq(),u=Math.abs(1-a*a),c=void 0,f=void 0,d=void 0,h=void 0;if(u>0)if(c=a*s-o,f=a*o-s,h=r*u,c>=0)if(f>=-h)if(f<=h){var p=1/u;c*=p,f*=p,d=c*(c+a*f+2*o)+f*(a*c+f+2*s)+l}else f=r,c=Math.max(0,-(a*f+o)),d=-c*c+f*(f+2*s)+l;else f=-r,c=Math.max(0,-(a*f+o)),d=-c*c+f*(f+2*s)+l;else f<=-h?(c=Math.max(0,-(-a*r+o)),f=c>0?-r:Math.min(Math.max(-r,-s),r),d=-c*c+f*(f+2*s)+l):f<=h?(c=0,f=Math.min(Math.max(-r,-s),r),d=f*(f+2*s)+l):(c=Math.max(0,-(a*r+o)),f=c>0?r:Math.min(Math.max(-r,-s),r),d=-c*c+f*(f+2*s)+l);else f=a>0?-r:r,c=Math.max(0,-(a*f+o)),d=-c*c+f*(f+2*s)+l;return n&&n.copy(this.direction).multiplyScalar(c).add(this.origin),i&&i.copy(ds).multiplyScalar(f).add(fs),d}},{key:"intersectSphere",value:function(t,e){cs.subVectors(t.center,this.origin);var n=cs.dot(this.direction),i=cs.dot(cs)-n*n,r=t.radius*t.radius;if(i>r)return null;var a=Math.sqrt(r-i),o=n-a,s=n+a;return o<0&&s<0?null:o<0?this.at(s,e):this.at(o,e)}},{key:"intersectsSphere",value:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}},{key:"distanceToPlane",value:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}},{key:"intersectPlane",value:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}},{key:"intersectsPlane",value:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}},{key:"intersectBox",value:function(t,e){var n=void 0,i=void 0,r=void 0,a=void 0,o=void 0,s=void 0,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,f=this.origin;return l>=0?(n=(t.min.x-f.x)*l,i=(t.max.x-f.x)*l):(n=(t.max.x-f.x)*l,i=(t.min.x-f.x)*l),u>=0?(r=(t.min.y-f.y)*u,a=(t.max.y-f.y)*u):(r=(t.max.y-f.y)*u,a=(t.min.y-f.y)*u),n>a||r>i?null:((r>n||n!==n)&&(n=r),(a<i||i!==i)&&(i=a),c>=0?(o=(t.min.z-f.z)*c,s=(t.max.z-f.z)*c):(o=(t.max.z-f.z)*c,s=(t.min.z-f.z)*c),n>s||o>i?null:((o>n||n!==n)&&(n=o),(s<i||i!==i)&&(i=s),i<0?null:this.at(n>=0?n:i,e)))}},{key:"intersectsBox",value:function(t){return null!==this.intersectBox(t,cs)}},{key:"intersectTriangle",value:function(t,e,n,i,r){ps.subVectors(e,t),vs.subVectors(n,t),ms.crossVectors(ps,vs);var a=this.direction.dot(ms),o=void 0;if(a>0){if(i)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}hs.subVectors(this.origin,t);var s=o*this.direction.dot(vs.crossVectors(hs,vs));if(s<0)return null;var l=o*this.direction.dot(ps.cross(hs));if(l<0)return null;if(s+l>a)return null;var u=-o*hs.dot(ms);return u<0?null:this.at(u/a,r)}},{key:"applyMatrix4",value:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}},{key:"equals",value:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}(),_s=function(){function t(){(0,rt.default)(this,t),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}return(0,ot.default)(t,[{key:"set",value:function(t,e,n,i,r,a,o,s,l,u,c,f,d,h,p,v){var m=this.elements;return m[0]=t,m[4]=e,m[8]=n,m[12]=i,m[1]=r,m[5]=a,m[9]=o,m[13]=s,m[2]=l,m[6]=u,m[10]=c,m[14]=f,m[3]=d,m[7]=h,m[11]=p,m[15]=v,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new t).fromArray(this.elements)}},{key:"copy",value:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}},{key:"copyPosition",value:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}},{key:"setFromMatrix3",value:function(t){var e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(t){var e=this.elements,n=t.elements,i=1/ys.setFromMatrixColumn(t,0).length(),r=1/ys.setFromMatrixColumn(t,1).length(),a=1/ys.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*a,e[9]=n[9]*a,e[10]=n[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}},{key:"makeRotationFromEuler",value:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,i=t.y,r=t.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(i),l=Math.sin(i),u=Math.cos(r),c=Math.sin(r);if("XYZ"===t.order){var f=a*u,d=a*c,h=o*u,p=o*c;e[0]=s*u,e[4]=-s*c,e[8]=l,e[1]=d+h*l,e[5]=f-p*l,e[9]=-o*s,e[2]=p-f*l,e[6]=h+d*l,e[10]=a*s}else if("YXZ"===t.order){var v=s*u,m=s*c,g=l*u,_=l*c;e[0]=v+_*o,e[4]=g*o-m,e[8]=a*l,e[1]=a*c,e[5]=a*u,e[9]=-o,e[2]=m*o-g,e[6]=_+v*o,e[10]=a*s}else if("ZXY"===t.order){var y=s*u,x=s*c,b=l*u,S=l*c;e[0]=y-S*o,e[4]=-a*c,e[8]=b+x*o,e[1]=x+b*o,e[5]=a*u,e[9]=S-y*o,e[2]=-a*l,e[6]=o,e[10]=a*s}else if("ZYX"===t.order){var w=a*u,E=a*c,A=o*u,T=o*c;e[0]=s*u,e[4]=A*l-E,e[8]=w*l+T,e[1]=s*c,e[5]=T*l+w,e[9]=E*l-A,e[2]=-l,e[6]=o*s,e[10]=a*s}else if("YZX"===t.order){var M=a*s,I=a*l,P=o*s,k=o*l;e[0]=s*u,e[4]=k-M*c,e[8]=P*c+I,e[1]=c,e[5]=a*u,e[9]=-o*u,e[2]=-l*u,e[6]=I*c+P,e[10]=M-k*c}else if("XZY"===t.order){var L=a*s,C=a*l,R=o*s,D=o*l;e[0]=s*u,e[4]=-c,e[8]=l*u,e[1]=L*c+D,e[5]=a*u,e[9]=C*c-R,e[2]=R*c-C,e[6]=o*u,e[10]=D*c+L}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(t){return this.compose(bs,t,Ss)}},{key:"lookAt",value:function(t,e,n){var i=this.elements;return As.subVectors(t,e),0===As.lengthSq()&&(As.z=1),As.normalize(),ws.crossVectors(n,As),0===ws.lengthSq()&&(1===Math.abs(n.z)?As.x+=1e-4:As.z+=1e-4,As.normalize(),ws.crossVectors(n,As)),ws.normalize(),Es.crossVectors(As,ws),i[0]=ws.x,i[4]=Es.x,i[8]=As.x,i[1]=ws.y,i[5]=Es.y,i[9]=As.y,i[2]=ws.z,i[6]=Es.z,i[10]=As.z,this}},{key:"multiply",value:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}},{key:"premultiply",value:function(t){return this.multiplyMatrices(t,this)}},{key:"multiplyMatrices",value:function(t,e){var n=t.elements,i=e.elements,r=this.elements,a=n[0],o=n[4],s=n[8],l=n[12],u=n[1],c=n[5],f=n[9],d=n[13],h=n[2],p=n[6],v=n[10],m=n[14],g=n[3],_=n[7],y=n[11],x=n[15],b=i[0],S=i[4],w=i[8],E=i[12],A=i[1],T=i[5],M=i[9],I=i[13],P=i[2],k=i[6],L=i[10],C=i[14],R=i[3],D=i[7],N=i[11],B=i[15];return r[0]=a*b+o*A+s*P+l*R,r[4]=a*S+o*T+s*k+l*D,r[8]=a*w+o*M+s*L+l*N,r[12]=a*E+o*I+s*C+l*B,r[1]=u*b+c*A+f*P+d*R,r[5]=u*S+c*T+f*k+d*D,r[9]=u*w+c*M+f*L+d*N,r[13]=u*E+c*I+f*C+d*B,r[2]=h*b+p*A+v*P+m*R,r[6]=h*S+p*T+v*k+m*D,r[10]=h*w+p*M+v*L+m*N,r[14]=h*E+p*I+v*C+m*B,r[3]=g*b+_*A+y*P+x*R,r[7]=g*S+_*T+y*k+x*D,r[11]=g*w+_*M+y*L+x*N,r[15]=g*E+_*I+y*C+x*B,this}},{key:"multiplyScalar",value:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}},{key:"determinant",value:function(){var t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],a=t[1],o=t[5],s=t[9],l=t[13],u=t[2],c=t[6],f=t[10],d=t[14];return t[3]*(+r*s*c-i*l*c-r*o*f+n*l*f+i*o*d-n*s*d)+t[7]*(+e*s*d-e*l*f+r*a*f-i*a*d+i*l*u-r*s*u)+t[11]*(+e*l*c-e*o*d-r*a*c+n*a*d+r*o*u-n*l*u)+t[15]*(-i*o*u-e*s*c+e*o*f+i*a*c-n*a*f+n*s*u)}},{key:"transpose",value:function(){var t=this.elements,e=void 0;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setPosition",value:function(t,e,n){var i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this}},{key:"invert",value:function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],s=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11],h=t[12],p=t[13],v=t[14],m=t[15],g=c*v*l-p*f*l+p*s*d-o*v*d-c*s*m+o*f*m,_=h*f*l-u*v*l-h*s*d+a*v*d+u*s*m-a*f*m,y=u*p*l-h*c*l+h*o*d-a*p*d-u*o*m+a*c*m,x=h*c*s-u*p*s-h*o*f+a*p*f+u*o*v-a*c*v,b=e*g+n*_+i*y+r*x;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var S=1/b;return t[0]=g*S,t[1]=(p*f*r-c*v*r-p*i*d+n*v*d+c*i*m-n*f*m)*S,t[2]=(o*v*r-p*s*r+p*i*l-n*v*l-o*i*m+n*s*m)*S,t[3]=(c*s*r-o*f*r-c*i*l+n*f*l+o*i*d-n*s*d)*S,t[4]=_*S,t[5]=(u*v*r-h*f*r+h*i*d-e*v*d-u*i*m+e*f*m)*S,t[6]=(h*s*r-a*v*r-h*i*l+e*v*l+a*i*m-e*s*m)*S,t[7]=(a*f*r-u*s*r+u*i*l-e*f*l-a*i*d+e*s*d)*S,t[8]=y*S,t[9]=(h*c*r-u*p*r-h*n*d+e*p*d+u*n*m-e*c*m)*S,t[10]=(a*p*r-h*o*r+h*n*l-e*p*l-a*n*m+e*o*m)*S,t[11]=(u*o*r-a*c*r-u*n*l+e*c*l+a*n*d-e*o*d)*S,t[12]=x*S,t[13]=(u*p*i-h*c*i+h*n*f-e*p*f-u*n*v+e*c*v)*S,t[14]=(h*o*i-a*p*i-h*n*s+e*p*s+a*n*v-e*o*v)*S,t[15]=(a*c*i-u*o*i+u*n*s-e*c*s-a*n*f+e*o*f)*S,this}},{key:"scale",value:function(t){var e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this}},{key:"getMaxScaleOnAxis",value:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))}},{key:"makeTranslation",value:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}},{key:"makeRotationY",value:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=1-n,a=t.x,o=t.y,s=t.z,l=r*a,u=r*o;return this.set(l*a+n,l*o-i*s,l*s+i*o,0,l*o+i*s,u*o+n,u*s-i*a,0,l*s-i*o,u*s+i*a,r*s*s+n,0,0,0,0,1),this}},{key:"makeScale",value:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(t,e,n,i,r,a){return this.set(1,n,r,0,t,1,a,0,e,i,1,0,0,0,0,1),this}},{key:"compose",value:function(t,e,n){var i=this.elements,r=e._x,a=e._y,o=e._z,s=e._w,l=r+r,u=a+a,c=o+o,f=r*l,d=r*u,h=r*c,p=a*u,v=a*c,m=o*c,g=s*l,_=s*u,y=s*c,x=n.x,b=n.y,S=n.z;return i[0]=(1-(p+m))*x,i[1]=(d+y)*x,i[2]=(h-_)*x,i[3]=0,i[4]=(d-y)*b,i[5]=(1-(f+m))*b,i[6]=(v+g)*b,i[7]=0,i[8]=(h+_)*S,i[9]=(v-g)*S,i[10]=(1-(f+p))*S,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}},{key:"decompose",value:function(t,e,n){var i=this.elements,r=ys.set(i[0],i[1],i[2]).length(),a=ys.set(i[4],i[5],i[6]).length(),o=ys.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],xs.copy(this);var s=1/r,l=1/a,u=1/o;return xs.elements[0]*=s,xs.elements[1]*=s,xs.elements[2]*=s,xs.elements[4]*=l,xs.elements[5]*=l,xs.elements[6]*=l,xs.elements[8]*=u,xs.elements[9]*=u,xs.elements[10]*=u,e.setFromRotationMatrix(xs),n.x=r,n.y=a,n.z=o,this}},{key:"makePerspective",value:function(t,e,n,i,r,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*r/(e-t),l=2*r/(n-i),u=(e+t)/(e-t),c=(n+i)/(n-i),f=-(a+r)/(a-r),d=-2*a*r/(a-r);return o[0]=s,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=l,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=f,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}},{key:"makeOrthographic",value:function(t,e,n,i,r,a){var o=this.elements,s=1/(e-t),l=1/(n-i),u=1/(a-r),c=(e+t)*s,f=(n+i)*l,d=(a+r)*u;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-f,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}},{key:"equals",value:function(t){for(var e=this.elements,n=t.elements,i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=t[n+e];return this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}]),t}();_s.prototype.isMatrix4=!0;var ys=new Go,xs=new _s,bs=new Go(0,0,0),Ss=new Go(1,1,1),ws=new Go,Es=new Go,As=new Go,Ts=new _s,Ms=new Uo,Is=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DefaultOrder;(0,rt.default)(this,t),this._x=e,this._y=n,this._z=i,this._order=r}return(0,ot.default)(t,[{key:"set",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=t,this._y=e,this._z=n,this._order=i,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t.elements,a=r[0],o=r[4],s=r[8],l=r[1],u=r[5],c=r[9],f=r[2],d=r[6],h=r[10];switch(e){case"XYZ":this._y=Math.asin(n(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(d,u),this._z=0);break;case"YXZ":this._x=Math.asin(-n(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,h),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-f,a),this._z=0);break;case"ZXY":this._x=Math.asin(n(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-f,h),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,a));break;case"ZYX":this._y=Math.asin(-n(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(n(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-f,a)):(this._x=0,this._y=Math.atan2(s,h));break;case"XZY":this._z=Math.asin(-n(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,u),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===i&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(t,e,n){return Ts.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Ts,e,n)}},{key:"setFromVector3",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(t.x,t.y,t.z,e)}},{key:"reorder",value:function(t){return Ms.setFromEuler(this),this.setFromQuaternion(Ms,t)}},{key:"equals",value:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}},{key:"fromArray",value:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}},{key:"toVector3",value:function(t){return t?t.set(this._x,this._y,this._z):new Go(this._x,this._y,this._z)}},{key:"_onChange",value:function(t){return this._onChangeCallback=t,this}},{key:"_onChangeCallback",value:function(){}},{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}}]),t}();Is.prototype.isEuler=!0,Is.DefaultOrder="XYZ",Is.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var Ps=function(){function t(){(0,rt.default)(this,t),this.mask=1}return(0,ot.default)(t,[{key:"set",value:function(t){this.mask=(1<<t|0)>>>0}},{key:"enable",value:function(t){this.mask|=1<<t|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(t){this.mask^=1<<t|0}},{key:"disable",value:function(t){this.mask&=~(1<<t|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(t){return 0!=(this.mask&t.mask)}},{key:"isEnabled",value:function(t){return 0!=(this.mask&(1<<t|0))}}]),t}(),ks=0,Ls=new Go,Cs=new Uo,Rs=new _s,Ds=new Go,Ns=new Go,Bs=new Go,Os=new Uo,Fs=new Go(1,0,0),zs=new Go(0,1,0),Vs=new Go(0,0,1),Us={type:"added"},Gs={type:"removed"},Hs=function(t){function n(){function t(){s.setFromEuler(o,!1)}function i(){o.setFromQuaternion(s,void 0,!1)}(0,rt.default)(this,n);var r=(0,Z.default)(this,(n.__proto__||(0,W.default)(n)).call(this));Object.defineProperty(r,"id",{value:ks++}),r.uuid=e(),r.name="",r.type="Object3D",r.parent=null,r.children=[],r.up=n.DefaultUp.clone();var a=new Go,o=new Is,s=new Uo,l=new Go(1,1,1);return o._onChange(t),s._onChange(i),(0,B.default)(r,{position:{configurable:!0,enumerable:!0,value:a},rotation:{configurable:!0,enumerable:!0,value:o},quaternion:{configurable:!0,enumerable:!0,value:s},scale:{configurable:!0,enumerable:!0,value:l},modelViewMatrix:{value:new _s},normalMatrix:{value:new Mo}}),r.matrix=new _s,r.matrixWorld=new _s,r.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,r.matrixWorldNeedsUpdate=!1,r.layers=new Ps,r.visible=!0,r.castShadow=!1,r.receiveShadow=!1,r.frustumCulled=!0,r.renderOrder=0,r.animations=[],r.userData={},r}return(0,Q.default)(n,t),(0,ot.default)(n,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(t){return this.quaternion.premultiply(t),this}},{key:"setRotationFromAxisAngle",value:function(t,e){this.quaternion.setFromAxisAngle(t,e)}},{key:"setRotationFromEuler",value:function(t){this.quaternion.setFromEuler(t,!0)}},{key:"setRotationFromMatrix",value:function(t){this.quaternion.setFromRotationMatrix(t)}},{key:"setRotationFromQuaternion",value:function(t){this.quaternion.copy(t)}},{key:"rotateOnAxis",value:function(t,e){return Cs.setFromAxisAngle(t,e),this.quaternion.multiply(Cs),this}},{key:"rotateOnWorldAxis",value:function(t,e){return Cs.setFromAxisAngle(t,e),this.quaternion.premultiply(Cs),this}},{key:"rotateX",value:function(t){return this.rotateOnAxis(Fs,t)}},{key:"rotateY",value:function(t){return this.rotateOnAxis(zs,t)}},{key:"rotateZ",value:function(t){return this.rotateOnAxis(Vs,t)}},{key:"translateOnAxis",value:function(t,e){return Ls.copy(t).applyQuaternion(this.quaternion),this.position.add(Ls.multiplyScalar(e)),this}},{key:"translateX",value:function(t){return this.translateOnAxis(Fs,t)}},{key:"translateY",value:function(t){return this.translateOnAxis(zs,t)}},{key:"translateZ",value:function(t){return this.translateOnAxis(Vs,t)}},{key:"localToWorld",value:function(t){return t.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(t){return t.applyMatrix4(Rs.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(t,e,n){t.isVector3?Ds.copy(t):Ds.set(t,e,n);var i=this.parent;this.updateWorldMatrix(!0,!1),Ns.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Rs.lookAt(Ns,Ds,this.up):Rs.lookAt(Ds,Ns,this.up),this.quaternion.setFromRotationMatrix(Rs),i&&(Rs.extractRotation(i.matrixWorld),Cs.setFromRotationMatrix(Rs),this.quaternion.premultiply(Cs.invert()))}},{key:"add",value:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Us)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}},{key:"remove",value:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var n=this.children.indexOf(t);return-1!==n&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(Gs)),this}},{key:"removeFromParent",value:function(){var t=this.parent;return null!==t&&t.remove(this),this}},{key:"clear",value:function(){for(var t=0;t<this.children.length;t++){var e=this.children[t];e.parent=null,e.dispatchEvent(Gs)}return this.children.length=0,this}},{key:"attach",value:function(t){return this.updateWorldMatrix(!0,!1),Rs.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Rs.multiply(t.parent.matrixWorld)),t.applyMatrix4(Rs),this.add(t),t.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(t){return this.getObjectByProperty("id",t)}},{key:"getObjectByName",value:function(t){return this.getObjectByProperty("name",t)}},{key:"getObjectByProperty",value:function(t,e){if(this[t]===e)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n],a=r.getObjectByProperty(t,e);if(void 0!==a)return a}}},{key:"getWorldPosition",value:function(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ns,t,Bs),t}},{key:"getWorldScale",value:function(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ns,Os,t),t}},{key:"getWorldDirection",value:function(t){this.updateWorldMatrix(!0,!1);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(t){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverse(t)}},{key:"traverseVisible",value:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}}},{key:"traverseAncestors",value:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)}},{key:"updateWorldMatrix",value:function(t,e){var n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var i=this.children,r=0,a=i.length;r<a;r++)i[r].updateWorldMatrix(!1,!0)}},{key:"toJSON",value:function(t){function e(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}function n(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}var i=void 0===t||"string"==typeof t,r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var a={};if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),!0===this.castShadow&&(a.castShadow=!0),!0===this.receiveShadow&&(a.receiveShadow=!0),!1===this.visible&&(a.visible=!1),!1===this.frustumCulled&&(a.frustumCulled=!1),0!==this.renderOrder&&(a.renderOrder=this.renderOrder),"{}"!==(0,Y.default)(this.userData)&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(a.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&&(a.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&(a.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=e(t.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var s=o.shapes;if(Array.isArray(s))for(var l=0,u=s.length;l<u;l++){var c=s[l];e(t.shapes,c)}else e(t.shapes,s)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(e(t.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var f=[],d=0,h=this.material.length;d<h;d++)f.push(e(t.materials,this.material[d]));a.material=f}else a.material=e(t.materials,this.material);if(this.children.length>0){a.children=[];for(var p=0;p<this.children.length;p++)a.children.push(this.children[p].toJSON(t).object)}if(this.animations.length>0){a.animations=[];for(var v=0;v<this.animations.length;v++){var m=this.animations[v];a.animations.push(e(t.animations,m))}}if(i){var g=n(t.geometries),_=n(t.materials),y=n(t.textures),x=n(t.images),b=n(t.shapes),S=n(t.skeletons),w=n(t.animations);g.length>0&&(r.geometries=g),_.length>0&&(r.materials=_),y.length>0&&(r.textures=y),x.length>0&&(r.images=x),b.length>0&&(r.shapes=b),S.length>0&&(r.skeletons=S),w.length>0&&(r.animations=w)}return r.object=a,r}},{key:"clone",value:function(t){return(new this.constructor).copy(this,t)}},{key:"copy",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse((0,Y.default)(t.userData)),!0===e)for(var n=0;n<t.children.length;n++){var i=t.children[n];this.add(i.clone())}return this}}]),n}(yo);Hs.DefaultUp=new Go(0,1,0),Hs.DefaultMatrixAutoUpdate=!0,Hs.prototype.isObject3D=!0;var Ys=new Go,js=new Go,Ws=new Go,Xs=new Go,Zs=new Go,qs=new Go,Qs=new Go,Js=new Go,Ks=new Go,$s=new Go,tl=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Go,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Go,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Go;(0,rt.default)(this,t),this.a=e,this.b=n,this.c=i}return(0,ot.default)(t,[{key:"set",value:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this}},{key:"setFromAttributeAndIndices",value:function(t,e,n,i){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,i),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}},{key:"getArea",value:function(){return Ys.subVectors(this.c,this.b),js.subVectors(this.a,this.b),.5*Ys.cross(js).length()}},{key:"getMidpoint",value:function(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(e){return t.getNormal(this.a,this.b,this.c,e)}},{key:"getPlane",value:function(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(e,n){return t.getBarycoord(e,this.a,this.b,this.c,n)}},{key:"getUV",value:function(e,n,i,r,a){return t.getUV(e,this.a,this.b,this.c,n,i,r,a)}},{key:"containsPoint",value:function(e){return t.containsPoint(e,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(e){return t.isFrontFacing(this.a,this.b,this.c,e)}},{key:"intersectsBox",value:function(t){return t.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(t,e){var n=this.a,i=this.b,r=this.c,a=void 0,o=void 0;Zs.subVectors(i,n),qs.subVectors(r,n),Js.subVectors(t,n);var s=Zs.dot(Js),l=qs.dot(Js);if(s<=0&&l<=0)return e.copy(n);Ks.subVectors(t,i);var u=Zs.dot(Ks),c=qs.dot(Ks);if(u>=0&&c<=u)return e.copy(i);var f=s*c-u*l;if(f<=0&&s>=0&&u<=0)return a=s/(s-u),e.copy(n).addScaledVector(Zs,a);$s.subVectors(t,r);var d=Zs.dot($s),h=qs.dot($s);if(h>=0&&d<=h)return e.copy(r);var p=d*l-s*h;if(p<=0&&l>=0&&h<=0)return o=l/(l-h),e.copy(n).addScaledVector(qs,o);var v=u*h-d*c;if(v<=0&&c-u>=0&&d-h>=0)return Qs.subVectors(r,i),o=(c-u)/(c-u+(d-h)),e.copy(i).addScaledVector(Qs,o);var m=1/(v+p+f);return a=p*m,o=f*m,e.copy(n).addScaledVector(Zs,a).addScaledVector(qs,o)}},{key:"equals",value:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}],[{key:"getNormal",value:function(t,e,n,i){i.subVectors(n,e),Ys.subVectors(t,e),i.cross(Ys);var r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}},{key:"getBarycoord",value:function(t,e,n,i,r){Ys.subVectors(i,e),js.subVectors(n,e),Ws.subVectors(t,e);var a=Ys.dot(Ys),o=Ys.dot(js),s=Ys.dot(Ws),l=js.dot(js),u=js.dot(Ws),c=a*l-o*o;if(0===c)return r.set(-2,-1,-1);var f=1/c,d=(l*s-o*u)*f,h=(a*u-o*s)*f;return r.set(1-d-h,h,d)}},{key:"containsPoint",value:function(t,e,n,i){return this.getBarycoord(t,e,n,i,Xs),Xs.x>=0&&Xs.y>=0&&Xs.x+Xs.y<=1}},{key:"getUV",value:function(t,e,n,i,r,a,o,s){return this.getBarycoord(t,e,n,i,Xs),s.set(0,0),s.addScaledVector(r,Xs.x),s.addScaledVector(a,Xs.y),s.addScaledVector(o,Xs.z),s}},{key:"isFrontFacing",value:function(t,e,n,i){return Ys.subVectors(n,e),js.subVectors(t,e),Ys.cross(js).dot(i)<0}}]),t}(),el=0,nl=function(t){function n(){(0,rt.default)(this,n);var t=(0,Z.default)(this,(n.__proto__||(0,W.default)(n)).call(this));return Object.defineProperty(t,"id",{value:el++}),t.uuid=e(),t.name="",t.type="Material",t.fog=!0,t.blending=ur,t.side=ar,t.vertexColors=!1,t.opacity=1,t.transparent=!1,t.blendSrc=wr,t.blendDst=Er,t.blendEquation=pr,t.blendSrcAlpha=null,t.blendDstAlpha=null,t.blendEquationAlpha=null,t.depthFunc=Rr,t.depthTest=!0,t.depthWrite=!0,t.stencilWriteMask=255,t.stencilFunc=po,t.stencilRef=0,t.stencilFuncMask=255,t.stencilFail=ho,t.stencilZFail=ho,t.stencilZPass=ho,t.stencilWrite=!1,t.clippingPlanes=null,t.clipIntersection=!1,t.clipShadows=!1,t.shadowSide=null,t.colorWrite=!0,t.precision=null,t.polygonOffset=!1,t.polygonOffsetFactor=0,t.polygonOffsetUnits=0,t.dithering=!1,t.alphaToCoverage=!1,t.premultipliedAlpha=!1,t.visible=!0,t.toneMapped=!0,t.userData={},t.version=0,t._alphaTest=0,t}return(0,Q.default)(n,t),(0,ot.default)(n,[{key:"onBuild",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n)if("shading"!==e){var i=this[e];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}}},{key:"toJSON",value:function(t){function e(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}var n=void 0===t||"string"==typeof t;n&&(t={textures:{},images:{}});var i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==ur&&(i.blending=this.blending),this.side!==ar&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(i.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=this.flatShading),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),"{}"!==(0,Y.default)(this.userData)&&(i.userData=this.userData),n){var r=e(t.textures),a=e(t.images);r.length>0&&(i.textures=r),a.length>0&&(i.images=a)}return i}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;var e=t.clippingPlanes,n=null;if(null!==e){var i=e.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse((0,Y.default)(t.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"alphaTest",get:function(){return this._alphaTest},set:function(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}},{key:"needsUpdate",set:function(t){!0===t&&this.version++}}]),n}(yo);nl.prototype.isMaterial=!0;var il=function(t){function e(t){(0,rt.default)(this,e);var n=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return n.type="MeshBasicMaterial",n.color=new Co(16777215),n.map=null,n.lightMap=null,n.lightMapIntensity=1,n.aoMap=null,n.aoMapIntensity=1,n.specularMap=null,n.alphaMap=null,n.envMap=null,n.combine=Fr,n.reflectivity=1,n.refractionRatio=.98,n.wireframe=!1,n.wireframeLinewidth=1,n.wireframeLinecap="round",n.wireframeLinejoin="round",n.setValues(t),n}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}]),e}(nl);il.prototype.isMeshBasicMaterial=!0;var rl=new Go,al=new To,ol=function(){function t(e,n,i){if((0,rt.default)(this,t),Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=n,this.count=void 0!==e?e.length/n:0,this.normalized=!0===i,this.usage=vo,this.updateRange={offset:0,count:-1},this.version=0}return(0,ot.default)(t,[{key:"onUploadCallback",value:function(){}},{key:"setUsage",value:function(t){return this.usage=t,this}},{key:"copy",value:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}},{key:"copyAt",value:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this}},{key:"copyArray",value:function(t){return this.array.set(t),this}},{key:"copyColorsArray",value:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),a=new Co),e[n++]=a.r,e[n++]=a.g,e[n++]=a.b}return this}},{key:"copyVector2sArray",value:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),a=new To),e[n++]=a.x,e[n++]=a.y}return this}},{key:"copyVector3sArray",value:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),a=new Go),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z}return this}},{key:"copyVector4sArray",value:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),a=new Oo),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z,e[n++]=a.w}return this}},{key:"applyMatrix3",value:function(t){if(2===this.itemSize)for(var e=0,n=this.count;e<n;e++)al.fromBufferAttribute(this,e),al.applyMatrix3(t),this.setXY(e,al.x,al.y);else if(3===this.itemSize)for(var i=0,r=this.count;i<r;i++)rl.fromBufferAttribute(this,i),rl.applyMatrix3(t),this.setXYZ(i,rl.x,rl.y,rl.z);return this}},{key:"applyMatrix4",value:function(t){for(var e=0,n=this.count;e<n;e++)rl.x=this.getX(e),rl.y=this.getY(e),rl.z=this.getZ(e),rl.applyMatrix4(t),this.setXYZ(e,rl.x,rl.y,rl.z);return this}},{key:"applyNormalMatrix",value:function(t){for(var e=0,n=this.count;e<n;e++)rl.x=this.getX(e),rl.y=this.getY(e),rl.z=this.getZ(e),rl.applyNormalMatrix(t),this.setXYZ(e,rl.x,rl.y,rl.z);return this}},{key:"transformDirection",value:function(t){for(var e=0,n=this.count;e<n;e++)rl.x=this.getX(e),rl.y=this.getY(e),rl.z=this.getZ(e),rl.transformDirection(t),this.setXYZ(e,rl.x,rl.y,rl.z);return this}},{key:"set",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,e),this}},{key:"getX",value:function(t){return this.array[t*this.itemSize]}},{key:"setX",value:function(t,e){return this.array[t*this.itemSize]=e,this}},{key:"getY",value:function(t){return this.array[t*this.itemSize+1]}},{key:"setY",value:function(t,e){return this.array[t*this.itemSize+1]=e,this}},{key:"getZ",value:function(t){return this.array[t*this.itemSize+2]}},{key:"setZ",value:function(t,e){return this.array[t*this.itemSize+2]=e,this}},{key:"getW",value:function(t){return this.array[t*this.itemSize+3]}},{key:"setW",value:function(t,e){return this.array[t*this.itemSize+3]=e,this}},{key:"setXY",value:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this}},{key:"setXYZ",value:function(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this}},{key:"setXYZW",value:function(t,e,n,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this}},{key:"onUpload",value:function(t){return this.onUploadCallback=t,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==vo&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}},{key:"needsUpdate",set:function(t){!0===t&&this.version++}}]),t}();ol.prototype.isBufferAttribute=!0;var sl=function(t){function e(t,n,i){return(0,rt.default)(this,e),(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,new Int8Array(t),n,i))}return(0,Q.default)(e,t),e}(ol),ll=function(t){function e(t,n,i){return(0,rt.default)(this,e),(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,new Uint8Array(t),n,i))}return(0,Q.default)(e,t),e}(ol),ul=function(t){function e(t,n,i){return(0,rt.default)(this,e),(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,new Uint8ClampedArray(t),n,i))}return(0,Q.default)(e,t),e}(ol),cl=function(t){function e(t,n,i){return(0,rt.default)(this,e),(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,new Int16Array(t),n,i))}return(0,Q.default)(e,t),e}(ol),fl=function(t){function e(t,n,i){return(0,rt.default)(this,e),(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,new Uint16Array(t),n,i))}return(0,Q.default)(e,t),e}(ol),dl=function(t){function e(t,n,i){return(0,rt.default)(this,e),(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,new Int32Array(t),n,i))}return(0,Q.default)(e,t),e}(ol),hl=function(t){function e(t,n,i){return(0,rt.default)(this,e),(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,new Uint32Array(t),n,i))}return(0,Q.default)(e,t),e}(ol),pl=function(t){function e(t,n,i){return(0,rt.default)(this,e),(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,new Uint16Array(t),n,i))}return(0,Q.default)(e,t),e}(ol);pl.prototype.isFloat16BufferAttribute=!0;var vl=function(t){function e(t,n,i){return(0,rt.default)(this,e),(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,new Float32Array(t),n,i))}return(0,Q.default)(e,t),e}(ol),ml=function(t){function e(t,n,i){return(0,rt.default)(this,e),(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,new Float64Array(t),n,i))}return(0,Q.default)(e,t),e}(ol),gl=0,_l=new _s,yl=new Hs,xl=new Go,bl=new jo,Sl=new jo,wl=new Go,El=function(t){function n(){(0,rt.default)(this,n);var t=(0,Z.default)(this,(n.__proto__||(0,W.default)(n)).call(this));return Object.defineProperty(t,"id",{value:gl++}),t.uuid=e(),t.name="",t.type="BufferGeometry",t.index=null,t.attributes={},t.morphAttributes={},t.morphTargetsRelative=!1,t.groups=[],t.boundingBox=null,t.boundingSphere=null,t.drawRange={start:0,count:1/0},t.userData={},t}return(0,Q.default)(n,t),(0,ot.default)(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(t){return Array.isArray(t)?this.index=new(N(t)?hl:fl)(t,1):this.index=t,this}},{key:"getAttribute",value:function(t){return this.attributes[t]}},{key:"setAttribute",value:function(t,e){return this.attributes[t]=e,this}},{key:"deleteAttribute",value:function(t){return delete this.attributes[t],this}},{key:"hasAttribute",value:function(t){return void 0!==this.attributes[t]}},{key:"addGroup",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:t,count:e,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(t,e){this.drawRange.start=t,this.drawRange.count=e}},{key:"applyMatrix4",value:function(t){var e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var i=(new Mo).getNormalMatrix(t);n.applyNormalMatrix(i),n.needsUpdate=!0}var r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(t){return _l.makeRotationFromQuaternion(t),this.applyMatrix4(_l),this}},{key:"rotateX",value:function(t){return _l.makeRotationX(t),this.applyMatrix4(_l),this}},{key:"rotateY",value:function(t){return _l.makeRotationY(t),this.applyMatrix4(_l),this}},{key:"rotateZ",value:function(t){return _l.makeRotationZ(t),this.applyMatrix4(_l),this}},{key:"translate",value:function(t,e,n){return _l.makeTranslation(t,e,n),this.applyMatrix4(_l),this}},{key:"scale",value:function(t,e,n){return _l.makeScale(t,e,n),this.applyMatrix4(_l),this}},{key:"lookAt",value:function(t){return yl.lookAt(t),yl.updateMatrix(),this.applyMatrix4(yl.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(xl).negate(),this.translate(xl.x,xl.y,xl.z),this}},{key:"setFromPoints",value:function(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new vl(e,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new jo);var t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Go(-1/0,-1/0,-1/0),new Go(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(var n=0,i=e.length;n<i;n++){var r=e[n];bl.setFromBufferAttribute(r),this.morphTargetsRelative?(wl.addVectors(this.boundingBox.min,bl.min),this.boundingBox.expandByPoint(wl),wl.addVectors(this.boundingBox.max,bl.max),this.boundingBox.expandByPoint(wl)):(this.boundingBox.expandByPoint(bl.min),this.boundingBox.expandByPoint(bl.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new us);var t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Go,1/0);if(t){var n=this.boundingSphere.center;if(bl.setFromBufferAttribute(t),e)for(var i=0,r=e.length;i<r;i++){var a=e[i];Sl.setFromBufferAttribute(a),this.morphTargetsRelative?(wl.addVectors(bl.min,Sl.min),bl.expandByPoint(wl),wl.addVectors(bl.max,Sl.max),bl.expandByPoint(wl)):(bl.expandByPoint(Sl.min),bl.expandByPoint(Sl.max))}bl.getCenter(n);for(var o=0,s=0,l=t.count;s<l;s++)wl.fromBufferAttribute(t,s),o=Math.max(o,n.distanceToSquared(wl));if(e)for(var u=0,c=e.length;u<c;u++)for(var f=e[u],d=this.morphTargetsRelative,h=0,p=f.count;h<p;h++)wl.fromBufferAttribute(f,h),d&&(xl.fromBufferAttribute(t,h),wl.add(xl)),o=Math.max(o,n.distanceToSquared(wl));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){function t(t){k.fromArray(a,3*t),L.copy(k);var e=u[t];I.copy(e),I.sub(k.multiplyScalar(k.dot(e))).normalize(),P.crossVectors(L,e);var n=P.dot(c[t]),i=n<0?-1:1;l[4*t]=I.x,l[4*t+1]=I.y,l[4*t+2]=I.z,l[4*t+3]=i}var e=this.index,n=this.attributes;if(null===e||void 0===n.position||void 0===n.normal||void 0===n.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");var i=e.array,r=n.position.array,a=n.normal.array,o=n.uv.array,s=r.length/3;void 0===n.tangent&&this.setAttribute("tangent",new ol(new Float32Array(4*s),4));for(var l=n.tangent.array,u=[],c=[],f=0;f<s;f++)u[f]=new Go,c[f]=new Go;var d=new Go,h=new Go,p=new Go,v=new To,m=new To,g=new To,_=new Go,y=new Go,x=this.groups;0===x.length&&(x=[{start:0,count:i.length}]);for(var b=0,S=x.length;b<S;++b)for(var w=x[b],E=w.start,A=w.count,T=E,M=E+A;T<M;T+=3)!function(t,e,n){d.fromArray(r,3*t),h.fromArray(r,3*e),p.fromArray(r,3*n),v.fromArray(o,2*t),m.fromArray(o,2*e),g.fromArray(o,2*n),h.sub(d),p.sub(d),m.sub(v),g.sub(v);var i=1/(m.x*g.y-g.x*m.y);isFinite(i)&&(_.copy(h).multiplyScalar(g.y).addScaledVector(p,-m.y).multiplyScalar(i),y.copy(p).multiplyScalar(m.x).addScaledVector(h,-g.x).multiplyScalar(i),u[t].add(_),u[e].add(_),u[n].add(_),c[t].add(y),c[e].add(y),c[n].add(y))}(i[T+0],i[T+1],i[T+2]);for(var I=new Go,P=new Go,k=new Go,L=new Go,C=0,R=x.length;C<R;++C)for(var D=x[C],N=D.start,B=D.count,O=N,F=N+B;O<F;O+=3)t(i[O+0]),t(i[O+1]),t(i[O+2])}},{key:"computeVertexNormals",value:function(){var t=this.index,e=this.getAttribute("position");if(void 0!==e){var n=this.getAttribute("normal");if(void 0===n)n=new ol(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(var i=0,r=n.count;i<r;i++)n.setXYZ(i,0,0,0);var a=new Go,o=new Go,s=new Go,l=new Go,u=new Go,c=new Go,f=new Go,d=new Go;if(t)for(var h=0,p=t.count;h<p;h+=3){var v=t.getX(h+0),m=t.getX(h+1),g=t.getX(h+2);a.fromBufferAttribute(e,v),o.fromBufferAttribute(e,m),s.fromBufferAttribute(e,g),f.subVectors(s,o),d.subVectors(a,o),f.cross(d),l.fromBufferAttribute(n,v),u.fromBufferAttribute(n,m),c.fromBufferAttribute(n,g),l.add(f),u.add(f),c.add(f),n.setXYZ(v,l.x,l.y,l.z),n.setXYZ(m,u.x,u.y,u.z),n.setXYZ(g,c.x,c.y,c.z)}else for(var _=0,y=e.count;_<y;_+=3)a.fromBufferAttribute(e,_+0),o.fromBufferAttribute(e,_+1),s.fromBufferAttribute(e,_+2),f.subVectors(s,o),d.subVectors(a,o),f.cross(d),n.setXYZ(_+0,f.x,f.y,f.z),n.setXYZ(_+1,f.x,f.y,f.z),n.setXYZ(_+2,f.x,f.y,f.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"merge",value:function(t,e){if(!t||!t.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var i in n)if(void 0!==t.attributes[i])for(var r=n[i],a=r.array,o=t.attributes[i],s=o.array,l=o.itemSize*e,u=Math.min(s.length,a.length-l),c=0,f=l;c<u;c++,f++)a[f]=s[c];return this}},{key:"normalizeNormals",value:function(){for(var t=this.attributes.normal,e=0,n=t.count;e<n;e++)wl.fromBufferAttribute(t,e),wl.normalize(),t.setXYZ(e,wl.x,wl.y,wl.z)}},{key:"toNonIndexed",value:function(){function t(t,e){for(var n=t.array,i=t.itemSize,r=t.normalized,a=new n.constructor(e.length*i),o=0,s=0,l=0,u=e.length;l<u;l++){o=t.isInterleavedBufferAttribute?e[l]*t.data.stride+t.offset:e[l]*i;for(var c=0;c<i;c++)a[s++]=n[o++]}return new ol(a,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var e=new n,i=this.index.array,r=this.attributes;for(var a in r){var o=r[a],s=t(o,i);e.setAttribute(a,s)}var l=this.morphAttributes;for(var u in l){for(var c=[],f=l[u],d=0,h=f.length;d<h;d++){var p=f[d],v=t(p,i);c.push(v)}e.morphAttributes[u]=c}e.morphTargetsRelative=this.morphTargetsRelative;for(var m=this.groups,g=0,_=m.length;g<_;g++){var y=m[g];e.addGroup(y.start,y.count,y.materialIndex)}return e}},{key:"toJSON",value:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),(0,D.default)(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var i=this.index;null!==i&&(t.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});var r=this.attributes;for(var a in r){var o=r[a];t.data.attributes[a]=o.toJSON(t.data)}var s={},l=!1;for(var u in this.morphAttributes){for(var c=this.morphAttributes[u],f=[],d=0,h=c.length;d<h;d++){var p=c[d];f.push(p.toJSON(t.data))}f.length>0&&(s[u]=f,l=!0)}l&&(t.data.morphAttributes=s,t.data.morphTargetsRelative=this.morphTargetsRelative);var v=this.groups;v.length>0&&(t.data.groups=JSON.parse((0,Y.default)(v)));var m=this.boundingSphere;return null!==m&&(t.data.boundingSphere={center:m.center.toArray(),radius:m.radius}),t}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var e={};this.name=t.name;var n=t.index;null!==n&&this.setIndex(n.clone(e));var i=t.attributes;for(var r in i){var a=i[r];this.setAttribute(r,a.clone(e))}var o=t.morphAttributes;for(var s in o){for(var l=[],u=o[s],c=0,f=u.length;c<f;c++)l.push(u[c].clone(e));this.morphAttributes[s]=l}this.morphTargetsRelative=t.morphTargetsRelative;for(var d=t.groups,h=0,p=d.length;h<p;h++){var v=d[h];this.addGroup(v.start,v.count,v.materialIndex)}var m=t.boundingBox;null!==m&&(this.boundingBox=m.clone());var g=t.boundingSphere;return null!==g&&(this.boundingSphere=g.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=(0,G.default)({},t.parameters)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(yo);El.prototype.isBufferGeometry=!0;var Al=new _s,Tl=new gs,Ml=new us,Il=new Go,Pl=new Go,kl=new Go,Ll=new Go,Cl=new Go,Rl=new Go,Dl=new Go,Nl=new Go,Bl=new Go,Ol=new To,Fl=new To,zl=new To,Vl=new Go,Ul=new Go,Gl=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new El,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new il;(0,rt.default)(this,e);var i=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return i.type="Mesh",i.geometry=t,i.material=n,i.updateMorphTargets(),i}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=(0,G.default)({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}},{key:"updateMorphTargets",value:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=(0,D.default)(e);if(n.length>0){var i=e[n[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,a=i.length;r<a;r++){var o=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}else{var s=t.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"raycast",value:function(t,e){var n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0!==i&&(null===n.boundingSphere&&n.computeBoundingSphere(),Ml.copy(n.boundingSphere),Ml.applyMatrix4(r),!1!==t.ray.intersectsSphere(Ml)&&(Al.copy(r).invert(),Tl.copy(t.ray).applyMatrix4(Al),null===n.boundingBox||!1!==Tl.intersectsBox(n.boundingBox)))){var a=void 0;if(n.isBufferGeometry){var o=n.index,s=n.attributes.position,l=n.morphAttributes.position,u=n.morphTargetsRelative,c=n.attributes.uv,f=n.attributes.uv2,d=n.groups,h=n.drawRange;if(null!==o)if(Array.isArray(i))for(var p=0,v=d.length;p<v;p++)for(var m=d[p],g=i[m.materialIndex],_=Math.max(m.start,h.start),y=Math.min(o.count,Math.min(m.start+m.count,h.start+h.count)),x=_,b=y;x<b;x+=3){var S=o.getX(x),w=o.getX(x+1),E=o.getX(x+2);a=$(this,g,t,Tl,s,l,u,c,f,S,w,E),a&&(a.faceIndex=Math.floor(x/3),a.face.materialIndex=m.materialIndex,e.push(a))}else for(var A=Math.max(0,h.start),T=Math.min(o.count,h.start+h.count),M=A,I=T;M<I;M+=3){var P=o.getX(M),k=o.getX(M+1),L=o.getX(M+2);a=$(this,i,t,Tl,s,l,u,c,f,P,k,L),a&&(a.faceIndex=Math.floor(M/3),e.push(a))}else if(void 0!==s)if(Array.isArray(i))for(var C=0,R=d.length;C<R;C++)for(var D=d[C],N=i[D.materialIndex],B=Math.max(D.start,h.start),O=Math.min(s.count,Math.min(D.start+D.count,h.start+h.count)),F=B,z=O;F<z;F+=3){var V=F,U=F+1,G=F+2;a=$(this,N,t,Tl,s,l,u,c,f,V,U,G),a&&(a.faceIndex=Math.floor(F/3),a.face.materialIndex=D.materialIndex,e.push(a))}else for(var H=Math.max(0,h.start),Y=Math.min(s.count,h.start+h.count),j=H,W=Y;j<W;j+=3){var X=j,Z=j+1,q=j+2;a=$(this,i,t,Tl,s,l,u,c,f,X,Z,q),a&&(a.faceIndex=Math.floor(j/3),e.push(a))}}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),e}(Hs);Gl.prototype.isMesh=!0;var Hl=function(t){function e(){function t(t,e,n,i,r,a,o,s,l,m,g){for(var _=a/l,y=o/m,x=a/2,b=o/2,S=s/2,w=l+1,E=m+1,A=0,T=0,M=new Go,I=0;I<E;I++)for(var P=I*y-b,k=0;k<w;k++){var L=k*_-x;M[t]=L*i,M[e]=P*r,M[n]=S,f.push(M.x,M.y,M.z),M[t]=0,M[e]=0,M[n]=s>0?1:-1,d.push(M.x,M.y,M.z),h.push(k/l),h.push(1-I/m),A+=1}for(var C=0;C<m;C++)for(var R=0;R<l;R++){var D=p+R+w*C,N=p+R+w*(C+1),B=p+(R+1)+w*(C+1),O=p+(R+1)+w*C;c.push(D,N,O),c.push(N,B,O),T+=6}u.addGroup(v,T,g),v+=T,p+=A}var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;(0,rt.default)(this,e);var l=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));l.type="BoxGeometry",l.parameters={width:n,height:i,depth:r,widthSegments:a,heightSegments:o,depthSegments:s};var u=l;a=Math.floor(a),o=Math.floor(o),s=Math.floor(s);var c=[],f=[],d=[],h=[],p=0,v=0;return t("z","y","x",-1,-1,r,i,n,s,o,0),t("z","y","x",1,-1,r,i,-n,s,o,1),t("x","z","y",1,1,n,r,i,a,s,2),t("x","z","y",1,-1,n,r,-i,a,s,3),t("x","y","z",1,-1,n,i,r,a,o,4),t("x","y","z",-1,-1,n,i,-r,a,o,5),l.setIndex(c),l.setAttribute("position",new vl(f,3)),l.setAttribute("normal",new vl(d,3)),l.setAttribute("uv",new vl(h,2)),l}return(0,Q.default)(e,t),(0,ot.default)(e,null,[{key:"fromJSON",value:function(t){return new e(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}]),e}(El),Yl={clone:et,merge:it},jl="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",Wl="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",Xl=function(t){function e(t){(0,rt.default)(this,e);var n=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return n.type="ShaderMaterial",n.defines={},n.uniforms={},n.vertexShader=jl,n.fragmentShader=Wl,n.linewidth=1,n.wireframe=!1,n.wireframeLinewidth=1,n.fog=!1,n.lights=!1,n.clipping=!1,n.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},n.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},n.index0AttributeName=void 0,n.uniformsNeedUpdate=!1,n.glslVersion=null,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),n.setValues(t)),n}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=et(t.uniforms),this.defines=(0,G.default)({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.extensions=(0,G.default)({},t.extensions),this.glslVersion=t.glslVersion,this}},{key:"toJSON",value:function(t){var n=(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"toJSON",this).call(this,t);n.glslVersion=this.glslVersion,n.uniforms={};for(var i in this.uniforms){var r=this.uniforms[i],a=r.value;a&&a.isTexture?n.uniforms[i]={type:"t",value:a.toJSON(t).uuid}:a&&a.isColor?n.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?n.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?n.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?n.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?n.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?n.uniforms[i]={type:"m4",value:a.toArray()}:n.uniforms[i]={value:a}}(0,D.default)(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader;var o={};for(var s in this.extensions)!0===this.extensions[s]&&(o[s]=!0);return(0,D.default)(o).length>0&&(n.extensions=o),n}}]),e}(nl);Xl.prototype.isShaderMaterial=!0;var Zl=function(t){function e(){(0,rt.default)(this,e);var t=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return t.type="Camera",t.matrixWorldInverse=new _s,t.projectionMatrix=new _s,t.projectionMatrixInverse=new _s,t}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"copy",value:function(t,n){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t,n),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(t){this.updateWorldMatrix(!0,!1);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}},{key:"updateMatrixWorld",value:function(t){(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"updateMatrixWorld",this).call(this,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(t,n){(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"updateWorldMatrix",this).call(this,t,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(Hs);Zl.prototype.isCamera=!0;var ql=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;(0,rt.default)(this,e);var a=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return a.type="PerspectiveCamera",a.fov=t,a.zoom=1,a.near=i,a.far=r,a.focus=10,a.aspect=n,a.view=null,a.filmGauge=35,a.filmOffset=0,a.updateProjectionMatrix(),a}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"copy",value:function(t,n){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t,n),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:(0,G.default)({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}},{key:"setFocalLength",value:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*Eo*Math.atan(e),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var t=Math.tan(.5*wo*this.fov);return.5*this.getFilmHeight()/t}},{key:"getEffectiveFOV",value:function(){return 2*Eo*Math.atan(Math.tan(.5*wo*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(t,e,n,i,r,a){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var t=this.near,e=t*Math.tan(.5*wo*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;r+=a.offsetX*i/o,e-=a.offsetY*n/s,i*=a.width/o,n*=a.height/s}var l=this.filmOffset;0!==l&&(r+=t*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(t){var n=(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"toJSON",this).call(this,t);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,null!==this.view&&(n.object.view=(0,G.default)({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}]),e}(Zl);ql.prototype.isPerspectiveCamera=!0;var Ql=90,Jl=1,Kl=function(t){function e(t,n,i){(0,rt.default)(this,e);var r=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));if(r.type="CubeCamera",!0!==i.isWebGLCubeRenderTarget)return console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter."),(0,Z.default)(r);r.renderTarget=i;var a=new ql(Ql,Jl,t,n);a.layers=r.layers,a.up.set(0,-1,0),a.lookAt(new Go(1,0,0)),r.add(a);var o=new ql(Ql,Jl,t,n);o.layers=r.layers,o.up.set(0,-1,0),o.lookAt(new Go(-1,0,0)),r.add(o);var s=new ql(Ql,Jl,t,n);s.layers=r.layers,s.up.set(0,0,1),s.lookAt(new Go(0,1,0)),r.add(s);var l=new ql(Ql,Jl,t,n);l.layers=r.layers,l.up.set(0,0,-1),l.lookAt(new Go(0,-1,0)),r.add(l);var u=new ql(Ql,Jl,t,n);u.layers=r.layers,u.up.set(0,-1,0),u.lookAt(new Go(0,0,1)),r.add(u);var c=new ql(Ql,Jl,t,n);return c.layers=r.layers,c.up.set(0,-1,0),c.lookAt(new Go(0,0,-1)),r.add(c),r}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"update",value:function(t,e){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,i=(0,C.default)(this.children,6),r=i[0],a=i[1],o=i[2],s=i[3],l=i[4],u=i[5],c=t.xr.enabled,f=t.getRenderTarget();t.xr.enabled=!1;var d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,r),t.setRenderTarget(n,1),t.render(e,a),t.setRenderTarget(n,2),t.render(e,o),t.setRenderTarget(n,3),t.render(e,s),t.setRenderTarget(n,4),t.render(e,l),n.texture.generateMipmaps=d,t.setRenderTarget(n,5),t.render(e,u),t.setRenderTarget(f),t.xr.enabled=c,n.texture.needsPMREMUpdate=!0}}]),e}(Hs),$l=function(t){function e(t,n,i,r,a,o,s,l,u,c){(0,rt.default)(this,e),t=void 0!==t?t:[],n=void 0!==n?n:Xr;var f=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t,n,i,r,a,o,s,l,u,c));return f.flipY=!1,f}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"images",get:function(){return this.image},set:function(t){this.image=t}}]),e}(Bo);$l.prototype.isCubeTexture=!0;var tu=function(t){function e(t,n,i){(0,rt.default)(this,e),(0,k.default)(n)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),n=i);var r=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t,t,n));return n=n||{},r.texture=new $l(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),r.texture.isRenderTargetTexture=!0,r.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,r.texture.minFilter=void 0!==n.minFilter?n.minFilter:aa,r}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"fromEquirectangularTexture",value:function(t,e){this.texture.type=e.type,this.texture.format=ba,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;var n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},i=new Hl(5,5,5),r=new Xl({name:"CubemapFromEquirect",uniforms:et(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:or,blending:lr});r.uniforms.tEquirect.value=e;var a=new Gl(i,r),o=e.minFilter;return e.minFilter===sa&&(e.minFilter=aa),new Kl(1,10,this).update(t,a),e.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}},{key:"clear",value:function(t,e,n,i){for(var r=t.getRenderTarget(),a=0;a<6;a++)t.setRenderTarget(this,a),t.clear(e,n,i);t.setRenderTarget(r)}}]),e}(Fo);tu.prototype.isWebGLCubeRenderTarget=!0;var eu=new Go,nu=new Go,iu=new Mo,ru=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Go(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,rt.default)(this,t),this.normal=e,this.constant=n}return(0,ot.default)(t,[{key:"set",value:function(t,e){return this.normal.copy(t),this.constant=e,this}},{key:"setComponents",value:function(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this}},{key:"setFromNormalAndCoplanarPoint",value:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(t,e,n){var i=eu.subVectors(n,e).cross(nu.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this}},{key:"copy",value:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this}},{key:"normalize",value:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(t){return this.normal.dot(t)+this.constant}},{key:"distanceToSphere",value:function(t){return this.distanceToPoint(t.center)-t.radius}},{key:"projectPoint",value:function(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}},{key:"intersectLine",value:function(t,e){var n=t.delta(eu),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;var r=-(t.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:e.copy(n).multiplyScalar(r).add(t.start)}},{key:"intersectsLine",value:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}},{key:"intersectsBox",value:function(t){return t.intersectsPlane(this)}},{key:"intersectsSphere",value:function(t){return t.intersectsPlane(this)}},{key:"coplanarPoint",value:function(t){return t.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(t,e){var n=e||iu.getNormalMatrix(t),i=this.coplanarPoint(eu).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}},{key:"translate",value:function(t){return this.constant-=t.dot(this.normal),this}},{key:"equals",value:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}();ru.prototype.isPlane=!0;var au=new us,ou=new Go,su=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ru,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ru,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ru,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new ru,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new ru,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new ru;(0,rt.default)(this,t),this.planes=[e,n,i,r,a,o]}return(0,ot.default)(t,[{key:"set",value:function(t,e,n,i,r,a){var o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(a),this}},{key:"copy",value:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(t){var e=this.planes,n=t.elements,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],l=n[5],u=n[6],c=n[7],f=n[8],d=n[9],h=n[10],p=n[11],v=n[12],m=n[13],g=n[14],_=n[15];return e[0].setComponents(o-i,c-s,p-f,_-v).normalize(),e[1].setComponents(o+i,c+s,p+f,_+v).normalize(),e[2].setComponents(o+r,c+l,p+d,_+m).normalize(),e[3].setComponents(o-r,c-l,p-d,_-m).normalize(),e[4].setComponents(o-a,c-u,p-h,_-g).normalize(),e[5].setComponents(o+a,c+u,p+h,_+g).normalize(),this}},{key:"intersectsObject",value:function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),au.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(au)}},{key:"intersectsSprite",value:function(t){return au.center.set(0,0,0),au.radius=.7071067811865476,au.applyMatrix4(t.matrixWorld),this.intersectsSphere(au)}},{key:"intersectsSphere",value:function(t){for(var e=this.planes,n=t.center,i=-t.radius,r=0;r<6;r++){if(e[r].distanceToPoint(n)<i)return!1}return!0}},{key:"intersectsBox",value:function(t){for(var e=this.planes,n=0;n<6;n++){var i=e[n];if(ou.x=i.normal.x>0?t.max.x:t.min.x,ou.y=i.normal.y>0?t.max.y:t.min.y,ou.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(ou)<0)return!1}return!0}},{key:"containsPoint",value:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}(),lu=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,rt.default)(this,e);var a=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));a.type="PlaneGeometry",a.parameters={width:t,height:n,widthSegments:i,heightSegments:r};for(var o=t/2,s=n/2,l=Math.floor(i),u=Math.floor(r),c=l+1,f=u+1,d=t/l,h=n/u,p=[],v=[],m=[],g=[],_=0;_<f;_++)for(var y=_*h-s,x=0;x<c;x++){var b=x*d-o;v.push(b,-y,0),m.push(0,0,1),g.push(x/l),g.push(1-_/u)}for(var S=0;S<u;S++)for(var w=0;w<l;w++){var E=w+c*S,A=w+c*(S+1),T=w+1+c*(S+1),M=w+1+c*S;p.push(E,A,M),p.push(A,T,M)}return a.setIndex(p),a.setAttribute("position",new vl(v,3)),a.setAttribute("normal",new vl(m,3)),a.setAttribute("uv",new vl(g,2)),a}return(0,Q.default)(e,t),(0,ot.default)(e,null,[{key:"fromJSON",value:function(t){return new e(t.width,t.height,t.widthSegments,t.heightSegments)}}]),e}(El),uu={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\treturn texture2D( envMap, uv ).rgb;\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(\t\t0, 1,\t\t0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t\tf.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t\tf.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(\t1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,\t1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,\t1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},cu={common:{diffuse:{value:new Co(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Mo},uv2Transform:{value:new Mo},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new To(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Co(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Co(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Mo}},sprite:{diffuse:{value:new Co(16777215)},opacity:{value:1},center:{value:new To(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Mo}}},fu={basic:{uniforms:it([cu.common,cu.specularmap,cu.envmap,cu.aomap,cu.lightmap,cu.fog]),vertexShader:uu.meshbasic_vert,fragmentShader:uu.meshbasic_frag},lambert:{uniforms:it([cu.common,cu.specularmap,cu.envmap,cu.aomap,cu.lightmap,cu.emissivemap,cu.fog,cu.lights,{emissive:{value:new Co(0)}}]),vertexShader:uu.meshlambert_vert,fragmentShader:uu.meshlambert_frag},phong:{uniforms:it([cu.common,cu.specularmap,cu.envmap,cu.aomap,cu.lightmap,cu.emissivemap,cu.bumpmap,cu.normalmap,cu.displacementmap,cu.fog,cu.lights,{emissive:{value:new Co(0)},specular:{value:new Co(1118481)},shininess:{value:30}}]),vertexShader:uu.meshphong_vert,fragmentShader:uu.meshphong_frag},standard:{uniforms:it([cu.common,cu.envmap,cu.aomap,cu.lightmap,cu.emissivemap,cu.bumpmap,cu.normalmap,cu.displacementmap,cu.roughnessmap,cu.metalnessmap,cu.fog,cu.lights,{emissive:{value:new Co(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:uu.meshphysical_vert,fragmentShader:uu.meshphysical_frag},toon:{uniforms:it([cu.common,cu.aomap,cu.lightmap,cu.emissivemap,cu.bumpmap,cu.normalmap,cu.displacementmap,cu.gradientmap,cu.fog,cu.lights,{emissive:{value:new Co(0)}}]),vertexShader:uu.meshtoon_vert,fragmentShader:uu.meshtoon_frag},matcap:{uniforms:it([cu.common,cu.bumpmap,cu.normalmap,cu.displacementmap,cu.fog,{matcap:{value:null}}]),vertexShader:uu.meshmatcap_vert,fragmentShader:uu.meshmatcap_frag},points:{uniforms:it([cu.points,cu.fog]),vertexShader:uu.points_vert,fragmentShader:uu.points_frag},dashed:{uniforms:it([cu.common,cu.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:uu.linedashed_vert,fragmentShader:uu.linedashed_frag},depth:{uniforms:it([cu.common,cu.displacementmap]),vertexShader:uu.depth_vert,fragmentShader:uu.depth_frag},normal:{uniforms:it([cu.common,cu.bumpmap,cu.normalmap,cu.displacementmap,{opacity:{value:1}}]),vertexShader:uu.meshnormal_vert,fragmentShader:uu.meshnormal_frag},sprite:{uniforms:it([cu.sprite,cu.fog]),vertexShader:uu.sprite_vert,fragmentShader:uu.sprite_frag},background:{uniforms:{uvTransform:{value:new Mo},t2D:{value:null}},vertexShader:uu.background_vert,fragmentShader:uu.background_frag},cube:{uniforms:it([cu.envmap,{opacity:{value:1}}]),vertexShader:uu.cube_vert,fragmentShader:uu.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:uu.equirect_vert,fragmentShader:uu.equirect_frag},distanceRGBA:{uniforms:it([cu.common,cu.displacementmap,{referencePosition:{value:new Go},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:uu.distanceRGBA_vert,fragmentShader:uu.distanceRGBA_frag},shadow:{uniforms:it([cu.lights,cu.fog,{color:{value:new Co(0)},opacity:{value:1}}]),vertexShader:uu.shadow_vert,fragmentShader:uu.shadow_frag}};fu.physical={uniforms:it([fu.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new To(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new Co(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new To},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Co(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Co(1,1,1)},specularColorMap:{value:null}}]),vertexShader:uu.meshphysical_vert,fragmentShader:uu.meshphysical_frag};var du=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;(0,rt.default)(this,e);var s=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return s.type="OrthographicCamera",s.zoom=1,s.view=null,s.left=t,s.right=n,s.top=i,s.bottom=r,s.near=a,s.far=o,s.updateProjectionMatrix(),s}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"copy",value:function(t,n){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t,n),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:(0,G.default)({},t.view),this}},{key:"setViewOffset",value:function(t,e,n,i,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-t,a=n+t,o=i+e,s=i-e;if(null!==this.view&&this.view.enabled){var l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=l*this.view.offsetX,a=r+l*this.view.width,o-=u*this.view.offsetY,s=o-u*this.view.height}this.projectionMatrix.makeOrthographic(r,a,o,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(t){var n=(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"toJSON",this).call(this,t);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,null!==this.view&&(n.object.view=(0,G.default)({},this.view)),n}}]),e}(Zl);du.prototype.isOrthographicCamera=!0;var hu=function(t){function e(t){(0,rt.default)(this,e);var n=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t));return n.type="RawShaderMaterial",n}return(0,Q.default)(e,t),e}(Xl);hu.prototype.isRawShaderMaterial=!0;var pu=4,vu=8,mu=Math.pow(2,vu),gu=[.125,.215,.35,.446,.526,.582],_u=vu-pu+1+gu.length,yu=20,xu=new du,bu=function(){for(var t=[],e=[],n=[],i=vu,r=0;r<_u;r++){var a=Math.pow(2,i);e.push(a);var o=1/a;r>vu-pu?o=gu[r-vu+pu-1]:0===r&&(o=0),n.push(o);for(var s=1/(a-1),l=-s/2,u=1+s/2,c=[l,l,u,l,u,u,l,l,u,u,l,u],f=new Float32Array(108),d=new Float32Array(72),h=new Float32Array(36),p=0;p<6;p++){var v=p%3*2/3-1,m=p>2?0:-1,g=[v,m,0,v+2/3,m,0,v+2/3,m+1,0,v,m,0,v+2/3,m+1,0,v,m+1,0];f.set(g,18*p),d.set(c,12*p);var _=[p,p,p,p,p,p];h.set(_,6*p)}var y=new El;y.setAttribute("position",new ol(f,3)),y.setAttribute("uv",new ol(d,2)),y.setAttribute("faceIndex",new ol(h,1)),t.push(y),i>pu&&i--}return{_lodPlanes:t,_sizeLods:e,_sigmas:n}}(),Su=bu._lodPlanes,wu=bu._sizeLods,Eu=bu._sigmas,Au=new Co,Tu=null,Mu=(1+Math.sqrt(5))/2,Iu=1/Mu,Pu=[new Go(1,1,1),new Go(-1,1,1),new Go(1,1,-1),new Go(-1,1,-1),new Go(0,Mu,Iu),new Go(0,Mu,-Iu),new Go(Iu,0,Mu),new Go(-Iu,0,Mu),new Go(Mu,Iu,0),new Go(-Mu,Iu,0)],ku=function(){function t(e){(0,rt.default)(this,t),this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=mt(yu),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}return(0,ot.default)(t,[{key:"fromScene",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;Tu=this._renderer.getRenderTarget();var r=this._allocateTargets();return this._sceneToCubeUV(t,n,i,r),e>0&&this._blur(r,0,0,e),this._applyPMREM(r),this._cleanup(r),r}},{key:"fromEquirectangular",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(t,e)}},{key:"fromCubemap",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(t,e)}},{key:"compileCubemapShader",value:function(){null===this._cubemapShader&&(this._cubemapShader=_t(),this._compileMaterial(this._cubemapShader))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectShader&&(this._equirectShader=gt(),this._compileMaterial(this._equirectShader))}},{key:"dispose",value:function(){this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(var t=0;t<Su.length;t++)Su[t].dispose()}},{key:"_cleanup",value:function(t){this._renderer.setRenderTarget(Tu),t.scissorTest=!1,vt(t,0,0,t.width,t.height)}},{key:"_fromTexture",value:function(t,e){Tu=this._renderer.getRenderTarget();var n=e||this._allocateTargets(t);return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}},{key:"_allocateTargets",value:function(t){var e={magFilter:aa,minFilter:aa,generateMipmaps:!1,type:va,format:ba,encoding:oo,depthBuffer:!1},n=pt(e);return n.depthBuffer=!t,null===this._pingPongRenderTarget&&(this._pingPongRenderTarget=pt(e)),n}},{key:"_compileMaterial",value:function(t){var e=new Gl(Su[0],t);this._renderer.compile(e,xu)}},{key:"_sceneToCubeUV",value:function(t,e,n,i){var r=new ql(90,1,e,n),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,u=s.toneMapping;s.getClearColor(Au),s.toneMapping=Ur,s.autoClear=!1;var c=new il({name:"PMREM.Background",side:or,depthWrite:!1,depthTest:!1}),f=new Gl(new Hl,c),d=!1,h=t.background;h?h.isColor&&(c.color.copy(h),t.background=null,d=!0):(c.color.copy(Au),d=!0);for(var p=0;p<6;p++){var v=p%3;0===v?(r.up.set(0,a[p],0),r.lookAt(o[p],0,0)):1===v?(r.up.set(0,0,a[p]),r.lookAt(0,o[p],0)):(r.up.set(0,a[p],0),r.lookAt(0,0,o[p])),vt(i,v*mu,p>2?mu:0,mu,mu),s.setRenderTarget(i),d&&s.render(f,r),s.render(t,r)}f.geometry.dispose(),f.material.dispose(),s.toneMapping=u,s.autoClear=l,t.background=h}},{key:"_textureToCubeUV",value:function(t,e){var n=this._renderer,i=t.mapping===Xr||t.mapping===Zr;i?(null===this._cubemapShader&&(this._cubemapShader=_t()),this._cubemapShader.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectShader&&(this._equirectShader=gt());var r=i?this._cubemapShader:this._equirectShader,a=new Gl(Su[0],r),o=r.uniforms;o.envMap.value=t,i||o.texelSize.value.set(1/t.image.width,1/t.image.height),vt(e,0,0,3*mu,2*mu),n.setRenderTarget(e),n.render(a,xu)}},{key:"_applyPMREM",value:function(t){var e=this._renderer,n=e.autoClear;e.autoClear=!1;for(var i=1;i<_u;i++){var r=Math.sqrt(Eu[i]*Eu[i]-Eu[i-1]*Eu[i-1]),a=Pu[(i-1)%Pu.length];this._blur(t,i-1,i,r,a)}e.autoClear=n}},{key:"_blur",value:function(t,e,n,i,r){var a=this._pingPongRenderTarget;this._halfBlur(t,a,e,n,i,"latitudinal",r),this._halfBlur(a,t,n,n,i,"longitudinal",r)}},{key:"_halfBlur",value:function(t,e,n,i,r,a,o){var s=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");var u=new Gl(Su[i],l),c=l.uniforms,f=wu[n]-1,d=isFinite(r)?Math.PI/(2*f):2*Math.PI/(2*yu-1),h=r/d,p=isFinite(r)?1+Math.floor(3*h):yu;p>yu&&console.warn("sigmaRadians, "+r+", is too large and will clip, as it requested "+p+" samples when the maximum is set to "+yu);for(var v=[],m=0,g=0;g<yu;++g){var _=g/h,y=Math.exp(-_*_/2);v.push(y),0===g?m+=y:g<p&&(m+=2*y)}for(var x=0;x<v.length;x++)v[x]=v[x]/m;c.envMap.value=t.texture,c.samples.value=p,c.weights.value=v,c.latitudinal.value="latitudinal"===a,o&&(c.poleAxis.value=o),c.dTheta.value=d,c.mipInt.value=vu-n;var b=wu[i];vt(e,3*Math.max(0,mu-2*b),(0===i?0:2*mu)+2*b*(i>vu-pu?i-vu+pu:0),3*b,2*b),s.setRenderTarget(e),s.render(u,xu)}}]),t}(),Lu=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,rt.default)(this,e);var a=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,null));return a.image={data:t,width:n,height:i,depth:r},a.magFilter=na,a.minFilter=na,a.wrapR=ta,a.generateMipmaps=!1,a.flipY=!1,a.unpackAlignment=1,a}return(0,Q.default)(e,t),e}(Bo);Lu.prototype.isDataTexture2DArray=!0;var Cu=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,rt.default)(this,e);var a=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,null));return a.image={data:t,width:n,height:i,depth:r},a.magFilter=na,a.minFilter=na,a.wrapR=ta,a.generateMipmaps=!1,a.flipY=!1,a.unpackAlignment=1,a}return(0,Q.default)(e,t),e}(Bo);Cu.prototype.isDataTexture3D=!0;var Ru=new Bo,Du=new Lu,Nu=new Cu,Bu=new $l,Ou=[],Fu=[],zu=new Float32Array(16),Vu=new Float32Array(9),Uu=new Float32Array(4);xe.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),Lt(e,t)},be.prototype.setValue=function(t,e,n){for(var i=this.seq,r=0,a=i.length;r!==a;++r){var o=i[r];o.setValue(t,e[o.id],n)}};var Gu=/(\w+)(\])?(\[|\.)?/g;Ee.prototype.setValue=function(t,e,n,i){var r=this.map[e];void 0!==r&&r.setValue(t,n,i)},Ee.prototype.setOptional=function(t,e,n){var i=e[n];void 0!==i&&this.setValue(t,n,i)},Ee.upload=function(t,e,n,i){for(var r=0,a=e.length;r!==a;++r){var o=e[r],s=n[o.id];!1!==s.needsUpdate&&o.setValue(t,s.value,i)}},Ee.seqWithValue=function(t,e){for(var n=[],i=0,r=t.length;i!==r;++i){var a=t[i];a.id in e&&n.push(a)}return n};var Hu=0,Yu=/^[ \t]*#include +<([\w\d./]+)>/gm,ju=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Wu=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g,Xu=0,Zu=function(){function t(){(0,rt.default)(this,t),this.shaderCache=new E.default,this.materialCache=new E.default}return(0,ot.default)(t,[{key:"update",value:function(t){var e=t.vertexShader,n=t.fragmentShader,i=this._getShaderStage(e),r=this._getShaderStage(n),a=this._getShaderCacheForMaterial(t);return!1===a.has(i)&&(a.add(i),i.usedTimes++),!1===a.has(r)&&(a.add(r),r.usedTimes++),this}},{key:"remove",value:function(t){var e=this.materialCache.get(t),n=!0,i=!1,r=void 0;try{for(var a,o=(0,S.default)(e);!(n=(a=o.next()).done);n=!0){var s=a.value;s.usedTimes--,0===s.usedTimes&&this.shaderCache.delete(s)}}catch(t){i=!0,r=t}finally{try{!n&&o.return&&o.return()}finally{if(i)throw r}}return this.materialCache.delete(t),this}},{key:"getVertexShaderID",value:function(t){return this._getShaderStage(t.vertexShader).id}},{key:"getFragmentShaderID",value:function(t){return this._getShaderStage(t.fragmentShader).id}},{key:"dispose",value:function(){this.shaderCache.clear(),this.materialCache.clear()}},{key:"_getShaderCacheForMaterial",value:function(t){var e=this.materialCache;return!1===e.has(t)&&e.set(t,new x.default),e.get(t)}},{key:"_getShaderStage",value:function(t){var e=this.shaderCache;if(!1===e.has(t)){var n=new qu;e.set(t,n)}return e.get(t)}}]),t}(),qu=function t(){(0,rt.default)(this,t),this.id=Xu++,this.usedTimes=0},Qu=0,Ju=function(t){function e(t){(0,rt.default)(this,e);var n=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return n.type="MeshDepthMaterial",n.depthPacking=lo,n.map=null,n.alphaMap=null,n.displacementMap=null,n.displacementScale=1,n.displacementBias=0,n.wireframe=!1,n.wireframeLinewidth=1,n.fog=!1,n.setValues(t),n}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}]),e}(nl);Ju.prototype.isMeshDepthMaterial=!0;var Ku=function(t){function e(t){(0,rt.default)(this,e);var n=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return n.type="MeshDistanceMaterial",n.referencePosition=new Go,n.nearDistance=1,n.farDistance=1e3,n.map=null,n.alphaMap=null,n.displacementMap=null,n.displacementScale=1,n.displacementBias=0,n.fog=!1,n.setValues(t),n}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}]),e}(nl);Ku.prototype.isMeshDistanceMaterial=!0;var $u="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",tc="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}",ec=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,rt.default)(this,e);var n=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return n.cameras=t,n}return(0,Q.default)(e,t),e}(ql);ec.prototype.isArrayCamera=!0;var nc=function(t){function e(){(0,rt.default)(this,e);var t=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return t.type="Group",t}return(0,Q.default)(e,t),e}(Hs);nc.prototype.isGroup=!0;var ic={type:"move"},rc=function(){function t(){(0,rt.default)(this,t),this._targetRay=null,this._grip=null,this._hand=null}return(0,ot.default)(t,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new nc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new nc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Go,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Go),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new nc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Go,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Go),this._grip}},{key:"dispatchEvent",value:function(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}},{key:"disconnect",value:function(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(t,e,n){var i=null,r=null,a=null,o=this._targetRay,s=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState)if(null!==o&&null!==(i=e.getPose(t.targetRaySpace,n))&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(ic)),l&&t.hand){a=!0;var u=!0,c=!1,f=void 0;try{for(var d,h=(0,S.default)(t.hand.values());!(u=(d=h.next()).done);u=!0){var p=d.value,v=e.getJointPose(p,n);if(void 0===l.joints[p.jointName]){var m=new nc;m.matrixAutoUpdate=!1,m.visible=!1,l.joints[p.jointName]=m,l.add(m)}var g=l.joints[p.jointName];null!==v&&(g.matrix.fromArray(v.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.jointRadius=v.radius),g.visible=null!==v}}catch(t){c=!0,f=t}finally{try{!u&&h.return&&h.return()}finally{if(c)throw f}}var _=l.joints["index-finger-tip"],y=l.joints["thumb-tip"],x=_.position.distanceTo(y.position);l.inputState.pinching&&x>.025?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&x<=.015&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==s&&t.gripSpace&&null!==(r=e.getPose(t.gripSpace,n))&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1);return null!==o&&(o.visible=null!==i),null!==s&&(s.visible=null!==r),null!==l&&(l.visible=null!==a),this}}]),t}(),ac=function(t){function e(t,n,i,r,a,o,s,l,u,c){if((0,rt.default)(this,e),(c=void 0!==c?c:Ea)!==Ea&&c!==Aa)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&c===Ea&&(i=fa),void 0===i&&c===Aa&&(i=_a);var f=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,null,r,a,o,s,l,c,i,u));return f.image={width:t,height:n},f.magFilter=void 0!==s?s:na,f.minFilter=void 0!==l?l:na,f.flipY=!1,f.generateMipmaps=!1,f}return(0,Q.default)(e,t),e}(Bo);ac.prototype.isDepthTexture=!0;var oc=function(t){function e(t,n){function i(t){var e=I.get(t.inputSource);e&&e.dispatchEvent({type:t.type,data:t.inputSource})}function r(){I.forEach(function(t,e){t.disconnect(e)}),I.clear(),R=null,D=null,t.setRenderTarget(A),x=null,y=null,_=null,f=null,T=null,F.stop(),c.isPresenting=!1,c.dispatchEvent({type:"sessionend"})}function a(t){for(var e=f.inputSources,n=0;n<M.length;n++)I.set(e[n],M[n]);for(var i=0;i<t.removed.length;i++){var r=t.removed[i],a=I.get(r);a&&(a.dispatchEvent({type:"disconnected",data:r}),I.delete(r))}for(var o=0;o<t.added.length;o++){var s=t.added[o],l=I.get(s);l&&l.dispatchEvent({type:"connected",data:s})}}function o(t,e,n){N.setFromMatrixPosition(e.matrixWorld),B.setFromMatrixPosition(n.matrixWorld);var i=N.distanceTo(B),r=e.projectionMatrix.elements,a=n.projectionMatrix.elements,o=r[14]/(r[10]-1),s=r[14]/(r[10]+1),l=(r[9]+1)/r[5],u=(r[9]-1)/r[5],c=(r[8]-1)/r[0],f=(a[8]+1)/a[0],d=o*c,h=o*f,p=i/(-c+f),v=p*-c;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(v),t.translateZ(p),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();var m=o+p,g=s+p,_=d-v,y=h+(i-v),x=l*s/g*m,b=u*s/g*m;t.projectionMatrix.makePerspective(_,y,x,b,m,g)}function s(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}function l(e,n){if(g=n.getViewerPose(h),S=n,null!==g){var i=g.views;null!==x&&(t.setRenderTargetFramebuffer(T,x.framebuffer),t.setRenderTarget(T));var r=!1;i.length!==C.cameras.length&&(C.cameras.length=0,r=!0);for(var a=0;a<i.length;a++){var o=i[a],s=null;if(null!==x)s=x.getViewport(o);else{var l=_.getViewSubImage(y,o);s=l.viewport,0===a&&(t.setRenderTargetTextures(T,l.colorTexture,y.ignoreDepthValues?void 0:l.depthStencilTexture),t.setRenderTarget(T))}var u=L[a];u.matrix.fromArray(o.transform.matrix),u.projectionMatrix.fromArray(o.projectionMatrix),u.viewport.set(s.x,s.y,s.width,s.height),0===a&&C.matrix.copy(u.matrix),!0===r&&C.cameras.push(u)}}for(var c=f.inputSources,d=0;d<M.length;d++){var p=M[d],v=c[d];p.update(v,n,h)}O&&O(e,n),S=null}(0,rt.default)(this,e);var u=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this)),c=u,f=null,d=1,h=null,v="local-floor",m=t.extensions.has("WEBGL_multisampled_render_to_texture"),g=null,_=null,y=null,x=null,b=!1,S=null,w=n.getContextAttributes(),A=null,T=null,M=[],I=new E.default,P=new ql;P.layers.enable(1),P.viewport=new Oo;var k=new ql;k.layers.enable(2),k.viewport=new Oo;var L=[P,k],C=new ec;C.layers.enable(1),C.layers.enable(2);var R=null,D=null;u.cameraAutoUpdate=!0,u.enabled=!1,u.isPresenting=!1,u.getController=function(t){var e=M[t];return void 0===e&&(e=new rc,M[t]=e),e.getTargetRaySpace()},u.getControllerGrip=function(t){var e=M[t];return void 0===e&&(e=new rc,M[t]=e),e.getGripSpace()},u.getHand=function(t){var e=M[t];return void 0===e&&(e=new rc,M[t]=e),e.getHandSpace()},u.setFramebufferScaleFactor=function(t){d=t,!0===c.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},u.setReferenceSpaceType=function(t){v=t,!0===c.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},u.getReferenceSpace=function(){return h},u.getBaseLayer=function(){return null!==y?y:x},u.getBinding=function(){return _},u.getFrame=function(){return S},u.getSession=function(){return f},u.setSession=function(){var e=(0,p.default)(K.default.mark(function e(o){var s,l,u,p,g;return K.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(f=o)){e.next=24;break}if(A=t.getRenderTarget(),f.addEventListener("select",i),f.addEventListener("selectstart",i),f.addEventListener("selectend",i),f.addEventListener("squeeze",i),f.addEventListener("squeezestart",i),f.addEventListener("squeezeend",i),f.addEventListener("end",r),f.addEventListener("inputsourceschange",a),!0===w.xrCompatible){e.next=14;break}return e.next=14,n.makeXRCompatible();case 14:return void 0===f.renderState.layers||!1===t.capabilities.isWebGL2?(s={antialias:void 0!==f.renderState.layers||w.antialias,alpha:w.alpha,depth:w.depth,stencil:w.stencil,framebufferScaleFactor:d},x=new XRWebGLLayer(f,n,s),f.updateRenderState({baseLayer:x}),T=new Fo(x.framebufferWidth,x.framebufferHeight,{format:ba,type:la,encoding:t.outputEncoding})):(b=w.antialias,l=null,u=null,p=null,w.depth&&(p=w.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,l=w.stencil?Aa:Ea,u=w.stencil?_a:fa),g={colorFormat:t.outputEncoding===so?n.SRGB8_ALPHA8:n.RGBA8,depthFormat:p,scaleFactor:d},_=new XRWebGLBinding(f,n),y=_.createProjectionLayer(g),f.updateRenderState({layers:[y]}),T=b?new Vo(y.textureWidth,y.textureHeight,{format:ba,type:la,depthTexture:new ac(y.textureWidth,y.textureHeight,u,void 0,void 0,void 0,void 0,void 0,void 0,l),stencilBuffer:w.stencil,ignoreDepth:y.ignoreDepthValues,useRenderToTexture:m,encoding:t.outputEncoding}):new Fo(y.textureWidth,y.textureHeight,{format:ba,type:la,depthTexture:new ac(y.textureWidth,y.textureHeight,u,void 0,void 0,void 0,void 0,void 0,void 0,l),stencilBuffer:w.stencil,ignoreDepth:y.ignoreDepthValues,encoding:t.outputEncoding})),T.isXRRenderTarget=!0,this.setFoveation(1),e.next=19,f.requestReferenceSpace(v);case 19:h=e.sent,F.setContext(f),F.start(),c.isPresenting=!0,c.dispatchEvent({type:"sessionstart"});case 24:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();var N=new Go,B=new Go;u.updateCamera=function(t){if(null!==f){C.near=k.near=P.near=t.near,C.far=k.far=P.far=t.far,R===C.near&&D===C.far||(f.updateRenderState({depthNear:C.near,depthFar:C.far}),R=C.near,D=C.far);var e=t.parent,n=C.cameras;s(C,e);for(var i=0;i<n.length;i++)s(n[i],e);C.matrixWorld.decompose(C.position,C.quaternion,C.scale),t.position.copy(C.position),t.quaternion.copy(C.quaternion),t.scale.copy(C.scale),t.matrix.copy(C.matrix),t.matrixWorld.copy(C.matrixWorld);for(var r=t.children,a=0,l=r.length;a<l;a++)r[a].updateMatrixWorld(!0);2===n.length?o(C,P,k):C.projectionMatrix.copy(P.projectionMatrix)}},u.getCamera=function(){return C},u.getFoveation=function(){return null!==y?y.fixedFoveation:null!==x?x.fixedFoveation:void 0},u.setFoveation=function(t){null!==y&&(y.fixedFoveation=t),null!==x&&void 0!==x.fixedFoveation&&(x.fixedFoveation=t)};var O=null,F=new at;return F.setAnimationLoop(l),u.setAnimationLoop=function(t){O=t},u.dispose=function(){},u}return(0,Q.default)(e,t),e}(yo);hn.prototype.isWebGLRenderer=!0;var sc=function(t){function e(){return(0,rt.default)(this,e),(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).apply(this,arguments))}return(0,Q.default)(e,t),e}(hn);sc.prototype.isWebGL1Renderer=!0;var lc=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;(0,rt.default)(this,t),this.name="",this.color=new Co(e),this.density=n}return(0,ot.default)(t,[{key:"clone",value:function(){return new t(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}]),t}();lc.prototype.isFogExp2=!0;var uc=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;(0,rt.default)(this,t),this.name="",this.color=new Co(e),this.near=n,this.far=i}return(0,ot.default)(t,[{key:"clone",value:function(){return new t(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),t}();uc.prototype.isFog=!0;var cc=function(t){function e(){(0,rt.default)(this,e);var t=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return t.type="Scene",t.background=null,t.environment=null,t.fog=null,t.overrideMaterial=null,t.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:t})),t}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"copy",value:function(t,n){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t,n),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}},{key:"toJSON",value:function(t){var n=(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"toJSON",this).call(this,t);return null!==this.fog&&(n.object.fog=this.fog.toJSON()),n}}]),e}(Hs);cc.prototype.isScene=!0;var fc=function(){function t(n,i){(0,rt.default)(this,t),this.array=n,this.stride=i,this.count=void 0!==n?n.length/i:0,this.usage=vo,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=e()}return(0,ot.default)(t,[{key:"onUploadCallback",value:function(){}},{key:"setUsage",value:function(t){return this.usage=t,this}},{key:"copy",value:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}},{key:"copyAt",value:function(t,e,n){t*=this.stride,n*=e.stride;for(var i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this}},{key:"set",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,e),this}},{key:"clone",value:function(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=e()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var n=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(n,this.stride);return i.setUsage(this.usage),i}},{key:"onUpload",value:function(t){return this.onUploadCallback=t,this}},{key:"toJSON",value:function(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=e()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},{key:"needsUpdate",set:function(t){!0===t&&this.version++}}]),t}();fc.prototype.isInterleavedBuffer=!0;var dc=new Go,hc=function(){function t(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,rt.default)(this,t),this.name="",this.data=e,this.itemSize=n,this.offset=i,this.normalized=!0===r}return(0,ot.default)(t,[{key:"applyMatrix4",value:function(t){for(var e=0,n=this.data.count;e<n;e++)dc.x=this.getX(e),dc.y=this.getY(e),dc.z=this.getZ(e),dc.applyMatrix4(t),this.setXYZ(e,dc.x,dc.y,dc.z);return this}},{key:"applyNormalMatrix",value:function(t){for(var e=0,n=this.count;e<n;e++)dc.x=this.getX(e),dc.y=this.getY(e),dc.z=this.getZ(e),dc.applyNormalMatrix(t),this.setXYZ(e,dc.x,dc.y,dc.z);return this}},{key:"transformDirection",value:function(t){for(var e=0,n=this.count;e<n;e++)dc.x=this.getX(e),dc.y=this.getY(e),dc.z=this.getZ(e),dc.transformDirection(t),this.setXYZ(e,dc.x,dc.y,dc.z);return this}},{key:"setX",value:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this}},{key:"setY",value:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this}},{key:"setZ",value:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this}},{key:"setW",value:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this}},{key:"getX",value:function(t){return this.data.array[t*this.data.stride+this.offset]}},{key:"getY",value:function(t){return this.data.array[t*this.data.stride+this.offset+1]}},{key:"getZ",value:function(t){return this.data.array[t*this.data.stride+this.offset+2]}},{key:"getW",value:function(t){return this.data.array[t*this.data.stride+this.offset+3]}},{key:"setXY",value:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this}},{key:"setXYZ",value:function(t,e,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this}},{key:"setXYZW",value:function(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this}},{key:"clone",value:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var n=[],i=0;i<this.count;i++)for(var r=i*this.data.stride+this.offset,a=0;a<this.itemSize;a++)n.push(this.data.array[r+a]);return new ol(new this.array.constructor(n),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new t(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var e=[],n=0;n<this.count;n++)for(var i=n*this.data.stride+this.offset,r=0;r<this.itemSize;r++)e.push(this.data.array[i+r]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(t){this.data.needsUpdate=t}}]),t}();hc.prototype.isInterleavedBufferAttribute=!0;var pc=function(t){function e(t){(0,rt.default)(this,e);var n=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return n.type="SpriteMaterial",n.color=new Co(16777215),n.map=null,n.alphaMap=null,n.rotation=0,n.sizeAttenuation=!0,n.transparent=!0,n.setValues(t),n}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this}}]),e}(nl);pc.prototype.isSpriteMaterial=!0;var vc=void 0,mc=new Go,gc=new Go,_c=new Go,yc=new To,xc=new To,bc=new _s,Sc=new Go,wc=new Go,Ec=new Go,Ac=new To,Tc=new To,Mc=new To,Ic=function(t){function e(t){(0,rt.default)(this,e);var n=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));if(n.type="Sprite",void 0===vc){vc=new El;var i=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new fc(i,5);vc.setIndex([0,1,2,0,2,3]),vc.setAttribute("position",new hc(r,3,0,!1)),vc.setAttribute("uv",new hc(r,2,3,!1))}return n.geometry=vc,n.material=void 0!==t?t:new pc,n.center=new To(.5,.5),n}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"raycast",value:function(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),gc.setFromMatrixScale(this.matrixWorld),bc.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),_c.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&gc.multiplyScalar(-_c.z);var n=this.material.rotation,i=void 0,r=void 0;0!==n&&(r=Math.cos(n),i=Math.sin(n));var a=this.center;pn(Sc.set(-.5,-.5,0),_c,a,gc,i,r),pn(wc.set(.5,-.5,0),_c,a,gc,i,r),pn(Ec.set(.5,.5,0),_c,a,gc,i,r),Ac.set(0,0),Tc.set(1,0),Mc.set(1,1);var o=t.ray.intersectTriangle(Sc,wc,Ec,!1,mc);if(null!==o||(pn(wc.set(-.5,.5,0),_c,a,gc,i,r),Tc.set(0,1),null!==(o=t.ray.intersectTriangle(Sc,Ec,wc,!1,mc)))){var s=t.ray.origin.distanceTo(mc);s<t.near||s>t.far||e.push({distance:s,point:mc.clone(),uv:tl.getUV(mc,Sc,wc,Ec,Ac,Tc,Mc,new To),face:null,object:this})}}},{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}]),e}(Hs);Ic.prototype.isSprite=!0;var Pc=new Go,kc=new Go,Lc=function(t){function e(){(0,rt.default)(this,e);var t=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return t._currentLevel=0,t.type="LOD",(0,B.default)(t,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),t.autoUpdate=!0,t}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"copy",value:function(t){(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t,!1);for(var n=t.levels,i=0,r=n.length;i<r;i++){var a=n[i];this.addLevel(a.object.clone(),a.distance)}return this.autoUpdate=t.autoUpdate,this}},{key:"addLevel",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e=Math.abs(e);var n=this.levels,i=void 0;for(i=0;i<n.length&&!(e<n[i].distance);i++);return n.splice(i,0,{distance:e,object:t}),this.add(t),this}},{key:"getCurrentLevel",value:function(){return this._currentLevel}},{key:"getObjectForDistance",value:function(t){var e=this.levels;if(e.length>0){var n=void 0,i=void 0;for(n=1,i=e.length;n<i&&!(t<e[n].distance);n++);return e[n-1].object}return null}},{key:"raycast",value:function(t,e){if(this.levels.length>0){Pc.setFromMatrixPosition(this.matrixWorld);var n=t.ray.origin.distanceTo(Pc);this.getObjectForDistance(n).raycast(t,e)}}},{key:"update",value:function(t){var e=this.levels;if(e.length>1){Pc.setFromMatrixPosition(t.matrixWorld),kc.setFromMatrixPosition(this.matrixWorld);var n=Pc.distanceTo(kc)/t.zoom;e[0].object.visible=!0;var i=void 0,r=void 0;for(i=1,r=e.length;i<r&&n>=e[i].distance;i++)e[i-1].object.visible=!1,e[i].object.visible=!0;for(this._currentLevel=i-1;i<r;i++)e[i].object.visible=!1}}},{key:"toJSON",value:function(t){var n=(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"toJSON",this).call(this,t);!1===this.autoUpdate&&(n.object.autoUpdate=!1),n.object.levels=[];for(var i=this.levels,r=0,a=i.length;r<a;r++){var o=i[r];n.object.levels.push({object:o.object.uuid,distance:o.distance})}return n}}]),e}(Hs),Cc=new Go,Rc=new Oo,Dc=new Oo,Nc=new Go,Bc=new _s,Oc=function(t){function e(t,n){(0,rt.default)(this,e);var i=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t,n));return i.type="SkinnedMesh",i.bindMode="attached",i.bindMatrix=new _s,i.bindMatrixInverse=new _s,i}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}},{key:"bind",value:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var t=new Oo,e=this.geometry.attributes.skinWeight,n=0,i=e.count;n<i;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);var r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}},{key:"updateMatrixWorld",value:function(t){(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"updateMatrixWorld",this).call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"boneTransform",value:function(t,e){var n=this.skeleton,i=this.geometry;Rc.fromBufferAttribute(i.attributes.skinIndex,t),Dc.fromBufferAttribute(i.attributes.skinWeight,t),Cc.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(var r=0;r<4;r++){var a=Dc.getComponent(r);if(0!==a){var o=Rc.getComponent(r);Bc.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),e.addScaledVector(Nc.copy(Cc).applyMatrix4(Bc),a)}}return e.applyMatrix4(this.bindMatrixInverse)}}]),e}(Gl);Oc.prototype.isSkinnedMesh=!0;var Fc=function(t){function e(){(0,rt.default)(this,e);var t=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return t.type="Bone",t}return(0,Q.default)(e,t),e}(Hs);Fc.prototype.isBone=!0;var zc=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments[3],a=arguments[4],o=arguments[5],s=arguments[6],l=arguments[7],u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:na,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:na,f=arguments[10],d=arguments[11];(0,rt.default)(this,e);var h=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,null,o,s,l,u,c,r,a,f,d));return h.image={data:t,width:n,height:i},h.magFilter=u,h.minFilter=c,h.generateMipmaps=!1,h.flipY=!1,h.unpackAlignment=1,h}return(0,Q.default)(e,t),e}(Bo);zc.prototype.isDataTexture=!0;var Vc=new _s,Uc=new _s,Gc=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];(0,rt.default)(this,t),this.uuid=e(),this.bones=n.slice(0),this.boneInverses=i,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}return(0,ot.default)(t,[{key:"init",value:function(){var t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new _s)}}},{key:"calculateInverses",value:function(){this.boneInverses.length=0;for(var t=0,e=this.bones.length;t<e;t++){var n=new _s;this.bones[t]&&n.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(n)}}},{key:"pose",value:function(){for(var t=0,e=this.bones.length;t<e;t++){var n=this.bones[t];n&&n.matrixWorld.copy(this.boneInverses[t]).invert()}for(var i=0,r=this.bones.length;i<r;i++){var a=this.bones[i];a&&(a.parent&&a.parent.isBone?(a.matrix.copy(a.parent.matrixWorld).invert(),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}}},{key:"update",value:function(){for(var t=this.bones,e=this.boneInverses,n=this.boneMatrices,i=this.boneTexture,r=0,a=t.length;r<a;r++){var o=t[r]?t[r].matrixWorld:Uc;Vc.multiplyMatrices(o,e[r]),Vc.toArray(n,16*r)}null!==i&&(i.needsUpdate=!0)}},{key:"clone",value:function(){return new t(this.bones,this.boneInverses)}},{key:"computeBoneTexture",value:function(){var t=Math.sqrt(4*this.bones.length);t=P(t),t=Math.max(t,4);var e=new Float32Array(t*t*4);e.set(this.boneMatrices);var n=new zc(e,t,t,ba,pa);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this.boneTextureSize=t,this}},{key:"getBoneByName",value:function(t){for(var e=0,n=this.bones.length;e<n;e++){var i=this.bones[e];if(i.name===t)return i}}},{key:"dispose",value:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}},{key:"fromJSON",value:function(t,e){this.uuid=t.uuid;for(var n=0,i=t.bones.length;n<i;n++){var r=t.bones[n],a=e[r];void 0===a&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),a=new Fc),this.bones.push(a),this.boneInverses.push((new _s).fromArray(t.boneInverses[n]))}return this.init(),this}},{key:"toJSON",value:function(){var t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;for(var e=this.bones,n=this.boneInverses,i=0,r=e.length;i<r;i++){var a=e[i];t.bones.push(a.uuid);var o=n[i];t.boneInverses.push(o.toArray())}return t}}]),t}(),Hc=function(t){function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,rt.default)(this,e),"number"==typeof i&&(r=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument."));var a=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t,n,i));return a.meshPerAttribute=r,a}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}},{key:"toJSON",value:function(){var t=(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"toJSON",this).call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}]),e}(ol);Hc.prototype.isInstancedBufferAttribute=!0;var Yc=new _s,jc=new _s,Wc=[],Xc=new Gl,Zc=function(t){function e(t,n,i){(0,rt.default)(this,e);var r=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t,n));return r.instanceMatrix=new Hc(new Float32Array(16*i),16),r.instanceColor=null,r.count=i,r.frustumCulled=!1,r}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.instanceMatrix.copy(t.instanceMatrix),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this}},{key:"getColorAt",value:function(t,e){e.fromArray(this.instanceColor.array,3*t)}},{key:"getMatrixAt",value:function(t,e){e.fromArray(this.instanceMatrix.array,16*t)}},{key:"raycast",value:function(t,e){var n=this.matrixWorld,i=this.count;if(Xc.geometry=this.geometry,Xc.material=this.material,void 0!==Xc.material)for(var r=0;r<i;r++){this.getMatrixAt(r,Yc),jc.multiplyMatrices(n,Yc),Xc.matrixWorld=jc,Xc.raycast(t,Wc);for(var a=0,o=Wc.length;a<o;a++){var s=Wc[a];s.instanceId=r,s.object=this,e.push(s)}Wc.length=0}}},{key:"setColorAt",value:function(t,e){null===this.instanceColor&&(this.instanceColor=new Hc(new Float32Array(3*this.instanceMatrix.count),3)),e.toArray(this.instanceColor.array,3*t)}},{key:"setMatrixAt",value:function(t,e){e.toArray(this.instanceMatrix.array,16*t)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),e}(Gl);Zc.prototype.isInstancedMesh=!0;var qc=function(t){function e(t){(0,rt.default)(this,e);var n=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return n.type="LineBasicMaterial",n.color=new Co(16777215),n.linewidth=1,n.linecap="round",n.linejoin="round",n.setValues(t),n}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this}}]),e}(nl);qc.prototype.isLineBasicMaterial=!0;var Qc=new Go,Jc=new Go,Kc=new _s,$c=new gs,tf=new us,ef=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new El,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new qc;(0,rt.default)(this,e);var i=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return i.type="Line",i.geometry=t,i.material=n,i.updateMorphTargets(),i}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.material=t.material,this.geometry=t.geometry,this}},{key:"computeLineDistances",value:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[0],i=1,r=e.count;i<r;i++)Qc.fromBufferAttribute(e,i-1),Jc.fromBufferAttribute(e,i),n[i]=n[i-1],n[i]+=Qc.distanceTo(Jc);t.setAttribute("lineDistance",new vl(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}},{key:"raycast",value:function(t,e){var n=this.geometry,i=this.matrixWorld,r=t.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),tf.copy(n.boundingSphere),tf.applyMatrix4(i),tf.radius+=r,!1!==t.ray.intersectsSphere(tf)){Kc.copy(i).invert(),$c.copy(t.ray).applyMatrix4(Kc);var o=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=new Go,u=new Go,c=new Go,f=new Go,d=this.isLineSegments?2:1;if(n.isBufferGeometry){var h=n.index,p=n.attributes,v=p.position;if(null!==h)for(var m=Math.max(0,a.start),g=Math.min(h.count,a.start+a.count),_=m,y=g-1;_<y;_+=d){var x=h.getX(_),b=h.getX(_+1);l.fromBufferAttribute(v,x),u.fromBufferAttribute(v,b);var S=$c.distanceSqToSegment(l,u,f,c);if(!(S>s)){f.applyMatrix4(this.matrixWorld);var w=t.ray.origin.distanceTo(f);w<t.near||w>t.far||e.push({distance:w,point:c.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else for(var E=Math.max(0,a.start),A=Math.min(v.count,a.start+a.count),T=E,M=A-1;T<M;T+=d){l.fromBufferAttribute(v,T),u.fromBufferAttribute(v,T+1);var I=$c.distanceSqToSegment(l,u,f,c);if(!(I>s)){f.applyMatrix4(this.matrixWorld);var P=t.ray.origin.distanceTo(f);P<t.near||P>t.far||e.push({distance:P,point:c.clone().applyMatrix4(this.matrixWorld),index:T,face:null,faceIndex:null,object:this})}}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=(0,D.default)(e);if(n.length>0){var i=e[n[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,a=i.length;r<a;r++){var o=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}else{var s=t.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),e}(Hs);ef.prototype.isLine=!0;var nf=new Go,rf=new Go,af=function(t){function e(t,n){(0,rt.default)(this,e);var i=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t,n));return i.type="LineSegments",i}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"computeLineDistances",value:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[],i=0,r=e.count;i<r;i+=2)nf.fromBufferAttribute(e,i),rf.fromBufferAttribute(e,i+1),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+nf.distanceTo(rf);t.setAttribute("lineDistance",new vl(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}]),e}(ef);af.prototype.isLineSegments=!0;var of=function(t){function e(t,n){(0,rt.default)(this,e);var i=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t,n));return i.type="LineLoop",i}return(0,Q.default)(e,t),e}(ef);of.prototype.isLineLoop=!0;var sf=function(t){function e(t){(0,rt.default)(this,e);var n=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return n.type="PointsMaterial",n.color=new Co(16777215),n.map=null,n.alphaMap=null,n.size=1,n.sizeAttenuation=!0,n.setValues(t),n}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this}}]),e}(nl);sf.prototype.isPointsMaterial=!0;var lf=new _s,uf=new gs,cf=new us,ff=new Go,df=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new El,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sf;(0,rt.default)(this,e);var i=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return i.type="Points",i.geometry=t,i.material=n,i.updateMorphTargets(),i}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.material=t.material,this.geometry=t.geometry,this}},{key:"raycast",value:function(t,e){var n=this.geometry,i=this.matrixWorld,r=t.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),cf.copy(n.boundingSphere),cf.applyMatrix4(i),cf.radius+=r,!1!==t.ray.intersectsSphere(cf)){lf.copy(i).invert(),uf.copy(t.ray).applyMatrix4(lf);var o=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o;if(n.isBufferGeometry){var l=n.index,u=n.attributes,c=u.position;if(null!==l)for(var f=Math.max(0,a.start),d=Math.min(l.count,a.start+a.count),h=f,p=d;h<p;h++){var v=l.getX(h);ff.fromBufferAttribute(c,v),vn(ff,v,s,i,t,e,this)}else for(var m=Math.max(0,a.start),g=Math.min(c.count,a.start+a.count),_=m,y=g;_<y;_++)ff.fromBufferAttribute(c,_),vn(ff,_,s,i,t,e,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=(0,D.default)(e);if(n.length>0){var i=e[n[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,a=i.length;r<a;r++){var o=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}else{var s=t.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),e}(Hs);df.prototype.isPoints=!0;var hf=function(t){function e(t,n,i,r,a,o,s,l,u){function c(){d.needsUpdate=!0,t.requestVideoFrameCallback(c)}(0,rt.default)(this,e);var f=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t,n,i,r,a,o,s,l,u));f.minFilter=void 0!==o?o:aa,f.magFilter=void 0!==a?a:aa,f.generateMipmaps=!1;var d=f;return"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(c),f}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var t=this.image;!1=="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),e}(Bo);hf.prototype.isVideoTexture=!0;var pf=function(t){function e(t,n,i){(0,rt.default)(this,e);var r=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,{width:t,height:n}));return r.format=i,r.magFilter=na,r.minFilter=na,r.generateMipmaps=!1,r.needsUpdate=!0,r}return(0,Q.default)(e,t),e}(Bo);pf.prototype.isFramebufferTexture=!0;var vf=function(t){function e(t,n,i,r,a,o,s,l,u,c,f,d){(0,rt.default)(this,e);var h=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,null,o,s,l,u,c,r,a,f,d));return h.image={width:n,height:i},h.mipmaps=t,h.flipY=!1,h.generateMipmaps=!1,h}return(0,Q.default)(e,t),e}(Bo);vf.prototype.isCompressedTexture=!0;var mf=function(t){function e(t,n,i,r,a,o,s,l,u){(0,rt.default)(this,e);var c=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t,n,i,r,a,o,s,l,u));return c.needsUpdate=!0,c}return(0,Q.default)(e,t),e}(Bo);mf.prototype.isCanvasTexture=!0;var gf=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;(0,rt.default)(this,e);var a=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));a.type="CircleGeometry",a.parameters={radius:t,segments:n,thetaStart:i,thetaLength:r},n=Math.max(3,n);var o=[],s=[],l=[],u=[],c=new Go,f=new To;s.push(0,0,0),l.push(0,0,1),u.push(.5,.5);for(var d=0,h=3;d<=n;d++,h+=3){var p=i+d/n*r;c.x=t*Math.cos(p),c.y=t*Math.sin(p),s.push(c.x,c.y,c.z),l.push(0,0,1),f.x=(s[h]/t+1)/2,f.y=(s[h+1]/t+1)/2,u.push(f.x,f.y)}for(var v=1;v<=n;v++)o.push(v,v+1,0);return a.setIndex(o),a.setAttribute("position",new vl(s,3)),a.setAttribute("normal",new vl(l,3)),a.setAttribute("uv",new vl(u,2)),a}return(0,Q.default)(e,t),(0,ot.default)(e,null,[{key:"fromJSON",value:function(t){return new e(t.radius,t.segments,t.thetaStart,t.thetaLength)}}]),e}(El),_f=function(t){function e(){function t(t){for(var e=m,r=new To,o=new Go,s=0,c=!0===t?n:i,g=!0===t?1:-1,x=1;x<=a;x++)h.push(0,_*g,0),p.push(0,g,0),v.push(.5,.5),m++;for(var b=m,S=0;S<=a;S++){var w=S/a,E=w*u+l,A=Math.cos(E),T=Math.sin(E);o.x=c*T,o.y=_*g,o.z=c*A,h.push(o.x,o.y,o.z),p.push(0,g,0),r.x=.5*A+.5,r.y=.5*T*g+.5,v.push(r.x,r.y),m++}for(var M=0;M<a;M++){var I=e+M,P=b+M;!0===t?d.push(P,P+1,I):d.push(P+1,P,I),s+=3}f.addGroup(y,s,!0===t?1:2),y+=s}var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;(0,rt.default)(this,e);var c=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));c.type="CylinderGeometry",c.parameters={radiusTop:n,radiusBottom:i,height:r,radialSegments:a,heightSegments:o,openEnded:s,thetaStart:l,thetaLength:u};var f=c;a=Math.floor(a),o=Math.floor(o);var d=[],h=[],p=[],v=[],m=0,g=[],_=r/2,y=0;return function(){for(var t=new Go,e=new Go,s=0,c=(i-n)/r,x=0;x<=o;x++){for(var b=[],S=x/o,w=S*(i-n)+n,E=0;E<=a;E++){var A=E/a,T=A*u+l,M=Math.sin(T),I=Math.cos(T);e.x=w*M,e.y=-S*r+_,e.z=w*I,h.push(e.x,e.y,e.z),t.set(M,c,I).normalize(),p.push(t.x,t.y,t.z),v.push(A,1-S),b.push(m++)}g.push(b)}for(var P=0;P<a;P++)for(var k=0;k<o;k++){var L=g[k][P],C=g[k+1][P],R=g[k+1][P+1],D=g[k][P+1];d.push(L,C,D),d.push(C,R,D),s+=6}f.addGroup(y,s,0),y+=s}(),!1===s&&(n>0&&t(!0),i>0&&t(!1)),c.setIndex(d),c.setAttribute("position",new vl(h,3)),c.setAttribute("normal",new vl(p,3)),c.setAttribute("uv",new vl(v,2)),c}return(0,Q.default)(e,t),(0,ot.default)(e,null,[{key:"fromJSON",value:function(t){return new e(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}]),e}(El),yf=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;(0,rt.default)(this,e);var l=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,0,t,n,i,r,a,o,s));return l.type="ConeGeometry",l.parameters={radius:t,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:s},l}return(0,Q.default)(e,t),(0,ot.default)(e,null,[{key:"fromJSON",value:function(t){return new e(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}]),e}(_f),xf=function(t){function e(){function t(t,e,n,r){for(var a=r+1,o=[],s=0;s<=a;s++){o[s]=[];for(var l=t.clone().lerp(n,s/a),u=e.clone().lerp(n,s/a),c=a-s,f=0;f<=c;f++)o[s][f]=0===f&&s===a?l:l.clone().lerp(u,f/c)}for(var d=0;d<a;d++)for(var h=0;h<2*(a-d)-1;h++){var p=Math.floor(h/2);h%2==0?(i(o[d][p+1]),i(o[d+1][p]),i(o[d][p])):(i(o[d][p+1]),i(o[d+1][p+1]),i(o[d+1][p]))}}function n(){for(var t=0;t<v.length;t+=6){var e=v[t+0],n=v[t+2],i=v[t+4],r=Math.max(e,n,i),a=Math.min(e,n,i);r>.9&&a<.1&&(e<.2&&(v[t+0]+=1),n<.2&&(v[t+2]+=1),i<.2&&(v[t+4]+=1))}}function i(t){p.push(t.x,t.y,t.z)}function r(t,e){var n=3*t;e.x=u[n+0],e.y=u[n+1],e.z=u[n+2]}function a(){for(var t=new Go,e=new Go,n=new Go,i=new Go,r=new To,a=new To,l=new To,u=0,c=0;u<p.length;u+=9,c+=6){t.set(p[u+0],p[u+1],p[u+2]),e.set(p[u+3],p[u+4],p[u+5]),n.set(p[u+6],p[u+7],p[u+8]),r.set(v[c+0],v[c+1]),a.set(v[c+2],v[c+3]),l.set(v[c+4],v[c+5]),i.copy(t).add(e).add(n).divideScalar(3);var f=s(i);o(r,c+0,t,f),o(a,c+2,e,f),o(l,c+4,n,f)}}function o(t,e,n,i){i<0&&1===t.x&&(v[e]=t.x-1),0===n.x&&0===n.z&&(v[e]=i/2/Math.PI+.5)}function s(t){return Math.atan2(t.z,-t.x)}function l(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,rt.default)(this,e);var h=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));h.type="PolyhedronGeometry",h.parameters={vertices:u,indices:c,radius:f,detail:d};var p=[],v=[];return function(e){for(var n=new Go,i=new Go,a=new Go,o=0;o<c.length;o+=3)r(c[o+0],n),r(c[o+1],i),r(c[o+2],a),t(n,i,a,e)}(d),function(t){for(var e=new Go,n=0;n<p.length;n+=3)e.x=p[n+0],e.y=p[n+1],e.z=p[n+2],e.normalize().multiplyScalar(t),p[n+0]=e.x,p[n+1]=e.y,p[n+2]=e.z}(f),function(){for(var t=new Go,e=0;e<p.length;e+=3){t.x=p[e+0],t.y=p[e+1],t.z=p[e+2];var i=s(t)/2/Math.PI+.5,r=l(t)/Math.PI+.5;v.push(i,1-r)}a(),n()}(),h.setAttribute("position",new vl(p,3)),h.setAttribute("normal",new vl(p.slice(),3)),h.setAttribute("uv",new vl(v,2)),0===d?h.computeVertexNormals():h.normalizeNormals(),h}return(0,Q.default)(e,t),(0,ot.default)(e,null,[{key:"fromJSON",value:function(t){return new e(t.vertices,t.indices,t.radius,t.details)}}]),e}(El),bf=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,rt.default)(this,e);var i=(1+Math.sqrt(5))/2,r=1/i,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],s=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,a,o,t,n));return s.type="DodecahedronGeometry",s.parameters={radius:t,detail:n},s}return(0,Q.default)(e,t),(0,ot.default)(e,null,[{key:"fromJSON",value:function(t){return new e(t.radius,t.detail)}}]),e}(xf),Sf=new Go,wf=new Go,Ef=new Go,Af=new tl,Tf=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;(0,rt.default)(this,e);var i=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));if(i.type="EdgesGeometry",i.parameters={geometry:t,thresholdAngle:n},null!==t){for(var r=Math.pow(10,4),a=Math.cos(wo*n),o=t.getIndex(),s=t.getAttribute("position"),l=o?o.count:s.count,u=[0,0,0],c=["a","b","c"],f=new Array(3),d={},h=[],p=0;p<l;p+=3){o?(u[0]=o.getX(p),u[1]=o.getX(p+1),u[2]=o.getX(p+2)):(u[0]=p,u[1]=p+1,u[2]=p+2);var v=Af.a,m=Af.b,g=Af.c;if(v.fromBufferAttribute(s,u[0]),m.fromBufferAttribute(s,u[1]),g.fromBufferAttribute(s,u[2]),Af.getNormal(Ef),f[0]=Math.round(v.x*r)+","+Math.round(v.y*r)+","+Math.round(v.z*r),f[1]=Math.round(m.x*r)+","+Math.round(m.y*r)+","+Math.round(m.z*r),f[2]=Math.round(g.x*r)+","+Math.round(g.y*r)+","+Math.round(g.z*r),f[0]!==f[1]&&f[1]!==f[2]&&f[2]!==f[0])for(var _=0;_<3;_++){var y=(_+1)%3,x=f[_],b=f[y],S=Af[c[_]],w=Af[c[y]],E=x+"_"+b,A=b+"_"+x;A in d&&d[A]?(Ef.dot(d[A].normal)<=a&&(h.push(S.x,S.y,S.z),h.push(w.x,w.y,w.z)),d[A]=null):E in d||(d[E]={index0:u[_],index1:u[y],normal:Ef.clone()})}}for(var T in d)if(d[T]){var M=d[T],I=M.index0,P=M.index1;Sf.fromBufferAttribute(s,I),wf.fromBufferAttribute(s,P),h.push(Sf.x,Sf.y,Sf.z),h.push(wf.x,wf.y,wf.z)}i.setAttribute("position",new vl(h,3))}return i}return(0,Q.default)(e,t),e}(El),Mf=function(){function t(){(0,rt.default)(this,t),this.type="Curve",this.arcLengthDivisions=200}return(0,ot.default)(t,[{key:"getPoint",value:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function(t,e){var n=this.getUtoTmapping(t);return this.getPoint(n,e)}},{key:"getPoints",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}},{key:"getSpacedPoints",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}},{key:"getLength",value:function(){var t=this.getLengths();return t[t.length-1]}},{key:"getLengths",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e=[],n=void 0,i=this.getPoint(0),r=0;e.push(0);for(var a=1;a<=t;a++)n=this.getPoint(a/t),r+=n.distanceTo(i),e.push(r),i=n;return this.cacheArcLengths=e,e}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(t,e){var n=this.getLengths(),i=0,r=n.length,a=void 0;a=e||t*n[r-1];for(var o=0,s=r-1,l=void 0;o<=s;)if(i=Math.floor(o+(s-o)/2),(l=n[i]-a)<0)o=i+1;else{if(!(l>0)){s=i;break}s=i-1}if(i=s,n[i]===a)return i/(r-1);var u=n[i];return(i+(a-u)/(n[i+1]-u))/(r-1)}},{key:"getTangent",value:function(t,e){var n=t-1e-4,i=t+1e-4;n<0&&(n=0),i>1&&(i=1);var r=this.getPoint(n),a=this.getPoint(i),o=e||(r.isVector2?new To:new Go);return o.copy(a).sub(r).normalize(),o}},{key:"getTangentAt",value:function(t,e){var n=this.getUtoTmapping(t);return this.getTangent(n,e)}},{key:"computeFrenetFrames",value:function(t,e){for(var i=new Go,r=[],a=[],o=[],s=new Go,l=new _s,u=0;u<=t;u++){var c=u/t;r[u]=this.getTangentAt(c,new Go)}a[0]=new Go,o[0]=new Go;var f=Number.MAX_VALUE,d=Math.abs(r[0].x),h=Math.abs(r[0].y),p=Math.abs(r[0].z);d<=f&&(f=d,i.set(1,0,0)),h<=f&&(f=h,i.set(0,1,0)),p<=f&&i.set(0,0,1),s.crossVectors(r[0],i).normalize(),a[0].crossVectors(r[0],s),o[0].crossVectors(r[0],a[0]);for(var v=1;v<=t;v++){if(a[v]=a[v-1].clone(),o[v]=o[v-1].clone(),s.crossVectors(r[v-1],r[v]),s.length()>F.default){s.normalize();var m=Math.acos(n(r[v-1].dot(r[v]),-1,1));a[v].applyMatrix4(l.makeRotationAxis(s,m))}o[v].crossVectors(r[v],a[v])}if(!0===e){var g=Math.acos(n(a[0].dot(a[t]),-1,1));g/=t,r[0].dot(s.crossVectors(a[0],a[t]))>0&&(g=-g);for(var _=1;_<=t;_++)a[_].applyMatrix4(l.makeRotationAxis(r[_],g*_)),o[_].crossVectors(r[_],a[_])}return{tangents:r,normals:a,binormals:o}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}},{key:"toJSON",value:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}},{key:"fromJSON",value:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}]),t}(),If=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;(0,rt.default)(this,e);var u=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return u.type="EllipseCurve",u.aX=t,u.aY=n,u.xRadius=i,u.yRadius=r,u.aStartAngle=a,u.aEndAngle=o,u.aClockwise=s,u.aRotation=l,u}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"getPoint",value:function(t,e){for(var n=e||new To,i=2*Math.PI,r=this.aEndAngle-this.aStartAngle,a=Math.abs(r)<F.default;r<0;)r+=i;for(;r>i;)r-=i;r<F.default&&(r=a?0:i),!0!==this.aClockwise||a||(r===i?r=-i:r-=i);var o=this.aStartAngle+t*r,s=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var u=Math.cos(this.aRotation),c=Math.sin(this.aRotation),f=s-this.aX,d=l-this.aY;s=f*u-d*c+this.aX,l=f*c+d*u+this.aY}return n.set(s,l)}},{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}},{key:"toJSON",value:function(){var t=(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"toJSON",this).call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}},{key:"fromJSON",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"fromJSON",this).call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}]),e}(Mf);If.prototype.isEllipseCurve=!0;var Pf=function(t){function e(t,n,i,r,a,o){(0,rt.default)(this,e);var s=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t,n,i,i,r,a,o));return s.type="ArcCurve",s}return(0,Q.default)(e,t),e}(If);Pf.prototype.isArcCurve=!0;var kf=new Go,Lf=new mn,Cf=new mn,Rf=new mn,Df=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;(0,rt.default)(this,e);var a=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return a.type="CatmullRomCurve3",a.points=t,a.closed=n,a.curveType=i,a.tension=r,a}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Go,n=e,i=this.points,r=i.length,a=(r-(this.closed?0:1))*t,o=Math.floor(a),s=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/r)+1)*r:0===s&&o===r-1&&(o=r-2,s=1);var l=void 0,u=void 0;this.closed||o>0?l=i[(o-1)%r]:(kf.subVectors(i[0],i[1]).add(i[0]),l=kf);var c=i[o%r],f=i[(o+1)%r];if(this.closed||o+2<r?u=i[(o+2)%r]:(kf.subVectors(i[r-1],i[r-2]).add(i[r-1]),u=kf),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,h=Math.pow(l.distanceToSquared(c),d),p=Math.pow(c.distanceToSquared(f),d),v=Math.pow(f.distanceToSquared(u),d);p<1e-4&&(p=1),h<1e-4&&(h=p),v<1e-4&&(v=p),Lf.initNonuniformCatmullRom(l.x,c.x,f.x,u.x,h,p,v),Cf.initNonuniformCatmullRom(l.y,c.y,f.y,u.y,h,p,v),Rf.initNonuniformCatmullRom(l.z,c.z,f.z,u.z,h,p,v)}else"catmullrom"===this.curveType&&(Lf.initCatmullRom(l.x,c.x,f.x,u.x,this.tension),Cf.initCatmullRom(l.y,c.y,f.y,u.y,this.tension),Rf.initCatmullRom(l.z,c.z,f.z,u.z,this.tension));return n.set(Lf.calc(s),Cf.calc(s),Rf.calc(s)),n}},{key:"copy",value:function(t){(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.points=[];for(var n=0,i=t.points.length;n<i;n++){var r=t.points[n];this.points.push(r.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}},{key:"toJSON",value:function(){var t=(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"toJSON",this).call(this);t.points=[];for(var n=0,i=this.points.length;n<i;n++){var r=this.points[n];t.points.push(r.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}},{key:"fromJSON",value:function(t){(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"fromJSON",this).call(this,t),this.points=[];for(var n=0,i=t.points.length;n<i;n++){var r=t.points[n];this.points.push((new Go).fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}]),e}(Mf);Df.prototype.isCatmullRomCurve3=!0;var Nf=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new To,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new To,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new To,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new To;(0,rt.default)(this,e);var a=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return a.type="CubicBezierCurve",a.v0=t,a.v1=n,a.v2=i,a.v3=r,a}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new To,n=e,i=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(Tn(t,i.x,r.x,a.x,o.x),Tn(t,i.y,r.y,a.y,o.y)),n}},{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}},{key:"toJSON",value:function(){var t=(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"toJSON",this).call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}},{key:"fromJSON",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"fromJSON",this).call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}]),e}(Mf);Nf.prototype.isCubicBezierCurve=!0;var Bf=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Go,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Go,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Go,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Go;(0,rt.default)(this,e);var a=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return a.type="CubicBezierCurve3",a.v0=t,a.v1=n,a.v2=i,a.v3=r,a}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Go,n=e,i=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(Tn(t,i.x,r.x,a.x,o.x),Tn(t,i.y,r.y,a.y,o.y),Tn(t,i.z,r.z,a.z,o.z)),n}},{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}},{key:"toJSON",value:function(){var t=(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"toJSON",this).call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}},{key:"fromJSON",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"fromJSON",this).call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}]),e}(Mf);Bf.prototype.isCubicBezierCurve3=!0;var Of=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new To,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new To;(0,rt.default)(this,e);var i=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return i.type="LineCurve",i.v1=t,i.v2=n,i}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new To,n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}},{key:"getPointAt",value:function(t,e){return this.getPoint(t,e)}},{key:"getTangent",value:function(t,e){var n=e||new To;return n.copy(this.v2).sub(this.v1).normalize(),n}},{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}},{key:"toJSON",value:function(){var t=(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"toJSON",this).call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}},{key:"fromJSON",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"fromJSON",this).call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}]),e}(Mf);Of.prototype.isLineCurve=!0;var Ff=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Go,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Go;(0,rt.default)(this,e);var i=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return i.type="LineCurve3",i.isLineCurve3=!0,i.v1=t,i.v2=n,i}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Go,n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}},{key:"getPointAt",value:function(t,e){return this.getPoint(t,e)}},{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}},{key:"toJSON",value:function(){var t=(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"toJSON",this).call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}},{key:"fromJSON",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"fromJSON",this).call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}]),e}(Mf),zf=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new To,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new To,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new To;(0,rt.default)(this,e);var r=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return r.type="QuadraticBezierCurve",r.v0=t,r.v1=n,r.v2=i,r}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new To,n=e,i=this.v0,r=this.v1,a=this.v2;return n.set(bn(t,i.x,r.x,a.x),bn(t,i.y,r.y,a.y)),n}},{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}},{key:"toJSON",value:function(){var t=(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"toJSON",this).call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}},{key:"fromJSON",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"fromJSON",this).call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}]),e}(Mf);zf.prototype.isQuadraticBezierCurve=!0;var Vf=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Go,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Go,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Go;(0,rt.default)(this,e);var r=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return r.type="QuadraticBezierCurve3",r.v0=t,r.v1=n,r.v2=i,r}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Go,n=e,i=this.v0,r=this.v1,a=this.v2;return n.set(bn(t,i.x,r.x,a.x),bn(t,i.y,r.y,a.y),bn(t,i.z,r.z,a.z)),n}},{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}},{key:"toJSON",value:function(){var t=(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"toJSON",this).call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}},{key:"fromJSON",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"fromJSON",this).call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}]),e}(Mf);Vf.prototype.isQuadraticBezierCurve3=!0;var Uf=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,rt.default)(this,e);var n=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return n.type="SplineCurve",n.points=t,n}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new To,n=e,i=this.points,r=(i.length-1)*t,a=Math.floor(r),o=r-a,s=i[0===a?a:a-1],l=i[a],u=i[a>i.length-2?i.length-1:a+1],c=i[a>i.length-3?i.length-1:a+2];return n.set(gn(o,s.x,l.x,u.x,c.x),gn(o,s.y,l.y,u.y,c.y)),n}},{key:"copy",value:function(t){(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.points=[];for(var n=0,i=t.points.length;n<i;n++){var r=t.points[n];this.points.push(r.clone())}return this}},{key:"toJSON",value:function(){var t=(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"toJSON",this).call(this);t.points=[];for(var n=0,i=this.points.length;n<i;n++){var r=this.points[n];t.points.push(r.toArray())}return t}},{key:"fromJSON",value:function(t){(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"fromJSON",this).call(this,t),this.points=[];for(var n=0,i=t.points.length;n<i;n++){var r=t.points[n];this.points.push((new To).fromArray(r))}return this}}]),e}(Mf);Uf.prototype.isSplineCurve=!0;var Gf=(0,nt.default)({__proto__:null,ArcCurve:Pf,CatmullRomCurve3:Df,CubicBezierCurve:Nf,CubicBezierCurve3:Bf,EllipseCurve:If,LineCurve:Of,LineCurve3:Ff,QuadraticBezierCurve:zf,QuadraticBezierCurve3:Vf,SplineCurve:Uf}),Hf=function(t){function e(){(0,rt.default)(this,e);var t=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return t.type="CurvePath",t.curves=[],t.autoClose=!1,t}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"add",value:function(t){this.curves.push(t)}},{key:"closePath",value:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Of(e,t))}},{key:"getPoint",value:function(t,e){for(var n=t*this.getLength(),i=this.getCurveLengths(),r=0;r<i.length;){if(i[r]>=n){var a=i[r]-n,o=this.curves[r],s=o.getLength(),l=0===s?0:1-a/s;return o.getPointAt(l,e)}r++}return null}},{key:"getLength",value:function(){var t=this.getCurveLengths();return t[t.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}},{key:"getSpacedPoints",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}},{key:"getPoints",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,e=[],n=void 0,i=0,r=this.curves;i<r.length;i++)for(var a=r[i],o=a&&a.isEllipseCurve?2*t:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?t*a.points.length:t,s=a.getPoints(o),l=0;l<s.length;l++){var u=s[l];n&&n.equals(u)||(e.push(u),n=u)}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}},{key:"copy",value:function(t){(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.curves=[];for(var n=0,i=t.curves.length;n<i;n++){var r=t.curves[n];this.curves.push(r.clone())}return this.autoClose=t.autoClose,this}},{key:"toJSON",value:function(){var t=(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"toJSON",this).call(this);t.autoClose=this.autoClose,t.curves=[];for(var n=0,i=this.curves.length;n<i;n++){var r=this.curves[n];t.curves.push(r.toJSON())}return t}},{key:"fromJSON",value:function(t){(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"fromJSON",this).call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var n=0,i=t.curves.length;n<i;n++){var r=t.curves[n];this.curves.push((new Gf[r.type]).fromJSON(r))}return this}}]),e}(Mf),Yf=function(t){function e(t){(0,rt.default)(this,e);var n=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return n.type="Path",n.currentPoint=new To,t&&n.setFromPoints(t),n}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"setFromPoints",value:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}},{key:"moveTo",value:function(t,e){return this.currentPoint.set(t,e),this}},{key:"lineTo",value:function(t,e){var n=new Of(this.currentPoint.clone(),new To(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}},{key:"quadraticCurveTo",value:function(t,e,n,i){var r=new zf(this.currentPoint.clone(),new To(t,e),new To(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}},{key:"bezierCurveTo",value:function(t,e,n,i,r,a){var o=new Nf(this.currentPoint.clone(),new To(t,e),new To(n,i),new To(r,a));return this.curves.push(o),this.currentPoint.set(r,a),this}},{key:"splineThru",value:function(t){var e=[this.currentPoint.clone()].concat(t),n=new Uf(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}},{key:"arc",value:function(t,e,n,i,r,a){var o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(t+o,e+s,n,i,r,a),this}},{key:"absarc",value:function(t,e,n,i,r,a){return this.absellipse(t,e,n,n,i,r,a),this}},{key:"ellipse",value:function(t,e,n,i,r,a,o,s){var l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(t+l,e+u,n,i,r,a,o,s),this}},{key:"absellipse",value:function(t,e,n,i,r,a,o,s){var l=new If(t,e,n,i,r,a,o,s);if(this.curves.length>0){var u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);var c=l.getPoint(1);return this.currentPoint.copy(c),this}},{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.currentPoint.copy(t.currentPoint),this}},{key:"toJSON",value:function(){var t=(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"toJSON",this).call(this);return t.currentPoint=this.currentPoint.toArray(),t}},{key:"fromJSON",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"fromJSON",this).call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}]),e}(Hf),jf=function(t){function n(t){(0,rt.default)(this,n);var i=(0,Z.default)(this,(n.__proto__||(0,W.default)(n)).call(this,t));return i.uuid=e(),i.type="Shape",i.holes=[],i}return(0,Q.default)(n,t),(0,ot.default)(n,[{key:"getPointsHoles",value:function(t){for(var e=[],n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e}},{key:"extractPoints",value:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}},{key:"copy",value:function(t){(0,V.default)(n.prototype.__proto__||(0,W.default)(n.prototype),"copy",this).call(this,t),this.holes=[];for(var e=0,i=t.holes.length;e<i;e++){var r=t.holes[e];this.holes.push(r.clone())}return this}},{key:"toJSON",value:function(){var t=(0,V.default)(n.prototype.__proto__||(0,W.default)(n.prototype),"toJSON",this).call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,i=this.holes.length;e<i;e++){var r=this.holes[e];t.holes.push(r.toJSON())}return t}},{key:"fromJSON",value:function(t){(0,V.default)(n.prototype.__proto__||(0,W.default)(n.prototype),"fromJSON",this).call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,i=t.holes.length;e<i;e++){var r=t.holes[e];this.holes.push((new Yf).fromJSON(r))}return this}}]),n}(Yf),Wf={triangulate:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,i=e&&e.length,r=i?e[0]*n:t.length,a=Mn(t,0,r,n,!0),o=[];if(!a||a.next===a.prev)return o;var s=void 0,l=void 0,u=void 0,c=void 0,f=void 0,d=void 0,h=void 0;if(i&&(a=Dn(t,e,a,n)),t.length>80*n){s=u=t[0],l=c=t[1];for(var p=n;p<r;p+=n)f=t[p],d=t[p+1],f<s&&(s=f),d<l&&(l=d),f>u&&(u=f),d>c&&(c=d);h=Math.max(u-s,c-l),h=0!==h?1/h:0}return Pn(a,o,n,s,l,h),o}},Xf=function(){function t(){(0,rt.default)(this,t)}return(0,ot.default)(t,null,[{key:"area",value:function(t){for(var e=t.length,n=0,i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*n}},{key:"isClockWise",value:function(e){return t.area(e)<0}},{key:"triangulateShape",value:function(t,e){var n=[],i=[],r=[];ri(t),ai(n,t);var a=t.length;e.forEach(ri);for(var o=0;o<e.length;o++)i.push(a),a+=e[o].length,ai(n,e[o]);for(var s=Wf.triangulate(n,i),l=0;l<s.length;l+=3)r.push(s.slice(l,l+3));return r}}]),t}(),Zf=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new jf([new To(.5,.5),new To(-.5,.5),new To(-.5,-.5),new To(.5,-.5)]),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,rt.default)(this,e);var i=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));i.type="ExtrudeGeometry",i.parameters={shapes:t,options:n},t=Array.isArray(t)?t:[t];for(var r=i,a=[],o=[],s=0,l=t.length;s<l;s++){var u=t[s];!function(t){function e(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}function i(t,e,n){var i=void 0,r=void 0,a=void 0,o=t.x-e.x,s=t.y-e.y,l=n.x-t.x,u=n.y-t.y,c=o*o+s*s,f=o*u-s*l;if(Math.abs(f)>F.default){var h=Math.sqrt(c),p=Math.sqrt(l*l+u*u),v=e.x-s/h,m=e.y+o/h,g=n.x-u/p,_=n.y+l/p,y=((g-v)*u-(_-m)*l)/(o*u-s*l);i=v+o*y-t.x,r=m+s*y-t.y;var x=i*i+r*r;if(x<=2)return new To(i,r);a=Math.sqrt(x/2)}else{var b=!1;o>F.default?l>F.default&&(b=!0):o<-F.default?l<-F.default&&(b=!0):(0,d.default)(s)===(0,d.default)(u)&&(b=!0),b?(i=-s,r=o,a=Math.sqrt(c)):(i=o,r=s,a=Math.sqrt(c/2))}return new To(i/a,r/a)}function s(t,e){for(var n=t.length;--n>=0;){var i=n,r=n-1;r<0&&(r=t.length-1);for(var a=0,o=m+2*S;a<o;a++){var s=H*a,l=H*(a+1);c(e+i+s,e+r+s,e+r+l,e+i+l)}}}function l(t,e,n){p.push(t),p.push(e),p.push(n)}function u(t,e,n){f(t),f(e),f(n);var i=a.length/3,o=E.generateTopUV(r,a,i-3,i-2,i-1);h(o[0]),h(o[1]),h(o[2])}function c(t,e,n,i){f(t),f(e),f(i),f(e),f(n),f(i);var o=a.length/3,s=E.generateSideWallUV(r,a,o-6,o-3,o-2,o-1);h(s[0]),h(s[1]),h(s[3]),h(s[1]),h(s[2]),h(s[3])}function f(t){a.push(p[3*t+0]),a.push(p[3*t+1]),a.push(p[3*t+2])}function h(t){o.push(t.x),o.push(t.y)}var p=[],v=void 0!==n.curveSegments?n.curveSegments:12,m=void 0!==n.steps?n.steps:1,g=void 0!==n.depth?n.depth:1,_=void 0===n.bevelEnabled||n.bevelEnabled,y=void 0!==n.bevelThickness?n.bevelThickness:.2,x=void 0!==n.bevelSize?n.bevelSize:y-.1,b=void 0!==n.bevelOffset?n.bevelOffset:0,S=void 0!==n.bevelSegments?n.bevelSegments:3,w=n.extrudePath,E=void 0!==n.UVGenerator?n.UVGenerator:qf;void 0!==n.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),g=n.amount);var A=void 0,T=!1,M=void 0,I=void 0,P=void 0,k=void 0;w&&(A=w.getSpacedPoints(m),T=!0,_=!1,M=w.computeFrenetFrames(m,!1),I=new Go,P=new Go,k=new Go),_||(S=0,y=0,x=0,b=0);var L=t.extractPoints(v),C=L.shape,R=L.holes;if(!Xf.isClockWise(C)){C=C.reverse();for(var D=0,N=R.length;D<N;D++){var B=R[D];Xf.isClockWise(B)&&(R[D]=B.reverse())}}for(var O=Xf.triangulateShape(C,R),z=C,V=0,U=R.length;V<U;V++){var G=R[V];C=C.concat(G)}for(var H=C.length,Y=O.length,j=[],W=0,X=z.length,Z=X-1,q=W+1;W<X;W++,Z++,q++)Z===X&&(Z=0),q===X&&(q=0),j[W]=i(z[W],z[Z],z[q]);for(var Q=[],J=void 0,K=j.concat(),$=0,tt=R.length;$<tt;$++){var et=R[$];J=[];for(var nt=0,it=et.length,rt=it-1,at=nt+1;nt<it;nt++,rt++,at++)rt===it&&(rt=0),at===it&&(at=0),J[nt]=i(et[nt],et[rt],et[at]);Q.push(J),K=K.concat(J)}for(var ot=0;ot<S;ot++){for(var st=ot/S,lt=y*Math.cos(st*Math.PI/2),ut=x*Math.sin(st*Math.PI/2)+b,ct=0,ft=z.length;ct<ft;ct++){var dt=e(z[ct],j[ct],ut);l(dt.x,dt.y,-lt)}for(var ht=0,pt=R.length;ht<pt;ht++){var vt=R[ht];J=Q[ht];for(var mt=0,gt=vt.length;mt<gt;mt++){var _t=e(vt[mt],J[mt],ut);l(_t.x,_t.y,-lt)}}}for(var yt=x+b,xt=0;xt<H;xt++){var bt=_?e(C[xt],K[xt],yt):C[xt];T?(P.copy(M.normals[0]).multiplyScalar(bt.x),I.copy(M.binormals[0]).multiplyScalar(bt.y),k.copy(A[0]).add(P).add(I),l(k.x,k.y,k.z)):l(bt.x,bt.y,0)}for(var St=1;St<=m;St++)for(var wt=0;wt<H;wt++){var Et=_?e(C[wt],K[wt],yt):C[wt];T?(P.copy(M.normals[St]).multiplyScalar(Et.x),I.copy(M.binormals[St]).multiplyScalar(Et.y),k.copy(A[St]).add(P).add(I),l(k.x,k.y,k.z)):l(Et.x,Et.y,g/m*St)}for(var At=S-1;At>=0;At--){for(var Tt=At/S,Mt=y*Math.cos(Tt*Math.PI/2),It=x*Math.sin(Tt*Math.PI/2)+b,Pt=0,kt=z.length;Pt<kt;Pt++){var Lt=e(z[Pt],j[Pt],It);l(Lt.x,Lt.y,g+Mt)}for(var Ct=0,Rt=R.length;Ct<Rt;Ct++){var Dt=R[Ct];J=Q[Ct];for(var Nt=0,Bt=Dt.length;Nt<Bt;Nt++){var Ot=e(Dt[Nt],J[Nt],It);T?l(Ot.x,Ot.y+A[m-1].y,A[m-1].x+Mt):l(Ot.x,Ot.y,g+Mt)}}}!function(){var t=a.length/3;if(_){for(var e=0,n=H*e,i=0;i<Y;i++){var o=O[i];u(o[2]+n,o[1]+n,o[0]+n)}e=m+2*S,n=H*e;for(var s=0;s<Y;s++){var l=O[s];u(l[0]+n,l[1]+n,l[2]+n)}}else{for(var c=0;c<Y;c++){var f=O[c];u(f[2],f[1],f[0])}for(var d=0;d<Y;d++){var h=O[d];u(h[0]+H*m,h[1]+H*m,h[2]+H*m)}}r.addGroup(t,a.length/3-t,0)}(),function(){var t=a.length/3,e=0;s(z,e),e+=z.length;for(var n=0,i=R.length;n<i;n++){var o=R[n];s(o,e),e+=o.length}r.addGroup(t,a.length/3-t,1)}()}(u)}return i.setAttribute("position",new vl(a,3)),i.setAttribute("uv",new vl(o,2)),i.computeVertexNormals(),i}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"toJSON",value:function(){var t=(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"toJSON",this).call(this);return oi(this.parameters.shapes,this.parameters.options,t)}}],[{key:"fromJSON",value:function(t,n){for(var i=[],r=0,a=t.shapes.length;r<a;r++){var o=n[t.shapes[r]];i.push(o)}var s=t.options.extrudePath;return void 0!==s&&(t.options.extrudePath=(new Gf[s.type]).fromJSON(s)),new e(i,t.options)}}]),e}(El),qf={generateTopUV:function(t,e,n,i,r){var a=e[3*n],o=e[3*n+1],s=e[3*i],l=e[3*i+1],u=e[3*r],c=e[3*r+1];return[new To(a,o),new To(s,l),new To(u,c)]},generateSideWallUV:function(t,e,n,i,r,a){var o=e[3*n],s=e[3*n+1],l=e[3*n+2],u=e[3*i],c=e[3*i+1],f=e[3*i+2],d=e[3*r],h=e[3*r+1],p=e[3*r+2],v=e[3*a],m=e[3*a+1],g=e[3*a+2];return Math.abs(s-c)<Math.abs(o-u)?[new To(o,1-l),new To(u,1-f),new To(d,1-p),new To(v,1-g)]:[new To(s,1-l),new To(c,1-f),new To(h,1-p),new To(m,1-g)]}},Qf=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,rt.default)(this,e);var i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],o=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,r,a,t,n));return o.type="IcosahedronGeometry",o.parameters={radius:t,detail:n},o}return(0,Q.default)(e,t),(0,ot.default)(e,null,[{key:"fromJSON",value:function(t){return new e(t.radius,t.detail)}}]),e}(xf),Jf=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new To(0,.5),new To(.5,0),new To(0,-.5)],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;(0,rt.default)(this,e);var o=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));o.type="LatheGeometry",o.parameters={points:t,segments:i,phiStart:r,phiLength:a},i=Math.floor(i),a=n(a,0,2*Math.PI);for(var s=[],l=[],u=[],c=[],f=[],d=1/i,h=new Go,p=new To,v=new Go,m=new Go,g=new Go,_=0,y=0,x=0;x<=t.length-1;x++)switch(x){case 0:_=t[x+1].x-t[x].x,y=t[x+1].y-t[x].y,v.x=1*y,v.y=-_,v.z=0*y,g.copy(v),v.normalize(),c.push(v.x,v.y,v.z);break;case t.length-1:c.push(g.x,g.y,g.z);break;default:_=t[x+1].x-t[x].x,y=t[x+1].y-t[x].y,v.x=1*y,v.y=-_,v.z=0*y,m.copy(v),v.x+=g.x,v.y+=g.y,v.z+=g.z,v.normalize(),c.push(v.x,v.y,v.z),g.copy(m)}for(var b=0;b<=i;b++)for(var S=r+b*d*a,w=Math.sin(S),E=Math.cos(S),A=0;A<=t.length-1;A++){h.x=t[A].x*w,h.y=t[A].y,h.z=t[A].x*E,l.push(h.x,h.y,h.z),p.x=b/i,p.y=A/(t.length-1),u.push(p.x,p.y);var T=c[3*A+0]*w,M=c[3*A+1],I=c[3*A+0]*E;f.push(T,M,I)}for(var P=0;P<i;P++)for(var k=0;k<t.length-1;k++){var L=k+P*t.length,C=L,R=L+t.length,D=L+t.length+1,N=L+1;s.push(C,R,N),s.push(D,N,R)}return o.setIndex(s),o.setAttribute("position",new vl(l,3)),o.setAttribute("uv",new vl(u,2)),o.setAttribute("normal",new vl(f,3)),o}return(0,Q.default)(e,t),(0,ot.default)(e,null,[{key:"fromJSON",value:function(t){return new e(t.points,t.segments,t.phiStart,t.phiLength)}}]),e}(El),Kf=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,rt.default)(this,e);var i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,i,r,t,n));return a.type="OctahedronGeometry",a.parameters={radius:t,detail:n},a}return(0,Q.default)(e,t),(0,ot.default)(e,null,[{key:"fromJSON",value:function(t){return new e(t.radius,t.detail)}}]),e}(xf),$f=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;(0,rt.default)(this,e);var s=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));s.type="RingGeometry",s.parameters={innerRadius:t,outerRadius:n,thetaSegments:i,phiSegments:r,thetaStart:a,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);for(var l=[],u=[],c=[],f=[],d=t,h=(n-t)/r,p=new Go,v=new To,m=0;m<=r;m++){for(var g=0;g<=i;g++){var _=a+g/i*o;p.x=d*Math.cos(_),p.y=d*Math.sin(_),u.push(p.x,p.y,p.z),c.push(0,0,1),v.x=(p.x/n+1)/2,v.y=(p.y/n+1)/2,f.push(v.x,v.y)}d+=h}for(var y=0;y<r;y++)for(var x=y*(i+1),b=0;b<i;b++){var S=b+x,w=S,E=S+i+1,A=S+i+2,T=S+1;l.push(w,E,T),l.push(E,A,T)}return s.setIndex(l),s.setAttribute("position",new vl(u,3)),s.setAttribute("normal",new vl(c,3)),s.setAttribute("uv",new vl(f,2)),s}return(0,Q.default)(e,t),(0,ot.default)(e,null,[{key:"fromJSON",value:function(t){return new e(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}]),e}(El),td=function(t){function e(){function t(t){var e=o.length/3,n=t.extractPoints(i),r=n.shape,u=n.holes;!1===Xf.isClockWise(r)&&(r=r.reverse());for(var f=0,d=u.length;f<d;f++){var h=u[f];!0===Xf.isClockWise(h)&&(u[f]=h.reverse())}for(var p=Xf.triangulateShape(r,u),v=0,m=u.length;v<m;v++){var g=u[v];r=r.concat(g)}for(var _=0,y=r.length;_<y;_++){var x=r[_];o.push(x.x,x.y,0),s.push(0,0,1),l.push(x.x,x.y)}for(var b=0,S=p.length;b<S;b++){var w=p[b],E=w[0]+e,A=w[1]+e,T=w[2]+e;a.push(E,A,T),c+=3}}var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new jf([new To(0,.5),new To(-.5,-.5),new To(.5,-.5)]),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;(0,rt.default)(this,e);var r=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));r.type="ShapeGeometry",r.parameters={shapes:n,curveSegments:i};var a=[],o=[],s=[],l=[],u=0,c=0;if(!1===Array.isArray(n))t(n);else for(var f=0;f<n.length;f++)t(n[f]),r.addGroup(u,c,f),u+=c,c=0;return r.setIndex(a),r.setAttribute("position",new vl(o,3)),r.setAttribute("normal",new vl(s,3)),r.setAttribute("uv",new vl(l,2)),r}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"toJSON",value:function(){var t=(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"toJSON",this).call(this);return si(this.parameters.shapes,t)}}],[{key:"fromJSON",value:function(t,n){for(var i=[],r=0,a=t.shapes.length;r<a;r++){var o=n[t.shapes[r]];i.push(o)}return new e(i,t.curveSegments)}}]),e}(El),ed=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;(0,rt.default)(this,e);var l=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));l.type="SphereGeometry",l.parameters={radius:t,widthSegments:n,heightSegments:i,phiStart:r,phiLength:a,thetaStart:o,thetaLength:s},n=Math.max(3,Math.floor(n)),i=Math.max(2,Math.floor(i));for(var u=Math.min(o+s,Math.PI),c=0,f=[],d=new Go,h=new Go,p=[],v=[],m=[],g=[],_=0;_<=i;_++){var y=[],x=_/i,b=0;0==_&&0==o?b=.5/n:_==i&&u==Math.PI&&(b=-.5/n);for(var S=0;S<=n;S++){var w=S/n;d.x=-t*Math.cos(r+w*a)*Math.sin(o+x*s),d.y=t*Math.cos(o+x*s),d.z=t*Math.sin(r+w*a)*Math.sin(o+x*s),v.push(d.x,d.y,d.z),h.copy(d).normalize(),m.push(h.x,h.y,h.z),g.push(w+b,1-x),y.push(c++)}f.push(y)}for(var E=0;E<i;E++)for(var A=0;A<n;A++){var T=f[E][A+1],M=f[E][A],I=f[E+1][A],P=f[E+1][A+1];(0!==E||o>0)&&p.push(T,M,P),(E!==i-1||u<Math.PI)&&p.push(M,I,P)}return l.setIndex(p),l.setAttribute("position",new vl(v,3)),l.setAttribute("normal",new vl(m,3)),l.setAttribute("uv",new vl(g,2)),l}return(0,Q.default)(e,t),(0,ot.default)(e,null,[{key:"fromJSON",value:function(t){return new e(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}]),e}(El),nd=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,rt.default)(this,e);var i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1],a=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,i,r,t,n));return a.type="TetrahedronGeometry",a.parameters={radius:t,detail:n},a}return(0,Q.default)(e,t),(0,ot.default)(e,null,[{key:"fromJSON",value:function(t){return new e(t.radius,t.detail)}}]),e}(xf),id=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;(0,rt.default)(this,e);var o=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));o.type="TorusGeometry",o.parameters={radius:t,tube:n,radialSegments:i,tubularSegments:r,arc:a},i=Math.floor(i),r=Math.floor(r);for(var s=[],l=[],u=[],c=[],f=new Go,d=new Go,h=new Go,p=0;p<=i;p++)for(var v=0;v<=r;v++){var m=v/r*a,g=p/i*Math.PI*2;d.x=(t+n*Math.cos(g))*Math.cos(m),d.y=(t+n*Math.cos(g))*Math.sin(m),d.z=n*Math.sin(g),l.push(d.x,d.y,d.z),f.x=t*Math.cos(m),f.y=t*Math.sin(m),h.subVectors(d,f).normalize(),u.push(h.x,h.y,h.z),c.push(v/r),c.push(p/i)}for(var _=1;_<=i;_++)for(var y=1;y<=r;y++){var x=(r+1)*_+y-1,b=(r+1)*(_-1)+y-1,S=(r+1)*(_-1)+y,w=(r+1)*_+y;s.push(x,b,w),s.push(b,S,w)}return o.setIndex(s),o.setAttribute("position",new vl(l,3)),o.setAttribute("normal",new vl(u,3)),o.setAttribute("uv",new vl(c,2)),o}return(0,Q.default)(e,t),(0,ot.default)(e,null,[{key:"fromJSON",value:function(t){return new e(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}]),e}(El),rd=function(t){function e(){function t(t,e,n,i,r){var a=Math.cos(t),o=Math.sin(t),s=n/e*t,l=Math.cos(s);r.x=i*(2+l)*.5*a,r.y=i*(2+l)*o*.5,r.z=i*Math.sin(s)*.5}var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;(0,rt.default)(this,e);var l=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));l.type="TorusKnotGeometry",l.parameters={radius:n,tube:i,tubularSegments:r,radialSegments:a,p:o,q:s},r=Math.floor(r),a=Math.floor(a);for(var u=[],c=[],f=[],d=[],h=new Go,p=new Go,v=new Go,m=new Go,g=new Go,_=new Go,y=new Go,x=0;x<=r;++x){var b=x/r*o*Math.PI*2;t(b,o,s,n,v),t(b+.01,o,s,n,m),_.subVectors(m,v),y.addVectors(m,v),g.crossVectors(_,y),y.crossVectors(g,_),g.normalize(),y.normalize();for(var S=0;S<=a;++S){var w=S/a*Math.PI*2,E=-i*Math.cos(w),A=i*Math.sin(w);h.x=v.x+(E*y.x+A*g.x),h.y=v.y+(E*y.y+A*g.y),h.z=v.z+(E*y.z+A*g.z),c.push(h.x,h.y,h.z),p.subVectors(h,v).normalize(),f.push(p.x,p.y,p.z),d.push(x/r),d.push(S/a)}}for(var T=1;T<=r;T++)for(var M=1;M<=a;M++){var I=(a+1)*(T-1)+(M-1),P=(a+1)*T+(M-1),k=(a+1)*T+M,L=(a+1)*(T-1)+M;u.push(I,P,L),u.push(P,k,L)}return l.setIndex(u),l.setAttribute("position",new vl(c,3)),l.setAttribute("normal",new vl(f,3)),l.setAttribute("uv",new vl(d,2)),l}return(0,Q.default)(e,t),(0,ot.default)(e,null,[{key:"fromJSON",value:function(t){return new e(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}]),e}(El),ad=function(t){function e(){function t(t){p=r.getPointAt(t/a,p);for(var e=c.normals[t],n=c.binormals[t],i=0;i<=s;i++){var l=i/s*Math.PI*2,u=Math.sin(l),h=-Math.cos(l);d.x=h*e.x+u*n.x,d.y=h*e.y+u*n.y,d.z=h*e.z+u*n.z,d.normalize(),m.push(d.x,d.y,d.z),f.x=p.x+o*d.x,f.y=p.y+o*d.y,f.z=p.z+o*d.z,v.push(f.x,f.y,f.z)}}function n(){for(var t=1;t<=a;t++)for(var e=1;e<=s;e++){var n=(s+1)*(t-1)+(e-1),i=(s+1)*t+(e-1),r=(s+1)*t+e,o=(s+1)*(t-1)+e;_.push(n,i,o),_.push(i,r,o)}}function i(){for(var t=0;t<=a;t++)for(var e=0;e<=s;e++)h.x=t/a,h.y=e/s,g.push(h.x,h.y)}var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Vf(new Go(-1,-1,0),new Go(-1,1,0),new Go(1,1,0)),a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,l=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,rt.default)(this,e);var u=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));u.type="TubeGeometry",u.parameters={path:r,tubularSegments:a,radius:o,radialSegments:s,closed:l};var c=r.computeFrenetFrames(a,l);u.tangents=c.tangents,u.normals=c.normals,u.binormals=c.binormals;var f=new Go,d=new Go,h=new To,p=new Go,v=[],m=[],g=[],_=[];return function(){for(var e=0;e<a;e++)t(e);t(!1===l?a:0),i(),n()}(),u.setIndex(_),u.setAttribute("position",new vl(v,3)),u.setAttribute("normal",new vl(m,3)),u.setAttribute("uv",new vl(g,2)),u}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"toJSON",value:function(){var t=(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"toJSON",this).call(this);return t.path=this.parameters.path.toJSON(),t}}],[{key:"fromJSON",value:function(t){return new e((new Gf[t.path.type]).fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}]),e}(El),od=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,rt.default)(this,e);var n=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));if(n.type="WireframeGeometry",n.parameters={geometry:t},null!==t){var i=[],r=new x.default,a=new Go,o=new Go;if(null!==t.index){var s=t.attributes.position,l=t.index,u=t.groups;0===u.length&&(u=[{start:0,count:l.count,materialIndex:0}]);for(var c=0,f=u.length;c<f;++c)for(var d=u[c],h=d.start,p=d.count,v=h,m=h+p;v<m;v+=3)for(var g=0;g<3;g++){var _=l.getX(v+g),y=l.getX(v+(g+1)%3);a.fromBufferAttribute(s,_),o.fromBufferAttribute(s,y),!0===li(a,o,r)&&(i.push(a.x,a.y,a.z),i.push(o.x,o.y,o.z))}}else for(var b=t.attributes.position,S=0,w=b.count/3;S<w;S++)for(var E=0;E<3;E++){var A=3*S+E,T=3*S+(E+1)%3;a.fromBufferAttribute(b,A),o.fromBufferAttribute(b,T),!0===li(a,o,r)&&(i.push(a.x,a.y,a.z),i.push(o.x,o.y,o.z))}n.setAttribute("position",new vl(i,3))}return n}return(0,Q.default)(e,t),e}(El),sd=(0,nt.default)({__proto__:null,BoxGeometry:Hl,BoxBufferGeometry:Hl,CircleGeometry:gf,CircleBufferGeometry:gf,ConeGeometry:yf,ConeBufferGeometry:yf,CylinderGeometry:_f,CylinderBufferGeometry:_f,DodecahedronGeometry:bf,DodecahedronBufferGeometry:bf,EdgesGeometry:Tf,ExtrudeGeometry:Zf,ExtrudeBufferGeometry:Zf,IcosahedronGeometry:Qf,IcosahedronBufferGeometry:Qf,LatheGeometry:Jf,LatheBufferGeometry:Jf,OctahedronGeometry:Kf,OctahedronBufferGeometry:Kf,PlaneGeometry:lu,PlaneBufferGeometry:lu,PolyhedronGeometry:xf,PolyhedronBufferGeometry:xf,RingGeometry:$f,RingBufferGeometry:$f,ShapeGeometry:td,ShapeBufferGeometry:td,SphereGeometry:ed,SphereBufferGeometry:ed,TetrahedronGeometry:nd,TetrahedronBufferGeometry:nd,TorusGeometry:id,TorusBufferGeometry:id,TorusKnotGeometry:rd,TorusKnotBufferGeometry:rd,TubeGeometry:ad,TubeBufferGeometry:ad,WireframeGeometry:od}),ld=function(t){function e(t){(0,rt.default)(this,e);var n=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return n.type="ShadowMaterial",n.color=new Co(0),n.transparent=!0,n.setValues(t),n}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.color.copy(t.color),this}}]),e}(nl);ld.prototype.isShadowMaterial=!0;var ud=function(t){function e(t){(0,rt.default)(this,e);var n=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return n.defines={STANDARD:""},n.type="MeshStandardMaterial",n.color=new Co(16777215),n.roughness=1,n.metalness=0,n.map=null,n.lightMap=null,n.lightMapIntensity=1,n.aoMap=null,n.aoMapIntensity=1,n.emissive=new Co(0),n.emissiveIntensity=1,n.emissiveMap=null,n.bumpMap=null,n.bumpScale=1,n.normalMap=null,n.normalMapType=co,n.normalScale=new To(1,1),n.displacementMap=null,n.displacementScale=1,n.displacementBias=0,n.roughnessMap=null,n.metalnessMap=null,n.alphaMap=null,n.envMap=null,n.envMapIntensity=1,n.refractionRatio=.98,n.wireframe=!1,n.wireframeLinewidth=1,n.wireframeLinecap="round",n.wireframeLinejoin="round",n.flatShading=!1,n.setValues(t),n}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}]),e}(nl);ud.prototype.isMeshStandardMaterial=!0;var cd=function(t){function e(t){(0,rt.default)(this,e);var i=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return i.defines={STANDARD:"",PHYSICAL:""},i.type="MeshPhysicalMaterial",i.clearcoatMap=null,i.clearcoatRoughness=0,i.clearcoatRoughnessMap=null,i.clearcoatNormalScale=new To(1,1),i.clearcoatNormalMap=null,i.ior=1.5,Object.defineProperty(i,"reflectivity",{get:function(){return n(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),i.sheenColor=new Co(0),i.sheenColorMap=null,i.sheenRoughness=1,i.sheenRoughnessMap=null,i.transmissionMap=null,i.thickness=0,i.thicknessMap=null,i.attenuationDistance=0,i.attenuationColor=new Co(1,1,1),i.specularIntensity=1,i.specularIntensityMap=null,i.specularColor=new Co(1,1,1),i.specularColorMap=null,i._sheen=0,i._clearcoat=0,i._transmission=0,i.setValues(t),i}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}},{key:"sheen",get:function(){return this._sheen},set:function(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}},{key:"clearcoat",get:function(){return this._clearcoat},set:function(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}},{key:"transmission",get:function(){return this._transmission},set:function(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}}]),e}(ud);cd.prototype.isMeshPhysicalMaterial=!0;var fd=function(t){function e(t){(0,rt.default)(this,e);var n=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return n.type="MeshPhongMaterial",n.color=new Co(16777215),n.specular=new Co(1118481),n.shininess=30,n.map=null,n.lightMap=null,n.lightMapIntensity=1,n.aoMap=null,n.aoMapIntensity=1,n.emissive=new Co(0),n.emissiveIntensity=1,n.emissiveMap=null,n.bumpMap=null,n.bumpScale=1,n.normalMap=null,n.normalMapType=co,n.normalScale=new To(1,1),n.displacementMap=null,n.displacementScale=1,n.displacementBias=0,n.specularMap=null,n.alphaMap=null,n.envMap=null,n.combine=Fr,n.reflectivity=1,n.refractionRatio=.98,n.wireframe=!1,n.wireframeLinewidth=1,n.wireframeLinecap="round",n.wireframeLinejoin="round",n.flatShading=!1,n.setValues(t),n}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}]),e}(nl);fd.prototype.isMeshPhongMaterial=!0;var dd=function(t){function e(t){(0,rt.default)(this,e);var n=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return n.defines={TOON:""},n.type="MeshToonMaterial",n.color=new Co(16777215),n.map=null,n.gradientMap=null,n.lightMap=null,n.lightMapIntensity=1,n.aoMap=null,n.aoMapIntensity=1,n.emissive=new Co(0),n.emissiveIntensity=1,n.emissiveMap=null,n.bumpMap=null,n.bumpScale=1,n.normalMap=null,n.normalMapType=co,n.normalScale=new To(1,1),n.displacementMap=null,n.displacementScale=1,n.displacementBias=0,n.alphaMap=null,n.wireframe=!1,n.wireframeLinewidth=1,n.wireframeLinecap="round",n.wireframeLinejoin="round",n.setValues(t),n}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}]),e}(nl);dd.prototype.isMeshToonMaterial=!0;var hd=function(t){function e(t){(0,rt.default)(this,e);var n=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return n.type="MeshNormalMaterial",n.bumpMap=null,n.bumpScale=1,n.normalMap=null,n.normalMapType=co,n.normalScale=new To(1,1),n.displacementMap=null,n.displacementScale=1,n.displacementBias=0,n.wireframe=!1,n.wireframeLinewidth=1,n.fog=!1,n.flatShading=!1,n.setValues(t),n}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}]),e}(nl);hd.prototype.isMeshNormalMaterial=!0;var pd=function(t){function e(t){(0,rt.default)(this,e);var n=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return n.type="MeshLambertMaterial",n.color=new Co(16777215),n.map=null,n.lightMap=null,n.lightMapIntensity=1,n.aoMap=null,n.aoMapIntensity=1,n.emissive=new Co(0),n.emissiveIntensity=1,n.emissiveMap=null,n.specularMap=null,n.alphaMap=null,n.envMap=null,n.combine=Fr,n.reflectivity=1,n.refractionRatio=.98,n.wireframe=!1,n.wireframeLinewidth=1,n.wireframeLinecap="round",n.wireframeLinejoin="round",n.setValues(t),n}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}]),e}(nl);pd.prototype.isMeshLambertMaterial=!0;var vd=function(t){function e(t){(0,rt.default)(this,e);var n=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return n.defines={MATCAP:""},n.type="MeshMatcapMaterial",n.color=new Co(16777215),n.matcap=null,n.map=null,n.bumpMap=null,n.bumpScale=1,n.normalMap=null,n.normalMapType=co,n.normalScale=new To(1,1),n.displacementMap=null,n.displacementScale=1,n.displacementBias=0,n.alphaMap=null,n.flatShading=!1,n.setValues(t),n}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this}}]),e}(nl);vd.prototype.isMeshMatcapMaterial=!0;var md=function(t){function e(t){(0,rt.default)(this,e);var n=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return n.type="LineDashedMaterial",n.scale=1,n.dashSize=3,n.gapSize=1,n.setValues(t),n}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}]),e}(qc);md.prototype.isLineDashedMaterial=!0;var gd=(0,nt.default)({__proto__:null,ShadowMaterial:ld,SpriteMaterial:pc,RawShaderMaterial:hu,ShaderMaterial:Xl,PointsMaterial:sf,MeshPhysicalMaterial:cd,MeshStandardMaterial:ud,MeshPhongMaterial:fd,MeshToonMaterial:dd,MeshNormalMaterial:hd,MeshLambertMaterial:pd,MeshDepthMaterial:Ju,MeshDistanceMaterial:Ku,MeshBasicMaterial:il,MeshMatcapMaterial:vd,LineDashedMaterial:md,LineBasicMaterial:qc,Material:nl}),_d={arraySlice:function(t,e,n){return _d.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){function e(e,n){return t[e]-t[n]}for(var n=t.length,i=new Array(n),r=0;r!==n;++r)i[r]=r;return i.sort(e),i},sortedArray:function(t,e,n){for(var i=t.length,r=new t.constructor(i),a=0,o=0;o!==i;++a)for(var s=n[a]*e,l=0;l!==e;++l)r[o++]=t[s+l];return r},flattenJSON:function(t,e,n,i){for(var r=1,a=t[0];void 0!==a&&void 0===a[i];)a=t[r++];if(void 0!==a){var o=a[i];if(void 0!==o)if(Array.isArray(o))do{o=a[i],void 0!==o&&(e.push(a.time),n.push.apply(n,o)),a=t[r++]}while(void 0!==a);else if(void 0!==o.toArray)do{o=a[i],void 0!==o&&(e.push(a.time),o.toArray(n,n.length)),a=t[r++]}while(void 0!==a);else do{o=a[i],void 0!==o&&(e.push(a.time),n.push(o)),a=t[r++]}while(void 0!==a)}},subclip:function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,a=t.clone();a.name=e;for(var o=[],s=0;s<a.tracks.length;++s){for(var l=a.tracks[s],u=l.getValueSize(),c=[],f=[],d=0;d<l.times.length;++d){var h=l.times[d]*r;if(!(h<n||h>=i)){c.push(l.times[d]);for(var p=0;p<u;++p)f.push(l.values[d*u+p])}}0!==c.length&&(l.times=_d.convertArray(c,l.times.constructor),l.values=_d.convertArray(f,l.values.constructor),o.push(l))}a.tracks=o;for(var v=1/0,m=0;m<a.tracks.length;++m)v>a.tracks[m].times[0]&&(v=a.tracks[m].times[0]);for(var g=0;g<a.tracks.length;++g)a.tracks[g].shift(-1*v);return a.resetDuration(),a},makeClipAdditive:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;i<=0&&(i=30);for(var r=n.tracks.length,a=e/i,o=0;o<r;++o){(function(e){var i=n.tracks[e],r=i.ValueTypeName;if("bool"===r||"string"===r)return"continue";var o=t.tracks.find(function(t){return t.name===i.name&&t.ValueTypeName===r});if(void 0===o)return"continue";var s=0,l=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=l/3);var u=0,c=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=c/3);var f=i.times.length-1,d=void 0;if(a<=i.times[0]){var h=s,p=l-s;d=_d.arraySlice(i.values,h,p)}else if(a>=i.times[f]){var v=f*l+s,m=v+l-s;d=_d.arraySlice(i.values,v,m)}else{var g=i.createInterpolant(),_=s,y=l-s;g.evaluate(a),d=_d.arraySlice(g.resultBuffer,_,y)}if("quaternion"===r){(new Uo).fromArray(d).normalize().conjugate().toArray(d)}for(var x=o.times.length,b=0;b<x;++b){var S=b*c+u;if("quaternion"===r)Uo.multiplyQuaternionsFlat(o.values,S,d,0,o.values,S);else for(var w=c-2*u,E=0;E<w;++E)o.values[S+E]-=d[E]}})(o)}return t.blendMode=2501,t}},yd=function(){function t(e,n,i,r){(0,rt.default)(this,t),this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}return(0,ot.default)(t,[{key:"evaluate",value:function(t){var e=this.parameterPositions,n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{var a=void 0;n:{i:if(!(t<i)){for(var o=n+2;;){if(void 0===i){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,r)}if(n===o)break;if(r=i,i=e[++n],t<i)break e}a=e.length;break n}{if(t>=r)break t;var s=e[1];t<s&&(n=2,r=s);for(var l=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===l)break;if(i=r,r=e[--n-1],t>=r)break e}a=n,n=0}}for(;n<a;){var u=n+a>>>1;t<e[u]?a=u:n=u+1}if(i=e[n],void 0===(r=e[n-1]))return this._cachedIndex=0,this.beforeStart_(0,t,i);if(void 0===i)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,r,t)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(t){for(var e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i,a=0;a!==i;++a)e[a]=n[r+a];return e}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),t}();yd.prototype.beforeStart_=yd.prototype.copySampleValue_,yd.prototype.afterEnd_=yd.prototype.copySampleValue_;var xd=function(t){function e(t,n,i,r){(0,rt.default)(this,e);var a=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t,n,i,r));return a._weightPrev=-0,a._offsetPrev=-0,a._weightNext=-0,a._offsetNext=-0,a.DefaultSettings_={endingStart:ro,endingEnd:ro},a}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"intervalChanged_",value:function(t,e,n){var i=this.parameterPositions,r=t-2,a=t+1,o=i[r],s=i[a];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:r=t,o=2*e-n;break;case 2402:r=i.length-2,o=e+i[r]-i[r+1];break;default:r=t,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:a=t,s=2*n-e;break;case 2402:a=1,s=n+i[1]-i[0];break;default:a=t-1,s=e}var l=.5*(n-e),u=this.valueSize;this._weightPrev=l/(e-o),this._weightNext=l/(s-n),this._offsetPrev=r*u,this._offsetNext=a*u}},{key:"interpolate_",value:function(t,e,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,l=s-o,u=this._offsetPrev,c=this._offsetNext,f=this._weightPrev,d=this._weightNext,h=(n-e)/(i-e),p=h*h,v=p*h,m=-f*v+2*f*p-f*h,g=(1+f)*v+(-1.5-2*f)*p+(-.5+f)*h+1,_=(-1-d)*v+(1.5+d)*p+.5*h,y=d*v-d*p,x=0;x!==o;++x)r[x]=m*a[u+x]+g*a[l+x]+_*a[s+x]+y*a[c+x];return r}}]),e}(yd),bd=function(t){function e(t,n,i,r){return(0,rt.default)(this,e),(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t,n,i,r))}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"interpolate_",value:function(t,e,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,l=s-o,u=(n-e)/(i-e),c=1-u,f=0;f!==o;++f)r[f]=a[l+f]*c+a[s+f]*u;return r}}]),e}(yd),Sd=function(t){function e(t,n,i,r){return(0,rt.default)(this,e),(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t,n,i,r))}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"interpolate_",value:function(t){return this.copySampleValue_(t-1)}}]),e}(yd),wd=function(){function t(e,n,i,r){if((0,rt.default)(this,t),void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=_d.convertArray(n,this.TimeBufferType),this.values=_d.convertArray(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}return(0,ot.default)(t,[{key:"InterpolantFactoryMethodDiscrete",value:function(t){return new Sd(this.times,this.values,this.getValueSize(),t)}},{key:"InterpolantFactoryMethodLinear",value:function(t){return new bd(this.times,this.values,this.getValueSize(),t)}},{key:"InterpolantFactoryMethodSmooth",value:function(t){return new xd(this.times,this.values,this.getValueSize(),t)}},{key:"setInterpolation",value:function(t){var e=void 0;switch(t){case 2300:e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(t){if(0!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]+=t;return this}},{key:"scale",value:function(t){if(1!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]*=t;return this}},{key:"trim",value:function(t,e){for(var n=this.times,i=n.length,r=0,a=i-1;r!==i&&n[r]<t;)++r;for(;-1!==a&&n[a]>e;)--a;if(++a,0!==r||a!==i){r>=a&&(a=Math.max(a,1),r=a-1);var o=this.getValueSize();this.times=_d.arraySlice(n,r,a),this.values=_d.arraySlice(this.values,r*o,a*o)}return this}},{key:"validate",value:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var a=null,o=0;o!==r;o++){var s=n[o];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),t=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),t=!1;break}a=s}if(void 0!==i&&_d.isTypedArray(i))for(var l=0,u=i.length;l!==u;++l){var c=i[l];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,c),t=!1;break}}return t}},{key:"optimize",value:function(){for(var t=_d.arraySlice(this.times),e=_d.arraySlice(this.values),n=this.getValueSize(),i=2302===this.getInterpolation(),r=t.length-1,a=1,o=1;o<r;++o){var s=!1,l=t[o];if(l!==t[o+1]&&(1!==o||l!==t[0]))if(i)s=!0;else for(var u=o*n,c=u-n,f=u+n,d=0;d!==n;++d){var h=e[u+d];if(h!==e[c+d]||h!==e[f+d]){s=!0;break}}if(s){if(o!==a){t[a]=t[o];for(var p=o*n,v=a*n,m=0;m!==n;++m)e[v+m]=e[p+m]}++a}}if(r>0){t[a]=t[r];for(var g=r*n,_=a*n,y=0;y!==n;++y)e[_+y]=e[g+y];++a}return a!==t.length?(this.times=_d.arraySlice(t,0,a),this.values=_d.arraySlice(e,0,a*n)):(this.times=t,this.values=e),this}},{key:"clone",value:function(){var t=_d.arraySlice(this.times,0),e=_d.arraySlice(this.values,0),n=this.constructor,i=new n(this.name,t,e);return i.createInterpolant=this.createInterpolant,i}}],[{key:"toJSON",value:function(t){var e=t.constructor,n=void 0;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:_d.convertArray(t.times,Array),values:_d.convertArray(t.values,Array)};var i=t.getInterpolation();i!==t.DefaultInterpolation&&(n.interpolation=i)}return n.type=t.ValueTypeName,n}}]),t}();wd.prototype.TimeBufferType=Float32Array,wd.prototype.ValueBufferType=Float32Array,wd.prototype.DefaultInterpolation=2301;var Ed=function(t){function e(){return(0,rt.default)(this,e),(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).apply(this,arguments))}return(0,Q.default)(e,t),e}(wd);Ed.prototype.ValueTypeName="bool",Ed.prototype.ValueBufferType=Array,Ed.prototype.DefaultInterpolation=2300,Ed.prototype.InterpolantFactoryMethodLinear=void 0,Ed.prototype.InterpolantFactoryMethodSmooth=void 0;var Ad=function(t){function e(){return(0,rt.default)(this,e),(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).apply(this,arguments))}return(0,Q.default)(e,t),e}(wd);Ad.prototype.ValueTypeName="color";var Td=function(t){function e(){return(0,rt.default)(this,e),(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).apply(this,arguments))}return(0,Q.default)(e,t),e}(wd);Td.prototype.ValueTypeName="number";var Md=function(t){function e(t,n,i,r){return(0,rt.default)(this,e),(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t,n,i,r))}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"interpolate_",value:function(t,e,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-e)/(i-e),l=t*o,u=l+o;l!==u;l+=4)Uo.slerpFlat(r,0,a,l-o,a,l,s);return r}}]),e}(yd),Id=function(t){function e(){return(0,rt.default)(this,e),(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).apply(this,arguments))}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"InterpolantFactoryMethodLinear",value:function(t){return new Md(this.times,this.values,this.getValueSize(),t)}}]),e}(wd);Id.prototype.ValueTypeName="quaternion",Id.prototype.DefaultInterpolation=2301,Id.prototype.InterpolantFactoryMethodSmooth=void 0;var Pd=function(t){function e(){return(0,rt.default)(this,e),(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).apply(this,arguments))}return(0,Q.default)(e,t),e}(wd);Pd.prototype.ValueTypeName="string",Pd.prototype.ValueBufferType=Array,Pd.prototype.DefaultInterpolation=2300,Pd.prototype.InterpolantFactoryMethodLinear=void 0,Pd.prototype.InterpolantFactoryMethodSmooth=void 0;var kd=function(t){function e(){return(0,rt.default)(this,e),(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).apply(this,arguments))}return(0,Q.default)(e,t),e}(wd);kd.prototype.ValueTypeName="vector";var Ld=function(){function t(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ao;(0,rt.default)(this,t),this.name=n,this.tracks=r,this.duration=i,this.blendMode=a,this.uuid=e(),this.duration<0&&this.resetDuration()}return(0,ot.default)(t,[{key:"resetDuration",value:function(){for(var t=this.tracks,e=0,n=0,i=t.length;n!==i;++n){var r=this.tracks[n];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this}},{key:"trim",value:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}},{key:"optimize",value:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}},{key:"clone",value:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(t){for(var e=[],n=t.tracks,i=1/(t.fps||1),r=0,a=n.length;r!==a;++r)e.push(ci(n[r]).scale(i));var o=new this(t.name,t.duration,e,t.blendMode);return o.uuid=t.uuid,o}},{key:"toJSON",value:function(t){for(var e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode},r=0,a=n.length;r!==a;++r)e.push(wd.toJSON(n[r]));return i}},{key:"CreateFromMorphTargetSequence",value:function(t,e,n,i){for(var r=e.length,a=[],o=0;o<r;o++){var s=[],l=[];s.push((o+r-1)%r,o,(o+1)%r),l.push(0,1,0);var u=_d.getKeyframeOrder(s);s=_d.sortedArray(s,1,u),l=_d.sortedArray(l,1,u),i||0!==s[0]||(s.push(r),l.push(l[0])),a.push(new Td(".morphTargetInfluences["+e[o].name+"]",s,l).scale(1/n))}return new this(t,-1,a)}},{key:"findByName",value:function(t,e){var n=t;if(!Array.isArray(t)){var i=t;n=i.geometry&&i.geometry.animations||i.animations}for(var r=0;r<n.length;r++)if(n[r].name===e)return n[r];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(t,e,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,a=0,o=t.length;a<o;a++){var s=t[a],l=s.name.match(r);if(l&&l.length>1){var u=l[1],c=i[u];c||(i[u]=c=[]),c.push(s)}}var f=[];for(var d in i)f.push(this.CreateFromMorphTargetSequence(d,i[d],e,n));return f}},{key:"parseAnimation",value:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(t,e,n,i,r){if(0!==n.length){var a=[],o=[];_d.flattenJSON(n,a,o,i),0!==a.length&&r.push(new t(e,a,o))}},i=[],r=t.name||"default",a=t.fps||30,o=t.blendMode,s=t.length||-1,l=t.hierarchy||[],u=0;u<l.length;u++){var c=l[u].keys;if(c&&0!==c.length)if(c[0].morphTargets){var f={},d=void 0;for(d=0;d<c.length;d++)if(c[d].morphTargets)for(var h=0;h<c[d].morphTargets.length;h++)f[c[d].morphTargets[h]]=-1;for(var p in f){for(var v=[],m=[],g=0;g!==c[d].morphTargets.length;++g){var _=c[d];v.push(_.time),m.push(_.morphTarget===p?1:0)}i.push(new Td(".morphTargetInfluence["+p+"]",v,m))}s=f.length*(a||1)}else{var y=".bones["+e[u].name+"]";n(kd,y+".position",c,"pos",i),n(Id,y+".quaternion",c,"rot",i),n(kd,y+".scale",c,"scl",i)}}return 0===i.length?null:new this(r,s,i,o)}}]),t}(),Cd={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},Rd=function t(e,n,i){(0,rt.default)(this,t);var r=this,a=!1,o=0,s=0,l=void 0,u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=i,this.itemStart=function(t){s++,!1===a&&void 0!==r.onStart&&r.onStart(t,o,s),a=!0},this.itemEnd=function(t){o++,void 0!==r.onProgress&&r.onProgress(t,o,s),o===s&&(a=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return l?l(t):t},this.setURLModifier=function(t){return l=t,this},this.addHandler=function(t,e){return u.push(t,e),this},this.removeHandler=function(t){var e=u.indexOf(t);return-1!==e&&u.splice(e,2),this},this.getHandler=function(t){for(var e=0,n=u.length;e<n;e+=2){var i=u[e],r=u[e+1];if(i.global&&(i.lastIndex=0),i.test(t))return r}return null}},Dd=new Rd,Nd=function(){function t(e){(0,rt.default)(this,t),this.manager=void 0!==e?e:Dd,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return(0,ot.default)(t,[{key:"load",value:function(){}},{key:"loadAsync",value:function(t,e){var n=this;return new c.default(function(i,r){n.load(t,i,e,r)})}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(t){return this.crossOrigin=t,this}},{key:"setWithCredentials",value:function(t){return this.withCredentials=t,this}},{key:"setPath",value:function(t){return this.path=t,this}},{key:"setResourcePath",value:function(t){return this.resourcePath=t,this}},{key:"setRequestHeader",value:function(t){return this.requestHeader=t,this}}]),t}(),Bd={},Od=function(t){function e(t){return(0,rt.default)(this,e),(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t))}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"load",value:function(t,e,n,i){var r=this;void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var a=Cd.get(t);if(void 0!==a)return this.manager.itemStart(t),setTimeout(function(){e&&e(a),r.manager.itemEnd(t)},0),a;if(void 0!==Bd[t])return void Bd[t].push({onLoad:e,onProgress:n,onError:i});Bd[t]=[],Bd[t].push({onLoad:e,onProgress:n,onError:i});var o=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,l=this.responseType;fetch(o).then(function(e){if(200===e.status||0===e.status){if(0===e.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===e.body.getReader)return e;var n=Bd[t],i=e.body.getReader(),r=e.headers.get("Content-Length"),a=r?parseInt(r):0,o=0!==a,s=0,l=new ReadableStream({start:function(t){function e(){i.read().then(function(i){var r=i.done,l=i.value;if(r)t.close();else{s+=l.byteLength;for(var u=new ProgressEvent("progress",{lengthComputable:o,loaded:s,total:a}),c=0,f=n.length;c<f;c++){var d=n[c];d.onProgress&&d.onProgress(u)}t.enqueue(l),e()}})}e()}});return new Response(l)}throw Error('fetch for "'+e.url+'" responded with '+e.status+": "+e.statusText)}).then(function(t){switch(l){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then(function(t){return(new DOMParser).parseFromString(t,s)});case"json":return t.json();default:if(void 0===s)return t.text();var e=/charset="?([^;"\s]*)"?/i,n=e.exec(s),i=n&&n[1]?n[1].toLowerCase():void 0,r=new TextDecoder(i);return t.arrayBuffer().then(function(t){return r.decode(t)})}}).then(function(e){Cd.add(t,e);var n=Bd[t];delete Bd[t];for(var i=0,r=n.length;i<r;i++){var a=n[i];a.onLoad&&a.onLoad(e)}}).catch(function(e){var n=Bd[t];if(void 0===n)throw r.manager.itemError(t),e;delete Bd[t];for(var i=0,a=n.length;i<a;i++){var o=n[i];o.onError&&o.onError(e)}r.manager.itemError(t)}).finally(function(){r.manager.itemEnd(t)}),this.manager.itemStart(t)}},{key:"setResponseType",value:function(t){return this.responseType=t,this}},{key:"setMimeType",value:function(t){return this.mimeType=t,this}}]),e}(Nd),Fd=function(t){function e(t){return(0,rt.default)(this,e),(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t))}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"load",value:function(t,e,n,i){var r=this,a=new Od(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(n){try{e(r.parse(JSON.parse(n)))}catch(e){i?i(e):console.error(e),r.manager.itemError(t)}},n,i)}},{key:"parse",value:function(t){for(var e=[],n=0;n<t.length;n++){var i=Ld.parse(t[n]);e.push(i)}return e}}]),e}(Nd),zd=function(t){function e(t){return(0,rt.default)(this,e),(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t))}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"load",value:function(t,e,n,i){var r=this,a=[],o=new vf,s=new Od(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(r.withCredentials);var l=0;if(Array.isArray(t))for(var u=0,c=t.length;u<c;++u)!function(u){s.load(t[u],function(t){var n=r.parse(t,!0);a[u]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(l+=1)&&(1===n.mipmapCount&&(o.minFilter=aa),o.image=a,o.format=n.format,o.needsUpdate=!0,e&&e(o))},n,i)}(u);else s.load(t,function(t){var n=r.parse(t,!0);if(n.isCubemap){for(var i=n.mipmaps.length/n.mipmapCount,s=0;s<i;s++){a[s]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)a[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+l]),a[s].format=n.format,a[s].width=n.width,a[s].height=n.height}o.image=a}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=aa),o.format=n.format,o.needsUpdate=!0,e&&e(o)},n,i);return o}}]),e}(Nd),Vd=function(t){function e(t){return(0,rt.default)(this,e),(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t))}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"load",value:function(t,e,n,i){function r(){o(),Cd.add(t,this),e&&e(this),s.manager.itemEnd(t)}function a(e){o(),i&&i(e),s.manager.itemError(t),s.manager.itemEnd(t)}function o(){u.removeEventListener("load",r,!1),u.removeEventListener("error",a,!1)}void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var s=this,l=Cd.get(t);if(void 0!==l)return s.manager.itemStart(t),setTimeout(function(){e&&e(l),s.manager.itemEnd(t)},0),l;var u=z("img");return u.addEventListener("load",r,!1),u.addEventListener("error",a,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(u.crossOrigin=this.crossOrigin),s.manager.itemStart(t),u.src=t,u}}]),e}(Nd),Ud=function(t){function e(t){return(0,rt.default)(this,e),(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t))}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"load",value:function(t,e,n,i){var r=new $l,a=new Vd(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);for(var o=0,s=0;s<t.length;++s)!function(n){a.load(t[n],function(t){r.images[n]=t,6==++o&&(r.needsUpdate=!0,e&&e(r))},void 0,i)}(s);return r}}]),e}(Nd),Gd=function(t){function e(t){return(0,rt.default)(this,e),(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t))}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"load",value:function(t,e,n,i){var r=this,a=new zc,o=new Od(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(r.withCredentials),o.load(t,function(t){var n=r.parse(t);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:ta,a.wrapT=void 0!==n.wrapT?n.wrapT:ta,a.magFilter=void 0!==n.magFilter?n.magFilter:aa,a.minFilter=void 0!==n.minFilter?n.minFilter:aa,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(a.encoding=n.encoding),void 0!==n.flipY&&(a.flipY=n.flipY),void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=sa),1===n.mipmapCount&&(a.minFilter=aa),void 0!==n.generateMipmaps&&(a.generateMipmaps=n.generateMipmaps),a.needsUpdate=!0,e&&e(a,n))},n,i),a}}]),e}(Nd),Hd=function(t){function e(t){return(0,rt.default)(this,e),(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t))}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"load",value:function(t,e,n,i){var r=new Bo,a=new Vd(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,function(t){r.image=t,r.needsUpdate=!0,void 0!==e&&e(r)},n,i),r}}]),e}(Nd),Yd=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;(0,rt.default)(this,e);var i=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return i.type="Light",i.color=new Co(t),i.intensity=n,i}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"dispose",value:function(){}},{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this}},{key:"toJSON",value:function(t){var n=(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"toJSON",this).call(this,t);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,void 0!==this.groundColor&&(n.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(n.object.distance=this.distance),void 0!==this.angle&&(n.object.angle=this.angle),void 0!==this.decay&&(n.object.decay=this.decay),void 0!==this.penumbra&&(n.object.penumbra=this.penumbra),void 0!==this.shadow&&(n.object.shadow=this.shadow.toJSON()),n}}]),e}(Hs);Yd.prototype.isLight=!0;var jd=function(t){function e(t,n,i){(0,rt.default)(this,e);var r=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t,i));return r.type="HemisphereLight",r.position.copy(Hs.DefaultUp),r.updateMatrix(),r.groundColor=new Co(n),r}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"copy",value:function(t){return Yd.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}]),e}(Yd);jd.prototype.isHemisphereLight=!0;var Wd=new _s,Xd=new Go,Zd=new Go,qd=function(){function t(e){(0,rt.default)(this,t),this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new To(512,512),this.map=null,this.mapPass=null,this.matrix=new _s,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new su,this._frameExtents=new To(1,1),this._viewportCount=1,this._viewports=[new Oo(0,0,1,1)]}return(0,ot.default)(t,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(t){var e=this.camera,n=this.matrix;Xd.setFromMatrixPosition(t.matrixWorld),e.position.copy(Xd),Zd.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(Zd),e.updateMatrixWorld(),Wd.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Wd),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)}},{key:"getViewport",value:function(t){return this._viewports[t]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}]),t}(),Qd=function(t){function e(){(0,rt.default)(this,e);var t=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,new ql(50,1,.5,500)));return t.focus=1,t}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"updateMatrices",value:function(t){var n=this.camera,i=2*Eo*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,a=t.distance||n.far;i===n.fov&&r===n.aspect&&a===n.far||(n.fov=i,n.aspect=r,n.far=a,n.updateProjectionMatrix()),(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"updateMatrices",this).call(this,t)}},{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.focus=t.focus,this}}]),e}(qd);Qd.prototype.isSpotLightShadow=!0;var Jd=function(t){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;(0,rt.default)(this,e);var s=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t,n));return s.type="SpotLight",s.position.copy(Hs.DefaultUp),s.updateMatrix(),s.target=new Hs,s.distance=i,s.angle=r,s.penumbra=a,s.decay=o,s.shadow=new Qd,s}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}},{key:"power",get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}]),e}(Yd);Jd.prototype.isSpotLight=!0;var Kd=new _s,$d=new Go,th=new Go,eh=function(t){function e(){(0,rt.default)(this,e);var t=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,new ql(90,1,.5,500)));return t._frameExtents=new To(4,2),t._viewportCount=6,t._viewports=[new Oo(2,1,1,1),new Oo(0,1,1,1),new Oo(3,1,1,1),new Oo(1,1,1,1),new Oo(3,0,1,1),new Oo(1,0,1,1)],t._cubeDirections=[new Go(1,0,0),new Go(-1,0,0),new Go(0,0,1),new Go(0,0,-1),new Go(0,1,0),new Go(0,-1,0)],t._cubeUps=[new Go(0,1,0),new Go(0,1,0),new Go(0,1,0),new Go(0,1,0),new Go(0,0,1),new Go(0,0,-1)],t}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"updateMatrices",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,i=this.matrix,r=t.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),$d.setFromMatrixPosition(t.matrixWorld),n.position.copy($d),th.copy(n.position),th.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(th),n.updateMatrixWorld(),i.makeTranslation(-$d.x,-$d.y,-$d.z),Kd.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Kd)}}]),e}(qd);eh.prototype.isPointLightShadow=!0;var nh=function(t){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,rt.default)(this,e);var a=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t,n));return a.type="PointLight",a.distance=i,a.decay=r,a.shadow=new eh,a}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}},{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}]),e}(Yd);nh.prototype.isPointLight=!0;var ih=function(t){function e(){return(0,rt.default)(this,e),(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,new du(-5,5,5,-5,.5,500)))}return(0,Q.default)(e,t),e}(qd);ih.prototype.isDirectionalLightShadow=!0;var rh=function(t){function e(t,n){(0,rt.default)(this,e);var i=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t,n));return i.type="DirectionalLight",i.position.copy(Hs.DefaultUp),i.updateMatrix(),i.target=new Hs,i.shadow=new ih,i}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}]),e}(Yd);rh.prototype.isDirectionalLight=!0;var ah=function(t){function e(t,n){(0,rt.default)(this,e);var i=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t,n));return i.type="AmbientLight",i}return(0,Q.default)(e,t),e}(Yd);ah.prototype.isAmbientLight=!0;var oh=function(t){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;(0,rt.default)(this,e);var a=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t,n));return a.type="RectAreaLight",a.width=i,a.height=r,a}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.width=t.width,this.height=t.height,this}},{key:"toJSON",value:function(t){var n=(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"toJSON",this).call(this,t);return n.object.width=this.width,n.object.height=this.height,n}},{key:"power",get:function(){return this.intensity*this.width*this.height*Math.PI},set:function(t){this.intensity=t/(this.width*this.height*Math.PI)}}]),e}(Yd);oh.prototype.isRectAreaLight=!0;var sh=function(){function t(){(0,rt.default)(this,t),this.coefficients=[];for(var e=0;e<9;e++)this.coefficients.push(new Go)}return(0,ot.default)(t,[{key:"set",value:function(t){for(var e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}},{key:"zero",value:function(){for(var t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}},{key:"getAt",value:function(t,e){var n=t.x,i=t.y,r=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.282095),e.addScaledVector(a[1],.488603*i),e.addScaledVector(a[2],.488603*r),e.addScaledVector(a[3],.488603*n),e.addScaledVector(a[4],n*i*1.092548),e.addScaledVector(a[5],i*r*1.092548),e.addScaledVector(a[6],.315392*(3*r*r-1)),e.addScaledVector(a[7],n*r*1.092548),e.addScaledVector(a[8],.546274*(n*n-i*i)),e}},{key:"getIrradianceAt",value:function(t,e){var n=t.x,i=t.y,r=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.886227),e.addScaledVector(a[1],1.023328*i),e.addScaledVector(a[2],1.023328*r),e.addScaledVector(a[3],1.023328*n),e.addScaledVector(a[4],.858086*n*i),e.addScaledVector(a[5],.858086*i*r),e.addScaledVector(a[6],.743125*r*r-.247708),e.addScaledVector(a[7],.858086*n*r),e.addScaledVector(a[8],.429043*(n*n-i*i)),e}},{key:"add",value:function(t){for(var e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}},{key:"addScaledSH",value:function(t,e){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}},{key:"scale",value:function(t){for(var e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}},{key:"lerp",value:function(t,e){for(var n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}},{key:"equals",value:function(t){for(var e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}},{key:"copy",value:function(t){return this.set(t.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,i=0;i<9;i++)n[i].fromArray(t,e+3*i);return this}},{key:"toArray",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,i=0;i<9;i++)n[i].toArray(t,e+3*i);return t}}],[{key:"getBasisAt",value:function(t,e){var n=t.x,i=t.y,r=t.z;e[0]=.282095,e[1]=.488603*i,e[2]=.488603*r,e[3]=.488603*n,e[4]=1.092548*n*i,e[5]=1.092548*i*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*n*r,e[8]=.546274*(n*n-i*i)}}]),t}();sh.prototype.isSphericalHarmonics3=!0;var lh=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new sh,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;(0,rt.default)(this,e);var i=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,void 0,n));return i.sh=t,i}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.sh.copy(t.sh),this}},{key:"fromJSON",value:function(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}},{key:"toJSON",value:function(t){var n=(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"toJSON",this).call(this,t);return n.object.sh=this.sh.toArray(),n}}]),e}(Yd);lh.prototype.isLightProbe=!0;var uh=function(t){function e(t){(0,rt.default)(this,e);var n=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t));return n.textures={},n}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"load",value:function(t,e,n,i){var r=this,a=new Od(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(t,function(n){try{e(r.parse(JSON.parse(n)))}catch(e){i?i(e):console.error(e),r.manager.itemError(t)}},n,i)}},{key:"parse",value:function(t){function e(t){return void 0===n[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),n[t]}var n=this.textures,i=new gd[t.type];if(void 0!==t.uuid&&(i.uuid=t.uuid),void 0!==t.name&&(i.name=t.name),void 0!==t.color&&void 0!==i.color&&i.color.setHex(t.color),void 0!==t.roughness&&(i.roughness=t.roughness),void 0!==t.metalness&&(i.metalness=t.metalness),void 0!==t.sheen&&(i.sheen=t.sheen),void 0!==t.sheenColor&&(i.sheenColor=(new Co).setHex(t.sheenColor)),void 0!==t.sheenRoughness&&(i.sheenRoughness=t.sheenRoughness),void 0!==t.emissive&&void 0!==i.emissive&&i.emissive.setHex(t.emissive),void 0!==t.specular&&void 0!==i.specular&&i.specular.setHex(t.specular),void 0!==t.specularIntensity&&(i.specularIntensity=t.specularIntensity),void 0!==t.specularColor&&void 0!==i.specularColor&&i.specularColor.setHex(t.specularColor),void 0!==t.shininess&&(i.shininess=t.shininess),void 0!==t.clearcoat&&(i.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(i.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.transmission&&(i.transmission=t.transmission),void 0!==t.thickness&&(i.thickness=t.thickness),void 0!==t.attenuationDistance&&(i.attenuationDistance=t.attenuationDistance),void 0!==t.attenuationColor&&void 0!==i.attenuationColor&&i.attenuationColor.setHex(t.attenuationColor),void 0!==t.fog&&(i.fog=t.fog),void 0!==t.flatShading&&(i.flatShading=t.flatShading),void 0!==t.blending&&(i.blending=t.blending),void 0!==t.combine&&(i.combine=t.combine),void 0!==t.side&&(i.side=t.side),void 0!==t.shadowSide&&(i.shadowSide=t.shadowSide),void 0!==t.opacity&&(i.opacity=t.opacity),void 0!==t.transparent&&(i.transparent=t.transparent),void 0!==t.alphaTest&&(i.alphaTest=t.alphaTest),void 0!==t.depthTest&&(i.depthTest=t.depthTest),void 0!==t.depthWrite&&(i.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(i.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(i.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(i.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(i.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(i.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(i.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(i.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(i.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(i.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(i.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(i.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(i.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(i.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(i.rotation=t.rotation),1!==t.linewidth&&(i.linewidth=t.linewidth),void 0!==t.dashSize&&(i.dashSize=t.dashSize),void 0!==t.gapSize&&(i.gapSize=t.gapSize),void 0!==t.scale&&(i.scale=t.scale),void 0!==t.polygonOffset&&(i.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(i.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(i.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.dithering&&(i.dithering=t.dithering),void 0!==t.alphaToCoverage&&(i.alphaToCoverage=t.alphaToCoverage),void 0!==t.premultipliedAlpha&&(i.premultipliedAlpha=t.premultipliedAlpha),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.toneMapped&&(i.toneMapped=t.toneMapped),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.vertexColors&&("number"==typeof t.vertexColors?i.vertexColors=t.vertexColors>0:i.vertexColors=t.vertexColors),void 0!==t.uniforms)for(var r in t.uniforms){var a=t.uniforms[r];switch(i.uniforms[r]={},a.type){case"t":i.uniforms[r].value=e(a.value);break;case"c":i.uniforms[r].value=(new Co).setHex(a.value);break;case"v2":i.uniforms[r].value=(new To).fromArray(a.value);break;case"v3":i.uniforms[r].value=(new Go).fromArray(a.value);break;case"v4":i.uniforms[r].value=(new Oo).fromArray(a.value);break;case"m3":i.uniforms[r].value=(new Mo).fromArray(a.value);break;case"m4":i.uniforms[r].value=(new _s).fromArray(a.value);break;default:i.uniforms[r].value=a.value}}if(void 0!==t.defines&&(i.defines=t.defines),void 0!==t.vertexShader&&(i.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(i.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(var o in t.extensions)i.extensions[o]=t.extensions[o];if(void 0!==t.shading&&(i.flatShading=1===t.shading),void 0!==t.size&&(i.size=t.size),void 0!==t.sizeAttenuation&&(i.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(i.map=e(t.map)),void 0!==t.matcap&&(i.matcap=e(t.matcap)),void 0!==t.alphaMap&&(i.alphaMap=e(t.alphaMap)),void 0!==t.bumpMap&&(i.bumpMap=e(t.bumpMap)),void 0!==t.bumpScale&&(i.bumpScale=t.bumpScale),void 0!==t.normalMap&&(i.normalMap=e(t.normalMap)),void 0!==t.normalMapType&&(i.normalMapType=t.normalMapType),void 0!==t.normalScale){var s=t.normalScale;!1===Array.isArray(s)&&(s=[s,s]),i.normalScale=(new To).fromArray(s)}return void 0!==t.displacementMap&&(i.displacementMap=e(t.displacementMap)),void 0!==t.displacementScale&&(i.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(i.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(i.roughnessMap=e(t.roughnessMap)),void 0!==t.metalnessMap&&(i.metalnessMap=e(t.metalnessMap)),void 0!==t.emissiveMap&&(i.emissiveMap=e(t.emissiveMap)),void 0!==t.emissiveIntensity&&(i.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(i.specularMap=e(t.specularMap)),void 0!==t.specularIntensityMap&&(i.specularIntensityMap=e(t.specularIntensityMap)),void 0!==t.specularColorMap&&(i.specularColorMap=e(t.specularColorMap)),void 0!==t.envMap&&(i.envMap=e(t.envMap)),void 0!==t.envMapIntensity&&(i.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(i.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(i.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(i.lightMap=e(t.lightMap)),void 0!==t.lightMapIntensity&&(i.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(i.aoMap=e(t.aoMap)),void 0!==t.aoMapIntensity&&(i.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(i.gradientMap=e(t.gradientMap)),void 0!==t.clearcoatMap&&(i.clearcoatMap=e(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=e(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(i.clearcoatNormalMap=e(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(i.clearcoatNormalScale=(new To).fromArray(t.clearcoatNormalScale)),void 0!==t.transmissionMap&&(i.transmissionMap=e(t.transmissionMap)),void 0!==t.thicknessMap&&(i.thicknessMap=e(t.thicknessMap)),void 0!==t.sheenColorMap&&(i.sheenColorMap=e(t.sheenColorMap)),void 0!==t.sheenRoughnessMap&&(i.sheenRoughnessMap=e(t.sheenRoughnessMap)),i}},{key:"setTextures",value:function(t){return this.textures=t,this}}]),e}(Nd),ch=function(){function t(){(0,rt.default)(this,t)}return(0,ot.default)(t,null,[{key:"decodeText",value:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",n=0,i=t.length;n<i;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(t){return e}}},{key:"extractUrlBase",value:function(t){var e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}},{key:"resolveURL",value:function(t,e){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)?t:/^data:.*,.*$/i.test(t)?t:/^blob:.*$/i.test(t)?t:e+t)}}]),t}(),fh=function(t){function e(){(0,rt.default)(this,e);var t=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return t.type="InstancedBufferGeometry",t.instanceCount=1/0,t}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.instanceCount=t.instanceCount,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var t=(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"toJSON",this).call(this,this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}]),e}(El);fh.prototype.isInstancedBufferGeometry=!0;var dh=function(t){function e(t){return(0,rt.default)(this,e),(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t))}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"load",value:function(t,e,n,i){var r=this,a=new Od(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(t,function(n){try{e(r.parse(JSON.parse(n)))}catch(e){i?i(e):console.error(e),r.manager.itemError(t)}},n,i)}},{key:"parse",value:function(t){function e(t,e){if(void 0!==i[e])return i[e];var r=t.interleavedBuffers,a=r[e],o=n(t,a.buffer),s=O(a.type,o),l=new fc(s,a.stride);return l.uuid=a.uuid,i[e]=l,l}function n(t,e){if(void 0!==r[e])return r[e];var n=t.arrayBuffers,i=n[e],a=new Uint32Array(i).buffer;return r[e]=a,a}var i={},r={},a=t.isInstancedBufferGeometry?new fh:new El,o=t.data.index;if(void 0!==o){var s=O(o.type,o.array);a.setIndex(new ol(s,1))}var l=t.data.attributes;for(var u in l){var c=l[u],f=void 0;if(c.isInterleavedBufferAttribute){var d=e(t.data,c.data);f=new hc(d,c.itemSize,c.offset,c.normalized)}else{var h=O(c.type,c.array);f=new(c.isInstancedBufferAttribute?Hc:ol)(h,c.itemSize,c.normalized)}void 0!==c.name&&(f.name=c.name),void 0!==c.usage&&f.setUsage(c.usage),void 0!==c.updateRange&&(f.updateRange.offset=c.updateRange.offset,f.updateRange.count=c.updateRange.count),a.setAttribute(u,f)}var p=t.data.morphAttributes;if(p)for(var v in p){for(var m=p[v],g=[],_=0,y=m.length;_<y;_++){var x=m[_],b=void 0;if(x.isInterleavedBufferAttribute){var S=e(t.data,x.data);b=new hc(S,x.itemSize,x.offset,x.normalized)}else{var w=O(x.type,x.array);b=new ol(w,x.itemSize,x.normalized)}void 0!==x.name&&(b.name=x.name),g.push(b)}a.morphAttributes[v]=g}t.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);var E=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==E)for(var A=0,T=E.length;A!==T;++A){var M=E[A];a.addGroup(M.start,M.count,M.materialIndex)}var I=t.data.boundingSphere;if(void 0!==I){var P=new Go;void 0!==I.center&&P.fromArray(I.center),a.boundingSphere=new us(P,I.radius)}return t.name&&(a.name=t.name),t.userData&&(a.userData=t.userData),a}}]),e}(Nd),hh=function(t){function e(t){return(0,rt.default)(this,e),(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t))}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"load",value:function(t,e,n,i){var r=this,a=""===this.path?ch.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a;var o=new Od(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,function(n){var a=null;try{a=JSON.parse(n)}catch(e){return void 0!==i&&i(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}var o=a.metadata;if(void 0===o||void 0===o.type||"geometry"===o.type.toLowerCase())return void console.error("THREE.ObjectLoader: Can't load "+t);r.parse(a,e)},n,i)}},{key:"loadAsync",value:function(){function t(t,n){return e.apply(this,arguments)}var e=(0,p.default)(K.default.mark(function t(e,n){var i,r,a,o,s,l;return K.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=this,r=""===this.path?ch.extractUrlBase(e):this.path,this.resourcePath=this.resourcePath||r,a=new Od(this.manager),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),t.next=9,a.loadAsync(e,n);case 9:if(o=t.sent,s=JSON.parse(o),void 0!==(l=s.metadata)&&void 0!==l.type&&"geometry"!==l.type.toLowerCase()){t.next=14;break}throw new Error("THREE.ObjectLoader: Can't load "+e);case 14:return t.next=16,i.parseAsync(s);case 16:return t.abrupt("return",t.sent);case 17:case"end":return t.stop()}},t,this)}));return t}()},{key:"parse",value:function(t,e){var n=this.parseAnimations(t.animations),i=this.parseShapes(t.shapes),r=this.parseGeometries(t.geometries,i),a=this.parseImages(t.images,function(){void 0!==e&&e(l)}),o=this.parseTextures(t.textures,a),s=this.parseMaterials(t.materials,o),l=this.parseObject(t.object,r,s,o,n),u=this.parseSkeletons(t.skeletons,l);if(this.bindSkeletons(l,u),void 0!==e){var c=!1;for(var f in a)if(a[f]instanceof HTMLImageElement){c=!0;break}!1===c&&e(l)}return l}},{key:"parseAsync",value:function(){function t(t){return e.apply(this,arguments)}var e=(0,p.default)(K.default.mark(function t(e){var n,i,r,a,o,s,l,u;return K.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),t.next=5,this.parseImagesAsync(e.images);case 5:return a=t.sent,o=this.parseTextures(e.textures,a),s=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,s,o,n),u=this.parseSkeletons(e.skeletons,l),this.bindSkeletons(l,u),t.abrupt("return",l);case 12:case"end":return t.stop()}},t,this)}));return t}()},{key:"parseShapes",value:function(t){var e={};if(void 0!==t)for(var n=0,i=t.length;n<i;n++){var r=(new jf).fromJSON(t[n]);e[r.uuid]=r}return e}},{key:"parseSkeletons",value:function(t,e){var n={},i={};if(e.traverse(function(t){t.isBone&&(i[t.uuid]=t)}),void 0!==t)for(var r=0,a=t.length;r<a;r++){var o=(new Gc).fromJSON(t[r],i);n[o.uuid]=o}return n}},{key:"parseGeometries",value:function(t,e){var n={};if(void 0!==t)for(var i=new dh,r=0,a=t.length;r<a;r++){var o=void 0,s=t[r];switch(s.type){case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(s);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:s.type in sd?o=sd[s.type].fromJSON(s,e):console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"')}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),!0===o.isBufferGeometry&&void 0!==s.userData&&(o.userData=s.userData),n[s.uuid]=o}return n}},{key:"parseMaterials",value:function(t,e){var n={},i={};if(void 0!==t){var r=new uh;r.setTextures(e);for(var a=0,o=t.length;a<o;a++){var s=t[a];if("MultiMaterial"===s.type){for(var l=[],u=0;u<s.materials.length;u++){var c=s.materials[u];void 0===n[c.uuid]&&(n[c.uuid]=r.parse(c)),l.push(n[c.uuid])}i[s.uuid]=l}else void 0===n[s.uuid]&&(n[s.uuid]=r.parse(s)),i[s.uuid]=n[s.uuid]}}return i}},{key:"parseAnimations",value:function(t){var e={};if(void 0!==t)for(var n=0;n<t.length;n++){var i=t[n],r=Ld.parse(i);e[r.uuid]=r}return e}},{key:"parseImages",value:function(t,e){function n(t){return r.manager.itemStart(t),o.load(t,function(){r.manager.itemEnd(t)},void 0,function(){r.manager.itemError(t),r.manager.itemEnd(t)})}function i(t){if("string"==typeof t){var e=t;return n(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(e)?e:r.resourcePath+e)}return t.data?{data:O(t.type,t.data),width:t.width,height:t.height}:null}var r=this,a={},o=void 0;if(void 0!==t&&t.length>0){var s=new Rd(e);o=new Vd(s),o.setCrossOrigin(this.crossOrigin);for(var l=0,u=t.length;l<u;l++){var c=t[l],f=c.url;if(Array.isArray(f)){a[c.uuid]=[];for(var d=0,h=f.length;d<h;d++){var p=f[d],v=i(p);null!==v&&(v instanceof HTMLImageElement?a[c.uuid].push(v):a[c.uuid].push(new zc(v.data,v.width,v.height)))}}else{var m=i(c.url);null!==m&&(a[c.uuid]=m)}}}return a}},{key:"parseImagesAsync",value:function(){function t(t){return e.apply(this,arguments)}var e=(0,p.default)(K.default.mark(function t(e){var n,i,r,a,o,s,l,u,c,f,d,h,v=function(){var t=(0,p.default)(K.default.mark(function t(e){var i,a;return K.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!=typeof e){t.next=8;break}return i=e,a=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(i)?i:n.resourcePath+i,t.next=5,r.loadAsync(a);case 5:return t.abrupt("return",t.sent);case 8:if(!e.data){t.next=12;break}return t.abrupt("return",{data:O(e.type,e.data),width:e.width,height:e.height});case 12:return t.abrupt("return",null);case 13:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}();return K.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this,i={},r=void 0,!(void 0!==e&&e.length>0)){t.next=31;break}r=new Vd(this.manager),r.setCrossOrigin(this.crossOrigin),a=0,o=e.length;case 7:if(!(a<o)){t.next=31;break}if(s=e[a],l=s.url,!Array.isArray(l)){t.next=24;break}i[s.uuid]=[],u=0,c=l.length;case 13:if(!(u<c)){t.next=22;break}return f=l[u],t.next=17,v(f);case 17:d=t.sent,null!==d&&(d instanceof HTMLImageElement?i[s.uuid].push(d):i[s.uuid].push(new zc(d.data,d.width,d.height)));case 19:u++,t.next=13;break;case 22:t.next=28;break;case 24:return t.next=26,v(s.url);case 26:h=t.sent,null!==h&&(i[s.uuid]=h);case 28:a++,t.next=7;break;case 31:return t.abrupt("return",i);case 32:case"end":return t.stop()}},t,this)}));return t}()},{key:"parseTextures",value:function(t,e){function n(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var i={};if(void 0!==t)for(var r=0,a=t.length;r<a;r++){var o=t[r];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===e[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);var s=void 0,l=e[o.image];Array.isArray(l)?(s=new $l(l),6===l.length&&(s.needsUpdate=!0)):(s=l&&l.data?new zc(l.data,l.width,l.height):new Bo(l),l&&(s.needsUpdate=!0)),s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),void 0!==o.mapping&&(s.mapping=n(o.mapping,ph)),void 0!==o.offset&&s.offset.fromArray(o.offset),void 0!==o.repeat&&s.repeat.fromArray(o.repeat),void 0!==o.center&&s.center.fromArray(o.center),void 0!==o.rotation&&(s.rotation=o.rotation),void 0!==o.wrap&&(s.wrapS=n(o.wrap[0],vh),s.wrapT=n(o.wrap[1],vh)),void 0!==o.format&&(s.format=o.format),void 0!==o.type&&(s.type=o.type),void 0!==o.encoding&&(s.encoding=o.encoding),void 0!==o.minFilter&&(s.minFilter=n(o.minFilter,mh)),void 0!==o.magFilter&&(s.magFilter=n(o.magFilter,mh)),void 0!==o.anisotropy&&(s.anisotropy=o.anisotropy),void 0!==o.flipY&&(s.flipY=o.flipY),void 0!==o.premultiplyAlpha&&(s.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(s.unpackAlignment=o.unpackAlignment),void 0!==o.userData&&(s.userData=o.userData),i[o.uuid]=s}return i}},{key:"parseObject",value:function(t,e,n,i,r){function a(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function o(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],i=0,r=t.length;i<r;i++){var a=t[i];void 0===n[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),e.push(n[a])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}function s(t){return void 0===i[t]&&console.warn("THREE.ObjectLoader: Undefined texture",t),i[t]}var l=void 0,u=void 0,c=void 0;switch(t.type){case"Scene":l=new cc,void 0!==t.background&&((0,k.default)(t.background)?l.background=new Co(t.background):l.background=s(t.background)),void 0!==t.environment&&(l.environment=s(t.environment)),void 0!==t.fog&&("Fog"===t.fog.type?l.fog=new uc(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(l.fog=new lc(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":l=new ql(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(l.focus=t.focus),void 0!==t.zoom&&(l.zoom=t.zoom),void 0!==t.filmGauge&&(l.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(l.filmOffset=t.filmOffset),void 0!==t.view&&(l.view=(0,G.default)({},t.view));break;case"OrthographicCamera":l=new du(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(l.zoom=t.zoom),void 0!==t.view&&(l.view=(0,G.default)({},t.view));break;case"AmbientLight":l=new ah(t.color,t.intensity);break;case"DirectionalLight":l=new rh(t.color,t.intensity);break;case"PointLight":l=new nh(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":l=new oh(t.color,t.intensity,t.width,t.height);break;case"SpotLight":l=new Jd(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":l=new jd(t.color,t.groundColor,t.intensity);break;case"LightProbe":l=(new lh).fromJSON(t);break;case"SkinnedMesh":u=a(t.geometry),c=o(t.material),l=new Oc(u,c),void 0!==t.bindMode&&(l.bindMode=t.bindMode),void 0!==t.bindMatrix&&l.bindMatrix.fromArray(t.bindMatrix),void 0!==t.skeleton&&(l.skeleton=t.skeleton);break;case"Mesh":u=a(t.geometry),c=o(t.material),l=new Gl(u,c);break;case"InstancedMesh":u=a(t.geometry),c=o(t.material);var f=t.count,d=t.instanceMatrix,h=t.instanceColor;l=new Zc(u,c,f),l.instanceMatrix=new Hc(new Float32Array(d.array),16),void 0!==h&&(l.instanceColor=new Hc(new Float32Array(h.array),h.itemSize));break;case"LOD":l=new Lc;break;case"Line":l=new ef(a(t.geometry),o(t.material));break;case"LineLoop":l=new of(a(t.geometry),o(t.material));break;case"LineSegments":l=new af(a(t.geometry),o(t.material));break;case"PointCloud":case"Points":l=new df(a(t.geometry),o(t.material));break;case"Sprite":l=new Ic(o(t.material));break;case"Group":l=new nc;break;case"Bone":l=new Fc;break;default:l=new Hs}if(l.uuid=t.uuid,void 0!==t.name&&(l.name=t.name),void 0!==t.matrix?(l.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(l.matrixAutoUpdate=t.matrixAutoUpdate),l.matrixAutoUpdate&&l.matrix.decompose(l.position,l.quaternion,l.scale)):(void 0!==t.position&&l.position.fromArray(t.position),void 0!==t.rotation&&l.rotation.fromArray(t.rotation),void 0!==t.quaternion&&l.quaternion.fromArray(t.quaternion),void 0!==t.scale&&l.scale.fromArray(t.scale)),void 0!==t.castShadow&&(l.castShadow=t.castShadow),void 0!==t.receiveShadow&&(l.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(l.shadow.bias=t.shadow.bias),void 0!==t.shadow.normalBias&&(l.shadow.normalBias=t.shadow.normalBias),void 0!==t.shadow.radius&&(l.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&l.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(l.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(l.visible=t.visible),void 0!==t.frustumCulled&&(l.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(l.renderOrder=t.renderOrder),void 0!==t.userData&&(l.userData=t.userData),void 0!==t.layers&&(l.layers.mask=t.layers),void 0!==t.children)for(var p=t.children,v=0;v<p.length;v++)l.add(this.parseObject(p[v],e,n,i,r));if(void 0!==t.animations)for(var m=t.animations,g=0;g<m.length;g++){var _=m[g];l.animations.push(r[_])}if("LOD"===t.type){void 0!==t.autoUpdate&&(l.autoUpdate=t.autoUpdate);for(var y=t.levels,x=0;x<y.length;x++){var b=y[x],S=l.getObjectByProperty("uuid",b.object);void 0!==S&&l.addLevel(S,b.distance)}}return l}},{key:"bindSkeletons",value:function(t,e){0!==(0,D.default)(e).length&&t.traverse(function(t){if(!0===t.isSkinnedMesh&&void 0!==t.skeleton){var n=e[t.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",t.skeleton):t.bind(n,t.bindMatrix)}})}},{key:"setTexturePath",value:function(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}]),e}(Nd),ph={UVMapping:300,CubeReflectionMapping:Xr,CubeRefractionMapping:Zr,EquirectangularReflectionMapping:qr,EquirectangularRefractionMapping:Qr,CubeUVReflectionMapping:Jr,CubeUVRefractionMapping:Kr},vh={RepeatWrapping:$r,ClampToEdgeWrapping:ta,MirroredRepeatWrapping:ea},mh={NearestFilter:na,NearestMipmapNearestFilter:ia,NearestMipmapLinearFilter:ra,LinearFilter:aa,LinearMipmapNearestFilter:oa,LinearMipmapLinearFilter:sa},gh=function(t){function e(t){(0,rt.default)(this,e);var n=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t));return"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),n.options={premultiplyAlpha:"none"},n}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"setOptions",value:function(t){return this.options=t,this}},{key:"load",value:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,a=Cd.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout(function(){e&&e(a),r.manager.itemEnd(t)},0),a;var o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(t,o).then(function(t){return t.blob()}).then(function(t){return createImageBitmap(t,(0,G.default)(r.options,{colorSpaceConversion:"none"}))}).then(function(n){Cd.add(t,n),e&&e(n),r.manager.itemEnd(t)}).catch(function(e){i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}),r.manager.itemStart(t)}}]),e}(Nd);gh.prototype.isImageBitmapLoader=!0;var _h=void 0,yh={getContext:function(){return void 0===_h&&(_h=new(window.AudioContext||window.webkitAudioContext)),_h},setContext:function(t){_h=t}},xh=function(t){function e(t){return(0,rt.default)(this,e),(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t))}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"load",value:function(t,e,n,i){var r=this,a=new Od(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(n){try{var a=n.slice(0);yh.getContext().decodeAudioData(a,function(t){e(t)})}catch(e){i?i(e):console.error(e),r.manager.itemError(t)}},n,i)}}]),e}(Nd),bh=function(t){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;(0,rt.default)(this,e);var r=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,void 0,i)),a=(new Co).set(t),o=(new Co).set(n),s=new Go(a.r,a.g,a.b),l=new Go(o.r,o.g,o.b),u=Math.sqrt(Math.PI),c=u*Math.sqrt(.75);return r.sh.coefficients[0].copy(s).add(l).multiplyScalar(u),r.sh.coefficients[1].copy(s).sub(l).multiplyScalar(c),r}return(0,Q.default)(e,t),e}(lh);bh.prototype.isHemisphereLightProbe=!0;var Sh=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;(0,rt.default)(this,e);var i=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,void 0,n)),r=(new Co).set(t);return i.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI)),i}return(0,Q.default)(e,t),e}(lh);Sh.prototype.isAmbientLightProbe=!0;var wh=new _s,Eh=new _s,Ah=new _s,Th=function(){function t(){(0,rt.default)(this,t),this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ql,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ql,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}return(0,ot.default)(t,[{key:"update",value:function(t){var e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep,Ah.copy(t.projectionMatrix);var n=e.eyeSep/2,i=n*e.near/e.focus,r=e.near*Math.tan(wo*e.fov*.5)/e.zoom,a=void 0,o=void 0;Eh.elements[12]=-n,wh.elements[12]=n,a=-r*e.aspect+i,o=r*e.aspect+i,Ah.elements[0]=2*e.near/(o-a),Ah.elements[8]=(o+a)/(o-a),this.cameraL.projectionMatrix.copy(Ah),a=-r*e.aspect-i,o=r*e.aspect-i,Ah.elements[0]=2*e.near/(o-a),Ah.elements[8]=(o+a)/(o-a),this.cameraR.projectionMatrix.copy(Ah)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(Eh),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(wh)}}]),t}(),Mh=function(){function t(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];(0,rt.default)(this,t),this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}return(0,ot.default)(t,[{key:"start",value:function(){this.startTime=fi(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=fi();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}]),t}(),Ih=new Go,Ph=new Uo,kh=new Go,Lh=new Go,Ch=function(t){function e(){(0,rt.default)(this,e);var t=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return t.type="AudioListener",t.context=yh.getContext(),t.gain=t.context.createGain(),t.gain.connect(t.context.destination),t.filter=null,t.timeDelta=0,t._clock=new Mh,t}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"getInput",value:function(){return this.gain}},{key:"removeFilter",value:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}},{key:"getFilter",value:function(){return this.filter}},{key:"setFilter",value:function(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}},{key:"getMasterVolume",value:function(){return this.gain.gain.value}},{key:"setMasterVolume",value:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}},{key:"updateMatrixWorld",value:function(t){(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"updateMatrixWorld",this).call(this,t);var n=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ih,Ph,kh),Lh.set(0,0,-1).applyQuaternion(Ph),n.positionX){var r=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(Ih.x,r),n.positionY.linearRampToValueAtTime(Ih.y,r),n.positionZ.linearRampToValueAtTime(Ih.z,r),n.forwardX.linearRampToValueAtTime(Lh.x,r),n.forwardY.linearRampToValueAtTime(Lh.y,r),n.forwardZ.linearRampToValueAtTime(Lh.z,r),n.upX.linearRampToValueAtTime(i.x,r),n.upY.linearRampToValueAtTime(i.y,r),n.upZ.linearRampToValueAtTime(i.z,r)}else n.setPosition(Ih.x,Ih.y,Ih.z),n.setOrientation(Lh.x,Lh.y,Lh.z,i.x,i.y,i.z)}}]),e}(Hs),Rh=function(t){function e(t){(0,rt.default)(this,e);var n=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return n.type="Audio",n.listener=t,n.context=t.context,n.gain=n.context.createGain(),n.gain.connect(t.getInput()),n.autoplay=!1,n.buffer=null,n.detune=0,n.loop=!1,n.loopStart=0,n.loopEnd=0,n.offset=0,n.duration=void 0,n.playbackRate=1,n.isPlaying=!1,n.hasPlaybackControl=!0,n.source=null,n.sourceType="empty",n._startedAt=0,n._progress=0,n._connected=!1,n.filters=[],n}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}},{key:"setMediaElementSource",value:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}},{key:"setMediaStreamSource",value:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}},{key:"setBuffer",value:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+t;var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}},{key:"pause",value:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this)}},{key:"stop",value:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this)}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}},{key:"setDetune",value:function(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(t){return this.setFilters(t?[t]:[])}},{key:"setPlaybackRate",value:function(t){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this)}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(t){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this)}},{key:"setLoopStart",value:function(t){return this.loopStart=t,this}},{key:"setLoopEnd",value:function(t){return this.loopEnd=t,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}]),e}(Hs),Dh=new Go,Nh=new Uo,Bh=new Go,Oh=new Go,Fh=function(t){function e(t){(0,rt.default)(this,e);var n=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t));return n.panner=n.context.createPanner(),n.panner.panningModel="HRTF",n.panner.connect(n.gain),n}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"getOutput",value:function(){return this.panner}},{key:"getRefDistance",value:function(){return this.panner.refDistance}},{key:"setRefDistance",value:function(t){return this.panner.refDistance=t,this}},{key:"getRolloffFactor",value:function(){return this.panner.rolloffFactor}},{key:"setRolloffFactor",value:function(t){return this.panner.rolloffFactor=t,this}},{key:"getDistanceModel",value:function(){return this.panner.distanceModel}},{key:"setDistanceModel",value:function(t){return this.panner.distanceModel=t,this}},{key:"getMaxDistance",value:function(){return this.panner.maxDistance}},{key:"setMaxDistance",value:function(t){return this.panner.maxDistance=t,this}},{key:"setDirectionalCone",value:function(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this}},{key:"updateMatrixWorld",value:function(t){if((0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"updateMatrixWorld",this).call(this,t),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(Dh,Nh,Bh),Oh.set(0,0,1).applyQuaternion(Nh);var n=this.panner;if(n.positionX){var i=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(Dh.x,i),n.positionY.linearRampToValueAtTime(Dh.y,i),n.positionZ.linearRampToValueAtTime(Dh.z,i),n.orientationX.linearRampToValueAtTime(Oh.x,i),n.orientationY.linearRampToValueAtTime(Oh.y,i),n.orientationZ.linearRampToValueAtTime(Oh.z,i)}else n.setPosition(Dh.x,Dh.y,Dh.z),n.setOrientation(Oh.x,Oh.y,Oh.z)}}}]),e}(Rh),zh=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;(0,rt.default)(this,t),this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}return(0,ot.default)(t,[{key:"getFrequencyData",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:"getAverageFrequency",value:function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length}}]),t}(),Vh=function(){function t(e,n,i){(0,rt.default)(this,t),this.binding=e,this.valueSize=i;var r=void 0,a=void 0,o=void 0;switch(n){case"quaternion":r=this._slerp,a=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":r=this._select,a=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:r=this._lerp,a=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=a,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return(0,ot.default)(t,[{key:"accumulate",value:function(t,e){var n=this.buffer,i=this.valueSize,r=t*i+i,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==i;++o)n[r+o]=n[o];a=e}else{a+=e;var s=e/a;this._mixBufferRegion(n,r,0,s,i)}this.cumulativeWeight=a}},{key:"accumulateAdditive",value:function(t){var e=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,i,0,t,n),this.cumulativeWeightAdditive+=t}},{key:"apply",value:function(t){var e=this.valueSize,n=this.buffer,i=t*e+e,r=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){var s=e*this._origIndex;this._mixBufferRegion(n,i,s,1-r,e)}a>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*e,1,e);for(var l=e,u=e+e;l!==u;++l)if(n[l]!==n[l+e]){o.setValue(n,i);break}}},{key:"saveOriginalState",value:function(){var t=this.binding,e=this.buffer,n=this.valueSize,i=n*this._origIndex;t.getValue(e,i);for(var r=n,a=i;r!==a;++r)e[r]=e[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var t=this._addIndex*this.valueSize,e=t+this.valueSize,n=t;n<e;n++)this.buffer[n]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}},{key:"_select",value:function(t,e,n,i,r){if(i>=.5)for(var a=0;a!==r;++a)t[e+a]=t[n+a]}},{key:"_slerp",value:function(t,e,n,i){Uo.slerpFlat(t,e,t,e,t,n,i)}},{key:"_slerpAdditive",value:function(t,e,n,i,r){var a=this._workIndex*r;Uo.multiplyQuaternionsFlat(t,a,t,e,t,n),Uo.slerpFlat(t,e,t,e,t,a,i)}},{key:"_lerp",value:function(t,e,n,i,r){for(var a=1-i,o=0;o!==r;++o){var s=e+o;t[s]=t[s]*a+t[n+o]*i}}},{key:"_lerpAdditive",value:function(t,e,n,i,r){for(var a=0;a!==r;++a){var o=e+a;t[o]=t[o]+t[n+a]*i}}}]),t}(),Uh="\\[\\]\\.:\\/",Gh=new RegExp("["+Uh+"]","g"),Hh="[^"+Uh+"]",Yh="[^"+Uh.replace("\\.","")+"]",jh=/((?:WC+[\/:])*)/.source.replace("WC",Hh),Wh=/(WCOD+)?/.source.replace("WCOD",Yh),Xh=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Hh),Zh=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Hh),qh=new RegExp("^"+jh+Wh+Xh+Zh+"$"),Qh=["material","materials","bones"],Jh=function(){function t(e,n,i){(0,rt.default)(this,t);var r=i||Kh.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,r)}return(0,ot.default)(t,[{key:"getValue",value:function(t,e){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(t,e)}},{key:"setValue",value:function(t,e){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)}},{key:"bind",value:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}},{key:"unbind",value:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}]),t}(),Kh=function(){function t(e,n,i){(0,rt.default)(this,t),this.path=n,this.parsedPath=i||t.parseTrackName(n),this.node=t.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return(0,ot.default)(t,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(t,e){t[e]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)t[e++]=n[i]}},{key:"_getValue_arrayElement",value:function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(t,e){this.resolvedProperty.toArray(t,e)}},{key:"_setValue_direct",value:function(t,e){this.targetObject[this.propertyName]=t[e]}},{key:"_setValue_direct_setNeedsUpdate",value:function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++]}},{key:"_setValue_array_setNeedsUpdate",value:function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(t,e){this.resolvedProperty.fromArray(t,e)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(t,e){this.bind(),this.getValue(t,e)}},{key:"_setValue_unbound",value:function(t,e){this.bind(),this.setValue(t,e)}},{key:"bind",value:function(){var e=this.node,n=this.parsedPath,i=n.objectName,r=n.propertyName,a=n.propertyIndex;if(e||(e=t.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(i){var o=n.objectIndex;switch(i){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var s=0;s<e.length;s++)if(e[s].name===o){o=s;break}break;default:if(void 0===e[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[i]}if(void 0!==o){if(void 0===e[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[o]}}var l=e[r];if(void 0===l){var u=n.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",e)}var c=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);var f=this.BindingType.Direct;if(void 0!==a){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[a]&&(a=e.morphTargetDictionary[a])}f=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=a}else void 0!==l.fromArray&&void 0!==l.toArray?(f=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(f=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=r;this.getValue=this.GetterByBindingType[f],this.setValue=this.SetterByBindingTypeAndVersioning[f][c]}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(e,n,i){return e&&e.isAnimationObjectGroup?new t.Composite(e,n,i):new t(e,n,i)}},{key:"sanitizeNodeName",value:function(t){return t.replace(/\s/g,"_").replace(Gh,"")}},{key:"parseTrackName",value:function(t){var e=qh.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var r=n.nodeName.substring(i+1);-1!==Qh.indexOf(r)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}},{key:"findNode",value:function(t,e){if(!e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){var i=function t(n){for(var i=0;i<n.length;i++){var r=n[i];if(r.name===e||r.uuid===e)return r;var a=t(r.children);if(a)return a}return null}(t.children);if(i)return i}return null}}]),t}();Kh.Composite=Jh,Kh.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Kh.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Kh.prototype.GetterByBindingType=[Kh.prototype._getValue_direct,Kh.prototype._getValue_array,Kh.prototype._getValue_arrayElement,Kh.prototype._getValue_toArray],Kh.prototype.SetterByBindingTypeAndVersioning=[[Kh.prototype._setValue_direct,Kh.prototype._setValue_direct_setNeedsUpdate,Kh.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Kh.prototype._setValue_array,Kh.prototype._setValue_array_setNeedsUpdate,Kh.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Kh.prototype._setValue_arrayElement,Kh.prototype._setValue_arrayElement_setNeedsUpdate,Kh.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Kh.prototype._setValue_fromArray,Kh.prototype._setValue_fromArray_setNeedsUpdate,Kh.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var $h=function(){function t(){(0,rt.default)(this,t),this.uuid=e(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var n={};this._indicesByUUID=n;for(var i=0,r=arguments.length;i!==r;++i)n[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var a=this;this.stats={objects:{get total(){return a._objects.length},get inUse(){return this.total-a.nCachedObjects_}},get bindingsPerObject(){return a._bindings.length}}}return(0,ot.default)(t,[{key:"add",value:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,a=r.length,o=void 0,s=t.length,l=this.nCachedObjects_,u=0,c=arguments.length;u!==c;++u){var f=arguments[u],d=f.uuid,h=e[d];if(void 0===h){h=s++,e[d]=h,t.push(f);for(var p=0,v=a;p!==v;++p)r[p].push(new Kh(f,n[p],i[p]))}else if(h<l){o=t[h];var m=--l,g=t[m];e[g.uuid]=h,t[h]=g,e[d]=m,t[m]=f;for(var _=0,y=a;_!==y;++_){var x=r[_],b=x[m],S=x[h];x[h]=b,void 0===S&&(S=new Kh(f,n[_],i[_])),x[m]=S}}else t[h]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}},{key:"remove",value:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length,r=this.nCachedObjects_,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],l=s.uuid,u=e[l];if(void 0!==u&&u>=r){var c=r++,f=t[c];e[f.uuid]=u,t[u]=f,e[l]=c,t[c]=s;for(var d=0,h=i;d!==h;++d){var p=n[d],v=p[c],m=p[u];p[u]=v,p[c]=m}}}this.nCachedObjects_=r}},{key:"uncache",value:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length,r=this.nCachedObjects_,a=t.length,o=0,s=arguments.length;o!==s;++o){var l=arguments[o],u=l.uuid,c=e[u];if(void 0!==c)if(delete e[u],c<r){var f=--r,d=t[f],h=--a,p=t[h];e[d.uuid]=c,t[c]=d,e[p.uuid]=f,t[f]=p,t.pop();for(var v=0,m=i;v!==m;++v){var g=n[v],_=g[f],y=g[h];g[c]=_,g[f]=y,g.pop()}}else{var x=--a,b=t[x];x>0&&(e[b.uuid]=c),t[c]=b,t.pop();for(var S=0,w=i;S!==w;++S){var E=n[S];E[c]=E[x],E.pop()}}}this.nCachedObjects_=r}},{key:"subscribe_",value:function(t,e){var n=this._bindingsIndicesByPath,i=n[t],r=this._bindings;if(void 0!==i)return r[i];var a=this._paths,o=this._parsedPaths,s=this._objects,l=s.length,u=this.nCachedObjects_,c=new Array(l);i=r.length,n[t]=i,a.push(t),o.push(e),r.push(c);for(var f=u,d=s.length;f!==d;++f){var h=s[f];c[f]=new Kh(h,t,e)}return c}},{key:"unsubscribe_",value:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){var i=this._paths,r=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];e[t[o]]=n,a[n]=s,a.pop(),r[n]=r[o],r.pop(),i[n]=i[o],i.pop()}}}]),t}();$h.prototype.isAnimationObjectGroup=!0;var tp=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;(0,rt.default)(this,t),this._mixer=e,this._clip=n,this._localRoot=i,this.blendMode=r;for(var a=n.tracks,o=a.length,s=new Array(o),l={endingStart:ro,endingEnd:ro},u=0;u!==o;++u){var c=a[u].createInterpolant(null);s[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=io,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return(0,ot.default)(t,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(t){return this._startTime=t,this}},{key:"setLoop",value:function(t,e){return this.loop=t,this.repetitions=e,this}},{key:"setEffectiveWeight",value:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(t){return this._scheduleFading(t,0,1)}},{key:"fadeOut",value:function(t){return this._scheduleFading(t,1,0)}},{key:"crossFadeFrom",value:function(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){var i=this._clip.duration,r=t._clip.duration,a=r/i,o=i/r;t.warp(1,a,e),this.warp(o,1,e)}return this}},{key:"crossFadeTo",value:function(t,e,n){return t.crossFadeFrom(this,e,n)}},{key:"stopFading",value:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}},{key:"setEffectiveTimeScale",value:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}},{key:"syncWith",value:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}},{key:"halt",value:function(t){return this.warp(this._effectiveTimeScale,0,t)}},{key:"warp",value:function(t,e,n){var i=this._mixer,r=i.time,a=this.timeScale,o=this._timeScaleInterpolant;null===o&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,l=o.sampleValues;return s[0]=r,s[1]=r+n,l[0]=t/a,l[1]=e/a,this}},{key:"stopWarping",value:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(t,e,n,i){if(!this.enabled)return void this._updateWeight(t);var r=this._startTime;if(null!==r){var a=(t-r)*n;if(a<0||0===n)return;this._startTime=null,e=n*a}e*=this._updateTimeScale(t);var o=this._updateTime(e),s=this._updateWeight(t);if(s>0){var l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case 2501:for(var c=0,f=l.length;c!==f;++c)l[c].evaluate(o),u[c].accumulateAdditive(s);break;case ao:default:for(var d=0,h=l.length;d!==h;++d)l[d].evaluate(o),u[d].accumulate(i,s)}}}},{key:"_updateWeight",value:function(t){var e=0;if(this.enabled){e=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=e,e}},{key:"_updateTimeScale",value:function(t){var e=0;if(!this.paused){e=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n){e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}},{key:"_updateTime",value:function(t){var e=this._clip.duration,n=this.loop,i=this.time+t,r=this._loopCount,a=2202===n;if(0===t)return-1===r?i:a&&1==(1&r)?e-i:i;if(2200===n){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(i>=e)i=e;else{if(!(i<0)){this.time=i;break t}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),i>=e||i<0){var o=Math.floor(i/e);i-=e*o,r+=Math.abs(o);var s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=t>0?e:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===s){var l=t<0;this._setEndings(l,!l,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=i;if(a&&1==(1&r))return e-i}return i}},{key:"_setEndings",value:function(t,e,n){var i=this._interpolantSettings;n?(i.endingStart=2401,i.endingEnd=2401):(i.endingStart=t?this.zeroSlopeAtStart?2401:ro:2402,i.endingEnd=e?this.zeroSlopeAtEnd?2401:ro:2402)}},{key:"_scheduleFading",value:function(t,e,n){var i=this._mixer,r=i.time,a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=r,s[0]=e,o[1]=r+t,s[1]=n,this}}]),t}(),ep=function(t){function e(t){(0,rt.default)(this,e);var n=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return n._root=t,n._initMemoryManager(),n._accuIndex=0,n.time=0,n.timeScale=1,n}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"_bindAction",value:function(t,e){var n=t._localRoot||this._root,i=t._clip.tracks,r=i.length,a=t._propertyBindings,o=t._interpolants,s=n.uuid,l=this._bindingsByRootAndName,u=l[s];void 0===u&&(u={},l[s]=u);for(var c=0;c!==r;++c){var f=i[c],d=f.name,h=u[d];if(void 0!==h)++h.referenceCount,a[c]=h;else{if(void 0!==(h=a[c])){null===h._cacheIndex&&(++h.referenceCount,this._addInactiveBinding(h,s,d));continue}var p=e&&e._propertyBindings[c].binding.parsedPath;h=new Vh(Kh.create(n,d,p),f.ValueTypeName,f.getValueSize()),++h.referenceCount,this._addInactiveBinding(h,s,d),a[c]=h}o[c].resultBuffer=h.buffer}}},{key:"_activateAction",value:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,i=this._actionsByClip[n];this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,n,e)}for(var r=t._propertyBindings,a=0,o=r.length;a!==o;++a){var s=r[a];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}}},{key:"_deactivateAction",value:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions}},{key:"_addInactiveAction",value:function(t,e,n){var i=this._actions,r=this._actionsByClip,a=r[e];if(void 0===a)a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=a;else{var o=a.knownActions;t._byClipCacheIndex=o.length,o.push(t)}t._cacheIndex=i.length,i.push(t),a.actionByRoot[n]=t}},{key:"_removeInactiveAction",value:function(t){var e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;var r=t._clip.uuid,a=this._actionsByClip,o=a[r],s=o.knownActions,l=s[s.length-1],u=t._byClipCacheIndex;l._byClipCacheIndex=u,s[u]=l,s.pop(),t._byClipCacheIndex=null,delete o.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete a[r],this._removeInactiveBindingsForAction(t)}},{key:"_removeInactiveBindingsForAction",value:function(t){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0==--r.referenceCount&&this._removeInactiveBinding(r)}}},{key:"_lendAction",value:function(t){var e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}},{key:"_takeBackAction",value:function(t){var e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}},{key:"_addInactiveBinding",value:function(t,e,n){var i=this._bindingsByRootAndName,r=this._bindings,a=i[e];void 0===a&&(a={},i[e]=a),a[n]=t,t._cacheIndex=r.length,r.push(t)}},{key:"_removeInactiveBinding",value:function(t){var e=this._bindings,n=t.binding,i=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,o=a[i],s=e[e.length-1],l=t._cacheIndex;s._cacheIndex=l,e[l]=s,e.pop(),delete o[r],0===(0,D.default)(o).length&&delete a[i]}},{key:"_lendBinding",value:function(t){var e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}},{key:"_takeBackBinding",value:function(t){var e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}},{key:"_lendControlInterpolant",value:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&(n=new bd(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n}},{key:"_takeBackControlInterpolant",value:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];t.__cacheIndex=i,e[i]=t,r.__cacheIndex=n,e[n]=r}},{key:"clipAction",value:function(t,e,n){var i=e||this._root,r=i.uuid,a="string"==typeof t?Ld.findByName(i,t):t,o=null!==a?a.uuid:t,s=this._actionsByClip[o],l=null;if(void 0===n&&(n=null!==a?a.blendMode:ao),void 0!==s){var u=s.actionByRoot[r];if(void 0!==u&&u.blendMode===n)return u;l=s.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;var c=new tp(this,a,e,n);return this._bindAction(c,l),this._addInactiveAction(c,o,r),c}},{key:"existingAction",value:function(t,e){var n=e||this._root,i=n.uuid,r="string"==typeof t?Ld.findByName(n,t):t,a=r?r.uuid:t,o=this._actionsByClip[a];return void 0!==o?o.actionByRoot[i]||null:null}},{key:"stopAllAction",value:function(){for(var t=this._actions,e=this._nActiveActions,n=e-1;n>=0;--n)t[n].stop();return this}},{key:"update",value:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,i=this.time+=t,r=(0,d.default)(t),a=this._accuIndex^=1,o=0;o!==n;++o){e[o]._update(i,t,r,a)}for(var s=this._bindings,l=this._nActiveBindings,u=0;u!==l;++u)s[u].apply(a);return this}},{key:"setTime",value:function(t){this.time=0;for(var e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(t){var e=this._actions,n=t.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var a=r.knownActions,o=0,s=a.length;o!==s;++o){var l=a[o];this._deactivateAction(l);var u=l._cacheIndex,c=e[e.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=u,e[u]=c,e.pop(),this._removeInactiveBindingsForAction(l)}delete i[n]}}},{key:"uncacheRoot",value:function(t){var e=t.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot,a=r[e];void 0!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}var o=this._bindingsByRootAndName,s=o[e];if(void 0!==s)for(var l in s){var u=s[l];u.restoreOriginalState(),this._removeInactiveBinding(u)}}},{key:"uncacheAction",value:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}]),e}(yo);ep.prototype._controlInterpolantsResultBuffer=new Float32Array(1);var np=function(){function t(e){(0,rt.default)(this,t),"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}return(0,ot.default)(t,[{key:"clone",value:function(){return new t(void 0===this.value.clone?this.value:this.value.clone())}}]),t}(),ip=function(t){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;(0,rt.default)(this,e);var r=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,t,n));return r.meshPerAttribute=i,r}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}},{key:"clone",value:function(t){var n=(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"clone",this).call(this,t);return n.meshPerAttribute=this.meshPerAttribute,n}},{key:"toJSON",value:function(t){var n=(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"toJSON",this).call(this,t);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}]),e}(fc);ip.prototype.isInstancedInterleavedBuffer=!0;var rp=function(){function t(e,n,i,r,a){(0,rt.default)(this,t),this.buffer=e,this.type=n,this.itemSize=i,this.elementSize=r,this.count=a,this.version=0}return(0,ot.default)(t,[{key:"setBuffer",value:function(t){return this.buffer=t,this}},{key:"setType",value:function(t,e){return this.type=t,this.elementSize=e,this}},{key:"setItemSize",value:function(t){return this.itemSize=t,this}},{key:"setCount",value:function(t){return this.count=t,this}},{key:"needsUpdate",set:function(t){!0===t&&this.version++}}]),t}();rp.prototype.isGLBufferAttribute=!0;var ap=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;(0,rt.default)(this,t),this.ray=new gs(e,n),this.near=i,this.far=r,this.camera=null,this.layers=new Ps,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}return(0,ot.default)(t,[{key:"set",value:function(t,e){this.ray.set(t,e)}},{key:"setFromCamera",value:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}},{key:"intersectObject",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return hi(t,this,n,e),n.sort(di),n}},{key:"intersectObjects",value:function(t){for(var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=0,r=t.length;i<r;i++)hi(t[i],this,n,e);return n.sort(di),n}}]),t}(),op=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,rt.default)(this,t),this.radius=e,this.phi=n,this.theta=i,this}return(0,ot.default)(t,[{key:"set",value:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}},{key:"copy",value:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}},{key:"makeSafe",value:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}},{key:"setFromVector3",value:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}},{key:"setFromCartesianCoords",value:function(t,e,i){return this.radius=Math.sqrt(t*t+e*e+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,i),this.phi=Math.acos(n(e/this.radius,-1,1))),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}(),sp=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,rt.default)(this,t),this.radius=e,this.theta=n,this.y=i,this}return(0,ot.default)(t,[{key:"set",value:function(t,e,n){return this.radius=t,this.theta=e,this.y=n,this}},{key:"copy",value:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}},{key:"setFromVector3",value:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}},{key:"setFromCartesianCoords",value:function(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}(),lp=new To,up=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new To(1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new To(-1/0,-1/0);(0,rt.default)(this,t),this.min=e,this.max=n}return(0,ot.default)(t,[{key:"set",value:function(t,e){return this.min.copy(t),this.max.copy(e),this}},{key:"setFromPoints",value:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}},{key:"setFromCenterAndSize",value:function(t,e){var n=lp.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.min.copy(t.min),this.max.copy(t.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(t){return this.min.min(t),this.max.max(t),this}},{key:"expandByVector",value:function(t){return this.min.sub(t),this.max.add(t),this}},{key:"expandByScalar",value:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this}},{key:"containsPoint",value:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}},{key:"containsBox",value:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}},{key:"getParameter",value:function(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}},{key:"clampPoint",value:function(t,e){return e.copy(t).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(t){return lp.copy(t).clamp(this.min,this.max).sub(t).length()}},{key:"intersect",value:function(t){return this.min.max(t.min),this.max.min(t.max),this}},{key:"union",value:function(t){return this.min.min(t.min),this.max.max(t.max),this}},{key:"translate",value:function(t){return this.min.add(t),this.max.add(t),this}},{key:"equals",value:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}]),t}();up.prototype.isBox2=!0;var cp=new Go,fp=new Go,dp=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Go,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Go;(0,rt.default)(this,t),this.start=e,this.end=n}return(0,ot.default)(t,[{key:"set",value:function(t,e){return this.start.copy(t),this.end.copy(e),this}},{key:"copy",value:function(t){return this.start.copy(t.start),this.end.copy(t.end),this}},{key:"getCenter",value:function(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(t){return t.subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}},{key:"closestPointToPointParameter",value:function(t,e){cp.subVectors(t,this.start),fp.subVectors(this.end,this.start);var i=fp.dot(fp),r=fp.dot(cp),a=r/i;return e&&(a=n(a,0,1)),a}},{key:"closestPointToPoint",value:function(t,e,n){var i=this.closestPointToPointParameter(t,e);return this.delta(n).multiplyScalar(i).add(this.start)}},{key:"applyMatrix4",value:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}},{key:"equals",value:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}(),hp=new Go,pp=function(t){function e(t,n){(0,rt.default)(this,e);var i=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));i.light=t,i.light.updateMatrixWorld(),i.matrix=t.matrixWorld,i.matrixAutoUpdate=!1,i.color=n;for(var r=new El,a=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],o=0,s=1;o<32;o++,s++){var l=o/32*Math.PI*2,u=s/32*Math.PI*2;a.push(Math.cos(l),Math.sin(l),1,Math.cos(u),Math.sin(u),1)}r.setAttribute("position",new vl(a,3));var c=new qc({fog:!1,toneMapped:!1});return i.cone=new af(r,c),i.add(i.cone),i.update(),i}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"dispose",value:function(){this.cone.geometry.dispose(),this.cone.material.dispose()}},{key:"update",value:function(){this.light.updateMatrixWorld();var t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),hp.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(hp),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}]),e}(Hs),vp=new Go,mp=new _s,gp=new _s,_p=function(t){function e(t){(0,rt.default)(this,e);for(var n=pi(t),i=new El,r=[],a=[],o=new Co(0,0,1),s=new Co(0,1,0),l=0;l<n.length;l++){var u=n[l];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),a.push(o.r,o.g,o.b),a.push(s.r,s.g,s.b))}i.setAttribute("position",new vl(r,3)),i.setAttribute("color",new vl(a,3));var c=new qc({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0}),f=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,i,c));return f.type="SkeletonHelper",f.isSkeletonHelper=!0,f.root=t,f.bones=n,f.matrix=t.matrixWorld,f.matrixAutoUpdate=!1,f}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"updateMatrixWorld",value:function(t){var n=this.bones,i=this.geometry,r=i.getAttribute("position");gp.copy(this.root.matrixWorld).invert();for(var a=0,o=0;a<n.length;a++){var s=n[a];s.parent&&s.parent.isBone&&(mp.multiplyMatrices(gp,s.matrixWorld),vp.setFromMatrixPosition(mp),r.setXYZ(o,vp.x,vp.y,vp.z),mp.multiplyMatrices(gp,s.parent.matrixWorld),vp.setFromMatrixPosition(mp),r.setXYZ(o+1,vp.x,vp.y,vp.z),o+=2)}i.getAttribute("position").needsUpdate=!0,(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"updateMatrixWorld",this).call(this,t)}}]),e}(af),yp=function(t){function e(t,n,i){(0,rt.default)(this,e);var r=new ed(n,4,2),a=new il({wireframe:!0,fog:!1,toneMapped:!1}),o=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,r,a));return o.light=t,o.light.updateMatrixWorld(),o.color=i,o.type="PointLightHelper",o.matrix=o.light.matrixWorld,o.matrixAutoUpdate=!1,o.update(),o}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"update",value:function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}]),e}(Gl),xp=new Go,bp=new Co,Sp=new Co,wp=function(t){function e(t,n,i){(0,rt.default)(this,e);var r=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));r.light=t,r.light.updateMatrixWorld(),r.matrix=t.matrixWorld,r.matrixAutoUpdate=!1,r.color=i;var a=new Kf(n);a.rotateY(.5*Math.PI),r.material=new il({wireframe:!0,fog:!1,toneMapped:!1}),void 0===r.color&&(r.material.vertexColors=!0);var o=a.getAttribute("position"),s=new Float32Array(3*o.count);return a.setAttribute("color",new ol(s,3)),r.add(new Gl(a,r.material)),r.update(),r}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"dispose",value:function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}},{key:"update",value:function(){var t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var e=t.geometry.getAttribute("color");bp.copy(this.light.color),Sp.copy(this.light.groundColor);for(var n=0,i=e.count;n<i;n++){var r=n<i/2?bp:Sp;e.setXYZ(n,r.r,r.g,r.b)}e.needsUpdate=!0}t.lookAt(xp.setFromMatrixPosition(this.light.matrixWorld).negate())}}]),e}(Hs),Ep=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;(0,rt.default)(this,e),i=new Co(i),r=new Co(r);for(var a=n/2,o=t/n,s=t/2,l=[],u=[],c=0,f=0,d=-s;c<=n;c++,d+=o){l.push(-s,0,d,s,0,d),l.push(d,0,-s,d,0,s);var h=c===a?i:r;h.toArray(u,f),f+=3,h.toArray(u,f),f+=3,h.toArray(u,f),f+=3,h.toArray(u,f),f+=3}var p=new El;p.setAttribute("position",new vl(l,3)),p.setAttribute("color",new vl(u,3));var v=new qc({vertexColors:!0,toneMapped:!1}),m=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,p,v));return m.type="GridHelper",m}return(0,Q.default)(e,t),e}(af),Ap=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;(0,rt.default)(this,e),a=new Co(a),o=new Co(o);for(var s=[],l=[],u=0;u<=n;u++){var c=u/n*(2*Math.PI),f=Math.sin(c)*t,d=Math.cos(c)*t;s.push(0,0,0),s.push(f,0,d);var h=1&u?a:o;l.push(h.r,h.g,h.b),l.push(h.r,h.g,h.b)}for(var p=0;p<=i;p++)for(var v=1&p?a:o,m=t-t/i*p,g=0;g<r;g++){var _=g/r*(2*Math.PI),y=Math.sin(_)*m,x=Math.cos(_)*m;s.push(y,0,x),l.push(v.r,v.g,v.b),_=(g+1)/r*(2*Math.PI),y=Math.sin(_)*m,x=Math.cos(_)*m,s.push(y,0,x),l.push(v.r,v.g,v.b)}var b=new El;b.setAttribute("position",new vl(s,3)),b.setAttribute("color",new vl(l,3));var S=new qc({vertexColors:!0,toneMapped:!1}),w=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,b,S));return w.type="PolarGridHelper",w}return(0,Q.default)(e,t),e}(af),Tp=new Go,Mp=new Go,Ip=new Go,Pp=function(t){function e(t,n,i){(0,rt.default)(this,e);var r=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));r.light=t,r.light.updateMatrixWorld(),r.matrix=t.matrixWorld,r.matrixAutoUpdate=!1,r.color=i,void 0===n&&(n=1);var a=new El;a.setAttribute("position",new vl([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));var o=new qc({fog:!1,toneMapped:!1});return r.lightPlane=new ef(a,o),r.add(r.lightPlane),a=new El,a.setAttribute("position",new vl([0,0,0,0,0,1],3)),r.targetLine=new ef(a,o),r.add(r.targetLine),r.update(),r}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"dispose",value:function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}},{key:"update",value:function(){Tp.setFromMatrixPosition(this.light.matrixWorld),Mp.setFromMatrixPosition(this.light.target.matrixWorld),Ip.subVectors(Mp,Tp),this.lightPlane.lookAt(Mp),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Mp),this.targetLine.scale.z=Ip.length()}}]),e}(Hs),kp=new Go,Lp=new Zl,Cp=function(t){function e(t){function n(t,e,n){i(t,n),i(e,n)}function i(t,e){o.push(0,0,0),s.push(e.r,e.g,e.b),void 0===l[t]&&(l[t]=[]),l[t].push(o.length/3-1)}(0,rt.default)(this,e);var r=new El,a=new qc({color:16777215,vertexColors:!0,toneMapped:!1}),o=[],s=[],l={},u=new Co(16755200),c=new Co(16711680),f=new Co(43775),d=new Co(16777215),h=new Co(3355443);n("n1","n2",u),n("n2","n4",u),n("n4","n3",u),n("n3","n1",u),n("f1","f2",u),n("f2","f4",u),n("f4","f3",u),n("f3","f1",u),n("n1","f1",u),n("n2","f2",u),n("n3","f3",u),n("n4","f4",u),n("p","n1",c),n("p","n2",c),n("p","n3",c),n("p","n4",c),n("u1","u2",f),n("u2","u3",f),n("u3","u1",f),n("c","t",d),n("p","c",h),n("cn1","cn2",h),n("cn3","cn4",h),n("cf1","cf2",h),n("cf3","cf4",h),r.setAttribute("position",new vl(o,3)),r.setAttribute("color",new vl(s,3));var p=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,r,a));return p.type="CameraHelper",p.camera=t,p.camera.updateProjectionMatrix&&p.camera.updateProjectionMatrix(),p.matrix=t.matrixWorld,p.matrixAutoUpdate=!1,p.pointMap=l,p.update(),p}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"update",value:function(){var t=this.geometry,e=this.pointMap;Lp.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),vi("c",e,t,Lp,0,0,-1),vi("t",e,t,Lp,0,0,1),vi("n1",e,t,Lp,-1,-1,-1),vi("n2",e,t,Lp,1,-1,-1),vi("n3",e,t,Lp,-1,1,-1),vi("n4",e,t,Lp,1,1,-1),vi("f1",e,t,Lp,-1,-1,1),vi("f2",e,t,Lp,1,-1,1),vi("f3",e,t,Lp,-1,1,1),vi("f4",e,t,Lp,1,1,1),vi("u1",e,t,Lp,.7,1.1,-1),vi("u2",e,t,Lp,-.7,1.1,-1),vi("u3",e,t,Lp,0,2,-1),vi("cf1",e,t,Lp,-1,0,1),vi("cf2",e,t,Lp,1,0,1),vi("cf3",e,t,Lp,0,-1,1),vi("cf4",e,t,Lp,0,1,1),vi("cn1",e,t,Lp,-1,0,-1),vi("cn2",e,t,Lp,1,0,-1),vi("cn3",e,t,Lp,0,-1,-1),vi("cn4",e,t,Lp,0,1,-1),t.getAttribute("position").needsUpdate=!0}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),e}(af),Rp=new jo,Dp=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;(0,rt.default)(this,e);var i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),a=new El;a.setIndex(new ol(i,1)),a.setAttribute("position",new ol(r,3));var o=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,a,new qc({color:n,toneMapped:!1})));return o.object=t,o.type="BoxHelper",o.matrixAutoUpdate=!1,o.update(),o}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"update",value:function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Rp.setFromObject(this.object),!Rp.isEmpty()){var e=Rp.min,n=Rp.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=e.x,r[4]=n.y,r[5]=n.z,r[6]=e.x,r[7]=e.y,r[8]=n.z,r[9]=n.x,r[10]=e.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=e.z,r[15]=e.x,r[16]=n.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=n.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}},{key:"setFromObject",value:function(t){return this.object=t,this.update(),this}},{key:"copy",value:function(t){return af.prototype.copy.call(this,t),this.object=t.object,this}}]),e}(af),Np=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;(0,rt.default)(this,e);var i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new El;a.setIndex(new ol(i,1)),a.setAttribute("position",new vl(r,3));var o=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,a,new qc({color:n,toneMapped:!1})));return o.box=t,o.type="Box3Helper",o.geometry.computeBoundingSphere(),o}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"updateMatrixWorld",value:function(t){var n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"updateMatrixWorld",this).call(this,t))}}]),e}(af),Bp=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960;(0,rt.default)(this,e);var r=i,a=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],o=new El;o.setAttribute("position",new vl(a,3)),o.computeBoundingSphere();var s=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,o,new qc({color:r,toneMapped:!1})));s.type="PlaneHelper",s.plane=t,s.size=n;var l=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],u=new El;return u.setAttribute("position",new vl(l,3)),u.computeBoundingSphere(),s.add(new Gl(u,new il({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1}))),s}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"updateMatrixWorld",value:function(t){var n=-this.plane.constant;Math.abs(n)<1e-8&&(n=1e-8),this.scale.set(.5*this.size,.5*this.size,n),this.children[0].material.side=n<0?or:ar,this.lookAt(this.plane.normal),(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"updateMatrixWorld",this).call(this,t)}}]),e}(ef),Op=new Go,Fp=void 0,zp=void 0,Vp=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Go(0,0,1),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Go(0,0,0),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*i,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*a;(0,rt.default)(this,e);var s=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this));return s.type="ArrowHelper",void 0===Fp&&(Fp=new El,Fp.setAttribute("position",new vl([0,0,0,0,1,0],3)),zp=new _f(0,.5,1,5,1),zp.translate(0,-.5,0)),s.position.copy(n),s.line=new ef(Fp,new qc({color:r,toneMapped:!1})),s.line.matrixAutoUpdate=!1,s.add(s.line),s.cone=new Gl(zp,new il({color:r,toneMapped:!1})),s.cone.matrixAutoUpdate=!1,s.add(s.cone),s.setDirection(t),s.setLength(i,a,o),s}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"setDirection",value:function(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{Op.set(t.z,0,-t.x).normalize();var e=Math.acos(t.y);this.quaternion.setFromAxisAngle(Op,e)}}},{key:"setLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*e;this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()}},{key:"setColor",value:function(t){this.line.material.color.set(t),this.cone.material.color.set(t)}},{key:"copy",value:function(t){return(0,V.default)(e.prototype.__proto__||(0,W.default)(e.prototype),"copy",this).call(this,t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}}]),e}(Hs),Up=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;(0,rt.default)(this,e);var n=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new El;r.setAttribute("position",new vl(n,3)),r.setAttribute("color",new vl(i,3));var a=new qc({vertexColors:!0,toneMapped:!1}),o=(0,Z.default)(this,(e.__proto__||(0,W.default)(e)).call(this,r,a));return o.type="AxesHelper",o}return(0,Q.default)(e,t),(0,ot.default)(e,[{key:"setColors",value:function(t,e,n){var i=new Co,r=this.geometry.attributes.color.array;return i.set(t),i.toArray(r,0),i.toArray(r,3),i.set(e),i.toArray(r,6),i.toArray(r,9),i.set(n),i.toArray(r,12),i.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),e}(af),Gp=function(){function t(){(0,rt.default)(this,t),this.type="ShapePath",this.color=new Co,this.subPaths=[],this.currentPath=null}return(0,ot.default)(t,[{key:"moveTo",value:function(t,e){return this.currentPath=new Yf,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}},{key:"lineTo",value:function(t,e){return this.currentPath.lineTo(t,e),this}},{key:"quadraticCurveTo",value:function(t,e,n,i){return this.currentPath.quadraticCurveTo(t,e,n,i),this}},{key:"bezierCurveTo",value:function(t,e,n,i,r,a){return this.currentPath.bezierCurveTo(t,e,n,i,r,a),this}},{key:"splineThru",value:function(t){return this.currentPath.splineThru(t),this}},{key:"toShapes",value:function(t,e){function n(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n],a=new jf;a.curves=r.curves,e.push(a)}return e}var i=Xf.isClockWise,r=this.subPaths;if(0===r.length)return[];if(!0===e)return n(r);var a=void 0,o=void 0,s=void 0,l=[];if(1===r.length)return o=r[0],s=new jf,s.curves=o.curves,l.push(s),l;var u=!i(r[0].getPoints());u=t?!u:u;var c=[],f=[],d=[],h=0,p=void 0;f[h]=void 0,d[h]=[];for(var v=0,m=r.length;v<m;v++)o=r[v],p=o.getPoints(),a=i(p),a=t?!a:a,a?(!u&&f[h]&&h++,f[h]={s:new jf,p:p},f[h].s.curves=o.curves,u&&h++,d[h]=[]):d[h].push({h:o,p:p[0]});if(!f[0])return n(r);if(f.length>1){for(var g=!1,_=[],y=0,x=f.length;y<x;y++)c[y]=[];for(var b=0,S=f.length;b<S;b++)for(var w=d[b],E=0;E<w.length;E++){for(var A=w[E],T=!0,M=0;M<f.length;M++)(function(t,e){for(var n=e.length,i=!1,r=n-1,a=0;a<n;r=a++){var o=e[r],s=e[a],l=s.x-o.x,u=s.y-o.y;if(Math.abs(u)>F.default){if(u<0&&(o=e[a],l=-l,s=e[r],u=-u),t.y<o.y||t.y>s.y)continue;if(t.y===o.y){if(t.x===o.x)return!0}else{var c=u*(t.x-o.x)-l*(t.y-o.y);if(0===c)return!0;if(c<0)continue;i=!i}}else{if(t.y!==o.y)continue;if(s.x<=t.x&&t.x<=o.x||o.x<=t.x&&t.x<=s.x)return!0}}return i})(A.p,f[M].p)&&(b!==M&&_.push({froms:b,tos:M,hole:E}),T?(T=!1,c[M].push(A)):g=!0);T&&c[b].push(A)}_.length>0&&(g||(d=c))}for(var I=void 0,P=0,k=f.length;P<k;P++){s=f[P].s,l.push(s),I=d[P];for(var L=0,C=I.length;L<C;L++)s.holes.push(I[L].h)}return l}}]),t}(),Hp=new Float32Array(1),Yp=new Int32Array(Hp.buffer),jp=function(){function t(){(0,rt.default)(this,t)}return(0,ot.default)(t,null,[{key:"toHalfFloat",value:function(t){t>65504&&(console.warn("THREE.DataUtils.toHalfFloat(): value exceeds 65504."),t=65504),Hp[0]=t;var e=Yp[0],n=e>>16&32768,i=e>>12&2047,r=e>>23&255;return r<103?n:r>142?(n|=31744,n|=(255==r?0:1)&&8388607&e):r<113?(i|=2048,n|=(i>>114-r)+(i>>113-r&1)):(n|=r-112<<10|i>>1,n+=1&i)}}]),t}();Mf.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=(0,l.default)(Mf.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Yf.prototype.fromPoints=function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)},Ep.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},_p.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Nd.prototype.extractUrlBase=function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),ch.extractUrlBase(t)},Nd.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},up.prototype.center=function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},up.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},up.prototype.isIntersectionBox=function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},up.prototype.size=function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)},jo.prototype.center=function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},jo.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},jo.prototype.isIntersectionBox=function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},jo.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},jo.prototype.size=function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)},us.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},su.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)},dp.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Mo.prototype.flattenToArrayOffset=function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},Mo.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},Mo.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},Mo.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},Mo.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},Mo.prototype.getInverse=function(t){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()},_s.prototype.extractPosition=function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},_s.prototype.flattenToArrayOffset=function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},_s.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Go).setFromMatrixColumn(this,3)},_s.prototype.setRotationFromQuaternion=function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},_s.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},_s.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},_s.prototype.multiplyVector4=function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},_s.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},_s.prototype.rotateAxis=function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},_s.prototype.crossVector=function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},_s.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},_s.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},_s.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},_s.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},_s.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},_s.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},_s.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},_s.prototype.makeFrustum=function(t,e,n,i,r,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,i,n,r,a)},_s.prototype.getInverse=function(t){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()},ru.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},Uo.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Uo.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},gs.prototype.isIntersectionBox=function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},gs.prototype.isIntersectionPlane=function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},gs.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},tl.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},tl.prototype.barycoordFromPoint=function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},tl.prototype.midpoint=function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},tl.prototypenormal=function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},tl.prototype.plane=function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)},tl.barycoordFromPoint=function(t,e,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),tl.getBarycoord(t,e,n,i,r)},tl.normal=function(t,e,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),tl.getNormal(t,e,n,i)},jf.prototype.extractAllPoints=function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},jf.prototype.extrude=function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Zf(this,t)},jf.prototype.makeGeometry=function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new td(this,t)},To.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},To.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},To.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Go.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},Go.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},Go.prototype.getPositionFromMatrix=function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},Go.prototype.getScaleFromMatrix=function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},Go.prototype.getColumnFromMatrix=function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},Go.prototype.applyProjection=function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},Go.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},Go.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},Go.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Oo.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},Oo.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Hs.prototype.getChildByName=function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},Hs.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Hs.prototype.translate=function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},Hs.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Hs.prototype.applyMatrix=function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)},(0,B.default)(Hs.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Gl.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},(0,B.default)(Gl.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Oc.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},ql.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},(0,B.default)(Yd.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),(0,B.default)(ol.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===mo},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(mo)}}}),ol.prototype.setDynamic=function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?mo:vo),this},ol.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},ol.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},El.prototype.addIndex=function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},El.prototype.addAttribute=function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new ol(arguments[1],arguments[2])))},El.prototype.addDrawCall=function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},El.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},El.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},El.prototype.removeAttribute=function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},El.prototype.applyMatrix=function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)},(0,B.default)(El.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),fc.prototype.setDynamic=function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?mo:vo),this},fc.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Zf.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},Zf.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},Zf.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},cc.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},np.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},(0,B.default)(nl.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Co}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===t}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),(0,B.default)(Xl.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),hn.prototype.clearTarget=function(t,e,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,i)},hn.prototype.animate=function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},hn.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},hn.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},hn.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},hn.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},hn.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},hn.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},hn.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},hn.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},hn.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},hn.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},hn.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},hn.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},hn.prototype.enableScissorTest=function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},hn.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},hn.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},hn.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},hn.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},hn.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},hn.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},hn.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},hn.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},hn.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},hn.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},(0,B.default)(hn.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===t?so:oo}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}}),(0,B.default)(sn.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),(0,B.default)(Fo.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Rh.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return(new xh).load(t,function(t){e.setBuffer(t)}),this},zh.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Kl.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)},Kl.prototype.clear=function(t,e,n,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(t,e,n,i)},Do.crossOrigin=void 0,Do.loadTexture=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new Hd;r.setCrossOrigin(this.crossOrigin);var a=r.load(t,n,void 0,i);return e&&(a.mapping=e),a},Do.loadTextureCube=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new Ud;r.setCrossOrigin(this.crossOrigin);var a=r.load(t,n,void 0,i);return e&&(a.mapping=e),a},Do.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Do.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var Wp={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Qi}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Qi),t.ACESFilmicToneMapping=jr,t.AddEquation=pr,t.AddOperation=Vr,t.AdditiveAnimationBlendMode=2501,t.AdditiveBlending=cr,t.AlphaFormat=ya,t.AlwaysDepth=Lr,t.AlwaysStencilFunc=po,t.AmbientLight=ah,t.AmbientLightProbe=Sh,t.AnimationClip=Ld,t.AnimationLoader=Fd,t.AnimationMixer=ep,t.AnimationObjectGroup=$h,t.AnimationUtils=_d,t.ArcCurve=Pf,t.ArrayCamera=ec,t.ArrowHelper=Vp,t.Audio=Rh,t.AudioAnalyser=zh,t.AudioContext=yh,t.AudioListener=Ch,t.AudioLoader=xh,t.AxesHelper=Up,t.AxisHelper=Ni,t.BackSide=or,t.BasicDepthPacking=lo,t.BasicShadowMap=0,t.BinaryTextureLoader=Vi,t.Bone=Fc,t.BooleanKeyframeTrack=Ed,t.BoundingBoxHelper=Bi,t.Box2=up,t.Box3=jo,t.Box3Helper=Np,t.BoxBufferGeometry=Hl,t.BoxGeometry=Hl,t.BoxHelper=Dp,t.BufferAttribute=ol,t.BufferGeometry=El,t.BufferGeometryLoader=dh,t.ByteType=ua,t.Cache=Cd,t.Camera=Zl,t.CameraHelper=Cp,t.CanvasRenderer=Gi,t.CanvasTexture=mf,t.CatmullRomCurve3=Df,t.CineonToneMapping=Yr,t.CircleBufferGeometry=gf,t.CircleGeometry=gf,t.ClampToEdgeWrapping=ta,t.Clock=Mh,t.Color=Co,t.ColorKeyframeTrack=Ad,t.CompressedTexture=vf,t.CompressedTextureLoader=zd,t.ConeBufferGeometry=yf,t.ConeGeometry=yf,t.CubeCamera=Kl,t.CubeReflectionMapping=Xr,t.CubeRefractionMapping=Zr,t.CubeTexture=$l,t.CubeTextureLoader=Ud,t.CubeUVReflectionMapping=Jr,t.CubeUVRefractionMapping=Kr,t.CubicBezierCurve=Nf,t.CubicBezierCurve3=Bf,t.CubicInterpolant=xd,t.CullFaceBack=tr,t.CullFaceFront=er,t.CullFaceFrontBack=3,t.CullFaceNone=$i,t.Curve=Mf,t.CurvePath=Hf,t.CustomBlending=hr,t.CustomToneMapping=Wr,t.CylinderBufferGeometry=_f,t.CylinderGeometry=_f,t.Cylindrical=sp,t.DataTexture=zc,t.DataTexture2DArray=Lu,t.DataTexture3D=Cu,t.DataTextureLoader=Gd,t.DataUtils=jp,t.DecrementStencilOp=7683,t.DecrementWrapStencilOp=34056,t.DefaultLoadingManager=Dd,t.DepthFormat=Ea,t.DepthStencilFormat=Aa,t.DepthTexture=ac,t.DirectionalLight=rh,t.DirectionalLightHelper=Pp,t.DiscreteInterpolant=Sd,t.DodecahedronBufferGeometry=bf,t.DodecahedronGeometry=bf,t.DoubleSide=sr,t.DstAlphaFactor=Ar,t.DstColorFactor=Mr,t.DynamicBufferAttribute=Ai,t.DynamicCopyUsage=35050,t.DynamicDrawUsage=mo,t.DynamicReadUsage=35049,t.EdgesGeometry=Tf,t.EdgesHelper=Oi,t.EllipseCurve=If,t.EqualDepth=Dr,t.EqualStencilFunc=514,t.EquirectangularReflectionMapping=qr,t.EquirectangularRefractionMapping=Qr,t.Euler=Is,t.EventDispatcher=yo,t.ExtrudeBufferGeometry=Zf,t.ExtrudeGeometry=Zf,t.FaceColors=1,t.FileLoader=Od,t.FlatShading=1,t.Float16BufferAttribute=pl,t.Float32Attribute=Ri,t.Float32BufferAttribute=vl,t.Float64Attribute=Di,t.Float64BufferAttribute=ml,t.FloatType=pa,t.Fog=uc,t.FogExp2=lc,t.Font=Zi,t.FontLoader=Xi,t.FramebufferTexture=pf,t.FrontSide=ar,t.Frustum=su,t.GLBufferAttribute=rp,t.GLSL1="100",t.GLSL3=go,t.GreaterDepth=Br,t.GreaterEqualDepth=Nr,t.GreaterEqualStencilFunc=518,t.GreaterStencilFunc=516,t.GridHelper=Ep,t.Group=nc,t.HalfFloatType=va,t.HemisphereLight=jd,t.HemisphereLightHelper=wp,t.HemisphereLightProbe=bh,t.IcosahedronBufferGeometry=Qf,t.IcosahedronGeometry=Qf,t.ImageBitmapLoader=gh,t.ImageLoader=Vd,t.ImageUtils=Do,t.ImmediateRenderObject=qi,t.IncrementStencilOp=7682,t.IncrementWrapStencilOp=34055,t.InstancedBufferAttribute=Hc,t.InstancedBufferGeometry=fh,t.InstancedInterleavedBuffer=ip,t.InstancedMesh=Zc,t.Int16Attribute=Pi,t.Int16BufferAttribute=cl,t.Int32Attribute=Li,t.Int32BufferAttribute=dl,t.Int8Attribute=Ti,t.Int8BufferAttribute=sl,t.IntType=da,t.InterleavedBuffer=fc,t.InterleavedBufferAttribute=hc,t.Interpolant=yd,t.InterpolateDiscrete=2300,t.InterpolateLinear=2301,t.InterpolateSmooth=2302,t.InvertStencilOp=5386,t.JSONLoader=Hi,t.KeepStencilOp=ho,t.KeyframeTrack=wd,t.LOD=Lc,t.LatheBufferGeometry=Jf,t.LatheGeometry=Jf,t.Layers=Ps,t.LensFlare=Yi,t.LessDepth=Cr,t.LessEqualDepth=Rr,t.LessEqualStencilFunc=515,t.LessStencilFunc=513,t.Light=Yd,t.LightProbe=lh,t.Line=ef,t.Line3=dp,t.LineBasicMaterial=qc,t.LineCurve=Of,t.LineCurve3=Ff,t.LineDashedMaterial=md,t.LineLoop=of,t.LinePieces=1,t.LineSegments=af,t.LineStrip=0,t.LinearEncoding=oo,t.LinearFilter=aa,t.LinearInterpolant=bd,t.LinearMipMapLinearFilter=1008,t.LinearMipMapNearestFilter=1007;t.LinearMipmapLinearFilter=sa,t.LinearMipmapNearestFilter=oa,t.LinearToneMapping=Gr,t.Loader=Nd,t.LoaderUtils=ch,t.LoadingManager=Rd,t.LoopOnce=2200,t.LoopPingPong=2202,t.LoopRepeat=io,t.LuminanceAlphaFormat=wa,t.LuminanceFormat=Sa,t.MOUSE=Ji,t.Material=nl,t.MaterialLoader=uh,t.Math=Ao,t.MathUtils=Ao,t.Matrix3=Mo,t.Matrix4=_s,t.MaxEquation=_r,t.Mesh=Gl,t.MeshBasicMaterial=il,t.MeshDepthMaterial=Ju,t.MeshDistanceMaterial=Ku,t.MeshFaceMaterial=mi,t.MeshLambertMaterial=pd,t.MeshMatcapMaterial=vd,t.MeshNormalMaterial=hd,t.MeshPhongMaterial=fd,t.MeshPhysicalMaterial=cd,t.MeshStandardMaterial=ud,t.MeshToonMaterial=dd,t.MinEquation=gr,t.MirroredRepeatWrapping=ea,t.MixOperation=zr,t.MultiMaterial=gi,t.MultiplyBlending=dr,t.MultiplyOperation=Fr,t.NearestFilter=na,t.NearestMipMapLinearFilter=1005,t.NearestMipMapNearestFilter=1004,t.NearestMipmapLinearFilter=ra,t.NearestMipmapNearestFilter=ia,t.NeverDepth=kr,t.NeverStencilFunc=512,t.NoBlending=lr,t.NoColors=0,t.NoToneMapping=Ur,t.NormalAnimationBlendMode=ao,t.NormalBlending=ur,t.NotEqualDepth=Or,t.NotEqualStencilFunc=517,t.NumberKeyframeTrack=Td,t.Object3D=Hs,t.ObjectLoader=hh,t.ObjectSpaceNormalMap=fo,t.OctahedronBufferGeometry=Kf,t.OctahedronGeometry=Kf,t.OneFactor=xr,t.OneMinusDstAlphaFactor=Tr,t.OneMinusDstColorFactor=Ir,t.OneMinusSrcAlphaFactor=Er,t.OneMinusSrcColorFactor=Sr,t.OrthographicCamera=du,t.PCFShadowMap=nr,t.PCFSoftShadowMap=ir,t.PMREMGenerator=ku,t.ParametricGeometry=ji,t.Particle=yi,t.ParticleBasicMaterial=Si,t.ParticleSystem=xi,t.ParticleSystemMaterial=wi,t.Path=Yf,t.PerspectiveCamera=ql,t.Plane=ru,t.PlaneBufferGeometry=lu,t.PlaneGeometry=lu,t.PlaneHelper=Bp,t.PointCloud=_i,t.PointCloudMaterial=bi,t.PointLight=nh,t.PointLightHelper=yp,t.Points=df,t.PointsMaterial=sf,t.PolarGridHelper=Ap,t.PolyhedronBufferGeometry=xf,t.PolyhedronGeometry=xf,t.PositionalAudio=Fh,t.PropertyBinding=Kh,t.PropertyMixer=Vh,t.QuadraticBezierCurve=zf,t.QuadraticBezierCurve3=Vf,t.Quaternion=Uo,t.QuaternionKeyframeTrack=Id,t.QuaternionLinearInterpolant=Md,t.REVISION=Qi,t.RGBADepthPacking=uo,t.RGBAFormat=ba,t.RGBAIntegerFormat=ka,t.RGBA_ASTC_10x10_Format=$a,t.RGBA_ASTC_10x5_Format=Qa,t.RGBA_ASTC_10x6_Format=Ja,t.RGBA_ASTC_10x8_Format=Ka,t.RGBA_ASTC_12x10_Format=to,t.RGBA_ASTC_12x12_Format=eo,t.RGBA_ASTC_4x4_Format=Ga,t.RGBA_ASTC_5x4_Format=Ha,t.RGBA_ASTC_5x5_Format=Ya,t.RGBA_ASTC_6x5_Format=ja,t.RGBA_ASTC_6x6_Format=Wa,t.RGBA_ASTC_8x5_Format=Xa,t.RGBA_ASTC_8x6_Format=Za,t.RGBA_ASTC_8x8_Format=qa,t.RGBA_BPTC_Format=no,t.RGBA_ETC2_EAC_Format=Ua,t.RGBA_PVRTC_2BPPV1_Format=Fa,t.RGBA_PVRTC_4BPPV1_Format=Oa,t.RGBA_S3TC_DXT1_Format=Ca,t.RGBA_S3TC_DXT3_Format=Ra,t.RGBA_S3TC_DXT5_Format=Da,t.RGBFormat=xa,t.RGB_ETC1_Format=za,t.RGB_ETC2_Format=Va,t.RGB_PVRTC_2BPPV1_Format=Ba,t.RGB_PVRTC_4BPPV1_Format=Na,t.RGB_S3TC_DXT1_Format=La,t.RGFormat=Ia,t.RGIntegerFormat=Pa,t.RawShaderMaterial=hu,t.Ray=gs,t.Raycaster=ap,t.RectAreaLight=oh,t.RedFormat=Ta,t.RedIntegerFormat=Ma,t.ReinhardToneMapping=Hr,t.RepeatWrapping=$r,t.ReplaceStencilOp=7681,t.ReverseSubtractEquation=mr,t.RingBufferGeometry=$f,t.RingGeometry=$f,t.Scene=cc,t.SceneUtils=Wp,t.ShaderChunk=uu,t.ShaderLib=fu,t.ShaderMaterial=Xl,t.ShadowMaterial=ld,t.Shape=jf,t.ShapeBufferGeometry=td,t.ShapeGeometry=td,t.ShapePath=Gp,t.ShapeUtils=Xf,t.ShortType=ca,t.Skeleton=Gc,t.SkeletonHelper=_p,t.SkinnedMesh=Oc,t.SmoothShading=2,t.Sphere=us,t.SphereBufferGeometry=ed,t.SphereGeometry=ed,t.Spherical=op,t.SphericalHarmonics3=sh,t.SplineCurve=Uf,t.SpotLight=Jd,t.SpotLightHelper=pp,t.Sprite=Ic,t.SpriteMaterial=pc,t.SrcAlphaFactor=wr,t.SrcAlphaSaturateFactor=Pr,t.SrcColorFactor=br,t.StaticCopyUsage=35046,t.StaticDrawUsage=vo,t.StaticReadUsage=35045,t.StereoCamera=Th,t.StreamCopyUsage=35042,t.StreamDrawUsage=35040,t.StreamReadUsage=35041,t.StringKeyframeTrack=Pd,t.SubtractEquation=vr,t.SubtractiveBlending=fr,t.TOUCH=Ki,t.TangentSpaceNormalMap=co,t.TetrahedronBufferGeometry=nd,t.TetrahedronGeometry=nd,t.TextGeometry=Wi,t.Texture=Bo,t.TextureLoader=Hd,t.TorusBufferGeometry=id,t.TorusGeometry=id,t.TorusKnotBufferGeometry=rd,t.TorusKnotGeometry=rd,t.Triangle=tl,t.TriangleFanDrawMode=2,t.TriangleStripDrawMode=1,t.TrianglesDrawMode=0,t.TubeBufferGeometry=ad,t.TubeGeometry=ad,t.UVMapping=300,t.Uint16Attribute=ki,t.Uint16BufferAttribute=fl,t.Uint32Attribute=Ci,t.Uint32BufferAttribute=hl;t.Uint8Attribute=Mi,t.Uint8BufferAttribute=ll,t.Uint8ClampedAttribute=Ii,t.Uint8ClampedBufferAttribute=ul,t.Uniform=np,t.UniformsLib=cu,t.UniformsUtils=Yl,t.UnsignedByteType=la,t.UnsignedInt248Type=_a,t.UnsignedIntType=ha,t.UnsignedShort4444Type=ma,t.UnsignedShort5551Type=ga,t.UnsignedShortType=fa,t.VSMShadowMap=rr,t.Vector2=To,t.Vector3=Go,t.Vector4=Oo,t.VectorKeyframeTrack=kd,t.Vertex=Ei,t.VertexColors=2,t.VideoTexture=hf,t.WebGL1Renderer=sc,t.WebGLCubeRenderTarget=tu,t.WebGLMultipleRenderTargets=zo,t.WebGLMultisampleRenderTarget=Vo,t.WebGLRenderTarget=Fo,t.WebGLRenderTargetCube=Ui,t.WebGLRenderer=hn,t.WebGLUtils=cn,t.WireframeGeometry=od,t.WireframeHelper=Fi,t.WrapAroundEnding=2402,t.XHRLoader=zi,t.ZeroCurvatureEnding=ro,t.ZeroFactor=yr,t.ZeroSlopeEnding=2401,t.ZeroStencilOp=0,t._SRGBAFormat=_o,t.sRGBEncoding=so,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.EllipseStyle=e.RectangleStyle=e.CircleStyle=e.ExtrudablePolygonStyle=e.PolygonStyle=void 0;var r=n(3),a=i(r),o=n(5),s=i(o),l=n(4),u=i(l),c=n(0),f=i(c),d=n(10),h={color:"rgba(55,119,255,0.16)",borderColor:"#3777FF",showBorder:!0,borderWidth:2,borderDashArray:[0,0],extrudeHeight:1},p=e.PolygonStyle=function t(e){(0,f.default)(this,t),e=(0,d.extend)({},h,e),this.color=e.color,this.borderColor=e.borderColor,this.showBorder=!0===e.showBorder,this.borderWidth=e.borderWidth,this.borderDashArray=e.borderDashArray};e.ExtrudablePolygonStyle=function t(e){(0,f.default)(this,t),e=(0,d.extend)({},h,e),this.color=e.color,this.borderColor=e.borderColor,this.showBorder=!0===e.showBorder,this.extrudeHeight=e.extrudeHeight},e.CircleStyle=function(t){function e(t){return(0,f.default)(this,e),(0,s.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t))}return(0,u.default)(e,t),e}(p),e.RectangleStyle=function(t){function e(t){return(0,f.default)(this,e),(0,s.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t))}return(0,u.default)(e,t),e}(p),e.EllipseStyle=function(t){function e(t){return(0,f.default)(this,e),(0,s.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t))}return(0,u.default)(e,t),e}(p)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.deleteInstanceCacllback=function(t){t.data&&(t.data=null),t.buffer&&t.buffer.delete()},e.deleteBuffersCallback=function(t){t.vertices&&t.vertices.delete(),t.indeices&&t.indeices.delete()}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(23),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t){return function(){var e=t.apply(this,arguments);return new r.default(function(t,n){function i(a,o){try{var s=e[a](o),l=s.value}catch(t){return void n(t)}if(!s.done)return r.default.resolve(l).then(function(t){i("next",t)},function(t){i("throw",t)});t(l)}return i("next")})}}},function(t,e,n){t.exports=n(315)},function(t,e,n){n(231),t.exports=n(2).Number.isNaN},function(t,e,n){"use strict";var i=n(12),r=n(35),a=n(76),o=n(45),s=n(33),l=n(81),u=Object.assign;t.exports=!u||n(31)(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=i})?function(t,e){for(var n=s(t),u=arguments.length,c=1,f=a.f,d=o.f;u>c;)for(var h,p=l(arguments[c++]),v=f?r(p).concat(f(p)):r(p),m=v.length,g=0;m>g;)h=v[g++],i&&!d.call(p,h)||(n[h]=p[h]);return n}:u},function(t,e,n){var i=n(6);i(i.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){"use strict";var i=n(62);t.exports=function(t,e){return!!t&&i(function(){e?t.call(null,function(){},1):t.call(null)})}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(4===t.length){for(var e="#",n=1;n<4;n+=1)e+=t.slice(n,n+1).concat(t.slice(n,n+1));t=e}var i=t.slice(1);return{r:parseInt(i.slice(0,2),16),g:parseInt(i.slice(2,4),16),b:parseInt(i.slice(4),16)}}function a(t){return t=t.replace(/rgb/,"rgba").replace(")",",")+"1)",o(t)}function o(t){return t=t.replace(/rgba\(/,"").replace(")","").split(","),{r:parseInt(t[0]),g:parseInt(t[1]),b:parseInt(t[2]),a:parseFloat(t[3])}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),l=i(s),u=n(1),c=i(u),f=n(36),d=i(f),h=n(415),p=d.default.isString,v=d.default.isArray,m=d.default.isUndefined,g=function(){function t(e,n){if((0,l.default)(this,t),this.r=1,this.g=1,this.b=1,this.a=1,n&&n.defaultColor&&this.turnStr2Rgba(n.defaultColor),p(e))this.turnStr2Rgba(e);else if(v(e)){var i=n&&n.max||255;this.r=e[0]/i,this.g=e[1]/i,this.b=e[2]/i,this.a=m(e[3])?1:e[3]}}return(0,c.default)(t,[{key:"turnStr2Rgba",value:function(t){t=t.toLowerCase();var e=h.HEX_REG,n=h.RGB_REG,i=h.RGBA_REG,s=null;e.test(t)?s=r(t):n.test(t)?s=a(t):i.test(t)&&(s=o(t)),s&&(this.r=s.r/255,this.g=s.g/255,this.b=s.b/255,this.a=m(s.a)?1:s.a)}},{key:"toArray",value:function(){return[this.r,this.g,this.b,this.a]}},{key:"toUpArray",value:function(){return this.toArray().map(function(t){return 255*t})}},{key:"toString",value:function(){return"rgba("+[""+Math.round(255*this.r),""+Math.round(255*this.g),""+Math.round(255*this.b),""+this.a].join(",")+")"}}]),t}();e.default=g},function(t,e,n){"use strict";var i=n(8),r=n(6),a=n(40),o=n(31),s=n(21),l=n(92),u=n(69),c=n(91),f=n(7),d=n(43),h=n(14).f,p=n(251)(0),v=n(12);t.exports=function(t,e,n,m,g,_){var y=i[t],x=y,b=g?"set":"add",S=x&&x.prototype,w={};return v&&"function"==typeof x&&(_||S.forEach&&!o(function(){(new x).entries().next()}))?(x=e(function(e,n){c(e,x,t,"_c"),e._c=new y,void 0!=n&&u(n,g,e[b],e)}),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in S&&(!_||"clear"!=t)&&s(x.prototype,t,function(n,i){if(c(this,x,t),!e&&_&&!f(n))return"get"==t&&void 0;var r=this._c[t](0===n?0:n,i);return e?this:r})}),_||h(x.prototype,"size",{get:function(){return this._c.size}})):(x=m.getConstructor(e,t,g,b),l(x.prototype,n),a.NEED=!0),d(x,t),w[t]=x,r(r.G+r.W+r.F,w),_||m.setStrong(x,t,g),x}},function(t,e,n){"use strict";var i=n(6),r=n(42),a=n(26),o=n(69);t.exports=function(t){i(i.S,t,{from:function(t){var e,n,i,s,l=arguments[1];return r(this),e=void 0!==l,e&&r(l),void 0==t?new this:(n=[],e?(i=0,s=a(l,arguments[2],2),o(t,!1,function(t){n.push(s(t,i++))})):o(t,!1,n.push,n),new this(n))}})}},function(t,e,n){"use strict";var i=n(6);t.exports=function(t){i(i.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var i=n(239),r=n(335),a=n(143),o=n(88),s=n(555);t.exports=function(t,e){var n=1==t,l=2==t,u=3==t,c=4==t,f=6==t,d=5==t||f,h=e||s;return function(e,s,p){for(var v,m,g=a(e),_=r(g),y=i(s,p,3),x=o(_.length),b=0,S=n?h(e,x):l?h(e,0):void 0;x>b;b++)if((d||b in _)&&(v=_[b],m=y(v,b,g),t))if(n)S[b]=m;else if(m)switch(t){case 3:return!0;case 5:return v;case 6:return b;case 2:S.push(v)}else if(c)return!1;return f?-1:u||c?c:S}}},function(t,e,n){var i=n(237);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var i=n(336),r=n(276),a=n(221),o=n(261),s=n(219),l=n(559),u=Object.getOwnPropertyDescriptor;e.f=n(106)?u:function(t,e){if(t=a(t),e=o(e,!0),l)try{return u(t,e)}catch(t){}if(s(t,e))return r(!i.f.call(t,e),t[e])}},function(t,e,n){var i=n(11),r=n(105),a=n(62);t.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],o={};o[t]=e(n),i(i.S+i.F*a(function(){n(1)}),"Object",o)}},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(128),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=r.default[1]},function(t,e,n){"use strict";function i(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.result,r=void 0===n?[]:n,a=e.dimensions,o=void 0===a?3:a,s=0;s<t.length;){var l=t[s];Array.isArray(l)||ArrayBuffer.isView(l)?i(l,{result:r,dimensions:o}):r.push(l.lng,l.lat),s+=1}return r}function r(t,e){var n=t.getBounds();return n.covers(e)||n.intersects(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.isInFrustum=r,e.default={to3DVertices:function(t,e){e=e||0;for(var n=[],i=0,r=t.length/2;i<r;i++)n.push(t[2*i],t[2*i+1],e,1);return n},mixCoords:function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=[];if(i=i||0,n)for(var o=0,s=t.length/2;o<s;o++)a.push([t[2*o]*r+i,-1*t[2*o+1]*r+i].concat(n));else for(var l=0,u=t.length/2;l<u;l++)a.push([t[2*l]*r+i,-1*t[2*l+1]*r+i,0,1]);return"polygon"===e&&a.push(a[0]),a},flattenVertices:i,fillArray:function(t){for(var e=t.target,n=t.source,i=t.start,r=void 0===i?0:i,a=t.count,o=void 0===a?1:a,s=n.length,l=o*s,u=0,c=r;u<s;u++)e[c]=n[u],c+=1;for(;u<l;)u<l-u?(e.copyWithin(r+u,r,r+u),u*=2):(e.copyWithin(r+u,r,r+l-u),u=l);return e}}},,,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?[t+1&255,t+1>>8&255,t+1>>8>>8&255,255]:[t+1&255,t+1>>8&255,t+1>>8>>8&255]}function a(t){var e=(0,h.default)(t,3);return e[0]+256*e[1]+65536*e[2]-1}function o(t){for(var e=new f.default,n=[],i=0;i<t.length;i+=4)if(255===t[i+3]){var r=a([t[i],t[i+1],t[i+2]]),o=s(r);o&&o.id&&!e.has(o.id)&&(e.add(o.id),n.push(o))}return n}function s(t){var e=void 0;return(0,u.default)(p.styleNameConfig).forEach(function(n){(0,u.default)(p.styleNameConfig[n]).forEach(function(i){if(p.styleNameConfig[n][i].includes(t))return void(e={type:n,id:t,tag:i})})}),e}Object.defineProperty(e,"__esModule",{value:!0});var l=n(17),u=i(l),c=n(132),f=i(c),d=n(27),h=i(d);e.encodePickingColor=r,e.decodePickingColor=a,e.decodeStylePickingColor=o;var p=n(309)},function(t,e,n){n(252),t.exports=n(2).Object.assign},function(t,e,n){var i=n(26),r=n(81),a=n(33),o=n(51),s=n(323);t.exports=function(t,e){var n=1==t,l=2==t,u=3==t,c=4==t,f=6==t,d=5==t||f,h=e||s;return function(e,s,p){for(var v,m,g=a(e),_=r(g),y=i(s,p,3),x=o(_.length),b=0,S=n?h(e,x):l?h(e,0):void 0;x>b;b++)if((d||b in _)&&(v=_[b],m=y(v,b,g),t))if(n)S[b]=m;else if(m)switch(t){case 3:return!0;case 5:return v;case 6:return b;case 2:S.push(v)}else if(c)return!1;return f?-1:u||c?c:S}}},function(t,e,n){var i=n(6);i(i.S+i.F,"Object",{assign:n(230)})},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){"use strict";if(n(106)){var i=n(271),r=n(63),a=n(62),o=n(11),s=n(366),l=n(466),u=n(239),c=n(293),f=n(276),d=n(220),h=n(295),p=n(242),v=n(88),m=n(578),g=n(277),_=n(261),y=n(219),x=n(334),b=n(64),S=n(143),w=n(453),E=n(272),A=n(274),T=n(273).f,M=n(468),I=n(278),P=n(78),k=n(238),L=n(356),C=n(337),R=n(469),D=n(294),N=n(362),B=n(296),O=n(446),F=n(553),z=n(107),V=n(240),U=z.f,G=V.f,H=r.RangeError,Y=r.TypeError,j=r.Uint8Array,W=Array.prototype,X=l.ArrayBuffer,Z=l.DataView,q=k(0),Q=k(2),J=k(3),K=k(4),$=k(5),tt=k(6),et=L(!0),nt=L(!1),it=R.values,rt=R.keys,at=R.entries,ot=W.lastIndexOf,st=W.reduce,lt=W.reduceRight,ut=W.join,ct=W.sort,ft=W.slice,dt=W.toString,ht=W.toLocaleString,pt=P("iterator"),vt=P("toStringTag"),mt=I("typed_constructor"),gt=I("def_constructor"),_t=s.CONSTR,yt=s.TYPED,xt=s.VIEW,bt=k(1,function(t,e){return Tt(C(t,t[gt]),e)}),St=a(function(){return 1===new j(new Uint16Array([1]).buffer)[0]}),wt=!!j&&!!j.prototype.set&&a(function(){new j(1).set({})}),Et=function(t,e){var n=p(t);if(n<0||n%e)throw H("Wrong offset!");return n},At=function(t){if(b(t)&&yt in t)return t;throw Y(t+" is not a typed array!")},Tt=function(t,e){if(!(b(t)&&mt in t))throw Y("It is not a typed array constructor!");return new t(e)},Mt=function(t,e){return It(C(t,t[gt]),e)},It=function(t,e){for(var n=0,i=e.length,r=Tt(t,i);i>n;)r[n]=e[n++];return r},Pt=function(t,e,n){U(t,e,{get:function(){return this._d[n]}})},kt=function(t){var e,n,i,r,a,o,s=S(t),l=arguments.length,c=l>1?arguments[1]:void 0,f=void 0!==c,d=M(s);if(void 0!=d&&!w(d)){for(o=d.call(s),i=[],e=0;!(a=o.next()).done;e++)i.push(a.value);s=i}for(f&&l>2&&(c=u(c,arguments[2],2)),e=0,n=v(s.length),r=Tt(this,n);n>e;e++)r[e]=f?c(s[e],e):s[e];return r},Lt=function(){for(var t=0,e=arguments.length,n=Tt(this,e);e>t;)n[t]=arguments[t++];return n},Ct=!!j&&a(function(){ht.call(new j(1))}),Rt=function(){return ht.apply(Ct?ft.call(At(this)):At(this),arguments)},Dt={copyWithin:function(t,e){return F.call(At(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return K(At(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return O.apply(At(this),arguments)},filter:function(t){return Mt(this,Q(At(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return $(At(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return tt(At(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){q(At(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return nt(At(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return et(At(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return ut.apply(At(this),arguments)},lastIndexOf:function(t){return ot.apply(At(this),arguments)},map:function(t){return bt(At(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return st.apply(At(this),arguments)},reduceRight:function(t){return lt.apply(At(this),arguments)},reverse:function(){for(var t,e=this,n=At(e).length,i=Math.floor(n/2),r=0;r<i;)t=e[r],e[r++]=e[--n],e[n]=t;return e},some:function(t){return J(At(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return ct.call(At(this),t)},subarray:function(t,e){var n=At(this),i=n.length,r=g(t,i);return new(C(n,n[gt]))(n.buffer,n.byteOffset+r*n.BYTES_PER_ELEMENT,v((void 0===e?i:g(e,i))-r))}},Nt=function(t,e){return Mt(this,ft.call(At(this),t,e))},Bt=function(t){At(this);var e=Et(arguments[1],1),n=this.length,i=S(t),r=v(i.length),a=0;if(r+e>n)throw H("Wrong length!");for(;a<r;)this[e+a]=i[a++]},Ot={entries:function(){return at.call(At(this))},keys:function(){return rt.call(At(this))},values:function(){return it.call(At(this))}},Ft=function(t,e){return b(t)&&t[yt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},zt=function(t,e){return Ft(t,e=_(e,!0))?f(2,t[e]):G(t,e)},Vt=function(t,e,n){return!(Ft(t,e=_(e,!0))&&b(n)&&y(n,"value"))||y(n,"get")||y(n,"set")||n.configurable||y(n,"writable")&&!n.writable||y(n,"enumerable")&&!n.enumerable?U(t,e,n):(t[e]=n.value,t)};_t||(V.f=zt,z.f=Vt),o(o.S+o.F*!_t,"Object",{getOwnPropertyDescriptor:zt,defineProperty:Vt}),a(function(){dt.call({})})&&(dt=ht=function(){return ut.call(this)});var Ut=h({},Dt);h(Ut,Ot),d(Ut,pt,Ot.values),h(Ut,{slice:Nt,set:Bt,constructor:function(){},toString:dt,toLocaleString:Rt}),Pt(Ut,"buffer","b"),Pt(Ut,"byteOffset","o"),Pt(Ut,"byteLength","l"),Pt(Ut,"length","e"),U(Ut,vt,{get:function(){return this[yt]}}),t.exports=function(t,e,n,l){l=!!l;var u=t+(l?"Clamped":"")+"Array",f="get"+t,h="set"+t,p=r[u],g=p||{},_=p&&A(p),y=!p||!s.ABV,S={},w=p&&p.prototype,M=function(t,n){var i=t._d;return i.v[f](n*e+i.o,St)},I=function(t,n,i){var r=t._d;l&&(i=(i=Math.round(i))<0?0:i>255?255:255&i),r.v[h](n*e+r.o,i,St)},P=function(t,e){U(t,e,{get:function(){return M(this,e)},set:function(t){return I(this,e,t)},enumerable:!0})};y?(p=n(function(t,n,i,r){c(t,p,u,"_d");var a,o,s,l,f=0,h=0;if(b(n)){if(!(n instanceof X||"ArrayBuffer"==(l=x(n))||"SharedArrayBuffer"==l))return yt in n?It(p,n):kt.call(p,n);a=n,h=Et(i,e);var g=n.byteLength;if(void 0===r){if(g%e)throw H("Wrong length!");if((o=g-h)<0)throw H("Wrong length!")}else if((o=v(r)*e)+h>g)throw H("Wrong length!");s=o/e}else s=m(n),o=s*e,a=new X(o);for(d(t,"_d",{b:a,o:h,l:o,e:s,v:new Z(a)});f<s;)P(t,f++)}),w=p.prototype=E(Ut),d(w,"constructor",p)):a(function(){p(1)})&&a(function(){new p(-1)})&&N(function(t){new p,new p(null),new p(1.5),new p(t)},!0)||(p=n(function(t,n,i,r){c(t,p,u);var a;return b(n)?n instanceof X||"ArrayBuffer"==(a=x(n))||"SharedArrayBuffer"==a?void 0!==r?new g(n,Et(i,e),r):void 0!==i?new g(n,Et(i,e)):new g(n):yt in n?It(p,n):kt.call(p,n):new g(m(n))}),q(_!==Function.prototype?T(g).concat(T(_)):T(g),function(t){t in p||d(p,t,g[t])}),p.prototype=w,i||(w.constructor=p));var k=w[pt],L=!!k&&("values"==k.name||void 0==k.name),C=Ot.values;d(p,mt,!0),d(w,yt,u),d(w,xt,!0),d(w,gt,p),(l?new p(1)[vt]==u:vt in w)||U(w,vt,{get:function(){return u}}),S[u]=p,o(o.G+o.W+o.F*(p!=g),S),o(o.S,u,{BYTES_PER_ELEMENT:e}),o(o.S+o.F*a(function(){g.of.call(p,1)}),u,{from:kt,of:Lt}),"BYTES_PER_ELEMENT"in w||d(w,"BYTES_PER_ELEMENT",e),o(o.P,u,Dt),B(u),o(o.P+o.F*wt,u,{set:Bt}),o(o.P+o.F*!L,u,Ot),i||w.toString==dt||(w.toString=dt),o(o.P+o.F*a(function(){new p(1).slice()}),u,{slice:Nt}),o(o.P+o.F*(a(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!a(function(){w.toLocaleString.call([1,2])})),u,{toLocaleString:Rt}),D[u]=L?k:C,i||L||d(w,pt,C)}}else t.exports=function(){}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CONTROL_POSITION_STYLE=e.CONTROL_POSITION=e.MAP_APPROVAL_NUMBER=e.LOGO_URL=e.DEFAULT_CONTROL_ID=void 0;var i=n(115),r=function(t){return t&&t.__esModule?t:{default:t}}(i),a=(e.DEFAULT_CONTROL_ID={SCALE:"scale",ZOOM:"zoom",FLOOR:"floor",ROTATION:"rotation"},e.LOGO_URL={DEFAULT_LOGO:"https://mapapi.qq.com/web/jsapi/logo/logo_def.png",GRAY_LOGO:"https://mapapi.qq.com/web/jsapi/logo/logo_gray.png"},e.MAP_APPROVAL_NUMBER={satellite:"GS(2023)4143",vector:"GS粤(2023)1171"},e.CONTROL_POSITION={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,CENTER_LEFT:3,CENTER:4,CENTER_RIGHT:5,BOTTOM_LEFT:6,BOTTOM_CENTER:7,BOTTOM_RIGHT:8});e.CONTROL_POSITION_STYLE=function(){var t={};return(0,r.default)(a).forEach(function(e){var n=e%3,i=Math.floor(e/3),r="position: absolute;";switch(i){case 0:r+="top:0px;";break;case 1:r+="top:50%;";break;case 2:r+="bottom:0px;"}switch(n){case 0:r+="left:0px;";break;case 1:r+="left:50%;";break;case 2:r+="right:0px;"}r+="transform: translate("+(1===n?"-50%":"0")+", "+(1===i?"-50%":"0")+");",t[e]=r}),t}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.TILE_STATE=void 0;var r=n(15),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(10),f=e.TILE_STATE={unloaded:"tile_unloaded",loading:"tile_loading",loaded:"tile_loaded",errored:"tile_errored",reloading:"tile_reloading",expired:"tile_expired"},d=function(){function t(e,n){(0,s.default)(this,t),this.coord=e,this.uid=c.uniqueId(),this.tileSize=n,this.state=f.loading,this.visible=!0}return(0,u.default)(t,[{key:"show",value:function(){this.visible=!0}},{key:"hide",value:function(){this.visible=!1}},{key:"setData",value:function(t){if(t&&!t.baseData&&(this.state=f.loaded),t&&t.incrementData)return void(this._data=(0,a.default)({},this._data,t));this._data=t}},{key:"updateData",value:function(t){this.setData(t)}},{key:"getData",value:function(){return this._data}},{key:"getQueryData",value:function(t){return this._data&&this.visible?t&&""!==t?this._data[t]:this._data:null}},{key:"hasData",value:function(){return this.state===f.loaded||this.state===f.reloading||this.state===f.expired}},{key:"isLoading",value:function(){return this.state===f.loading||this.state===f.reloading}},{key:"isLoaded",value:function(){return this.state===f.loaded||this.state===f.errored||this.state===f.expired}},{key:"clear",value:function(){this.unloadData()}},{key:"unloadData",value:function(){this._data=null,this.state=f.unloaded}}]),t}();e.default=d},function(t,e,n){"use strict";var i=n(14).f,r=n(49),a=n(92),o=n(26),s=n(91),l=n(69),u=n(74),c=n(111),f=n(127),d=n(12),h=n(40).fastKey,p=n(118),v=d?"_s":"size",m=function(t,e){var n,i=h(e);if("F"!==i)return t._i[i];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,u){var c=t(function(t,i){s(t,c,e,"_i"),t._t=e,t._i=r(null),t._f=void 0,t._l=void 0,t[v]=0,void 0!=i&&l(i,n,t[u],t)});return a(c.prototype,{clear:function(){for(var t=p(this,e),n=t._i,i=t._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete n[i.i];t._f=t._l=void 0,t[v]=0},delete:function(t){var n=p(this,e),i=m(n,t);if(i){var r=i.n,a=i.p;delete n._i[i.i],i.r=!0,a&&(a.n=r),r&&(r.p=a),n._f==i&&(n._f=r),n._l==i&&(n._l=a),n[v]--}return!!i},forEach:function(t){p(this,e);for(var n,i=o(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(i(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!m(p(this,e),t)}}),d&&i(c.prototype,"size",{get:function(){return p(this,e)[v]}}),c},def:function(t,e,n){var i,r,a=m(t,e);return a?a.v=n:(t._l=a={i:r=h(e,!0),k:e,v:n,p:i=t._l,n:void 0,r:!1},t._f||(t._f=a),i&&(i.n=a),t[v]++,"F"!==r&&(t._i[r]=a)),t},getEntry:m,setStrong:function(t,e,n){u(t,e,function(t,n){this._t=p(t,e),this._k=n,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?c(0,n.k):"values"==e?c(0,n.v):c(0,[n.k,n.v]):(t._t=void 0,c(1))},n?"entries":"values",!n,!0),f(e)}}},function(t,e,n){var i=n(48),r=n(321);t.exports=function(t){return function(){if(i(this)!=t)throw TypeError(t+"#toJSON isn't generic");return r(this)}}},function(t,e,n){var i=n(278)("meta"),r=n(64),a=n(219),o=n(107).f,s=0,l=Object.isExtensible||function(){return!0},u=!n(62)(function(){return l(Object.preventExtensions({}))}),c=function(t){o(t,i,{value:{i:"O"+ ++s,w:{}}})},f=function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,i)){if(!l(t))return"F";if(!e)return"E";c(t)}return t[i].i},d=function(t,e){if(!a(t,i)){if(!l(t))return!0;if(!e)return!1;c(t)}return t[i].w},h=function(t){return u&&p.NEED&&l(t)&&!a(t,i)&&c(t),t},p=t.exports={KEY:i,NEED:!1,fastKey:f,getWeak:d,onFreeze:h}},function(t,e,n){var i=n(64);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){"use strict";function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)i(n,r)&&(t[r]=n[r])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var a={arraySet:function(t,e,n,i,r){if(e.subarray&&t.subarray)return void t.set(e.subarray(n,n+i),r);for(var a=0;a<i;a++)t[r+a]=e[n+a]},flattenChunks:function(t){var e,n,i,r,a,o;for(i=0,e=0,n=t.length;e<n;e++)i+=t[e].length;for(o=new Uint8Array(i),r=0,e=0,n=t.length;e<n;e++)a=t[e],o.set(a,r),r+=a.length;return o}},o={arraySet:function(t,e,n,i,r){for(var a=0;a<i;a++)t[r+a]=e[n+a]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,a)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,o))},e.setTyped(r)},,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(93),v=i(p),m=n(256),g=n(10),_=n(36),y=i(_),x=y.default.isNumber,b={},S=function(t){function e(t){(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this));n.options=t;var i=t.id;return n.id=y.default.isUndefined(i)?(0,g.uniqueId)():i,n.init(t),n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"init",value:function(t){this.onInit(t),this.dom=this.createDOM(t)}},{key:"setPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.CONTROL_POSITION.TOP_LEFT;return t!==this.position&&(this.appendToContainer(t),this.position=t),this}},{key:"setClassName",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.dom&&(this.dom.className=t),this.className=t,this}},{key:"getDomPositionContainer",value:function(t){var e=t.id,n=this.options,i=n.position,r=n.className;return this.setPosition(i),this.setClassName(r),b[e][i]}},{key:"appendToContainer",value:function(t){if(!this.map||!this.map.id)return void console.error("当前没有添加该控件，请先添加控件再设置位置！");var e=this.map.id;if(b[e]||(b[e]={}),!b[e][t]){b[e][t]=document.createElement("div");var n=b[e][t];n.style.right="auto",n.style.left="auto",n.style.top="auto",n.style.bottom="auto",n.style.cssText+=m.CONTROL_POSITION_STYLE[t],m.CONTROL_POSITION.BOTTOM_LEFT,this.dom.parentNode&&this.dom.parentNode.parentNode&&this.dom.parentNode.parentNode.appendChild(n)}return b[e][t].firstChild?b[e][t].insertBefore(this.dom,b[e][t].firstChild):b[e][t].appendChild(this.dom),b[e][t]}},{key:"createDOM",value:function(){}},{key:"onInit",value:function(){}},{key:"onDestroy",value:function(){}},{key:"onAdd",value:function(){}},{key:"onRemove",value:function(){}},{key:"addTo",value:function(t,e){this.map=t;var n=this.getDomPositionContainer(t);e.appendChild(n),this.onAdd()}},{key:"remove",value:function(){var t=this.map&&this.map.id;if(this.dom){var e=this.dom.parentNode;this.dom.remove(),e&&!e.firstChild&&(e.remove(),e=null,x(this.position)&&t&&delete b[t][this.position]),this.position=null,this.onRemove(),this.map=null}}},{key:"destroy",value:function(){this.remove(),this.onDestroy(),this.removeAllListeners(),this.dom=null,this.className=null,this.position=null,this.id=null}}]),e}(v.default);e.default=S},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(310),v=i(p),m=n(29),g=n(36),_=i(g),y=n(146),x=n(22),b=n(93),S=n(10),w=_.default.isNumber,E=_.default.isUndefined,A=function(t){function e(t){(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this));return n.id=t.id||S.uniqueId(),n.type=t.type||null,n.sourceId=t.sourceId||null,n.setZoomRange(t.minZoom,t.maxZoom),n.setDataZoomRange(t.minDataZoom||t.minZoom,t.maxDataZoom||t.maxZoom),n.visible=!!E(t.visible)||Boolean(t.visible),n.setLevel(t.level||y.LAYER_LEVEL.GROUND),n.setZIndex(t.zIndex||0),n.setOpacity(t.opacity),n._childLayers={},n._initialize(t),t.map&&n.setMap(t.map),n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"getId",value:function(){return this.id}},{key:"setVisible",value:function(t){return t=Boolean(t),this._forEachChild(function(e,n){n.setVisible(t)}),this.visible===t?this:(this.visible=t,this._fire("layer",{}),this)}},{key:"setZIndex",value:function(t){return w(t)||(new m.BaseTypeError("Layer.zIndex","number",t).error(),t=0),this._forEachChild(function(e,n){n.setZIndex(t)}),this.zIndex=t,this.setRank((0,y.getRank)(this.level,this.zIndex)),this}},{key:"setLevel",value:function(t){this.level=t,this.setRank((0,y.getRank)(this.level,this.zIndex))}},{key:"setRank",value:function(t){this.rank=t,this._forEachChild(function(e,n){n.setRank(t)}),this.emit("rank_changed")}},{key:"getRank",value:function(){return this.rank}},{key:"setMap",value:function(t){return t instanceof v.default||null===t?this.map===t?this:(this.map&&(this.map.removeLayer(this.id),this._removeSource(),this.map=null),t&&(this.map=t,t.addLayer(this),this._addSource()),this):(console.error("传入的map参数并非TMap.Map实例"),this)}},{key:"getMap",value:function(){return this.map}},{key:"getZIndex",value:function(){return this.zIndex}},{key:"setZoomRange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x.minZoom,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.maxZoom;return w(t)||(new m.BaseTypeError("Layer.minZoom","number",t).error(),t=x.minZoom),w(e)||(new m.BaseTypeError("Layer.maxZoom","number",e).error(),e=x.maxZoom),this._forEachChild(function(n,i){i.setZoomRange(t,e)}),this.minZoom=t,this.maxZoom=e,this}},{key:"setDataZoomRange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x.minZoom,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.maxZoom;return w(t)||(new m.BaseTypeError("Layer.minDataZoom","number",t).error(),t=x.minZoom),w(e)||(new m.BaseTypeError("Layer.maxDataZoom","number",e).error(),e=x.maxZoom),this._forEachChild(function(n,i){i.setDataZoomRange(t,e)}),this.minDataZoom=t,this.maxDataZoom=e,this}},{key:"setOpacity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return w(t)||(new m.BaseTypeError("Layer.opacity","number",t).error(),t=1),(t<0||t>1)&&(console.error("Layer.opacity 传入参数值范围应当在0~1之间！"),t=S.clamp(t,0,1)),this.opacity=t,this}},{key:"_removeSource",value:function(){}},{key:"_addSource",value:function(){}},{key:"_initialize",value:function(){}},{key:"isHidden",value:function(t){return!!(this.minZoom&&t<this.minZoom)||(!!(this.maxZoom&&t>this.maxZoom)||!this.visible)}},{key:"appendChild",value:function(t){var n=t instanceof e?t:new e(t);return n.setMap(null),n.setZIndex(this.zIndex),n.setRank(this.rank),n.setZoomRange(this.minZoom,this.maxZoom),n.setVisible(this.visible),this._childLayers[n.id]=n,n}},{key:"removeChild",value:function(t){this._childLayers[t]&&delete this._childLayers[t]}},{key:"hasChild",value:function(t){return!!this._childLayers[t]}},{key:"getChild",value:function(t){return this.hasChild(t)?this._childLayers[t]:null}},{key:"_forEachChild",value:function(t){S.forIn(this._childLayers,function(e,n){t(e,n)})}},{key:"flat",value:function(){var t=[];return this.sourceId&&t.push(this),this._forEachChild(function(e,n){t=t.concat(n.flat())}),t}}]),e}(b);e.default=A},,function(t,e,n){t.exports={default:n(318),__esModule:!0}},function(t,e,n){n(269),t.exports=n(2).Object.values},function(t,e,n){var i=n(6),r=n(117)(!1);i(i.S,"Object",{values:function(t){return r(t)}})},function(t,e,n){var i=n(78)("unscopables"),r=Array.prototype;void 0==r[i]&&n(220)(r,i,{}),t.exports=function(t){r[i][t]=!0}},function(t,e){t.exports=!1},function(t,e,n){var i=n(61),r=n(568),a=n(449),o=n(460)("IE_PROTO"),s=function(){},l=function(){var t,e=n(448)("iframe"),i=a.length;for(e.style.display="none",n(451).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;i--;)delete l.prototype[a[i]];return l()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=i(t),n=new s,s.prototype=null,n[o]=t):n=l(),void 0===e?n:r(n,e)}},function(t,e,n){var i=n(570),r=n(449).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},function(t,e,n){var i=n(219),r=n(143),a=n(460)("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?o:null}},function(t,e,n){var i=n(570),r=n(449);t.exports=Object.keys||function(t){return i(t,r)}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var i=n(242),r=Math.max,a=Math.min;t.exports=function(t,e){return t=i(t),t<0?r(t+e,0):a(t,e)}},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e,n){var i=n(64);t.exports=function(t,e){if(!i(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,n){!function(i,r,a){t.exports=e=r(n(50),n(471),n(470))}(0,function(t){return function(){var e=t,n=e.lib,i=n.Base,r=n.WordArray,a=e.algo,o=a.MD5,s=a.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:o,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,i=n.hasher.create(),a=r.create(),o=a.words,s=n.keySize,l=n.iterations;o.length<s;){u&&i.update(u);var u=i.update(t).finalize(e);i.reset();for(var c=1;c<l;c++)u=i.finalize(u),i.reset();a.concat(u)}return a.sigBytes=4*s,a}});e.EvpKDF=function(t,e,n){return s.create(n).compute(t,e)}}(),t.EvpKDF})},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},r=0;r<this.length;r++){var a=this[r][0];"number"==typeof a&&(i[a]=!0)}for(r=0;r<e.length;r++){var o=e[r];"number"==typeof o[0]&&i[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},,function(t,e){function n(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=d[i.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](i.parts[a]);for(;a<i.parts.length;a++)r.parts.push(l(i.parts[a],e))}else{for(var o=[],a=0;a<i.parts.length;a++)o.push(l(i.parts[a],e));d[i.id]={id:i.id,refs:1,parts:o}}}}function i(t){for(var e=[],n={},i=0;i<t.length;i++){var r=t[i],a=r[0],o=r[1],s=r[2],l=r[3],u={css:o,media:s,sourceMap:l};n[a]?n[a].parts.push(u):e.push(n[a]={id:a,parts:[u]})}return e}function r(t,e){var n=v(),i=_[_.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),_.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function a(t){t.parentNode.removeChild(t);var e=_.indexOf(t);e>=0&&_.splice(e,1)}function o(t){var e=document.createElement("style");return e.type="text/css",r(t,e),e}function s(t){var e=document.createElement("link");return e.rel="stylesheet",r(t,e),e}function l(t,e){var n,i,r;if(e.singleton){var l=g++;n=m||(m=o(e)),i=u.bind(null,n,l,!1),r=u.bind(null,n,l,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=s(e),i=f.bind(null,n),r=function(){a(n),n.href&&URL.revokeObjectURL(n.href)}):(n=o(e),i=c.bind(null,n),r=function(){a(n)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else r()}}function u(t,e,n,i){var r=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=y(e,r);else{var a=document.createTextNode(r),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(a,o[e]):t.appendChild(a)}}function c(t,e){var n=e.css,i=e.media;if(i&&t.setAttribute("media",i),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function f(t,e){var n=e.css,i=e.sourceMap;i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var r=new Blob([n],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(r),a&&URL.revokeObjectURL(a)}var d={},h=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}},p=h(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),v=h(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,g=0,_=[];t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");e=e||{},void 0===e.singleton&&(e.singleton=p()),void 0===e.insertAt&&(e.insertAt="bottom");var r=i(t);return n(r,e),function(t){for(var a=[],o=0;o<r.length;o++){var s=r[o],l=d[s.id];l.refs--,a.push(l)}if(t){n(i(t),e)}for(var o=0;o<a.length;o++){var l=a[o];if(0===l.refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete d[l.id]}}}};var y=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LIGHT_FRAG=e.LIGHT_VERTEX=e.LIGHT_VARYING=e.LIGHT_UNIFORM=void 0;var i=n(392),r=function(t){return t&&t.__esModule?t:{default:t}}(i),a=r.default?"\nvec4 lighting_apply_on_color(vec4 color) {\n\tfloat isInShadow = isInShadow();\n\tvec3 colorInLight = color.rgb * mix(\n\t\tlighting_vLightWeight,\n\t\tlighting_vLightWeight - lighting_vShadowWeight,\n\t\tisInShadow\n\t) + mix(\n\t\tlighting_vLightSpecular,\n\t\tlighting_vLightSpecular - lighting_vShadowSpecular,\n\t\tisInShadow\n\t);\n\tcolorInLight = mix(\n\t\tcolorInLight,\n\t\ttoneMapping(colorInLight, lighting_vToneMapping.y),\n\t\tlighting_vToneMapping.x\n\t);\n\treturn vec4(colorInLight, color.a);\n}\n":"\nvec4 lighting_apply_on_color(vec4 color) {\n\tvec3 colorInLight = color.rgb * lighting_vLightWeight + lighting_vLightSpecular;\n\treturn vec4(colorInLight, color.a);\n}\n";e.LIGHT_UNIFORM="\n#define LIGHT_MAX 4\n\n\nuniform vec4 lighting_uBase;\nuniform vec4 lighting_uAdvanced;\nuniform vec3 lighting_uAmbientColor;\nuniform vec3 lighting_uDirDirection[LIGHT_MAX];\nuniform vec3 lighting_uDirColor[LIGHT_MAX];\nuniform vec3 lighting_uPointPosition[LIGHT_MAX];\nuniform vec3 lighting_uPointAtt[LIGHT_MAX];\nuniform vec3 lighting_uPointColor[LIGHT_MAX];\nuniform vec2 lighting_uLightCount;\nuniform vec3 lighting_uViewPos;\nuniform mat4 lighting_uShadowLightPVMatrix;\n",e.LIGHT_VARYING="\n\nvarying vec3 lighting_vLightWeight;\nvarying vec3 lighting_vLightSpecular;\nvarying vec3 lighting_vShadowWeight;\nvarying vec3 lighting_vShadowSpecular;\nvarying mediump vec4 lighting_vShadowInfo;\nvarying vec2 lighting_vToneMapping;\n",e.LIGHT_VERTEX="\nvec3 lighting_vPosition;\nvec3 lighting_vNormal;\nvec3 lighting_vViewDir;\nvec2 lighting_vObjSpec;\n\n\nfloat lighting_calcDiffuse(vec3 lightDir) {\n\treturn max(dot(lightDir, lighting_vNormal), 0.);\n}\n\n\nfloat lighting_calcSpecular(vec3 lightDir) {\n\t\n\t\n\t\n\t\n\tvec3 halfwayDir = normalize(lighting_vViewDir + lightDir);\n\tfloat reflectStrength = max(dot(halfwayDir, lighting_vNormal), 0.);\n\n\treturn pow(reflectStrength, lighting_vObjSpec.y) * lighting_vObjSpec.x;\n}\n\n\nvoid lighting_setObjInfo(vec3 position, vec3 normal, mat4 modelMatrix, vec2 objSpec) {\n\tlighting_vPosition = (modelMatrix * vec4(position, 1.)).xyz;\n\tlighting_vNormal = normalize(modelMatrix * vec4(normal, 0.)).xyz;\n\tlighting_vViewDir = normalize(lighting_uViewPos - lighting_vPosition);\n\tlighting_vObjSpec = objSpec;\n\tlighting_vToneMapping = lighting_uAdvanced.xy;\n\t\n\tvec4 posInLightView = lighting_uShadowLightPVMatrix * vec4(lighting_vPosition, 1.0);\n\tvec3 normalized = (posInLightView.xyz/ posInLightView.w + 1.0) / 2.0;\n\tlighting_vShadowInfo = vec4(normalized, lighting_uAdvanced.z);\n}\n\n\nvoid lighting_calcDirLights(float enable) {\n\tvec3 diffuse = vec3(0.0);\n\tvec3 specular = vec3(0.0);\n\tvec3 shadowDiffuse = vec3(0.0);\n\tvec3 shadowSpecular = vec3(0.0);\n\n\tfor (int i = 0; i < LIGHT_MAX; i++) {\n\t\tfloat isValid = (1.0 - step(float(lighting_uLightCount.x), float(i))) * enable;\n\n\t\t\n\t\tdiffuse += mix(\n\t\t\tvec3(0.0),\n\t\t\tlighting_calcDiffuse(lighting_uDirDirection[i]) * lighting_uDirColor[i],\n\t\t\tisValid\n\t\t);\n\t\t\n\t\t\n\t\tspecular += mix(\n\t\t\tvec3(0.0),\n\t\t\tlighting_calcSpecular(lighting_uDirDirection[i]) * lighting_uDirColor[i],\n\t\t\tisValid\n\t\t);\n\n\t\t\n\t\tfloat isShadowLight = isValid * step(0., lighting_uAdvanced.z) * float((float(i) == lighting_uAdvanced.w));\n\t\tshadowDiffuse += mix(\n\t\t\tvec3(0.0),\n\t\t\tlighting_calcDiffuse(lighting_uDirDirection[i]) * lighting_uDirColor[i],\n\t\t\tisShadowLight\n\t\t);\n\t\tshadowSpecular += mix(\n\t\t\tvec3(0.0),\n\t\t\tlighting_calcSpecular(lighting_uDirDirection[i]) * lighting_uDirColor[i],\n\t\t\tisShadowLight\n\t\t);\n\t}\n\n\tlighting_vLightWeight += diffuse * lighting_uBase.z;\n\tlighting_vLightSpecular += specular * lighting_uBase.w;\n\tlighting_vShadowWeight = shadowDiffuse * lighting_uBase.z * lighting_uAdvanced.z;\n\tlighting_vShadowSpecular = shadowSpecular * lighting_uBase.w * lighting_uAdvanced.z;\n}\n\n\nvoid lighting_calcPointLights(float enable) {\n\tvec3 diffuse = vec3(0.0);\n\tvec3 specular = vec3(0.0);\n\n\tfor (int i = 0; i < LIGHT_MAX; i++) {\n\t\tfloat isValid = (1.0 - step(float(lighting_uLightCount.y), float(i))) * enable;\n\n\t\tvec3 posToLight = lighting_uPointPosition[i] - lighting_vPosition;\n\t\tvec3 direction = normalize(posToLight);\n\t\tfloat distance = length(posToLight);\n\t\t\n\t\t\n\t\tfloat attenuation = 1.0 / dot(vec3(1.0, 0.014, 0.0007), vec3(1.0, distance, distance * distance));\n\n\t\t\n\t\tdiffuse += mix(\n\t\t\tvec3(0.0),\n\t\t\tlighting_calcDiffuse(direction) * lighting_uPointColor[i] * attenuation,\n\t\t\tisValid\n\t\t);\n\t\t\n\t\t\n\t\tspecular += mix(\n\t\t\tvec3(0.0),\n\t\t\tlighting_calcSpecular(direction) * lighting_uPointColor[i] * attenuation,\n\t\t\tisValid\n\t\t);\n\t}\n\n\tlighting_vLightWeight += diffuse * lighting_uBase.z;\n\tlighting_vLightSpecular += specular * lighting_uBase.w;\n}\n\n\nvoid lighting_apply_on_vertex(vec3 position, vec3 normal, mat4 modelMatrix, vec2 objSpec) {\n\tlighting_setObjInfo(position, normal, modelMatrix, objSpec);\n\n\t\n\tlighting_vLightWeight = mix(\n\t\tvec3(1.0),\n\t\tlighting_uAmbientColor * lighting_uBase.y,\n\t\tlighting_uBase.x\n\t);\n\tlighting_vLightSpecular = vec3(0.0);\n\tlighting_vShadowWeight = vec3(0.0);\n\tlighting_vShadowSpecular = vec3(0.0);\n\n\t\n\tlighting_calcDirLights(lighting_uBase.x);\n\tlighting_calcPointLights(lighting_uBase.x);\n}\n\nvoid lighting_apply_on_vertex(vec3 position, vec3 normal, mat4 modelMatrix) {\n\tlighting_apply_on_vertex(position, normal, modelMatrix, vec2(0.4, 32.0));\n}\n",e.LIGHT_FRAG="\nuniform sampler2D lighting_uShadowSampler;\n\nvec3 toneMapping(vec3 hdrColor, float exposure) {\n\tconst float gamma = 2.2;\n\n\n\tvec3 mapped = vec3(1.0) - exp(-hdrColor * exposure);\n\t\n\n\tmapped = pow(mapped, vec3(1.0 / gamma));\n\t\n\treturn mapped;\n}\n\nfloat getShadowSceneDepth() {\n\treturn texture2D(lighting_uShadowSampler, lighting_vShadowInfo.xy).x;\n}\n\nfloat isInShadow() {\n  float isInSideTexture = float(abs(lighting_vShadowInfo.x - 0.5) < 0.5 && abs(lighting_vShadowInfo.y - 0.5) < 0.5);\n\tfloat sceneDepth = getShadowSceneDepth();\n\treturn mix(\n\t\t0.0,\n\t\tstep(0.0005, abs(lighting_vShadowInfo.z - sceneDepth)) * step(sceneDepth, lighting_vShadowInfo.z),\n\t\tstep(0., lighting_vShadowInfo.w) * isInSideTexture\n  );\n}\n\n"+a+"\n"},function(t,e,n){"use strict";function i(t){var e=t.geometries.map(function(t){return t.paths||[]}),n=new r.PolygonParseHelper({complexPolygons:e,IndexType:Uint32Array});n.updatePositions({fp64:!0,extruded:!0});var i=n.getPositions(),a=n.getIndices(),s=n.getPositions64xyLow(),l=n.getVertexValid(),u=n.getPickingColors(),c=n.getElevations({getElevation:function(e){var n=t.geometries[e],i=t.styles[n.styleId];return i&&i.extrudeHeight?i.extrudeHeight:0}}),f=n.getColors({key:"fillColors",getColor:function(e){var n=t.geometries[e],i=t.styles[n.styleId];if(i){return new o.default(i.color).toUpArray()}return[0,0,0,0]}}),d=n.getColors({key:"lineColors",getColor:function(e){var n=t.geometries[e],i=t.styles[n.styleId];if(i){if(i.showBorder){var r=new o.default(i.borderColor);return"borderWidth"in i?[0,0,0,0]:r.toUpArray()}return[0,0,0,0]}return[0,0,0,0]}}),h=i.slice(3),p=s.slice(2),v=i.slice(),m=s.slice();return v.set(h),m.set(p),{positions:i,indices:a,positions64xyLow:s,vertexValid:l,pickingColors:u,elevations:c,fillColors:f,lineColors:d,nextPositions:v,nextPositions64xyLow:m}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(344),a=n(233),o=function(t){return t&&t.__esModule?t:{default:t}}(a);e.default=i},function(t,e,n){"use strict";function i(t,e,n,i){n=n||2;var a=e&&e.length,s=a?e[0]*n:t.length,l=r(t,0,s,n,!0),u=[];if(!l)return u;var c=void 0,d=void 0,h=void 0,p=void 0,v=void 0,m=void 0,g=void 0;if(a&&(l=f(t,e,l,n)),t.length>80*n){var _=(0,R.default)(t,2);h=_[0],p=_[1],c=h,d=p;for(var y=n;y<s;y+=n)v=t[y],m=t[y+1],v<c&&(c=v),m<d&&(d=m),v>h&&(h=v),m>p&&(p=m);g=Math.max(h-c,p-d)}return o(l,u,n,c,d,g,void 0,i),u}function r(t,e,n,i,r){var a=void 0,o=void 0;if(r===L(t,e,n,i)>0)for(a=e;a<n;a+=i)o=I(a,t[a],t[a+1],o);else for(a=n-i;a>=e;a-=i)o=I(a,t[a],t[a+1],o);return o&&S(o,o.next)&&(P(o),o=o.next),o}function a(t,e){if(!t)return t;e||(e=t);var n=t,i=void 0;do{if(i=!1,n.steiner||!S(n,n.next)&&0!==b(n.prev,n,n.next))n=n.next;else{if(P(n),e=n.prev,(n=e)===n.next)return null;i=!0}}while(i||n!==e);return e}function o(t,e,n,i,r,f,d,h){if(h=h||0,t){!d&&f&&v(t,i,r,f);for(var p=t,m=void 0,g=void 0;t.prev!==t.next;)if(m=t.prev,g=t.next,f?l(t,i,r,f):s(t))e.push(m.i/n+h),e.push(t.i/n+h),e.push(g.i/n+h),P(t),t=g.next,p=g.next;else if((t=g)===p){d?1===d?(t=u(t,e,n,h),o(t,e,n,i,r,f,2,h)):2===d&&c(t,e,n,i,r,f,h):o(a(t),e,n,i,r,f,1,h);break}}}function s(t){var e=t.prev,n=t,i=t.next;if(b(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(y(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&b(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function l(t,e,n,i){var r=t.prev,a=t,o=t.next;if(b(r,a,o)>=0)return!1;for(var s=r.x<a.x?r.x<o.x?r.x:o.x:a.x<o.x?a.x:o.x,l=r.y<a.y?r.y<o.y?r.y:o.y:a.y<o.y?a.y:o.y,u=r.x>a.x?r.x>o.x?r.x:o.x:a.x>o.x?a.x:o.x,c=r.y>a.y?r.y>o.y?r.y:o.y:a.y>o.y?a.y:o.y,f=g(s,l,e,n,i),d=g(u,c,e,n,i),h=t.nextZ;h&&h.z<=d;){if(h!==t.prev&&h!==t.next&&y(r.x,r.y,a.x,a.y,o.x,o.y,h.x,h.y)&&b(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(h=t.prevZ;h&&h.z>=f;){if(h!==t.prev&&h!==t.next&&y(r.x,r.y,a.x,a.y,o.x,o.y,h.x,h.y)&&b(h.prev,h,h.next)>=0)return!1;h=h.prevZ}return!0}function u(t,e,n,i){var r=t;do{var a=r.prev,o=r.next.next;!S(a,o)&&w(a,r,r.next,o)&&A(a,o)&&A(o,a)&&(e.push(a.i/n+i),e.push(r.i/n+i),e.push(o.i/n+i),P(r),P(r.next),t=o,r=t),r=r.next}while(r!==t);return r}function c(t,e,n,i,r,s,l){var u=t;do{for(var c=u.next.next;c!==u.prev;){if(u.i!==c.i&&x(u,c)){var f=M(u,c);return u=a(u,u.next),f=a(f,f.next),o(u,e,n,i,r,s,void 0,l),void o(f,e,n,i,r,s,void 0,l)}c=c.next}u=u.next}while(u!==t)}function f(t,e,n,i){var o=[],s=void 0,l=void 0,u=void 0,c=void 0,f=void 0;for(s=0,l=e.length;s<l;s++)u=e[s]*i,c=s<l-1?e[s+1]*i:t.length,f=r(t,u,c,i,!1),f===f.next&&(f.steiner=!0),o.push(_(f));for(o.sort(d),s=0;s<o.length;s++)h(o[s],n),n=a(n,n.next);return n}function d(t,e){return t.x-e.x}function h(t,e){if(e=p(t,e)){var n=M(e,t);a(n,n.next)}}function p(t,e){var n=e,i=t.x,r=t.y,a=-1/0,o=void 0;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){var s=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>a){if(a=s,s===i){if(r===n.y)return n;if(r===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!o)return null;if(i===a)return o.prev;var l=o,u=o.x,c=o.y,f=1/0,d=void 0;for(n=o.next;n!==l;)i>=n.x&&n.x>=u&&i!==n.x&&y(r<c?i:a,r,u,c,r<c?a:i,r,n.x,n.y)&&((d=Math.abs(r-n.y)/(i-n.x))<f||d===f&&n.x>o.x)&&A(n,t)&&(o=n,f=d),n=n.next;return o}function v(t,e,n,i){var r=t;do{null===r.z&&(r.z=g(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,m(r)}function m(t){var e=void 0,n=void 0,i=void 0,r=void 0,a=void 0,o=void 0,s=void 0,l=void 0,u=1;do{for(n=t,t=null,a=null,o=0;n;){for(o+=1,i=n,s=0,e=0;e<u&&(s+=1,i=i.nextZ);e++);for(l=u;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s-=1):(r=i,i=i.nextZ,l-=1),a?a.nextZ=r:t=r,r.prevZ=a,a=r;n=i}a&&(a.nextZ=null),u*=2}while(o>1);return t}function g(t,e,n,i,r){return t=32767*(t-n)/r,e=32767*(e-i)/r,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function _(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function y(t,e,n,i,r,a,o,s){return(r-o)*(e-s)-(t-o)*(a-s)>=0&&(t-o)*(i-s)-(n-o)*(e-s)>=0&&(n-o)*(a-s)-(r-o)*(i-s)>=0}function x(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!E(t,e)&&A(t,e)&&A(e,t)&&T(t,e)}function b(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function S(t,e){return t.x===e.x&&t.y===e.y}function w(t,e,n,i){return!!(S(t,e)&&S(n,i)||S(t,i)&&S(n,e))||b(t,e,n)>0!=b(t,e,i)>0&&b(n,i,t)>0!=b(n,i,e)>0}function E(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&w(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function A(t,e){return b(t.prev,t,t.next)<0?b(t,e,t.next)>=0&&b(t,t.prev,e)>=0:b(t,e,t.prev)<0||b(t,t.next,e)<0}function T(t,e){var n=t,i=!1,r=(t.x+e.x)/2,a=(t.y+e.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}function M(t,e){var n=new k(t.i,t.x,t.y),i=new k(e.i,e.x,e.y),r=t.next,a=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function I(t,e,n,i){var r=new k(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function P(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function k(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function L(t,e,n,i){for(var r=0,a=e,o=n-i;a<n;a+=i)r+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return r}var C=n(27),R=function(t){return t&&t.__esModule?t:{default:t}}(C);t.exports=i,i.deviation=function(t,e,n,i){var r=e&&e.length,a=r?e[0]*n:t.length,o=Math.abs(L(t,0,a,n));if(r)for(var s=0,l=e.length;s<l;s++){var u=e[s]*n,c=s<l-1?e[s+1]*n:t.length;o-=Math.abs(L(t,u,c,n))}for(var f=0,d=0;d<i.length;d+=3){var h=i[d]*n,p=i[d+1]*n,v=i[d+2]*n;f+=Math.abs((t[h]-t[v])*(t[p+1]-t[h+1])-(t[h]-t[p])*(t[v+1]-t[h+1]))}return 0===o&&0===f?0:Math.abs((f-o)/o)},i.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var a=0;a<t[r].length;a++)for(var o=0;o<e;o++)n.vertices.push(t[r][a][o]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(e){var n=e.find(function(e){return e.layerid===t});return n?{minZoom:n.zoom_min,maxZoom:n.zoom_max,getTileUrl:function(t,e,i){var r=n.url;return n.params.forEach(function(i){var a=n[i];Array.isArray(a)&&(a=a[(t+e)%a.length]),r=r.replace("{"+i+"}",a)}),r=r.replace("{x}",t).replace("{y}",e).replace("{z}",i)}}:void 0}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(15),o=i(a),s=n(3),l=i(s),u=n(0),c=i(u),f=n(1),d=i(f),h=n(5),p=i(h),v=n(32),m=i(v),g=n(4),_=i(g),y=n(398),x=i(y),b=n(90),S=n(53),w=n(146),E=n(36),A=i(E),T=n(29),M=n(302),I=n(44),P=A.default.isFunction,k=A.default.isString,L=A.default.isNumber,C=function(t){function e(t){(0,c.default)(this,e),t.type=S.RENDER_LAYER_TYPE.imageTile;var n=(0,p.default)(this,(e.__proto__||(0,l.default)(e)).call(this,t));return(0,I.statCn)("ImageTileLayer"),n}return(0,_.default)(e,t),(0,d.default)(e,[{key:"_initialize",value:function(t){(0,m.default)(e.prototype.__proto__||(0,l.default)(e.prototype),"_initialize",this).call(this,t),this._setTileUrlGetter(t.getTileUrl),this.sourceId=this.sourceId||this.id,this.imageSize=t.imageSize?t.imageSize:this.tileSize}},{key:"setZIndex",value:function(t){return L(t)||new T.BaseTypeError("ImageTileLayer.zIndex","number",t).error(),(0,m.default)(e.prototype.__proto__||(0,l.default)(e.prototype),"setZIndex",this).call(this,t)}},{key:"_setTileUrlGetter",value:function(t){P(t)?k(t(0,0,0))?this.getTileUrl=t:new T.BaseTypeError("ImageTileLayerOptions.getTileUrl返回值","string",t(0,0,0)).throw():new T.BaseTypeError("ImageTileLayerOptions.getTileUrl","function",t).throw()}},{key:"_addSource",value:function(){this.map&&!this.map.getSource(this.sourceId)&&(this.map.addSource(this.sourceId,{type:b.SOURCE_TYPE.imageTile,tileSize:this.tileSize,imageSize:this.imageSize,data:this.getTileUrl,minZoom:this.minDataZoom,maxZoom:this.maxDataZoom}),this._fire("layer",{}))}},{key:"_removeSource",value:function(){this.map&&this.map.removeSource(this.sourceId),this._fire("source_removed",{})}}],[{key:"createCustomLayer",value:function(t){var n=t.map,i=t.layerId;return n?(0,M.checkKey)(n).then(function(a){if(!a)throw"请传入正确的key";if(!a.custom_layer||!a.custom_layer.enable)throw"无个性化图层权限";var s=r(i,a.custom_layer.layers);if(!s)throw"请传入正确的layerId";(0,I.cl)({id:i,subkey:a.subkey});var l=new e((0,o.default)(s,t));return l.setZIndex((0,w.getRank)(w.LAYER_LEVEL.BUILDING+1,0)-(0,w.getRank)(w.LAYER_LEVEL.BUILDING,0)-1),n.moveLayer(l.getId(),w.LAYER_LEVEL.BUILDING),l}).catch(function(t){return console.error("个性化图层鉴权失败："+t),null}):(console.error("个性化图层鉴权失败：未绑定地图对象。"),null)}}]),e}(x.default);e.default=C},,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),a=i(r),o=n(1),s=i(o),l=n(10),u=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,a.default)(this,t),e&&(this.gl=e,this.id=n.id||"resource-"+(0,l.uniqueId)(),this._object=this._onCreate(n),this._initialize(n))}return(0,s.default)(t,[{key:"delete",value:function(){this._onDelete(),this._object=null,this.gl=null}},{key:"_onCreate",value:function(){}},{key:"_onDelete",value:function(){}},{key:"_initialize",value:function(){}},{key:"bind",value:function(){}},{key:"unbind",value:function(){}}]),t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TRAFFIC_LAYER_ID=e.SATELLITE_LAYER_ID=e.VECTOR_LAYER_ID=e.DEFAULT_BASEMAP=e.TRAFFIC_FEATURE=e.SATELLITE_FEATURE=e.TRAFFIC_ROAD_TYPE=e.MAP_TYPE=void 0;var i=n(17),r=function(t){return t&&t.__esModule?t:{default:t}}(i),a=n(53),o=e.MAP_TYPE={vector:"vector",satellite:"satellite",traffic:"traffic",handdraw:"handdraw",oversea:"oversea"},s=e.TRAFFIC_ROAD_TYPE={highway:1,motorway:2,national:3,provincial:4,county:5,country:6,other:7},l=e.SATELLITE_FEATURE={satellite:"base",road:"road"},u=e.TRAFFIC_FEATURE={base:"base",flow:"flow"};e.DEFAULT_BASEMAP={vector:{type:o.vector,features:[a.BASE_LAYER_TYPE.base,a.BASE_LAYER_TYPE.building3d,a.BASE_LAYER_TYPE.point,a.BASE_LAYER_TYPE.label,a.BASE_LAYER_TYPE.arrow],buildingRange:[16.5,void 0]},satellite:{type:o.satellite,features:[l.satellite,l.road]},traffic:{type:o.traffic,features:[u.base],filter:(0,r.default)(s)},handdraw:{type:o.handdraw},oversea:{type:o.oversea}},e.VECTOR_LAYER_ID={base:"vector_bottom",arrow:"vector_bottom_arrow",building:"vector_top_building",poi:"vector_top_poi"},e.SATELLITE_LAYER_ID={base:"satellite",road:"road"},e.TRAFFIC_LAYER_ID={base:"traffic_base",flow:"traffic_flow"}},function(t,e,n){t.exports={default:n(319),__esModule:!0}},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e){t.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e){t.exports={}},function(t,e,n){var i=n(211);t.exports=function(t,e,n){for(var r in e)i(t,r,e[r],n);return t}},function(t,e,n){"use strict";var i=n(63),r=n(107),a=n(106),o=n(78)("species");t.exports=function(t){var e=i[t];a&&e&&!e[o]&&r.f(e,o,{configurable:!0,get:function(){return this}})}},function(t,e,n){var i=n(107).f,r=n(219),a=n(78)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,a)&&i(t,a,{configurable:!0,value:e})}},function(t,e,n){var i=n(11),r=n(254),a=n(62),o=n(464),s="["+o+"]",l="​",u=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),f=function(t,e,n){var r={},s=a(function(){return!!o[t]()||l[t]()!=l}),u=r[t]=s?e(d):o[t];n&&(r[n]=u),i(i.P+i.F*s,"String",r)},d=f.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(c,"")),t};t.exports=f},function(t,e,n){!function(i,r){t.exports=e=r(n(50))}(0,function(t){return function(){function e(t,e,n){for(var i=[],a=0,o=0;o<e;o++)if(o%4){var s=n[t.charCodeAt(o-1)]<<o%4*2,l=n[t.charCodeAt(o)]>>>6-o%4*2;i[a>>>2]|=(s|l)<<24-a%4*8,a++}return r.create(i,a)}var n=t,i=n.lib,r=i.WordArray,a=n.enc;a.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,i=this._map;t.clamp();for(var r=[],a=0;a<n;a+=3)for(var o=e[a>>>2]>>>24-a%4*8&255,s=e[a+1>>>2]>>>24-(a+1)%4*8&255,l=e[a+2>>>2]>>>24-(a+2)%4*8&255,u=o<<16|s<<8|l,c=0;c<4&&a+.75*c<n;c++)r.push(i.charAt(u>>>6*(3-c)&63));var f=i.charAt(64);if(f)for(;r.length%4;)r.push(f);return r.join("")},parse:function(t){var n=t.length,i=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var a=0;a<i.length;a++)r[i.charCodeAt(a)]=a}var o=i.charAt(64);if(o){var s=t.indexOf(o);-1!==s&&(n=s)}return e(t,n,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),t.enc.Base64})},function(t,e,n){!function(i,r){t.exports=e=r(n(50))}(0,function(t){return function(e){function n(t,e,n,i,r,a,o){var s=t+(e&n|~e&i)+r+o;return(s<<a|s>>>32-a)+e}function i(t,e,n,i,r,a,o){var s=t+(e&i|n&~i)+r+o;return(s<<a|s>>>32-a)+e}function r(t,e,n,i,r,a,o){var s=t+(e^n^i)+r+o;return(s<<a|s>>>32-a)+e}function a(t,e,n,i,r,a,o){var s=t+(n^(e|~i))+r+o;return(s<<a|s>>>32-a)+e}var o=t,s=o.lib,l=s.WordArray,u=s.Hasher,c=o.algo,f=[];!function(){for(var t=0;t<64;t++)f[t]=4294967296*e.abs(e.sin(t+1))|0}();var d=c.MD5=u.extend({_doReset:function(){this._hash=new l.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var o=0;o<16;o++){var s=e+o,l=t[s];t[s]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}var u=this._hash.words,c=t[e+0],d=t[e+1],h=t[e+2],p=t[e+3],v=t[e+4],m=t[e+5],g=t[e+6],_=t[e+7],y=t[e+8],x=t[e+9],b=t[e+10],S=t[e+11],w=t[e+12],E=t[e+13],A=t[e+14],T=t[e+15],M=u[0],I=u[1],P=u[2],k=u[3];M=n(M,I,P,k,c,7,f[0]),k=n(k,M,I,P,d,12,f[1]),P=n(P,k,M,I,h,17,f[2]),I=n(I,P,k,M,p,22,f[3]),M=n(M,I,P,k,v,7,f[4]),k=n(k,M,I,P,m,12,f[5]),P=n(P,k,M,I,g,17,f[6]),I=n(I,P,k,M,_,22,f[7]),M=n(M,I,P,k,y,7,f[8]),k=n(k,M,I,P,x,12,f[9]),P=n(P,k,M,I,b,17,f[10]),I=n(I,P,k,M,S,22,f[11]),M=n(M,I,P,k,w,7,f[12]),k=n(k,M,I,P,E,12,f[13]),P=n(P,k,M,I,A,17,f[14]),I=n(I,P,k,M,T,22,f[15]),M=i(M,I,P,k,d,5,f[16]),k=i(k,M,I,P,g,9,f[17]),P=i(P,k,M,I,S,14,f[18]),I=i(I,P,k,M,c,20,f[19]),M=i(M,I,P,k,m,5,f[20]),k=i(k,M,I,P,b,9,f[21]),P=i(P,k,M,I,T,14,f[22]),I=i(I,P,k,M,v,20,f[23]),M=i(M,I,P,k,x,5,f[24]),k=i(k,M,I,P,A,9,f[25]),P=i(P,k,M,I,p,14,f[26]),I=i(I,P,k,M,y,20,f[27]),M=i(M,I,P,k,E,5,f[28]),k=i(k,M,I,P,h,9,f[29]),P=i(P,k,M,I,_,14,f[30]),I=i(I,P,k,M,w,20,f[31]),M=r(M,I,P,k,m,4,f[32]),k=r(k,M,I,P,y,11,f[33]),P=r(P,k,M,I,S,16,f[34]),I=r(I,P,k,M,A,23,f[35]),M=r(M,I,P,k,d,4,f[36]),k=r(k,M,I,P,v,11,f[37]),P=r(P,k,M,I,_,16,f[38]),I=r(I,P,k,M,b,23,f[39]),M=r(M,I,P,k,E,4,f[40]),k=r(k,M,I,P,c,11,f[41]),P=r(P,k,M,I,p,16,f[42]),I=r(I,P,k,M,g,23,f[43]),M=r(M,I,P,k,x,4,f[44]),k=r(k,M,I,P,w,11,f[45]),P=r(P,k,M,I,T,16,f[46]),I=r(I,P,k,M,h,23,f[47]),M=a(M,I,P,k,c,6,f[48]),k=a(k,M,I,P,_,10,f[49]),P=a(P,k,M,I,A,15,f[50]),I=a(I,P,k,M,m,21,f[51]),M=a(M,I,P,k,w,6,f[52]),k=a(k,M,I,P,p,10,f[53]),P=a(P,k,M,I,b,15,f[54]),I=a(I,P,k,M,d,21,f[55]),M=a(M,I,P,k,y,6,f[56]),k=a(k,M,I,P,T,10,f[57]),P=a(P,k,M,I,g,15,f[58]),I=a(I,P,k,M,E,21,f[59]),M=a(M,I,P,k,v,6,f[60]),k=a(k,M,I,P,S,10,f[61]),P=a(P,k,M,I,h,15,f[62]),I=a(I,P,k,M,x,21,f[63]),u[0]=u[0]+M|0,u[1]=u[1]+I|0,u[2]=u[2]+P|0,u[3]=u[3]+k|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,r=8*t.sigBytes;n[r>>>5]|=128<<24-r%32;var a=e.floor(i/4294967296),o=i;n[15+(r+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),n[14+(r+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,l=s.words,u=0;u<4;u++){var c=l[u];l[u]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}return s},clone:function(){var t=u.clone.call(this);return t._hash=this._hash.clone(),t}});o.MD5=u._createHelper(d),o.HmacMD5=u._createHmacHelper(d)}(Math),t.MD5})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.PICK_UNIFORM="\nuniform float picking_usePickingColor;\nuniform vec3 picking_selectedPickingColor;\n",e.PICK_FUNCTION="\n    vec4 picking_getFinalColor(vec4 vertexColor, vec3 instancePickingColors) {\n        \n        return mix(\n            vertexColor,\n\n            vec4(instancePickingColors.rgb,  255.0).rgba / 255.0,\n\n            picking_usePickingColor);\n    }\n"},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.id;if(!S.has(n)){var i=new c.default(function(n){var i=x.AUTH_STATE.FAIL;if(_.default.isLocal)return void n(null);var r=e.subkey,a=e.subpid,o=["key="+p.default,"pid="+location.host,"channel=0"];r&&o.push("key2="+r,"pid2="+a);var s=m.default.checkKeySrc+"?"+o.join("&");b(null,s,function(e){var a=void 0;e&&e.info&&0===e.info.error?(i=x.AUTH_STATE.SUCCESS,(a=e.detail&&e.detail.cfg)&&(a.subkey=r)):console.error("鉴权失败："+e.info.msg),t.emit(w,(0,l.default)({state:i},e.info)),n(a)},function(){console.error("鉴权失败：网络请求失败。"),t.emit(w,(0,l.default)({state:i},x.AUTH_ERROR.netError)),n(null)})});S.set(n,i)}return S.get(n)}function a(){return new c.default(function(t){(0,y.getStorageFrontier)().then(function(e){var n=["apikey="+p.default,"ctrlver=-1","ctrlpf=grid","ctrlmb=jsapi","frontier="+(e&&e.version||0),"callback"],i=m.default.overseaSrc+"?"+n.join("&");b(null,i,function(e){t(e)},function(){console.error("鉴权失败：海外图请求失败。"),t(null)})})})}function o(t){S.delete(t)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(15),l=i(s),u=n(23),c=i(u),f=n(95),d=i(f);e.checkKey=r,e.overseaCheckKey=a,e.revokeKeyCheck=o;var h=n(499),p=i(h),v=n(22),m=i(v),g=n(108),_=i(g),y=n(536),x=n(120),b=n(351).send,S=new d.default,w="auth_checked"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(245),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=r.default[0]},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){return Math.sqrt(t*t+e*e)}function a(t,e){var n=t.pageX,i=t.pageY;if(t.touches){var r=t.touches[e||0];n=r.pageX,i=r.pageY}return{x:n,y:i}}function o(t){return t}Object.defineProperty(e,"__esModule",{value:!0}),e.Finger=void 0;var s=n(18),l=i(s),u=n(17),c=i(u),f=n(3),d=i(f),h=n(0),p=i(h),v=n(1),m=i(v),g=n(5),_=i(g),y=n(4),x=i(y),b=n(28),S=n(112),w={start:["mousedown","touchstart"],move:["mousemove","touchmove"],end:["mouseup","touchend"],cancel:["","touchcancel"],leave:["mouseleave",""]},E=0,A=(e.Finger=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,p.default)(this,e);var i=(0,_.default)(this,(e.__proto__||(0,d.default)(e)).call(this));if(!t)throw new Error("element is invalid");return i.options=n,i.identifier="Finger__"+E,E+=1,i.touched=!1,i.panning=!1,i.element=t,i.element.__Finger__identifier=i.identifier,i.handlers=[],i.isDoubleTap=!1,i.y1=null,i.x1=i.y1,i.y2=null,i.x2=i.y2,i.deltaTime=null,i.lastStartTime=null,i.panSpeedStartTime=null,i.panSpeedStartPos=null,i.now=null,i.tapTimeout=null,i.holdTimeout=null,i.swipeTimeout=null,i.startVector=null,i.startDistance=null,i.init(),i}return(0,x.default)(e,t),(0,m.default)(e,[{key:"init",value:function(){var t=this,e="ontouchstart"in document?1:0,n=(0,c.default)(w).forEach(function(n){if(w[n][e]){if("leave"===n)return void(0,b.on)(t.element,w[n][e],A.end,t);(0,b.on)(t.element,w[n][e],A[n],t)}});this.handlers.concat(n)}},{key:"destroy",value:function(){clearTimeout(this.tapTimeout),clearTimeout(this.holdTimeout),clearTimeout(this.swipeTimeout),this.removeAllListeners("touch-start"),this.removeAllListeners("multi-touch-start"),this.removeAllListeners("hold"),this.removeAllListeners("pinch"),this.removeAllListeners("rotate"),this.removeAllListeners("pan-start"),this.removeAllListeners("pan"),this.removeAllListeners("pan-end"),this.removeAllListeners("swipe"),this.removeAllListeners("tap"),this.removeAllListeners("doubletap"),this.removeAllListeners("touch-end"),this.removeAllListeners("multi-touch-end"),this.removeAllListeners("touch-cancel"),this.identifier=null,delete this.element.__Finger__identifier,this.handlers.forEach(function(t){t&&t.remove&&t.remove()}),this.touched=!1,this.handlers=[],this.isDoubleTap=!1,this.y1=null,this.x1=this.y1,this.y2=null,this.x2=this.y2,this.deltaTime=null,this.lastStartTime=null,this.now=null,this.tapTimeout=null,this.holdTimeout=null,this.swipeTimeout=null,this.startVector=null,this.startDistance=null}}]),e}(S),{start:function(t){var e=this;if(t&&t.target){this.touched=!0,this.now=Date.now(),this.deltaTime=this.now-(this.lastStartTime||this.now);var n=a(t);"number"==typeof this.x1&&"number"==typeof this.y1&&(this.isDoubleTap=this.deltaTime<300&&Math.abs(n.x-this.x1)<10&&Math.abs(n.y-this.y1)<10),this.x1=n.x,this.y1=n.y;var i=o(t);if(this.emit("touch-start",i),t.touches&&t.touches.length>1){var s=a(t,0),u=a(t,1);this.startVector=[u.x-s.x,u.y-s.y],this.startDistance=r.apply(void 0,(0,l.default)(this.startVector)),i.vector=this.startVector,i.vectorDistance=this.startDistance,clearTimeout(this.holdTimeout),this.emit("multi-touch-start",i)}this.lastStartTime=this.now,this.holdTimeout=setTimeout(function(){e.emit("hold",i)},750),this.options.stopPropagation&&t.stopPropagation()}},move:function(t){if(t&&t.target&&this.touched){var e=a(t),n=o(t);if(this.isDoubleTap=!1,clearTimeout(this.holdTimeout),null!==this.x2?(n.deltaX=e.x-this.x2,n.deltaY=e.y-this.y2):(n.deltaX=0,n.deltaY=0),t.touches&&t.touches.length>1&&this.startVector&&null!==this.startVector.x){var i=a(t,0),s=a(t,1),l=[s.x-i.x,s.y-i.y],u=r.apply(void 0,l),c=u/this.startDistance,f=Math.acos((this.startVector[0]*l[0]+this.startVector[1]*l[1])/(u*this.startDistance));f=l[0]*this.startVector[1]-this.startVector[0]*l[1]>=0?f:-f,Math.abs(c-1)>.01&&(n.scale=c,this.emit("pinch",n)),0!==f&&(n.angle=f,this.emit("rotate",n)),t.preventDefault()}else if(this.touched&&(0!==n.deltaY||0!==n.deltaX))if(this.panning){this.emit("pan",n);var d=Date.now();d-this.panSpeedStartTime>300&&(this.panSpeedStartTime=d,this.panSpeedStartPos=e)}else this.emit("pan-start",n),this.panning=!0,this.panSpeedStartTime=Date.now(),this.panSpeedStartPos=e;this.options.preventDefaultMove&&t.preventDefault(),this.x2=e.x,this.y2=e.y,this.options.stopPropagation&&t.stopPropagation()}},end:function(t){var e=this;if(t&&t.target){clearTimeout(this.holdTimeout),this.now=Date.now();var n=this.x2-this.x1,i=this.y2-this.y1,r=null===this.x2||Math.abs(n)<10&&Math.abs(i)<10,a=this.now-this.lastStartTime<200&&r,s=o(t);if(null!==this.x2&&null!==this.y2&&this.panning){var l=Math.abs(n)>Math.abs(i)?n>0?"RIGHT":"LEFT":i>0?"DOWN":"TOP",u=0,c=0;if(this.now-this.panSpeedStartTime<300){var f=this.x2-this.panSpeedStartPos.x,d=this.y2-this.panSpeedStartPos.y,h=this.now-this.panSpeedStartTime;c=f/h,u=d/h}s.swipeDirection=l,s.speedX=c,s.speedY=u,s.deltaX=n,s.deltaY=i,this.panning&&(this.emit("pan-end",s),this.panning=!1),this.swipeTimeout=setTimeout(function(){e.emit("swipe",s)})}else r&&a&&(this.tapTimeout=setTimeout(function(){e.emit("tap",s),e.isDoubleTap&&(e.emit("doubletap",s),e.isDoubleTap=!1)},0));this.emit("touch-end",s),t.touches&&t.touches.length>0&&t.touches.length<2&&this.emit("multi-touch-end",s),this.startDistance=null,this.startVector=[0,0],this.y2=null,this.x2=this.y2,this.touched=!1,this.options.preventDefaultEnd&&t.preventDefault(),this.options.stopPropagation&&t.stopPropagation()}},cancel:function(t){clearTimeout(this.tapTimeout),clearTimeout(this.holdTimeout),clearTimeout(this.swipeTimeout),this.touched=!1,this.emit("touch-cancel",t)}})},function(t,e,n){"use strict";function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a(t,e);return(0,r.toDom)(n)}Object.defineProperty(e,"__esModule",{value:!0}),e.Template=void 0,e.templeteToDom=i;var r=n(215),a=e.Template=function(){var t={},e=function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/[ ]/g,"&nbsp;")};return function(n,i){if("string"==typeof n){var r=t[n];if(!t[n]){var a=n.replace(/<%\s*([^=][^%>]*)\s*%>/g,function(){return"';"+arguments[1]+" tmp+='"}).replace(/<%=\s*([^%>]+)\s*%>/g,function(){return"' + strip("+arguments[1]+") +'"}).replace(/<%=\s*([^%>]+)\s*%>/g,function(){return"' + "+arguments[1]+"+ '"});a='var tmp = ""; with(obj){ tmp = \''+a+"'; } return tmp;",r=new Function("obj","strip",a),t[n]=r}return r(i,e)}}}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return t.length>=3&&(0,w.default)(t[0].lat)&&(0,w.default)(t[0].lng)}function a(t){return t.length>=1&&t.every(function(t){return t.length>=3&&r(t)})}function o(t){return t.length>=1&&t.every(function(t){return a(t)})}function s(t){var e=t[0],n=t[t.length-1];return e.lat===n.lat&&e.lng===n.lng?t:t.concat([e])}function l(t){for(var e=0,n=1,i=void 0,r=void 0;n<t.length;)i=r||t[0],r=t[n],e+=(r.lng-i.lng)*(r.lat+i.lat),n+=1;return e>0}function u(t){return(r(t)?[[s(t)]]:a(t)?[t.map(function(t){return s(t)})]:t.map(function(t){return t.map(s)})).map(function(t){return t.map(function(t,e){var n=[];return t.forEach(function(t){if(n.length>0){var e=n[n.length-1];t.lat===e.lat&&t.lng===e.lng||n.push(t)}else n.push(t)}),0===e?l(n)?n.reverse():n:l(n)?n:n.reverse()})})}function c(t){return u(t).reduce(function(t,e){var n=e.reduce(function(t,e){return t.push(e),t},[]);return t.push.apply(t,(0,b.default)(n)),t},[])}function f(t){return r(t)?t.length:t.reduce(function(t,e){return t+e.reduce(function(t,e){return t+e.length},0)},0)}function d(t){return t.reduce(function(t,e){return t+h(e)},0)}function h(t){var e=0,n=!0,i=!0,r=!1,a=void 0;try{for(var o,s=(0,y.default)(t);!(i=(o=s.next()).done);i=!0){var l=o.value,u=l.length;e+=n?u>=3?u-3:0:u+1,n=!1}}catch(t){r=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return e}function p(t){var e=null;if(t.length>1){var n=0;e=[],t.forEach(function(t){n+=t.length,e.push(n)}),e.pop()}return e}function v(t,e){var n=3*d(t),i=g(t),r=new e(n),a=0;return t.forEach(function(t,e){var n=m(t),o=!0,s=!1,l=void 0;try{for(var u,c=(0,y.default)(n);!(o=(u=c.next()).done);o=!0){var f=u.value;r[a]=f+i[e],a+=1}}catch(t){s=!0,l=t}finally{try{!o&&c.return&&c.return()}finally{if(s)throw l}}}),r}function m(t){var e=p(t),n=I(t,{dimensions:2,result:[]});return(0,M.default)(n,e,2)}function g(t){var e=new Array(t.length+1);e[0]=0;var n=0;return t.forEach(function(t,i){n+=t.reduce(function(t,e){return t+e.length},0),e[i+1]=n}),e}Object.defineProperty(e,"__esModule",{value:!0});var _=n(25),y=i(_),x=n(18),b=i(x),S=n(291),w=i(S);e.isSimple=r,e.isPart=a,e.isComplex=o,e.isClockWise=l,e.normalize=u,e.getBorderPolyline=c,e.getVertexCount=f,e.getTriangleCount=d,e.getTriangleCountOfPart=h,e.getSurfaceIndices=v;var E=n(246),A=i(E),T=n(286),M=i(T),I=A.default.flattenVertices},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(t.row>e.row){var n=t;t=e,e=n}return{x0:t.column,y0:t.row,x1:e.column,y1:e.row,dx:e.column-t.column,dy:e.row-t.row}}function a(t,e,n,i,r){var a=Math.max(n,Math.floor(e.y0)),o=Math.min(i,Math.ceil(e.y1));if(t.x0===e.x0&&t.y0===e.y0?t.x0+e.dy/t.dy*t.dx<e.x1:t.x1-e.dy/t.dy*t.dx<e.x0){var s=t;t=e,e=s}for(var l=t.dx/t.dy,u=e.dx/e.dy,c=t.dx>0,f=e.dx<0,d=a;d<o;d++){var h=l*Math.max(0,Math.min(t.dy,d+c-t.y0))+t.x0,p=u*Math.max(0,Math.min(e.dy,d+f-e.y0))+e.x0;r(Math.floor(p),Math.ceil(h),d)}}function o(t,e,n,i,o,s){var l=r(t,e),u=r(e,n),c=r(n,t),f=void 0;l.dy>u.dy&&(f=l,l=u,u=f),l.dy>c.dy&&(f=l,l=c,c=f),u.dy>c.dy&&(f=u,u=c,c=f),l.dy&&a(c,l,i,o,s),u.dy&&a(c,u,i,o,s)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(17),l=i(s),u=n(0),c=i(u),f=n(1),d=i(f),h=n(22),p=i(h),v=function(){function t(e,n,i,r,a){(0,c.default)(this,t),this.z=e,this.x=n,this.y=i,this.w=r,this.tileSize=a||p.default.tileSize,this.id=n+"_"+i+"_"+e,this._children=null,this._parent=null}return(0,d.default)(t,[{key:"url",value:function(t){var e=this.getServiceCoord(),n=e.x,i=e.y,r=e.z;return t[(this.x+this.y)%t.length].replace("{z}",r).replace("{x}",n).replace("{y}",i).replace("{version}",p.default.dataVersion.tile)}},{key:"setIconUrls",value:function(t){this._iconUrls=t}},{key:"getServiceCoord",value:function(){var t=this.tileSize?p.default.tileSize/this.tileSize:1;return{x:this.x,y:Math.pow(2,this.z)*t-this.y-1,z:this.z}}},{key:"urlForBatchChildren",value:function(t){var e=this.children().map(function(t){return t.getServiceCoord()}).map(function(t){return t.z+"_"+t.x+"_"+t.y}).join();return t[(this.x+this.y)%t.length].replace("{tiles}",e).replace("{version}",p.default.dataVersion.tile)}},{key:"parent",value:function(e){return 0===this.z?null:this._parent?this._parent:(this.z>e?this._parent=new t(this.z-1,this.x,this.y,this.w):this._parent=new t(this.z-1,Math.floor(this.x/2),Math.floor(this.y/2),this.w),this._parent)}},{key:"ancestor",value:function(e){var n=Math.round(this.z)-Math.round(e);if(n<=0)return null;var i=Math.pow(2,n);return new t(this.z-n,Math.floor(this.x/i),Math.floor(this.y/i),this.w)}},{key:"children",value:function(e){if(this._children)return this._children;if(this.z>=e)return this._children=[new t(this.z+1,this.x,this.y,this.w)],this._children;var n=this.z+1,i=2*this.x,r=2*this.y;return this._children=[new t(n,i,r,this.w),new t(n,i+1,r,this.w),new t(n,i,r+1,this.w),new t(n,i+1,r+1,this.w)],this._children}},{key:"descendant",value:function(e){var n=this.x,i=this.y,r=this.z,a=this.w,o=Math.round(e)-Math.round(r);if(o<=0)return null;for(var s=Math.pow(2,o),l=[],u=0;u<s;u++)for(var c=0;c<s;c++)l.push(new t(e,n*s+u,i*s+c,a));return l}},{key:"isVirtualCoord",value:function(){return this.z<=0}},{key:"wrapXAroundCenter",value:function(t){var e=this.x,n=this.z,i=Math.pow(2,n),r=t.getLng()/360+.5,a=e/i,o=a-r;return o>.5?e-i:o<-.5?e+i:e}}],[{key:"converter",value:function(t){return new this(t.z,t.x,t.y,t.w,t.tileSize)}},{key:"cover",value:function(e,n){function i(n,i,o){var s=void 0,l=void 0,u=void 0,c=void 0;if(o>=0&&o<=r)for(s=n;s<i;s++)l=Math.floor(s/r),u=(s%r+r)%r,c=new t(e,u,o,l),a[c.id]=c}var r=1<<e,a={};return o(n[0],n[1],n[2],0,r,i),o(n[2],n[3],n[0],0,r,i),(0,l.default)(a).map(function(t){return a[t]})}},{key:"coverAll",value:function(e){for(var n=1<<e,i=[],r=0;r<n;r++)for(var a=0;a<n;a++){var o=new t(e,r,a,0);i.push(o)}return i}}]),t}();e.default=v},function(t,e,n){"use strict";function i(t){return!a.default.isClientRender&&(t===o.DEFAULT||o[t]===o.DEFAULT)}Object.defineProperty(e,"__esModule",{value:!0}),e.STYLE_ID=void 0,e.isDefaultStyle=i;var r=n(22),a=function(t){return t&&t.__esModule?t:{default:t}}(r),o=e.STYLE_ID={DEFAULT:0,DARK:1,LIGHT:2,GAME:3}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=e.styleNameConfig={regionTag:{airportsarea:[196832],building:[196619,197120,197121,197122,197123],commercial:[196890],grass:[196614,196615,196616,196833],hospital:[196774],land:[196609,196612,196613,196617],otherarea:[196775,196831,196856,196857,196858,196859,196860,196861,196862,196863,196864,196865,196866,196867,196868,196869,196877,196894,196895,196934],park:[196622],parkinglots:[196629,196787],resident:[196621,196627,196630,196632],school:[196773],sportsfield:[196626,196789,196790,196791,196792,196793,196794,196795,196796,196798],subwayarea:[196634,196635,196636,196637,196638,196639,196640,196641,196642,196643,196644,196645,196646,196647,196648,196649,196684,196685,196686,196687,196688,196689,196690,196651,196652,196653,196654,196655,196656,196657,196658,196659,196660,196691,196692,196693,196694,196695,196696,196697,196698,196661,196662,196663,196664,196665,196666,196667,196668,196669,196670,196671,196672,196673,196674,196675,196676,196677,196678,196679,196680,196681,196682,196683,196699,196700,196701,196702,196703,196704,196705,196706,196707,196708,196709,196710,196711,196712,196713,196714,196715,196716,196717,196718,196719,196720,196721,196722,196723,196724,196725,196726,196727,196728,196729,196730,196731,196732,196733,196734,196735,196736,196737,196738,196739,196650,196740,196741,196742,196743,196744,196745,196746,196747,196748,196749,196750,196753,196754,196755,196756,196757,196758,196759,196760,196761,196762,196763,196764,196765,196766,196767,196768,196769,196770,196771,196772,196776,196777,196778,196779,196780,196781,196782,196783,196784,196785,196786,196799,196800,196801,196802,196803,196815,196816,196817,196818,196819,196820,196821,196822,196823,196824,196825,196826,196827,196828,196829,196830,196834,196835,196836,196837,196838,196839,196840,196841,196842,196843,196844,196845,196846,196847,196848,196849,196850,196851,196852,196853,196854,196855,196870,196871,196872,196874,196875,196876,196881,196878,196879,196880,196882,196883,196884,196885,196886,196887,196888,196889,196891,196892,196893,196896,196897,196898,196899,196900,196901,196902,196903,196904,196905,196906,196907,196908,196909,196910,196911,196912,196913,196914,196915,196916,196917,196918,196919,196920,196921,196922,196923,196924,196925,196926,196927,196928,196929,196930,196931,196932,196933,196935,196936,196938,196939,196940,196941,196942,196944,196945,196946,196947],water:[196610,196611,196618]},labelTag:{aoi:[262149,262150,262404,262405,262406,262482,262483,262484,262153,262952],autoservice:[262864],bridge:[262154,262953,262946,262947,262948,262949,262950],building:[262145,262409,262487,262708,262713,262494,262506,262954],business:[262493,262515],city:[262157,262158,262159,262160],commercial:[262942],continent:[262395,262426],country:[262402,262865],district:[262155],education:[262453,262488],entertainment:[262486],ferry:[262162,262801],government:[262869],highway:[262166,262418,262425,262792,262799,262812,262813],highwaynum:[262164,262165,262169,262170,262783,262784],hospital:[262407],hotel:[262452],island:[262146],lifeservice:[262866,262867,262868],mainroad:[262178,262179,262185,262186,262415,262416,262419,262420,262790,262791,262797,262798,262802,262803,262810,262811],motorway:[262173,262417,262424,262793,262800],nationalnum:[262163,262168,262785],ocean:[262147,262396,262707],other:[262151,262496,262497,262498,262499,262500,262501,262502,262503,262504,262505,262507,262508,262509,262510,262511,262512,262514],path:[262903],province:[262533],railway:[262908,263057],restrant:[262450,262495],roadnum:[262167,262176,262786],scenic:[262288,262489,262870,262941],secondaryroad:[262180,262181,262187,262188,262413,262414,262421,262422,262788,262789,262795,262796,262804,262805,262808,262809],shopping:[262451,262945],street:[262182,262183,262189,262412,262423,262787,262794,262806,262807],subwaygate:[262454,262455,262456,262457,262458,262459,262460,262461,262462,262463,262464,262465,262466,262467,262468,262469,262470,262471,262472,262473,262474,262475,262476,262477,262478,262479,262480,262481,262492,262485,262691,262696,262750,262818,262841,262842,262853,262921,262922,262927,262940,263016],subwayline:[262544,262545,262546,262547,262548,262549,262550,262551,262552,262553,262554,262555,262556,262557,262558,262559,262560,262561,262564,262565,262566,262567,262568,262569,262570,262571,262572,262573,262574,262575,262576,262577,262578,262579,262580,262581,262582,262583,262584,262585,262586,262587,262588,262589,262590,262591,262592,262593,262594,262595,262596,262597,262598,262599,262600,262601,262602,262603,262604,262605,262606,262607,262608,262609,262610,262611,262612,262613,262614,262615,262616,262617,262618,262619,262620,262621,262622,262623,262624,262625,262626,262627,262628,262629,262630,262631,262632,262633,262634,262635,262636,262637,262638,262639,262640,262641,262642,262643,262644,262645,262646,262647,262648,262649,262650,262651,262652,262653,262654,262655,262656,262657,262658,262659,262660,262661,262662,262663,262664,262665,262666,262667,262668,262669,262670,262671,262672,262673,262674,262675,262676,262677,262678,262679,262680,262681,262682,262684,262686,262688,262690,262693,262695,262698,262700,262702,262704,262706,262710,262712,262715,262717,262719,262721,262723,262725,262727,262729,262731,262733,262735,262737,262739,262741,262743,262745,262747,262749,262752,262762,262767,262768,262769,262770,262771,262772,262773,262774,262775,262776,262777,262778,262779,262780,262781,262782,262815,262817,262820,262822,262824,262826,262828,262830,262832,262834,262836,262838,262840,262844,262846,262848,262850,262852,262855,262857,262859,262861,262863,262905,262907,262910,262909,262912,262914,262916,262918,262920,262924,262926,262929,262931,262933,262935,262937,262939,262944,262973,262975,262977,262979,262981,262983,262985,262987,262989,262991,262993,262995,262997,262999,263001,263003,263005,263007,263009,263011,263013,263015,263018,263020,263022,263024,263026,263028,263030,263032,263034,263036,263038,263040,263042,263044,263046,263048,263050,263052,263054,263056,263061,263063,263065,263067,263069,263073,263075,263077,263079],subwaystation:[262287],town:[262156],transport:[262410,262871],village:[262152]},lineTag:{ferry:[131115],guojie:[131073,131074,131075],highway:[131082,131088,131335,131337,131090,131396,131406],mainroad:[131084,131085,131105,131106,131107,131333,131342,131108,131109,131110,131111,131334,131344,131112,131398,131399,131408,131409],motorway:[131083,131089,131329,131338,131091,131397,131407],path:[131336,131483,131484,131405,131453,131454,131455,131456,131457,131506],pfurniture:[131352,131353,131354,131355,131511,131512],railway:[131086,131087,131489],secondaryroad:[131208,131097,131098,131099,131331,131340,131100,131101,131102,131103,131332,131341,131104,131400,131401,131410,131411,131507],shengjie:[131078,131079,131080,131486],street:[131092,131093,131094,131330,131339,131095,131096,131345,131412,131505],subwayline:[131117,131118,131119,131120,131121,131122,131123,131124,131125,131126,131127,131128,131129,131130,131131,131132,131133,131134,131135,131136,131137,131138,131139,131140,131141,131142,131143,131144,131145,131146,131147,131148,131149,131150,131151,131152,131153,131154,131155,131156,131157,131158,131159,131160,131161,131162,131163,131164,131165,131166,131167,131168,131169,131170,131171,131172,131173,131174,131175,131176,131177,131178,131179,131180,131181,131182,131183,131184,131185,131186,131187,131188,131189,131190,131191,131192,131193,131194,131195,131196,131197,131198,131199,131200,131201,131202,131203,131204,131205,131206,131207,131209,131210,131211,131212,131213,131214,131215,131216,131217,131218,131219,131220,131221,131222,131223,131224,131225,131226,131227,131228,131229,131230,131231,131232,131233,131234,131235,131236,131237,131238,131239,131240,131241,131242,131243,131244,131245,131246,131247,131248,131249,131250,131251,131252,131253,131254,131255,131256,131257,131258,131259,131260,131261,131262,131263,131264,131265,131266,131267,131268,131269,131270,131271,131272,131273,131274,131275,131276,131277,131278,131279,131280,131281,131282,131283,131284,131285,131286,131287,131288,131289,131290,131291,131292,131293,131294,131295,131296,131297,131298,131299,131300,131301,131302,131303,131304,131305,131306,131307,131308,131309,131310,131311,131312,131313,131314,131315,131316,131317,131318,131319,131320,131321,131322,131323,131324,131325,131326,131327,131346,131347,131348,131349,131350,131351,131356,131357,131358,131359,131360,131361,131362,131363,131364,131365,131366,131367,131368,131369,131370,131371,131384,131385,131386,131387,131388,131389,131390,131391,131392,131393,131394,131395,131402,131403,131404,131413,131414,131415,131416,131417,131437,131438,131439,131440,131441,131442,131443,131444,131445,131446,131447,131448,131449,131450,131451,131452,131458,131459,131460,131461,131462,131463,131464,131465,131466,131467,131468,131469,131470,131471,131472,131473,131474,131475,131476,131477,131478,131479,131480,131481,131482,131487,131488,131491,131492,131493,131494,131495,131496,131497,131498,131499,131500,131501,131502,131503,131504,131508,131509,131510,131513,131514,131515,131516,131517,131518,131519,131520,131521,131522,131523,131524,131525,131526,131527,131528,131529,131530,131531,131532,131533,131534,131535,131536,131537,131538,131539,131540,131541,131542,131543,131544,131545,131546,131547,131548,131549,131550,131551,131552,131554,131555,131556,131557,131558,131560,131561,131562,131563],water:[131081]},pointTag:{aoi:[65546,65550,65686,65687,65688,65755,65756,65757,65554,66202,66618],autoservice:[65606,66173,66174,66175,66176,66177],bridge:[65547,66612,66613,66614,66615,66616,66617],building:[65568,65574,65577,65587,65592,65594,65600,65602,65603,65604,65608,65619,65620,65621,65622,65623,65624,65625,65626,65627,65628,65629,65630,65632,65703,66092,66098,66099,66100,66101,66102,66103,66096,66105,66106,66107,66108,66109,66110,66111,66112,66113,66114,66115,66116,66120,66132,66133,66134,66135,66136,66137,66138,66139,66140,66141,66142,66178,66179,66180,66181,66183,66184,66186,66187,66189,66190,66191,66192,66193,66194,66224,66414,66415,66416,66417,66418,66419,66420,66421,66422,66423,66424,66425,66426,66427,66428,66429,66430,66431,66432,66433,66434,66435,66634,66684,66685,66686,66850],business:[65578,65618,66582],carpark:[65607,66526,66527],city:[65543,65555,65557,65558,65559,65693],commercial:[65758],continent:[65537],country:[65541,65556],district:[65542],education:[65562,65571,65583,65584,65701,65702,65741,65742,66227,66849],entertainment:[65569,65593,65613,65743,66199,66200,66226],government:[65579],hospital:[65581,65598,65705,66852],hotel:[65582,65733,65734,65735,66123,66124,66125,66126,66127,66128,66163,66164,66165,66166,66167,66168,66169,66170,66171,66172,66188,66222,66490,66541],island:[65539],lifeservice:[65586,65596,65597,65599,65617,65738,65739,65740,66118,66119,66129,66182,66185,66221],ocean:[65538,65540,65549],other:[65553,65616,65631,65700,65706,65707,65708,65709,66196,66564,66565,66577],province:[66572],restrant:[65591,65595,65601,65729,65730,65731,65732,65704,66223,66851],scenic:[65552,65563,65564,65565,65566,65567,65573,65585,65744,66198,66201,66491,66492,66493,66494,66495,66496,66497,66498,66499,66500,66501,66502,66503,66504,66505,66506,66507,66508,66509,66510,66511,66512,66513,66514,66515,66516,66517,66518,66519,66520,66521,66522,66523,66524,66525,66528,66529,66530,66531,66532,66533,66534,66535,66536,66537,66538,66539,66540,66542,66543,66544,66545,66546,66547,66548,66549,66550,66551,66552,66553,66554,66555,66556,66557,66558,66559,66560,66561,66562,66563],shopping:[65588,65589,65736,65737,66619],subwaygate:[65836,65837,65838,65839,65840,65841,65842,65843,65844,65845,65745,65846,65847,65848,65849,65850,65851,65852,65853,65854,65855,65856,65857,65858,65859,65860,65861,65862,65863,65864,65894,66080,66086,66160,66233,66398,66402,66413,66590,66594,66600,66610,66679,66682,66775,66844],subwayline:[65936,65937,65938,65939,65940,65941,65942,65943,65944,65945,65946,65947,65948,65949,65950,65951,65952,65953,65954,65955,65956,65957,65958,65959,65960,65961,65962,65963,65964,65965,65966,65967,65968,65969,65970,65971,65972,65973,65974,65975,65976,65978,65979,65980,65981,65982,65983,65984,65985,65986,65987,65988,65989,65990,65991,65992,65993,65994,65995,65996,65997,65998,65999,66e3,66001,66002,66003,66004,66005,66006,66007,66008,66009,66010,66011,66012,66013,66014,66015,66016,66017,66018,66019,66020,66021,66022,66023,66024,66025,66026,66027,66028,66029,66030,66031,66032,66033,66034,66035,66036,66037,66038,66039,66040,66041,66042,66043,66044,66045,66046,66047,66048,66049,66050,66051,66052,66053,66054,66055,66056,66057,66058,66059,66060,66061,66062,66063,66064,66065,66066,66067,66068,66069,66070,66071,66072,66073,66074,66075,66076,66081,66082,66087,66088,66089,66090,66091,66097,66104,66117,66130,66131,66143,66144,66145,66146,66147,66148,66149,66150,66151,66152,66153,66154,66155,66156,66161,66162,66195,66203,66206,66207,66208,66209,66210,66211,66212,66213,66214,66215,66216,66217,66218,66219,66220,66228,66229,66234,66377,66378,66380,66382,66385,66387,66389,66390,66391,66392,66403,66404,66405,66406,66409,66486,66487,66566,66568,66569,66573,66574,66579,66581,66583,66584,66585,66586,66595,66596,66601,66602,66603,66604,66605,66606,66611,66638,66639,66640,66641,66642,66643,66644,66645,66646,66647,66648,66649,66650,66651,66652,66653,66654,66655,66656,66657,66658,66659,66660,66661,66662,66663,66664,66665,66666,66667,66668,66669,66670,66671,66672,66673,66674,66675,66676,66683,66687,66688,66834,66835,66836,66837,66838,66840,66841,66845,66848,66912],subwaystation:[65635,65637,65639,65641,65643,65645,65647,65649,65651,65653,65654,65655,65657,65659,65661,65663,65665,65667,65669,65673,65675,65677,65681,65683,65684,65689,65691,65694,65696,65698,65710,66077,66083,66157,66204,66205,66230,66375,66235,66236,66237,66238,66239,66240,66241,66242,66243,66244,66245,66246,66247,66248,66249,66250,66251,66252,66253,66254,66255,66256,66257,66258,66259,66260,66261,66262,66263,66264,66265,66266,66267,66268,66269,66270,66271,66272,66273,66274,66275,66276,66277,66278,66279,66280,66281,66282,66283,66284,66285,66286,66287,66288,66289,66290,66291,66292,66293,66294,66295,66296,66297,66298,66299,66300,66301,66302,66303,66304,66305,66306,66307,66308,66309,66310,66311,66312,66313,66314,66315,66316,66317,66318,66319,66320,66321,66322,66323,66324,66325,66326,66327,66328,66329,66330,66331,66332,66333,66334,66335,66336,66337,66338,66339,66340,66342,66343,66344,66345,66346,66347,66348,66349,66350,66351,66352,66353,66354,66355,66356,66357,66358,66359,66360,66361,66362,66363,66364,66365,66366,66367,66368,66369,66370,66371,66372,66373,66374,66376,66379,66381,66383,66384,66386,66388,66393,66394,66395,66399,66407,66408,66410,66411,66488,66489,66567,66570,66571,66575,66576,66580,66587,66588,66591,66592,66597,66598,66607,66608,66677,66678,66680,66681,66773,66774,66842,66843],town:[65544],transport:[65560,65570,65572,65576,65605,65609,65610,65611,65614,65615,66093,66094,66095,66121,66122,66225],village:[65545,65551,65580,66578]}};e.isRoadwayLabel=function(t){return i.labelTag.highway.indexOf(t)>-1||i.labelTag.mainroad.indexOf(t)>-1||i.labelTag.motorway.indexOf(t)>-1||i.labelTag.street.indexOf(t)>-1||i.labelTag.secondaryroad.indexOf(t)>-1},e.isRoadwayNum=function(t){return i.labelTag.highwaynum.indexOf(t)>-1||i.labelTag.nationalnum.indexOf(t)>-1||i.labelTag.roadnum.indexOf(t)>-1},e.isRoadwayLine=function(t){return i.lineTag.highway.indexOf(t)>-1||i.lineTag.mainroad.indexOf(t)>-1||i.lineTag.secondaryroad.indexOf(t)>-1||i.lineTag.motorway.indexOf(t)>-1||i.lineTag.railway.indexOf(t)>-1||i.lineTag.street.indexOf(t)>-1||i.lineTag.subwayline.indexOf(t)>-1},e.isTransportPoint=function(t){return i.pointTag.subwayline.indexOf(t)>-1||i.pointTag.transport.indexOf(t)>-1}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(){var t=["position:absolute;","left:0;","top:0;","overflow:hidden;","z-index:1000;","width:100%;","height:100%;"],e=document.createElement("div");e.style.cssText=t.join("");var n=document.createElement("div");return n.style.cssText="left:0;top:0;z-index:101;",e.appendChild(n),{root:e,childs:{domOverlayLayer:n},domOverlayCollision:new mt.default}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(125),o=i(a),s=n(149),l=i(s),u=n(94),c=i(u),f=n(17),d=i(f),h=n(15),p=i(h),v=n(3),m=i(v),g=n(0),_=i(g),y=n(1),x=i(y),b=n(5),S=i(b),w=n(4),E=i(w),A=n(810),T=i(A),M=n(782),I=i(M),P=n(770),k=i(P),L=n(658),C=i(L),R=n(256),D=n(660),N=i(D),B=n(500),O=i(B),F=n(502),z=i(F),V=n(501),U=i(V),G=n(302),H=n(391),Y=n(760),j=n(44),W=n(416),X=i(W),Z=n(830),q=i(Z),Q=n(22),J=i(Q),K=n(108),$=i(K),tt=n(668),et=i(tt),nt=n(771),it=i(nt),rt=n(121),at=n(29),ot=n(36),st=i(ot),lt=n(120),ut=n(312),ct=n(693),ft=i(ct),dt=n(514),ht=i(dt),pt=n(146),vt=n(761),mt=i(vt),gt=n(53),_t=n(827),yt=n(785),xt=n(700),bt=n(28),St=n(490),wt=n(661),Et=n(93),At=n(46),Tt=n(214),Mt=n(75),It=n(10),Pt=st.default.isString,kt=st.default.isUndefined,Lt=st.default.isBoolean,Ct=st.default.isNumber,Rt=st.default.isObject,Dt={center:new At(39.88795,116.49369),zoom:13,minZoom:J.default.minZoom,maxZoom:J.default.maxZoom,minPitch:J.default.minPitch,maxPitch:J.default.maxPitch,rotation:0,pitch:0,scale:1,offset:{x:0,y:0},draggable:!0,scrollable:!0,pitchable:!0,rotatable:!0,doubleClickZoom:!0,mapZoomType:ut.MAP_ZOOM_TYPE.DEFAULT,viewMode:lt.VIEW_MODE.MAP_3D,mapStyleId:"DEFAULT",showControl:!0,enableExtendZoom:!1},Nt=bt.isLowMobileDevice()?30:55,Bt=It.uniqueId(),Ot=function(t){function e(t,n){(0,_.default)(this,e);var i=(0,S.default)(this,(e.__proto__||(0,m.default)(e)).call(this)),r=Date.now();n=It.extend({},Dt,n),n.heading=360-n.rotation;var a=n,o=a.minZoom,s=a.maxZoom,l=a.minPitch,u=a.maxPitch;if("number"==typeof o?n.minZoom=Math.max(o,J.default.minZoom):(new at.ClassTypeError("MapOptions的minZoom参数","Number",o).warn(),n.minZoom=J.default.minZoom),"number"==typeof s)if(n.enableExtendZoom){if(s>J.default.maxZoom){var c=Math.min(s,25);J.default.maxZoom=c,n.maxZoom=c}}else n.maxZoom=Math.min(n.maxZoom,J.default.maxZoom);else new at.ClassTypeError("MapOptions的maxZoom参数","Number",s).warn(),n.maxZoom=J.default.maxZoom;"number"==typeof l?n.minPitch=Math.max(l,J.default.minPitch):(new at.ClassTypeError("MapOptions的minPitch参数","Number",l).warn(),n.minPitch=J.default.minPitch),"number"==typeof u?n.maxPitch=Math.min(u,J.default.maxPitch):(new at.ClassTypeError("MapOptions的maxPitch参数","Number",u).warn(),n.maxPitch=J.default.maxPitch),i._destroyed=!1,i._glContextLost=!1,i.drawContainer=Pt(t)?document.getElementById(t):t,i._uniqueId="map-"+i.drawContainer.id+"_"+It.uniqueId(),i._initContainer();var f=n,d=f.subkey,h=f.subpid;(0,G.checkKey)(i,{subkey:d,subpid:h}),i.subkey=d,i.subpid=h,n.map=i;var v=new T.default(i.canvasContainer,n);i.renderEngine=v,i.drawManager=new yt(v),i.transform=new _t(n,v),i.transform._setEventedParent(i,null),i.controlManager=new C.default(i),i.layerResource=new xt(n,i),i.indoorManager=new et.default({map:i}),i.OverseaManager=new it.default({map:i}),i.fpsManager=new I.default,i.fpsManager.map=i,i.fpsManager.setCallback(i._render.bind(i)),i._shouldKeepHighFps=!1,i._renderCallbackList=[],(0,p.default)(i,H.easableMixin),(0,p.default)(i,Y.animatableMap),It.bindAll(["_onData","_render"],i),i._initListeners(),i.jumpTo({center:n.center,zoom:n.zoom,heading:n.heading||0,pitch:n.pitch||0,scale:n.scale||0}),i.highFpsReferIndex=0;var g=v.getDrawContainer();return i.resize(g.clientWidth,g.clientHeight),i._update(),i.handler=new St(i,{mapZoomType:n.mapZoomType}),i._bubbleMiddleware=new k.default(i,i._checkFeaturePickingType(n)),i.setDraggable(n.draggable),i.setScrollable(n.scrollable),i.setDoubleClickZoom(n.doubleClickZoom),i.setViewMode(n.viewMode),i.setShowControl(n.showControl),i.dragRotate.setRotatable(n.rotatable),i.dragRotate.setPitchable(n.pitchable),i._initControls(),i.enableAreaClip(n.clip),(0,j.minfo)({zoom:n.zoom,pitch:n.pitch,rotation:n.rotation,width:i.transform.width,height:i.transform.height}),(0,j.fps)(i),(0,j.frt)(i,r,bt.isPC()?"pc":"mobile"),(0,j.ds)(i,bt.isLowMobileDevice(),bt.mobileSystem()),i}return(0,E.default)(e,t),(0,x.default)(e,[{key:"_initListeners",value:function(){var t=this;this._on("preload",this._preLoad),this._on("data",this._onData),this._on("data",function(e){"metadata"===e.sourceDataType&&t._update()}),bt.on(this,"layer,transit_end",this._update.bind(this,!1)),this._on("move",bt.debounce(function(){t._update()},10)),this._on("tilesloaded",bt.debounce(function(){t._update()},250)),bt.on(this,"movestart,transit_start",function(){t._changeFPS(Nt)}),bt.on(this,"data,moveend,transit_end",bt.debounce(function(){t._destroyed||t._shouldKeepHighFps||t._changeFPS(6)},3e3)),bt.on(this,"moveend,data_loaded",bt.debounce(function(){t.renderEngine&&t.layerResource&&t.renderEngine.updateLabel(t.layerResource.getDrawLayers()),t.drawManager&&t.drawManager.updateOverlayPlace()},10)),bt.on(this,"moveend,data_loaded",function(){t.drawManager&&t.drawManager.updateOverlayPlace()}),this.on("mapstyle_changed",function(e){var n=e.styleId;t.renderEngine.onMapStyleUpdate(n),t.drawManager.resetGradualPlacement(),t._update()})}},{key:"resetRenderEngine",value:function(){this.renderEngine=new T.default(this.canvasContainer,{})}},{key:"_changeFPS",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt;this.fpsManager.updateFPS(t)}},{key:"keepHighFps",value:function(t){t?this.highFpsReferIndex+=1:this.highFpsReferIndex-=1,this.highFpsReferIndex=Math.max(this.highFpsReferIndex,0),this.highFpsReferIndex<=0?this._shouldKeepHighFps=!1:(this._changeFPS(Nt),this._shouldKeepHighFps=!0)}},{key:"setCenter",value:function(t,e){return this.jumpTo({center:t},e)}},{key:"getCenter",value:function(){return this.transform.center}},{key:"setZoom",value:function(t,e){return this.jumpTo({zoom:t},e),this}},{key:"getZoom",value:function(){return this.transform&&this.transform.zoom}},{key:"setPitch",value:function(t,e){return this._viewMode!==lt.VIEW_MODE.MAP_2D&&this.getPitchable()?(this.jumpTo({pitch:t},e),this):this}},{key:"setMaxZoom",value:function(t,e){var n=this.transform;return isNaN(t)||!Ct(t)?(new at.BaseTypeError("maxZoom","number",t).error(),this):n.maxZoom===+t?this:(+t<n.minZoom||+t>J.default.maxZoom?console.error("无法设置maxZoom,请检查maxZoom值是否大于"+J.default.maxZoom+"，或小于当前minZoom。"):(n.zoom>t&&this.jumpTo({zoom:t},e),n.maxZoom=+t),this)}},{key:"setMinZoom",value:function(t,e){var n=this.transform;return isNaN(t)||!Ct(t)?(new at.BaseTypeError("minZoom","number",t).error(),this):n.minZoom===+t?this:(+t>n.maxZoom||+t<J.default.minZoom?console.error("无法设置minZoom,请检查minZoom值是否小于"+J.default.minZoom+"，或大于当前maxZoom。"):(n.zoom<t&&this.jumpTo({zoom:t},e),n.minZoom=+t),this)}},{key:"setMaxPitch",value:function(t,e){var n=this.transform;return isNaN(t)||!Ct(t)?(new at.BaseTypeError("maxPitch","number",t).error(),this):n.maxPitch===+t?this:(+t>n.maxPitch||+t>J.default.maxPitch?console.error("无法设置maxPitch,请检查maxPitch值是否大于"+J.default.maxPitch+"，或小于当前minPitch。"):(n.pitch>t&&this.jumpTo({pitch:t},e),n.maxPitch=+t),this)}},{key:"getPitch",value:function(){return this.transform.pitch}},{key:"getRoll",value:function(){return this.transform.roll}},{key:"setRoll",value:function(t){this.transform.roll=t}},{key:"setSkyOptions",value:function(t){var e=this.renderEngine;if(e){var n=this.renderEngine.fogPass;n&&(e.skyOptions=t,n._setSkyOptions&&n._setSkyOptions(t||{}))}return this}},{key:"frequentEaseTo",value:function(t){var e=this;if(this._once("moveend",function(){e._easeToStore=null}),!this.moving)return this._easeToStore=t,void this.easeTo(t);(0,d.default)(t).forEach(function(n){e._easeToStore[n]=t[n]}),this.easeTo(this._easeToStore)}},{key:"setPitchable",value:function(t){return Lt(t)?"2D"===this.getViewMode()||t===this.getPitchable()?this:(t?(this.dragRotate.setPitchable(!0),this.touchTilt.enable(),this.controlManager.setViewMode("3D")):(this.frequentEaseTo({pitch:0}),this.dragRotate.setPitchable(!1),this.touchTilt.disable(),this.controlManager.setViewMode("3D")),this):(new at.BaseTypeError("setPitchable参数","Boolean",t).error(),this)}},{key:"getPitchable",value:function(){return this.dragRotate.pitchable}},{key:"setRotatable",value:function(t){return Lt(t)?"2D"===this.getViewMode()||t===this.getRotatable()?this:(t?(this.dragRotate.setRotatable(!0),this.touchZoomRotate.enableRotation(),this.controlManager.setViewMode("3D")):(this.frequentEaseTo({rotation:0}),this.dragRotate.setRotatable(!1),this.touchZoomRotate.disableRotation(),this.controlManager.setViewMode("3D")),this):(new at.BaseTypeError("setRotatable参数","Boolean",t).error(),this)}},{key:"getRotatable",value:function(){return this.dragRotate.rotatable}},{key:"setScale",value:function(t,e){return Ct(t)?t<=0?this:(this.jumpTo({scale:t},e),this):(new at.BaseTypeError("scale","number",t).error(),this)}},{key:"getScale",value:function(){return this.transform.scale}},{key:"setOffset",value:function(t){return Rt(t)&&Ct(t.x)&&Ct(t.y)?(this.renderEngine.camera.setOffset(t),this.emit("offset_changed")):new at.ClassTypeError("Map.offset","Object:{x,y}",t).error(),this}},{key:"getOffset",value:function(){return this.renderEngine.camera.offset}},{key:"setRotation",value:function(t,e){return this._viewMode!==lt.VIEW_MODE.MAP_2D&&this.getRotatable()?(this.jumpTo({heading:360-t},e),this):this}},{key:"getRotation",value:function(){return 360-this.transform.heading}},{key:"getHeading",value:function(){return this.transform.heading}},{key:"getContainer",value:function(){return this.drawContainer}},{key:"getBounds",value:function(){return this.transform&&this.transform.getBounds()}},{key:"getRenderContainer",value:function(){return this.renderEngine.getDrawContainer()}},{key:"setDraggable",value:function(t){var e=t?"enable":"disable";return this.dragPan[e](),this.dragRotate[e](),this.longPress[e](),this.draggable=!!t,this}},{key:"getDraggable",value:function(){return this.draggable}},{key:"setScrollable",value:function(t){var e=t?"enable":"disable";return this.scrollZoom[e](),this}},{key:"getScrollable",value:function(){return this.scrollZoom.isEnabled()}},{key:"setDoubleClickZoom",value:function(t){var e=t?"enable":"disable";return this.doubleClickZoom[e](),this}},{key:"getDoubleClickZoom",value:function(){return this.doubleClickZoom.isEnabled()}},{key:"setBoundary",value:function(t){return this.transform.boundary=t,this._update(),this}},{key:"getBoundary",value:function(){return this.transform.boundary}},{key:"getIndoorManager",value:function(){return this.indoorManager}},{key:"getLightManager",value:function(){return this.renderEngine.lightManager}},{key:"setViewMode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt.VIEW_MODE.MAP_3D,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t=String(t).toUpperCase(),this._viewMode===t)return this;switch(t){case lt.VIEW_MODE.MAP_2D:this.easeTo({pitch:0,heading:0,roll:0},e),this.dragRotate.disable(),this.touchZoomRotate.disableRotation(),this.touchTilt.disable();break;default:if(new at.EnumError("viewMode",[lt.VIEW_MODE.MAP_2D,lt.VIEW_MODE.MAP_3D,lt.VIEW_MODE.SPHERE],t).error(),!kt(this.getViewMode()))return this;t=lt.VIEW_MODE.MAP_3D;case lt.VIEW_MODE.SPHERE:case lt.VIEW_MODE.MAP_3D:this.draggable&&(this.dragRotate.enable(),this.touchZoomRotate.enableRotation(),this.touchTilt.enable())}return this.controlManager.setViewMode(t),this.transform.transitTo(t,e),this._viewMode=t,this}},{key:"getViewMode",value:function(){return this._viewMode}},{key:"getBaseMap",value:function(){return this.layerResource.baseMap}},{key:"setBaseMap",value:function(t){this.layerResource.baseMap=t;var e=this.getControl(Bt);return e&&e.updateMapAppNum(this.layerResource.hasSatellite()),this}},{key:"setMapStyleId",value:function(t){return t&&Pt(t)?this.layerResource.setMapStyleId(t):console.error("传入的mapStyleId有误："+t),this}},{key:"setMapStyleConfig",value:function(t){return Rt(t)?"{}"===(0,c.default)(t)?(console.error("setMapStyleConfig传入的参数为空对象"),this):(this.layerResource.setMapStyleConfig(t),this):(new at.BaseTypeError("StyleConfig","object",t).error(),this)}},{key:"getShowControl",value:function(){return this._showControl}},{key:"setShowControl",value:function(t){this._showControl=t}},{key:"getControl",value:function(t){return this.controlManager.getControl(t)}},{key:"removeControl",value:function(t){return this.controlManager.removeControl(t),this}},{key:"addControl",value:function(t){return this.controlManager.addControl(t),this}},{key:"panTo",value:function(t,e,n){return this.easeTo({center:t},e,n)}},{key:"panBy",value:function(t,e,n){return t=Mt.convert(t).mult(-1),this.panTo(this.transform.center,It.extend({offset:t},e),n)}},{key:"flyTo",value:function(){}},{key:"zoomBy",value:function(t,e,n){var i=this.getZoom()+t,r=this.transform;i=Math.max(Math.min(i,r.maxZoom),r.minZoom),this.zoomTo(i,e,n)}},{key:"zoomTo",value:function(t,e,n){return this.easeTo({zoom:t},e,n)}},{key:"rotateTo",value:function(t,e,n){return this.easeTo({rotation:t},e,n)}},{key:"headTo",value:function(t,e,n){return this.easeTo({heading:t},e,n)}},{key:"pitchTo",value:function(t,e){return this.easeTo({pitch:t},e)}},{key:"naviTo",value:function(t,e,n,i){return this.easeTo({heading:e,center:t},It.extend({isMatrix:!1},n),i)}},{key:"jumpTo",value:function(t,e){this.stopMoving();var n=this.transform,i=!1,r=!1,a=!1,o=!1,s=!1;return"zoom"in t&&n.zoom!==+t.zoom&&((0,l.default)(+t.zoom)?new at.BaseTypeError("zoom","number",t.zoom).error():(i=!0,n.zoom=+t.zoom)),"center"in t&&(n.center=At.convert(t.center),o=!0),"heading"in t&&n.heading!==+t.heading&&(r=!0,n.heading=+t.heading),"pitch"in t&&n.pitch!==+t.pitch&&(a=!0,n.pitch=+t.pitch),"roll"in t&&n.roll!==+t.roll&&(s=!0,n.roll=+t.roll),"scale"in t&&n.scale!==t.scale&&(n.scale=t.scale),this._fire("movestart",e)._fire("move",e),i&&this._fire("zoomstart",e)._fire("zoom",e)._fire("zoomend",e),r&&this._fire("rotate",e),a&&this._fire("pitchstart",e)._fire("pitch",e)._fire("pitchend",e),s&&this._fire("rollstart",e)._fire("roll",e)._fire("rollend",e),o&&this._fire("panstart",e)._fire("pan",e)._fire("panend",e),this._fire("moveend",e)}},{key:"easeTo",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2];this.stopMoving(),n=It.extend({offset:[0,0],duration:500,easing:It.ease},n),!1===n.animate&&(n.duration=0);var r=this.transform,a=this.getZoom(),o=this.getHeading(),s=this.getPitch(),l=this.getRoll(),u=this.getCenter(),c=a,f=o,d=s,h=l;Ct(t.zoom)?c=t.zoom:kt(t.zoom)||new at.BaseTypeError("mapStatus.zoom","number",t.zoom).error(),Ct(t.rotation)?f=this._normalizeHeading(360-t.rotation,o):kt(t.rotation)||new at.BaseTypeError("mapStatus.rotation","number",t.rotation).error(),Ct(t.heading)&&(f=this._normalizeHeading(t.heading,o)),Ct(t.pitch)?d=t.pitch:kt(t.pitch)||new at.BaseTypeError("mapStatus.pitch","number",t.pitch).error(),Ct(t.roll)?h=t.roll:kt(t.roll)||new at.BaseTypeError("mapStatus.roll","number",t.roll).error();var p=null,v=null;n.around&&(p=n.around,v=this.projectToContainer(p));var m=this.projectToContainer(u),g=Mt.convert(n.offset),_=At.convert(t.center||u);this._normalizeCenter(_);var y=r.latLngToCoord(u),x=r.latLngToCoord(_),b=x.sub(y),S=r.zoomScale(c-a);return this.zooming=c!==a&&c<=r.maxZoom&&c>=r.minZoom,this.rotating=o!==f,this.pitching=d!==s,this.panning=0!==b.add(g).length(),this.rolling=l!==h,this._viewMode===lt.VIEW_MODE.MAP_2D&&(this.rotating=!1,this.pitching=!1,this.rolling=!1),this.zooming+this.rotating+this.pitching+this.rolling+this.panning?(this._prepareMoving(i,n.noMoveStart),clearTimeout(this._onEaseEnd),this._ease(function(t){if(this.zooming&&(r.zoom=(0,X.default)(a,c,t)),this.rotating&&(r.heading=(0,X.default)(o,f,t)),this.pitching&&(r.pitch=(0,X.default)(s,d,t)),this.rolling&&(r.roll=(0,X.default)(l,h,t)),n.around)r.setLocationAtPoint(p,v);else{var e=r.zoomScale(r.zoom-a),u=c>a?Math.min(2,S):Math.max(.5,S),_=Math.pow(u,1-t),x=b.mult(t*_),w=m.add(g.mult(t*_)),E=r.coordToLatLng(y.add(x).mult(e),r.zoom);r.setLocationAtPoint(E,w)}this._fireMoveEvents(i)},function(){n.delayEndEvents?e._onEaseEnd=setTimeout(function(){return e._moveToEnd(i)},n.delayEndEvents):e._moveToEnd(i)},function(){e._moveToEnd(i,!0)},n),this):this}},{key:"getNonStopRotate",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments[1];if(!this.rotateTickTimer){this.rotating=!0;var i=this.transform;this.rotateTickTimer=function(r){t.isRotateAnimationRunning&&(-1===r?i.heading-=.8*e:i.heading+=.8*e,bt.frame(t.rotateTickTimer.bind(t,r)),t._fireMoveEvents(n))}}return{begin:function(e){t._prepareMoving(n),t.rotating=!0,t.isRotateAnimationRunning=!0,t.rotateTickTimer(e)},cancel:function(){t.isRotateAnimationRunning&&(t._moveToEnd(n),t.isRotateAnimationRunning=!1)}}}},{key:"getNonStopPitch",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments[1];if(!this.pitchTickTimer){this.pitching=!0;var i=this.transform;this.pitchTickTimer=function(r){t.isPitchAnimationRunning&&(-1===r?i.pitch-=.8*e:i.pitch+=.8*e,bt.frame(t.pitchTickTimer.bind(t,r)),t._fireMoveEvents(n))}}return{begin:function(e){t._prepareMoving(n),t.isPitchAnimationRunning=!0,t.pitching=!0,t.pitchTickTimer(e)},cancel:function(){t.isPitchAnimationRunning&&(t.pitching=!1,t._moveToEnd(n),t.isPitchAnimationRunning=!1)}}}},{key:"_prepareMoving",value:function(t,e){this.moving=!0,e||(this._fire("movestart",t),this.zooming&&this._fire("zoomstart",t),this.rotating&&this._fire("rotatestart",t),this.pitching&&this._fire("pitchstart",t),this.panning&&this._fire("panstart",t))}},{key:"_fireMoveEvents",value:function(t){this._fire("move",t),this.zooming&&this._fire("zoom",t),this.rotating&&this._fire("rotate",t),this.pitching&&this._fire("pitch",t),this.panning&&this._fire("pan",t)}},{key:"_moveToEnd",value:function(t,e){var n=this.zooming,i=this.rotating,r=this.pitching,a=this.panning;this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,this.panning=!1,n&&this._fire(e?"zoomcancel":"zoomend",t),i&&this._fire(e?"rotatecancel":"rotateend",t),r&&this._fire(e?"pitchcancel":"pitchend",t),a&&this._fire(e?"pancancel":"panend",t),this._fire(e?"movecancel":"moveend",t)}},{key:"resetNorth",value:function(t,e){return this.rotateTo(0,It.extend({duration:1e3},t),e),this}},{key:"snapToNorth",value:function(t,e){return Math.abs(this.getHeading())<7?this.resetNorth(t,e):this}},{key:"fitBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(t&&t instanceof Tt))return new at.ClassTypeError("Map.fitBounds的bounds参数","LatLngBounds",t).error(),this;var n=e.minZoom,i=void 0===n?this.transform.minZoom:n,r=e.maxZoom,a=void 0===r?this.transform.maxZoom:r,o=e.animate,s=void 0===o||o,l=e.ease,u=void 0;if(Ct(e.padding)){var c=e.padding;u={top:c,bottom:c,right:c,left:c}}else u=(0,p.default)({top:0,bottom:0,right:0,left:0},e.padding);if(!It.deepEqual((0,d.default)(u).sort(function(t,e){return t<e?-1:t>e?1:0}),["bottom","left","right","top"]))return void It.warnOnce("FitBoundsOptions.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'");t=Tt.convert(t);var f=u,h=f.top,v=f.bottom,m=f.left,g=f.right,_=[(m-g)/2,(h-v)/2],y=Mt.convert(_),x=this.transform,b=x.latLngToCoord(t.getNorthWest()),S=x.latLngToCoord(t.getSouthEast()),w=x._minZoom,E=x.coordToLatLng(b.add(S).div(2));if(0===x.pitch){var A=S.sub(b),T=(x.width-g-m)/A.x,M=(x.height-h-v)/A.y;if(M<0||T<0)return It.warnOnce("传入参数无效导致map无法进行fitBounds操作"),this;w=x.scaleZoom(x.scrollScale*Math.min(T,M))}else w=this._getZoomByBounds(t,{padding:u});w=Math.max(Math.min(w,a),i);var I={center:E,zoom:w,heading:0};return s?this.easeTo(I,(0,p.default)({offset:y},l)):this.jumpTo(I),this}},{key:"_getZoomByBounds",value:function(t,e){var n=e.padding,i=n.top,r=n.bottom,a=n.left,o=n.right,s=[(a-o)/2,(i-r)/2],l=Mt.convert(s),u=this.transform,c=u._minZoom,f=u._maxZoom,d=u._minPitch,h=u._maxPitch,p=u._fov,v=u.width,m=u.height,g=u.zoom,_=u.tileZoom,y=u._center,x=u._pitch,b=u._roll,S=u._scale,w=u.viewTransition,E=u._boundary,A={minZoom:c,maxZoom:f,minPitch:d,maxPitch:h,fov:p,width:v,height:m,zoom:g,tileZoom:_,center:y,pitch:x,roll:b,scale:S,viewTransition:w,boundary:E,heading:0},T=x/Math.PI*180,M=b/Math.PI*180;this.renderEngine.camera.setRotate(T,0,M);var I=new _t(A,this.renderEngine),P=c,k=c,L=f,C=!1,R=this._getCenterByBounds(t),D={x:v/2,y:m/2};for(D.x=D.x+l.x,D.y=D.y+l.y;L-k>.001;){P=(k+L)/2,I.zoom=P,I.setLocationAtPoint(R,D);var N=I.latLngToScreen(t.getNorthWest()),B=I.latLngToScreen(t.getSouthEast()),O=I.latLngToScreen(t.getSouthWest()),F=I.latLngToScreen(t.getNorthEast()),z=Math.min.apply(null,[N.x,B.x,O.x,F.x]),V=Math.max.apply(null,[N.x,B.x,O.x,F.x]),U=Math.min.apply(null,[N.y,B.y,O.y,F.y]),G=Math.max.apply(null,[N.y,B.y,O.y,F.y]);z>a&&U>i&&V<v-o&&G<m-r?(C=!0,k=P):(L=P,C=!1)}return C||(P=k),P}},{key:"_getCenterByBounds",value:function(t){var e=this.transform,n=e.latLngToCoord(t.getNorthWest()),i=e.latLngToCoord(t.getSouthEast());return e.coordToLatLng(n.add(i).div(2))}},{key:"getZoomByBounds",value:function(t){var e=this.transform,n=e.latLngToCoord(t.getNorthWest()),i=e.latLngToCoord(t.getSouthEast()),r=i.sub(n),a=e.width/r.x,o=e.height/r.y;return o<0||a<0?void It.warnOnce("bounds error!"):Math.min(e.scaleZoom(e.scrollScale*Math.min(a,o)),e.maxZoom)}},{key:"stopMoving",value:function(){return this.stopEase(),this.stopAnimation(),this}},{key:"stopEase",value:function(){return this._abortFn&&(this._abortFn(),this._finishEase()),this}},{key:"getSource",value:function(t){return this.layerResource.getSource(t)}},{key:"addSource",value:function(t,e){this.layerResource.addSource(t,e)}},{key:"removeSource",value:function(t){this.layerResource.removeSource(t)}},{key:"addLayer",value:function(t){this.layerResource.addLayer(t)}},{key:"removeLayer",value:function(t){this.layerResource.removeLayer(t)}},{key:"moveLayer",value:function(t,e){return this.layerResource.moveLayer(t,e),this}},{key:"getLayer",value:function(t){return this.layerResource.getLayer(t)}},{key:"findLayer",value:function(t){return this.layerResource.findLayer(t)}},{key:"addVisualPlugin",value:function(t){this.layerResource.addVisualPlugin(t),this._update()}},{key:"removeVisualPlugin",value:function(t){this.layerResource.removeVisualPlugin(t),this._update()}},{key:"indoorStateChange",value:function(t,e){this.layerResource.updateIndoorData(t,e)}},{key:"unprojectFromContainer",value:function(t){return t instanceof Mt?this.transform.screenToLatLng(t):t&&t.x&&t.y?this.transform.screenToLatLng(new Mt(t.x,t.y)):(new at.ClassTypeError("Map.unprojectFromContainer的point参数","Point",t).error(),null)}},{key:"projectToContainer",value:function(t){if(t instanceof At){var e=this.transform.latLngToScreen(t);return new Mt(e.x,e.y)}return new at.ClassTypeError("Map.projectToContainer的latLng参数","LatLng",t).error(),null}},{key:"projectToCenterLocalPlane",value:function(t){if(t instanceof At){return this.transform.latLngToCenterLocalPixel(t)}return new at.ClassTypeError("Map.projectToCenterLocalPlane的latLng参数","LatLng",t).error(),null}},{key:"projectToWorldPlane",value:function(t,e){if(t instanceof At){return this.transform.latLngToCoord(t,e)}return new at.ClassTypeError("Map.projectToWorldPlane的latLng参数","LatLng",t).error(),null}},{key:"glLatLngToPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;if(t instanceof At){var n=this.transform.latLngToCoord(t,e);return n.y*=-1,n}return new at.ClassTypeError("Map.projectToWorldPlane的latLng参数","LatLng",t).error(),null}},{key:"getCamera",value:function(){return this.renderEngine.camera}},{key:"_getSpatialResolution",value:function(t,e){t=t||this.getZoom();var n=(e||this.getCenter().getLat())*Math.PI/180;return(0,rt.getSpatialResolution)(t)*Math.cos(n)/this.getScale()}},{key:"_onData",value:function(){this.drawManager.updatePlace(),this._rerender()}},{key:"_preLoad",value:function(){this.layerResource._sources.vector_source.preload(this.transform)}},{key:"_normalizeHeading",value:function(t,e){t=It.wrap(t,-180,180);var n=Math.abs(t-e);return Math.abs(t-360-e)<n&&(t-=360),Math.abs(t+360-e)<n&&(t+=360),t}},{key:"_normalizeCenter",value:function(t){var e=this.transform,n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}},{key:"_rerender",value:function(){this._changeFPS(Nt),this.fpsManager.start()}},{key:"_render",value:function(){var t=this.getRenderContainer();this.resize(t.clientWidth,t.clientHeight);var e=this.drawManager.render(this.layerResource,this.transform);this._bubbleMiddleware&&this._bubbleMiddleware.runPick(),this.emit("data_render"),e&&this._rerender(),this._renderCallbackList.forEach(function(t){return t&&t()})}},{key:"addRenderCallback",value:function(t){this._renderCallbackList.push(t)}},{key:"removeRenderCallback",value:function(t){var e=this._renderCallbackList.indexOf(t);this._renderCallbackList.splice(e,1)}},{key:"resize",value:function(t,e){t&&e&&(t===this.width&&e===this.height||(this.width=t,this.height=e,this.transform.resize(t,e),this.drawManager.resize(t,e),this._update(),this._frameId=null,this._fire("resize",{width:t,height:e},!0)))}},{key:"isNeedCollisionWithVectorBaseMap",value:function(){if(!this.layerResource)return!1;var t=this.layerResource.getDrawLayers();return!!Array.isArray(t)&&t.some(function(t){if(t.type===gt.RENDER_LAYER_TYPE.marker||t.type===gt.RENDER_LAYER_TYPE.label)return t._collisionOptions.vectorBaseMapSource})}},{key:"_update",value:function(){this._destroyed||this._glContextLost||(this.layerResource._updateSource(this.transform,this.renderEngine.camera,{causedBy:"move"}),this.isNeedCollisionWithVectorBaseMap()&&this.drawManager&&this.drawManager.updateOverlayPlace(),this.drawManager&&this.drawManager.updatePlace(),this._rerender())}},{key:"_initContainer",value:function(){this.drawContainer.style.webkitTapHighlightColor="rgba(0,0,0,0)","static"===getComputedStyle(this.drawContainer).getPropertyValue("position")&&(this.drawContainer.style.position="relative");var t=document.createElement("canvas");t.style.cssText="width:100%; height: 100%;";var e=r();this.drawContainer.appendChild(t),this.drawContainer.appendChild(e.root),this.canvasContainer=t,this._overlayer=e}},{key:"_initControls",value:function(){var t=this;if((0,G.checkKey)(this).then(function(e){if(e||$.default.isLocal||t.addControl(new N.default({position:R.CONTROL_POSITION.CENTER})),e&&e.black_marker){1&e.black_marker.enable&&(0,q.default)(t)}}),this.addControl(new wt({id:Bt,position:R.CONTROL_POSITION.BOTTOM_LEFT,hasSatellite:this.layerResource.hasSatellite()})),this.lgId=Bt,!1===this._showControl)return this;this.addControl(new O.default({id:R.DEFAULT_CONTROL_ID.SCALE,position:R.CONTROL_POSITION.BOTTOM_LEFT,center:this.getCenter(),zoom:this.getZoom(),scale:this.getScale()})),this.addControl(new z.default({id:R.DEFAULT_CONTROL_ID.ZOOM,position:R.CONTROL_POSITION.TOP_RIGHT})),this.addControl(new U.default({id:R.DEFAULT_CONTROL_ID.ROTATION,position:R.CONTROL_POSITION.TOP_RIGHT}))}},{key:"_onContextError",value:function(t){"restored"===t?(this._rerender(),this._glContextLost=!1,(0,j.err)({type:"ctx",code:1}),this._fire("context_restored")):(this.stop(),this._glContextLost=!0,(0,j.err)({type:"ctx",code:0}),this._fire("context_lost"))}},{key:"enableAreaHighlight",value:function(t){var e=t.layerId||"$tmap_highlight",n=this.getLayer(e);if(n||(n=new ft.default({id:e,map:this,geometries:[]})),t){var i=t.paths,r=void 0===i?[]:i,a=t.highlightColor,o=t.shadeColor;n.update([{id:"highlight",paths:r}],{highlightColor:a,shadeColor:o})}return n.setVisible(!0),this}},{key:"disableAreaHighlight",value:function(t){var e=t&&t.layerId||"$tmap_highlight",n=this.getLayer(e);return n?(n.setVisible(!1),this):this}},{key:"enableAreaClip",value:function(t){if(t&&t.paths&&this._checkMaskPaths(t.paths)){t.layerId="$tmap_clip_highlight",t.shadeColor=this.renderEngine.getBgColor(),this.enableAreaHighlight(t),this.moveLayer("$tmap_clip_highlight",pt.LAYER_LEVEL.OVERLAY_AA);var e=this.getLayer("$tmap_clip_clip");e||(e=new ht.default({map:this,id:"$tmap_clip_clip",geometries:[],isMaskReverse:!0})),e.add([{id:"$tmap_clip_clip",paths:t.paths}]),this.clipOptions=t,this.on("bgcolor_change",this._updateClipBgColor)}}},{key:"disableAreaClip",value:function(){this.disableAreaHighlight({layerId:"$tmap_clip_highlight"}),this.removeLayer("$tmap_clip_clip"),this.removeSource("$tmap_clip_clip"),this.off("bgcolor_change",this._updateClipBgColor)}},{key:"_updateClipBgColor",value:function(t){this.enableAreaHighlight((0,o.default)({},this.clipOptions,{shadeColor:t})),this.moveLayer("$tmap_clip_highlight",pt.LAYER_LEVEL.OVERLAY_AA)}},{key:"_checkMaskPaths",value:function(t){if(!Array.isArray(t))return!1;var e=!0;return t.forEach(function(t,n){st.default.isValidLatLng(t)||(e=!1,console.error("areaClip.paths: 希望传入Geometry数组，实际第"+n+"元素非latlng格式！"))}),e}},{key:"_checkFeaturePickingType",value:function(t){var e=t.enableFeaturePicking,n=t.featurePickingRadius,i=e,r=n;return e?(isNaN(n)||!Ct(n)?(new at.BaseTypeError("featurePickingRadius","number",n).error(),r=null):n<=0&&(r=null),Lt(e)||(new at.BaseTypeError("enableFeaturePicking","Boolean",e).error(),i=!1),{featurePicking:i,pickingRadius:r}):{}}},{key:"stop",value:function(){this.fpsManager.stop()}},{key:"destroy",value:function(){this._destroyed||(this.emit("destroy"),this.stopMoving(),(0,G.revokeKeyCheck)(this.id),this.controlManager.destroy(),this.handler.destroy(),this.fpsManager.destroy(),this.layerResource.destroy(),this._bubbleMiddleware.destroy(),this.renderEngine.destroy(),this.drawManager.destroy(),this.indoorManager=null,this.fpsManager=null,this.handler=null,this.layerResource=null,this._bubbleMiddleware=null,this.renderEngine=null,this.drawManager=null,this.transform=null,this._clearAllListeners(),this.drawContainer.innerHTML="",this.canvasContainer.width=1,this.canvasContainer.height=1,this.canvasContainer=null,this._overlayer.domOverlayCollision.destroy(),this._overlayer=null,this.drawContainer=null,this.isPitchAnimationRunning=null,this.isRotateAnimationRunning=null,this.pitchTickTimer=null,this.rotateTickTimer=null,this._destroyed=!0)}},{key:"_getPoiInfo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.drawManager.getPoi(t);if(e){e.latLng=this.unprojectFromContainer(e.coord);var n=Math.round(this.getZoom())>=J.default.minShowIndoorZoom&&this.indoorManager.getVisible()&&this.indoorManager.getIndoorBuildingList().length;if(!e.isIndoor&&n)for(var i=this.indoorManager.getIndoorBuildingList(),r=0;r<i.length;r++){var a=i[r],o=a.getBuildingInfo();if(o&&o.bounds.contains(e.latLng)){e=null;break}}}return e}},{key:"_getDomOverlayCollision",value:function(){return this._overlayer&&this._overlayer.domOverlayCollision}},{key:"id",get:function(){return this._uniqueId}}]),e}(Et);e.default=Ot},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(){return{state:0,transition:function(t){var e="overlay"===t;switch(this.state){case 0:this.state=e?1:0;break;case 1:this.state=e?1:2;break;case 2:this.state=e?1:0}}}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(15),o=i(a),s=n(3),l=i(s),u=n(0),c=i(u),f=n(1),d=i(f),h=n(5),p=i(h),v=n(32),m=i(v),g=n(4),_=i(g),y=n(10),x=i(y),b=n(532),S=i(b),w=n(28),E=i(w),A=n(512),T=i(A),M=n(214),I=i(M),P=n(29),k=n(36),L=i(k),C=n(44),R=n(121),D=function(t){function e(t){(0,c.default)(this,e);var n=(0,p.default)(this,(e.__proto__||(0,l.default)(e)).call(this));return t.geometries=t.geometries||[],n.id=t.id||x.default.uniqueId(),n.zIndex=t.zIndex>=0?t.zIndex:0,n.styles=t.styles||{},n.minZoom=t.minZoom,n.maxZoom=t.maxZoom,n._setGeometryType(),n._checkGeometries(t.geometries,n.styles),n._rawGeometries=n._assignIdToGeometry(t.geometries),n._idSet=n._updateGeometryIdSet(n._rawGeometries),n.geometries=n._transferFromGeometry(n._rawGeometries),n._checkStyles(n.styles),n._initialize(t),n._bubbleHandler=[],n._lastestOverlayMouseMoveObj=null,n._mousemoveFSM=r(),t.map&&n.setMap(t.map),(0,C.statCn)(n._className),n}return(0,_.default)(e,t),(0,d.default)(e,[{key:"_initialize",value:function(){}},{key:"_emitGeoEvent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.emit(t,(0,o.default)({},n,{geometry:e,type:t,target:this}))}},{key:"_bindBubbleHandler",value:function(){var t=this;this._bubbleHandler.push(E.default.on(this.map._bubbleMiddleware,"mousemove",function(e){2===t._mousemoveFSM.state&&(t._lastestOverlayMouseMoveObj=null,t._emitGeoEvent("mouseout",null,e),t._emitGeoEvent("hover",null,e)),t._mousemoveFSM.transition.call(t._mousemoveFSM,"map")})),this._bubbleHandler.push(E.default.on(this.map._bubbleMiddleware,"action",function(e){if(e&&e.layerId===t.id){var n=t.geometries[e.objectIndex],i=e.eventType;t._emitGeoEvent(i,n,e.mapEvent),"mousemove"===e.eventType&&(t._mousemoveFSM.transition.call(t._mousemoveFSM,"overlay"),t._lastestOverlayMouseMoveObj?n!==t._lastestOverlayMouseMoveObj&&t._emitGeoEvent("hover",n,e.mapEvent):(t._emitGeoEvent("mouseover",n,e.mapEvent),t._emitGeoEvent("hover",n,e.mapEvent)),t._lastestOverlayMouseMoveObj=n)}})),this._bubbleHandler.push(E.default.on(this.map,"destroy",function(){t.setMap(null)}))}},{key:"_removeBubbleHander",value:function(){this._bubbleHandler.forEach(function(t){t&&t.remove&&t.remove()})}},{key:"_setGeometryType",value:function(){}},{key:"_createLayer",value:function(){this.layer=new T.default({map:this.map,id:this.id,type:this._layerType,zIndex:this.zIndex,minZoom:this.minZoom,maxZoom:this.maxZoom,sourceData:this._getRenderSourceData()})}},{key:"_removeLayer",value:function(){this.layer&&this.layer.setMap(null)}},{key:"setVisible",value:function(t){return t=Boolean(t),this.layer&&this.layer.setVisible(t),this}},{key:"setMap",value:function(t){return null===t||t instanceof window.TMap.Map?t===this.map?this:(t?this.map?(this.setMap(null),this.setMap(t)):this.id&&t.getLayer(this.id)?console.error("Map中已存在id为"+this.id+"的图层，无法重复添加"):(this.map=t,this._bindBubbleHandler(),this._createLayer()):(this._removeBubbleHander(),this._removeLayer(),this.map=null),this):(console.error("所传入参数并非TMap.Map的实例！"),this)}},{key:"setGeometries",value:function(t){return Array.isArray(t)?t===this._rawGeometries?this:((0,m.default)(e.prototype.__proto__||(0,l.default)(e.prototype),"setGeometries",this).call(this,t,this.styles),this.map&&this.map.getSource(this.id).setData(this._getRenderSourceData()),this):(new P.BaseTypeError("geometries","Array",t).error(),this)}},{key:"setStyles",value:function(t){return t?(t.hasOwnProperty||new P.BaseTypeError("styles","Object",t).error(),this._checkStyles(t),t===this.styles?this:(this.styles=t,this.map&&this.map.getSource(this.id).setData(this._getRenderSourceData()),this)):this}},{key:"setZIndex",value:function(t){return L.default.isNumber(t)?t<0?(console.error("zIndex希望设置为非负数,实际值为: "+t),this):(this.layer&&this.layer.setZIndex(t),this.zIndex=t,this):(new P.BaseTypeError("zIndex","Number",t).error(),this)}},{key:"getMap",value:function(){return this.map}},{key:"getVisible",value:function(){return this.layer&&this.layer.visible}},{key:"getStyles",value:function(){return(0,o.default)({},this.styles)}},{key:"getZIndex",value:function(){return this.zIndex}},{key:"updateGeometries",value:function(t,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t?((0,m.default)(e.prototype.__proto__||(0,l.default)(e.prototype),"updateGeometries",this).call(this,t,n,i),this.map&&this.map.getSource(this.id).setData(this._getRenderSourceData()),this):this}},{key:"add",value:function(t){return(0,m.default)(e.prototype.__proto__||(0,l.default)(e.prototype),"add",this).call(this,t)}},{key:"remove",value:function(t){return(0,m.default)(e.prototype.__proto__||(0,l.default)(e.prototype),"remove",this).call(this,t)}},{key:"destroy",value:function(){(0,m.default)(e.prototype.__proto__||(0,l.default)(e.prototype),"destroy",this).call(this),this.removeAllListeners(),this.setMap(null),this.styles=null,this.id=null,this.zIndex=null,this.minZoom=null,this.maxZoom=null}},{key:"getGeometryType",value:function(){return this._geometryType}},{key:"snap",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=arguments[2];this._snapTargets||(this._updateSnapTargets(),this.on("geometry_changed",this._updateSnapTargets.bind(this)));var i=null;return i=this._snapToPoints(t,e,n),i||(i=this._snapToSegments(t,e,n)),i}},{key:"_snapToPoints",value:function(t,e,n){var i=this._snapTargets.points,r=this.map;n&&!n.isEmpty()&&(i=i.filter(function(t){return n.contains(t)}));var a=r.projectToContainer(t),o=null,s=1/0;return i.forEach(function(t){var n=r.projectToContainer(t),i=a.dist(n);i<e&&i<s&&(o=t,s=i)}),o?{latLng:o,dist:s}:null}},{key:"_snapToSegments",value:function(t,e,n){var i=this._snapTargets.segments,r=this.map;n&&!n.isEmpty()&&(i=i.filter(function(t){var e=new I.default;return e.extend(t[0]),e.extend(t[1]),n.intersects(e)}));for(var a=r.projectToContainer(t),o=null,s=1/0,l=0;l<i.length;l++){var u=i[l],c=r.projectToContainer(u[0]),f=r.projectToContainer(u[1]),d=f.sub(c),h=a.sub(c),p=h.dot(d)/d.lengthSq();if(p>0&&p<1){var v=d.mult(p),m=h.sub(v),g=m.length();g<e&&g<s&&(o=r.unprojectFromContainer(c.add(v)),s=g)}}return o?{latLng:o,dist:s}:null}},{key:"_updateSnapTargets",value:function(){this._snapTargets={points:this._getAllPoints(),segments:this._getAllSegments()}}},{key:"_getAllPoints",value:function(){return[]}},{key:"_getAllSegments",value:function(){return[]}},{key:"_getRenderableGeometries",value:function(){var t=this;return this.geometries.filter(function(e){return e&&t.styles}).map(function(e){var n=(0,o.default)({},e);return t.styles[e.styleId]||(n.styleId="default"),n})}},{key:"_getRenderSourceData",value:function(){return{type:this._geometryType,styles:this.styles,geometries:this._getRenderableGeometries()}}},{key:"_checkStyles",value:function(t){t.default||(t.default=this._getDefaultStyle())}}]),e}(S.default);e.default=D,D.LatLngBoundsToBoundingBox=function(t){var e=t.getNorthEast(),n=t.getSouthWest(),i=new TMap.LatLng((e.lat+n.lat)/2,(e.lng+n.lng)/2),r=(0,R.latLngToMercator)(e),a=(0,R.latLngToMercator)(n),o=r.x-a.x,s=r.y-a.y;return i.height=((e.height||0)+(0|n.height))/2,{center:i,width:o,height:s}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.MAP_ZOOM_TYPE={DEFAULT:0,CENTER:1}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(216),v=i(p),m=function(t){function e(t){(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t));return n.textureShader=!0,n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"afterDraw",value:function(){this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,null)}}]),e}(v.default);e.default=m},function(t,e,n){t.exports={default:n(433),__esModule:!0}},function(t,e,n){var i=function(){return this}()||Function("return this")(),r=i.regeneratorRuntime&&Object.getOwnPropertyNames(i).indexOf("regeneratorRuntime")>=0,a=r&&i.regeneratorRuntime;if(i.regeneratorRuntime=void 0,t.exports=n(316),r)i.regeneratorRuntime=a;else try{delete i.regeneratorRuntime}catch(t){i.regeneratorRuntime=void 0}},function(t,e){!function(e){"use strict";function n(t,e,n,i){var a=e&&e.prototype instanceof r?e:r,o=Object.create(a.prototype),s=new h(i||[]);return o._invoke=u(t,n,s),o}function i(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function r(){}function a(){}function o(){}function s(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function l(t){function e(n,r,a,o){var s=i(t[n],t,r);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==typeof u&&_.call(u,"__await")?Promise.resolve(u.__await).then(function(t){e("next",t,a,o)},function(t){e("throw",t,a,o)}):Promise.resolve(u).then(function(t){l.value=t,a(l)},o)}o(s.arg)}function n(t,n){function i(){return new Promise(function(i,r){e(t,n,i,r)})}return r=r?r.then(i,i):i()}var r;this._invoke=n}function u(t,e,n){var r=A;return function(a,o){if(r===M)throw new Error("Generator is already running");if(r===I){if("throw"===a)throw o;return v()}for(n.method=a,n.arg=o;;){var s=n.delegate;if(s){var l=c(s,n);if(l){if(l===P)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===A)throw r=I,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=M;var u=i(t,e,n);if("normal"===u.type){if(r=n.done?I:T,u.arg===P)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=I,n.method="throw",n.arg=u.arg)}}}function c(t,e){var n=t.iterator[e.method];if(n===m){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=m,c(t,e),"throw"===e.method))return P;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return P}var r=i(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,P;var a=r.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=m),e.delegate=null,P):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,P)}function f(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function d(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function h(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(f,this),this.reset(!0)}function p(t){if(t){var e=t[x];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(_.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=m,e.done=!0,e};return i.next=i}}return{next:v}}function v(){return{value:m,done:!0}}var m,g=Object.prototype,_=g.hasOwnProperty,y="function"==typeof Symbol?Symbol:{},x=y.iterator||"@@iterator",b=y.asyncIterator||"@@asyncIterator",S=y.toStringTag||"@@toStringTag",w="object"==typeof t,E=e.regeneratorRuntime;if(E)return void(w&&(t.exports=E));E=e.regeneratorRuntime=w?t.exports:{},E.wrap=n;var A="suspendedStart",T="suspendedYield",M="executing",I="completed",P={},k={};k[x]=function(){return this};var L=Object.getPrototypeOf,C=L&&L(L(p([])));C&&C!==g&&_.call(C,x)&&(k=C);var R=o.prototype=r.prototype=Object.create(k);a.prototype=R.constructor=o,o.constructor=a,o[S]=a.displayName="GeneratorFunction",E.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===a||"GeneratorFunction"===(e.displayName||e.name))},E.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,S in t||(t[S]="GeneratorFunction")),t.prototype=Object.create(R),t},E.awrap=function(t){return{__await:t}},s(l.prototype),l.prototype[b]=function(){return this},E.AsyncIterator=l,E.async=function(t,e,i,r){var a=new l(n(t,e,i,r));return E.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},s(R),R[S]="Generator",R[x]=function(){return this},R.toString=function(){return"[object Generator]"},E.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},E.values=p,h.prototype={constructor:h,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=m,this.done=!1,this.delegate=null,this.method="next",this.arg=m,this.tryEntries.forEach(d),!t)for(var e in this)"t"===e.charAt(0)&&_.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=m)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,i){return a.type="throw",a.arg=t,n.next=e,i&&(n.method="next",n.arg=m),!!i}if(this.done)throw t;for(var n=this,i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],a=r.completion;if("root"===r.tryLoc)return e("end");if(r.tryLoc<=this.prev){var o=_.call(r,"catchLoc"),s=_.call(r,"finallyLoc");if(o&&s){if(this.prev<r.catchLoc)return e(r.catchLoc,!0);if(this.prev<r.finallyLoc)return e(r.finallyLoc)}else if(o){if(this.prev<r.catchLoc)return e(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return e(r.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&_.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=t,a.arg=e,r?(this.method="next",this.next=r.finallyLoc,P):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),P},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),d(n),P}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;d(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:p(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=m),P}}}(function(){return this}()||Function("return this")())},function(t,e,n){n(67),n(34),n(37),n(324),n(330),n(329),n(328),t.exports=n(2).Map},function(t,e,n){n(325),t.exports=n(2).Math.log2},function(t,e,n){n(326),t.exports=n(2).Number.isFinite},function(t,e,n){n(67),n(34),n(37),n(327),n(333),n(332),n(331),t.exports=n(2).Set},function(t,e,n){var i=n(69);t.exports=function(t,e){var n=[];return i(t,!1,n.push,n,e),n}},function(t,e,n){var i=n(7),r=n(126),a=n(9)("species");t.exports=function(t){var e;return r(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!r(e.prototype)||(e=void 0),i(e)&&null===(e=e[a])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){var i=n(322);t.exports=function(t,e){return new(i(t))(e)}},function(t,e,n){"use strict";var i=n(258),r=n(118);t.exports=n(234)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=i.getEntry(r(this,"Map"),t);return e&&e.v},set:function(t,e){return i.def(r(this,"Map"),0===t?0:t,e)}},i,!0)},function(t,e,n){var i=n(6);i(i.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,n){var i=n(6),r=n(8).isFinite;i(i.S,"Number",{isFinite:function(t){return"number"==typeof t&&r(t)}})},function(t,e,n){"use strict";var i=n(258),r=n(118);t.exports=n(234)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(r(this,"Set"),t=0===t?0:t,t)}},i)},function(t,e,n){n(235)("Map")},function(t,e,n){n(236)("Map")},function(t,e,n){var i=n(6);i(i.P+i.R,"Map",{toJSON:n(259)("Map")})},function(t,e,n){n(235)("Set")},function(t,e,n){n(236)("Set")},function(t,e,n){var i=n(6);i(i.P+i.R,"Set",{toJSON:n(259)("Set")})},function(t,e,n){var i=n(253),r=n(78)("toStringTag"),a="Arguments"==i(function(){return arguments}()),o=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=o(e=Object(t),r))?n:a?i(e):"Object"==(s=i(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,n){var i=n(253);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var i=n(61),r=n(237),a=n(78)("species");t.exports=function(t,e){var n,o=i(t).constructor;return void 0===o||void 0==(n=i(o)[a])?e:r(n)}},,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.attributePart="\n\tattribute vec2 a_Positions;\n\tattribute vec3 a_InstanceTrans;\n\tattribute vec4 a_InstanceCoords;\n\tattribute vec4 a_InstanceTextBounds;\n\tattribute vec4 a_InstanceInfo;\n",e.uniformPart="\n\tuniform mat4 u_matrix;\n\tuniform vec2 u_resolution;\n\tuniform float u_fadeChange;\n\tuniform vec2 u_InstanceTileTextureOffset;\n\tuniform vec2 u_iconTextureResolution;\n\tuniform vec2 u_textTextureResolution;\n\tuniform float u_showPoint;\n\tuniform float u_showLabel;\n\tuniform float u_mapScale;\n",e.varyingPart="\n\tvarying vec2 v_TexCoord;\n\tvarying float v_isShow;\n\tvarying float v_isIcon;\n\tvarying float v_opacity;\n\tvarying vec4 v_ndcCoord;\n",e.filterPart="\nfloat getFilterOpacity(float opacity, float type) {\n\treturn mix(\n\t\tmix(0.0, opacity, u_showPoint),\n\t\tmix(0.0, opacity, u_showLabel),\n\t\ttype\n\t);\n}\n",e.projectScreenPart="\nvec2 project(vec4 device) {\n    vec3 device_normal = device.xyz / device.w;\n    vec2 clip_pos = (device_normal * 0.5 + 0.5).xy;\n    return clip_pos * u_resolution;\n}\n\nvec4 unproject(vec2 screen, float z, float w) {\n    vec2 clip_pos = screen / u_resolution;\n    vec2 device_normal = clip_pos * 2.0 - 1.0;\n    return vec4(device_normal * w, z, w);\n}\n",e.glPositionPart="\n\t\tvec4 center_proj = u_matrix * vec4(transCoord, 0., 1.);\n\t\tvec2 center_screen = project(center_proj);\n        \n\t\tfloat s_rotate = a_InstanceInfo.x;\n\t\tfloat angle_sin = sin(s_rotate);\n    float angle_cos = cos(s_rotate);\n\t\tmat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n        \n\t\tvec2 positions = a_Positions * 0.5 + 0.5;\n\t\tvec2 corner_screen = rotation_matrix * vec2(\n\t\t\t(a_InstanceCoords.x * positions.x - a_InstanceCoords.z) * u_mapScale,\n\t\t\t(a_InstanceCoords.y * (positions.y - 1.0) + a_InstanceCoords.w) * u_mapScale\n\t\t) + center_screen.xy;\n\t\tvec4 corner_proj = unproject(corner_screen, center_proj.z, center_proj.w);\n\t\tgl_Position = corner_proj;\n\n\t\tv_ndcCoord = center_proj;\n",e.glPositionCusPart="\n\t\tvec4 center_proj = u_matrix * vec4(transCoord, 0., 1.);\n\t\tvec2 center_screen = project(center_proj);\n        \n\t\tfloat s_rotate = a_InstanceInfo.x;\n\t\tfloat angle_sin = sin(s_rotate);\n    float angle_cos = cos(s_rotate);\n\t\tmat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n        \n\t\tvec2 positions = a_Positions * 0.5 + 0.5;\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\tvec2 corner_screen = rotation_matrix * vec2(\n\t\t\t(a_InstanceCoords.x  * positions.x - a_InstanceCoords.z) * u_mapScale * mix(1.0 , a_InstanceStrentchinglens.x , a_InstanceInfo.z),\n\t\t\t(a_InstanceCoords.y * (positions.y - 1.0) + a_InstanceCoords.w) * mix(1.0 , a_InstanceStrentchinglens.y , a_InstanceInfo.z) * u_mapScale\n\t\t) + center_screen.xy;\n\t\tvec4 corner_proj = unproject(corner_screen, center_proj.z, center_proj.w);\n\t\tgl_Position = corner_proj;\n\t\t\n\t\tv_ndcCoord = center_proj;\n",e.fragPart="\n\tuniform sampler2D u_SamplerMask;\n\tuniform sampler2D u_SamplerText;\n\tuniform sampler2D u_SamplerIcon;\n\tuniform float u_asbackground;\n\tuniform float u_maskScale;\n",e.maskPart="\n\tvec2 v_texCoord = (v_ndcCoord.xy / v_ndcCoord.w * u_maskScale + 1.0) / 2.0;\n\t\n\tfloat maskCull = texture2D(u_SamplerMask, v_texCoord).r;\n\tfloat clipCull = texture2D(u_SamplerMask, v_texCoord).g;\n\tfloat isCulledByMask = step(0.99, clipCull) * step(maskCull, 0.1);\n\t\n\t\n\t\n\t\n"},,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=t.getSouthWest(),n=t.getNorthEast(),i=t.getSouthEast();return[n,t.getNorthWest(),e,i]}function a(t,e,n){var i=(0,u.latLngToMercator)(t);return[new f.default(e/2,n/2),new f.default(e/2,-n/2),new f.default(-e/2,-n/2),new f.default(-e/2,n/2)].map(function(t){return t.x=i.x+t.x,t.y=i.y+t.y,(0,u.mercatorToLatLng)(t)})}function o(t){return(0,l.default)(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.getBoundsPath=r,e.getRectanglePath=a;var s=n(285),l=i(s),u=n(121),c=n(75),f=i(c);e.default=o},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){var i="highlightRegion"===t?A:983040&t,r=n[i]&&n[i][t];return r?f(r,e):P[t]?P[t]:null}function a(t){var e={};return e[A]=o(t.regionStyles),e[T]=s(t.labelStyles),e[E]=l(t.lineStyles),e[w]=u(t.pointStyles),e[M]=c(t.arrowStyles),e[A].highlightRegion=[{minScale:16,maxScale:22,fillStyle:"rgba(0, 0, 0, 0.1)",strokeStyle:"#888888",lineWidth:.5}],e}function o(t){var e={};return(0,h.default)(t).forEach(function(n){e[n]={},e[n]=t[n].map(function(t){return{minScale:t.minScaleVal,maxScale:t.maxScaleVal,topStyle:(0,b.convertColorToHex)(t.top_color),bottomStyle:(0,b.convertColorToHex)(t.bottom_color),insideStyle:(0,b.convertColorToHex)(t.bottom_color),outsideStyle:(0,b.convertColorToHex)(t.outside_color),lineWidth:t.sidewidth}})}),e}function s(t){var e={};return(0,h.default)(t).forEach(function(n){e[n]={},e[n]=t[n].map(function(t){var e=(0,b.getFontStyle)(t.effect),n=(0,b.getFontWeight)(),i=t.font_size,r=(0,b.getFontFamily)(t.font_name);return{minScale:t.minScaleVal,maxScale:t.maxScaleVal,effect:t.effect,font:e+" "+n+" "+i+"px "+r,fontStyle:e,fontWeight:n,fontSize:i,fontFamily:r,fillStyle:(0,b.convertColorToHex)(t.font_color),strokeStyle:(0,b.convertColorToHex)(t.background_color),lineWidth:t.effect_size}})}),e}function l(t){var e={};return(0,h.default)(t).forEach(function(n){e[n]={},e[n]=t[n].map(function(t){return{minScale:t.minScaleVal,maxScale:t.maxScaleVal,fillStyle:(0,b.convertColorToHex)(t.color_fill),fillWidth:t.width,fillLineCap:"round",fillLineJoin:"bevel",strokeStyle:(0,b.convertColorToHex)(t.color_side),strokeWidth:t.sidewidth,strokeLineCap:"butt",strokeLineJoin:"bevel"}})}),e}function u(t){var e={};return(0,h.default)(t).forEach(function(n){e[n]={},e[n]=t[n].map(function(t){return{minScale:t.minScaleVal,maxScale:t.maxScaleVal,icon_offset:t.icon_offset,labelid:t.labelid,density:t.density}})}),e}function c(){return{}}function f(t,e){var n=null;return t.some(function(t){return n=t,e>=t.minScale&&e<=t.maxScale||22===e&&21===t.maxScale})&&n||null}Object.defineProperty(e,"__esModule",{value:!0}),e.IndoorStyleMap=e.customStyle=e.ARROW_NUM=e.LABEL_NUM=e.REGION_NUM=e.LINE_NUM=e.POINT_NUM=void 0;var d=n(17),h=i(d),p=n(95),v=i(p),m=n(0),g=i(m),_=n(1),y=i(_);e.getStyle=r;var x=n(677),b=n(678),S=null,w=e.POINT_NUM=65536,E=e.LINE_NUM=131072,A=e.REGION_NUM=196608,T=e.LABEL_NUM=262144,M=e.ARROW_NUM=327680,I=a(x.STYLE),P=e.customStyle={};e.IndoorStyleMap=function(){function t(){(0,g.default)(this,t),this.styleMap=new v.default,this.styleMap.set("default",I)}return(0,y.default)(t,[{key:"set",value:function(t,e){var n=a(e);this.styleMap.set(t,n)}},{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return this.has(t)?this.styleMap.get(t):this.styleMap.get("default")}},{key:"has",value:function(t){return this.styleMap.has(t)}},{key:"getFeatureStyle",value:function(t,e,n){return r(t,e,this.get(n))}}],[{key:"getInstance",value:function(){return null===S&&(S=new t),S}}]),t}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return t.reduce(function(t,e){return t+y.getVertexCount(e)},0)}function a(t){return t.reduce(function(t,e){return t+y.getTriangleCount(e)},0)}function o(t){var e=new Array(t.length+1);e[0]=0;var n=0;return t.forEach(function(t,i){n+=y.getVertexCount(t),e[i+1]=n}),e}function s(t){var e=t.complexPolygons,n=t.IndexType,i=void 0===n?Uint32Array:n,r=3*a(e),s=o(e),l=new i(r),u=0;return e.forEach(function(t,e){var n=y.getSurfaceIndices(t,i),r=!0,a=!1,o=void 0;try{for(var c,f=(0,h.default)(n);!(r=(c=f.next()).done);r=!0){var d=c.value;l[u]=d+s[e],u+=1}}catch(t){a=!0,o=t}finally{try{!r&&f.return&&f.return()}finally{if(a)throw o}}}),l}function l(t){var e=t.cache,n=e.positions,i=e.positions64xyLow,r=e.vertexValid,a=t.complexPolygons,o=t.fp64,s=0;a.forEach(function(t){t.forEach(function(t){t.forEach(function(t){t.forEach(function(t){var e=t.lng,r=t.lat,a=t.z||0;n[3*s]=e,n[3*s+1]=r,n[3*s+2]=a,o&&(i[2*s]=(0,S.fp64LowPart)(e),i[2*s+1]=(0,S.fp64LowPart)(r)),s+=1}),r[s-1]=0})})})}function u(t){var e=t.cache,n=t.complexPolygons,i=t.pointCount,r=t.getElevation,a=e||new Float32Array(i),o=0;return n.forEach(function(t,e){var n=r(e),i=y.getVertexCount(t);E({target:a,source:[n],start:o,count:i}),o+=i}),a}function c(t){var e=t.cache,n=t.complexPolygons,i=t.pointCount,r=t.getColor,a=e||new Uint8ClampedArray(4*i),o=0;return n.forEach(function(t,e){var n=r(e);isNaN(n[3])&&(n[3]=255);var i=y.getVertexCount(t);E({target:a,source:n,start:o,count:i}),o+=n.length*i}),a}function f(t){var e=t.complexPolygons,n=t.pointCount,i=new Uint8ClampedArray(3*n),r=0;return e.forEach(function(t,e){var n=(0,w.encodePickingColor)(e),a=y.getVertexCount(t);E({target:i,source:n,start:r,count:a}),r+=n.length*a}),i}Object.defineProperty(e,"__esModule",{value:!0}),e.PolygonParseHelper=void 0;var d=n(25),h=i(d),p=n(0),v=i(p),m=n(1),g=i(m),_=n(306),y=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(_),x=n(246),b=i(x),S=n(148),w=n(249),E=b.default.fillArray,A=[0,0,0,255];e.PolygonParseHelper=function(){function t(e){var n=e.complexPolygons,i=e.IndexType;(0,v.default)(this,t),n=n.map(function(t){return y.normalize(t)});var a=r(n);this.complexPolygons=n,this.pointCount=a,this.IndexType=i,this.attributes={pickingColors:f({complexPolygons:n,pointCount:a})}}return(0,g.default)(t,[{key:"updatePositions",value:function(t){var e=t.fp64,n=t.extruded;e=!0;var i=this.attributes,r=this.complexPolygons,a=this.pointCount;i.positions=i.positions||new Float32Array(3*a),i.vertexValid=i.vertexValid||new Uint8ClampedArray(a).fill(1),e&&(i.positions64xyLow=i.positions64xyLow||new Float32Array(2*a)),l({cache:i,complexPolygons:r,extruded:n,fp64:e})}},{key:"getIndices",value:function(){return s({complexPolygons:this.complexPolygons,IndexType:this.IndexType})}},{key:"getPositions",value:function(){return this.attributes.positions}},{key:"getPositions64xyLow",value:function(){return this.attributes.positions64xyLow}},{key:"getVertexValid",value:function(){return this.attributes.vertexValid}},{key:"getElevations",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.key,n=void 0===e?"elevations":e,i=t.getElevation,r=void 0===i?function(){return 100}:i,a=this.attributes,o=this.complexPolygons,s=this.pointCount,l=u({cache:a[n],complexPolygons:o,pointCount:s,getElevation:r});return a[n]=l,l}},{key:"getColors",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.key,n=void 0===e?"colors":e,i=t.getColor,r=void 0===i?function(){return A}:i,a=this.attributes,o=this.complexPolygons,s=this.pointCount,l=c({cache:a[n],complexPolygons:o,pointCount:s,getColor:r});return a[n]=l,l}},{key:"getPickingColors",value:function(){return this.attributes.pickingColors}}]),t}()},,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){return(0,o.default)(t,e)*(n||l.default)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(402),o=i(a),s=n(303),l=i(s);e.default=r},,,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if((0,A.isSimple)(t)){for(var e=[],n=t.length,i=0;i<n;i++){var a=void 0;if(i<n-1)a=[t[i],t[i+1]];else{if(t[i].equals(t[0]))continue;a=[t[i],t[0]]}e.push(a)}return e}return t.map(function(t){return r(t)}).flat()}var a=n(15),o=i(a),s=n(17),l=i(s),u=n(3),c=i(u),f=n(0),d=i(f),h=n(1),p=i(h),v=n(5),m=i(v),g=n(32),_=i(g),y=n(4),x=i(y),b=n(311),S=i(b),w=n(158),E=n(53),A=n(306),T=n(350),M=i(T),I=n(534),P=i(I),k=n(29),L=n(36),C=i(L),R=n(10),D=i(R),N=n(225),B=N.PolygonStyle,O=n(225),F=O.ExtrudablePolygonStyle,z=C.default.isValidColor,V=C.default.isNumber,U=function(t){function e(t){(0,d.default)(this,e);var n=(0,m.default)(this,(e.__proto__||(0,c.default)(e)).call(this,t));return n._createSubOverlay(t),n}return(0,x.default)(e,t),(0,p.default)(e,[{key:"_initialize",value:function(){this._childGeometryOverlays=[]}},{key:"_setGeometryType",value:function(){this._geometryType=w.GEOMETRY_TYPES.POLYGON,this._layerType=E.RENDER_LAYER_TYPE.polygon,this._className="MultiPolygon"}},{key:"_checkGeometries",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(t,e){t?t.styleId||(t.styleId="default"):console.error("MultiPolygon.geometries: 希望传入PolygonGeometry数组，实际第"+e+"元素不存在！"),t.paths&&((0,A.isSimple)(t.paths)||(0,A.isPart)(t.paths)||(0,A.isComplex)(t.paths))||console.error("MultiPolygon.geometries: 希望传入PolygonGeometry数组，实际第"+e+"元素的paths属性无效！")})}},{key:"_getDefaultStyle",value:function(){return new B}},{key:"_checkStyles",value:function(t){(0,_.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"_checkStyles",this).call(this,t),(0,l.default)(t).forEach(function(e){var n=t[e];n&&(n instanceof B||n instanceof F)?n instanceof B?z(n.color)?z(n.borderColor)||console.error("MultiPolygon.styles: 样式id ",e," 对应的PolygonStyle.borderColor属性无效",n):console.error("MultiPolygon.styles: 样式id ",e," 对应的PolygonStyle.color属性无效",n):n instanceof F&&(z(n.color)?z(n.borderColor)?V(n.extrudeHeight)||console.error("MultiPolygon.styles: 样式id ",e," 对应的ExtrudablePolygonStyle.extrudeHeight属性无效",n):console.error("MultiPolygon.styles: 样式id ",e," 对应的ExtrudablePolygonStyle.borderColor属性无效",n):console.error("MultiPolygon.styles: 样式id ",e," 对应的ExtrudablePolygonStyle.color属性无效",n)):console.error("MultiPolygon.styles: 样式id ",e,"希望传入PolygonStyle或ExtrudablePolygonStyle实例，实际传入：",n)})}},{key:"_createSubOverlay",value:function(t){var e=this._extractSubStyles(),n=this._extractSubGeometries(),i=new P.default((0,o.default)(t,{id:this.id+"_border",styles:e,geometries:n,isSimplifyPath:!1}));this._childGeometryOverlays.push(i)}},{key:"_extractSubGeometries",value:function(){var t=this;return this.geometries.reduce(function(e,n){var i=t.styles[n.styleId]||t.styles.default;if(i&&i.showBorder&&i instanceof B){var r=(0,A.getBorderPolyline)(n.paths);e.push({styleId:n.styleId,paths:r,rank:n.rank})}return e},[])}},{key:"_extractSubStyles",value:function(){var t={};return D.default.forIn(this.styles,function(e,n){n&&n.showBorder&&n instanceof B&&(t[e]=new M.default({id:e,color:n.borderColor,width:n.borderWidth,lineCap:"round",dashArray:n.borderDashArray}))}),t}},{key:"setVisible",value:function(t){return t=Boolean(t),(0,_.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"setVisible",this).call(this,t),this._childGeometryOverlays.forEach(function(e){e.setVisible(t)}),this}},{key:"setMap",value:function(t){return(0,_.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"setMap",this).call(this,t),this._childGeometryOverlays.forEach(function(e){return e.setMap(t)}),this}},{key:"setZIndex",value:function(t){return V(t)?t<0?(console.error("zIndex希望设置为非负数,实际值为: "+t),this):((0,_.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"setZIndex",this).call(this,t),this._childGeometryOverlays.forEach(function(e){return e.setZIndex(t)}),this):(new k.BaseTypeError("zIndex","Number",t).error(),this)}},{key:"updateGeometries",value:function(t,n){return t?((0,_.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"updateGeometries",this).call(this,t,n),this._updateSubGeometries(),this):this}},{key:"_updateSubGeometries",value:function(){var t=this._extractSubGeometries();this._childGeometryOverlays.forEach(function(e){return e.setGeometries(t)})}},{key:"_updateSubStyles",value:function(){var t=this._extractSubStyles();this._childGeometryOverlays.forEach(function(e){return e.setStyles(t)}),this._updateSubGeometries()}},{key:"setGeometries",value:function(t){return t?((0,_.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"setGeometries",this).call(this,t),this._updateSubGeometries(),this):this}},{key:"setStyles",value:function(t){return t?((0,_.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"setStyles",this).call(this,t),this._updateSubStyles(),this):this}},{key:"destroy",value:function(){this._childGeometryOverlays.forEach(function(t){return t.destroy()}),(0,_.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"destroy",this).call(this)}},{key:"_getAllPoints",value:function(){return this.geometries.map(function(t){return t.paths.flat(1/0)}).flat()}},{key:"_getAllSegments",value:function(){return this.geometries.map(function(t){return r(t.paths)}).flat()}}]),e}(S.default);t.exports=U},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(g(t)){var n=(0,u.default)(t,2),i=n[0],r=n[1];return m(i)&&m(r)?(i=Math.max(Math.round(i),0),r=Math.max(Math.round(r),0),[i,r]):(new v.BaseTypeError("PolylineStyle."+e+"[index]","number",i),[0,0])}return new v.BaseTypeError("PolylineStyle."+e,"array",t).error(),[0,0]}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=["width","height","space"],n={};if(e.forEach(function(e){if(e in t){var i=t[e];m(i)?n[e]=Math.min(Math.max(i,0),255):new v.BaseTypeError("ArrowOptions."+e,"number",i).error()}}),!_(t.align)){var i=t.align;i in x?n.align=i:new v.EnumError("ArrowOptions.align",(0,s.default)(x),i).error()}return n}Object.defineProperty(e,"__esModule",{value:!0});var o=n(17),s=i(o),l=n(27),u=i(l),c=n(0),f=i(c),d=n(10),h=n(36),p=i(h),v=n(29),m=p.default.isNumber,g=p.default.isArray,_=p.default.isUndefined,y={color:"#3777FF",width:3,borderWidth:0,borderColor:"#3777FF",lineCap:"butt",dashArray:[0,0],showArrow:!1,arrowOptions:{width:6,height:4,space:50,align:"middle"},eraseColor:"#C2CBD2",enableBloom:!1},x={middle:0,left:1,right:2},b=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,f.default)(this,t),e=(0,d.extend)({},y,e),this.color=e.color,this.width=e.width,this.borderColor=e.borderColor,this.borderWidth=e.borderWidth||0,this.lineCap="round"===e.lineCap?2:"square"===e.lineCap?1:0,this.dashArray=r(e.dashArray,"dashArray"),this.eraseColor=e.eraseColor,this.enableBloom=!!e.enableBloom;var n=(0,d.extend)({},y.arrowOptions,a(e.arrowOptions)),i=n.width,o=n.height,s=n.space,l=n.align;this.arrowInfo=[i,o*!!e.showArrow,s,x[l]]};e.default=b},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(){return document.getElementsByTagName("head")[0]}function a(t){return[].concat((0,m.default)(new URLSearchParams(t.split("?")[1]))).reduce(function(t,e){var n=(0,p.default)(e,2),i=n[0],r=n[1];return t[i]=r,t},{})}function o(){return"cb"+(new Date).getTime().toString(36)+(I++).toString(36)}function s(t,e){M.push({name:t,sender:e})}function l(t){t.clearAttributes&&t.clearAttributes(),t[E]=null,t.onerror=null,t.parentNode&&t.parentNode.removeChild(t)}function u(t,e){var n=t.replace("https://apis.map.qq.com","").replace("&servicesk="+e,""),i=[].concat((0,m.default)(new URLSearchParams(n.split("?")[1]))).sort(function(t,e){return t[0].localeCompare(e[0])}).map(function(t){return t.join("=")}).join("&"),r=n.split("?")[0]+"?"+i+e;return"https://apis.map.qq.com"+n+"&sig="+(0,_.default)(r)}function c(t,e,n,i,o){var l=null,c=!1,f=[];e.indexOf("callback")>-1?(e=e.replace("&callback",""),f=["output=jsonp","callback="+T+"."+t]):f=["output=jsonp","pf=jsapi","ref=jsapi","cb="+T+"."+t];var h=S.createElement("script");h.setAttribute("type","text/javascript"),h.setAttribute("charset",o||"GBK"),h.async=!0;var p=e+(-1===e.indexOf("?")?"?":"&")+f.join("&"),v=a(p);v.servicesk&&(p=u(p,v.servicesk)),h.src=p,h.onerror=function(){c=!0,i&&i(),d(t)},A[t]=function(t){l=t},h[E]=function(){w.test(this.readyState)&&(d(t),l?(l.id=t,n&&n(l)):c||i&&i())};var m=r();m.insertBefore(h,m.firstChild),s(t,h)}function f(t,e,n,i){return t||(t=o()),b(function(){d(t),c(t,e,n,i)}),t}function d(t){if(t){for(var e=0,n=null,i=M.length;e<i;e++)if(M[e].name===t){n=M.splice(e,1)[0];break}n&&l(n.sender),A[t]&&delete A[t]}}var h=n(27),p=i(h),v=n(18),m=i(v),g=n(417),_=i(g),y=n(57),x=n(409),b=x.domReady,S=window.document,w=/loaded|complete|undefined/i,E=S.dispatchEvent?"onload":"onreadystatechange",A=window[y]._svcb||(window[y]._svcb={}),T=y+"._svcb",M=[],I=0;e.send=f,e.cancel=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.LIGHT_TYPE={AMBIENT:"ambient",DIRECTION:"dir",POINT:"point",SPOT:"spot"}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(32),h=i(d),p=n(4),v=i(p),m=n(216),g=i(m),_=[-1,-1,1,-1,-1,1,1,1],y=function(t){function e(t){(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t));return n.shaderParams={attributes:["aClipSpacePosition"],uniforms:t.uniformList||[]},n.vertices=new Float32Array(_),n}return(0,v.default)(e,t),(0,u.default)(e,[{key:"preDraw",value:function(){(0,h.default)(e.prototype.__proto__||(0,a.default)(e.prototype),"preDraw",this).call(this),this.buffers||(this.buffers=this.createBuffer(null,this.vertices)),this.bindBuffer()}},{key:"bindBuffer",value:function(){var t=this.gl;this.buffers.vertices.bind(),this.buffers.vertices.pointToAttrib({location:this.aClipSpacePosition,size:2,type:t.FLOAT})}},{key:"draw",value:function(t){var e=this.gl;e.useProgram(e.program),this.setUniforms(t),e.drawArrays(e.TRIANGLE_STRIP,0,4)}},{key:"setUniforms",value:function(){}}]),e}(g.default);e.default=y},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var n=new u(t),i=new u(e);return n.isCollision(i)}Object.defineProperty(e,"__esModule",{value:!0}),e.OBB=void 0;var a=n(0),o=i(a),s=n(1),l=i(s);e.checkCollision=r;var u=e.OBB=function(){function t(e){(0,o.default)(this,t),this.centerPoint=[(e.leftTop.x+e.rightBottom.x)/2,(e.leftTop.y+e.rightBottom.y)/2],this.halfHeight=e.height/2,this.halfWidth=e.width/2,this.setRotation(e.angle)}return(0,l.default)(t,[{key:"getProjectionRadius",value:function(t){var e=this.dot(t,this.axisX),n=this.dot(t,this.axisY);return this.halfWidth*e+this.halfHeight*n}},{key:"dot",value:function(t,e){return Math.abs(t[0]*e[0]+t[1]*e[1])}},{key:"setRotation",value:function(t){var e=t/180*Math.PI;return this.axisX=[Math.cos(e),-Math.sin(e)],this.axisY=[Math.sin(e),Math.cos(e)],this}},{key:"isCollision",value:function(t){for(var e=[this.centerPoint[0]-t.centerPoint[0],this.centerPoint[1]-t.centerPoint[1]],n=[this.axisX,this.axisY,t.axisX,t.axisY],i=0,r=n.length;i<r;i++)if(this.getProjectionRadius(n[i])+t.getProjectionRadius(n[i])<=this.dot(e,n[i]))return!1;return!0}}]),t}()},function(t,e,n){t.exports={default:n(429),__esModule:!0}},function(t,e,n){var i=n(221),r=n(88),a=n(277);t.exports=function(t){return function(e,n,o){var s,l=i(e),u=r(l.length),c=a(o,u);if(t&&n!=n){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((t||c in l)&&l[c]===n)return t||c||0;return!t&&-1}}},function(t,e,n){"use strict";var i=n(63),r=n(11),a=n(211),o=n(295),s=n(260),l=n(360),u=n(293),c=n(64),f=n(62),d=n(362),h=n(297),p=n(452);t.exports=function(t,e,n,v,m,g){var _=i[t],y=_,x=m?"set":"add",b=y&&y.prototype,S={},w=function(t){var e=b[t];a(b,t,"delete"==t?function(t){return!(g&&!c(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!c(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!c(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof y&&(g||b.forEach&&!f(function(){(new y).entries().next()}))){var E=new y,A=E[x](g?{}:-0,1)!=E,T=f(function(){E.has(1)}),M=d(function(t){new y(t)}),I=!g&&f(function(){for(var t=new y,e=5;e--;)t[x](e,e);return!t.has(-0)});M||(y=e(function(e,n){u(e,y,t);var i=p(new _,e,y);return void 0!=n&&l(n,m,i[x],i),i}),y.prototype=b,b.constructor=y),(T||I)&&(w("delete"),w("has"),m&&w("get")),(I||A)&&w(x),g&&b.clear&&delete b.clear}else y=v.getConstructor(e,t,m,x),o(y.prototype,n),s.NEED=!0;return h(y,t),S[t]=y,r(r.G+r.W+r.F*(y!=_),S),g||v.setStrong(y,t,m),y}},function(t,e,n){"use strict";n(581);var i=n(211),r=n(220),a=n(62),o=n(254),s=n(78),l=n(458),u=s("species"),c=!a(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),f=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var d=s(t),h=!a(function(){var e={};return e[d]=function(){return 7},7!=""[t](e)}),p=h?!a(function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[u]=function(){return n}),n[d](""),!e}):void 0;if(!h||!p||"replace"===t&&!c||"split"===t&&!f){var v=/./[d],m=n(o,d,""[t],function(t,e,n,i,r){return e.exec===l?h&&!r?{done:!0,value:v.call(e,n,i)}:{done:!0,value:t.call(n,e,i)}:{done:!1}}),g=m[0],_=m[1];i(String.prototype,t,g),r(RegExp.prototype,d,2==e?function(t,e){return _.call(t,this,e)}:function(t){return _.call(t,this)})}}},function(t,e,n){"use strict";var i=n(61);t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){var i=n(239),r=n(562),a=n(453),o=n(61),s=n(88),l=n(468),u={},c={},e=t.exports=function(t,e,n,f,d){var h,p,v,m,g=d?function(){return t}:l(t),_=i(n,f,e?2:1),y=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(a(g)){for(h=s(t.length);h>y;y++)if((m=e?_(o(p=t[y])[0],p[1]):_(t[y]))===u||m===c)return m}else for(v=g.call(t);!(p=v.next()).done;)if((m=r(v,_,p.value,e))===u||m===c)return m};e.BREAK=u,e.RETURN=c},function(t,e,n){var i=n(253);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e,n){var i=n(78)("iterator"),r=!1;try{var a=[7][i]();a.return=function(){r=!0},Array.from(a,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var a=[7],o=a[i]();o.next=function(){return{done:n=!0}},a[i]=function(){return o},t(a)}catch(t){}return n}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){"use strict";var i=n(334),r=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var a=n.call(t,e);if("object"!=typeof a)throw new TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==i(t))throw new TypeError("RegExp#exec called on incompatible receiver");return r.call(t,e)}},function(t,e,n){var i=n(105),r=n(63),a=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:n(271)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){for(var i,r=n(63),a=n(220),o=n(278),s=o("typed_array"),l=o("view"),u=!(!r.ArrayBuffer||!r.DataView),c=u,f=0,d="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");f<9;)(i=r[d[f++]])?(a(i.prototype,s,!0),a(i.prototype,l,!0)):c=!1;t.exports={ABV:u,CONSTR:c,TYPED:s,VIEW:l}},function(t,e,n){var i=n(63),r=i.navigator;t.exports=r&&r.userAgent||""},function(t,e,n){!function(i,r){t.exports=e=r(n(50))}(0,function(t){return function(e){var n=t,i=n.lib,r=i.Base,a=i.WordArray,o=n.x64={};o.Word=r.extend({init:function(t,e){this.high=t,this.low=e}}),o.WordArray=r.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=void 0!=e?e:8*t.length},toX32:function(){for(var t=this.words,e=t.length,n=[],i=0;i<e;i++){var r=t[i];n.push(r.high),n.push(r.low)}return a.create(n,this.sigBytes)},clone:function(){for(var t=r.clone.call(this),e=t.words=this.words.slice(0),n=e.length,i=0;i<n;i++)e[i]=e[i].clone();return t}})}(),t})},,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.easableMixin=void 0;var i=n(28);e.easableMixin={_abortFn:null,_finishFn:null,_ease:function(t,e,n,r){var a=this;this._finishFn=e;var o=!1;this._abortFn=(0,i.timed)(function(e){t.call(this,r.easing(e)),1===e&&this._finishEase()},function(){o||(delete a._finishFn,n&&n.call(a),o=!0,delete a._abortFn)},!1===r.animate?0:r.duration,this)},_finishEase:function(){delete this._abortFn;var t=this._finishFn;delete this._finishFn,t&&t.call(this)},_stopEase:function(){this._abortFn&&(this._abortFn(),this._finishEase())}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(22),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=r.default.highQualityRender},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(27),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=function(){function t(e,n){(0,s.default)(this,t),this.p0=e,this.p1=n}return(0,u.default)(t,[{key:"getXYCoefficient",value:function(){var t=(0,a.default)(this.p0.elements,3),e=t[0],n=t[1],i=t[2],r=(0,a.default)(this.p1.elements,3),o=r[0],s=r[1],l=r[2];return[(o-e)/(l-i),(e*l-o*i)/(l-i),(s-n)/(l-i),(n*l-s*i)/(l-i)]}}]),t}();e.default=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(27),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(109),f=function(){function t(e,n){(0,s.default)(this,t),this.center=e,this.radius=n}return(0,u.default)(t,[{key:"intersectWithLine",value:function(t){var e=t.getXYCoefficient(),n=(0,a.default)(e,4),i=n[0],r=n[1],o=n[2],s=n[3],l=(0,a.default)(this.center.elements,3),u=l[0],f=l[1],d=l[2],h=this.radius,p=r-u,v=s-f,m=-d,g=i*i+o*o+1,_=2*(i*p+o*v+m),y=p*p+v*v+m*m-h*h,x=_*_-4*g*y;if(x<0)return[];var b=(-_+Math.sqrt(x))/(2*g),S=(-_-Math.sqrt(x))/(2*g),w=i*b+r,E=o*b+s,A=i*S+r,T=o*S+s;return[new c.Vector3(w,E,b),new c.Vector3(A,T,S)]}}]),t}();e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConfigUtil=e.INDOOR_ICON_SIZE=void 0;var i=n(22),r=function(t){return t&&t.__esModule?t:{default:t}}(i),a=0;e.INDOOR_ICON_SIZE=r.default.iconSize,e.ConfigUtil={setBV:function(t){a=t},getBV:function(){return a},getIconPath:function(){var t=Math.floor(3*Math.random());return r.default.indoorIconSrc.replace("%$%",0===t?1:t)},getIconSrc:function(t){return""+this.getIconPath()+t+".png?v="+this.getBV()}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return t[0]+(t[1]<<8)+(t[2]<<16)}function a(t,e){var n={};n.x=360*t/268435456-180;var i=180-360*e/268435456;n.y=Math.atan(Math.exp(.017453292519943295*i))/.008726646259971648-90;var r=new m.default(n.y,n.x);return r.x=n.x,r.y=n.y,r}function o(t){return(0,p.default)({},t)}function s(t,e){var n=(0,S.mercatorToLatLng)(new _.default(t,e));return n.x=t,n.y=e,n}function l(t,e){return(0,S.latLngToMercator)(new m.default(e,t))}function u(t){var e=t.map(function(t){return{lng:t.x,lat:t.y}});return(0,b.isClockWise)(e)}function c(t,e,n,i){var r=(0,y.getStyle)(t,e,i);if(!r)return!1;var a=(0,y.getStyle)(r.labelid,e,i);if(!a)return!1;if(r.icon_offset&&65535!==r.icon_offset||a.effect&&5===a.effect){var o=r.icon_offset;if(n&&"number"==typeof r.icon_offset&&isFinite(r.icon_offset)&&65535!==r.icon_offset&&-1!==r.icon_offset){if(a.fontSize>0)return!0}else if(a.fontSize>0)return!0;return!!("number"==typeof o&&isFinite(o)&&o>=0&&o<500)}return a.fontSize>0}function f(t,e,n,i){var r=c(t,e,n,i),a=!1,o=!1;if(!r)return{isValid:r,drawIcon:a,drawLabel:o};var s=(0,y.getStyle)(t,e,i),l=(0,y.getStyle)(s.labelid,e,i);if(s.icon_offset&&65535!==s.icon_offset||l.effect&&5===l.effect){var u=s.icon_offset;o=(n&&"number"==typeof s.icon_offset&&isFinite(s.icon_offset)&&65535!==s.icon_offset&&s.icon_offset,l.fontSize>0),a=!!("number"==typeof u&&isFinite(u)&&u>=0&&u<500)}else a=!1,o=l.fontSize>0;return{isValid:r,drawLabel:o,drawIcon:a}}function d(t,e,n,i){var r=(0,y.getStyle)(t.styleId,e,i);if(!r)return void console.warn("style is invalid!");var a=(0,y.getStyle)(r.labelid,e,i);if(!a)return void console.warn("labelStyle is invalid!");var o=t.drawInfo||f(t.styleId,e,t.direct,i),s=x.INDOOR_ICON_SIZE,l=x.INDOOR_ICON_SIZE,u=/\\/g,c=null,d=null,h=s/2,p=l/2,v=t.text.split(u);return v.map(function(e,i){var r={x:0,y:0},s={w:0,h:0},l={x:0,y:0},u={text:e,coords:[l.x,l.y],anchor:r,textBounds:s};if(!o.drawLabel)return u;switch(t.direct){case 2:c="right",d="middle";break;case 3:c="center",d="top";break;case 4:c="center",d="bottom";break;case 1:c="left",d="middle";break;default:c="center",d="middle"}var f=0;return n.font!==a.font&&(n.font=a.font),f=n.measureText(e).width,s.w=Math.ceil(f),s.h=t.fontSize,"left"===c&&o.drawIcon?(r.x=0+h+2+f/2,l.x=r.x):"right"===c&&o.drawIcon?(r.x=0-h-2-f/2,l.x=r.x):(r.x=0,l.x=0),"top"===d?(r.y=0+p+(a.fontSize+2)*(i+1)-a.fontSize/2,l.y=r.y):"bottom"===d?(r.y=0-p-(a.fontSize+2)*(v.length-i)+a.fontSize/2,l.y=r.y):o.drawIcon&&o.drawLabel?(r.y=0+(1===v.length?0:(a.fontSize/2+2)*(0===i?-1:1)),l.y=r.y):o.drawIcon?(r.y=0,l.y=0):o.drawLabel&&(1===v.length?(r.y=0,l.y=0):(r.y=0+(a.fontSize/2+2)*(0===i?-1:1),l.y=r.y)),u.coords=[l.x,l.y],u})}Object.defineProperty(e,"__esModule",{value:!0});var h=n(125),p=i(h);e.readUint24=r,e.pixels2LongLat=a,e.extendCopy=o,e.mercator2latLng=s,e.latLng2Mercator=l,e.isClockWise=u,e.isValidPointStyle=c,e.getPoiDrawInfo=f,e.getPoiRect=d;var v=n(46),m=i(v),g=n(75),_=i(g),y=n(343),x=n(395),b=n(306),S=n(121)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=null;e.default={setStyleTag:function(t){i=t},isDefaultNoSideLine:function(t){var e=i,n=e.lineTag,r=["street","path","secondaryroad"],a=r.some(function(e){return n[e]&&n[e].some(function(e){return e===Number(t)})});return Number(a)}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(265),v=i(p),m=n(36),g=i(m),_=n(29),y=g.default.isNumber,x=function(t){function e(t){return(0,s.default)(this,e),(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t))}return(0,h.default)(e,t),(0,u.default)(e,[{key:"_initialize",value:function(t){this._setTileSize(t.tileSize)}},{key:"_setTileSize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:256;y(t)||(new _.BaseTypeError("TileLayer.tileSize","number",t).error(),t=256),this.tileSize=t}}]),e}(v.default);e.default=x},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(95),a=i(r),o=n(27),s=i(o),l=n(23),u=i(l),c=n(3),f=i(c),d=n(0),h=i(d),p=n(1),v=i(p),m=n(5),g=i(m),_=n(32),y=i(_),x=n(4),b=i(x),S=n(398),w=i(S),E=n(120),A=i(E),T=n(90),M=n(53),I=n(29),P=n(22),k=function(t){function e(t){return(0,h.default)(this,e),(0,g.default)(this,(e.__proto__||(0,f.default)(e)).call(this,t))}return(0,b.default)(e,t),(0,v.default)(e,[{key:"_initialize",value:function(t){(0,y.default)(e.prototype.__proto__||(0,f.default)(e.prototype),"_initialize",this).call(this,t),t.type&&("string"!=typeof t.type?new I.BaseTypeError("Layer.type","string",t.type).error():this.features=L[t.type]),this.features=this.features||t.features||[],this.maxDataZoom=t.maxDataZoom||P.maxDataZoom,this.vectorSrc=t.vectorSrc,this._checkSourceId()}},{key:"setMap",value:function(t){return(0,y.default)(e.prototype.__proto__||(0,f.default)(e.prototype),"setMap",this).call(this,t),t&&this._init(),this}},{key:"_init",value:function(){var t=this;this._createSource().then(function(){t.features.forEach(function(e){var n=new w.default({id:e.id||e.type+"_"+t.id,type:e.type,maxDataZoom:t.maxDataZoom,sourceId:t.layerSourceId,tileSize:256});n.filter=e.filter,t.appendChild(n)}),t._fire("layer",{})})}},{key:"_createSource",value:function(){var t=this,e=this._checkVectorSrc();return this.map.getSource(this.layerSourceId)?u.default.resolve():(this.map.addSource(this.layerSourceId,{tileSize:P.tileSize,minZoom:this.minZoom,maxZoom:this.maxZoom,minDataZoom:this.minDataZoom,maxDataZoom:this.maxDataZoom,type:T.SOURCE_TYPE.vector,data:{vectorSrc:e.vectorSrc||P.vectorSrc,batchVectorSrc:e.batchVectorSrc||P.batchVectorSrc},enc:!1}),this.map.layerResource.getStyleIdPromise().then(function(e){t.map.getSource(t.layerSourceId).setStyleId(e)},function(t){return console.warn("底图样式未能加载：",t),u.default.resolve()}))}},{key:"updateBuildingRange",value:function(t){if(t){var e=(0,s.default)(t,2),n=e[0],i=e[1],r=void 0===i?P.maxZoom:i;if(n=Math.round(n),r=Math.round(r),(!this.buildingRange||this.buildingRange[0]!==n||this.buildingRange[1]!==r)&&this.map&&this.map.getSource(this.layerSourceId)){this.buildingRange=[n,r];var a=this.map.getSource(this.layerSourceId);a.buildingRange=this.buildingRange,a.reload()}}}},{key:"_checkSourceId",value:function(){if(this.layerSourceId)return void(this.layerSourceId=this.layerSourceId);var t=this.vectorSrc;return this.layerSourceMap=P.layerSourceMap||new a.default,P.layerSourceMap=this.layerSourceMap,Array.isArray(t)?void this._checkSourceIdUpdate(t.sort().toString()):"string"==typeof t?void this._checkSourceIdUpdate(t):void(this.layerSourceId=A.default.VECTOR_SOURCE_ID)}},{key:"_checkSourceIdUpdate",value:function(t){var e=this,n=!0;if(this.layerSourceMap.forEach(function(i,r){i===t&&(n=!1,e.layerSourceId=r)}),n){var i=A.default.VECTOR_SOURCE_ID+"_"+this.id;this.layerSourceMap.set(i,t),this.layerSourceId=i}}},{key:"_checkVectorSrc",value:function(){var t=this,e=this.vectorSrc,n={};return Array.isArray(e)&&e.forEach(function(e){n.vectorSrc=n.vectorSrc||[],n.batchVectorSrc=n.batchVectorSrc||[],n.vectorSrc.push(t._concatVectorSrc(e)),n.batchVectorSrc.push(t._concatVectorSrc(e))}),"string"==typeof e&&(n.vectorSrc=[this._concatVectorSrc(e,"vector")],n.batchVectorSrc=[this._concatVectorSrc(e,"batchvector")]),n}},{key:"_concatVectorSrc",value:function(t){return"batchvector"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"batchvector")?t+"?"+P.batchVectorSrc[0].split("?")[1]:t+"?"+P.vectorSrc[0].split("?")[1]}},{key:"_removeSource",value:function(){if(this.map){!this.map.findLayer(function(t){return t instanceof e})&&(this.map.removeSource(this.layerSourceId),P.layerSourceMap&&P.layerSourceMap.delete(this.layerSourceId),this.layerSourceMap=P.layerSourceMap)}}}]),e}(w.default);e.default=k;var L={base:[{type:M.BASE_LAYER_TYPE.base,filter:M.BASE_LAYER_TYPE.base},{type:M.BASE_LAYER_TYPE.ground,filter:M.BASE_LAYER_TYPE.ground}],arrow:[{type:M.BASE_LAYER_TYPE.arrow,filter:M.BASE_LAYER_TYPE.arrow}],building2d:[{type:M.BASE_LAYER_TYPE.building2d,filter:M.BASE_LAYER_TYPE.building3d}],building3d:[{type:M.BASE_LAYER_TYPE.building3d,filter:M.BASE_LAYER_TYPE.building3d}],point:[{type:M.BASE_LAYER_TYPE.point,filter:M.BASE_LAYER_TYPE.point},{type:M.BASE_LAYER_TYPE.text,filter:M.BASE_LAYER_TYPE.text}],label:[{type:M.BASE_LAYER_TYPE.label,filter:M.BASE_LAYER_TYPE.label},{type:M.BASE_LAYER_TYPE.text,filter:M.BASE_LAYER_TYPE.text}]}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),a=i(r),o=n(1),s=i(o),l=n(10),u=i(l),c=function(){function t(e,n){(0,a.default)(this,t),this.max=e,this.onRemove=n,this.reset()}return(0,s.default)(t,[{key:"reset",value:function(){var t=this;return u.default.forIn(this.data,function(e,n){t.onRemove(n)}),this.data={},this.order=[],this}},{key:"add",value:function(t,e){if(this.has(t))this.order.splice(this.order.indexOf(t),1),this.data[t]=e,this.order.push(t);else if(this.data[t]=e,this.order.push(t),this.order.length>this.max){var n=this.get(this.order[0]);n&&this.onRemove(n)}return this}},{key:"has",value:function(t){return t in this.data}},{key:"keys",value:function(){return this.order}},{key:"get",value:function(t){if(!this.has(t))return null;var e=this.data[t];return delete this.data[t],this.order.splice(this.order.indexOf(t),1),e}},{key:"getWithoutRemoving",value:function(t){return this.has(t)?this.data[t]:null}},{key:"remove",value:function(t){if(!this.has(t))return this;var e=this.data[t];return delete this.data[t],this.onRemove(e),this.order.splice(this.order.indexOf(t),1),this}},{key:"setMaxSize",value:function(t){for(this.max=t;this.order.length>this.max;){var e=this.get(this.order[0]);e&&this.onRemove(e)}return this}}]),t}();e.default=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=y.default.QMAPI_style+t;return o(e).then(function(n){var i=n.version,r=n.cacheJson;return u({styleId:t,version:i,serviceSrc:M.styleSrc,qosId:"st"}).then(function(n){if(n?l(e,n):n=r,!n)throw Error("未知错误：获取样式文件失败。");return(0,g.setBgColor)(t,n.data),n.data})}).catch(function(t){console.error(t)})}function a(t){var e=y.default.QMAPI_style_indoor+t;return o(e).then(function(n){var i=n.version,r=n.cacheJson;return u({styleId:t,version:i,serviceSrc:M.indoorStyleSrc,qosId:"in_st"}).then(function(t){return t?(l(e,t),t.data):r?r.data:null},function(t){return t&&console.error(t.status+": "+t.message),null})})}function o(t){return new m.default(function(e){T.support()?T.get(t,function(t){var n=JSON.parse(t)||null,i=n?n.version:-1;e({version:i,cacheJson:n})}):(console.error("兼容性错误：当前浏览器不支持LocalStorage。"),e({version:-1}))})}function s(t,e){return new m.default(function(n){if(T.support()){(0,g.setBgColor)(e,t);var i=y.default.QMAPI_style+"config";T.set(i,(0,p.default)({data:t}),function(){n(!0)})}else console.error("兼容性错误：当前浏览器不支持LocalStorage。"),n(!1)})}function l(t,e){T.support()&&T.set(t,(0,p.default)(e))}function u(t){var e=t.styleId,n=t.version,i=void 0===n?-1:n,r=t.serviceSrc,a=void 0===r?M.styleSrc:r,o=t.qosId,s=void 0===o?"st":o,l=d(a,{id:e,version:i});return new m.default(function(t,n){A.getJSON(null,l,function(r,a,o){"in_st"===s?c({err:r,result:a,time:o,resolve:t,reject:n,styleId:e,version:i}):f({err:r,result:a,time:o,resolve:t,reject:n,styleId:e,version:i})})})}function c(t){var e=t.err,n=t.result,i=t.time,r=t.resolve,a=t.reject,o=t.styleId,s=t.version;if(!e&&n&&n.data){var l=!0;for(var u in n.data)if(n.data.hasOwnProperty(u)){l=!1;break}l?r(null):((0,x.qos)("in_st",{styleId:o,version:s,loadTime:i}),r(n))}else(0,x.qos)("in_st",{styleId:o,version:s,error:e&&e.status||0}),a(e||"未知错误：获取样式文件失败。")}function f(t){var e=t.err,n=t.result,i=t.time,r=t.resolve,a=t.reject,o=t.styleId,s=t.version;if(e||!n)(0,x.qos)("st",{styleId:o,version:s,error:e&&e.status||0}),a(e||"未知错误：获取样式文件失败。");else{if(n&&n.data&&E.default.isLocal)return void r(n);if(n&&0===n.isup)r(null);else{var l=n&&n.url;if(!l)return void a("未返回cdn地址，获取样式失败。");A.getJSON(null,l,function(t,n,l){t||!n?((0,x.qos)("st",{styleId:o,version:s,error:e&&e.status||0}),a(e||"未知错误：获取样式文件失败。")):((0,x.qos)("st",{styleId:o,version:s,loadTime:i+l}),r(n))})}}}function d(t,e){var n=t;return S.default.forIn(e,function(t,e){n=n.replace("{"+t+"}",e)}),n}Object.defineProperty(e,"__esModule",{value:!0});var h=n(94),p=i(h),v=n(23),m=i(v);e.loadStyleFile=r,e.loadIndoorStyleFile=a,e.setStyleConfig=s,e.loadStyleFileFromServer=u;var g=n(524),_=n(120),y=i(_),x=n(44),b=n(10),S=i(b),w=n(108),E=i(w),A=n(79),T=n(89),M=n(22)},function(t,e,n){"use strict";function i(t,e){var n=(0,a.default)(t.getLat()),i=(0,a.default)(e.getLat());return 2*Math.asin(Math.sqrt(Math.pow(Math.sin((n-i)/2),2)+Math.cos(n)*Math.cos(i)*Math.pow(Math.sin(((0,a.default)(t.getLng())-(0,a.default)(e.getLng()))/2),2)))}Object.defineProperty(e,"__esModule",{value:!0});var r=n(130),a=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){var i=void 0,r=new(Function.prototype.bind.apply(p.Color,[null].concat((0,f.default)(e.color.map(function(t){return t/e.intensity}))))),a=e.intensity;switch(e.type){case TMap.constants.LIGHT_TYPE.POINT:var o=e.position,s=e.height,l=n.projectToWorldPlane(o),u=s/(n._getSpatialResolution(20,o.getLat())*n.getScale());return i=new p.PointLight(r,a),i.position.set(l.x,-l.y,u),t.children[0].add(i),void t._lightMap.set(e.id,i);case TMap.constants.LIGHT_TYPE.AMBIENT:i=new p.AmbientLight(r,a);break;case TMap.constants.LIGHT_TYPE.DIRECTION:default:var c;i=new p.DirectionalLight(r,a);var d=e.direction.map(function(t){return 3e3*t});(c=i.position).set.apply(c,(0,f.default)(d))}i&&(t.add(i),t._lightMap.set(e.id,i))}function a(t,e){var n=e.id,i=t._lightMap.get(n);i&&(i.parent.remove(i),t._lightMap.delete(n))}function o(t){t._lightMap.forEach(function(t){t.parent.remove(t)}),t._lightMap.clear()}function s(t,e,n){t["$origin_"+e]=t[e],t[e]=u(t[e],n)}function l(t,e){t[e]=t["$origin_"+e],delete t["$origin_"+e]}function u(t,e){return function(){var n=t.apply(this,arguments);return e.apply(this,arguments),n}}var c=n(18),f=i(c),d=n(95),h=i(d),p=n(224);e.synchronizeLight=function(t,e){var n=t.getLightManager();e._lightMap=new h.default,n.getLights().forEach(function(n){r(e,n,t)}),s(n,"addLight",function(n){r(e,n,t)}),s(n,"removeLight",function(t){a(e,t)}),s(n,"clearLights",function(){o(e)})},e.desynchronizeLight=function(t,e){var n=t.getLightManager();o(e),l(n,"addLight"),l(n,"removeLight"),l(n,"clearLights")}},,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),a=i(r),o=n(1),s=i(o),l=n(403),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a.default)(this,t);var n=e.map,i=e.renderer,r=e.camera,o=e.scene,s=e.group;this.map=n,this.renderer=i,this.camera=r,this.scene=o,this.scene=o,this.group=s,this.map&&this.scene&&(0,l.synchronizeLight)(this.map,this.scene)}return(0,s.default)(t,[{key:"setMap",value:function(t){this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"setCamera",value:function(t){this.camera=t}},{key:"getCamera",value:function(){return this.camera}},{key:"setRenderer",value:function(t){this.renderer=t}},{key:"getRenderer",value:function(){return this.renderer}},{key:"setScene",value:function(t){this.scene=t}},{key:"getScene",value:function(){return this.scene}},{key:"setGroup",value:function(t){this.group=t}},{key:"getGroup",value:function(){return this.group}},{key:"updateLight",value:function(){(0,l.synchronizeLight)(this.map,this.scene)}}]),t}();e.default=u},,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(93),v=i(p),m=n(310),g=i(m),_=n(28),y=n(44),x=n(10),b=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this));return n.id=(0,x.uniqueId)(),n.initCollisionConfig(t),n.onInit(t),n.dom=n.createDOM(),n.map=null,n.setMap(t.map),(0,y.statCn)("DOMOverlay"),n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"initCollisionConfig",value:function(t){var e=t.enableCollision,n=t.collisionOptions,i=void 0===n?{}:n;i.sameSource=!0===i.sameSource||!!e,i.crossSource=!0===i.crossSource,i.vectorBaseMapSource=!0===i.vectorBaseMapSource,this.collisionOptions=i}},{key:"_addToMap",value:function(){this.map&&(this.map._overlayer.childs.domOverlayLayer.appendChild(this.dom),this.update(),this._listener=(0,_.throttleWithFrame)(this.update.bind(this)),this.collisionOptions.vectorBaseMapSource?(this.map.on("move",this.update.bind(this)),this.map.on("resize",this.update.bind(this)),this.map.on("offset_changed",this.update.bind(this))):(this.map.on("move",this._listener),this.map.on("resize",this._listener),this.map.on("offset_changed",this._listener)),this._onMapdestroy=this._onMapdestroy.bind(this),this.map.on("destroy",this._onMapdestroy))}},{key:"update",value:function(){var t=this;this.updateDOM();var e=this.collisionOptions,n=e.sameSource,i=e.crossSource,r=e.vectorBaseMapSource;if(this.map&&(n||i||r)){var a=this._getDomOverlayCollisionInstance(),o=this.map,s=o.width,l=o.height;a&&([{type:"sameSource",isEnabled:n,dataSetName:"domCollisionMap"},{type:"crossSource",isEnabled:i,dataSetName:"domCrossCollisionMap"},{type:"vectorBaseMapSource",isEnabled:r,dataSetName:"domVectorCollisionMap"}].forEach(function(e){e.isEnabled&&a.addCollision(t.id,{dom:t.dom,width:s,height:l},e.dataSetName)}),a.checkCrossLayerCollisionDataSet()&&this.map&&this.map._fire("data_loaded"))}}},{key:"_onMapdestroy",value:function(){this.setMap(null)}},{key:"_getDomOverlayCollisionInstance",value:function(){if(this.map&&"function"==typeof this.map._getDomOverlayCollision)return this.map._getDomOverlayCollision()}},{key:"_removeFromMap",value:function(){if(this.map){this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom);var t=this.collisionOptions,e=t.sameSource,n=t.crossSource,i=t.vectorBaseMapSource,r=e||n||i,a=n||i;if(r){var o=this._getDomOverlayCollisionInstance();o&&(o.removeCollision(this.id),a&&this.map&&this.map._fire("data_loaded"))}this.map.off("move",this._listener),this.map.off("resize",this._listener),this.map.off("offset_changed",this._listener),this.map.off("destroy",this._onMapdestroy),this._listener=null}}},{key:"getMap",value:function(){return this.map}},{key:"setMap",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.map===t?this:!t||t instanceof g.default?(this._removeFromMap(),this.map=t,this._addToMap(),this):(console.error("类型错误: map参数类型错误，应为TMap.Map。"),this)}},{key:"destroy",value:function(){return this.onDestroy(),this.setMap(null),this.removeAllListeners(),this}},{key:"onInit",value:function(){}},{key:"onDestroy",value:function(){}},{key:"createDOM",value:function(){return document.createElement("div")}},{key:"updateDOM",value:function(){}}]),e}(v.default);e.default=b},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),a=i(r),o=n(1),s=i(o),l=n(75),u=i(l),c=n(10),f=n(36),d=i(f),h=n(29),p=d.default.isNumber,v=d.default.isUndefined,m={color:"rgba(0, 0, 0, 1)",backgroundColor:"rgba(0, 0, 0, 0)",borderColor:"rgba(0, 0, 0, 0)",strokeColor:"rgba(0, 0, 0, 0)",borderWidth:0,size:14,scale:1,borderRadius:0,offset:new u.default(0,0),angle:0,alignment:"center",verticalAlignment:"middle"},g=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a.default)(this,t),e=(0,c.extend)({},m,e),this.color=e.color,this.backgroundColor=e.backgroundColor,this.borderColor=e.borderColor,this.borderWidth=e.borderWidth,this.strokeColor=e.strokeColor,this.size=e.size,this.width=e.width,this.height=e.height,this.padding=e.padding,this.borderRadius=e.borderRadius,this.scale=e.scale,this.offset=e.offset,this.angle=e.angle,this.alignment=e.alignment,this.verticalAlignment=e.verticalAlignment,this.wrapOptions=e.wrapOptions,this._checkWarpOptions(this.wrapOptions)}return(0,s.default)(t,[{key:"_checkWarpOptions",value:function(t){if(!t||"[object Object]"!==Object.prototype.toString.call(t))return void(t=void 0);v(t.maxWidth)||p(t.maxWidth)&&!(t.maxWidth<=0)?v(t.maxLineCount)||p(t.maxLineCount)&&!(t.maxLineCount<=0)&&Math.floor(t.maxLineCount)===t.maxLineCount?v(t.rowSpacing)||p(t.rowSpacing)&&!(t.rowSpacing<0)||(new h.BaseTypeError("wrapOptions.rowSpacing","number",t.rowSpacing).error(),t.rowSpacing=0):(new h.BaseTypeError("wrapOptions.maxLineCount","number",t.maxLineCount).error(),t.maxLineCount=1/0):(new h.BaseTypeError("wrapOptions.maxWidth","number",t.maxWidth).error(),t.maxWidth=1/0)}}]),t}();e.default=g},function(t,e,n){"use strict";function i(){a.removeEventListener("DOMContentLoaded",i,!1),r.fireReady()}var r=[],a=document;r.isReady=!1,r._used=!1,r.ready=function(t){r.initReady(),r.isReady?t():r.push(t)},r.initReady=function(){if(!r._used){if(r._used=!0,"complete"===a.readyState||"interactive"===a.readyState)return r.fireReady();a.addEventListener("DOMContentLoaded",i,!1)}},r.fireReady=function(){if(!r.isReady){if(!a.body)return setTimeout(r.fireReady,16);if(r.isReady=!0,r.length)for(var t,e=0;t=r[e];e++)t()}},e.domReady=r.ready},function(t,e,n){"use strict";function i(t,e){if(!t.unprojectFromContainer(e))return!1;var n=!0,i=t.renderEngine.camera.getFogEdge()[1]+.15;if(i<1){var r=(1-i)*t.transform.height/2;e.y<r&&(n=!1)}return n}Object.defineProperty(e,"__esModule",{value:!0}),e.isResponsible=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(32),h=i(d),p=n(4),v=i(p),m=n(216),g=i(m),_=n(113),y=n(148),x=n(121),b=n(226),S=n(10),w=i(S),E=function(t){function e(t){(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t));return n.store=new _.Store("buffer",128,16,b.deleteInstanceCacllback),n.commonUniformList=["uMatrix","uCenter","uZoom","uPixelsPerMeter","uResolution","uProject_uCommonUnitsPerWorldUnit","uProject_uCommonUnitsPerWorldUnit2","uRelativeCenter"],n}return(0,v.default)(e,t),(0,u.default)(e,[{key:"draw",value:function(t,e,n,i){if(t&&n){var r=this.gl;r.useProgram(r.program),this.setUniforms(t,e,n,i);var a=this.setBuffers(t);r.drawElements(r.TRIANGLES,a.index.length,a.index.type,0),r.bindBuffer(r.ARRAY_BUFFER,null),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,null)}}},{key:"setBuffers",value:function(t){var e=this.gl,n=this.store,i=t.uid,r=!1;if(n){n.exist(i)?this.isBufferChanged(n.get(i),t)&&(r=!0):n.set(i,this.createBuffer(t));var a=n.get(i);return w.default.forIn(a,function(n,i){var a=i.buffer,o=i.location,s=i.size,l=i.type;a.bind(),r&&(a.bufferData(t[n],{usage:e.DYNAMIC_DRAW}),i.data=t[n]),"index"!==n&&a.pointToAttrib({location:o,size:s,type:l})}),a}}},{key:"setUniforms",value:function(t,e,n,i){var r=this.gl,a=e.center,o=e.zoom,s=1/(0,x.getSpatialResolution)(o),l=i.distanceScales||e.getDistanceScales(),u=(0,y.splitLatLngNumber)(a.lat),c=(0,y.splitLatLngNumber)(a.lng),f={latPart:(0,y.splitLatLngNumber)(t.center.lat),lngPart:(0,y.splitLatLngNumber)(t.center.lng)};r.uniformMatrix4fv(this.uMatrix,!1,n.elements),r.uniform4f(this.uCenter,c.high,u.high,c.low,u.low),r.uniform1f(this.uZoom,o),r.uniform3f(this.uPixelsPerMeter,s,s,s),r.uniform3f(this.uProject_uCommonUnitsPerWorldUnit,l.pixelsPerDegree[0],l.pixelsPerDegree[1],l.pixelsPerDegree[2]),r.uniform3f(this.uProject_uCommonUnitsPerWorldUnit2,l.pixelsPerDegree2[0],l.pixelsPerDegree2[1],l.pixelsPerDegree2[2]),r.uniform2f(this.uResolution,e.width,e.height),r.uniform4f(this.uRelativeCenter,f.lngPart.high,f.latPart.high,f.lngPart.low,f.latPart.low)}},{key:"destroy",value:function(){this.commonUniformList=null,(0,h.default)(e.prototype.__proto__||(0,a.default)(e.prototype),"destroy",this).call(this)}}]),e}(g.default);e.default=E},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(15),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(542),f=i(c),d=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,-1,1,0,1]),h=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.default)(this,t);var i=n.id,r=void 0===i?"pass":i;this.id=r,this.gl=e,this.props={},(0,a.default)(this.props,n)}return(0,u.default)(t,[{key:"setProps",value:function(t){(0,a.default)(this.props,t)}},{key:"render",value:function(t){var e=t.inputBuffer,n=t.outputBuffer,i=t.preserve,r=void 0!==i&&i,a=t.colorIndex,o=void 0===a?0:a,s=this.gl;n?n.bind(s):s.frameBuffer&&s.frameBuffer.unbind(),r||s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT|s.STENCIL_BUFFER_BIT),this._renderPass({inputBuffer:e,colorIndex:o})}},{key:"destroy",value:function(){this._onDestroy(),this._painter&&this._painter.destroy(),this.id=null,this.gl=null,this.props=null}},{key:"_onDestroy",value:function(){}},{key:"_renderPass",value:function(t){var e=t.inputBuffer,n=this.gl;this._painter||(this._painter=new f.default({gl:n})),e.color.bind(n),this._painter.preDraw(),this._painter.draw({matrix:{elements:d},size:{width:2,height:2},texInfo:{s:0,t:0,w:1,h:1},opacity:1})}}]),t}();e.default=h},function(t,e,n){"use strict";function i(t){return Math.pow(2,Math.ceil((0,a.default)(t)))}Object.defineProperty(e,"__esModule",{value:!0});var r=n(267),a=function(t){return t&&t.__esModule?t:{default:t}}(r);e.getPowerOf2=i,e.default={extendCanvasToPow2:function(t,e){function n(t){if(t<2)return!1;var e=(0,a.default)(t);return e===~~e}return e=e||1,t&&t.isPow2&&1===e?t:n(t.width)&&n(t.height)&&1===e?(t.isPow2=!0,t):function(t,e){var n=document.createElement("canvas"),r=n.getContext("2d");return n.width=i(t.width*e),n.height=i(t.height*e),r.drawImage(t,0,0,n.width,n.height),n.isPow2=!0,n}(t,e)}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(0),a=i(r),o=n(1),s=i(o),l=n(503),u=i(l),c=n(245).default,f=n(75),d=n(46),h=n(10),p=c[0],v=function(){function t(){(0,a.default)(this,t),this.a=new f(128,128),this.b=256/360,this.c=256/(2*Math.PI),this.d=!0}return(0,s.default)(t,[{key:"fromLatLngToPoint",value:function(t){var e=new f(0,0),n=this.a;e.x=n.x+t.lng*this.b;var i=h.clamp(Math.sin(h.degreeToRadian(t.lat)),-(1-1e-15),1-1e-15);return e.y=n.y+.5*Math.log((1+i)/(1-i))*-this.c,e.z=t.height*this.c/p*Math.cos(h.degreeToRadian(t.lat)),e}},{key:"fromPointToLatLng",value:function(t){var e=this.a,n=h.radianToDegree(2*Math.atan(Math.exp((t.y-e.y)/-this.c))-Math.PI/2),i=(t.x-e.x)/this.b,r=(t.z||0)*p*Math.cos(h.degreeToRadian(n))/this.c;return new d(n,i,r,!0)}},{key:"latLngToCoord",value:function(t,e){var n=this.fromLatLngToPoint(t);if(n){var i=e,r=Math.pow(2,i);n.x=n.x*r,n.y=n.y*r,n.z=n.z*r}return n}},{key:"coordToLatLng",value:function(t,e){var n=e,i=Math.pow(2,n),r=new u.default(t.x/i,t.y/i,(t.z||0)/i);return this.fromPointToLatLng(r)}}]),t}();t.exports=v},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.HEX_REG=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,e.RGB_REG=/^rgb\((\d+,?\s*){3}\)$/,e.RGBA_REG=/^rgba\((\d+,?\s*){3},\s*[0-9.]+\)$/},function(t,e,n){"use strict";function i(t,e,n){return t*(1-n)+e*n}function r(t,e){t=o.default.wrap(t,0,360);var n=Math.abs(t,e);return Math.abs(t-360-e)<n&&(t-=360),Math.abs(t+360-e)<n&&(t+=360),t}Object.defineProperty(e,"__esModule",{value:!0});var a=n(10),o=function(t){return t&&t.__esModule?t:{default:t}}(a);i.number=i,i.vec2=function(t,e,n){return[i(t[0],e[0],n),i(t[1],e[1],n)]},i.color=function(t,e,n){return[i(t[0],e[0],n),i(t[1],e[1],n),i(t[2],e[2],n),i(t[3],e[3],n)]},i.array=function(t,e,n){return t.map(function(t,r){return i(t,e[r],n)})},i.latlng=function(t,e,n){return[i(t.getLat(),e.getLat(),n),i(t.getLng(),e.getLng(),n)]},i.rotation=function(t,e,n){return e=r(e,t),i(t,e,n)},e.default=i},function(t,e,n){"use strict";function i(t){return a(r(o(t)))}function r(t){return l(u(s(t),8*t.length))}function a(t){for(var e,n=g?"0123456789ABCDEF":"0123456789abcdef",i="",r=0;r<t.length;r++)e=t.charCodeAt(r),i+=n.charAt(e>>>4&15)+n.charAt(15&e);return i}function o(t){for(var e,n,i="",r=-1;++r<t.length;)e=t.charCodeAt(r),n=r+1<t.length?t.charCodeAt(r+1):0,55296<=e&&e<=56319&&56320<=n&&n<=57343&&(e=65536+((1023&e)<<10)+(1023&n),r++),e<=127?i+=String.fromCharCode(e):e<=2047?i+=String.fromCharCode(192|e>>>6&31,128|63&e):e<=65535?i+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):e<=2097151&&(i+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return i}function s(t){for(var e=Array(t.length>>2),n=0;n<e.length;n++)e[n]=0;for(var n=0;n<8*t.length;n+=8)e[n>>5]|=(255&t.charCodeAt(n/8))<<n%32;return e}function l(t){for(var e="",n=0;n<32*t.length;n+=8)e+=String.fromCharCode(t[n>>5]>>>n%32&255);return e}function u(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var n=1732584193,i=-271733879,r=-1732584194,a=271733878,o=0;o<t.length;o+=16){var s=n,l=i,u=r,c=a;n=f(n,i,r,a,t[o+0],7,-680876936),a=f(a,n,i,r,t[o+1],12,-389564586),r=f(r,a,n,i,t[o+2],17,606105819),i=f(i,r,a,n,t[o+3],22,-1044525330),n=f(n,i,r,a,t[o+4],7,-176418897),a=f(a,n,i,r,t[o+5],12,1200080426),r=f(r,a,n,i,t[o+6],17,-1473231341),i=f(i,r,a,n,t[o+7],22,-45705983),n=f(n,i,r,a,t[o+8],7,1770035416),a=f(a,n,i,r,t[o+9],12,-1958414417),r=f(r,a,n,i,t[o+10],17,-42063),i=f(i,r,a,n,t[o+11],22,-1990404162),n=f(n,i,r,a,t[o+12],7,1804603682),a=f(a,n,i,r,t[o+13],12,-40341101),r=f(r,a,n,i,t[o+14],17,-1502002290),i=f(i,r,a,n,t[o+15],22,1236535329),n=d(n,i,r,a,t[o+1],5,-165796510),a=d(a,n,i,r,t[o+6],9,-1069501632),r=d(r,a,n,i,t[o+11],14,643717713),i=d(i,r,a,n,t[o+0],20,-373897302),n=d(n,i,r,a,t[o+5],5,-701558691),a=d(a,n,i,r,t[o+10],9,38016083),r=d(r,a,n,i,t[o+15],14,-660478335),i=d(i,r,a,n,t[o+4],20,-405537848),n=d(n,i,r,a,t[o+9],5,568446438),a=d(a,n,i,r,t[o+14],9,-1019803690),r=d(r,a,n,i,t[o+3],14,-187363961),i=d(i,r,a,n,t[o+8],20,1163531501),n=d(n,i,r,a,t[o+13],5,-1444681467),a=d(a,n,i,r,t[o+2],9,-51403784),r=d(r,a,n,i,t[o+7],14,1735328473),i=d(i,r,a,n,t[o+12],20,-1926607734),n=h(n,i,r,a,t[o+5],4,-378558),a=h(a,n,i,r,t[o+8],11,-2022574463),r=h(r,a,n,i,t[o+11],16,1839030562),i=h(i,r,a,n,t[o+14],23,-35309556),n=h(n,i,r,a,t[o+1],4,-1530992060),a=h(a,n,i,r,t[o+4],11,1272893353),r=h(r,a,n,i,t[o+7],16,-155497632),i=h(i,r,a,n,t[o+10],23,-1094730640),n=h(n,i,r,a,t[o+13],4,681279174),a=h(a,n,i,r,t[o+0],11,-358537222),r=h(r,a,n,i,t[o+3],16,-722521979),i=h(i,r,a,n,t[o+6],23,76029189),n=h(n,i,r,a,t[o+9],4,-640364487),a=h(a,n,i,r,t[o+12],11,-421815835),r=h(r,a,n,i,t[o+15],16,530742520),i=h(i,r,a,n,t[o+2],23,-995338651),n=p(n,i,r,a,t[o+0],6,-198630844),a=p(a,n,i,r,t[o+7],10,1126891415),r=p(r,a,n,i,t[o+14],15,-1416354905),i=p(i,r,a,n,t[o+5],21,-57434055),n=p(n,i,r,a,t[o+12],6,1700485571),a=p(a,n,i,r,t[o+3],10,-1894986606),r=p(r,a,n,i,t[o+10],15,-1051523),i=p(i,r,a,n,t[o+1],21,-2054922799),n=p(n,i,r,a,t[o+8],6,1873313359),a=p(a,n,i,r,t[o+15],10,-30611744),r=p(r,a,n,i,t[o+6],15,-1560198380),i=p(i,r,a,n,t[o+13],21,1309151649),n=p(n,i,r,a,t[o+4],6,-145523070),a=p(a,n,i,r,t[o+11],10,-1120210379),r=p(r,a,n,i,t[o+2],15,718787259),i=p(i,r,a,n,t[o+9],21,-343485551),n=v(n,s),i=v(i,l),r=v(r,u),a=v(a,c)}return Array(n,i,r,a)}function c(t,e,n,i,r,a){return v(m(v(v(e,t),v(i,a)),r),n)}function f(t,e,n,i,r,a,o){return c(e&n|~e&i,t,e,r,a,o)}function d(t,e,n,i,r,a,o){return c(e&i|n&~i,t,e,r,a,o)}function h(t,e,n,i,r,a,o){return c(e^n^i,t,e,r,a,o)}function p(t,e,n,i,r,a,o){return c(n^(e|~i),t,e,r,a,o)}function v(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function m(t,e){return t<<e|t>>>32-e}Object.defineProperty(e,"__esModule",{value:!0});var g=0;e.default=i},function(t,e,n){t.exports={default:n(428),__esModule:!0}},function(t,e,n){t.exports={default:n(430),__esModule:!0}},function(t,e,n){t.exports={default:n(431),__esModule:!0}},function(t,e,n){t.exports={default:n(432),__esModule:!0}},,,,,,function(t,e,n){var i=n(2),r=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return r.stringify.apply(r,arguments)}},function(t,e,n){n(437),t.exports=n(2).Math.fround},function(t,e,n){n(438),t.exports=n(2).Math.sign},function(t,e,n){n(439),t.exports=Math.pow(2,-52)},function(t,e,n){n(440),t.exports=n(2).Number.isInteger},function(t,e,n){n(441),t.exports=9007199254740991},function(t,e,n){n(67),n(37),n(442),n(444),n(443),t.exports=n(2).WeakMap},function(t,e,n){"use strict";var i=n(92),r=n(40).getWeak,a=n(13),o=n(7),s=n(91),l=n(69),u=n(251),c=n(24),f=n(118),d=u(5),h=u(6),p=0,v=function(t){return t._l||(t._l=new m)},m=function(){this.a=[]},g=function(t,e){return d(t.a,function(t){return t[0]===e})};m.prototype={get:function(t){var e=g(this,t);if(e)return e[1]},has:function(t){return!!g(this,t)},set:function(t,e){var n=g(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=h(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,a){var u=t(function(t,i){s(t,u,e,"_i"),t._t=e,t._i=p++,t._l=void 0,void 0!=i&&l(i,n,t[a],t)});return i(u.prototype,{delete:function(t){if(!o(t))return!1;var n=r(t);return!0===n?v(f(this,e)).delete(t):n&&c(n,this._i)&&delete n[this._i]},has:function(t){if(!o(t))return!1;var n=r(t);return!0===n?v(f(this,e)).has(t):n&&c(n,this._i)}}),u},def:function(t,e,n){var i=r(a(e),!0);return!0===i?v(t).set(e,n):i[t._i]=n,t},ufstore:v}},function(t,e,n){var i=n(7),r=Math.floor;t.exports=function(t){return!i(t)&&isFinite(t)&&r(t)===t}},function(t,e,n){var i=n(292),r=Math.pow,a=r(2,-52),o=r(2,-23),s=r(2,127)*(2-o),l=r(2,-126),u=function(t){return t+1/a-1/a};t.exports=Math.fround||function(t){var e,n,r=Math.abs(t),c=i(t);return r<l?c*u(r/l/o)*l*o:(e=(1+o/a)*r,n=e-(e-r),n>s||n!=n?c*(1/0):c*n)}},function(t,e,n){var i=n(6);i(i.S,"Math",{fround:n(436)})},function(t,e,n){var i=n(6);i(i.S,"Math",{sign:n(292)})},function(t,e,n){var i=n(6);i(i.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,n){var i=n(6);i(i.S,"Number",{isInteger:n(435)})},function(t,e,n){var i=n(6);i(i.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){"use strict";var i,r=n(8),a=n(251)(0),o=n(77),s=n(40),l=n(230),u=n(434),c=n(7),f=n(118),d=n(118),h=!r.ActiveXObject&&"ActiveXObject"in r,p=s.getWeak,v=Object.isExtensible,m=u.ufstore,g=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},_={get:function(t){if(c(t)){var e=p(t);return!0===e?m(f(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return u.def(f(this,"WeakMap"),t,e)}},y=t.exports=n(234)("WeakMap",g,_,u,!0,!0);d&&h&&(i=u.getConstructor(g,"WeakMap"),l(i.prototype,_),s.NEED=!0,a(["delete","has","get","set"],function(t){var e=y.prototype,n=e[t];o(e,t,function(e,r){if(c(e)&&!v(e)){this._f||(this._f=new i);var a=this._f[t](e,r);return"set"==t?this:a}return n.call(this,e,r)})}))},function(t,e,n){n(235)("WeakMap")},function(t,e,n){n(236)("WeakMap")},function(t,e,n){"use strict";var i=n(461)(!0);t.exports=function(t,e,n){return e+(n?i(t,e).length:1)}},function(t,e,n){"use strict";var i=n(143),r=n(277),a=n(88);t.exports=function(t){for(var e=i(this),n=a(e.length),o=arguments.length,s=r(o>1?arguments[1]:void 0,n),l=o>2?arguments[2]:void 0,u=void 0===l?n:r(l,n);u>s;)e[s++]=t;return e}},function(t,e,n){"use strict";var i=n(107),r=n(276);t.exports=function(t,e,n){e in t?i.f(t,e,r(0,n)):t[e]=n}},function(t,e,n){var i=n(64),r=n(63).document,a=i(r)&&i(r.createElement);t.exports=function(t){return a?r.createElement(t):{}}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var i=n(78)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[i]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e,n){var i=n(63).document;t.exports=i&&i.documentElement},function(t,e,n){var i=n(64),r=n(459).set;t.exports=function(t,e,n){var a,o=e.constructor;return o!==n&&"function"==typeof o&&(a=o.prototype)!==n.prototype&&i(a)&&r&&r(t,a),t}},function(t,e,n){var i=n(294),r=n(78)("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||a[r]===t)}},function(t,e,n){var i=n(64),r=n(253),a=n(78)("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[a])?!!e:"RegExp"==r(t))}},function(t,e,n){"use strict";var i=n(271),r=n(11),a=n(211),o=n(220),s=n(294),l=n(563),u=n(297),c=n(274),f=n(78)("iterator"),d=!([].keys&&"next"in[].keys()),h=function(){return this};t.exports=function(t,e,n,p,v,m,g){l(n,e,p);var _,y,x,b=function(t){if(!d&&t in A)return A[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},S=e+" Iterator",w="values"==v,E=!1,A=t.prototype,T=A[f]||A["@@iterator"]||v&&A[v],M=T||b(v),I=v?w?b("entries"):M:void 0,P="Array"==e?A.entries||T:T;if(P&&(x=c(P.call(new t)))!==Object.prototype&&x.next&&(u(x,S,!0),i||"function"==typeof x[f]||o(x,f,h)),w&&T&&"values"!==T.name&&(E=!0,M=function(){return T.call(this)}),i&&!g||!d&&!E&&A[f]||o(A,f,M),s[e]=M,s[S]=h,v)if(_={values:w?M:b("values"),keys:m?M:b("keys"),entries:I},g)for(y in _)y in A||a(A,y,_[y]);else r(r.P+r.F*(d||E),e,_);return _}},function(t,e){var n=Math.expm1;t.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:n},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e,n){"use strict";var i=n(359),r=RegExp.prototype.exec,a=String.prototype.replace,o=r,s=function(){var t=/a/,e=/b*/g;return r.call(t,"a"),r.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),l=void 0!==/()??/.exec("")[1];(s||l)&&(o=function(t){var e,n,o,u,c=this;return l&&(n=new RegExp("^"+c.source+"$(?!\\s)",i.call(c))),s&&(e=c.lastIndex),o=r.call(c,t),s&&o&&(c.lastIndex=c.global?o.index+o[0].length:e),l&&o&&o.length>1&&a.call(o[0],n,function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(o[u]=void 0)}),o}),t.exports=o},function(t,e,n){var i=n(64),r=n(61),a=function(t,e){if(r(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=n(239)(Function.call,n(240).f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return a(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:a}},function(t,e,n){var i=n(365)("keys"),r=n(278);t.exports=function(t){return i[t]||(i[t]=r(t))}},function(t,e,n){var i=n(242),r=n(254);t.exports=function(t){return function(e,n){var a,o,s=String(r(e)),l=i(n),u=s.length;return l<0||l>=u?t?"":void 0:(a=s.charCodeAt(l),a<55296||a>56319||l+1===u||(o=s.charCodeAt(l+1))<56320||o>57343?t?s.charAt(l):a:t?s.slice(l,l+2):o-56320+(a-55296<<10)+65536)}}},function(t,e,n){var i=n(454),r=n(254);t.exports=function(t,e,n){if(i(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(r(t))}},function(t,e,n){"use strict";var i=n(242),r=n(254);t.exports=function(t){var e=String(r(this)),n="",a=i(t);if(a<0||a==1/0)throw RangeError("Count can't be negative");for(;a>0;(a>>>=1)&&(e+=e))1&a&&(n+=e);return n}},function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,e,n){var i,r,a,o=n(239),s=n(560),l=n(451),u=n(448),c=n(63),f=c.process,d=c.setImmediate,h=c.clearImmediate,p=c.MessageChannel,v=c.Dispatch,m=0,g={},_=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},y=function(t){_.call(t.data)};d&&h||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return g[++m]=function(){s("function"==typeof t?t:Function(t),e)},i(m),m},h=function(t){delete g[t]},"process"==n(253)(f)?i=function(t){f.nextTick(o(_,t,1))}:v&&v.now?i=function(t){v.now(o(_,t,1))}:p?(r=new p,a=r.port2,r.port1.onmessage=y,i=o(a.postMessage,a,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(i=function(t){c.postMessage(t+"","*")},c.addEventListener("message",y,!1)):i="onreadystatechange"in u("script")?function(t){l.appendChild(u("script")).onreadystatechange=function(){l.removeChild(this),_.call(t)}}:function(t){setTimeout(o(_,t,1),0)}),t.exports={set:d,clear:h}},function(t,e,n){"use strict";function i(t,e,n){var i,r,a,o=new Array(n),s=8*n-e-1,l=(1<<s)-1,u=l>>1,c=23===e?F(2,-24)-F(2,-77):0,f=0,d=t<0||0===t&&1/t<0?1:0;for(t=O(t),t!=t||t===N?(r=t!=t?1:0,i=l):(i=z(V(t)/U),t*(a=F(2,-i))<1&&(i--,a*=2),t+=i+u>=1?c/a:c*F(2,1-u),t*a>=2&&(i++,a/=2),i+u>=l?(r=0,i=l):i+u>=1?(r=(t*a-1)*F(2,e),i+=u):(r=t*F(2,u-1)*F(2,e),i=0));e>=8;o[f++]=255&r,r/=256,e-=8);for(i=i<<e|r,s+=e;s>0;o[f++]=255&i,i/=256,s-=8);return o[--f]|=128*d,o}function r(t,e,n){var i,r=8*n-e-1,a=(1<<r)-1,o=a>>1,s=r-7,l=n-1,u=t[l--],c=127&u;for(u>>=7;s>0;c=256*c+t[l],l--,s-=8);for(i=c&(1<<-s)-1,c>>=-s,s+=e;s>0;i=256*i+t[l],l--,s-=8);if(0===c)c=1-o;else{if(c===a)return i?NaN:u?-N:N;i+=F(2,e),c-=o}return(u?-1:1)*i*F(2,c-e)}function a(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function o(t){return[255&t]}function s(t){return[255&t,t>>8&255]}function l(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function u(t){return i(t,52,8)}function c(t){return i(t,23,4)}function f(t,e,n){T(t[P],e,{get:function(){return this[n]}})}function d(t,e,n,i){var r=+n,a=E(r);if(a+e>t[H])throw D(k);var o=t[G]._b,s=a+t[Y],l=o.slice(s,s+e);return i?l:l.reverse()}function h(t,e,n,i,r,a){var o=+n,s=E(o);if(s+e>t[H])throw D(k);for(var l=t[G]._b,u=s+t[Y],c=i(+r),f=0;f<e;f++)l[u+f]=c[a?f:e-f-1]}var p=n(63),v=n(106),m=n(271),g=n(366),_=n(220),y=n(295),x=n(62),b=n(293),S=n(242),w=n(88),E=n(578),A=n(273).f,T=n(107).f,M=n(446),I=n(297),P="prototype",k="Wrong index!",L=p.ArrayBuffer,C=p.DataView,R=p.Math,D=p.RangeError,N=p.Infinity,B=L,O=R.abs,F=R.pow,z=R.floor,V=R.log,U=R.LN2,G=v?"_b":"buffer",H=v?"_l":"byteLength",Y=v?"_o":"byteOffset";if(g.ABV){if(!x(function(){L(1)})||!x(function(){new L(-1)})||x(function(){return new L,new L(1.5),new L(NaN),"ArrayBuffer"!=L.name})){L=function(t){return b(this,L),new B(E(t))};for(var j,W=L[P]=B[P],X=A(B),Z=0;X.length>Z;)(j=X[Z++])in L||_(L,j,B[j]);m||(W.constructor=L)}var q=new C(new L(2)),Q=C[P].setInt8;q.setInt8(0,2147483648),q.setInt8(1,2147483649),!q.getInt8(0)&&q.getInt8(1)||y(C[P],{setInt8:function(t,e){Q.call(this,t,e<<24>>24)},setUint8:function(t,e){Q.call(this,t,e<<24>>24)}},!0)}else L=function(t){b(this,L,"ArrayBuffer");var e=E(t);this._b=M.call(new Array(e),0),this[H]=e},C=function(t,e,n){b(this,C,"DataView"),b(t,L,"DataView");var i=t[H],r=S(e);if(r<0||r>i)throw D("Wrong offset!");if(n=void 0===n?i-r:w(n),r+n>i)throw D("Wrong length!");this[G]=t,this[Y]=r,this[H]=n},v&&(f(L,"byteLength","_l"),f(C,"buffer","_b"),f(C,"byteLength","_l"),f(C,"byteOffset","_o")),y(C[P],{getInt8:function(t){return d(this,1,t)[0]<<24>>24},getUint8:function(t){return d(this,1,t)[0]},getInt16:function(t){var e=d(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=d(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return a(d(this,4,t,arguments[1]))},getUint32:function(t){return a(d(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return r(d(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return r(d(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){h(this,1,t,o,e)},setUint8:function(t,e){h(this,1,t,o,e)},setInt16:function(t,e){h(this,2,t,s,e,arguments[2])},setUint16:function(t,e){h(this,2,t,s,e,arguments[2])},setInt32:function(t,e){h(this,4,t,l,e,arguments[2])},setUint32:function(t,e){h(this,4,t,l,e,arguments[2])},setFloat32:function(t,e){h(this,4,t,c,e,arguments[2])},setFloat64:function(t,e){h(this,8,t,u,e,arguments[2])}});I(L,"ArrayBuffer"),I(C,"DataView"),_(C[P],g.VIEW,!0),e.ArrayBuffer=L,e.DataView=C},function(t,e,n){e.f=n(78)},function(t,e,n){var i=n(334),r=n(78)("iterator"),a=n(294);t.exports=n(105).getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||a[i(t)]}},function(t,e,n){"use strict";var i=n(270),r=n(564),a=n(294),o=n(221);t.exports=n(455)(Array,"Array",function(t,e){this._t=o(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):"keys"==e?r(0,n):"values"==e?r(0,t[n]):r(0,[n,t[n]])},"values"),a.Arguments=a.Array,i("keys"),i("values"),i("entries")},function(t,e,n){!function(i,r){t.exports=e=r(n(50))}(0,function(t){!function(){var e=t,n=e.lib,i=n.Base,r=e.enc,a=r.Utf8,o=e.algo;o.HMAC=i.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=a.parse(e));var n=t.blockSize,i=4*n;e.sigBytes>i&&(e=t.finalize(e)),e.clamp();for(var r=this._oKey=e.clone(),o=this._iKey=e.clone(),s=r.words,l=o.words,u=0;u<n;u++)s[u]^=1549556828,l[u]^=909522486;r.sigBytes=o.sigBytes=i,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,n=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(n))}})}()})},function(t,e,n){!function(i,r){t.exports=e=r(n(50))}(0,function(t){return function(){var e=t,n=e.lib,i=n.WordArray,r=n.Hasher,a=e.algo,o=[],s=a.SHA1=r.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,i=n[0],r=n[1],a=n[2],s=n[3],l=n[4],u=0;u<80;u++){if(u<16)o[u]=0|t[e+u];else{var c=o[u-3]^o[u-8]^o[u-14]^o[u-16];o[u]=c<<1|c>>>31}var f=(i<<5|i>>>27)+l+o[u];f+=u<20?1518500249+(r&a|~r&s):u<40?1859775393+(r^a^s):u<60?(r&a|r&s|a&s)-1894007588:(r^a^s)-899497514,l=s,s=a,a=r<<30|r>>>2,r=i,i=f}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+a|0,n[3]=n[3]+s|0,n[4]=n[4]+l|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;return e[i>>>5]|=128<<24-i%32,e[14+(i+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(i+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=r.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA1=r._createHelper(s),e.HmacSHA1=r._createHmacHelper(s)}(),t.SHA1})},,,,,function(t,e,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function a(t){if(f===clearTimeout)return clearTimeout(t);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function o(){v&&h&&(v=!1,h.length?p=h.concat(p):m=-1,p.length&&s())}function s(){if(!v){var t=r(o);v=!0;for(var e=p.length;e;){for(h=p,p=[];++m<e;)h&&h[m].run();m=-1,e=p.length}h=null,v=!1,a(t)}}function l(t,e){this.fun=t,this.array=e}function u(){}var c,f,d=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(t){c=n}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(t){f=i}}();var h,p=[],v=!1,m=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];p.push(new l(t,e)),1!==p.length||v||r(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=u,d.addListener=u,d.once=u,d.off=u,d.removeListener=u,d.removeAllListeners=u,d.emit=u,d.prependListener=u,d.prependOnceListener=u,d.listeners=function(t){return[]},d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},,,,,,,,,,,,,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(t&&e)return e.y-t.y<=x&&e.x-t.x<=x}var a=n(25),o=i(a),s=n(0),l=i(s),u=n(1),c=i(u),f=n(777),d=i(f),h=n(215),p=n(75),v=n(93),m=n(28),g=n(10),_=g.forIn,y={scrollZoom:n(779),touchZoomRotate:n(781),touchTilt:n(780),doubleClickZoom:n(774),dragRotate:n(776),dragPan:n(775),longPress:n(778)},x=10,b=function(){function t(e,n){(0,l.default)(this,t),e.handler||(this.members=[e],this.map=e,this.eventHandlers=[],this.eventHandlers.push(m.on(window,"resize",this.onWindowResize.bind(this))),this.el=e.getContainer(),this.rl=e.getRenderContainer(),this.transform=e.transform,this.controlManager=e.controlManager,this.idleHandler=new d.default(this.transform),this.contextMenuEvent=null,this.mouseDown=!1,this.startPos=null,this.startTouchPoints=null,this.tapped=null,_(y,function(t,i){e[t]=new i(e,n),n&&n.disInteractive||e[t].enable()}),this.eventHandlers.push(m.on(this.controlManager,{control_added:function(t){e._fire("control_added",t,!0)},control_removed:function(t){e._fire("control_removed",t,!0)}})),this.eventHandlers.push(m.on(this.idleHandler,"idle",function(){e._fire("idle",null,!0)})),this.eventHandlers.push(m.on(e.canvasContainer,{webglcontextlost:e._onContextError.bind(e,"lost"),webglcontaxtrestored:e._onContextError.bind(e,"restored")})),this.eventHandlers.push(m.on(this.el,{mouseout:this.onMouseOut.bind(this),mousedown:this.onMouseDown.bind(this),mouseup:this.onMouseUp.bind(this),mousemove:this.onMouseMove.bind(this),touchstart:this.onTouchStart.bind(this),touchend:this.onTouchEnd.bind(this),touchmove:this.onTouchMove.bind(this),touchcancel:this.onTouchCancel.bind(this),click:this.onClick.bind(this),dblclick:this.onDblClick.bind(this),contextmenu:this.onContextMenu.bind(this)})))}return(0,c.default)(t,[{key:"destroy",value:function(){var t=this;_(y,function(e){t.map[e]&&(t.map[e].disable(),delete t.map[e])}),this.eventHandlers.forEach(function(t){t&&t.remove&&t.remove()}),this.members=null,this.map=null,this.eventHandlers=[],this.el=null,this.rl=null,this.transform=null,this.idleHandler=null,this.contextMenuEvent=null,this.mouseDown=!1,this.startPos=null,this.tapped=null}},{key:"onWindowResize",value:function(){var t=this.rl.clientWidth,e=this.rl.clientHeight;this.map.resize(t,e)}},{key:"onMouseOut",value:function(t){this.fireMouseEvent("mouseout",t)}},{key:"onMouseDown",value:function(t){this.map.stopMoving(),this.startPos=h.mousePos(this.el,t),this.fireMouseEvent("mousedown",t),this.mouseDown=!0}},{key:"onMouseUp",value:function(t){if(this.contextMenuEvent&&!this.rotating&&this.fireMouseEvent("contextmenu",this.contextMenuEvent),this.contextMenuEvent=null,this.mouseDown=!1,this.fireMouseEvent("mouseup",t),t&&2===t.button){var e=h.mousePos(this.el,t);this.startPos&&e.equals(this.startPos)&&this.fireMouseEvent("rightclick",t)}}},{key:"onMouseMove",value:function(t){if(!(this.map.dragPan&&this.map.dragPan.isActive()||this.map.dragRotate&&this.map.dragRotate.isActive())){for(var e=t.toElement||t.target;e&&e!==this.el;)e=e.parentNode;e===this.el&&this.fireMouseEvent("mousemove",t)}}},{key:"onTouchStart",value:function(t){if(t.preventDefault(),this.map.stopMoving(),this.fireTouchEvent("touchstart",t),t.touches&&!(t.touches.length>1)){var e=this.startTouchPoints;if(this.startTouchPoints=h.touchPos(this.el,t),this.tapped){clearTimeout(this.tapped),this.tapped=null;var n=e&&e[0],i=this.startTouchPoints&&this.startTouchPoints[0];n&&i&&(this.maybeDoubleTap=r(n,i)),this.tapped=setTimeout(this.onTouchTimeout.bind(this),300)}else this.tapped=setTimeout(this.onTouchTimeout.bind(this),300)}}},{key:"onTouchMove",value:function(t){this.fireTouchEvent("touchmove",t);var e=this.startTouchPoints[0],n=h.touchPos(this.el,t)[0];this.maybeDoubleTap&&e&&n&&(this.maybeDoubleTap=r(e,n))}},{key:"onTouchEnd",value:function(t){var e=this;this.fireTouchEvent("touchend",t),setTimeout(function(){if(e.tapped){var n=e.startTouchPoints[0],i=h.touchPos(e.el,t)[0];if(n&&i){var a=r(n,i);a&&e.fireTouchEvent("click",t),a&&e.maybeDoubleTap&&setTimeout(function(){e.fireTouchEvent("dblclick",t),e.maybeDoubleTap=!1},50)}}},50)}},{key:"onTouchCancel",value:function(t){this.maybeDoubleTap=!1,this.fireTouchEvent("touchcancel",t)}},{key:"onTouchTimeout",value:function(){this.maybeDoubleTap=!1,this.tapped=null}},{key:"onClick",value:function(t){var e=h.mousePos(this.el,t);this.startPos&&e.dist(this.startPos)<x&&this.fireMouseEvent("click",t)}},{key:"onDblClick",value:function(t){this.fireMouseEvent("dblclick",t),t.preventDefault()}},{key:"onContextMenu",value:function(t){var e=this.map.dragRotate&&this.map.dragRotate.isActive();this.mouseDown||e?this.mouseDown&&(this.contextMenuEvent=t):this.fireMouseEvent("contextmenu",t),t.preventDefault()}},{key:"fireMouseEvent",value:function(t,e){var n=h.mousePos(this.el,e);if(n){var i={latLng:this.map.unprojectFromContainer(n),point:n,originalEvent:e};"click"===t&&(i.poi=this.map._getPoiInfo(n));var r=!0,a=!1,s=void 0;try{for(var l,u=(0,o.default)(this.members);!(r=(l=u.next()).done);r=!0){l.value._fire(t,i)}}catch(t){a=!0,s=t}finally{try{!r&&u.return&&u.return()}finally{if(a)throw s}}}}},{key:"fireTouchEvent",value:function(t,e){var n=this,i=h.touchPos(this.el,e),r=i.reduce(function(t,e,n,i){return t.add(e.div(i.length))},new p(0,0)),a={latLng:this.map.unprojectFromContainer(r),point:r,latLngs:i.map(function(t){return n.map.unprojectFromContainer(t)},this),points:i,originalEvent:e};"click"===t&&(a.poi=this.map._getPoiInfo(i[0]));var s=!0,l=!1,u=void 0;try{for(var c,f=(0,o.default)(this.members);!(s=(c=f.next()).done);s=!0){c.value._fire(t,a)}}catch(t){l=!0,u=t}finally{try{!s&&f.return&&f.return()}finally{if(l)throw u}}}},{key:"registe",value:function(t){if(!(t instanceof v))throw new Error("illegal event type!");var e=!0,n=!1,i=void 0;try{for(var r,a=(0,o.default)(this.members);!(e=(r=a.next()).done);e=!0){if(r.value===t)return}}catch(t){n=!0,i=t}finally{try{!e&&a.return&&a.return()}finally{if(n)throw i}}this.members.push(t)}},{key:"cancel",value:function(t){if(!(t instanceof v))throw new Error("illegal event type!");for(var e=this.members,n=e.length-1;n>-1;n--)e[n]===t&&e.splice(n,1)}}]),t}();t.exports=b},function(t,e,n){"use strict";n(836),n(838),n(837),n(844),n(843),n(846),n(845),n(847),n(840),n(841),n(839),n(842),n(1011),n(1053)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.imageVertex="\nprecision mediump float;\n\nattribute vec2 a_position;\n\nuniform mat4 u_matrix;\nuniform vec2 u_size;\nuniform vec4 u_texInfo;\nvarying vec2 v_texCoord;\n\nvoid main() {\n\t\n\tv_texCoord = vec2(u_texInfo[0] + a_position.x * u_texInfo[2], u_texInfo[1] + a_position.y * u_texInfo[3]);\n\t\n\tvec2 position = vec2(a_position.x * u_size.x, (a_position.y - 1.0) * u_size.y);\n\n\tgl_Position = u_matrix * vec4(position, 0.0, 1.0);\n}\n"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.INSTANCE_PARTS="\nattribute vec2 positions;\n        \nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute vec2 instanceSizes;\nattribute vec4 instanceInfos;\n\n\nattribute vec3 instancePickingColors;\nattribute vec4 instanceFrames;\nattribute vec3 instancePixelOffset;\n",e.UNIFORM_PARTS="\nuniform float u_sizeScale;\nuniform float u_sizeMinPixels;\nuniform float u_sizeMaxPixels;\nuniform vec2 u_textureDim;\nuniform float u_opacity;\nuniform float u_mapScale;\n\n",e.generateMainPart=function(t,e){return"\n    \n    vec2 imageSize = instanceFrames.zw;\n            \n    vec2 sizePixels = clamp(instanceSizes * u_sizeScale, vec2(u_sizeMinPixels), vec2(u_sizeMaxPixels));\n    \n    "+t+"\n\n    vec3 latlngPoint = instancePositions;\n     float delta  = latlngPoint.x - uCenter.x;\n\n\n\n\n\n\n     latlngPoint.x = mix( mix(latlngPoint.x,latlngPoint.x + 360.0,step(delta,-180.)), latlngPoint.x - 360.0, step(180., delta));\n     \n    if (bool(instanceInfos.w))  {\n        vec4 center_proj = uMatrix * vec4(vec3(instancePositions.xy + instancePositions64xyLow.xy, uProject_uCommonUnitsPerWorldUnit.z * instancePositions.z), 1.0);\n        vec2 center_screen = proj_position_to_screen(center_proj);\n        vec2 corner_screen = center_screen + pixelOffset * u_mapScale;\n    \n        gl_Position = screen_to_proj_position(corner_screen, center_proj.z, center_proj.w);\n    } else {\n        gl_Position = uMatrix * vec4(instancePositions.xy + instancePositions64xyLow.xy + pixelOffset, 0.0, 1.0);\n    }\n    \n    vTextureCoords = mix(\n        instanceFrames.xy,\n        instanceFrames.xy + imageSize,\n        (positions.xy + 1.0) / 2.0\n    ) / u_textureDim;\n    \n    vTextureCoords.y = 1.0 - vTextureCoords.y;\n    \n\n    "+e+"\n    vColor = picking_getFinalColor(vColor, instancePickingColors);\n    vOpacity = instancePixelOffset.z;\n    "}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(222),r=n(301),a=n(284);e.default={v:"\n\t\t#define SHADER_NAME polygon-vertex-shader\n\n\t\tattribute vec2 vertexPositions;\n\t\t\n\t\tattribute float vertexValid;\n\t\tattribute vec3 positions;\n\t\tattribute vec2 positions64xyLow;\n\t\tattribute vec3 nextPositions;\n\t\tattribute vec2 nextPositions64xyLow;\n\t\tattribute float elevations;\n\t\tattribute vec4 fillColors;\n\t\tattribute vec4 lineColors;\n\t\tattribute vec3 pickingColors;\n\n\t\t"+i.UNIFORM_PART+"\n        \n\t\t"+r.PICK_UNIFORM+"\n\t\t\n\t\t"+a.LIGHT_UNIFORM+"\n\t\t\n\t\tuniform bool u_isSideVertex;\n\t\tuniform bool u_extruded;\n\t\tuniform bool u_isWireframe;\n\t\tuniform float u_elevationScale;\n\t\tuniform float u_opacity;\n\t\t\n\t\tvarying vec4 vColor;\n\t\tvarying float isValid;\n\n\t\t"+a.LIGHT_VARYING+"\n\n\t\t"+i.PROJECTION_PART+"\n        \n\t\t"+r.PICK_FUNCTION+"\n\t\t\n\t\t"+a.LIGHT_VERTEX+"\n\t\t"+a.LIGHT_FRAG+"\n\t\t\n\t\tvoid main(void) {\n\t\t\tvec3 pos;\n\t\t\tvec2 pos64xyLow;\n\t\t\tvec3 normal;\n\t\t\tvec4 colors = mix(fillColors, lineColors, float(u_isWireframe));\n\n\t\t\tfloat isSideVertex = float(u_isSideVertex);\n\t\t\tfloat extruded = float(u_extruded);\n\n\t\t\tpos = mix(\n\t\t\t\tpositions,\n\t\t\t\t\n\t\t\t\tmix(positions, nextPositions, vertexPositions.x),\n\t\t\t\tisSideVertex\n\t\t\t);\n\t\t\tpos64xyLow = mix(\n\t\t\t\tpositions64xyLow,\n\t\t\t\tmix(positions64xyLow, nextPositions64xyLow, vertexPositions.x),\n\t\t\t\tisSideVertex\n\t\t\t);\n\t\t\tisValid = mix(1.0, vertexValid, isSideVertex);\n\t\t\tpos.z += mix(\n\t\t\t\t0.0,\n\t\t\t\tabs(elevations) * mix(1.0, vertexPositions.y, isSideVertex),\n\t\t\t\textruded\n\t\t\t) * u_elevationScale;\n\t\t\t\n\t\t\t\n\t\t\tpos.z = mix(pos.z, mix(pos.z - abs(elevations), pos.z, float(elevations >= 0.0)), extruded);\n\t\t\t\n\t\t\tvec3 local_position = project_view_local_position_precision(pos.xyz, pos64xyLow.xy);\n\t\t\tvec3 current_local_position = project_view_local_position_precision(positions.xyz, positions64xyLow.xy);\n\t\t\tvec3 next_local_position = project_view_local_position_precision(nextPositions.xyz, nextPositions64xyLow.xy);\n\n\t\t\tgl_Position = uMatrix * vec4(local_position, 1.0);\n\t\t\t\n\t\t\tnormal = mix(\n\t\t\t\tvec3(0., 0., 1.),\n\t\t\t\tmix(\n\t\t\t\t\tvec3(0.0, 0.0, 1.0),\n\t\t\t\t\tnormalize(\n\t\t\t\t\t\tcross(\n\t\t\t\t\t\t\tnormalize(vec3(next_local_position.xy - current_local_position.xy, 0.0)),\n\t\t\t\t\t\t\tvec3(0.0, 0.0, 1.0)\n\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\t\tfloat(u_isSideVertex && !u_isWireframe)\n\t\t\t\t),\n\t\t\t\textruded\n\t\t\t);\n\n\t\t\tlighting_apply_on_vertex(local_position.xyz, normal, mat4(1.0));\n\t\t\tvec4 color = vec4(colors.rgb, colors.a * u_opacity) / 255.0;\n\t\t\tvec4 lightingColor = mix(\n\t\t\t\tcolor,\n\t\t\t\tlighting_apply_on_color(color),\n\t\t\t\t\n\t\t\t\textruded\n\t\t\t);\n\t\t\tvColor = picking_getFinalColor(lightingColor, pickingColors);\n\t\t}\n\t",f:"\n\t\t#define SHADER_NAME polygon-fragment-shader\n\n\t\tprecision highp float;\n\t\t\n\t\tvarying vec4 vColor;\n\t\tvarying float isValid;\n\t\t\n\t\tvoid main(void) {\n\t\t\tif (isValid < 0.5) {\n\t\t\t\tdiscard;\n\t\t\t}\n\t\t\tgl_FragColor = vColor;\n\t\t}\n\t",name:"polygon"}},,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(17),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(36),f=i(c),d=n(29),h=f.default.isNumber,p=f.default.isValidColor,v=f.default.isObject,m=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.default)(this,t);var n=e.stops,i=void 0===n?{}:n,r=e.angle,a=void 0===r?0:r;if(this.stops={},!v(i))return void new d.BaseTypeError("stops","object",i).error();for(var o in i){var l=i[o];if(!p(l))return void console.error("GradientColorOptions.stops中key为 "+o+" 的color属性无效",l);this.stops[o]=l}if(!h(a))return void new d.BaseTypeError("GradientColorOptions.angle","number",a).error();this.angle=a}return(0,u.default)(t,[{key:"addColorStop",value:function(t,e){return h(t)?p(e)?void(this.stops[t]=e):void console.error("addColorStop中key为 "+t+" 的color属性无效",e):void new d.BaseTypeError("offset","number",e).error()}},{key:"setAngle",value:function(t){if(!h(t))return void new d.BaseTypeError("setAngle.angle","number",t).error();this.angle=t}},{key:"getAngle",value:function(){return this.angle}},{key:"isEmpty",value:function(){return(0,a.default)(this.stops).length<=0}}],[{key:"createDoubleColorGradient",value:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!p(e))return console.error("参数错误：createDoubleColorGradient.color1 颜色值不合法。"),null;if(!p(n))return console.error("参数错误：createDoubleColorGradient.color2 颜色值不合法。"),null;if(!h(i))return new d.BaseTypeError("createDoubleColorGradient.angle","number",i).error(),null;var r=new t;return r.addColorStop(0,e),r.addColorStop(1,n),r.setAngle(i),r}},{key:"convert",value:function(e){var n=e.constructor===Array?e:[];if(e.constructor===Object&&2===(0,a.default)(e).length)for(var i in e)n.push(e[i]);if(2===n.length&&p(n[0])&&p(n[1])){var r=new t;return r.addColorStop(0,n[0]),r.addColorStop(1,n[1]),r}return null}}]),t}();t.exports=m},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(0),a=i(r),o=n(1),s=i(o),l=n(10),u=i(l),c=function(){function t(e,n,i){(0,a.default)(this,t),this.worker=e,this.parent=n,this.mapId=i,this.callbacks={},this.callbackID=0,this.receive=this.receive.bind(this),this.worker.addEventListener("message",this.receive,!1)}return(0,s.default)(t,[{key:"send",value:function(t,e,n,i){var r=this;if(this.worker){var a=n?u.default.uniqueId()+":"+this.callbackID:null;if(this.callbackID+=1,n&&(this.callbacks[a]=n),e.dataFinishCallback){var o=e.dataFinishCallback;o.finishPromise().then(function(t){r.worker&&r.worker.postMessage({targetMapId:i,sourceMapId:r.mapId,type:o.type,id:String(a),data:t})}),e.dataFinishCallback=null}this.worker&&this.worker.postMessage({targetMapId:i,sourceMapId:this.mapId,type:t,id:String(a),data:e})}}},{key:"receive",value:function(t){var e=this,n=t.data,i=n.id,r=void 0;if(!n.targetMapId||this.mapId===n.targetMapId){var a=function(t,n,r){if(e.worker){var a=null;n&&n.transferableList&&(a=n.transferableList,delete n.transferableList),e.worker.postMessage({sourceMapId:e.mapId,type:"<response>",id:String(i),error:t,data:n,time:r},a||[])}};if("<response>"===n.type)r=this.callbacks[n.id],n.data&&n.data.baseData||delete this.callbacks[n.id],r&&r(n.error||null,n.data,n.time);else if(void 0!==n.id&&this.parent[n.type])this.parent[n.type](n.sourceMapId,n.data,a);else if(void 0!==n.id&&this.parent.getWorkerSource){var o=n.type.split("."),s=this.parent.getWorkerSource(n.sourceMapId,o[0]);s[o[1]](n.data,a)}}}},{key:"remove",value:function(){this.worker.removeEventListener("message",this.receive,!1),this.worker=null}}]),t}();t.exports=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){var i={};return d.default.forIn(t,function(t,r){if(e.hasOwnProperty(t)){var a=e[t];if(m.default.isNumber(r))i[t]="rotation"===t||"heading"===t?p.default.rotation(r,a,n):(0,p.default)(r,a,n);else if(r instanceof _.default){var o=p.default.latlng(r,a,n);i[t]=new _.default(o[0],o[1])}else r instanceof Array&&(i[t]=p.default.array(r,a,n))}}),i}function a(t,e){for(var n=1;n<t.length;n++){var i=t[n];if(i.percentage>=e){var a=t[n-1];return r(a,i,(e-a.percentage)/(i.percentage-a.percentage))}}}function o(t,e){t.sort(function(t,e){return t.percentage-e.percentage}),0!==t[0].percentage&&t.unshift((0,u.default)({},e,{percentage:0}));var n=t[t.length-1];1!==n.percentage&&t.push((0,u.default)({},n,{percentage:1}))}function s(){delete this._onAnimateFrame,delete this._onAnimateLoopEnd,delete this._onAnimateResume,delete this._onStop,delete this._onPause,delete this._abortTimeProcess}Object.defineProperty(e,"__esModule",{value:!0}),e.animatableMixin=void 0;var l=n(15),u=i(l),c=n(28),f=n(10),d=i(f),h=n(416),p=i(h),v=n(36),m=i(v),g=n(46),_=i(g);e.animatableMixin={_animateStatus:"done",_animate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1],n=e.onFrame,i=void 0===n?function(){}:n,r=e.onEnd,l=void 0===r?function(){}:r,u=e.onLoop,c=void 0===u?function(){}:u,f=e.onStop,h=void 0===f?function(){}:f,p=e.onPause,v=void 0===p?function(){}:p,g=e.onResume,_=void 0===g?function(){}:g,y=this,x=arguments[2],b=x.duration,S=void 0===b?1e3:b,w=x.loop,E=void 0===w?1:w,A=x.initTick,T=void 0===A?0:A,M=x.id,I=void 0===M?d.default.uniqueId():M,P=x.easing,k=void 0===P?d.default.linearEase:P,L=arguments[3];if(this._isIdle()||this._stopAnimate(),t.length<2)return void console.error("参数错误：关键帧数量不足2："+t.length+"。");if(o(t,L),!((E=Number(E))<1)&&m.default.isNumber(E)){var C=1,R=T;return c.call(this,C),this._onAnimateLoopEnd=function(){C<E?(C+=1,c.call(y,C),y._startLoop(S,0)):(y._animateStatus="done",l.call(y),s.call(y))},this._onAnimateFrame=function(e){R=e,e=k(e);var n=a(t,e);i.call(y,{percentage:e,frame:n}),1===e&&y._onAnimateLoopEnd()},this._onAnimateResume=function(){y._startLoop(S,R),_.call(y)},this._onStop=h,this._onPause=v,this._animateStatus="doing",this._startLoop(S,T),i.call(this,{percentage:0,frame:t[0]}),I}},_startLoop:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._abortTimeProcess=(0,c.timed)(this._onAnimateFrame,null,t,this,e)},_stopAnimate:function(){this._isIdle()||(this._animateStatus="done",this._abortTimeProcess&&this._abortTimeProcess(),this._onStop&&this._onStop.call(this),s.call(this))},_pauseAnimate:function(){this._isAnimating()&&(this._animateStatus="paused",this._abortTimeProcess&&this._abortTimeProcess(),this._onPause&&this._onPause.call(this))},_resumeAnimate:function(){this._isPaused()&&(this._animateStatus="doing",this._onAnimateResume&&this._onAnimateResume())},_isAnimating:function(){return"doing"===this._animateStatus},_isPaused:function(){return"paused"===this._animateStatus},_isIdle:function(){return"done"===this._animateStatus}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(108),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=r.default.key||""},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(264),v=i(p),m={Scale:{m:"米",km:"公里",mile:"英里",feet:"英尺"}},g=function(t,e){"[object String]"===Object.prototype.toString.call(t.innerText)?t.innerText=e:t.textContent=e},_="position:absolute;border:1px solid #ffffff;width:2px;height:6px;background:#000;font-size:0;line-height:0;",y=_+"border-bottom-width:0px;",x=_+"border-top-width:0px;",b=[2e6,2e6,2e6,2e6,1e6,5e5,2e5,1e5,5e4,2e4,1e4,5e3,2e3,1e3,500,200,100,50,20,10,5,2,1],S=function(t){return t>22?1:b[Math.round(t)]},w=function(t){var e=Math.pow(10,(""+Math.floor(t)).length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=2?2:1,e*n},E=function(t){return Math.round(125*t)-10},A=function(t,e,n){if(t&&e&&n)return Math.abs(156543.04/n*Math.cos(t.lat*Math.PI/180))/Math.pow(2,e)},T=function(t){var e=document.createElement("div");return"up"===t?(e.style.cssText=y+";border-right-width:0px",e.style.top="7px",e.style.height="9px"):"down"===t&&(e.style.cssText=x+";border-right-width:0px",e.style.top="17px",e.style.height="6px"),e.style.left=0,e.style.zIndex=0,e.className="tmap-scale-line",e},M=function(t){var e=document.createElement("div");return"up"===t?(e.style.cssText=y,e.style.top="0px"):"down"===t&&(e.style.cssText=x,e.style.top="9px"),e.style.left="81px",e.style.zIndex=2,e.className="tmap-scale-line",e},I=function(){var t=document.createElement("div");return t.style.cssText="position:absolute;border:1px solid #ffffff;width:2px;height:6px;background:#000;font-size:0;line-height:0;z-index:1;border-left-width:0px;",t.style.left="3px",t.style.width="80px",t.style.height="2px",t.style.top="6px",t.className="tmap-scale-line",t},P=function(t){var e=document.createElement("div"),n="up"===t?"top: 0px;":"bottom:-17px;";return e.style.cssText="position:relative; "+n+" font:11px arial,simsun;color:#000;text-align:left; left:5px;",e.className="tmap-scale-text",e},k=function(t){for(var e=[],n=["up","down"],i=0;i<2;i++){var r=n[i],a=document.createElement("div");a.style.cssText="width:100px;position:absolute;";var o=document.createElement("div");o.style.cssText="position:absolute;height:7px;width:84px;bottom:0px;";var s=T(r),l=M(r),u=I(),c=P(r);a.appendChild(s),o.appendChild(l),o.appendChild(u),a.appendChild(c),a.appendChild(o),e[r+"_rr"]=l,e[r+"_rl"]=s,e[r+"_rm"]=u,e[r+"_ruler"]=o,e[r+"_text"]=c,e[r+"_rl"]=s,t.appendChild(a)}var f=void 0;return{getMaxWidth:function(){return f},refresh:function(t,n){var i=void 0,r=void 0,a=e.up_rr,o=e.up_rm,s=e.up_text,l=e.up_ruler,u=e.down_rr,c=e.down_rm,d=e.down_ruler,h=e.down_text,p=S(n);i=E(p/t);var v=i;r=p<1e3?p+" "+m.Scale.m:p/1e3+" "+m.Scale.km,g(s,r),s.style.width="80px",o.style.width=i+"px",a.style.left=i+0+"px";var _=3.2808399*t,y=void 0,x=void 0,b=void 0;_>5280?(y=_/5280,x=w(y),i=E(x/y),r=x+" "+m.Scale.mile):(b=w(_),i=E(b/_),r=b+" "+m.Scale.feet),g(h,r);var A=parseInt(o.style.width,10),T=i>A?i:A;h.style.width="80px",c.style.width=T+"px",u.style.left=i+"px",c.style.visibility=i>A?"":"hidden",o.style.visibility=i>A?"hidden":"",d.style.zIndex=i>A?0:1,l.style.zIndex=i>A?1:0,f=Math.max(v,T)}}},L=function(t,e,n,i){var r=document.createElement("div");r.style.cssText="position:absolute;";var a=k(r),o=function(e,n,i){var r=A(e,n,i);if(r){var o=125*r;a.refresh(o,n),t.style.width=a.getMaxWidth()+10+"px"}};return o(e,n,i),t.style.width="100px",t.style.height="35px",t.appendChild(r),{node:t,updateZoom:o}},C=function(t,e,n){var i=document.createElement("div");return i.className="tmap-scale-control",L(i,t,e,n)},R=function(t){function e(t){return(0,s.default)(this,e),(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t))}return(0,h.default)(e,t),(0,u.default)(e,[{key:"createDOM",value:function(t){var e=t.center,n=t.zoom,i=t.scale,r=document.createElement("div");return r.style.width="125px",r.style.height="35px",this.scaleControlView=C(e,n,i),r.appendChild(this.scaleControlView.node),r}},{key:"onAdd",value:function(){this.updateControl=this.updateControl.bind(this),this.map.on("zoom_changed",this.updateControl),this.map.on("scale_changed",this.updateControl)}},{key:"onRemove",value:function(){this.map.off("zoom_changed",this.updateControl),this.map.off("scale_changed",this.updateControl)}},{key:"updateControl",value:function(){var t=this.map.getCenter(),e=this.map.getZoom(),n=this.map.getScale();this.scaleControlView.updateZoom(t,e,n)}}]),e}(v.default);e.default=R},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(264),v=i(p),m=n(305),g=n(304),_=n(28),y=i(_),x=n(120),b=n(1055),S=n(1069),w=n(1070),E=n(1068);n(1059);var A=function(t){function e(t){(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t));return n.clickStrategy={compassCircle:function(t){if("end"!==t&&"2D"!==n.getViewMode())return!n.getPitchable()&&n.getRotatable()?void(n.map&&n.map.easeTo({heading:0})):n.getPitchable()&&!n.getRotatable()?void(n.map&&n.map.easeTo({pitch:0})):void(n.map&&n.map.easeTo({pitch:0,heading:0,roll:0}))},rotateTop:function(t){"2D"!==n.getViewMode()&&n.getPitchable()&&n.map&&(n.pitchHandle||(n.pitchHandle=n.map.getNonStopPitch()),"start"===t?n.pitchHandle.begin(1):"end"===t&&n.pitchHandle.cancel())},rotateBottom:function(t){"2D"!==n.getViewMode()&&n.getPitchable()&&n.map&&(n.pitchHandle||(n.pitchHandle=n.map.getNonStopPitch()),"start"===t?n.pitchHandle.begin(-1):"end"===t&&n.pitchHandle.cancel())},rotateLeft:function(t){"2D"!==n.getViewMode()&&n.getRotatable()&&n.map&&(n.rotateHandle||(n.rotateHandle=n.map.getNonStopRotate()),"start"===t?n.rotateHandle.begin(1):"end"===t&&n.rotateHandle.cancel())},rotateRight:function(t){"2D"!==n.getViewMode()&&n.getRotatable()&&n.map&&(n.rotateHandle||(n.rotateHandle=n.map.getNonStopRotate()),"start"===t?n.rotateHandle.begin(-1):"end"===t&&n.rotateHandle.cancel())}},n._bindEvents(),n._construct(),n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"_construct",value:function(){this.compassImg=this.dom.querySelector(".compass-img"),this.compassCircle=this.dom.querySelector(".compass-circle"),this.rotateLeftImg=this.dom.querySelector(".rotate-left-img"),this.rotateRightImg=this.dom.querySelector(".rotate-right-img"),this.rotateTopImg=this.dom.querySelector(".rotate-top-img"),this.rotateBottomImg=this.dom.querySelector(".rotate-bottom-img"),this.compassImg.src=E,this.rotateLeftImg.src=w,this.rotateRightImg.src=w,this.rotateTopImg.src=S,this.rotateBottomImg.src=S}},{key:"createDOM",value:function(){var t=document.createElement("div"),e=(0,m.Template)(b,{});return t.innerHTML?t.insertAdjacentHTML("afterbegin",e):t.innerHTML=e,t}},{key:"onAdd",value:function(){var t=this.onRotateChange.bind(this),e=this.onPitchChange.bind(this);if(this.throttleRotateChange=y.default.throttle(t,50),this.throttlePitchChange=y.default.throttle(e,50),this.map.on("rotate",this.throttleRotateChange),this.map.on("pitch",this.throttlePitchChange),"3D"===this.getViewMode()){var n=this.map.getPitch(),i=this.map.getRotation();this.setButtonUseful(!0),this.checkButtonState(n),this.checkCompassState(n,i)}else this.setButtonUseful(!1)}},{key:"_bindEvents",value:function(){var t=this;this.handlers=[],["compass-circle","rotate-left","rotate-right","rotate-top","rotate-bottom"].forEach(function(e){t.handleListen(e)}),this.handlers.push((0,_.on)(this.dom,"dblclick",function(t){t.stopPropagation()})),this.handlers.push((0,_.on)(this.dom,"mousedown,mousemove,mouseup,mouseover,mouseleave,click,dblclick, touchstart,touchmove,touchend",function(t){t.stopPropagation()}))}},{key:"onRotateChange",value:function(t){var e=t.target.getRotation();this.compassImg.style.transform="rotateZ("+e+"deg)"}},{key:"onPitchChange",value:function(t){var e=Math.round(t.target.getPitch());this.compassCircle.style.transform="rotatex("+e+"deg)",this.checkButtonState(e)}},{key:"handleListen",value:function(t){var e=this,n=this.toCamel(t),i=this.dom.querySelector("."+t),r=new g.Finger(i,{preventDefaultMove:!0,preventDefaultEnd:!0,stopPropagation:!0});this.handlers.push((0,_.on)(r,"touch-start",function(){e.clickStrategy[n]&&e.clickStrategy[n]("start")})),this.handlers.push((0,_.on)(r,"touch-end",function(){e.clickStrategy[n]&&e.clickStrategy[n]("end")}))}},{key:"toCamel",value:function(t){return t&&t.replace(/\-(\w)/g,function(t,e){return e.toUpperCase()})}},{key:"setButtonUseful",value:function(t){if(!t){return void["rotate-bottom","rotate-top","rotate-left","rotate-right"].forEach(function(t){document.getElementsByClassName(t)[0].classList.add("unclickable-"+t),document.getElementsByClassName(t)[0].classList.remove("clickable-"+t)})}var e=this.getPitchable(),n=this.getRotatable(),i=[],r=[];e?i=i.concat(["rotate-bottom","rotate-top"]):r=r.concat(["rotate-bottom","rotate-top"]),n?i=i.concat(["rotate-left","rotate-right"]):r=r.concat(["rotate-left","rotate-right"]),i.forEach(function(t){document.getElementsByClassName(t)[0].classList.add("clickable-"+t),document.getElementsByClassName(t)[0].classList.remove("unclickable-"+t)}),r.forEach(function(t){document.getElementsByClassName(t)[0].classList.add("unclickable-"+t),document.getElementsByClassName(t)[0].classList.remove("clickable-"+t)})}},{key:"checkButtonState",value:function(t){0===t&&this.lastPitch!==t?(document.getElementsByClassName("rotate-bottom")[0].classList.add("unclickable-rotate-bottom"),document.getElementsByClassName("rotate-bottom")[0].classList.remove("clickable-rotate-bottom")):0===this.lastPitch&&0!==t?(document.getElementsByClassName("rotate-bottom")[0].classList.add("clickable-rotate-bottom"),document.getElementsByClassName("rotate-bottom")[0].classList.remove("unclickable-rotate-bottom")):80===t&&this.lastPitch!==t?(document.getElementsByClassName("rotate-top")[0].classList.add("unclickable-rotate-top"),document.getElementsByClassName("rotate-top")[0].classList.remove("clickable-rotate-top")):80===this.lastPitch&&80!==t&&(document.getElementsByClassName("rotate-top")[0].classList.add("clickable-rotate-top"),document.getElementsByClassName("rotate-top")[0].classList.remove("unclickable-rotate-top")),this.lastPitch=t}},{key:"checkCompassState",value:function(t,e){this.compassImg.style.transform="rotateZ("+e+"deg)",this.compassCircle.style.transform="rotatex("+t+"deg)"}},{key:"getViewMode",value:function(){return this.map.getViewMode()}},{key:"getPitchable",value:function(){return this.map.getPitchable()}},{key:"getRotatable",value:function(){return this.map.getRotatable()}},{key:"setViewMode",value:function(t){t===x.VIEW_MODE.MAP_2D?this.setButtonUseful(!1):this.setButtonUseful(!0)}},{key:"onRemove",value:function(){this.map.off("rotate",this.throttleRotateChange),this.map.off("pitch",this.throttlePitchChange),this.rotateHandle=null,this.lastPitch=null,this.throttleRotateChange=null,this.throttlePitchChange=null}},{key:"onDestroy",value:function(){this.handlers.forEach(function(t){t&&t.remove()})}}]),e}(v.default);e.default=A},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(264),v=i(p),m=n(305),g=n(304),_=n(28),y=n(1056),x=n(1071),b=n(1072);n(1060);var S=function(t){function e(t){(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t));return n.dom.querySelector(".tmap-zoom-in-image").src=x,n.dom.querySelector(".tmap-zoom-out-image").src=b,n._bindEvents(),n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"createDOM",value:function(){var t=document.createElement("div"),e=(0,m.Template)(y,{});return t.innerHTML?t.insertAdjacentHTML("afterbegin",e):t.innerHTML=e,t}},{key:"setNumVisible",value:function(t){t?(this.dom.querySelector(".tmap-zoom-control").style.height="102px",this.dom.querySelector(".tmap-zoom-number").style.display="block",this.dom.querySelector(".tmap-zoom-spliter").style.display="none",this.dom.querySelector(".tmap-zoom-out").style.top="70px"):(this.dom.querySelector(".tmap-zoom-control").style.height="80px",this.dom.querySelector(".tmap-zoom-number").style.display="none",this.dom.querySelector(".tmap-zoom-spliter").style.display="block",this.dom.querySelector(".tmap-zoom-out").style.top="48px")}},{key:"_bindEvents",value:function(){var t=this;this.zoomIn=this.dom.querySelector(".tmap-zoom-in"),this.zoomOut=this.dom.querySelector(".tmap-zoom-out"),this.zoomNumberShow=this.dom.querySelector(".tmap-zoom-number"),this.updateZoomNumberDisplay=function(){t.zoomNumberShow.innerHTML=t.map.getZoom().toFixed(1)},this.handlers=[],this.zoomInFinger=new g.Finger(this.zoomIn,{preventDefaultMove:!0,preventDefaultEnd:!0,stopPropagation:!0}),this.zoomOutFinger=new g.Finger(this.zoomOut,{preventDefaultMove:!0,preventDefaultEnd:!0,stopPropagation:!0}),this.handlers.push((0,_.on)(this.zoomInFinger,"tap",function(){t.map&&t.map.zoomBy(1)})),this.handlers.push((0,_.on)(this.zoomOutFinger,"tap",function(){t.map&&t.map.zoomBy(-1)})),this.handlers.push((0,_.on)(this.dom,"dblclick",function(t){t.stopPropagation()})),this.handlers.push((0,_.on)(this.dom,"mousedown,mousemove,mouseup,mouseover,mouseleave,click,dblclick, touchstart,touchmove,touchend",function(t){t.stopPropagation()}))}},{key:"onAdd",value:function(){this.updateZoomNumberDisplay(),this.map.on("zoom",this.updateZoomNumberDisplay)}},{key:"onRemove",value:function(){this.updateZoomNumberDisplay&&this.map.off("zoom",this.updateZoomNumberDisplay)}},{key:"onDestroy",value:function(){this.handlers.forEach(function(t){t&&t.remove()})}}]),e}(v.default);e.default=S},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(75),v=i(p),m=function(t){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,s.default)(this,e);var r=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t,n));return r.z=i,r}return(0,h.default)(e,t),(0,u.default)(e,[{key:"getZ",value:function(){return this.z}},{key:"clone",value:function(){return new e(this.x,this.y,this.z)}}]),e}(v.default);e.default=m},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){for(var n=(0,l.latLngToMercator)(t),i=[],r=0;r<=f;r++){var a=r*d,o=new c.default(0,0);o.x=Math.cos(a),o.y=Math.sin(a),i.push(o)}for(var s=i.length-1;s>=0;s--){var u=i[s];i.push(new c.default(u.y,u.x))}for(var h=i.length-1;h>=0;h--){var p=i[h];i.push(new c.default(-p.x,p.y))}for(var v=i.length-1;v>=0;v--){var m=i[v];i.push(new c.default(m.x,-m.y))}var g=t.getLat()*Math.PI/180;return i.map(function(t){return t.x=n.x+e/Math.cos(g)*t.x,t.y=n.y+e/Math.cos(g)*t.y,(0,l.mercatorToLatLng)(t)})}function a(t){return(0,s.default)(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.getCirclePath=r;var o=n(285),s=i(o),l=n(121),u=n(75),c=i(u),f=9,d=5*Math.PI/180;e.default=a},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){for(var i=(0,l.latLngToMercator)(t),r=[],a=0;a<=f;a++){var o=a*d,s=new c.default(0,0);s.x=Math.cos(o),s.y=Math.sin(o),r.push(s)}for(var u=r.length-1;u>=0;u--){var h=r[u];r.push(new c.default(h.y,h.x))}for(var p=r.length-1;p>=0;p--){var v=r[p];r.push(new c.default(-v.x,v.y))}for(var m=r.length-1;m>=0;m--){var g=r[m];r.push(new c.default(g.x,-g.y))}var _=t.getLat()*Math.PI/180;return r.map(function(t){return t.x=i.x+e/Math.cos(_)*t.x,t.y=i.y+n/Math.cos(_)*t.y,(0,l.mercatorToLatLng)(t)})}function a(t){return(0,s.default)(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.getEllipsePath=r;var o=n(285),s=i(o),l=n(121),u=n(75),c=i(u),f=9,d=5*Math.PI/180;e.default=a},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),a=i(r),o=n(1),s=i(o),l=n(46),u=i(l),c=n(214),f=i(c),d=function(){function t(e,n){(0,a.default)(this,t),this.markerCluster=e,this.gridSize=e.gridSize,this.averageCenter=e.averageCenter,this.zoom=n,this.center=null,this.geometries=[],this.geometrySet={},this.bounds=null}return(0,s.default)(t,[{key:"getClusterInfo",value:function(){return{center:this.center,geometries:this.geometries,bounds:this.bounds}}},{key:"getCenter",value:function(){return this.center}},{key:"add",value:function(t){if(!this.geometrySet[t.id]){if(this.center){if(this.averageCenter){var e=this.geometries.length+1,n=(this.center.lat*(e-1)+t.position.lat)/e,i=(this.center.lng*(e-1)+t.position.lng)/e;this.center=new u.default(n,i),this._calculateBounds()}}else this.center=t.position,this._calculateBounds();this.geometrySet[t.id]=t,this.geometries.push(t)}}},{key:"_calculateBounds",value:function(){var t=new f.default(this.center,this.center);this.bounds=this.markerCluster._getExtendedBounds(t,this.zoom)}},{key:"getBounds",value:function(){var t=new f.default(this.center,this.center);return this.geometries.forEach(function(e){t.extend(new u.default(e.position.lat,e.position.lng))}),t}},{key:"getGeometries",value:function(){return this.geometries}},{key:"isInBounds",value:function(t){return this.bounds.contains(t.position)}},{key:"remove",value:function(){this.markerCluster=null,this.gridSize=null,this.averageCenter=null,this.center=null,this.geometries=[],this.geometrySet={},this.bounds=null}}],[{key:"normalizeClusterInfo",value:function(t){return{center:u.default.convert(t.center),geometries:t.geometries.map(function(t){return t.position=u.default.convert(t.position),t}),bounds:f.default._convertFromWorker(t.bounds)}}}]),t}();e.default=d},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(25),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=/^[og]\s*(.+)?/,f=/^mtllib /,d=/^usemtl /,h=function(){function t(e){var n=e.index,i=e.name,r=void 0===i?"":i,a=e.mtllib,o=e.smooth,l=e.groupStart;(0,s.default)(this,t),this.index=n,this.name=r,this.mtllib=a,this.smooth=o,this.groupStart=l,this.groupEnd=-1,this.groupCount=-1,this.inherited=!1}return(0,u.default)(t,[{key:"clone",value:function(){return new t({index:arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0})}}]),t}(),p=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(0,s.default)(this,t),this.name=e,this.geometry={vertices:[],normals:[],colors:[],uvs:[]},this.materials=[],this.smooth=!0}return(0,u.default)(t,[{key:"startMaterial",value:function(t,e){var n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);var i=new h({index:this.materials.length,name:t,mtllib:Array.isArray(e)&&e.length>0?e[e.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0});return this.materials.push(i),i}},{key:"currentMaterial",value:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]}},{key:"_finalize",value:function(t){var e=this.currentMaterial();if(e&&-1===e.groupEnd&&(e.groupEnd=this.geometry.vertices.length/3,e.groupCount=e.groupEnd-e.groupStart,e.inherited=!1),t&&this.materials.length>1)for(var n=this.materials.length-1;n>=0;n--)this.materials[n].groupCount<=0&&this.materials.splice(n,1);return t&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),e}}]),t}(),v=function(){function t(){(0,s.default)(this,t),this.objects=[],this.object=null,this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.materialLibraries=[],this.startObject("",!1)}return(0,u.default)(t,[{key:"startObject",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.object&&!this.object.fromDeclaration)return this.object.name=t,void(this.object.fromDeclaration=e);var n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object=new p(t),this.object.fromDeclaration=e,n&&n.name&&"function"==typeof n.clone){var i=n.clone(0);i.inherited=!0,this.object.materials.push(i)}this.objects.push(this.object)}},{key:"finalize",value:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)}},{key:"parseVertexIndex",value:function(t,e){var n=parseInt(t,10);return 3*(n>=0?n-1:n+e/3)}},{key:"parseNormalIndex",value:function(t,e){var n=parseInt(t,10);return 3*(n>=0?n-1:n+e/3)}},{key:"parseUVIndex",value:function(t,e){var n=parseInt(t,10);return 2*(n>=0?n-1:n+e/2)}},{key:"addVertex",value:function(t,e,n){var i=this.vertices,r=this.object.geometry.vertices;r.push(i[t+0],i[t+1],i[t+2]),r.push(i[e+0],i[e+1],i[e+2]),r.push(i[n+0],i[n+1],i[n+2])}},{key:"addVertexPoint",value:function(t){var e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])}},{key:"addVertexLine",value:function(t){var e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])}},{key:"addNormal",value:function(t,e,n){var i=this.normals,r=this.object.geometry.normals;r.push(i[t+0],i[t+1],i[t+2]),r.push(i[e+0],i[e+1],i[e+2]),r.push(i[n+0],i[n+1],i[n+2])}},{key:"addColor",value:function(t,e,n){var i=this.colors,r=this.object.geometry.colors;r.push(i[t+0],i[t+1],i[t+2]),r.push(i[e+0],i[e+1],i[e+2]),r.push(i[n+0],i[n+1],i[n+2])}},{key:"addUV",value:function(t,e,n){var i=this.uvs,r=this.object.geometry.uvs;r.push(i[t+0],i[t+1]),r.push(i[e+0],i[e+1]),r.push(i[n+0],i[n+1])}},{key:"addUVLine",value:function(t){var e=this.uvs;this.object.geometry.uvs.push(e[t+0],e[t+1])}},{key:"addFace",value:function(t,e,n,i,r,a,o,s,l){var u=this.vertices.length,c=this.parseVertexIndex(t,u),f=this.parseVertexIndex(e,u),d=this.parseVertexIndex(n,u);if(this.addVertex(c,f,d),void 0!==i&&""!==i){var h=this.uvs.length;c=this.parseUVIndex(i,h),f=this.parseUVIndex(r,h),d=this.parseUVIndex(a,h),this.addUV(c,f,d)}if(void 0!==o&&""!==o){var p=this.normals.length;c=this.parseNormalIndex(o,p),f=o===s?c:this.parseNormalIndex(s,p),d=o===l?c:this.parseNormalIndex(l,p),this.addNormal(c,f,d)}this.colors.length>0&&this.addColor(c,f,d)}},{key:"addPointGeometry",value:function(t){this.object.geometry.type="Points";var e=this.vertices.length,n=!0,i=!1,r=void 0;try{for(var o,s=(0,a.default)(t);!(n=(o=s.next()).done);n=!0){var l=o.value;this.addVertexPoint(this.parseVertexIndex(l,e))}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}}},{key:"addLineGeometry",value:function(t,e){this.object.geometry.type="Line";var n=this.vertices.length,i=this.uvs.length,r=!0,o=!1,s=void 0;try{for(var l,u=(0,a.default)(t);!(r=(l=u.next()).done);r=!0){var c=l.value;this.addVertexLine(this.parseVertexIndex(c,n))}}catch(t){o=!0,s=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw s}}var f=!0,d=!1,h=void 0;try{for(var p,v=(0,a.default)(e);!(f=(p=v.next()).done);f=!0){var m=p.value;this.addUVLine(this.parseUVIndex(m,i))}}catch(t){d=!0,h=t}finally{try{!f&&v.return&&v.return()}finally{if(d)throw h}}}}]),t}();e.default=function(t){var e=new v;-1!==t.indexOf("\r\n")&&(t=t.replace(/\r\n/g,"\n")),-1!==t.indexOf("\\\n")&&(t=t.replace(/\\\n/g,""));for(var n=t.split("\n"),i="",r="",o=[],s="function"==typeof"".trimLeft,l=0,u=n.length;l<u;l++)if(i=n[l],i=s?i.trimLeft():i.trim(),0!==i.length&&"#"!==(r=i.charAt(0)))if("v"===r){var h=i.split(/\s+/);switch(h[0]){case"v":e.vertices.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])),8===h.length&&e.colors.push(parseFloat(h[4]),parseFloat(h[5]),parseFloat(h[6]));break;case"vn":e.normals.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3]));break;case"vt":e.uvs.push(parseFloat(h[1]),parseFloat(h[2]))}}else if("f"===r){for(var p=i.substr(1).trim(),m=p.split(/\s+/),g=[],_=0,y=m.length;_<y;_++){var x=m[_];if(x.length>0){var b=x.split("/");g.push(b)}}for(var S=g[0],w=1,E=g.length-1;w<E;w++){var A=g[w],T=g[w+1];e.addFace(S[0],A[0],T[0],S[1],A[1],T[1],S[2],A[2],T[2])}}else if("l"===r){var M=i.substring(1).trim().split(" "),I=void 0,P=[];if(-1===i.indexOf("/"))I=M;else{I=[];for(var k=0,L=M.length;k<L;k++){var C=M[k].split("/");""!==C[0]&&I.push(C[0]),""!==C[1]&&P.push(C[1])}}e.addLineGeometry(I,P)}else if("p"===r){var R=i.substr(1).trim(),D=R.split(" ");e.addPointGeometry(D)}else if(null!==(o=c.exec(i))){var N=(" "+o[0].substr(1).trim()).substr(1);e.startObject(N)}else if(d.test(i))e.object.startMaterial(i.substring(7).trim(),e.materialLibraries);else if(f.test(i))e.materialLibraries.push(i.substring(7).trim());else{if("s"!==r){if("\0"===i)continue;throw new Error('Unexpected line: "'+i+'"')}if(o=i.split(" "),o.length>1){var B=o[1].trim().toLowerCase();e.object.smooth="0"!==B&&"off"!==B}else e.object.smooth=!0;var O=e.object.currentMaterial();O&&(O.smooth=e.object.smooth)}e.finalize();var F=[],z=[],V=!0,U=!1,G=void 0;try{for(var H,Y=(0,a.default)(e.objects);!(V=(H=Y.next()).done);V=!0){var j=H.value,W=j.geometry;if(0!==W.vertices.length){var X={header:{vertexCount:W.vertices.length/3},attributes:{}};switch(W.type){case"Points":X.mode=0;break;case"Line":X.mode=1;break;default:X.mode=4}X.attributes.POSITION={value:new Float32Array(W.vertices),size:3},W.normals.length>0&&(X.attributes.NORMAL={value:new Float32Array(W.normals),size:3}),W.colors.length>0&&(X.attributes.COLOR_0={value:new Float32Array(W.colors),size:3}),W.uvs.length>0&&(X.attributes.TEXCOORD_0={value:new Float32Array(W.uvs),size:2}),X.materials=[];var Z=!0,q=!1,Q=void 0;try{for(var J,K=(0,a.default)(j.materials);!(Z=(J=K.next()).done);Z=!0){var $=J.value,tt={name:$.name,flatShading:!$.smooth};X.materials.push(tt),z.push(tt)}}catch(t){q=!0,Q=t}finally{try{!Z&&K.return&&K.return()}finally{if(q)throw Q}}X.name=j.name,F.push(X)}}}catch(t){U=!0,G=t}finally{try{!V&&Y.return&&Y.return()}finally{if(U)throw G}}return{meshes:F,materials:z}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return t.length>=2&&(0,h.default)(t[0].lat)&&(0,h.default)(t[0].lng)}function a(t){return t.length>=1&&t.every(function(t){return r(t)})}function o(t){return(r(t)?[t]:t).map(function(t){return s(t)})}function s(t){var e=t.length>0?[t[0]]:[];return t.forEach(function(t){var n=e[e.length-1];t.lat===n.lat&&t.lng===n.lng||e.push(t)}),e}function l(t){var e=[];return t.forEach(function(n,i){if(i>0){var r=t[i-1],a=[r.lng,r.lat],o=[n.lng,n.lat],s=u(n.lng,r.lng);if(s<5){var l=n.lng,c=n.lat;e.push({lng:l,lat:c,height:0})}else{(0,v.default)(a,o,{npoints:Math.ceil(s/5)}).geometry.coordinates.forEach(function(t){if(Array.isArray(t[0]))t.forEach(function(t){var n=(0,f.default)(t,2),i=n[0],r=n[1];e.push({lng:i,lat:r,height:0})});else{var n=(0,f.default)(t,2),i=n[0],r=n[1];e.push({lng:i,lat:r,height:0})}})}return!0}var d=n.lng,h=n.lat;e.push({lng:d,lat:h,height:0})}),e}function u(t,e){return Math.abs(e-t)<180?Math.abs(e-t):360-Math.abs(e-t)}Object.defineProperty(e,"__esModule",{value:!0});var c=n(27),f=i(c),d=n(291),h=i(d);e.isSimple=r,e.isComplexLine=a,e.normalize=o,e.deduplicatePoint=s,e.cross180=l;var p=n(680),v=i(p)},function(t,e,n){"use strict";function i(t,e){return function(n){return new a.default(n,t,e)}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(682),a=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=i},function(t,e,n){"use strict";function i(t,e){return f.default.batchRender&&(e+=1),e===f.default.maxDataZoom&&t>e}function r(t,e){return e<f.default.maxDataZoom&&t<=e}function a(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return f.default.batchRender&&(e+=1),Math.abs(t-e)<=n}function o(t,e,n){return!(a(t,e,1)||n&&r(e,n)||i(t,e))}function s(t,e,n){return!(a(Math.round(t),e)||n&&r(e,n)||i(t,e))}function l(t,e,n){return s(t,e,n)}function u(t,e){return s(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.isInterceptForBase64=o,e.isInterceptForGPU=s,e.isInterceptForTileData=l,e.isInterceptForPlacement=u;var c=n(22),f=function(t){return t&&t.__esModule?t:{default:t}}(c)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(){return[{name:"a_Position",components:2,type:"UNSIGNED_SHORT",offset:0},{name:"a_Color",components:4,type:"UNSIGNED_BYTE",offset:4},{name:"a_Normal",components:2,type:"UNSIGNED_BYTE",offset:8},{name:"a_LineInfo",components:2,type:"UNSIGNED_BYTE",offset:10},{name:"a_LineDistance",components:1,type:"UNSIGNED_SHORT",offset:12},{name:"a_SideInfo",components:2,type:"UNSIGNED_BYTE",offset:14},{name:"a_PickingColor",components:4,type:"UNSIGNED_BYTE",offset:16}]}function a(){return["Uint16","Uint16","Uint8","Uint8","Uint8","Uint8","Uint8","Uint8","Uint8","Uint8","Uint16","Uint8","Uint8","Uint8","Uint8","Uint8","Uint8"]}function o(t){var e=t.transX,n=void 0===e?0:e,i=t.transY,r=void 0===i?0:i,a=t.scale,o=void 0===a?1:a;return Math.round(n/256)+4*Math.round(r/256)+16*Math.round(1/o)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),l=i(s),u=n(1),c=i(u),f=n(75),d=i(f),h=n(509),p=i(h),v=n(286),m=i(v),g=n(246),_=i(g),y=n(397),x=(i(y),n(22)),b=i(x),S=b.default.batchRender?"Uint32":"Uint16",w=function(){function t(e){(0,l.default)(this,t),e=e||{},this.normalScale=63,this.type=e.type||"default",this.noTerminal=e.noTerminal||!1,this.lineDistance=e.startDistance||0;var n=(0,p.default)(a(),r()),i=(0,p.default)([S]);this.vertiesDataBuffer=n(4096),this.indicesDataBuffer=i(4096),this.lineCount=0}return(0,c.default)(t,[{key:"addLine",value:function(t,e,n,i,r,a,s,l){function u(t,e,r,a){x=e.sub(t);var o=x.perp().unit().mult(b)._round(),s=o.mult(-1),l=e.dist(t),u=Math.max(1,Math.floor(h+l)),c=r.length,d=1024+~~t.x+w,p=1024+~~t.y+E,v=1024+~~e.x+w,m=1024+~~e.y+E;o.x+=128,o.y+=128,s.x+=128,s.y+=128,r.add([[d,p,n[0],n[1],n[2],n[3],o.x,o.y,i,S,10*h+A,T,M,f[0],f[1],f[2],f[3]],[d,p,n[0],n[1],n[2],n[3],s.x,s.y,i,S,10*h+A,T,M,f[0],f[1],f[2],f[3]],[v,m,n[0],n[1],n[2],n[3],s.x,s.y,i,S,10*u+A,T,M,f[0],f[1],f[2],f[3]],[v,m,n[0],n[1],n[2],n[3],o.x,o.y,i,S,10*u+A,T,M,f[0],f[1],f[2],f[3]]]),a.add([[c+0],[c+1],[c+3],[c+1],[c+2],[c+3]]),h=u}function c(t,e,r){var a=1.732*b,o=e.length,s=1024+~~t.x+w,l=1024+~~t.y+E;e.add([[s,l,n[0],n[1],n[2],n[3],128,2*b+128,i-0,0,10+A,T,M,f[0],f[1],f[2],f[3]],[s,l,n[0],n[1],n[2],n[3],128-a,-1*b+128,i-0,0,10+A,T,M,f[0],f[1],f[2],f[3]],[s,l,n[0],n[1],n[2],n[3],a+128,-1*b+128,i-0,0,10+A,T,M,f[0],f[1],f[2],f[3]]]),r.add([[o+0],[o+1],[o+2]])}this.lineCount+=1,t=t||{};var f=t.pickingColor||[0,0,0,0],h=s||1,p=t,v=p.noTerminal,m=this.vertiesDataBuffer,g=this.indicesDataBuffer,_=void 0,y=void 0,x=void 0,b=this.normalScale,S=0;r&&a?S=Math.min(10*r,240)+Math.floor(10-a/r*10):(r=0,a=0);var w=2048*(t.preWidth||0),E=2048*(t.nextWidth||0),A=t.deltaSideWidth||0,T=t.isSide||0,M=o(t.transform);h=h%(r+a)||1;for(var I=[],P=0,k=e.length/2;P<k;P++)I.push(new d.default(2*e[2*P],2*-e[2*P+1]));if(l&&I.push(I[0],I[1]),!S&&!v&&I.length>2){v||c(I[0],m,g);for(var L=1,C=I.length;L<C;L++)y=I[L],c.bind(this)(y,m,g)}for(var R=1,D=I.length;R<D;R++)_=I[R-1],y=I[R],u.bind(this)(_,y,m,g)}},{key:"addPolygon",value:function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.vertiesDataBuffer,r=this.indicesDataBuffer,a=n.pickingColor,s=o(n.transform),l=_.default.mixCoords(t,"polygon",e.concat([0,0,0,0,0,0,s]).concat(a||[0,0,0,0]),1024,2),u=m.default.flatten([l]),c=u.vertices,f=u.dimensions,d=(0,m.default)(c,u.holes,f,i.length),h=0,p=c.length/f;h<p;h++){for(var v=[],g=h*f,y=(h+1)*f;g<y;g++)v.push(c[g]);i.add([v])}r.add(d)}}]),t}();e.default=w},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return t===S.RENDER_LAYER_TYPE.marker||t===S.RENDER_LAYER_TYPE.label}function a(t){return t===S.RENDER_LAYER_TYPE.polygon||t===S.RENDER_LAYER_TYPE.circle||t===S.RENDER_LAYER_TYPE.ellipse||t===S.RENDER_LAYER_TYPE.rectangle}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),s=i(o),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),p=n(32),v=i(p),m=n(4),g=i(m);e.hasBorderLayer=a;var _=n(265),y=i(_),x=n(90),b=n(146),S=n(53),w=function(t){function e(t){return(0,u.default)(this,e),r(t.type)?t.level=b.LAYER_LEVEL.OVERLAY_NAA:t.level=b.LAYER_LEVEL.OVERLAY_AA,(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t))}return(0,g.default)(e,t),(0,f.default)(e,[{key:"_initialize",value:function(t){(0,v.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"_initialize",this).call(this,t),this.sourceData=t.sourceData,this.sourceId=this.id}},{key:"_addSource",value:function(){this.map&&!this.map.getSource(this.sourceId)&&this.map.addSource(this.sourceId,{type:x.SOURCE_TYPE.geojson,tileSize:this.tileSize,data:this.sourceData})}},{key:"_removeSource",value:function(){this.map&&this.map.removeSource(this.sourceId)}}]),e}(y.default);e.default=w},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(265),v=i(p),m=n(90),g=n(214),_=i(g),y=n(29),x=function(t){function e(t){return(0,s.default)(this,e),(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t))}return(0,h.default)(e,t),(0,u.default)(e,[{key:"_initialize",value:function(){this.sourceId=this.sourceId||this.id}},{key:"getBounds",value:function(){return this._bounds}},{key:"setBounds",value:function(t){return t instanceof _.default?(this._bounds=t,this._resetData(),this):(new y.BaseTypeError("bounds","LatLngBounds",t).error(),this)}},{key:"_updateMediaSource",value:function(t){this._mediaSource=t,this._resetData()}},{key:"_resetData",value:function(){this.map&&this.map.getSource(this.id).setData({mediaSource:this._mediaSource,bounds:this._bounds})}},{key:"_addSource",value:function(){this._mediaSource&&this._bounds&&this._mediaSource&&this._bounds&&this.map&&!this.map.getSource(this.sourceId)&&(this.map.addSource(this.sourceId,{type:m.SOURCE_TYPE.ground,tileSize:this.tileSize,data:{mediaSource:this._mediaSource,bounds:this._bounds}}),this._fire("layer",{}))}},{key:"_removeSource",value:function(){this.map&&this.map.removeSource(this.sourceId)}}]),e}(v.default);e.default=x},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(k(t)){var e=t.id,n=void 0===e?(0,b.uniqueId)():e,i=t.paths;return t.id=n,P(i)?i.flat(3).every(function(t,e){var n=L(t);return n||new M.ClassTypeError("MaskGeometry.path["+e+"]","LatLng",t).error(),n}):(new M.BaseTypeError("MaskGeometry.paths","Array",i).error(),!1)}return new M.BaseTypeError("MaskGeometry","Object",t).error(),!1}Object.defineProperty(e,"__esModule",{value:!0});var a=n(18),o=i(a),s=n(95),l=i(s),u=n(3),c=i(u),f=n(0),d=i(f),h=n(1),p=i(h),v=n(5),m=i(v),g=n(4),_=i(g),y=n(265),x=i(y),b=n(10),S=n(90),w=n(158),E=n(53),A=n(36),T=i(A),M=n(29),I=n(146),P=T.default.isArray,k=T.default.isObject,L=T.default.isValidLatLng,C=function(t){function e(t){return(0,d.default)(this,e),t.type=E.RENDER_LAYER_TYPE.mask,t.level=I.LAYER_LEVEL.UNDERGROUND,(0,m.default)(this,(e.__proto__||(0,c.default)(e)).call(this,t))}return(0,_.default)(e,t),(0,p.default)(e,[{key:"_initialize",value:function(t){var e=t.geometries,n=void 0===e?[]:e,i=new l.default;this.isMaskReverse=t.isMaskReverse||!1,this.sourceId=this.id,this.maskGeoMap=i,this.add(n)}},{key:"_addSource",value:function(){this.map&&!this.map.getSource(this.sourceId)&&this.map.addSource(this.sourceId,{type:S.SOURCE_TYPE.geojson,data:{type:w.GEOMETRY_TYPES.MASK,geometries:[].concat((0,o.default)(this.maskGeoMap.values()))}})}},{key:"_removeSource",value:function(){this.map&&this.map.removeSource(this.sourceId)}},{key:"add",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return P(e)?(e.forEach(function(e){if(r(e)){var n=e.id;t.maskGeoMap.has(n)?console.warn("MaskLayer.add: 已存在id为"+n+"的MaskGeometry对象。"):t.maskGeoMap.set(n,e)}}),this._updateData(),this):(new M.BaseTypeError("MaskLayer.add()传入参数","Array",e).error(),this)}},{key:"get",value:function(t){return this.maskGeoMap.get(t)}},{key:"getAll",value:function(){return[].concat((0,o.default)(this.maskGeoMap.values()))}},{key:"remove",value:function(t){if(!P(t))return new M.BaseTypeError("MaskLayer.remove()传入参数","Array",t).error(),this;var e=this.maskGeoMap;return t.forEach(function(t){e.has(t)?e.delete(t):console.warn("MaskLayer.remove: 不存在id为"+t+"的MaskGeometry对象。")}),this._updateData(),this}},{key:"clear",value:function(){return this.maskGeoMap.clear(),this._updateData(),this}},{key:"update",value:function(t){if(!P(t))return new M.BaseTypeError("MaskLayer.update()传入参数","Array",t).error(),this;var e=this.maskGeoMap;return t.forEach(function(t){r(t)&&e.set(t.id,t)}),this._updateData(),this}},{key:"_updateData",value:function(){this.map&&this.map.getSource(this.sourceId).setData({type:w.GEOMETRY_TYPES.MASK,geometries:[].concat((0,o.default)(this.maskGeoMap.values()))})}}]),e}(x.default);e.default=C},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var n=Array.isArray(e.features)?e.features:x.DEFAULT_BASEMAP.vector.features,i=[];if(n.includes(y.BASE_LAYER_TYPE.base)){var r=new m.default({map:t,id:x.VECTOR_LAYER_ID.base,features:[{type:y.BASE_LAYER_TYPE.base,filter:y.BASE_LAYER_TYPE.base},{type:y.BASE_LAYER_TYPE.ground,filter:y.BASE_LAYER_TYPE.ground}]});t.moveLayer(r.id,w.LAYER_LEVEL.BASE),i.push(r)}if(n.includes(y.BASE_LAYER_TYPE.arrow)){var a=new m.default({map:t,id:y.BASE_LAYER_TYPE.arrow,features:[{type:y.BASE_LAYER_TYPE.arrow,filter:y.BASE_LAYER_TYPE.arrow}]});a.setRank((0,w.getRank)(w.LAYER_LEVEL.GROUND)-1),i.push(a)}var s=n.includes(y.BASE_LAYER_TYPE.building3d)||n.includes("building"),l=n.includes(y.BASE_LAYER_TYPE.building2d);if(s||l){var u=new m.default({map:t,id:x.VECTOR_LAYER_ID.building,zIndex:1,features:[s?{type:y.BASE_LAYER_TYPE.building3d,filter:y.BASE_LAYER_TYPE.building3d}:{type:y.BASE_LAYER_TYPE.building2d,filter:y.BASE_LAYER_TYPE.building3d}]});t.moveLayer(u.id,w.LAYER_LEVEL.BUILDING),i.push(u)}var c=n.includes(y.BASE_LAYER_TYPE.point),f=n.includes(y.BASE_LAYER_TYPE.label);if(c||f){var d=new m.default({map:t,id:x.VECTOR_LAYER_ID.poi,features:[c?{type:y.BASE_LAYER_TYPE.point,filter:y.BASE_LAYER_TYPE.point}:null,f?{type:y.BASE_LAYER_TYPE.label,filter:y.BASE_LAYER_TYPE.label}:null,{type:y.BASE_LAYER_TYPE.text,filter:y.BASE_LAYER_TYPE.text}].filter(function(t){return!!t})});t.moveLayer(d.id,w.LAYER_LEVEL.TEXT),i.push(d)}return o(t,e.buildingRange),i}function a(t){if(t===C)return t;var e=t;return k(t)?e=C:Array.isArray(t)?L(t[0])&&L(t[1])||(console.error("buildingRange的最大值、最小值应传入数字，实际传入["+t[0]+", "+t[1]+"]"),e=C):(new P.BaseTypeError("VectorBaseMap.buildingRange","Array",t).error(),e=C),e=[Math.max(e[0],S.default.minBuildingDataZoom),e[1]]}function o(t,e){e=a(e);var n=t.getLayer(x.VECTOR_LAYER_ID.building);n&&(n.setZoomRange.apply(n,(0,p.default)(e)),n.updateBuildingRange(e))}function s(t){var e=new _.default({map:t,id:x.DEFAULT_BASEMAP.handdraw.type,getTileUrl:function(t,e,n){e=Math.pow(2,n)-1-e;var i=S.default.handdrawSrc;return i[(t+e)%i.length]+"?z="+n+"&x="+t+"&y="+e+"&version="+S.default.dataVersion.scenic},maxDataZoom:20});return e.setZIndex(2),t.moveLayer(e.getId(),w.LAYER_LEVEL.BUILDING),e}function l(t){var e=t.map,n=t.tilesrc,i=t.encrypt,r=t.key;window.onbeforeunload=function(){var t=e.getSource(x.DEFAULT_BASEMAP.oversea.type),n=t&&t.overseaNum;(0,T.os)(r,n),t&&(t.overseaNum=0)};var a=function(){return 1===this.layerResource.getFinalUsedMapStyleId()?1:0}.bind(e);return new _.default({map:e,id:x.DEFAULT_BASEMAP.oversea.type,maxDataZoom:18,getTileUrl:function(t,e,o){var s=["z="+o,"x="+t,"y="+e,"styleid="+n.style,"scene="+a(),"version="+n.version,"size=256","ch=zh"],l=s.join("&"),u=i(l);return n.url+"&key="+r+"&param="+u}})}function u(t,e){var n=Array.isArray(e.features)?e.features:x.DEFAULT_BASEMAP.satellite.features,i=[];if(n.includes(x.SATELLITE_FEATURE.satellite)){var r=new _.default({map:t,id:x.SATELLITE_LAYER_ID[x.SATELLITE_FEATURE.satellite],getTileUrl:function(t,e,n){e=Math.pow(2,n)-1-e;var i=S.default.satelliteSrc;return i[(t+e)%i.length]+"/"+n+"/"+(t>>4)+"/"+(e>>4)+"/"+t+"_"+e+".jpg?version="+S.default.dataVersion.sat},maxDataZoom:18});t.moveLayer(r.id,w.LAYER_LEVEL.BASE),i.push(r)}if(n.includes(x.SATELLITE_FEATURE.road)){var a=new _.default({map:t,id:x.SATELLITE_LAYER_ID[x.SATELLITE_FEATURE.road],getTileUrl:function(t,e,n){e=Math.pow(2,n)-e-1;var i=S.default.roadSrc;return i[(t+e)%i.length]+"?z="+n+"&x="+t+"&y="+e+"&styleid=2&scene=0&version="+S.default.dataVersion.tile},maxDataZoom:18});t.moveLayer(a.id,w.LAYER_LEVEL.BASE),i.push(a)}return i}function c(t,e){var n=Array.isArray(e.features)?e.features:x.DEFAULT_BASEMAP.traffic.features,i=e.opacity,r=e.flowColor,a=e.flowSpeed,o=[],s=e.filter;if(e&&!e.hasOwnProperty("filter")&&(s=(0,d.default)(x.TRAFFIC_ROAD_TYPE)),n.includes(x.TRAFFIC_FEATURE.base)){var l=new A.default({map:t,id:x.TRAFFIC_LAYER_ID[x.TRAFFIC_FEATURE.base],type:y.RENDER_LAYER_TYPE.trafficBase,maxDataZoom:18,filter:s,opacity:i});t.moveLayer(l.id,w.LAYER_LEVEL.BASE),o.push(l)}if(n.includes(x.TRAFFIC_FEATURE.flow)){var u=new A.default({map:t,id:x.TRAFFIC_LAYER_ID[x.TRAFFIC_FEATURE.flow],type:y.RENDER_LAYER_TYPE.trafficFlow,maxDataZoom:18,filter:s,flowColor:r,flowSpeed:a});t.moveLayer(u.id,w.LAYER_LEVEL.BASE),o.push(u)}return o.forEach(function(e){var n=t.getSource(e.sourceId);e._interval=setInterval(function(){n.isFrozen||(n.reload(),n.once("tilesloaded",function(){if(e.type===y.RENDER_LAYER_TYPE.trafficFlow){t.renderEngine.getImageCache(e.id).clear()}else{t.renderEngine.painters.trafficBase.clearStore()}}))},6e4),e.once("source_removed",function(){clearInterval(e._interval),delete e._interval})}),o}Object.defineProperty(e,"__esModule",{value:!0}),e.resetBuildingRange=e.createOverseaLayer=e.createHanddrawLayer=e.createTrafficLayer=e.createSatelliteLayer=e.createVectorLayer=void 0;var f=n(17),d=i(f),h=n(18),p=i(h),v=n(399),m=i(v),g=n(287),_=i(g),y=n(53),x=n(290),b=n(22),S=i(b),w=n(146),E=n(697),A=i(E),T=n(44),M=n(36),I=i(M),P=n(29),k=I.default.isUndefined,L=I.default.isNumber,C=x.DEFAULT_BASEMAP.vector.buildingRange;e.createVectorLayer=r,e.createSatelliteLayer=u,e.createTrafficLayer=c,e.createHanddrawLayer=s,e.createOverseaLayer=l,e.resetBuildingRange=o},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(115),a=i(r),o=n(23),s=i(o),l=n(15),u=i(l),c=n(3),f=i(c),d=n(0),h=i(d),p=n(1),v=i(p),m=n(5),g=i(m),_=n(4),y=i(_),x=n(257),b=i(x),S=n(701),w=i(S),E=n(28),A=i(E),T=n(22),M=i(T),I=n(10),P=n(702),k=i(P),L=A.default.isPC()?800:200,C=function(t){function e(t,n,i){(0,h.default)(this,e);var r=(0,g.default)(this,(e.__proto__||(0,f.default)(e)).call(this,t,n,i)),a=n.tileSize,o=void 0===a?M.default.tileSize:a,s=n.minZoom,l=void 0===s?M.default.minZoom:s,c=n.maxZoom,d=void 0===c?M.default.maxZoom:c,p=n.isPixelGeo,v=void 0!==p&&p,m=n.tileManager,_=n.data;return(0,u.default)(r,{tileSize:o,minZoom:l,maxZoom:d,isPixelGeo:v}),r._items={},r._data=_,r.tileManager=m||new k.default({add:r.addTile.bind(r),remove:r.removeTile.bind(r),show:r.showTile.bind(r),minZoom:l,maxZoom:d}),r}return(0,y.default)(e,t),(0,v.default)(e,[{key:"getDrawItems",value:function(){return this._items}},{key:"onCacheRemove",value:function(t){this.unloadTile(t)}},{key:"onUpdate",value:function(t,e,n){this.updateCacheSize(t),this.tileManager.update(t.zoom,t,{reason:n})}},{key:"updateCacheSize",value:function(t){var e=Math.ceil(t.width/this.tileSize)+1,n=Math.ceil(t.height/this.tileSize)+1,i=e*n,r=Math.floor(5*i),a=Math.max(L,r);this.cache.setMaxSize(a)}},{key:"onClear",value:function(){this.clearTiles()}},{key:"clearTiles",value:function(){this.tileManager.clear()}},{key:"onReload",value:function(){var t=this;(0,I.forIn)(this._items,function(e,n){t.reloadTile(n)})}},{key:"addTile",value:function(t,e){var n=this.cache.get(t.id);if(n)return n.hide(),this._items[t.id]=n,s.default.resolve();n=new b.default(t,this.tileSize),n.hide(),this._items[t.id]=n,n.state=x.TILE_STATE.loading;var i=this.loadTile(n,e);return i.then(this._tileLoaded.bind(this,n)),i}},{key:"removeTile",value:function(t){var e=t.id,n=this._items[e];if(n)if(delete this._items[e],n.isLoading())n.aborted=!0,n.state=x.TILE_STATE.unloaded,this.abortTile(n);else if(n.hasData()){var i=n.coord.id;this.cache.add(i,n)}}},{key:"showTile",value:function(t){var e=this._items[t.id];e&&!e.visible&&(e.show(),this._fire("data",{dataType:"source",tile:e}))}},{key:"reloadTile",value:function(t){var e=this;t.isLoading()||(t.state=x.TILE_STATE.reloading,this.loadTile(t,{}).then(function(n){e._fire("data",{dataType:"source",tile:t}),e._tileLoaded.call(e,t,n)}))}},{key:"loadTile",value:function(){}},{key:"unloadTile",value:function(t){t.unloadData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type},null,t.workerID)}},{key:"abortTile",value:function(t){this.dispatcher.send("abortTile",{uid:t.uid,type:this.type},null,t.workerID)}},{key:"_tileLoaded",value:function(t,e){e&&(t.state=x.TILE_STATE.loaded,404!==e.status&&this._fire("loaderror",{tile:t,error:e})),(0,a.default)(this._items).every(function(t){return t.isLoaded()})&&this._fire("tilesloaded",{dataType:"source",tiles:this._items})}}]),e}(w.default);e.default=C},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(93),v=n(22),m=function(t){function e(t,n,i){(0,s.default)(this,e);var r=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this));return r.id=t,r.dispatcher=i,r.minZoom=n.minZoom||v.minZoom,r.maxZoom=n.maxZoom||v.maxZoom,r.maxDataZoom=n.maxDataZoom||v.maxDataZoom,r._items={},r}return(0,h.default)(e,t),(0,u.default)(e,[{key:"getDrawItems",value:function(){return this._items}},{key:"clear",value:function(){}},{key:"freeze",value:function(){this.isFrozen=!0}},{key:"unfreeze",value:function(){this.isFrozen=!1}},{key:"onAdd",value:function(t){this.map=t}},{key:"onRemove",value:function(){this.map=null}},{key:"update",value:function(t,e){this.transform=t,this.camera=e}}]),e}(p);e.default=m},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(94),a=i(r),o=n(3),s=i(o),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),p=n(4),v=i(p),m=n(257),g=i(m),_=n(520),y=i(_),x=n(307),b=i(x),S=n(10),w=n(22),E=function(t){function e(t,n,i){(0,u.default)(this,e);var r=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t,n,i));return r._metaData=null,r._initialize(),r.workerOptions=S.extend({source:r.getUniqueId(),tileSize:r.tileSize},n.workerOptions),r}return(0,v.default)(e,t),(0,f.default)(e,[{key:"_initialize",value:function(){}},{key:"load",value:function(){var t=this;this._loadOriginData(function(){t._fire("data",{dataType:"source",sourceDataType:"metadata"})})}},{key:"onAdd",value:function(t){this.map=t,this.load()}},{key:"getMetaData",value:function(){return this._metaData}},{key:"update",value:function(t){this.transform=t;var e=new b.default(0,0,0,0);this.addItem(e)}},{key:"addItem",value:function(t){this.addTile(t,null,null)}},{key:"_loadOriginData",value:function(t){var e=this;this._fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(){e.reload(),e.transform&&e.update(e.transform),t&&t()})}},{key:"_updateWorkerData",value:function(t){var e=this,n=S.extend({},this.workerOptions),i=this._data;n.data=(0,a.default)(i),this._onLoadDataStart(i),this.workerID=this.dispatcher.send(this.type+".loadData",n,function(n,i){n?(e._onLoadDataError(n),t(n)):(e._loaded=!0,e._metaData=i,e._onLoadDataEnd(),t(null))},this.workerID)}},{key:"_onLoadDataStart",value:function(){}},{key:"_onLoadDataEnd",value:function(){}},{key:"_onLoadDataError",value:function(t){this._fire("error",{error:t})}},{key:"addTile",value:function(t,e,n){var i=this._items[t.id];return i||((i=this._cache.get(t.id))?(this._items[t.id]=i,i):(i=new g.default(t,this.tileSize),this._items[t.id]=i,t.z<=w.maxDataZoom&&this.loadTile(i,e,n?n.bind(this):this._tileLoaded.bind(this,i)),i))}},{key:"loadTile",value:function(t,e,n){var i={type:this.type,uid:t.uid,coord:t.coord,zoom:t.coord.z,maxZoom:this.maxZoom,tileSize:this.tileSize,source:this.getUniqueId()};t.workerID=this.dispatcher.send("loadTile",i,function(e,i){if(t.clear(),!t.aborted)return e||!i?void(t.state=m.TILE_STATE.loaded):(t.setData(i),n(null))},this.workerID)}},{key:"abortTile",value:function(t){t.aborted=!0}},{key:"unloadTile",value:function(t){t.clear(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.getUniqueId()},function(){},t.workerID)}},{key:"onRemove",value:function(){this.dispatcher.broadcast("removeSource",{type:this.type,source:this.getUniqueId()},function(){}),this.map=null,this._metaData=null}}]),e}(y.default);e.default=E},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(19),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(79),f=function(){function t(e,n,i){(0,s.default)(this,t),i&&(this.loadGeoJSON=i),this._geoDataIndexes={},this.actor=e}return(0,u.default)(t,[{key:"loadVectorData",value:function(t,e){var n=t.source;if(!this._geoDataIndexes[n])return e(null,null);var i=this._geoDataIndexes[n];if(!i)return e(null,null);e(null,i)}},{key:"loadData",value:function(t,e){var n=function(n,i){var r=this;return n?e(n):"object"!==(void 0===i?"undefined":(0,a.default)(i))?e(new Error("Input data is not a valid GeoJSON object.")):void this._indexData(t,i,function(n,i){if(n)return e(n);r._geoDataIndexes[t.source]=i,e(null)})}.bind(this);this.loadGeoJSON(t,n)}},{key:"loadGeoJSON",value:function(t,e){if(t.url)c.getJSON(t.url,e);else{if("string"!=typeof t.data)return e(new Error("Input data is not a valid GeoJSON object."));try{return e(null,JSON.parse(t.data))}catch(t){return e(new Error("Input data is not a valid GeoJSON object."))}}}},{key:"removeSource",value:function(t){this._geoDataIndexes[t.source]&&delete this._geoDataIndexes[t.source]}},{key:"_indexData",value:function(){}}]),t}();e.default=f},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(257),v=n(400),m=i(v),g=n(517),_=i(g),y=n(28),x=i(y),b=n(10),S=function(t){function e(t,n,i){(0,s.default)(this,e);var r=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t,n,i));return r.tileSize=n.tileSize||256,r._isPixelGeo=n.isPixelGeo||!1,r._data=n.data,r._cache=new m.default(0,r.unloadTile.bind(r)),r._maxTileCacheSize=x.default.isPC()?800:200,r._on("error",function(){r._sourceErrored=!0}),r}return(0,h.default)(e,t),(0,u.default)(e,[{key:"getUniqueId",value:function(){return this._uniqueId||(this._uniqueId=(this.map&&this.map.id||b.uniqueId())+"_"+this.id),this._uniqueId}},{key:"addTile",value:function(){}},{key:"loadTile",value:function(){}},{key:"unloadTile",value:function(){}},{key:"abortTile",value:function(){}},{key:"reload",value:function(){var t=this;this._cache.reset(),b.forIn(this._items,function(e,n){t.reloadTile(n)})}},{key:"reloadTile",value:function(t){t.state!==p.TILE_STATE.loading&&(t.state=p.TILE_STATE.reloading,this.loadTile(t,{},this._tileLoaded.bind(this,t)))}},{key:"removeTile",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._items[t];if(n)if(delete this._items[t],n.hasData()){var i=n.coord.id;!e&&this._cache.add(i,n)}else n.aborted=!0,this.abortTile(n),this.unloadTile(n)}},{key:"clear",value:function(){this.clearTiles(),this._cache.reset()}},{key:"clearTiles",value:function(){var t=this;b.forIn(this._items,function(e){t.removeTile(e)})}},{key:"_tileLoaded",value:function(){}},{key:"getDrawItems",value:function(){return this._items}},{key:"onAdd",value:function(t){this.map=t}},{key:"onRemove",value:function(){this.map=null}},{key:"updateCacheSize",value:function(t){var e=Math.ceil(t.width/this.tileSize)+1,n=Math.ceil(t.height/this.tileSize)+1,i=e*n,r=Math.floor(5*i);if(x.default.isPC()){var a="number"==typeof this._maxTileCacheSize?Math.max(this._maxTileCacheSize,r):r;this._cache.setMaxSize(a)}else this._cache.setMaxSize(r)}},{key:"update",value:function(){}}]),e}(_.default);e.default=S},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(518),v=i(p),m=n(90),g=n(257),_=function(t){function e(t,n,i){(0,s.default)(this,e);var r=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t,n,i));return r.on("data",function(){r.hasGeoChanged_inLoading=!0}),r}return(0,h.default)(e,t),(0,u.default)(e,[{key:"_initialize",value:function(){this.type=m.SOURCE_TYPE.geojson}},{key:"setData",value:function(t){var e=this;return this._data=t,this._loadOriginData(function(){e._fire("data",{dataType:"source",sourceDataType:"content"})}),this}},{key:"reloadTile",value:function(t){var e=this;t.state!==g.TILE_STATE.loading?(t.state=g.TILE_STATE.reloading,this.hasGeoChanged_inLoading=!1,this.updateTileCallback?(this.updateTileCallback(),this.updateTileCallback=null):this.loadTile(t,{},this._tileLoaded.bind(this,t))):(this.hasGeoChanged_inLoading&&(this.updateTileCallback=function(){e.loadTile(t,{},function(){e._tileLoaded.bind(e,t)(),e._fire("data",{dataType:"source"}),e.hasGeoChanged_inLoading=!1})}),t.state=g.TILE_STATE.reloading)}},{key:"updateIndoorData",value:function(t,e){var n=this;arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&(t=this.indoorOption);var i=this._data.geometries,r=this._data.type,a=0;i&&i.forEach(function(i,o){var s=0;if("POLYLINE"===r&&(i.paths&&i.paths.forEach(function(t){s+=t.length||1}),s=s-1>0?s-1:0),!i.floorName||!i.buildingId)return void(a+=s);var l=1;l=t?t.floorName===i.floorName&&t.buildingId===i.buildingId?1:0:e?1:0;var u=n._items["0_0_0"];if("POINT"===r)u._data["0_0_0"].instancePixelOffsetList[3*o+2]=l,u._data["0_0_0"].uid=(new Date).getTime();else if("POLYLINE"===r){for(var c=a;c<a+s;c++)u._data["0_0_0"].instanceColorList[4*c+3]=255*l,u._data["0_0_0"].instanceBorderColorList[4*c+3]=255*l;a+=s,u._data["0_0_0"].uid=(new Date).getTime()}}),this.indoorOption=t}},{key:"_tileLoaded",value:function(){this.updateIndoorData&&this.updateIndoorData(null,!1,!0),this._fire("data_loaded")}},{key:"setStyle",value:function(t){var e=this;return this._data.styles=t,this._loadOriginData(function(){e._fire("data",{dataType:"source",sourceDataType:"content"})}),this}}]),e}(v.default);e.default=_},function(t,e,n){"use strict";function i(t){return 64===f.indexOf(t.charAt(t.length-1))?t.substring(0,t.length-1):t}function r(t){if(!t)return null;t=i(t),t=i(t);var e=parseInt(t.length/4*3,10),n=[];t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");var r=void 0,a=void 0,o=void 0,s=void 0,l=void 0,u=void 0,c=void 0,d=0,h=0;for(d=0;d<e;d+=3)s=f.indexOf(t.charAt(h)),h+=1,l=f.indexOf(t.charAt(h)),h+=1,u=f.indexOf(t.charAt(h)),h+=1,c=f.indexOf(t.charAt(h)),h+=1,r=s<<2|l>>4,a=(15&l)<<4|u>>2,o=(3&u)<<6|c,n.push(r),64!==u&&n.push(a),64!==c&&n.push(o);return n}function a(t,e){return t>>8-e&255|t<<e&255}function o(t){return a(t,2)^a(t,1)&a(t,3)}function s(t,e){return{x:e,y:t^o(e)}}function l(t){for(var e=t.length,n=[],i=0;i<e;i+=2){var r=t[i],a=0;i+1<e&&(a=t[i+1]);for(var o=0,l=0,u=0;u<3;u++){var c=s(r,a);o=c.x,r=o,l=c.y,a=l}n.push(o),n.push(l)}return n}function u(t){for(var e="",n=0;n<t.length;){var i=t[n],r=0,a=0;i<128?(e+=String.fromCharCode(i),n+=1):i>191&&i<224?(r=t[n+1],e+=String.fromCharCode((31&i)<<6|63&r),n+=2):(r=t[n+1],a=t[n+2],e+=String.fromCharCode((15&i)<<12|(63&r)<<6|63&a),n+=3)}return e}function c(t){var e=t.lastIndexOf("}");return t.substring(0,e+1)}var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.decode=function(t){return c(u(l(r(t))))}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var n=t[t.length-1];return e===F.BASE_LAYER_TYPE.region?t.cidx+String(1e5*(n>>16&65535)):t.cidx+String(1e5*(n>>16&65535)+(65535&n))}function a(t){var e=t.y/Math.pow(2,t.z);return 2*Math.atan(Math.exp(-2*(e-.5)*Math.PI))-Math.PI/2}function o(t){var e=a(t);return U.default.tileSize*Math.pow(2,t.z)/ot/Math.cos(e)}function s(t,e){var n=void 0;return J.forIn(t,function(t,i){i.minScaleVal<=e&&i.maxScaleVal>=e&&(n=i)}),n}function l(t,e){if(e){for(var n=t[1],i=e.transX,r=e.transY,a=e.scale,o=0;o<n.length;o+=2)n[o]=(n[o]+i)*a,n[o+1]=(n[o+1]+r)*a;t[0]===it&&(t[2]=t[2]*a)}}function u(t,e){var n=e.enc,i=e.imgUploadHook,r=e.childIdx,a=void 0===r?0:r;if(t instanceof Array){var o=-1,s=[],c=[],f=[],d=[];return t.forEach(function(t,e){var i=u(t,{enc:n,childIdx:e});0===i.ret&&(o=0),s.push(i.img),c.push(i.ext_img),f=f.concat(i.features||[]),d=d.concat(i.pois||[])}),i&&(s.length||c.length)&&i(s,c),{ret:o,img:s,ext_img:c,features:f,pois:d}}if(!t)return{};var h=null;if(t.features)h=t;else{if(!t.data)return{};h=n?t:Q(W(t.data))}if(0!==h.ret)return{};i&&i(h.img,h.ext_img);var p=Z(X(h.features))||[],v=Z(X(h.pois))||[];return p.unshift([rt,[0,0,256,0,256,256,0,256],"",0]),p.forEach(function(e){e[0]instanceof Array?e.forEach(function(e){l(e,t.tileTransform)}):l(e,t.tileTransform),e.cidx=a,e.transform=t.tileTransform||{}}),v.forEach(function(e){e[0]instanceof Array?e.forEach(function(e){l(e,t.tileTransform)}):l(e,t.tileTransform),e.cidx=a,e.transform=t.tileTransform||{}}),h.features=p,h.pois=v,h}var c=n(82),f=i(c),d=n(25),h=i(d),p=n(115),v=i(p),m=n(94),g=i(m),_=n(23),y=i(_),x=n(18),b=i(x),S=n(17),w=i(S),E=n(0),A=i(E),T=n(1),M=i(T),I=n(27),P=i(I),k=n(683),L=i(k),C=n(684),R=i(C),D=n(685),N=i(D),B=n(397),O=i(B),F=n(53),z=n(308),V=n(22),U=i(V),G=n(249),H=n(245),Y=i(H),j=n(309),W=n(522).decode,X=n(724).restores,Z=n(723).merge,q=n(10),Q=q.parseJson,J=n(10),K=n(525),$=K.getVectorStyle,tt=n(10),et=tt.uniqueId,nt={65536:F.BASE_LAYER_TYPE.point,131072:F.BASE_LAYER_TYPE.line,196608:F.BASE_LAYER_TYPE.region,262144:F.BASE_LAYER_TYPE.label,327680:F.BASE_LAYER_TYPE.arrow},it=196619,rt=196613,at=(0,P.default)(Y.default,2),ot=at[1],st=function(){function t(e){(0,A.default)(this,t),this.uid=e.uid,this.coord=e.coord,this.dataZoom=e.coord.z,this._needUploadTileImage=!1,this._billboardFeatures=[];var n=e.styleId;this.styleId=n,this.parse=(0,z.isDefaultStyle)(n)?this.parseForDefaultStyle.bind(this):this.parseForCustomStyle.bind(this)}return(0,M.default)(t,[{key:"parseForCustomStyle",value:function(t,e,n,i,r,a,s){function l(t){if(t){var e=t;return t.children&&(0,w.default)(t.children).length>0&&J.forIn(t.children,function(t,n){e=[].concat((0,b.default)(e),(0,b.default)(n))}),e}}function u(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=o(this.coord.children()[0]),r=this.getOriginalGroundFeatures(v.features,e,!0,i),a=(0,L.default)(r.ranks,t);E[e]=r,n&&p[F.BASE_LAYER_TYPE.base][t]?(!p[F.BASE_LAYER_TYPE.base][t].children&&(p[F.BASE_LAYER_TYPE.base][t].children={}),p[F.BASE_LAYER_TYPE.base][t].children[e]=a):(p[F.BASE_LAYER_TYPE.base]={},p[F.BASE_LAYER_TYPE.base][t]=a)}function c(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(n){var r=(0,R.default)(n.buildings,t),a=(0,L.default)(n.ranksSide,t),o=this.parseInstanceArrow(p.arrow,t);i?(!p[F.BASE_LAYER_TYPE.building3d][t].children&&(p[F.BASE_LAYER_TYPE.building3d][t].children={}),p[F.BASE_LAYER_TYPE.building3d][t].children[e]={buildings:r,buildSideShapes:a},o&&(p[F.BASE_LAYER_TYPE.arrow][t].children[e]=p.arrow[t].slice()||[],p[F.BASE_LAYER_TYPE.arrow][t].children[e].instance=o)):(p[F.BASE_LAYER_TYPE.building3d]={},p[F.BASE_LAYER_TYPE.building3d][t]={},p[F.BASE_LAYER_TYPE.building3d][t].buildings=r,p[F.BASE_LAYER_TYPE.building3d][t].buildSideShapes=a,o&&(p[F.BASE_LAYER_TYPE.arrow]=p.arrow||{},p[F.BASE_LAYER_TYPE.arrow][t]=p.arrow[t]||[],p[F.BASE_LAYER_TYPE.arrow][t].instance=o))}}var f=this,d=this.coord.id,h=this.parseOriginData(t,e,n,i,null,s),p=h.layerstiles,v=h.jsonData;if(!p||!v)return void a(null,null);var m=l(p.point&&p.point[d]),_=l(p.label&&p.label[d]),x=[];m&&m.forEach(function(t){t&&t.datas&&t.datas[0].textName&&t.datas[0].textName.split("").forEach(function(e){x.findIndex(function(n){return n.text===e&&n.font_weight===t.datas[0].font_weight})<0&&x.push({text:e,font_weight:t.datas[0].font_weight})})}),_&&_.forEach(function(t){t&&t.roadName&&t.roadName.split("").forEach(function(e){x.findIndex(function(n){return n.text===e&&n.font_weight===t.roads[0].datas[0].font_weight})<0&&x.push({text:e,font_weight:t.roads[0].datas[0].font_weight})})});var S={},E={};if(u.call(this,d,this.dataZoom),this.dataZoom===U.default.maxDataZoom)for(var A=U.default.maxDataZoom+1;A<=U.default.maxZoom;A++)u.call(this,d,A,!0);if(S.base=p.base,delete p.base,S=this.transferData(d,S,"base",this.dataZoom),S.id=d,a(null,S),c.call(this,d,this.dataZoom,E[this.dataZoom]),this.dataZoom===U.default.maxDataZoom)for(var T=U.default.maxDataZoom+1;T<=U.default.maxZoom;T++)c.call(this,d,T,E[T],!0);new y.default(function(t){var e="";f._needUploadTileImage&&v.img&&(e={tileImage64:v.img,tileId:d,billboardData:(0,g.default)(f._billboardFeatures)}),r.send("uploadTileTexture",{zoom:f.coord.z,uid:f.uid,billboard:e,glyphs:x},function(e,n){if(e)console.error(e),t([{},{}]);else{var i=JSON.parse(n.billboardMapping),r=JSON.parse(n.glyphMapping[0]),a=JSON.parse(n.glyphMapping[1]);t([i,r,a])}})}).then(function(t){function e(t,e){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]){var i=p.point[t].children&&p.point[t].children[e],r=p.label[t].children&&p.label[t].children[e],a={point:{},label:{}};a.point[t]=i,a.label[t]=r;var u=this.parseInstancePoint(a,t,n,{glyphMapping:s,glyphMappingBold:l,billboardMapping:o});i&&(p[F.BASE_LAYER_TYPE.point][t].children[e].instance=u),r&&(p[F.BASE_LAYER_TYPE.label][t].children[e].instance=u)}else{var c=this.parseInstancePoint(p,t,n,{glyphMapping:s,glyphMappingBold:l,billboardMapping:o});p[F.BASE_LAYER_TYPE.point]=p.point||{},p[F.BASE_LAYER_TYPE.point][t]=p.point[t]||[],p[F.BASE_LAYER_TYPE.point][t].instance=c,p[F.BASE_LAYER_TYPE.label]=p.label||{},p[F.BASE_LAYER_TYPE.label][t]=p.label[t]||[],p[F.BASE_LAYER_TYPE.label][t].instance=c}}var r=(0,P.default)(t,3),o=r[0],s=r[1],l=r[2];if(e.call(f,d,f.dataZoom),f.dataZoom===U.default.maxDataZoom)for(var u=U.default.maxDataZoom+1;u<=U.default.maxZoom;u++)e.call(f,d,u,!0);p=f.transferData(d,p,"increment"),p.id=d,p.styleId=i.styleId,a(null,p)})}},{key:"transferData",value:function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=[];return(0,w.default)(e).forEach(function(n){if(n===F.BASE_LAYER_TYPE.base){var i=e[n]&&e[n][t];if(!i)return;e[n][t]={id:t,children:i.children||null,indeices:{arrayBuffer:i.indeices.dataView,length:i.indeices.length},lineCount:i.lineCount,size:i.size,vertices:{arrayBuffer:i.vertices.dataView,attributes:i.vertices.attributes,bytesPerElement:i.vertices.bytesPerElement},vertiesCount:i.vertiesCount,isNullDefaultData:r}}else if(n===F.BASE_LAYER_TYPE.region)delete e[F.BASE_LAYER_TYPE.region];else if(n===F.BASE_LAYER_TYPE.line)delete e[F.BASE_LAYER_TYPE.line];else if(n===F.BASE_LAYER_TYPE.building3d){var o=e[n]&&e[n][t]&&e[n][t].buildings;if(!o)return;e[n][t].buildings={id:t,children:o.children||null,indeices:{arrayBuffer:o.indeices.dataView,length:o.indeices.length},size:o.size,vertices:{arrayBuffer:o.vertices.dataView,attributes:o.vertices.attributes,bytesPerElement:o.vertices.bytesPerElement}};var s=e[n]&&e[n][t].buildSideShapes;if(!s)return;e[n][t].buildSideShapes={id:t,children:s.children||null,indeices:{arrayBuffer:s.indeices.dataView,length:s.indeices.length},lineCount:s.lineCount,size:s.size,vertices:{arrayBuffer:s.vertices.dataView,attributes:s.vertices.attributes,bytesPerElement:s.vertices.bytesPerElement},vertiesCount:s.vertiesCount}}else if(n===F.BASE_LAYER_TYPE.arrow){var l=e[F.BASE_LAYER_TYPE.arrow]&&e[F.BASE_LAYER_TYPE.arrow][t];if(!l)return;l.forEach(function(t){t.datas&&t.datas.forEach(function(t){t.coords&&(t.coords=new Int16Array(t.coords),a.push(t.coords.buffer)),t.color_fill&&(t.color_fill=new Uint8ClampedArray(t.color_fill),a.push(t.color_fill.buffer))})})}else if(n===F.BASE_LAYER_TYPE.point){var u=e[F.BASE_LAYER_TYPE.point]&&e[F.BASE_LAYER_TYPE.point][t];if(!u)return;u.forEach(function(t){t.translate&&!a.includes(t.translate.buffer)&&a.push(t.translate.buffer),t.vertices&&!a.includes(t.vertices.buffer)&&a.push(t.vertices.buffer),t.datas&&t.datas.forEach(function(t){t.coords&&(t.coords=new Int16Array(t.coords),a.push(t.coords.buffer)),t.icon_coords&&(t.icon_coords=new Int16Array(t.icon_coords),a.push(t.icon_coords.buffer)),t.text_bounds&&(t.text_bounds=new Int16Array(t.text_bounds),a.push(t.text_bounds.buffer)),t.text&&t.text.forEach(function(t){t.coords&&(t.coords=new Int16Array(t.coords),a.push(t.coords.buffer))}),t.font_color&&(t.font_color=new Uint8ClampedArray(t.font_color),a.push(t.font_color.buffer)),t.background_color&&(t.background_color=new Uint8ClampedArray(t.background_color),a.push(t.background_color.buffer))})});var c=e[F.BASE_LAYER_TYPE.point][t].instance;(0,w.default)(c).forEach(function(t){"count"!==t&&a.push(c[t].buffer)})}else if(n===F.BASE_LAYER_TYPE.label){var f=e[F.BASE_LAYER_TYPE.label]&&e[F.BASE_LAYER_TYPE.label][t];if(!f)return;f.forEach(function(t){t.roads&&t.roads.forEach(function(t){t.datas&&t.datas.forEach(function(t){t.coords&&(t.coords=new Int16Array(t.coords),a.push(t.coords.buffer)),t.text_bounds&&(t.text_bounds=new Int16Array(t.text_bounds),a.push(t.text_bounds.buffer)),t.glyph_text_bounds&&(t.glyph_text_bounds=new Int16Array(t.glyph_text_bounds),a.push(t.glyph_text_bounds.buffer)),t.font_color&&(t.font_color=new Uint8ClampedArray(t.font_color),a.push(t.font_color.buffer)),t.background_color&&(t.background_color=new Uint8ClampedArray(t.background_color),a.push(t.background_color.buffer))})})})}}),"base"===n?(a.push(e[F.BASE_LAYER_TYPE.base][t].vertices.arrayBuffer.buffer),a.push(e[F.BASE_LAYER_TYPE.base][t].indeices.arrayBuffer.buffer),e.baseData=!0):"increment"===n&&(a.push(e[F.BASE_LAYER_TYPE.building3d][t].buildings.vertices.arrayBuffer.buffer),a.push(e[F.BASE_LAYER_TYPE.building3d][t].buildings.indeices.arrayBuffer.buffer),a.push(e[F.BASE_LAYER_TYPE.building3d][t].buildSideShapes.vertices.arrayBuffer.buffer),a.push(e[F.BASE_LAYER_TYPE.building3d][t].buildSideShapes.indeices.arrayBuffer.buffer),e.incrementData=!0),e.transferableList=a,e}},{key:"getOriginalGroundFeatures",value:function(t,e,n,i){for(var a=e,o={},l={},u=[],c=void 0,f=void 0,d=void 0,h=void 0,p=void 0,m=void 0,g=void 0,_=void 0,y=0,x=t.length;y<x;y++){c=t[y];var b=c,S=(0,P.default)(b,3);if(f=S[0],p=S[1],d=S[2],g=this.mapStyle.layerMeta[f],_=g?s(g.styles,a):void 0,(0,j.isRoadwayLine)(f)&&U.default.isClientRender&&g&&!_&&(_=g.styles["10-11"]||g.styles["9-10"]),_&&(f===it&&d>0&&u.push({datas:p,h:c[2]*i,colorFill:_.color_fill,colorSide:_.color_side,transform:c.transform}),_&&_.color_fill[3])){var w=s(g.styles,a+1),E=s(g.styles,a-1);h=g.name,m=r(c,g.type);var A=void 0;if(g.type!==F.BASE_LAYER_TYPE.region&&g.type!==F.BASE_LAYER_TYPE.line)continue;if(p instanceof Array&&p.length&&"number"==typeof p[0]&&(p=[p]),g.type===F.BASE_LAYER_TYPE.region);else if(g.type===F.BASE_LAYER_TYPE.line){if(0===_.width)continue;A=c[c.length-2]}o[m]=o[m]||{};var T=o[m][h],M={};if(g.type===F.BASE_LAYER_TYPE.line&&"number"==typeof c[2]&&(M.startDistance=c[2]),T)if(T.datas[0]instanceof Array||(T.datas=[T.datas]),p[0]instanceof Array)for(var I=0,k=p.length;I<k;I++)T.datas.push(p[I]);else T.datas.push(p);else o[m][h]={id:this.coord.id+"_"+h,layerId:f,layerName:h,type:g.type,datas:p,style:_,nextStyle:w,preStyle:E,zLevel:A,transform:c.transform,options:M},T=o[m][h]}}return n&&(J.forIn(o,function(t,e){var n=(0,v.default)(e).sort(function(t,e){return t.style.layerseq-e.style.layerseq});J.forIn(n,function(e,i){i.layerId===it&&(l[t]={},l[t][e]=n[e],n.splice(e,1))}),o[t]=n}),J.forIn(l,function(t,e){var n=(0,v.default)(e).sort(function(t,e){return t.style.layerseq-e.style.layerseq});l[t]=n})),{ranks:o,ranksSide:l,buildings:u}}},{key:"parseOriginData",value:function(t,e,n,i,a,o){var s=this;this.status="parsing",this.data=e,this.mapStyle=i;var l=this.coord.id,c={},f={};O.default.setStyleTag(this.mapStyle.styleTag);var d=u(e,{enc:o,imgUploadHook:a});if(0!==d.ret)return{};for(var p=d.features,v=0,m=p.length;v<m;v++){var g=p[v],_=g[0]instanceof Array?g[0][0]:g[0];if(!_)return void console.warn("featureId is not exist",_);var y=983040&_;c[nt[y]]?c[nt[y]].push(g):(c[nt[y]]=[],f[nt[y]]={},c[nt[y]].push(g))}t.isNullDefaultData&&(d.features=d.features.filter(function(t){var e=t[0]instanceof Array?t[0][0]:t[0];return nt[983040&e]===F.BASE_LAYER_TYPE.region}));var x=this.mapStyle.style,b=[];return J.forIn(x,function(t,e){function i(e,i){for(var s=[],l={},c=0,m=v.length;c<m;c++){var g=v[c],_=[];if(g[0]instanceof Array)(_=this.parseRoadName(g,o,u,p,i,e,this.coord.tileSize))&&s.push(_);else if((0,j.isRoadwayLabel)(g[0])&&M&&!U.default.isBatchVector&&U.default.isClientRender&&!(0,z.isDefaultStyle)(this.styleId)){var y=[g];y.cidx=g.cidx,y.transform=g.transform,(_=this.parseRoadName(y,o,u,p,i,e,this.coord.tileSize))&&s.push(_)}else if((0,j.isRoadwayNum)(g[0])&&M&&!U.default.isBatchVector&&U.default.isClientRender&&!(0,z.isDefaultStyle)(this.styleId)){var x=g[0],S=""+g[2],w=$(o,u,p,x,i),E=this.parsePoi(g,w,this.coord);if(E&&(l[S]=!0,_.push(E)),_.length>0){var A={type:F.BASE_LAYER_TYPE.point,datas:_,id:e+"_"+x+"_"+c,rank:r(g,a)};b.push(A)}}else{var T=g[0],M=$(o,u,p,T,i);if(M){if(a===F.BASE_LAYER_TYPE.point){var I=""+g[2],P=this.parsePoi(g,M,this.coord);if(!P)continue;l[I]=!0,_.push(P)}else if(a===F.BASE_LAYER_TYPE.arrow){var k=this.parseArrow(g,M,this.coord);_.push(k)}else if(g[1][0]instanceof Array){var L=!0,C=!1,R=void 0;try{for(var D,B=(0,h.default)(g[1]);!(L=(D=B.next()).done);L=!0){var O=D.value,V={coords:O};_.push(V)}}catch(t){C=!0,R=t}finally{try{!L&&B.return&&B.return()}finally{if(C)throw R}}}else{var G={coords:g[1]};_.push(G)}var H={type:a,datas:_,id:e+"_"+T+"_"+c,rank:r(g,a)};s.push(H)}}}if(a===F.BASE_LAYER_TYPE.point&&d.pois&&d.pois.length>0&&d.ext_img)for(var Y=0,W=d.pois.length;Y<W;Y++){var X=d.pois[Y],Z=[],q=""+X[2],Q=X[0],J=$(o,u,p,Q,i);if(J&&!l[q]){var K=this.parsePoi(X,J,this.coord,{isExt:!0});if(K){Z.push(K);var tt={type:a,datas:Z,isExt:!0,id:e+"_ext_"+Y,rank:r(X,a)};s.push(tt)}}}var et=void 0;switch(a){case F.BASE_LAYER_TYPE.point:!U.default.isBatchVector&&U.default.isClientRender&&b.forEach(function(t){s.push(t)}),et=(0,N.default)(s,n);break;default:et=s}i>U.default.maxDataZoom?(!f[t][e]&&(f[t][e]={}),!f[t][e].children&&(f[t][e].children={}),f[t][e].children[i]=et):f[t][e]=et}if(c[t]){var a=e.type,o=e.style,u=e.relyStyle,p=e.relyStyleField,v=c[t],m=s.dataZoom;if(i.call(s,l,m),m===U.default.maxDataZoom)for(var g=U.default.maxDataZoom+1;g<=U.default.maxZoom;g++)i.call(s,""+s.coord.id,g)}}),{layerstiles:f,jsonData:d}}},{key:"parseForDefaultStyle",value:function(t,e,n,i,r,a,s){function l(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=o(this.coord.children()[0]),r=this.getOriginalGroundFeatures(m.features,this.dataZoom,!0,i),a=(0,L.default)(r.ranks,t);_[e]=r,n&&v[F.BASE_LAYER_TYPE.base][t]?(!v[F.BASE_LAYER_TYPE.base][t].children&&(v[F.BASE_LAYER_TYPE.base][t].children={}),v[F.BASE_LAYER_TYPE.base][t].children[e]=a):(v[F.BASE_LAYER_TYPE.base]={},v[F.BASE_LAYER_TYPE.base][t]=a)}function u(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(n){var r=(0,R.default)(n.buildings,t),a=(0,L.default)(n.ranksSide,t),o=this.parseInstanceArrow(v.arrow,t);i?(!v[F.BASE_LAYER_TYPE.building3d][t].children&&(v[F.BASE_LAYER_TYPE.building3d][t].children={}),v[F.BASE_LAYER_TYPE.building3d][t].children[e]={buildings:r,buildSideShapes:a},o&&(v[F.BASE_LAYER_TYPE.arrow][t].children[e]=v.arrow[t].slice()||[],v[F.BASE_LAYER_TYPE.arrow][t].children[e].instance=o)):(v[F.BASE_LAYER_TYPE.building3d]={},v[F.BASE_LAYER_TYPE.building3d][t]={},v[F.BASE_LAYER_TYPE.building3d][t].buildings=r,v[F.BASE_LAYER_TYPE.building3d][t].buildSideShapes=a,o&&(v[F.BASE_LAYER_TYPE.arrow]=v.arrow||{},v[F.BASE_LAYER_TYPE.arrow][t]=v.arrow[t]||[],v[F.BASE_LAYER_TYPE.arrow][t].instance=o))}}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];if(d&&v){var i=this.parseInstancePoint(v,h,n,t);v[F.BASE_LAYER_TYPE.point]=v.point||{},v[F.BASE_LAYER_TYPE.point][h]=v.point[h]||[],v[F.BASE_LAYER_TYPE.point][h].instance=i,v[F.BASE_LAYER_TYPE.label]=v.label||{},v[F.BASE_LAYER_TYPE.label][h]=v.label[h]||[],v[F.BASE_LAYER_TYPE.label][h].instance=i,v=this.transferData(h,v,"increment",e),v.id=h,a(null,v)}}var f=this,d=!1,h=this.coord.id,p=this.parseOriginData(t,e,n,i,function(e,n){e?r.send("uploadTileImage",{zoom:f.coord.z,maxDataZoom:t.maxDataZoom,sourceId:t.sourceId,uid:f.uid,tileId:h,imgBase64:e,extImgBase64:n},function(t,e){e&&(d=!0,c.call(f,e,f.dataZoom))}):d=!0},s),v=p.layerstiles,m=p.jsonData;if(!v||!m)return void a(null,null);var g={},_={};if(l.call(this,h,this.dataZoom),this.dataZoom===U.default.maxDataZoom)for(var y=U.default.maxDataZoom+1;y<=U.default.maxZoom;y++)l.call(this,h,y,!0);if(g.base=v.base,delete v.base,g=this.transferData(h,g,"base",this.dataZoom,t.isNullDefaultData),g.id=h,a(null,g),u.call(this,h,this.dataZoom,_[this.dataZoom]),this.dataZoom===U.default.maxDataZoom)for(var x=U.default.maxDataZoom+1;x<=U.default.maxZoom;x++)u.call(this,h,x,_[x],!0);c.call(this)}},{key:"parseInstanceArrow",value:function(t,e){if(!t||!t[e])return null;var n=[],i=[],r=[];t[e].forEach(function(t){var e=t.datas[0];i.push(e.width),r.push.apply(r,(0,b.default)(e.color_fill)),n.push.apply(n,(0,b.default)(e.coords))});var a=new Float32Array(n),o=new Float32Array(r);return{instanceCoordsTypeArray:a,instanceWidthTypeArray:new Float32Array(i),instanceColorTypeArray:o,count:n.length/4}}},{key:"parseInstancePoint",value:function(t,e,n,i){var r=this,a=0,o=i.extOffset,s=void 0===o?0:o,l=i.yOffsetList,u=void 0===l?[]:l,c=i.glyphMapping,d=i.billboardMapping,h=i.glyphMappingBold,p=[],v=[],m=[],g=[],_=[],y=[],x=[],S=[],w=[],E=t.point&&t.point[e]||[],A=E.filter(function(t){return t&&t.datas&&t.datas[0]&&t.datas[0].icon_coords})||[],T=[];t.label&&t.label[e]&&t.label[e].forEach(function(t){T=T.concat(t.roads||[])}),A.forEach(function(t){var e=n.scale,i=n.info,r=t.datas[0];if(r&&r.icon&&r.icon_coords){var o=i[String(r.icon)];if(!o)return;var s=o.width/e/2,l=o.height/e/2,u=r.icon_coords[0],d=-r.icon_coords[1];if(p.push(u,d,0),m.push(o.left,o.bottom,o.right-o.left,o.top-o.bottom),r.stretching_len){for(var b=r.text,E=0,A=0,T=0,M=b.length;T<M;T++)!function(t,e){var n=b[t],i=n.text.length,a=[0],o=0;(0,f.default)(n.text).forEach(function(t){var e="normal"===r.font_weight?c[t]:h[t],n=r.font_size/e.fontSize;a.push(a[a.length-1]+e.width*n),o=Math.max(o,e.height*n)});var s=a[i],l=o;A=A>s?A:s,E+=l}(T);v.push(2*s,2*l,s,l),r.screenW=r.stretching_len[0]+A,r.screenH=r.stretching_len[1]+E;var I=(r.stretching_len[0]+A)/(2*s),P=(r.stretching_len[1]+E)/(2*l);g.push(I,P)}else v.push(2*s,2*l,s,l),g.push(1,1);_.push(0,1,1,1),y.push(1,1,1,1),S.push(0,0,0,0),x.push(0,0,0,0),w.push(0),t.iconSymbolIndex=a,a+=1}}),E.forEach(function(t){var e=t.datas[0];if(e.coords.length)for(var i=e.text,o=e.text_bounds,l=void 0,d=e.cidx||0,E=void 0,A=0,T=i.length;A<T;A++){l=2===T?o.slice(4*(1-A),4*(1-A)+4):o.slice(4*A,4*A+4);var M=0;if(M=t.isExt?u[d+s]||0:u[d]||0,l[1]+=M,!(l[2]<10||l[3]<10||0===l.length)){var I=i[A],k=(0,P.default)(I.coords,2),L=k[0],C=k[1],R=I.centerOffset,D=l[2]/n.scale,N=l[3]/n.scale,B={x:D/2,y:N/2};R&&(B={x:D/2-R.x,y:N/2-R.y}),(0,z.isDefaultStyle)(r.styleId)?(p.push(L,-C,0),v.push(D,N,B.x,B.y),m.push.apply(m,(0,b.default)(l)),_.push(0,1,0,1),I.textSymbolIndexList=[a],a+=1):"center"===e.text_align&&function(){var t=new Uint16Array(I.text.length),n=I.text.length,i=[0],o=0;(0,f.default)(I.text).forEach(function(t){var n="normal"===e.font_weight?c[t]:h[t],r=e.font_size/n.fontSize;i.push(i[i.length-1]+n.width*r),o=Math.max(o,n.height*r)});var s=i[n],l=o,u=Math.max(1,s/D,l/N);if(D=s,N=l,!U.default.isBatchVector&&U.default.isClientRender){var d=R?D/2-R.x:D/2,T=R?N/2-R.y:N/2;B=0===A?{x:d,y:T}:{x:d,y:E.y-l},B=r.instanceAchorAdapter(B,e,A,N)}else B={x:R?D/2-R.x*(e.stretching_len?1:u):D/2,y:R?N/2-R.y*(e.stretching_len?1:u):N/2};E=B;for(var M=0;M<n;M++){var P="normal"===e.font_weight?c[I.text[M]]:h[I.text[M]],k=e.font_size/P.fontSize;p.push(L,-C,0),g.push(1,1),v.push(P.width*k,P.height*k,B.x-i[M],B.y),m.push(P.x,P.y,P.width,P.height),_.push(0,1,0,1),y.push.apply(y,(0,b.default)(e.font_color)),x.push.apply(x,(0,b.default)((0,G.encodePickingColor)(e.style_id,!0))),S.push.apply(S,(0,b.default)(e.stroke_color)),w.push(e.stroke_width),t[M]=a,a+=1}I.textSymbolIndexList=t}(),I.instance_trans=[L,-C],I.instance_coords=[D,N,B.x,B.y]}}}),T.forEach(function(t){var e=t.datas[0];if(e){var i=e.text_bounds;i[1]+=u[e.cidx]||0;var o=null;if(o=e.isBillboard&&e.font_size?{w:i[2]/1.5,h:i[3]/1.5}:{w:e.font_size,h:e.font_size},p.push(e.coords[0],-e.coords[1],1),g.push(1,1),(0,z.isDefaultStyle)(r.styleId)){var s=i[2]/n.scale,l=i[3]/n.scale;v.push(s,l,s/2,l/2),m.push(i[0],i[1],i[2],i[3]),_.push(0,1,0,1)}else if(e.isBillboard){var f=d&&d[e.text];e.text_bounds=[f.x,f.y,f.width,f.height],t.datas[1].text_bounds=[f.x,f.y,f.width,f.height],m.push(f.x,f.y,f.width,f.height),v.push(o.w,o.h,o.w/2,o.h/2),_.push(0,1,1,1),y.push(1,1,1,1),S.push(0,0,0,0),x.push(0,0,0,0),w.push(0)}else if(!U.default.isBatchVector&&U.default.isClientRender)for(var E=0;E<e.text.length;E++){var A="normal"===e.font_weight?c[e.text[E]]:h[e.text[E]],T=e.font_size/A.fontSize;e.glyph_text_bounds=[A.x,A.y,A.width,A.height],t.datas[1].glyph_text_bounds=[A.x,A.y,A.width,A.height],v.push(A.width*T,A.height*T,A.width*T/2,A.height*T/2),m.push(A.x,A.y,A.width,A.height),_.push(0,1,0,1),y.push.apply(y,(0,b.default)(e.font_color)),x.push.apply(x,(0,b.default)((0,G.encodePickingColor)(e.style_id,!0))),S.push.apply(S,(0,b.default)(e.stroke_color)),w.push(e.stroke_width)}else{var M="normal"===e.font_weight?c[e.text]:h[e.text],I=e.font_size/M.fontSize;e.glyph_text_bounds=[M.x,M.y,M.width,M.height],t.datas[1].glyph_text_bounds=[M.x,M.y,M.width,M.height],v.push(M.width*I,M.height*I,M.width*I/2,M.height*I/2),m.push(M.x,M.y,M.width,M.height),_.push(0,1,0,1),y.push.apply(y,(0,b.default)(e.font_color)),x.push.apply(x,(0,b.default)((0,G.encodePickingColor)(e.style_id,!0))),S.push.apply(S,(0,b.default)(e.stroke_color)),w.push(e.stroke_width)}t.roadSymbolIndex=a,a+=1}});var M=new Float32Array(p),I=new Float32Array(v),k=new Float32Array(m),L=new Float32Array(g),C=new Float32Array(_),R=new Uint8ClampedArray(y),D=new Uint8ClampedArray(x);return{instanceTransTypeArray:M,instanceCoordsTypeArray:I,instanceTextBoundsTypeArray:k,instanceStrentchinglensTypeArray:L,instanceInfosTypeArray:C,instanceColorsTypeArray:R,instanceStrokeColorsTypeArray:new Uint8ClampedArray(S),instanceStrokeWidthTypeArray:new Float32Array(w),instancePickingColorsTypeArray:D,count:_.length/4}}},{key:"instanceAchorAdapter",value:function(t,e,n,i){var r=t;return U.default.isBatchVector||!U.default.isClientRender||(0,j.isTransportPoint)(e.style_id)||(2===e.text.length&&0===n&&(r={x:-12,y:i}),2===e.text.length&&1===n&&(r={x:-12,y:0})),r}},{key:"parsePoi",value:function(t,e,n,i){var r=n.tileSize,a={};a.cidx=t.cidx,a.coords=t[1].slice(),a.text=[],a.text_mix=t[3]||0,a.text_align="center",a.text_bounds=t[5]||[0,0,147,27],a.style_id=t[0],a.font_size=e.font_size,a.font_color=e.font_color?[].concat((0,b.default)(e.font_color.slice(0,3)),[255*e.font_color[3]]):[0,0,0,0],a.stroke_color=e.background_color?[].concat((0,b.default)(e.background_color.slice(0,3)),[255*e.background_color[3]]):[0,0,0,0];var o=t.transform,s=o.transX,l=void 0===s?0:s,u=o.transY,c=void 0===u?0:u,f=o.scale,d=void 0===f?1:f,h=(0+l)*d,p=(r+l)*d,v=(0+c)*d,m=(r+c)*d,g=t[2];switch(a.textName=g,a.font_weight=1===e.font_weight?"bold":"normal",a.font_family=e.font_family?e.font_family:"",e.effect){case 5:a.stroke_width=e.effect_size+1;break;case 6:!U.default.isBatchVector&&U.default.isClientRender?(a.stretching_len=e.stretching_len||[0,0],a.icon=e.icon_offset,a.icon_coords=[t[1][0],t[1][1]]):(a.isBillboard=!0,this._needUploadTileImage=!0);case 1:case 2:default:a.background_color=null,a.stroke_width=0}if(e.icon_offset&&"65535"!==e.icon_offset&&"-1"!==e.icon_offset&&6!==e.effect){var _=e.icon_offset;a.icon=_,a.icon_coords=[t[1][0],t[1][1]],a.coords.shift(),a.coords.shift(),i&&i.isExt&&e.font_size>0&&0===a.coords.length&&(a.coords.push(a.icon_coords[0]),a.coords.push(a.icon_coords[1]+(8+e.font_size/2+2)*d),/\//.test(a.textName)&&(a.coords.push(a.icon_coords[0]),a.coords.push(a.coords[1]+(e.font_size+2)*d)))}if(a.coords[0]<h||a.coords[0]>=p||a.coords[1]<v||a.coords[1]>=m)return null;if(!a.font_size||void 0===g||"@"===g)return a;var y=g.toString(),x=a.isBillboard?[y]:y.split(/\//);x.length>1&&4===a.text_bounds.length&&(a.text_bounds=a.text_bounds.concat([0,0,147,27]));var S=null;a.icon_coords&&!a.stretching_len?S={x:a.icon_coords[0],y:a.icon_coords[1]}:2===x.length&&(S={x:(a.coords[0]+a.coords[2])/2,y:(a.coords[1]+a.coords[3])/2},a.stretching_len&&(a.icon_coords=[S.x,S.y]));for(var w=0,E=x.length;w<E;w++){var A=a.coords[2*w],T=a.coords[2*w+1],M=a.text_bounds,I=null;if(a.stretching_len&&4===a.text_bounds.length){var k=(0,P.default)(a.text_bounds,4),L=k[0],C=k[1],R=k[2],D=k[3];I=2===E?[L,C/2-2,R,D/2]:[L,C,R,D/2],a.text_bounds=[L,C,R,D/2,L,C/2-2,R,D/2]}else I=2===E?M.slice(4*(1-w),4*(1-w)+4):M.slice(4*w,4*w+4);var N=S?{x:(A-S.x)/d,y:(T-S.y)/d}:null,B={text:x[w],coords:S?[S.x,S.y]:[A,T],centerOffset:N,rank:t[4]||this.getRankPatch(a.style_id)};if(!(A&&T||0===A||0===T))break;a.text.push(B),a.isBillboard&&this._billboardFeatures.push({text:x[w],bounds:I,cidx:a.cidx})}return 1===a.text.length&&!U.default.isBatchVector&&U.default.isClientRender&&a.text[0].centerOffset&&(a.text[0].centerOffset.x=0,a.text[0].centerOffset.y=16),a}},{key:"getRankPatch",value:function(t){return(0,j.isTransportPoint)(t)?10*Math.random():100+10*Math.random()}},{key:"parseRoadName",value:function(t,e,n,i,r,a,o){var s=o||256,l=[],u="",c=t.transform,f=c.transX,d=void 0===f?0:f,h=c.transY,p=void 0===h?0:h,v=c.scale,m=void 0===v?1:v,g=(0+d)*m,_=(s+d)*m,y=(0+p)*m,x=(s+p)*m,S=t.length/2-.5,w=void 0;if(S%1==0)w=t[S][1];else{var E=t[Math.floor(S)][1],A=t[Math.ceil(S)][1];w=[(E[0]+A[0])/2,(E[1]+A[1])/2]}if(w[0]<g||w[0]>_||w[1]<y||w[1]>x)return null;for(var T=0,M=t.length;T<M;T++){var I=t[T],P=I[0],k=$(e,n,i,P,r);if(k){var L=[],C={};switch(C.coordScale=m,C.cidx=t.cidx,C.coords=I[1].slice(),C.text=I[2],C.text_mix=I[3]||0,C.text_bounds=I[5]||[0,0,147,27],C.rank=I[4],C.font_size=k.font_size,C.style_id=I[0],C.font_color=k.font_color?[].concat((0,b.default)(k.font_color.slice(0,3)),[255*k.font_color[3]]):[0,0,0,0],C.stroke_color=k.background_color?[].concat((0,b.default)(k.background_color.slice(0,3)),[255*k.background_color[3]]):[0,0,0,0],k.effect){case 5:C.stroke_width=k.effect_size+1;break;case 6:!U.default.isBatchVector&&U.default.isClientRender?(C.stretching_len=k.stretching_len||[0,0],C.icon=k.icon_offset,C.icon_coords=[I[1][0],I[1][1]]):(C.isBillboard=!0,this._needUploadTileImage=!0);case 1:case 2:default:C.background_color=null,C.stroke_width=0}u+=I[2],C.font_weight=1===k.font_weight?"bold":"normal",C.font_family=k.font_family?k.font_family:"",L.push(C),L.push(J.clone(C)),C.isBillboard&&this._billboardFeatures.push({text:C.text,bounds:C.text_bounds,cidx:C.cidx}),l.push({datas:L,font_size:k.font_size,id:a+"_"+et()})}}return{roads:l,roadName:u}}},{key:"parseArrow",value:function(t,e){var n={};return n.coords=[t[1][0],-t[1][1],t[1][2],-t[1][3]],n.color_fill=e.color_fill,n.width=e.width,n}}]),t}();t.exports=st},function(t,e,n){"use strict";function i(t,e){f[t]={};for(var n=3;n<=20;n++){var i=o(e.regionStyles,null,null,u,n);i&&(f[t][n]="rgba("+l(i.color_fill).join(",")+")")}}function r(t,e){return f[t]&&f[t][Math.floor(e)]||c}Object.defineProperty(e,"__esModule",{value:!0}),e.setBgColor=i,e.getBgColor=r;var a=n(525),o=a.getVectorStyle,s=n(10),l=s.colorToRGBA,u="196613",c="rgba(0, 0, 0, 0)",f={}},function(t,e,n){"use strict";function i(t,e){if(t&&(!t||0!==t.length)){var n=t.length,i=void 0;if(1===n)e<=t[0].maxScaleVal&&e>=t[0].minScaleVal&&(i=o.objectClone(t[0]));else{var r=!0,s=!1,l=void 0;try{for(var u,c=(0,a.default)(t);!(r=(u=c.next()).done);r=!0){var f=u.value;if(e<=f.maxScaleVal&&e>=f.minScaleVal){i=o.objectClone(f);break}}}catch(t){s=!0,l=t}finally{try{!r&&c.return&&c.return()}finally{if(s)throw l}}}return i}}var r=n(25),a=function(t){return t&&t.__esModule?t:{default:t}}(r),o=n(10);e.getVectorStyle=function(t,e,n,r,a){var s=t[r];if(s){var l=i(s,a);if(l&&e&&n&&l[n]){var u=e[l[n]];if(u){var c=i(u,a);c&&"-1"===c.icon_offset&&6===c.effect&&(c.icon_offset=l.icon_offset||"-1"),l=o.extend({},l,c)}}else if(e&&n){var f=s[0]&&s[0][n],d=e[f];l=i(d,a)}return l}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){return new f.default(function(n){var i=t||0,r=v.default.QMAPI_poi_icon_json+i,a=-1,l="",c=null;g.default.support()?g.default.get(r,function(t){var f=JSON.parse(t);a=t?f.version:a,l=e.replace("{id}",i).replace("{version}",a),h.default.getJSON(null,l,function(t,e,l){if(!t&&e&&e.data){if("{}"!==(0,u.default)(e.data))return s({styleId:i,version:a,time:l}),c=e.data,void g.default.set(r,(0,u.default)(e),function(){n(c)});c=f.data}else o({styleId:i,version:a,err:t}),console.error(t,e),c=f.data;n(c)})}):(l=e.replace("{id}",i).replace("{version}",a),h.default.getJSON(null,l,function(t,e,r){return!t&&e&&e.data?"{}"===(0,u.default)(e.data)?(o({styleId:i,version:a,err:null}),console.error(e),void n(null)):(s({styleId:i,version:a,time:r}),c=e.data,void n(c)):(o({styleId:i,version:a,err:t}),console.error(t,e),void n(null))}))})}function a(t){var e=t.data,n=t.styleId,i=t.iconIndexSrc;return new f.default(function(t){e?g.default.support()?g.default.set(y,(0,u.default)({data:e}),function(){t(e)}):(console.error("兼容性错误：当前浏览器不支持LocalStorage。"),t(null)):r(n,i).then(function(e){g.default.support()?g.default.set(y,(0,u.default)({data:e}),function(){t(e)}):(console.error("兼容性错误：当前浏览器不支持LocalStorage。"),t(null))})})}function o(t){var e=t.styleId,n=t.version,i=t.err;(0,_.qos)("ii",{styleId:e,version:n,error:i&&i.status||0})}function s(t){var e=t.styleId,n=t.version,i=t.time;(0,_.qos)("ii",{styleId:e,version:n,loadTime:i})}Object.defineProperty(e,"__esModule",{value:!0}),e.setPoiIconIndex=e.loadPoiIconIndexFile=void 0;var l=n(94),u=i(l),c=n(23),f=i(c),d=n(79),h=i(d),p=n(120),v=i(p),m=n(89),g=i(m),_=n(44),y=v.default.QMAPI_poi_icon_json+"config";e.loadPoiIconIndexFile=r,e.setPoiIconIndex=a},,,,,,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(18),a=i(r),o=n(25),s=i(o),l=n(3),u=i(l),c=n(0),f=i(c),d=n(1),h=i(d),p=n(5),v=i(p),m=n(4),g=i(m),_=n(93),y=i(_),x=n(10),b=i(x),S=function(t){function e(){(0,f.default)(this,e);var t=(0,v.default)(this,(e.__proto__||(0,u.default)(e)).call(this));return t._rawGeometries=[],t._idSet={},t.geometries=[],t}return(0,g.default)(e,t),(0,h.default)(e,[{key:"_checkGeometries",value:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}},{key:"_assignIdToGeometry",value:function(t){var e=[];return t.forEach(function(t){0===t.id||t.id?e.includes(t.id)&&(t.id=t.id+"-"+b.default.uniqueId()):t.id=b.default.uniqueId(),e.push(t.id)}),t}},{key:"_updateGeometryIdSet",value:function(t){var e={};return t.forEach(function(t,n){e[t.id]=n}),e}},{key:"_transferFromGeometry",value:function(t){var e=b.default.clone(t);return e.forEach(function(t){t.rank=t.rank||0}),e.sort(function(t,e){return t.rank-e.rank}),e}},{key:"setGeometries",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._checkGeometries(t,e),this._rawGeometries=this._assignIdToGeometry(t),this._idSet=this._updateGeometryIdSet(this._rawGeometries),this.geometries=this._transferFromGeometry(this._rawGeometries),n&&this.emit("geometry_changed")}},{key:"getGeometries",value:function(){return b.default.clone(this._rawGeometries)}},{key:"getGeometryById",value:function(t){var e=!0,n=!1,i=void 0;try{for(var r,a=(0,s.default)(this._rawGeometries);!(e=(r=a.next()).done);e=!0){var o=r.value;if(o.id===t)return o}}catch(t){n=!0,i=t}finally{try{!e&&a.return&&a.return()}finally{if(n)throw i}}return null}},{key:"updateGeometries",value:function(t,e){var n=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Array.isArray(t)||(t=[t]),e||this._checkGeometries(t,this.styles),[].concat((0,a.default)(this._assignIdToGeometry(t))).forEach(function(t){n._idSet.hasOwnProperty(t.id)?n._rawGeometries[n._idSet[t.id]]=t:(n._idSet[t.id]=n._rawGeometries.length,n._rawGeometries.push(t))}),this._idSet=this._updateGeometryIdSet(this._rawGeometries),this.geometries=this._transferFromGeometry(this._rawGeometries),i&&this.emit("geometry_changed")}},{key:"add",value:function(t){var e=this;return t?(Array.isArray(t)||(t=[t]),this._checkGeometries(t,this.styles),this._assignIdToGeometry(t).forEach(function(t){e._idSet.hasOwnProperty(t.id)||(e._idSet[t.id]=e._rawGeometries.length,e._rawGeometries.push(t))}),this.updateGeometries(this._rawGeometries,!0),this):this}},{key:"remove",value:function(t){if(!t)return this;Array.isArray(t)||(t=[t]);var e=this._rawGeometries.length,n=this._rawGeometries.filter(function(e){return-1===t.indexOf(e.id)});return n.length===e?this:(this.setGeometries(n),this)}},{key:"destroy",value:function(){this._rawGeometries=[],this._idSet={},this.geometries=[]}}]),e}(y.default);e.default=S},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(0),a=i(r),o=n(1),s=i(o),l=n(36),u=i(l),c=n(29),f=n(591),d=i(f),h=n(75),p={map:0,screen:1},v={center:0,top:1,bottom:2,left:3,right:4},m={src:d.default,width:34,height:50,rotate:0,opacity:1,faceTo:"screen",color:"rgba(0, 0, 0, 1)",strokeColor:"rgba(0, 0, 0, 0)",strokeWidth:1,size:14,direction:"center",offset:new h(0,0),wrapOptions:void 0},g=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a.default)(this,t),this._checkMarkerPartStyle(e),this._checkLabelPartStyle(e)}return(0,s.default)(t,[{key:"_checkMarkerPartStyle",value:function(t){var e=t.src,n=void 0===e?m.src:e,i=t.width,r=void 0===i?m.width:i,a=t.height,o=void 0===a?m.height:a,s=t.anchor,l=t.rotate,f=void 0===l?m.rotate:l,d=t.opacity,p=void 0===d?m.opacity:d;u.default.isNumber(r)?r<=0&&(console.error("参数错误：MarkerStyle.width 取值要大于0，实际传入: "+r+"."),r=m.width):(new c.BaseTypeError("MarkerStyle.width","number",r).error(),r=m.width),u.default.isNumber(o)?o<=0&&(console.error("参数错误：MarkerStyle.height 取值要大于0，实际传入: "+o+"."),o=m.height):(new c.BaseTypeError("MarkerStyle.height","number",o).error(),o=m.height),u.default.isString(n)||(new c.BaseTypeError("MarkerStyle.src","string",n).error(),n=m.src),s?u.default.isValidOffset(s)||(console.error("参数错误：MarkerStyle.anchor不合法",s),s=new h(r/2,o)):s=new h(r/2,o),u.default.isNumber(f)?f<0&&(console.error("参数错误：MarkerStyle.rotate 取值要大于等于0，实际传入: "+f+"."),f=m.rotate):(new c.BaseTypeError("MarkerStyle.rotate","number",f).error(),f=m.rotate),u.default.isNumber(p)?p<0&&(console.error("参数错误：MarkerStyle.opacity 取值要大于等于0，实际传入: "+p+"."),p=m.opacity):(new c.BaseTypeError("MarkerStyle.opacity","number",p).error(),p=m.opacity);var v=new Image;/^data:/.test(n)||(v.crossOrigin="anonymous"),v.src=n,this.src=v.src,this.width=r,this.height=o,this.rotate=f,this.anchor=s,this.opacity=p}},{key:"_checkLabelPartStyle",value:function(t){var e=t.faceTo,n=void 0===e?m.faceTo:e,i=t.color,r=void 0===i?m.color:i,a=t.strokeColor,o=void 0===a?m.strokeColor:a,s=t.strokeWidth,l=void 0===s?m.strokeWidth:s,f=t.size,d=void 0===f?m.size:f,h=t.direction,g=void 0===h?m.direction:h,_=t.offset,y=void 0===_?m.offset:_,x=t.wrapOptions,b=void 0===x?m.wrapOptions:x;u.default.isString(n)||(new c.BaseTypeError("MarkerStyle.faceTo","string",n).error(),n=m.faceTo),u.default.isValidColor(r)||(console.error("MarkerStyle.color属性无效",r),r=m.color),u.default.isValidColor(o)||(console.error("MarkerStyle.color属性无效",o),o=m.strokeColor),u.default.isNumber(l)?l<0&&(console.error("参数错误：MarkerStyle.strokeWidth 取值要大于等于0，实际传入: "+l+"."),l=m.strokeWidth):(new c.BaseTypeError("MarkerStyle.strokeWidth","number",l).error(),l=m.strokeWidth),u.default.isNumber(d)?d<0&&(console.error("参数错误：MarkerStyle.size 取值要大于等于0，实际传入: "+d+"."),d=m.size):(new c.BaseTypeError("MarkerStyle.size","number",d).error(),d=m.size),u.default.isString(g)||(new c.BaseTypeError("MarkerStyle.direction","string",g).error(),g=m.direction),y&&!u.default.isObject(y)?(new c.BaseTypeError("MarkerStyle.offset","object",y).error(),y=m.offset):u.default.isValidOffset(y)||(console.error("参数错误：MarkerStyle.offset不合法",y),y=m.offset),u.default.isUndefined(b)||(b&&"[object Object]"===Object.prototype.toString.call(b)?u.default.isUndefined(b.maxWidth)||u.default.isNumber(b.maxWidth)&&!(b.maxWidth<=0)?u.default.isUndefined(b.maxLineCount)||u.default.isNumber(b.maxLineCount)&&!(b.maxLineCount<=0)&&Math.floor(b.maxLineCount)===b.maxLineCount?u.default.isUndefined(b.rowSpacing)||u.default.isNumber(b.rowSpacing)&&!(b.rowSpacing<0)||(new c.BaseTypeError("wrapOptions.rowSpacing","number",b.rowSpacing).error(),b.rowSpacing=0):(new c.BaseTypeError("wrapOptions.maxLineCount","number",b.maxLineCount).error(),b.maxLineCount=1/0):(new c.BaseTypeError("wrapOptions.maxWidth","number",b.maxWidth).error(),b.maxWidth=1/0):b=m.wrapOptions),this.faceTo=n in p?p[n]:p.screen,this.color=r,this.strokeColor=o,this.strokeWidth=l,this.size=d,this.direction=g in v?v[g]:v.center,this.offset=y,this.wrapOptions=b}}]),t}();t.exports=g},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if((0,L.isSimple)(t)){for(var e=[],n=0;n<t.length-1;n++){var i=[t[n],t[n+1]];e.push(i)}return e}return t.map(function(t){return r(t)}).flat()}var a=n(149),o=i(a),s=n(17),l=i(s),u=n(18),c=i(u),f=n(3),d=i(f),h=n(0),p=i(h),v=n(1),m=i(v),g=n(5),_=i(g),y=n(32),x=i(y),b=n(4),S=i(b),w=n(350),E=i(w),A=n(36),T=i(A),M=n(311),I=i(M),P=n(158),k=n(53),L=n(508),C=n(29),R=n(346),D=i(R),N=n(28),B=i(N),O=n(46),F=i(O),z=T.default.isValidColor,V=T.default.isValidLatLng,U=function(t){function e(t){(0,p.default)(this,e);var n=t.isSimplifyPath,i=void 0===n||n,r=(0,_.default)(this,(e.__proto__||(0,d.default)(e)).call(this,t));return r.isSimplifyPath=i,r}return(0,S.default)(e,t),(0,m.default)(e,[{key:"setMap",value:function(t){var n=this,i=B.default.throttle(function(e){n.simplifyGeometries(t.transform)},150);t?((0,x.default)(e.prototype.__proto__||(0,d.default)(e.prototype),"setMap",this).call(this,t),this.simplifyGeometries(t.transform),this.map.on("zoom",i),this.map.on("zoomend",i)):(this.map&&(this.map.off("zoom",i),this.map.off("zoomend",i)),(0,x.default)(e.prototype.__proto__||(0,d.default)(e.prototype),"setMap",this).call(this,t))}},{key:"simplifyGeometries",value:function(t){var n=this;if(this.isSimplifyPath){if(this.layer&&this.layer._eventedParent){var i=[].concat((0,c.default)(this._rawGeometries)),r=[].concat((0,c.default)(this.geometries)),a=t.getDistanceRatio();r.forEach(function(t){var e=t.paths;if(e)if(e.length>0&&Array.isArray(e[0])){var i=[];e.forEach(function(t){var e=n.simplifyPath(t,5,a);i.push(e)}),t.paths=i}else{var r=n.simplifyPath(e,5,a);t.paths=r}}),(0,x.default)(e.prototype.__proto__||(0,d.default)(e.prototype),"updateGeometries",this).call(this,r,!1,!1),this._rawGeometries=i,this.geometries=this._transferFromGeometry(this._rawGeometries)}return this}}},{key:"simplifyPath",value:function(t,e,n){for(var i=[t[0]],r=1;r<t.length-1;r++){var a=t[r],o=i[i.length-1],s=null;if(a instanceof F.default&&o instanceof F.default)s=(0,D.default)(a,o);else{var l=new F.default(a.lat,a.lng),u=new F.default(o.lat,o.lng);s=(0,D.default)(l,u)}s*n>=e&&i.push(a)}return i.push(t[t.length-1]),i}},{key:"_initialize",value:function(t){this.enableGeodesic=t.enableGeodesic||!1,this._eraseOpts={}}},{key:"_setGeometryType",value:function(){this._geometryType=P.GEOMETRY_TYPES.POLYLINE,this._layerType=k.RENDER_LAYER_TYPE.polyline,this._className="MultiPolyline"}},{key:"_checkGeometries",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(t,e){t?t.styleId||(t.styleId="default"):console.error("MultiPolyline.geometries: 希望传入PolylineGeometry数组，实际第"+e+"元素不存在！");var n=t.paths,i=t.rainbowPaths;n||i||console.error("MultiPolyline.geometries: 希望传入PolylineGeometry数组，实际第"+e+"元素的未传入路径信息！"),!n||(0,L.isSimple)(n)||(0,L.isComplexLine)(n)||console.error("MultiPolyline.geometries: 希望传入PolylineGeometry数组，实际第"+e+"元素的paths属性无效！"),Array.isArray(i)&&i.length>0&&(i.map(function(t,n){return t.color&&!z(t.color)&&console.error("MultiPolyline.geometries: 第"+e+"元素的rainbowPaths中的第"+n+"个元素的color属性无效！"),t.borderColor&&!z(t.borderColor)&&console.error("MultiPolyline.geometries: 第"+e+"元素的rainbowPaths中的第"+n+"个元素的borderColor属性无效！"),t.path}).every(function(t){return(0,L.isSimple)(t)})?delete t.paths:console.error("MultiPolyline.geometries: 希望传入PolylineGeometry数组，实际第"+e+"元素的rainbowPath属性无效！"))})}},{key:"_getRenderSourceData",value:function(){return{type:this._geometryType,styles:this.styles,enableGeodesic:this.enableGeodesic||!1,_eraseOpts:this._eraseOpts||null,geometries:this._getRenderableGeometries()}}},{key:"_getDefaultStyle",value:function(){return new E.default}},{key:"_checkStyles",value:function(t){var n=this;(0,x.default)(e.prototype.__proto__||(0,d.default)(e.prototype),"_checkStyles",this).call(this,t),(0,l.default)(t).forEach(function(e){var i=t[e];i&&i instanceof E.default?i.width&&i.width>0&&i.width%1==0?z(i.color)?"borderWidth"in i&&!(i.borderWidth>=0&&i.borderWidth%1==0)?console.error("MultiPolyline.styles: 样式id ",e," 对应的PolylineStyle.borderWidth属性无效",i):"borderColor"in i&&!z(i.borderColor)?console.error("MultiPolyline.styles: 样式id ",e," 对应的PolylineStyle.borderColor属性无效",i):z(i.eraseColor)||(console.error("MultiPolyline.styles: 样式id ",e," 对应的PolylineStyle.eraseColor属性无效",i),t[e].eraseColor=n._getDefaultStyle().eraseColor):console.error("MultiPolyline.styles: 样式id ",e," 对应的PolylineStyle.color属性无效",i):console.error("MultiPolyline.styles: 样式id ",e," 对应的PolylineStyle.width属性无效",i):console.error("MultiPolyline.styles: 样式id ",e,"希望传入PolylineStyle实例，实际传入：",i)})}},{key:"_getAllPoints",value:function(){return this.getGeometries().map(function(t){return t.paths.flat(1/0)}).flat()}},{key:"_getAllSegments",value:function(){return this.getGeometries().map(function(t){return r(t.paths)}).flat()}},{key:"eraseTo",value:function(t,e,n){if(this._checkEraseParams(t,e,n)){var i=this.getGeometryById(t);if(!i)return console.error("eraseTo: 不存在id为"+t+"的polyline geometry 对象"),this;if(e>i.paths.length-1||e<=0)return console.error("eraseTo: 坐标索引index："+e+" 不在对应path点串区间内"),this;this._eraseOpts[t]={index:e,point:n},this.map.getSource(this.id).setData(this._getRenderSourceData())}return this}},{key:"_checkEraseParams",value:function(t,e,n){return V(n)?"number"!=typeof e||(0,o.default)(e)?(console.error("eraseTo方法中参数index: "+e+"不合法!"),!1):"string"==typeof t||(new C.ClassTypeError("eraseTo的参数id["+t+"]","String",t).error(),!1):(new C.ClassTypeError("eraseTo方法中的参数point["+n+"]","LatLng",n).error(),!1)}}]),e}(I.default);t.exports=U},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.defaultLogoRules=[{level:[0,6],districts:[{rule:0,priority:0,frontier:"default",logo_name:"tencent",logo:"https://mapapi.qq.com/sdk/overseamap/logo/202107/tencent_color_logo.png",logo_night:"https://mapapi.qq.com/sdk/overseamap/logo/202107/tencent_color_logo_night.png"}]},{level:[7,18],districts:[{rule:0,priority:0,frontier:"taiwan",logo_name:"taiwan",logo:"https://mapapi.qq.com/sdk/overseamap/logo/HERE_Logo_black.png",logo_night:""},{rule:0,priority:0,frontier:"default",logo_name:"tencent",logo:"https://mapapi.qq.com/sdk/overseamap/logo/202107/tencent_color_logo.png",logo_night:"https://mapapi.qq.com/sdk/overseamap/logo/202107/tencent_color_logo_night.png"}]}],e.defaultFrontier={version:7,china:"124.240000,39.863000:127.060000,41.420000:128.320000,41.340000:128.338164,41.966811:129.070015,42.006633:129.392187,42.394602:129.544000,42.337000:129.757733,42.443019:129.915455,42.958121:130.581000,42.411000:130.664000,42.409000:130.660000,42.750000:131.056800,42.832500:131.362267,43.147780:131.359097,44.050378:131.184574,44.758711:131.911825,45.219501:133.163642,44.937724:135.144366,48.211013:135.144366,48.597000:131.071828,48.211013:130.773650,49.035551:128.751969,49.726565:125.969075,53.154351:123.347269,53.704738:120.827269,53.390754:119.713597,52.637780:120.321762,52.210396:118.926328,50.226355:117.662701,49.700280:116.622716,49.956516:115.284508,48.000368:116.104389,47.451176:118.485448,47.755809:119.550866,46.911548:117.463642,46.804509:113.640000,45.105329:111.969090,45.243847:111.267254,44.465714:111.589045,43.737317:109.905388,42.763982:107.448179,42.614694:105.337313,41.946215:100.992746,42.800196:96.838239,42.914056:95.070866,44.957807:91.816477,45.242319:91.161836,46.742245:90.130007,47.948495:88.699097,48.336174:87.883642,49.202090:86.809933,49.172099:85.459963,48.255788:85.328157,47.119427:82.919985,47.328453:82.134523,45.619623:82.396343,45.291415:81.735685,45.446091:79.797183,45.018009:80.618157,43.259401:80.112694,42.868284:80.120896,42.260590:77.976351,41.282314:76.788172,41.096389:76.197254,40.491205:75.361880,40.846808:73.365418,39.794560:73.634523,38.503352:74.669067,38.423003:74.896815,37.310540:74.429528,37.294106:74.454501,36.972073:75.734530,36.578999:75.962701,35.784605:77.852731,35.299899:78.205470,34.574291:78.973568,32.910437:78.263619,32.582183:78.649985,30.992536:81.199112,29.930890:81.625396,30.231654:85.988179,27.769037:88.674612,27.787987:88.840910,27.047339:89.241858,27.247275:89.644552,28.077447:90.426358,28.002589:91.425425,27.605415:92.127284,26.721880:93.834582,26.907073:95.855604,28.198876:97.000074,27.593593:97.491836,27.849236:97.700896,28.296779:98.301769,27.394792:98.605433,27.417494:98.502702,26.026786:97.440895,25.088802:97.485448,23.745403:98.497224,24.030523:98.809985,23.174956:99.324515,22.945024:99.099993,22.084196:100.205485,21.391178:101.003735,21.463004:101.278198,21.122876:101.931836,21.129823:101.785481,22.197373:102.650063,22.558783:103.074619,22.382137:103.979093,22.474798:104.809933,22.767793:105.399978,23.049961:106.469971,22.704082:106.610899,21.787060:107.897261,21.372454:107.490036,19.305984:109.748489,14.674666:110.039063,11.480025:107.666016,6.271618:111.752930,3.281824:112.939454,3.413421:115.018257,6.054474:118.674316,10.790140:119.164223,12.212996:119.707031,18.020528:121.959229,21.677848:122.699226,23.809795:127.303391,24.447079:127.390663,31.568056:124.335754,32.823666",inland:"124.240000,39.863000:127.060000,41.420000:128.320000,41.340000:128.338164,41.966811:129.070015,42.006633:129.392187,42.394602:129.544000,42.337000:129.757733,42.443019:129.915455,42.958121:130.581000,42.411000:130.664000,42.409000:130.660000,42.750000:131.056800,42.832500:131.362267,43.147780:131.359097,44.050378:131.184574,44.758711:131.911825,45.219501:133.163642,44.937724:135.144366,48.211013:135.144366,48.597000:131.071828,48.211013:130.773650,49.035551:128.751969,49.726565:125.969075,53.154351:123.347269,53.704738:120.827269,53.390754:119.713597,52.637780:120.321762,52.210396:118.926328,50.226355:117.662701,49.700280:116.622716,49.956516:115.284508,48.000368:116.104389,47.451176:118.485448,47.755809:119.550866,46.911548:117.463642,46.804509:113.640000,45.105329:111.969090,45.243847:111.267254,44.465714:111.589045,43.737317:109.905388,42.763982:107.448179,42.614694:105.337313,41.946215:100.992746,42.800196:96.838239,42.914056:95.070866,44.957807:91.816477,45.242319:91.161836,46.742245:90.130007,47.948495:88.699097,48.336174:87.883642,49.202090:86.809933,49.172099:85.459963,48.255788:85.328157,47.119427:82.919985,47.328453:82.134523,45.619623:82.396343,45.291415:81.735685,45.446091:79.797183,45.018009:80.618157,43.259401:80.112694,42.868284:80.120896,42.260590:77.976351,41.282314:76.788172,41.096389:76.197254,40.491205:75.361880,40.846808:73.365418,39.794560:73.634523,38.503352:74.669067,38.423003:74.896815,37.310540:74.429528,37.294106:74.454501,36.972073:75.734530,36.578999:75.962701,35.784605:77.852731,35.299899:78.205470,34.574291:78.973568,32.910437:78.263619,32.582183:78.649985,30.992536:81.199112,29.930890:81.625396,30.231654:85.988179,27.769037:88.674612,27.787987:88.840910,27.047339:89.241858,27.247275:89.644552,28.077447:90.426358,28.002589:91.425425,27.605415:92.127284,26.721880:93.834582,26.907073:95.855604,28.198876:97.000074,27.593593:97.491836,27.849236:97.700896,28.296779:98.301769,27.394792:98.605433,27.417494:98.502702,26.026786:97.440895,25.088802:97.485448,23.745403:98.497224,24.030523:98.809985,23.174956:99.324515,22.945024:99.099993,22.084196:100.205485,21.391178:101.003735,21.463004:101.278198,21.122876:101.931836,21.129823:101.785481,22.197373:102.650063,22.558783:103.074619,22.382137:103.979093,22.474798:104.809933,22.767793:105.399978,23.049961:106.469971,22.704082:106.610899,21.787060:107.897261,21.372454:107.490036,19.305984:109.748489,14.674666:110.039063,11.480025:107.666016,6.271618:111.752930,3.281824:112.939454,3.413421:115.018257,6.054474:118.674316,10.790140:119.164223,12.212996:119.707031,18.020528:121.397269,20.720622:118.487770,21.778166:119.578789,24.089008:120.465831,25.121382:121.207406,25.815692:121.869972,25.849447:122.599226,25.209509:122.699226,23.809795:127.303391,24.447079:127.390663,31.568056:124.335754,32.823666",japan:"130.058874,35.187485:133.208436,36.728760:135.302372,36.335340:136.056445,37.097326:137.028118,38.068999:138.937959,39.610275:139.004971,42.659319:140.278198,45.741869:141.661984,45.763377:144.566964,44.736690:148.890681,46.139089:149.266393,45.455293:147.984574,43.664498:142.757641,41.453104:142.925171,39.610275:141.098416,34.356762:142.992183,27.280073:141.450908,24.432065:131.432619,25.504256:127.303391,24.447079:127.390663,31.568056:127.210208,33.397935:127.728060,33.848258:128.693979,34.488846:129.402013,35.158401",taiwan:"121.397269,20.720622:118.487770,21.778166:119.578789,24.089008:120.465831,25.121382:121.207406,25.815692:121.869972,25.849447:122.599226,25.209509:122.699226,23.809795:121.959229,21.677848"}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(){return new l.default(function(t){var e=c.default.QMAPI_oversea;d.default.support()?d.default.get(e,function(e){e||t(null);try{_=JSON.parse(e),t(_)}catch(e){t(null)}}):t(null)})}function a(t){var e=c.default.QMAPI_oversea;d.default.support()&&d.default.set(e,t)}function o(t){var e=t&&t.info&&t.info.frontier&&t.info.frontier.path;return e?new l.default(function(t){m(e,function(e,n){e&&t(_||v.defaultFrontier);try{var i=g.inflate(n.data,{to:"string"});a(i);var r=JSON.parse(i);t(r)}catch(e){t(_||v.defaultFrontier)}})}):new l.default(function(t){r().then(function(e){t(e||v.defaultFrontier)})})}Object.defineProperty(e,"__esModule",{value:!0});var s=n(23),l=i(s);e.getStorageFrontier=r,e.getOnlineFrontier=o;var u=n(120),c=i(u),f=n(89),d=i(f),h=n(79),p=i(h),v=n(535),m=p.default.getArrayBuffer,g=n(585),_=null},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.ScheduleTaskQueue=e.ScheduleTaskNode=void 0;var r=n(0),a=i(r),o=n(1),s=i(o),l=n(28),u=i(l);e.ScheduleTaskNode=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a.default)(this,t),this.prev=null,this.next=null,this.callback=null,this._expirationTime=e.expirationTime||u.default.now()+150}return(0,s.default)(t,[{key:"isTimeout",value:function(){return u.default.now()>=this._expirationTime}},{key:"setCallback",value:function(t){this.callback=t}},{key:"runTask",value:function(){var t=null;try{this.callback&&(t=this.callback())}catch(t){console.error(t)}"function"==typeof t?this.setCallback(t):this.remove()}},{key:"remove",value:function(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.queue&&this.queue.first===this&&(this.queue.first=this.next),this.queue&&this.queue.last===this&&(this.queue.last=this.prev),this.prev=null,this.next=null,this.callback=null,this.queue=null}},{key:"addToQueue",value:function(t){this.queue=t,this.queue.last?(this.queue.last.next=this,this.prev=this.queue.last,this.queue.last=this):this.queue.last=this,this.queue.first||(this.queue.first=this)}}]),t}(),e.ScheduleTaskQueue=function t(){(0,a.default)(this,t),this.first=null,this.last=null}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(310),v=i(p),m=n(539),g=i(m),_=n(10),y=n(146),x=n(551),b=n(36),S=i(b),w=n(29),E=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this)),i=t.map,r=t.id,o=void 0===r?(0,_.uniqueId)():r,l=t.zIndex,u=void 0===l?0:l;return n.id=o,n.level=y.LAYER_LEVEL.OVERLAY_AA,n.zIndex=0,n.rank=(0,y.getRank)(n.level,n.zIndex),n.setZIndex(u),n.onInit(t),i&&i instanceof v.default&&n.addTo(i),n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"onInit",value:function(){}},{key:"addTo",value:function(t){if(t!==this.map)return this.remove(),t.addVisualPlugin(this),this.map=t,this.gl=t.renderEngine.gl,this.onAddToMap({canvas:t.canvasContainer,camera:t.renderEngine.camera}),this}},{key:"remove",value:function(){return this.map&&(this.map.removeVisualPlugin(this.id),this.onRemoveFromMap(),this.map=null,this.gl=null),this}},{key:"redraw",value:function(){return this.map&&this.map._render(),this}},{key:"draw",value:function(){var t=this,e=this.gl;e&&(0,x.preserveParameters)(e,{DEPTH_TEST:!1,STENCIL_TEST:!1,BLEND:!0,CULL_FACE:!1,CULL_FACE_MODE:e.BACK,BLEND_SRC_RGB:e.ONE,BLEND_DST_RGB:e.ONE_MINUS_SRC_ALPHA,BLEND_SRC_ALPHA:e.ONE,BLEND_DST_ALPHA:e.ONE_MINUS_SRC_ALPHA,VIEWPORT:[0,0,e.canvas.width,e.canvas.height],UNPACK_FLIP_Y_WEBGL:!1,UNPACK_PREMULTIPLY_ALPHA_WEBGL:!1},function(){t.onDraw()})}},{key:"setZIndex",value:function(t){return S.default.isNumber(t)?t<0?(console.error("zIndex希望设置为非负数,实际值为: "+t),this):(this.zIndex=t,this.rank=(0,y.getRank)(this.level,this.zIndex),this):(new w.BaseTypeError("zIndex","Number",t).error(),this)}},{key:"getZIndex",value:function(){return this.zIndex}},{key:"setLevel",value:function(t){this.level=t,this.rank=(0,y.getRank)(t,this.zIndex)}},{key:"getId",value:function(){return this.id}},{key:"onAddToMap",value:function(){}},{key:"onRemoveFromMap",value:function(){}},{key:"onDraw",value:function(){}}]),e}(g.default);e.default=E},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(3),a=i(r),o=n(0),s=i(o),l=n(5),u=i(l),c=n(4),f=i(c),d=n(93),h=function(t){function e(){return(0,s.default)(this,e),(0,u.default)(this,(e.__proto__||(0,a.default)(e)).call(this))}return(0,f.default)(e,t),e}(d);t.exports=h},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(146),v=n(36),m=i(v),g=n(29),_=n(539),y=n(10),x=y.uniqueId,b=3,S=20,w=function(t){function e(t){(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this)),i=t.id,r=void 0===i?x():i,o=t.zIndex,l=void 0===o?0:o,u=t.minZoom,c=void 0===u?b:u,d=t.maxZoom,h=void 0===d?S:d;return n.id=r,n.level=p.LAYER_LEVEL.OVERLAY_AA,n.zIndex=0,n.rank=(0,p.getRank)(n.level,n.zIndex),n.setZIndex(l),n.setMinZoom(c),n.setMaxZoom(h),n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"getId",value:function(){return this.id}},{key:"addTo",value:function(t){return t.addVisualPlugin(this),this.map=t,this.gl=t.renderEngine.gl,this.transform=t.transform,this}},{key:"remove",value:function(){return this.map&&this.map.removeVisualPlugin(this.id),this.map=null,this.gl=null,this.transform=null,this}},{key:"redraw",value:function(){return this.map&&this.map._render(),this}},{key:"draw",value:function(){}},{key:"setZIndex",value:function(t){return m.default.isNumber(t)?t<0?(console.error("zIndex希望设置为非负数,实际值为: "+t),this):(this.zIndex=t,this.rank=(0,p.getRank)(this.level,this.zIndex),this):(new g.BaseTypeError("zIndex","Number",t).error(),this)}},{key:"getZIndex",value:function(){return this.zIndex}},{key:"setMinZoom",value:function(t){return m.default.isNumber(t)?t<0?(console.error("minZoom希望设置为非负数,实际值为: "+t),this):(this.minZoom=t,this):(new g.BaseTypeError("minZoom","Number",t).error(),this)}},{key:"getMinZoom",value:function(){return this.minZoom}},{key:"setMaxZoom",value:function(t){return m.default.isNumber(t)?t<0?(console.error("maxZoom希望设置为非负数,实际值为: "+t),this):(this.maxZoom=t,this):(new g.BaseTypeError("maxZoom","Number",t).error(),this)}},{key:"getMaxZoom",value:function(){return this.maxZoom}},{key:"setLevel",value:function(t){this.level=t,this.rank=(0,p.getRank)(t,this.zIndex)}}]),e}(_);t.exports=w},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){switch(t.type){case v.LIGHT_TYPE.POINT:return new S(t);case v.LIGHT_TYPE.DIRECTION:return new b(t);case v.LIGHT_TYPE.AMBIENT:default:return new x(t)}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),o=i(a),s=n(5),l=i(s),u=n(4),c=i(u),f=n(0),d=i(f),h=n(1),p=i(h);e.default=r;var v=n(352),m=n(10),g=n(109),_=n(233),y=i(_),x=function(){function t(e){var n=e.id,i=e.color,r=void 0===i?"#FFFFFF":i,a=e.intensity,o=void 0===a?1:a,s=e.type;(0,d.default)(this,t),this.id=n||(0,m.uniqueId)(),this.color=r,this.intensity=o,this.type=s}return(0,p.default)(t,[{key:"color",get:function(){var t=this;return this._color.map(function(e){return e*t.intensity})},set:function(t){this._color=new y.default(t,{max:1}).toArray().slice(0,3)}}]),t}(),b=function(t){function e(t){(0,d.default)(this,e);var n=(0,l.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t));return n.direction=t.direction,n}return(0,c.default)(e,t),(0,p.default)(e,[{key:"direction",get:function(){return this._direction.elements},set:function(t){this._direction=new g.Vector3(t||[0,0,-1]).normalize().scale(-1,-1,-1)}}]),e}(x),S=function(t){function e(t){(0,d.default)(this,e);var n=(0,l.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t));return n.position=t.position,n.height=t.height,n.attenuation=t.attenuation||[1,.045,.0075],n}return(0,c.default)(e,t),e}(x)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,e=new Float32Array(8*t*t),n=new Uint8Array(6*t*t),i=0,r=0;r<t;r++)for(var a=0;a<t;a++){var o=[a/t,r/t],s=1/t,l=8*i;e[l]=o[0],e[l+1]=o[1],e[l+2]=o[0],e[l+3]=o[1]+s,e[l+4]=o[0]+s,e[l+5]=o[1],e[l+6]=o[0]+s,e[l+7]=o[1]+s;var u=6*i,c=4*i;n[u+0]=c+0,n[u+1]=c+2,n[u+2]=c+1,n[u+3]=c+1,n[u+4]=c+2,n[u+5]=c+3,i+=1}return{vertices:e,indices:n}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(18),o=i(a),s=n(3),l=i(s),u=n(0),c=i(u),f=n(1),d=i(f),h=n(5),p=i(h),v=n(32),m=i(v),g=n(4),_=i(g),y=n(313),x=i(y),b=n(631),S=n(148),w=function(t){function e(t){(0,c.default)(this,e);var n=(0,p.default)(this,(e.__proto__||(0,l.default)(e)).call(this,t));return n.defaultShaderConfig={source:b.defaultShader,params:{attributes:["a_position"],uniforms:["u_matrix","u_size","u_texInfo","u_opacity","u_sampler"]},geometry:{vertices:new Float32Array([0,0,0,1,1,0,1,1]),indices:new Uint8Array([0,2,1,1,2,3])}},n.sphereShaderConfig={source:b.sphereShader,params:{attributes:["a_position"],uniforms:["u_matrix","u_size","u_texInfo","u_opacity","u_sampler","u_mercator","uZoom","uCenter","uMatrix","u_ratio","u_wireframe"]},geometry:r(4)},n.shaderSource=n.defaultShaderConfig.source,n.shaderParams=n.defaultShaderConfig.params,n}return(0,_.default)(e,t),(0,d.default)(e,[{key:"preDraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.isSphere,i=n?this.sphereShaderConfig:this.defaultShaderConfig,r=i.source,a=i.params,o=i.geometry;if(this.shaderSource=r,this.shaderParams=a,(0,m.default)(e.prototype.__proto__||(0,l.default)(e.prototype),"preDraw",this).call(this),!i.buffers){var s=o.vertices,u=o.indices;i.buffers=this.createBuffer(null,s,u)}this.buffers=i.buffers,this.bindBuffer()}},{key:"bindBuffer",value:function(){var t=this.gl;this.buffers.vertices.bind(),this.buffers.vertices.pointToAttrib({location:this.a_position,size:2,type:t.FLOAT}),this.buffers.indices.bind()}},{key:"draw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.isSphere?this.drawOnSphere(t):this.drawOnPlane(t)}},{key:"drawOnPlane",value:function(t){var e=t.matrix,n=t.size,i=t.texInfo,r=t.opacity,a=this.gl;a.uniformMatrix4fv(this.u_matrix,!1,e.elements),a.uniform1i(this.u_sampler,0),a.uniform2f(this.u_size,n.width,n.height),a.uniform4f(this.u_texInfo,i.s,i.t,i.w,i.h),a.uniform1f(this.u_opacity,r),a.drawElements(a.TRIANGLES,this.buffers.length,a.UNSIGNED_BYTE,0)}},{key:"drawOnSphere",value:function(t){var e=t.mercator,n=t.zoom,i=t.center,r=t.pvMatrix,a=t.matrix,s=t.size,l=t.texInfo,u=t.opacity,c=t.viewTransition,f=void 0===c?1:c,d=this.gl,h=(0,S.splitLatLngNumber)(i.lat),p=(0,S.splitLatLngNumber)(i.lng);d.uniformMatrix4fv(this.u_matrix,!1,a.elements),d.uniform1i(this.u_sampler,0),d.uniform2f(this.u_size,s.width,s.height),d.uniform4f(this.u_texInfo,l.s,l.t,l.w,l.h),d.uniform1f(this.u_opacity,u),d.uniform3f.apply(d,[this.u_mercator].concat((0,o.default)(e))),d.uniform1f(this.u_ratio,f),d.uniform1f(this.uZoom,n),d.uniform4f(this.uCenter,p.high,h.high,p.low,h.low),d.uniformMatrix4fv(this.uMatrix,!1,r.elements),d.uniform1f(this.u_wireframe,0),d.drawElements(d.TRIANGLES,this.buffers.length,d.UNSIGNED_BYTE,0)}},{key:"destroy",value:function(){this.buffers&&(this.buffers.vertices.delete(),this.buffers.indices.delete()),this.vertices=null,this.indices=null,(0,m.default)(e.prototype.__proto__||(0,l.default)(e.prototype),"destroy",this).call(this)}}]),e}(x.default);e.default=w},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(15),a=i(r),o=n(125),s=i(o),l=n(3),u=i(l),c=n(0),f=i(c),d=n(1),h=i(d),p=n(5),v=i(p),m=n(32),g=i(m),_=n(4),y=i(_),x=n(216),b=i(x),S=n(113),w=n(148),E=n(217),A=i(E),T=n(226),M=n(10),I=i(M),P=n(46),k=i(P),L=function(t){function e(t){(0,f.default)(this,e);var n=(0,v.default)(this,(e.__proto__||(0,u.default)(e)).call(this,t)),i=t.attribList||[],r=t.uniformList||[];return n.shaderParams={attributes:i.concat(["positions","instancePositions","instancePositions64xyLow","instanceSizes","instanceInfos","instancePickingColors","instanceFrames","instancePixelOffset"]),uniforms:r.concat(["uMatrix","uCenter","uZoom","uPixelsPerMeter","uResolution","uProject_uCommonUnitsPerWorldUnit","uProject_uCommonUnitsPerWorldUnit2","picking_usePickingColor","picking_zindex","u_sizeScale","u_sizeMinPixels","u_sizeMaxPixels","u_textureDim","u_opacity","u_sampler","u_mapScale"])},n.modelPositions=new Int16Array([-1,-1,0,-1,1,0,1,1,0,1,-1,0]),n.store=new S.Store("buffer",128,16,T.deleteInstanceCacllback),n.symbolManager=null,n}return(0,y.default)(e,t),(0,h.default)(e,[{key:"_calcLocalPosition",value:function(t,e){for(var n=t.count,i=t.instancePositionList,r=new Float32Array(3*n),a=new Float32Array(2*n),o=0;o<n;o++){var l=e.latLngToWorldCoord(new k.default(i[3*o+1],i[3*o])),u=(0,w.splitLatLngNumber)(l.elements[0]),c=(0,w.splitLatLngNumber)(l.elements[1]);r[3*o]=u.high,r[3*o+1]=c.high,r[3*o+2]=i[3*o+2],a[2*o]=u.low,a[2*o+1]=c.low}var f=(0,s.default)({},t);return f.instancePositionList=r,f.instancePosition64xyLowList=a,f}},{key:"draw",value:function(t,e,n,i){var r=this.gl;if(e&&this.symbolManager.canvas){var a=t.center,o=t.zoom,s=t.getDistanceRatio(),l=i.distanceScales,u=(0,w.splitLatLngNumber)(a.lat),c=(0,w.splitLatLngNumber)(a.lng);r.useProgram(r.program),r.uniformMatrix4fv(this.uMatrix,!1,e.elements),r.uniform4f(this.uCenter,c.high,u.high,c.low,u.low),r.uniform1f(this.uZoom,o),r.uniform3f(this.uPixelsPerMeter,s,s,s),r.uniform3f(this.uProject_uCommonUnitsPerWorldUnit,l.pixelsPerDegree[0],l.pixelsPerDegree[1],l.pixelsPerDegree[2]),r.uniform3f(this.uProject_uCommonUnitsPerWorldUnit2,l.pixelsPerDegree2[0],l.pixelsPerDegree2[1],l.pixelsPerDegree2[2]),r.uniform2f(this.uResolution,t.width,t.height),r.uniform1f(this.picking_usePickingColor,i.usePicking?1:0),r.uniform1f(this.picking_zindex,i.picking_zindex||0),r.uniform1f(this.u_sizeScale,1),r.uniform1f(this.u_sizeMinPixels,0),r.uniform1f(this.u_sizeMaxPixels,1e3),r.uniform2f(this.u_textureDim,this.symbolManager.canvas.width,this.symbolManager.canvas.height),r.uniform1f(this.u_opacity,1),r.uniform1f(this.u_mapScale,t.scale),this._onDraw();var f=this._calcLocalPosition(n,t);this.drawTileInstance(f.uid,f)}}},{key:"drawTileInstance",value:function(t,e){var n=this.gl,i=this.store,r=!1;if(i){if(i.exist(t)){var a=i.get(t).instanceBuffers;this.isBufferChanged(a,e)&&(r=!0)}else i.set(t,this.createBuffer(t,e));var o=i.get(t);o.positions.bind(),o.positions.pointToAttrib({location:this.positions,size:3,type:n.SHORT}),I.default.forIn(o.instanceBuffers,function(t,i){var a=i.buffer,o=i.location,s=i.size,l=i.type;a.bind(),r&&(a.bufferData(e[t],{usage:n.DYNAMIC_DRAW}),i.data=e[t]),a.pointToAttrib({location:o,size:s,type:l}),n.vertexAttribDivisor(o,1)}),n.drawArraysInstanced(n.TRIANGLE_FAN,0,4,e.count),n.bindBuffer(n.ARRAY_BUFFER,null),n.vertexAttribDivisor(this.instancePositions,0),n.vertexAttribDivisor(this.instancePositions64xyLow,0),n.vertexAttribDivisor(this.instanceSizes,0),n.vertexAttribDivisor(this.instanceInfos,0),n.vertexAttribDivisor(this.instancePickingColors,0),n.vertexAttribDivisor(this.instanceFrames,0),n.vertexAttribDivisor(this.instancePixelOffset,0),this._onDrawInstanceTile()}}},{key:"getInstanceConfig",value:function(){var t=this.gl;return{instancePositionList:{location:this.instancePositions,size:3,type:t.FLOAT},instancePosition64xyLowList:{location:this.instancePositions64xyLow,size:2,type:t.FLOAT},instanceSizeList:{location:this.instanceSizes,size:2,type:t.UNSIGNED_SHORT},instanceInfoList:{location:this.instanceInfos,size:4,type:t.FLOAT},instancePickingColorList:{location:this.instancePickingColors,size:3,type:t.UNSIGNED_BYTE},instanceFrameList:{location:this.instanceFrames,size:4,type:t.FLOAT},instancePixelOffsetList:{location:this.instancePixelOffset,size:3,type:t.FLOAT}}}},{key:"createBuffer",value:function(t,e){var n=this.gl,i={positions:null,indices:null,instanceBuffers:{}};if(this.modelPositions&&(i.positions=new A.default(n,{data:this.modelPositions})),e){var r=this.getInstanceConfig();I.default.forIn(r,function(t,r){i.instanceBuffers[t]=(0,a.default)({data:e[t],buffer:new A.default(n,{data:e[t],usage:n.DYNAMIC_DRAW})},r)})}return i}},{key:"afterDraw",value:function(){this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,null)}},{key:"loadTexture",value:function(){this.symbolManager.canvas&&this.symbolManager.uploadToGPU({textureIndex:0,minFilter:this.gl.LINEAR,magFilter:this.gl.LINEAR,wrapS:this.gl.CLAMP_TO_EDGE,wrapT:this.gl.CLAMP_TO_EDGE,premultiply:!0,useMipmap:!1,flipY:!0})}},{key:"_onDraw",value:function(){}},{key:"_onDrawInstanceTile",value:function(){}},{key:"destroy",value:function(){this.modelPositions=null,this.symbolManager=null,(0,g.default)(e.prototype.__proto__||(0,u.default)(e.prototype),"destroy",this).call(this)}}]),e}(b.default);e.default=L},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return{x:t&&t.width||1,y:t&&t.height||1}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(15),o=i(a),s=n(17),l=i(s),u=n(3),c=i(u),f=n(0),d=i(f),h=n(1),p=i(h),v=n(5),m=i(v),g=n(32),_=i(g),y=n(4),x=i(y),b=n(313),S=i(b),w=n(640),E=i(w),A=n(641),T=i(A),M=n(218),I=i(M),P=n(113),k=n(217),L=i(k),C=n(10),R=i(C),D=n(28),N=i(D),B=1/16/N.default.devicePixelRatio,O=function(t){function e(t){(0,d.default)(this,e);var n=(0,m.default)(this,(e.__proto__||(0,c.default)(e)).call(this,t));return n.textCache=t.textCache,n.glyphManager=t.glyphManager,n.markerManager=t.markerManager,n.shaderSource=n.textCache?T.default:E.default,n._store=new P.Store("buffer",100,16,function(t){t.positions&&t.positions.delete(),t.indices&&t.indices.delete(),t.instanceBuffers&&(0,l.default)(t.instanceBuffers).forEach(function(e){var n=t.instanceBuffers[e];n.data=null,n.buffer.delete()})}),n.shaderParams={attributes:["a_Positions","a_InstanceTrans","a_InstanceCoords","a_InstanceTextBounds","a_InstanceStrentchinglens","a_InstanceInfo","a_InstanceColors","a_InstanceStrokeColors","a_InstancePickingColors","a_InstanceStrokeWidth"],uniforms:["u_matrix","u_resolution","u_fadeChange","u_showPoint","u_showLabel","u_mapScale","u_InstanceTileTextureOffset","u_iconTextureResolution","u_billboardTextureResolution","u_textTextureResolution","u_glyphTextureResolution","u_SamplerGlyph","u_SamplerText","u_SamplerIcon","u_SamplerMask","u_asbackground","u_gamma","u_buffer","u_maskScale","u_sdfRadius","picking_useFeaturePickingColor"]},n.positions=new Int16Array([-1,1,1,1,-1,-1,1,-1]),n.indices=new Uint8Array([0,2,1,1,2,3]),n}return(0,x.default)(e,t),(0,p.default)(e,[{key:"setCommonUniforms",value:function(t,e){var n=this.gl;n.uniform2f(this.u_resolution,t.width,t.height),n.uniform2f(this.u_billboardTextureResolution,r(this.markerManager.canvas).x,r(this.markerManager.canvas).y),n.uniform2f(this.u_textTextureResolution,r(this.textCache).x,r(this.textCache).y),n.uniform2f(this.u_glyphTextureResolution,r(this.glyphManager.canvas).x,r(this.glyphManager.canvas).y),n.uniform2f(this.u_iconTextureResolution,r(e.iconsLoader.img).x,r(e.iconsLoader.img).y),n.uniform1f(this.u_asbackground,e.asBackground?1:0),n.uniform1f(this.u_fadeChange,e.fadeChange||0),n.uniform1f(this.u_maskScale,e.maskScale||1),n.uniform1f(this.u_showPoint,!1===e.showPoint?0:1),n.uniform1f(this.u_showLabel,!1===e.showLabel?0:1),n.uniform1f(this.u_mapScale,t.scale),n.uniform1f(this.picking_useFeaturePickingColor,e.usePicking?1:0),n.uniform1i(this.u_SamplerText,0),n.uniform1i(this.u_SamplerGlyph,2),n.uniform1f(this.u_gamma,B),n.uniform1f(this.u_buffer,.71),n.uniform1f(this.u_sdfRadius,this.glyphManager.setting.radius)}},{key:"draw",value:function(t,e,n,i){var r=this,a=this.gl;n&&((0,l.default)(n.textDataSet).length>0||(0,l.default)(n.poiDataSet).length>0)&&(a.useProgram(a.program),this.setCommonUniforms(t,i),a.uniform1i(this.u_SamplerIcon,1),a.uniform1i(this.u_SamplerMask,3),R.default.forIn(e,function(e,o){var s=e+"_"+Math.round(t.zoom);if(n.instanceSet[s]&&!n.instanceSet[s].isIndoor&&(!r.textCache||r.textCache.tiles[e])){var l=r.textCache&&r.textCache.tiles[e]||{},u=n.instanceSet[s];a.uniformMatrix4fv(r.u_matrix,!1,o.elements),a.uniform2f(r.u_InstanceTileTextureOffset,l.x||0,l.y||0),r.drawTileInstance(s,u,i.updateSubData)}}))}},{key:"drawTileInstance",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!(e.count<1)){var r=this.gl,a=this._store;a.exist(t)||a.set(t,this.createBuffer(t,e,i));var o=a.get(t);o.positions.bind(),o.positions.pointToAttrib({location:this.a_Positions,size:2,type:r.SHORT}),o.indices.bind(),R.default.forIn(o.instanceBuffers,function(t,i){var a=i.buffer,o=i.location,s=i.size,l=i.type;a.bind(),n&&i.updatable&&(a.bufferData(e[t],{usage:r.DYNAMIC_DRAW}),i.data=e[t]),a.pointToAttrib({location:o,size:s,type:l}),r.vertexAttribDivisor(o,1)}),r.drawElementsInstanced(r.TRIANGLES,this.indices.length,r.UNSIGNED_BYTE,0,e.count),r.bindBuffer(r.ARRAY_BUFFER,null),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,null),r.vertexAttribDivisor(this.a_InstanceTrans,0),r.vertexAttribDivisor(this.a_InstanceCoords,0),r.vertexAttribDivisor(this.a_InstanceTextBounds,0),r.vertexAttribDivisor(this.a_InstanceInfo,0),this.textCache||(!i&&r.vertexAttribDivisor(this.a_InstanceStrentchinglens,0),r.vertexAttribDivisor(this.a_InstanceColors,0),r.vertexAttribDivisor(this.a_InstanceStrokeColors,0),!i&&r.vertexAttribDivisor(this.a_InstancePickingColors,0),!i&&r.vertexAttribDivisor(this.a_InstanceStrokeWidth,0))}}},{key:"createBuffer",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.gl,r={positions:null,indices:null,instanceBuffers:{}};if(this.positions&&(r.positions=new L.default(i,{data:this.positions})),this.indices&&(r.indices=new L.default(i,{target:i.ELEMENT_ARRAY_BUFFER,data:this.indices})),e){var a={instanceTransTypeArray:{location:this.a_InstanceTrans,size:3,type:i.FLOAT,updatable:!0},instanceCoordsTypeArray:{location:this.a_InstanceCoords,size:4,type:i.FLOAT},instanceTextBoundsTypeArray:{location:this.a_InstanceTextBounds,size:4,type:i.FLOAT,updatable:!0},instanceInfosTypeArray:{location:this.a_InstanceInfo,size:4,type:i.FLOAT,updatable:!0}};this.textCache||(!n&&(a.instanceStrentchinglensTypeArray={location:this.a_InstanceStrentchinglens,size:2,type:i.FLOAT,updatable:!0}),a.instanceColorsTypeArray={location:this.a_InstanceColors,size:4,type:i.UNSIGNED_BYTE},a.instanceStrokeColorsTypeArray={location:this.a_InstanceStrokeColors,size:4,type:i.UNSIGNED_BYTE},!n&&(a.instancePickingColorsTypeArray={location:this.a_InstancePickingColors,size:4,type:i.UNSIGNED_BYTE}),!n&&(a.instanceStrokeWidthTypeArray={location:this.a_InstanceStrokeWidth,size:1,type:i.FLOAT})),R.default.forIn(a,function(t,n){r.instanceBuffers[t]=(0,o.default)({data:e[t],buffer:new L.default(i,{data:e[t],usage:i.DYNAMIC_DRAW})},n)})}return r}},{key:"afterDraw",value:function(){(0,_.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"afterDraw",this).call(this),this.gl.activeTexture(this.gl.TEXTURE2),this.gl.bindTexture(this.gl.TEXTURE_2D,null)}},{key:"loadTexture",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.textCache?this.textCache.loadTexture():this.loadManagerTexture(this.markerManager,0),this.loadIconTexture(t),this.loadManagerTexture(this.glyphManager,2),t.maskTexture&&t.maskTexture.bind(this.gl,{textureIndex:3})}},{key:"loadIconTexture",value:function(t){var e=t.iconsLoader;if(e&&e.img){var n=this.gl;if(this.texture)this.texture.bind(null,{textureIndex:1});else{n.useProgram(n.program);var i=new I.default(n,{pixels:e.img});i.upload({flipY:!0,textureIndex:1});var r=n.getUniformLocation(n.program,"u_SamplerIcon");n.uniform1i(r,1),this.texture=i}}}},{key:"loadManagerTexture",value:function(t,e){t&&t.canvas&&t.uploadToGPU({textureIndex:e,minFilter:this.gl.LINEAR,magFilter:this.gl.LINEAR,wrapS:this.gl.CLAMP_TO_EDGE,wrapT:this.gl.CLAMP_TO_EDGE,premultiply:!0,useMipmap:!1,flipY:!0})}},{key:"clear",value:function(){this._store.clear(),this.texture&&(this.texture.destroy(),this.texture=null)}},{key:"destroy",value:function(){this.textCache=null,this.glyphManager=null,this.markerManager=null,this.positions=null,this.indices=null,this._store.clear(),this._store=null,this.texture&&(this.texture.destroy(),this.texture=null),(0,_.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"destroy",this).call(this)}}]),e}(S.default);e.default=O},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(15),a=i(r),o=n(3),s=i(o),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),p=n(4),v=i(p),m=n(289),g=i(m),_=n(218),y=i(_),x=n(547),b=i(x),S=n(36),w=i(S),E=function(t){function e(t,n){return(0,u.default)(this,e),(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t,n))}return(0,v.default)(e,t),(0,f.default)(e,[{key:"_onCreate",value:function(){return this.gl.createFramebuffer()}},{key:"_onDelete",value:function(t){t||(this._colorAttach.forEach(function(t){return t.delete()}),this._depthAttach.delete()),this._colorAttach=null,this._depthAttach=null,this.unbind(!0),this.gl.deleteFramebuffer(this._object)}},{key:"_initialize",value:function(t){var e=this,n=t.width,i=void 0===n?1:n,r=t.height,a=void 0===r?1:r,o=t.attachments,s=void 0===o?{}:o,l=t.drawBuffers;this.width=i,this.height=a,this._colorAttach=[],this._depthAttach=null;var u=void 0,c=void 0;s&&(u=s.color,c=s.depth),w.default.isArray(u)?u.forEach(function(t,n){e.attach("color",t,{colorIndex:n})}):this.attach("color",u),this.attach("depth",c),l&&this.setDrawBuffers(l)}},{key:"_createDefaultAttachment",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.gl,i=null;switch(t){case"color":i=new y.default(n,(0,a.default)({pixels:null},e));break;case"depth":i=new b.default(n,e)}return i}},{key:"bind",value:function(t){t=t||this.gl,t.bindFramebuffer(t.FRAMEBUFFER,this._object),t.frameBuffer=this}},{key:"unbind",value:function(t){t||(this._colorAttach.forEach(function(t){return t.unbind()}),this._depthAttach.unbind()),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.frameBuffer=null}},{key:"attach",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.resizeAttach,r=void 0===i||i,a=n.colorIndex,o=void 0===a?0:a,s=this.gl,l=this.width,u=this.height;switch(this.bind(),e instanceof y.default||e instanceof b.default||(e=this._createDefaultAttachment(t,e)),r&&e.resize(l,u),t){case"color":s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+o,s.TEXTURE_2D,e.texture,0),this._colorAttach[o]=e;break;case"depth":var c="DEPTH24_STENCIL8"===e.internalformat?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT;e instanceof b.default?s.framebufferRenderbuffer(s.FRAMEBUFFER,c,s.RENDERBUFFER,e.buffer):e instanceof y.default&&s.framebufferTexture2D(s.FRAMEBUFFER,c,s.TEXTURE_2D,e.texture,0),this._depthAttach=e}}},{key:"checkStatus",value:function(){this.bind();var t=this.gl.checkFramebufferStatus(this.gl.FRAMEBUFFER);return t===this.gl.FRAMEBUFFER_COMPLETE||(console.error("Framebuffer object is incomplete: "+t.toString()+"."),!1)}},{key:"resize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.width=t,this.height=e,this._colorAttach.forEach(function(n){return n.resize(t,e)}),this._depthAttach.resize(t,e,{minFilter:this.gl.NEAREST,magFilter:this.gl.NEAREST})}},{key:"copy",value:function(t){var e=this.gl,n=this.width,i=this.height;if(e.isWebGL2){this.bind();var r=t?t._object:null;e.bindFramebuffer(e.READ_FRAMEBUFFER,r),e.blitFramebuffer(0,0,n,i,0,0,n,i,e.COLOR_BUFFER_BIT,e.NEAREST)}else t&&t.bind(e),this.color.copy()}},{key:"setDrawBuffers",value:function(t){this.bind();var e=this.gl,n=t.map(function(t){return e[t]});e.drawBuffers(n)}},{key:"getColorAttach",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._colorAttach[t]}},{key:"color",get:function(){return this._colorAttach[0]}},{key:"depth",get:function(){return this._depthAttach}},{key:"texture",get:function(){return this._colorAttach[0].texture}},{key:"buffer",get:function(){return this._object}}]),e}(g.default);e.default=E},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(15),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(28),f=i(c),d=n(218),h=i(d),p=n(10),v=i(p),m=f.default.isPC()?8192:4096,g=function(){function t(e,n){(0,s.default)(this,t),this.gl=e,this.width=n.width||m,this.height=n.height||m/2,this.itemWidth=n.itemWidth||256,this.maxCount=this.width/this.itemWidth*(this.height/this.itemWidth),this.usedInUpdateNum=0,this.next={x:0,y:0},this.images={},this.config=n.config||{},this.debug=n.debug||!1,this.debug&&(this.canvas=this.createCanvas(this.width,this.height),this.debugShow())}return(0,u.default)(t,[{key:"getTexCoord",value:function(t){var e=this.images[t];if(e){var n=this.width,i=this.height;return{s:(e.x+.5)/n,t:(e.y+.5)/i,w:(e.w-1)/n,h:(e.h-1)/i}}return null}},{key:"addImage",value:function(t,e){return t in this.images||this.updateSubImg(t,e),this.images[t]}},{key:"removeImage",value:function(t){delete this.images[t]}},{key:"updateSubImg",value:function(t,e){var n=this.images,i=this.next,r=this.itemWidth,o=this.width,s=this.height;if(this.loadTexture(),!(t in n)){var l=e.height,u=e.width,c=i.x,f=i.y;f+l>s&&(c+=r,f=0),c>=o&&(c=0),this.removeOldImages(c,f,l),n[t]={x:c,y:f,h:l,w:u},this.texture.updateSub(e,(0,a.default)({xOffset:c,yOffset:f},this.config)),i.x=c,i.y=f+l,this.debug&&this.canvas.ctx.drawImage(e,c,f)}}},{key:"loadTexture",value:function(){var t=this.gl;if(this.texture)this.texture.bind();else{var e=new h.default(t);e.resize(this.width,this.height,this.config),this.texture=e}}},{key:"checkCanAdd",value:function(t,e){for(var n=t.features,i=n.height,r=this.images,a=this.width,o=this.height,s=this.itemWidth,l=[],u=this.next,c=u.x,f=u.y,d=c,h=f,p=!1,m=!0,g=!0;m;)v.default.forIn(r,function(t,n){n.x!==c||n.y>=f+i||n.y+n.h<=f||(p=e.find(function(e){return e.id===t}))||l.push(t)}),p?(f+=i,f+i>o&&(c+=s,f=0),c>=a&&(c=0),c===d&&f===h?(m=!1,g=!1):m=!0):m=!1;return l.forEach(function(t){delete r[t]}),l=void 0,this.next={x:c,y:f},g}},{key:"removeOldImages",value:function(t,e,n){var i=this.images,r=[];v.default.forIn(i,function(i,a){a.x!==t||a.y>=e+n||a.y+a.h<=e||r.push(i)}),r.forEach(function(t){delete i[t]}),r=void 0}},{key:"clear",value:function(){this.images={},this.next={x:0,y:0}}},{key:"createCanvas",value:function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,n.ctx=n.getContext("2d"),this.debug&&document.body.appendChild(n),n}},{key:"debugShow",value:function(){this.debug&&(this.canvas.style.position="absolute",this.canvas.style.zIndex="10000",this.canvas.style.border="1px solid red",this.canvas.style.width="1200px",this.canvas.style.height="1200px",this.canvas.style.left="0",this.canvas.style.top="0",this.canvas.style.pointerEvents="none",this.canvas.id="ImageCache",document.body.appendChild(this.canvas))}},{key:"destroy",value:function(){this.texture&&(this.texture.destroy(),this.texture=null),this.width=null,this.height=null,this.itemWidth=null,this.next=null,this.images=null,this.debug=null,this.canvas=null,this.gl=null}}]),t}();e.default=g},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(289),v=i(p),m=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.default)(this,e),(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t,n))}return(0,h.default)(e,t),(0,u.default)(e,[{key:"_onCreate",value:function(){return this.gl.createRenderbuffer()}},{key:"_onDelete",value:function(){this.unbind(),this.gl.deleteRenderbuffer(this._object)}},{key:"_initialize",value:function(t){var e=t.width,n=void 0===e?1:e,i=t.height,r=void 0===i?1:i,a=t.internalformat,o=void 0===a?"DEPTH_COMPONENT16":a;this.width=n,this.height=r,this.internalformat=o}},{key:"bind",value:function(t){t=t||this.gl,t.bindRenderbuffer(t.RENDERBUFFER,this._object)}},{key:"unbind",value:function(){this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,null)}},{key:"resize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.width=t,this.height=e,this.bind();var n=this.internalformat,i=this.gl;this.gl.renderbufferStorage(i.RENDERBUFFER,i[n],t,e)}},{key:"buffer",get:function(){return this._object}}]),e}(v.default);e.default=m},function(t,e,n){"use strict";function i(t,e,n,i,r,a){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=i||.25,this.fontFamily=r||"sans-serif",this.fontWeight=a||"normal",this.radius=n||8,this.size=this.fontSize+2*this.buffer;var o=this.size;this.canvas=document.createElement("canvas"),this.canvas.width=o,this.canvas.height=o,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(o*o),this.gridInner=new Float64Array(o*o),this.f=new Float64Array(o),this.d=new Float64Array(o),this.z=new Float64Array(o+1),this.v=new Int16Array(o),this.middle=Math.round(o/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function r(t,e,n,i,r,o,s){for(var l=0;l<e;l++){for(var u=0;u<n;u++)i[u]=t[u*e+l];a(i,r,o,s,n);for(var c=0;c<n;c++)t[c*e+l]=r[c]}for(var f=0;f<n;f++){for(var d=0;d<e;d++)i[d]=t[f*e+d];a(i,r,o,s,e);for(var h=0;h<e;h++)t[f*e+h]=Math.sqrt(r[h])}}function a(t,e,n,i,r){n[0]=0,i[0]=-o,i[1]=+o;for(var a=1,s=0;a<r;a++){for(var l=(t[a]+a*a-(t[n[s]]+n[s]*n[s]))/(2*a-2*n[s]);l<=i[s];)s-=1,l=(t[a]+a*a-(t[n[s]]+n[s]*n[s]))/(2*a-2*n[s]);s+=1,n[s]=a,i[s]=l,i[s+1]=+o}for(var u=0,c=0;u<r;u++){for(;i[c+1]<u;)c+=1;e[u]=(u-n[c])*(u-n[c])+t[n[c]]}}t.exports=i,t.exports.default=i;var o=1e20;i.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),i=0;i<this.size*this.size;i++){var a=e.data[4*i+3]/255;this.gridOuter[i]=1===a?0:0===a?o:Math.pow(Math.max(0,.5-a),2),this.gridInner[i]=1===a?o:0===a?0:Math.pow(Math.max(0,a-.5),2)}r(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),r(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z);for(var s=0;s<this.size*this.size;s++){var l=this.gridOuter[s]-this.gridInner[s];n[s]=Math.max(0,Math.min(255,Math.round(255-255*(l/this.radius+this.cutoff))))}return n}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(){if(this.painter&&this.painter.map){var t=this.painter.map._getDomOverlayCollision();t&&(t.debug&&t.updateBoxDOM(),t.needsUpdate&&(t.resetVisibility(),a(t),t.checkCrossLayerCollisionDataSet()||(t.updateVisibility(),t.needsUpdate=!1)))}}function a(t){var e=[].concat((0,m.default)(t.domCollisionMap.keys())),n=[].concat((0,m.default)(t.domCollisionMap.values()));e.forEach(function(t,e){var i=n[e].dom,r=n[e].rank,a=n[e].obb;if(i.visible)for(var o=e+1;o<n.length;o++){var s=n[o].dom;if(s.visible){var l=n[o].obb;a.isCollision(l)&&(r>n[o].rank?s.visible=!1:i.visible=!1)}}})}function o(t,e,n){var i=t[n],r=[].concat((0,m.default)(i.keys())),a=[].concat((0,m.default)(i.values())),o=r.filter(function(t,e){return a[e].dom.visible||void 0===a[e].dom.visible}),s={};return o.forEach(function(t,r){var a=i.get(t);(0,g.getGeoBoxArray)(e,a.boundary).forEach(function(e){var i=(0,p.default)(e,2),o=i[0],l=i[1],u=o+"_"+l,c="DOMOVERLAY_*&_"+t+"_*&_"+r;s[u]=s[u]||{cell:[o,l]},s[u][c]={leftTop:a.boundary.leftTop,rightBottom:a.boundary.rightBottom,width:2*a.obb.halfWidth,height:2*a.obb.halfHeight,angle:0,rank:a.rank,geometryIndex:r,dom:a.dom,layerId:t,layerType:b,visible:!0,isVectorBaseCollision:"domVectorCollisionMap"===n}})}),s}function s(t,e,n,i,r){if(t.checkCrossLayerCollisionDataSet()){var a=new d.default;(0,c.default)(e).forEach(function(t){l(e,n,t,i,r,a)}),y.default.forIn(e,function(t,e){y.default.forIn(e,function(t,e){var n=t.split("_*&_");(0,p.default)(n,2)[1]&&a.has(t)&&(e.dom.visible=!1)})}),t.updateVisibility(),t.needsUpdate=!1}}function l(t,e,n,i,r,a){y.default.forIn(t[n],function(o,s){if(s&&s.layerId)for(var l=t[n].cell,u=0;u<3;u++)for(var c=0;c<3;c++){var f=l[0]+u-1+"_"+(l[1]+c-1),d=e[f];d&&y.default.forIn(d,function(t,e){if(o!==t&&!r.has(t)&&e.layerId){var n=e.collisionGroupId;if(!i.has(n)&&(0,x.checkCollision)(s,e)){s.rank>=e.rank?(s.dom.visible=!0,r.add(t),n&&i.add(n)):a.add(o)}}})}})}Object.defineProperty(e,"__esModule",{value:!0});var u=n(17),c=i(u),f=n(132),d=i(f),h=n(27),p=i(h),v=n(18),m=i(v);e.default=r,e.getDomOverlayInCellId=o,e._checkDomoverlayCollisionInCrossSource=s;var g=n(550),_=n(10),y=i(_),x=n(354),b="DOMOverlay"},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=t.renderLayers,n=t.transform,i=t.camera,r=t.renderer,u=Math.round(U*(t.textCache&&t.textCache.scale||1)),c=e.filter(function(t){return V.includes(t.type)&&t._collisionOptions&&t._collisionOptions.sameSource}),f={};c.map(function(t){f[t.id]=o({transform:n,camera:i,layer:t,cellSize:u})});var d=new D.default,h=new D.default;l(f,d,h);var _={},y={};e.forEach(function(t){if(V.includes(t.type)&&V.includes(t.type)&&t._collisionOptions&&t._collisionOptions.crossSource){if(f[t.id])return void(_[t.id]=f[t.id]);_[t.id]=o({transform:n,camera:i,layer:t,cellSize:u})}else if(V.includes(t.type)&&V.includes(t.type)&&(!t._collisionOptions||!t._collisionOptions.crossSource)){if(f[t.id])return void(y[t.id]=f[t.id]);y[t.id]=o({transform:n,camera:i,layer:t,cellSize:u})}});var x=r.map._getDomOverlayCollision(),b=(0,z.getDomOverlayInCellId)(x,u,"domCrossCollisionMap"),S=s(_,d,h);(0,z._checkDomoverlayCollisionInCrossSource)(x,b,S,d,h);var w=p(y),E=v(S,w),A=m(E,h),T={};return O.default.forIn(A,function(t,e){T[t]=g(e,d)}),e.forEach(function(t){if(T[t.id]){var e=t.tiles&&t.tiles[0];if(!e||!e.features)return;e.features.instanceShowList=T[t.id]}}),a(E,d,h),v(E,(0,z.getDomOverlayInCellId)(x,u,"domVectorCollisionMap"))}function a(t,e,n){(0,C.default)(t).forEach(function(t){(0,k.default)(t).map(function(t){var i=(0,I.default)(t,2),r=i[0],a=i[1];if(a.layerId)return e.has(a.collisionGroupId)||n.has(r)?void(a.visible=!1):void(a.visible=!0)})})}function o(t){var e=t.transform,n=t.camera,i=t.layer,r=t.cellSize,a=[],o=i.tiles&&i.tiles[0],s=i._collisionOptions&&i._collisionOptions.crossSource,l=i._collisionOptions&&i._collisionOptions.vectorBaseMapSource;if(!(o&&o.features&&o.features.count>0))return{};var u=i.id,d=o.features.labelInfoList;if("LABEL"===i.type){c({infoList:d,transform:e,camera:n,groupRank:h(d),cellSize:r,overlaySet:a,layerId:u,isCrossCollision:s,isVectorBaseCollision:l,zIndex:i.zIndex})}else f({infoList:d,transform:e,camera:n,cellSize:r,overlaySet:a,layerId:u,isCrossCollision:s,isVectorBaseCollision:l,zIndex:i.zIndex});return a}function s(t,e,n){var i=p(t);return(0,T.default)(i).forEach(function(t){u(i,t,"cross",e,n)}),i}function l(t,e,n){O.default.forIn(t,function(t,i){(0,T.default)(i).forEach(function(t){u(i,t,"same",e,n)})})}function u(t,e,n,i,r){O.default.forIn(t[e],function(a,o){if(o&&!r.has(a)&&o.layerId)for(var s=t[e].cell,l=0;l<3;l++)for(var u=0;u<3;u++){var c=s[0]+l-1+"_"+(s[1]+u-1),f=t[c];f&&O.default.forIn(f,function(t,e){if(a!==t&&!r.has(t)&&e.layerId){var s=o.collisionGroupId,l=e.collisionGroupId;if(!i.has(s)&&!i.has(l)&&(s!==l||void 0===s)&&("cross"!==n||o.layerId!==e.layerId)&&(0,F.checkCollision)(o,e)){var u="same"===n?"rank":"zIndex",c="rank"===u&&o[u]===e[u]&&o.geometryIndex>e.geometryIndex;o[u]>e[u]||c?(r.add(t),l&&i.add(l)):(r.add(a),s&&i.add(s))}}})}})}function c(t){var e=t.infoList,n=t.transform,i=t.camera,r=t.groupRank,a=t.cellSize,o=t.overlaySet,s=t.layerId,l=t.isCrossCollision,u=t.isVectorBaseCollision,c=t.zIndex,f=[],h=!0,p=!1,v=void 0;try{for(var m,g=(0,E.default)(e);!(h=(m=g.next()).done);h=!0)!function(){var t=m.value,e=t.geometry.position,f=n.latLngToCenterLocalPixel(e),h=new N.Vector4(f.x,f.y,0,1),p=i.pvMatrix.multiplyVector4(h),v=p.elements[0]/p.elements[3],g=p.elements[1]/p.elements[3],y=(1+v)/2*n.width,x=(1-g)/2*n.height,b=t.style.size/t.fontSize*t.widthSum*n.scale,S=t.style.size/t.fontSize*t.heightSum*n.scale,w=b/2,E=S/2,A={x:y,y:x},T=t.style,M=T.alignment,P=T.verticalAlignment,k=T.angle,L=t.geometry.collisionGroupId;L&&r.has(L)&&(t.geometry.rank=r.get(L));var C=d({x:y-w+M*w,y:x-E+P*E},A,t.style,"LABEL"),R=d({x:y+w+M*w,y:x+E+P*E},A,t.style,"LABEL"),D=d({x:y+w+M*w,y:x-E+P*E},A,t.style,"LABEL"),B=d({x:y-w+M*w,y:x+E+P*E},A,t.style,"LABEL"),O=Math.min(C.x,D.x,R.x,B.x),F=Math.min(C.y,D.y,R.y,B.y),z=Math.max(C.x,D.x,R.x,B.x),V=z,U=Math.max(C.y,D.y,R.y,B.y);_(a,{leftTop:{x:O,y:F},rightBottom:{x:V,y:U}}).forEach(function(e){var n=(0,I.default)(e,2),i=n[0],r=n[1],a=i+"_"+r,f="LABEL_*&_"+s+"_*&_"+t.geometryIndex;o[a]=o[a]||{cell:[i,r]},o[a][f]={leftTop:C,rightBottom:R,width:b,height:S,zIndex:c,angle:k,lettersCount:t.lettersCount,rank:void 0===t.geometry.rank?-1/0:t.geometry.rank,geometryIndex:t.geometryIndex,isCrossCollision:l,isVectorBaseCollision:u,collisionGroupId:L,layerId:s}})}()}catch(t){p=!0,v=t}finally{try{!h&&g.return&&g.return()}finally{if(p)throw v}}return f}function f(t){var e=t.infoList,n=t.transform,i=t.camera,r=t.cellSize,a=t.overlaySet,o=t.layerId,s=t.isCrossCollision,l=t.isVectorBaseCollision,u=t.zIndex,c=[],f=!0,h=!1,p=void 0;try{for(var v,m=(0,E.default)(e);!(f=(v=m.next()).done);f=!0)!function(){var t=v.value,e=t.geometry.position,c=n.latLngToCenterLocalPixel(e),f=new N.Vector4(c.x,c.y,0,1),h=i.pvMatrix.multiplyVector4(f),p=h.elements[0]/h.elements[3],m=h.elements[1]/h.elements[3],g=(1+p)/2*n.width,y=(1-m)/2*n.height,x={x:g,y:y},b=null,S=null;t.labelWidthSum<1?(b=0,S=0):(b=t.style.size/t.fontSize*t.labelWidthSum*n.scale,S=t.labelHeightSum?t.style.size/t.fontSize*t.labelHeightSum*n.scale:t.style.size*n.scale);var w=t.style.width*n.scale,E=t.style.height*n.scale,A=b/2,T=S/2,M={leftTop:d({x:g-t.style.anchor.x,y:y-t.style.anchor.y},x,t.style,"MARKER"),rightTop:d({x:g+w-t.style.anchor.x,y:y-t.style.anchor.y},x,t.style,"MARKER"),rightBottom:d({x:g+w-t.style.anchor.x,y:y+E-t.style.anchor.y},x,t.style,"MARKER"),leftBottom:d({x:g-t.style.anchor.x,y:y+E-t.style.anchor.y},x,t.style,"MARKER")},P=Math.min(M.leftTop.x,M.rightTop.x,M.rightBottom.x,M.leftBottom.x),k=Math.min(M.leftTop.y,M.rightTop.y,M.rightBottom.y,M.leftBottom.y),L=Math.max(M.leftTop.x,M.rightTop.x,M.rightBottom.x,M.leftBottom.x),C=k,R=L,D=Math.max(M.leftTop.y,M.rightTop.y,M.rightBottom.y,M.leftBottom.y),B=P,O=D;if(t.labelWidthSum>1){var F=Math.min(P,L,B,R),z=Math.max(P,L,B,R),V=Math.min(k,C,O,D),U=Math.max(k,C,O,D),G={x:(F+z)/2,y:(V+U)/2},H={leftTop:{x:G.x-A+t.offsetToMarkerCenter.x,y:G.y-T+t.offsetToMarkerCenter.y},rightTop:{x:G.x+A+t.offsetToMarkerCenter.x,y:G.y-T+t.offsetToMarkerCenter.y},rightBottom:{x:G.x+A+t.offsetToMarkerCenter.x,y:G.y+T+t.offsetToMarkerCenter.y},leftBottom:{x:G.x-A+t.offsetToMarkerCenter.x,y:G.y+T+t.offsetToMarkerCenter.y}};P=Math.min(P,H.leftTop.x),k=Math.min(k,H.leftTop.y),L=Math.max(L,H.rightTop.x),C=Math.min(C,H.rightTop.y),R=Math.max(R,H.rightBottom.x),D=Math.max(D,H.rightBottom.y),B=Math.min(B,H.leftBottom.x),O=Math.max(O,H.leftBottom.y)}var Y=(P+R)/2,j=(k+D)/2,W=L-P,X=D-C;_(r,{leftTop:{x:Y-W/2,y:j-X/2},rightBottom:{x:Y+W/2,y:j+X/2}}).forEach(function(e){var n=(0,I.default)(e,2),i=n[0],r=n[1],c=i+"_"+r,f="MARKER_*&_"+o+"_*&_"+t.geometryIndex;a[c]=a[c]||{cell:[i,r]},a[c][f]={leftTop:{x:P,y:k},rightBottom:{x:R,y:D},width:W,height:X,zIndex:u,angle:0,lettersCount:t.lettersCount,rank:void 0===t.geometry.rank?-1/0:t.geometry.rank,geometryIndex:t.geometryIndex,isCrossCollision:s,isVectorBaseCollision:l,layerId:o}})}()}catch(t){h=!0,p=t}finally{try{!f&&m.return&&m.return()}finally{if(h)throw p}}return c}function d(t,e,n,i){var r=t.x-e.x,a=t.y-e.y,o=new N.Vector4(r,a,0,1),s=0;s="LABEL"===i?n.angle||0:n.rotate||0;var l=(new N.Matrix4).setRotate(-s,0,0,1),u=l.multiplyVector4(o);return"LABEL"===i?{x:u.elements[0]+e.x+n.offset.x,y:u.elements[1]+e.y+n.offset.y}:{x:u.elements[0]+e.x,y:u.elements[1]+e.y}}function h(t){var e=new S.default;return t.forEach(function(t){var n=t.geometry.rank,i=t.geometry.collisionGroupId;void 0===n&&(n=-1/0),i&&(e.has(i)?e.set(i,Math.max(n,e.get(i))):e.set(i,n))}),e}function p(t){var e=[];return O.default.forIn(t,function(t,n){v(e,n)}),e}function v(t,e){return(0,T.default)(e).forEach(function(n){t[n]=t[n]||{},t[n]=(0,x.default)({},t[n],e[n])}),t}function m(t,e){var n={};return O.default.forIn(t,function(t,i){O.default.forIn(i,function(t,i){var r=t.split("_*&_"),a=(0,I.default)(r,3),o=a[1],s=a[2];o&&(n[o]=n[o]||[],n[o][s]={isShow:!e.has(t),collisionGroupId:i.collisionGroupId,lettersCount:i.lettersCount})})}),n}function g(t,e){var n=[];return t.forEach(function(t){var i=t.collisionGroupId;i&&e.has(i)&&(t.isShow=!1),n=t.isShow?n.concat(Array(Number(t.lettersCount)).fill(1)):n.concat(Array(Number(t.lettersCount)).fill(0))}),new Uint8ClampedArray(n)}function _(t,e){for(var n=[],i=e.leftTop,r=e.rightBottom,a=Math.floor(i.x/t),o=Math.floor(i.y/t),s=Math.floor(r.x/t),l=Math.floor(r.y/t),u=a;u<=s;u++)for(var c=o;c<=l;c++)n.push([u,c]);return n}Object.defineProperty(e,"__esModule",{value:!0});var y=n(125),x=i(y),b=n(95),S=i(b),w=n(25),E=i(w),A=n(17),T=i(A),M=n(27),I=i(M),P=n(110),k=i(P),L=n(115),C=i(L),R=n(132),D=i(R);e.default=r,e.getGeoBoxArray=_;var N=n(109),B=n(10),O=i(B),F=n(354),z=n(549),V=["MARKER","LABEL"],U=80},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){n(),o(t,e)}function a(t,e){var n={};return e.forEach(function(e){var i=p[e];n[e]=i?i(t,t[e]):t.getParameter(t[e])}),n}function o(t,e){t.blendFuncSeparate(e.BLEND_SRC_RGB,e.BLEND_DST_RGB,e.BLEND_SRC_ALPHA,e.BLEND_DST_ALPHA),(0,c.default)(e).forEach(function(e){var n=(0,l.default)(e,2),i=n[0],r=n[1],a=g[i];a&&a(t,r,t[i])})}Object.defineProperty(e,"__esModule",{value:!0});var s=n(27),l=i(s),u=n(110),c=i(u),f=n(18),d=i(f);e.preserveParameters=r,e.getParameters=a;var h=function(t,e){return t.isEnabled(e)},p={BLEND:h,CULL_FACE:h,DEPTH_TEST:h,DITHER:h,POLYGON_OFFSET_FILL:h,SAMPLE_ALPHA_TO_COVERAGE:h,SAMPLE_COVERAGE:h,SCISSOR_TEST:h,STENCIL_TEST:h,RASTERIZER_DISCARD:h},v=function(t,e,n){return e?t.enable(n):t.disable(n)},m=function(t,e,n){return t.pixelStorei(n,e)},g={BLEND:v,CULL_FACE:v,DEPTH_TEST:v,COLOR_CLEAR_VALUE:function(t,e){return t.clearColor.apply(t,(0,d.default)(e))},VIEWPORT:function(t,e){return t.viewport.apply(t,(0,d.default)(e))},UNPACK_FLIP_Y_WEBGL:m,UNPACK_PREMULTIPLY_ALPHA_WEBGL:m}},function(t,e,n){var i=n(253);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=i(t))throw TypeError(e);return+t}},function(t,e,n){"use strict";var i=n(143),r=n(277),a=n(88);t.exports=[].copyWithin||function(t,e){var n=i(this),o=a(n.length),s=r(t,o),l=r(e,o),u=arguments.length>2?arguments[2]:void 0,c=Math.min((void 0===u?o:r(u,o))-l,o-s),f=1;for(l<s&&s<l+c&&(f=-1,l+=c-1,s+=c-1);c-- >0;)l in n?n[s]=n[l]:delete n[s],s+=f,l+=f;return n}},function(t,e,n){var i=n(237),r=n(143),a=n(335),o=n(88);t.exports=function(t,e,n,s,l){i(e);var u=r(t),c=a(u),f=o(u.length),d=l?f-1:0,h=l?-1:1;if(n<2)for(;;){if(d in c){s=c[d],d+=h;break}if(d+=h,l?d<0:f<=d)throw TypeError("Reduce of empty array with no initial value")}for(;l?d>=0:f>d;d+=h)d in c&&(s=e(s,c[d],d,u));return s}},function(t,e,n){var i=n(854);t.exports=function(t,e){return new(i(t))(e)}},function(t,e,n){"use strict";var i=n(237),r=n(64),a=n(560),o=[].slice,s={},l=function(t,e,n){if(!(e in s)){for(var i=[],r=0;r<e;r++)i[r]="a["+r+"]";s[e]=Function("F,a","return new F("+i.join(",")+")")}return s[e](t,n)};t.exports=Function.bind||function(t){var e=i(this),n=o.call(arguments,1),s=function(){var i=n.concat(o.call(arguments));return this instanceof s?l(e,i.length,i):a(e,i,t)};return r(e.prototype)&&(s.prototype=e.prototype),s}},function(t,e,n){"use strict";var i=n(107).f,r=n(272),a=n(295),o=n(239),s=n(293),l=n(360),u=n(455),c=n(564),f=n(296),d=n(106),h=n(260).fastKey,p=n(279),v=d?"_s":"size",m=function(t,e){var n,i=h(e);if("F"!==i)return t._i[i];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,u){var c=t(function(t,i){s(t,c,e,"_i"),t._t=e,t._i=r(null),t._f=void 0,t._l=void 0,t[v]=0,void 0!=i&&l(i,n,t[u],t)});return a(c.prototype,{clear:function(){for(var t=p(this,e),n=t._i,i=t._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete n[i.i];t._f=t._l=void 0,t[v]=0},delete:function(t){var n=p(this,e),i=m(n,t);if(i){var r=i.n,a=i.p;delete n._i[i.i],i.r=!0,a&&(a.n=r),r&&(r.p=a),n._f==i&&(n._f=r),n._l==i&&(n._l=a),n[v]--}return!!i},forEach:function(t){p(this,e);for(var n,i=o(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(i(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!m(p(this,e),t)}}),d&&i(c.prototype,"size",{get:function(){return p(this,e)[v]}}),c},def:function(t,e,n){var i,r,a=m(t,e);return a?a.v=n:(t._l=a={i:r=h(e,!0),k:e,v:n,p:i=t._l,n:void 0,r:!1},t._f||(t._f=a),i&&(i.n=a),t[v]++,"F"!==r&&(t._i[r]=a)),t},getEntry:m,setStrong:function(t,e,n){u(t,e,function(t,n){this._t=p(t,e),this._k=n,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?c(0,n.k):"values"==e?c(0,n.v):c(0,[n.k,n.v]):(t._t=void 0,c(1))},n?"entries":"values",!n,!0),f(e)}}},function(t,e,n){"use strict";var i=n(295),r=n(260).getWeak,a=n(61),o=n(64),s=n(293),l=n(360),u=n(238),c=n(219),f=n(279),d=u(5),h=u(6),p=0,v=function(t){return t._l||(t._l=new m)},m=function(){this.a=[]},g=function(t,e){return d(t.a,function(t){return t[0]===e})};m.prototype={get:function(t){var e=g(this,t);if(e)return e[1]},has:function(t){return!!g(this,t)},set:function(t,e){var n=g(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=h(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,a){var u=t(function(t,i){s(t,u,e,"_i"),t._t=e,t._i=p++,t._l=void 0,void 0!=i&&l(i,n,t[a],t)});return i(u.prototype,{delete:function(t){if(!o(t))return!1;var n=r(t);return!0===n?v(f(this,e)).delete(t):n&&c(n,this._i)&&delete n[this._i]},has:function(t){if(!o(t))return!1;var n=r(t);return!0===n?v(f(this,e)).has(t):n&&c(n,this._i)}}),u},def:function(t,e,n){var i=r(a(e),!0);return!0===i?v(t).set(e,n):i[t._i]=n,t},ufstore:v}},function(t,e,n){t.exports=!n(106)&&!n(62)(function(){return 7!=Object.defineProperty(n(448)("div"),"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var i=n(64),r=Math.floor;t.exports=function(t){return!i(t)&&isFinite(t)&&r(t)===t}},function(t,e,n){var i=n(61);t.exports=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(e){var a=t.return;throw void 0!==a&&i(a.call(t)),e}}},function(t,e,n){"use strict";var i=n(272),r=n(276),a=n(297),o={};n(220)(o,n(78)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(o,{next:r(1,n)}),a(t,e+" Iterator")}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,n){"use strict";function i(t){var e,n;this.promise=new t(function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i}),this.resolve=r(e),this.reject=r(n)}var r=n(237);t.exports.f=function(t){return new i(t)}},function(t,e,n){"use strict";var i=n(106),r=n(275),a=n(363),o=n(336),s=n(143),l=n(335),u=Object.assign;t.exports=!u||n(62)(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=i})?function(t,e){for(var n=s(t),u=arguments.length,c=1,f=a.f,d=o.f;u>c;)for(var h,p=l(arguments[c++]),v=f?r(p).concat(f(p)):r(p),m=v.length,g=0;m>g;)h=v[g++],i&&!d.call(p,h)||(n[h]=p[h]);return n}:u},function(t,e,n){var i=n(107),r=n(61),a=n(275);t.exports=n(106)?Object.defineProperties:function(t,e){r(t);for(var n,o=a(e),s=o.length,l=0;s>l;)i.f(t,n=o[l++],e[n]);return t}},function(t,e,n){var i=n(221),r=n(273).f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return r(t)}catch(t){return o.slice()}};t.exports.f=function(t){return o&&"[object Window]"==a.call(t)?s(t):r(i(t))}},function(t,e,n){var i=n(219),r=n(221),a=n(356)(!1),o=n(460)("IE_PROTO");t.exports=function(t,e){var n,s=r(t),l=0,u=[];for(n in s)n!=o&&i(s,n)&&u.push(n);for(;e.length>l;)i(s,n=e[l++])&&(~a(u,n)||u.push(n));return u}},function(t,e,n){var i=n(106),r=n(275),a=n(221),o=n(336).f;t.exports=function(t){return function(e){for(var n,s=a(e),l=r(s),u=l.length,c=0,f=[];u>c;)n=l[c++],i&&!o.call(s,n)||f.push(t?[n,s[n]]:s[n]);return f}}},function(t,e,n){var i=n(273),r=n(363),a=n(61),o=n(63).Reflect;t.exports=o&&o.ownKeys||function(t){var e=i.f(a(t)),n=r.f;return n?e.concat(n(t)):e}},function(t,e,n){var i=n(63).parseFloat,r=n(298).trim;t.exports=1/i(n(464)+"-0")!=-1/0?function(t){var e=r(String(t),3),n=i(e);return 0===n&&"-"==e.charAt(0)?-0:n}:i},function(t,e,n){var i=n(63).parseInt,r=n(298).trim,a=n(464),o=/^[-+]?0[xX]/;t.exports=8!==i(a+"08")||22!==i(a+"0x16")?function(t,e){var n=r(String(t),3);return i(n,e>>>0||(o.test(n)?16:10))}:i},function(t,e,n){var i=n(61),r=n(64),a=n(566);t.exports=function(t,e){if(i(t),r(e)&&e.constructor===t)return e;var n=a.f(t);return(0,n.resolve)(e),n.promise}},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,n){var i=n(88),r=n(463),a=n(254);t.exports=function(t,e,n,o){var s=String(a(t)),l=s.length,u=void 0===n?" ":String(n),c=i(e);if(c<=l||""==u)return s;var f=c-l,d=r.call(u,Math.ceil(f/u.length));return d.length>f&&(d=d.slice(0,f)),o?d+s:s+d}},function(t,e,n){var i=n(242),r=n(88);t.exports=function(t){if(void 0===t)return 0;var e=i(t),n=r(e);if(e!==n)throw RangeError("Wrong length!");return n}},function(t,e,n){var i=n(63),r=n(105),a=n(271),o=n(467),s=n(107).f;t.exports=function(t){var e=r.Symbol||(r.Symbol=a?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:o.f(t)})}},function(t,e,n){"use strict";var i,r,a,o,s=n(271),l=n(63),u=n(239),c=n(334),f=n(11),d=n(64),h=n(237),p=n(293),v=n(360),m=n(337),g=n(465).set,_=n(861)(),y=n(566),x=n(862),b=n(367),S=n(575),w=l.TypeError,E=l.process,A=E&&E.versions,T=A&&A.v8||"",M=l.Promise,I="process"==c(E),P=function(){},k=r=y.f,L=!!function(){try{var t=M.resolve(1),e=(t.constructor={})[n(78)("species")]=function(t){t(P,P)};return(I||"function"==typeof PromiseRejectionEvent)&&t.then(P)instanceof e&&0!==T.indexOf("6.6")&&-1===b.indexOf("Chrome/66")}catch(t){}}(),C=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},R=function(t,e){if(!t._n){t._n=!0;var n=t._c;_(function(){for(var i=t._v,r=1==t._s,a=0;n.length>a;)!function(e){var n,a,o,s=r?e.ok:e.fail,l=e.resolve,u=e.reject,c=e.domain;try{s?(r||(2==t._h&&B(t),t._h=1),!0===s?n=i:(c&&c.enter(),n=s(i),c&&(c.exit(),o=!0)),n===e.promise?u(w("Promise-chain cycle")):(a=C(n))?a.call(n,l,u):l(n)):u(i)}catch(t){c&&!o&&c.exit(),u(t)}}(n[a++]);t._c=[],t._n=!1,e&&!t._h&&D(t)})}},D=function(t){g.call(l,function(){var e,n,i,r=t._v,a=N(t);if(a&&(e=x(function(){I?E.emit("unhandledRejection",r,t):(n=l.onunhandledrejection)?n({promise:t,reason:r}):(i=l.console)&&i.error&&i.error("Unhandled promise rejection",r)}),t._h=I||N(t)?2:1),t._a=void 0,a&&e.e)throw e.v})},N=function(t){return 1!==t._h&&0===(t._a||t._c).length},B=function(t){g.call(l,function(){var e;I?E.emit("rejectionHandled",t):(e=l.onrejectionhandled)&&e({promise:t,reason:t._v})})},O=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),R(e,!0))},F=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw w("Promise can't be resolved itself");(e=C(t))?_(function(){var i={_w:n,_d:!1};try{e.call(t,u(F,i,1),u(O,i,1))}catch(t){O.call(i,t)}}):(n._v=t,n._s=1,R(n,!1))}catch(t){O.call({_w:n,_d:!1},t)}}};L||(M=function(t){p(this,M,"Promise","_h"),h(t),i.call(this);try{t(u(F,this,1),u(O,this,1))}catch(t){O.call(this,t)}},i=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=n(295)(M.prototype,{then:function(t,e){var n=k(m(this,M));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=I?E.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&R(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),a=function(){var t=new i;this.promise=t,this.resolve=u(F,t,1),this.reject=u(O,t,1)},y.f=k=function(t){return t===M||t===o?new a(t):r(t)}),f(f.G+f.W+f.F*!L,{Promise:M}),n(297)(M,"Promise"),n(296)("Promise"),o=n(105).Promise,f(f.S+f.F*!L,"Promise",{reject:function(t){var e=k(this);return(0,e.reject)(t),e.promise}}),f(f.S+f.F*(s||!L),"Promise",{resolve:function(t){return S(s&&this===o?M:this,t)}}),f(f.S+f.F*!(L&&n(362)(function(t){M.all(t).catch(P)})),"Promise",{all:function(t){var e=this,n=k(e),i=n.resolve,r=n.reject,a=x(function(){var n=[],a=0,o=1;v(t,!1,function(t){var s=a++,l=!1;n.push(void 0),o++,e.resolve(t).then(function(t){l||(l=!0,n[s]=t,--o||i(n))},r)}),--o||i(n)});return a.e&&r(a.v),n.promise},race:function(t){var e=this,n=k(e),i=n.reject,r=x(function(){v(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return r.e&&i(r.v),n.promise}})},function(t,e,n){"use strict";var i=n(458);n(11)({target:"RegExp",proto:!0,forced:i!==/./.exec},{exec:i})},function(t,e,n){n(106)&&"g"!=/./g.flags&&n(107).f(RegExp.prototype,"flags",{configurable:!0,get:n(359)})},function(t,e,n){!function(i,r){t.exports=e=r(n(50))}(0,function(t){return function(e){var n=t,i=n.lib,r=i.WordArray,a=i.Hasher,o=n.algo,s=[],l=[];!function(){function t(t){return 4294967296*(t-(0|t))|0}for(var n=2,i=0;i<64;)(function(t){for(var n=e.sqrt(t),i=2;i<=n;i++)if(!(t%i))return!1;return!0})(n)&&(i<8&&(s[i]=t(e.pow(n,.5))),l[i]=t(e.pow(n,1/3)),i++),n++}();var u=[],c=o.SHA256=a.extend({_doReset:function(){this._hash=new r.init(s.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],c=n[5],f=n[6],d=n[7],h=0;h<64;h++){if(h<16)u[h]=0|t[e+h];else{var p=u[h-15],v=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,m=u[h-2],g=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;u[h]=v+u[h-7]+g+u[h-16]}var _=s&c^~s&f,y=i&r^i&a^r&a,x=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),b=(s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25),S=d+b+_+l[h]+u[h],w=x+y;d=f,f=c,c=s,s=o+S|0,o=a,a=r,r=i,i=S+w|0}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+a|0,n[3]=n[3]+o|0,n[4]=n[4]+s|0,n[5]=n[5]+c|0,n[6]=n[6]+f|0,n[7]=n[7]+d|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,r=8*t.sigBytes;return n[r>>>5]|=128<<24-r%32,n[14+(r+64>>>9<<4)]=e.floor(i/4294967296),n[15+(r+64>>>9<<4)]=i,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=a.clone.call(this);return t._hash=this._hash.clone(),t}});n.SHA256=a._createHelper(c),n.HmacSHA256=a._createHmacHelper(c)}(Math),t.SHA256})},function(t,e,n){!function(i,r,a){t.exports=e=r(n(50),n(368))}(0,function(t){return function(){function e(){return o.create.apply(o,arguments)}var n=t,i=n.lib,r=i.Hasher,a=n.x64,o=a.Word,s=a.WordArray,l=n.algo,u=[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)],c=[];!function(){for(var t=0;t<80;t++)c[t]=e()}();var f=l.SHA512=r.extend({_doReset:function(){this._hash=new s.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(t,e){for(var n=this._hash.words,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],l=n[5],f=n[6],d=n[7],h=i.high,p=i.low,v=r.high,m=r.low,g=a.high,_=a.low,y=o.high,x=o.low,b=s.high,S=s.low,w=l.high,E=l.low,A=f.high,T=f.low,M=d.high,I=d.low,P=h,k=p,L=v,C=m,R=g,D=_,N=y,B=x,O=b,F=S,z=w,V=E,U=A,G=T,H=M,Y=I,j=0;j<80;j++){var W=c[j];if(j<16)var X=W.high=0|t[e+2*j],Z=W.low=0|t[e+2*j+1];else{var q=c[j-15],Q=q.high,J=q.low,K=(Q>>>1|J<<31)^(Q>>>8|J<<24)^Q>>>7,$=(J>>>1|Q<<31)^(J>>>8|Q<<24)^(J>>>7|Q<<25),tt=c[j-2],et=tt.high,nt=tt.low,it=(et>>>19|nt<<13)^(et<<3|nt>>>29)^et>>>6,rt=(nt>>>19|et<<13)^(nt<<3|et>>>29)^(nt>>>6|et<<26),at=c[j-7],ot=at.high,st=at.low,lt=c[j-16],ut=lt.high,ct=lt.low,Z=$+st,X=K+ot+(Z>>>0<$>>>0?1:0),Z=Z+rt,X=X+it+(Z>>>0<rt>>>0?1:0),Z=Z+ct,X=X+ut+(Z>>>0<ct>>>0?1:0);W.high=X,W.low=Z}var ft=O&z^~O&U,dt=F&V^~F&G,ht=P&L^P&R^L&R,pt=k&C^k&D^C&D,vt=(P>>>28|k<<4)^(P<<30|k>>>2)^(P<<25|k>>>7),mt=(k>>>28|P<<4)^(k<<30|P>>>2)^(k<<25|P>>>7),gt=(O>>>14|F<<18)^(O>>>18|F<<14)^(O<<23|F>>>9),_t=(F>>>14|O<<18)^(F>>>18|O<<14)^(F<<23|O>>>9),yt=u[j],xt=yt.high,bt=yt.low,St=Y+_t,wt=H+gt+(St>>>0<Y>>>0?1:0),St=St+dt,wt=wt+ft+(St>>>0<dt>>>0?1:0),St=St+bt,wt=wt+xt+(St>>>0<bt>>>0?1:0),St=St+Z,wt=wt+X+(St>>>0<Z>>>0?1:0),Et=mt+pt,At=vt+ht+(Et>>>0<mt>>>0?1:0);H=U,Y=G,U=z,G=V,z=O,V=F,F=B+St|0,O=N+wt+(F>>>0<B>>>0?1:0)|0,N=R,B=D,R=L,D=C,L=P,C=k,k=St+Et|0,P=wt+At+(k>>>0<St>>>0?1:0)|0}p=i.low=p+k,i.high=h+P+(p>>>0<k>>>0?1:0),m=r.low=m+C,r.high=v+L+(m>>>0<C>>>0?1:0),_=a.low=_+D,a.high=g+R+(_>>>0<D>>>0?1:0),x=o.low=x+B,o.high=y+N+(x>>>0<B>>>0?1:0),S=s.low=S+F,s.high=b+O+(S>>>0<F>>>0?1:0),E=l.low=E+V,l.high=w+z+(E>>>0<V>>>0?1:0),T=f.low=T+G,f.high=A+U+(T>>>0<G>>>0?1:0),I=d.low=I+Y,d.high=M+H+(I>>>0<Y>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;return e[i>>>5]|=128<<24-i%32,e[30+(i+128>>>10<<5)]=Math.floor(n/4294967296),e[31+(i+128>>>10<<5)]=n,t.sigBytes=4*e.length,this._process(),this._hash.toX32()},clone:function(){var t=r.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32});n.SHA512=r._createHelper(f),n.HmacSHA512=r._createHmacHelper(f)}(),t.SHA512})},function(t,e,n){"use strict";var i=n(262).assign,r=n(1044),a=n(1045),o=n(588),s={};i(s,r,a,o),t.exports=s},function(t,e,n){"use strict";function i(t,e){if(e<65534&&(t.subarray&&o||!t.subarray&&a))return String.fromCharCode.apply(null,r.shrinkBuf(t,e));for(var n="",i=0;i<e;i++)n+=String.fromCharCode(t[i]);return n}var r=n(262),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var s=new r.Buf8(256),l=0;l<256;l++)s[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;s[254]=s[254]=1,e.string2buf=function(t){var e,n,i,a,o,s=t.length,l=0;for(a=0;a<s;a++)n=t.charCodeAt(a),55296==(64512&n)&&a+1<s&&56320==(64512&(i=t.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(i-56320),a++),l+=n<128?1:n<2048?2:n<65536?3:4;for(e=new r.Buf8(l),o=0,a=0;o<l;a++)n=t.charCodeAt(a),55296==(64512&n)&&a+1<s&&56320==(64512&(i=t.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(i-56320),a++),n<128?e[o++]=n:n<2048?(e[o++]=192|n>>>6,e[o++]=128|63&n):n<65536?(e[o++]=224|n>>>12,e[o++]=128|n>>>6&63,e[o++]=128|63&n):(e[o++]=240|n>>>18,e[o++]=128|n>>>12&63,e[o++]=128|n>>>6&63,e[o++]=128|63&n);return e},e.buf2binstring=function(t){return i(t,t.length)},e.binstring2buf=function(t){for(var e=new r.Buf8(t.length),n=0,i=e.length;n<i;n++)e[n]=t.charCodeAt(n);return e},e.buf2string=function(t,e){var n,r,a,o,l=e||t.length,u=new Array(2*l);for(r=0,n=0;n<l;)if((a=t[n++])<128)u[r++]=a;else if((o=s[a])>4)u[r++]=65533,n+=o-1;else{for(a&=2===o?31:3===o?15:7;o>1&&n<l;)a=a<<6|63&t[n++],o--;o>1?u[r++]=65533:a<65536?u[r++]=a:(a-=65536,u[r++]=55296|a>>10&1023,u[r++]=56320|1023&a)}return i(u,r)},e.utf8border=function(t,e){var n;for(e=e||t.length,e>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0?e:0===n?e:n+s[t[n]]>e?n:e}},function(t,e,n){"use strict";function i(t,e,n,i){for(var r=65535&t|0,a=t>>>16&65535|0,o=0;0!==n;){o=n>2e3?2e3:n,n-=o;do{r=r+e[i++]|0,a=a+r|0}while(--o);r%=65521,a%=65521}return r|a<<16|0}t.exports=i},function(t,e,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e,n){"use strict";function i(t,e,n,i){var a=r,o=i+n;t^=-1;for(var s=i;s<o;s++)t=t>>>8^a[255&(t^e[s])];return-1^t}var r=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();t.exports=i},function(t,e,n){"use strict";function i(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=i},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAABkCAMAAAAIYWa2AAAC8VBMVEVHcEwAAAAAAAAAAAAAAAAzMzPQRUXlSUnnS0vqS0vrTEzhSEgAAADFRUXmS0vtTk7xTU3yTk7yTk6vPz/oTEzvTk7yTk7MRETrS0vyT0/FQUHFPj7uTU3yTk7sTExVKiroS0vyTk5IJCS4QEDuTU3SRETxTU0AAADhSkreSUkAAADoSkryTk7pSkoAAADoTEzmTEziSUndSEjMRETDQUFtJCTwTU3vTExfHx/mSUkAAADFPz/yTk68PDztTEwAAADMRUXBQUHsTEzqTEyzPj7yTk6lOTnjSUnfSEjuTk7yUVH2iYn6wMD95OT+9vYAAADBPT32hob95ub///+2OTkAAADfSUnyT0/5ra3aR0cAAADqS0vwTU3vTU0AAABmKChbJCTBPT24OjrQQkIAAADXRUXRQ0PVRUUAAADcR0fYRkYAAADXRETQQkLNRETIQkLDQUG9Pj6qNzegNTUhCwvxTk4cCQkAAADrTEwAAAAAAADkSkriSEgAAADLQUFnIiLyTk5gHx/oS0vnSkoAAAAAAADOQ0NLHh7wTk4/FRXaRkbXRUVuJSXxTU1vKCgAAADfSEjZRkYAAADwTU3vTU1XHBzSRETIQEAmDw/rTEzoSkoIBQWhNDSMLS3NQkIAAAAAAAAlDw/oSkrnSkqBKyvwTU3vTU1lISG5PT2qODgAAADURUXKQkIBAQHjSUncRkYAAAAAAAA1FBTkSkoYCgpjISHsS0s/FxcAAABtJSXsTU3pS0tTGhp0JibsTExYHR1bHBzsTExpIyOVMzPuTU19KyujNjbxTk7uTU2MLS2xOTnxTk6bMTHCPj60OTniSEjcR0fuTU07FxefNDTbR0fTRUXpS0uiNDThSEiDKyvXRkZ6JyfhSUmSLi7pS0vIQUFQGBjmSkrGQUGCKSntTEzrTEzdSEjbR0edMzOYMTHZR0eTLy8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA6Ei6pAAAA+3RSTlMAAQIDBAUhRVhlcUYFFlSTzvX/EGC6/B6P8h8YmPiZBmvtBxe7MNwGVlcHhf6PCHx8WlwtLw7T1BCDCSz3LrQLNzqwsSX9KICC2///////DjL///81CnP//3UMtOPkERkcPkFcDWdqdg98fhBvcmFjUlY8Phf4GxTRFxKlqBZsJfopwMIaE3ci7iSRky/5MhimnBvy7C2DeiHVzSBIQoceFSLQxTvw6zVnWx2Qgh+3qSEZJsAkMtssHDbh1jE73zQ14jpL6UFU9e9IXfRScma0p+crU56T0k2vOpQ0rULLdCm4cTHY1JeWPD6aQC42PDkwKCsvMjQsKSUnKiijw/sAAAUASURBVHgB1M8DcoRBEIbhNNbutW3EtnP/E2V/rDUzKeUpo9/q7+gfATA/tSAiORARpjQLiMTs8fr8gWAw4A95PWEmO6SRII5EY/GEzCXisWgkzIodu5BMpTOyIZNOJZmsjEIim8vLDvlcIXwgYw3hYqkse5QrRTuz741qrS4H1GsN3lmx3mimRUGrGabtkwAo3O6Ikk67u3USIIV7eVGU7w82JwEgdYcjUTYablasRk60jCdrFQDqHoumk3ll3jgVbWfWokUDw+d50Za/GND8FUC+vBID1zddt2KNGdyKkdu7MLoR7N4/iJGHR3cQIN89iaGnZ+cVoO7LSAyNXicMYD/yJsben7sI1iMfn2Ls82vC0wjffcsf/DyH8ZdUskbLIIyBcJCSag+BQ4+36+7uisv58d+T6pt23ic6sH1wJ5CEKMmKqiqyJJKIoB3vwM6xTgKGaf3LNEjIdnZh99IlXM+3luR7BBaEB7B3FxGub63IJ7BIO4ZjLSZ2sdZEbJSkl3Ce4UkTzfUipojnLXfgssAbSNaGJJwsQ3Aq3JI3i8g4WdVw1+CWsllEwclWgzDALXWziIqTXQ/1wFpknKC+Z13n4bvII+thn1Kon1lf/DJB/cqxhY17myB8v2aL/cdXKWYNHLcWheGlcmt3r32URP2E1FeqQoatDJrRpI0sJTIzyTEzoxIzY9gMYWY0M1fRXWXOsizdvf18c/6Dv3SNNpBspH8DGMlRhgv8df9WwQ0h1HDaFuXfUopiSQNBR8f4sx5jYvkLhn9ChTh/FnV8AkPImy0xyR9IEidvNstpJjkFn5GSypJWeduHCmn4kPQE5rTFYJL1ZGTiMjKzhFD57hgtBC1m40Ju5vAXrCbkTgLZjFw8Rl4+RxFm+RbLoTBiAR6kMIdXDIo9lKJiHEZJqYACsUPkrHBlMRhmqzzBdsEeCKJYST4nXT+korIqVPFsinsMraqu0cuoLRWZ02CHkeNixLp6fYyGxhweeS2jw5XLgpp02b+AZskhBgSx0i09kNstHA1i0FMqJLS0ame0tXfYKwMQ5RPhAiN2lmhldHUn8IH/gBjntHT09Gpj1PT1s6GODxXntAQm5gwMamEMDUtVFOHCgLTIyc0ZGdXAuCMJNPq+8ISg5Iay/SMhxzF671Z6ZQCFquovb1Bn3LtfydEXrJBUD4oVUR6otu7DRy0c450BlNNUlTQ27psxMYkYUFxfFFqQpnzu3OmZFlGdAZTKWV+QuVLRRqow4K/DaYZrmffOeNzewasygIIGIP+JN8bo05zEwP/NJnUGDEDClJe9EPBMgmZXeTAAbP9zT8iLFoEmjmfAXqCETo9ZfNkN06+JYr1g63jlJihgsj/RY/rV0xKY2P/arTItAkyudkFvXFpufKCDgT8D2gUluOT2rcTqEOM4Re9inK5dj0jrEQOnqOO9A5Ldn2j/oNf1UG6ryoBx8gMKRIcYCMWW8BFOpqQnEHgoKwL4yk8djM5AoEB87F9/0vq5KlBnIBAKxX1RIPM5NjiZekMh2asK5CtHybcb63+5nNpvSm2yWMWaYer5jiA/kBojHsT0D8n+RJBfeGqgVRam5RW/yGLVBlqlanFpaRm8GVYoTPvK6tra+ka7TbcagEibW9s7q6u7G3v7lbgQy8Hh/tbe9vbK1tHhgcWA+Yj+w839o62j/cN+ApeBskIyPM8EQlaxQcd32W/E9Jewb6BBFAAAAABJRU5ErkJggg=="},function(t,e,n){"use strict";e.Event=n(93),e.Map=n(310).default,e.LatLng=n(46),e.LatLngBounds=n(214),e.Point=n(75),e.GradientColor=n(496),e.TVectorTileLayer=n(399).default,e.VectorTileLayer=n(399).default,e.ImageTileLayer=n(287).default,e.GrayTileLayer=n(692).default,e.CanvasGroundLayer=n(691).default,e.ImageGroundLayer=n(694).default,e.MaskLayer=n(514).default,e.WMTSLayer=n(699).default,e.WMSLayer=n(698).default,e.GeometryOverlay=n(311).default,e.MultiPolygon=n(349),e.PolygonStyle=n(225).PolygonStyle,e.ExtrudablePolygonStyle=n(225).ExtrudablePolygonStyle,e.MultiCircle=n(763),e.CircleStyle=n(225).CircleStyle,e.MultiRectangle=n(767),e.RectangleStyle=n(225).RectangleStyle,e.MultiEllipse=n(764),e.EllipseStyle=n(225).EllipseStyle,e.MultiPolyline=n(534),e.PolylineStyle=n(350).default,e.LabelStyle=n(408).default,e.MultiLabel=n(765),e.MultiMarker=n(766),e.MarkerStyle=n(533),e.InfoWindow=n(762).default,e.DOMOverlay=n(407).default,e.MarkerCluster=n(769).default,e.Light=n(541).default,e.VisualPlugin=n(540),e.ModelPlugin=n(538).default,e.LayerPlugin=n(538).default,e.GLCustomLayer=n(784).default,e.constants={CONTROL_POSITION:n(256).CONTROL_POSITION,DEFAULT_CONTROL_ID:n(256).DEFAULT_CONTROL_ID,GEOMETRY_TYPES:n(158).GEOMETRY_TYPES,LIGHT_TYPE:n(352).LIGHT_TYPE,IMAGE_DISPLAY:n(120).IMAGE_DISPLAY,LAYER_LEVEL:n(146).LAYER_LEVEL,MAP_ZOOM_TYPE:n(312).MAP_ZOOM_TYPE},e.AnimatableMixin=n(498).animatableMixin},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(340);e.default={v:"\n    attribute vec2 a_Positions;\n    attribute vec4 a_InstanceCoords;\n    attribute vec4 a_InstanceColor;\n    attribute float a_InstanceWidth;\n\n    uniform mat4 u_matrix;\n    uniform sampler2D u_SamplerArrow;\n    uniform float u_mapScale;\n    uniform vec2 u_resolution;\n\t  varying vec2 v_TexCoord;\n\t  varying vec4 v_Color;\n    "+i.projectScreenPart+"\n\n\n\t  void main(){\n\t\n\t    vec2 wH = vec2(a_InstanceWidth * (20.0 / 4.0), a_InstanceWidth * (20.0 / 4.0));\n\t    vec2 startPt = a_InstanceCoords.xy;\n      vec2 endPt = a_InstanceCoords.zw;\n      vec2 wh = vec2(abs(endPt.x - startPt.x), abs(endPt.y - startPt.y));\n\t    vec2 transCoord = (startPt + endPt) / 2.0;\n      \n      vec2 start_proj = project(u_matrix * vec4(startPt, 0., 1.));\n      vec2 end_proj = project(u_matrix * vec4(endPt, 0., 1.));\n\n\t    vec4 center_proj = u_matrix * vec4(transCoord, 0., 1.);\n\t    \n      vec2 center_screen = project(center_proj);\n      vec2 delta = end_proj - start_proj;\n      float len = length(delta);\n      float angle_sin = delta.x / len;\n      float angle_cos = delta.y / len;\n      mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n      \n      vec2 positions = a_Positions * 0.5 + 0.5;\n\n      vec2 corner_screen =  rotation_matrix * vec2(\n        (wH.x * positions.x - wH.x * 0.5) * u_mapScale, \n        (wH.y * (positions.y - 1.0) + wH.y * 0.5) * u_mapScale\n      ) + center_screen.xy;\n\n      vec4 corner_proj = unproject(corner_screen, center_proj.z, center_proj.w);\n      gl_Position = corner_proj;\n\n      gl_PointSize = 100.0;\n\n\t    v_TexCoord = vec2(positions.x, positions.y);\n\t    v_Color = vec4(a_InstanceColor.rgb / 255.0, 1.0);\n\t  }\n  ",f:"\n    precision mediump float;\n    varying vec2 v_TexCoord;\n    varying vec4 v_Color;\n\n    uniform sampler2D u_SamplerArrow;\n    void main(void) {\n\t\t\tvec4 color = texture2D(u_SamplerArrow, v_TexCoord);\n      gl_FragColor = mix(vec4(0.0, 0.0, 0.0, 0.0), v_Color, step(0.5, color.a));\n\t\t} \n  ",name:"arrow"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(284),r=n(392),a=function(t){return t&&t.__esModule?t:{default:t}}(r),o=a.default?i.LIGHT_UNIFORM+i.LIGHT_VARYING+i.LIGHT_VERTEX:"",s=a.default?i.LIGHT_VARYING+i.LIGHT_FRAG:"";e.default={v:"\n\t\tprecision highp float;\n\t\tattribute vec2 a_Position;\n\t\tattribute vec4 a_Color;\n\t\tattribute vec2 a_Normal;\n\t\tattribute vec2 a_LineInfo;\n\t\tattribute float a_LineDistance;\n\t\tattribute vec2 a_SideInfo;\n\t\tattribute vec4 a_PickingColor;\n\n\t\tuniform mat4 u_matrix;\n\t\tuniform mat4 u_modelMatrix;\n\t\tuniform float u_SizeScale;\n\t\tuniform float picking_useFeaturePickingColor;\n\n\t\tvarying vec4 v_Color;\n\t\tvarying vec2 v_Normal;\n\t\tvarying vec2 v_LineInfo;\n\t\tvarying vec2 v_Pos;\n\t\tvarying float v_Transform;\n\t\tvarying float v_LineDistance;\n\t\tvarying float v_Width;\n\t\tvarying float v_opaque_part;\n\n\t\t"+o+"\n\n\t\tvoid main(){\n\n\t\t\tfloat isSide = fract(a_SideInfo.x / 2.) * 2.;\n\t\t\tfloat isNoSideLine = floor(a_SideInfo.x / 2.);\n\t\t\tv_opaque_part = mix(1.0, 0.0, smoothstep(0.0, 1.0, isSide * isNoSideLine));\n\n\t\t\tfloat zoom = floor(u_SizeScale / 1000.) / 100.;\n\t\t\tfloat scale = fract(u_SizeScale / 1000.) * 10.;\n\t\t\tfloat preWidth = floor(a_Position.x / 2048.0)/2.0;\n\t\t\tfloat nextWidth = floor(a_Position.y / 2048.0)/2.0;\n\n\t\t\tv_Color = mix(a_Color, a_PickingColor, picking_useFeaturePickingColor);\n\t\t\tv_Normal = a_Normal;\n\t\t\tv_LineInfo = a_LineInfo;\n\t\t\tv_LineDistance = floor(a_LineDistance/10.0);\n\t\t\tvec2 point = (fract(a_Position.xy / 2048.0) * 2048.0 - 1024.0) * 0.5;\n\n\t\t\t\n\t\t\tfloat width = a_LineInfo.x / 2.0;\n\t\t\tfloat nearWidth = mix(nextWidth, preWidth, step(0.5, zoom));\n\t\t\tv_Width = mix(\n\t\t\t\twidth,\n\t\t\t\tmix(\n\t\t\t\t\tmix(width, nextWidth, zoom),\n\t\t\t\t\tmix(preWidth, width, zoom),\n\t\t\t\t\tstep(0.5, zoom)\n\t\t\t\t),\n\t\t\t\tfloat(v_LineDistance > 0. && nearWidth > 0.)\n\t\t\t) / scale;\n\n\t\t\tv_Normal = vec2(a_Normal.x - 128.0, a_Normal.y - 128.0) / 63.;\n\t\t\tv_Pos = point + v_Normal * v_Width;\n\t\t\tv_Transform = a_SideInfo.y;\n\t\t\tgl_Position = u_matrix * vec4(v_Pos, 0.0, 1.0);\n\n\t\t\t\n\t\t\t"+(a.default?"lighting_apply_on_vertex(vec3(v_Pos, 0.0), vec3(0.0, 0.0, 1.0), u_modelMatrix, vec2(0.1, 16.0));":"")+"\n\t\t}\n\t",f:"\n\t\tprecision highp float;\n\t\tvarying vec4 v_Color;\n\t\tvarying vec2 v_Normal;\n\t\tvarying vec2 v_LineInfo;\n\t\tvarying vec2 v_Pos;\n\t\tvarying float v_Transform;\n\t\tvarying float v_LineDistance;\n\t\tvarying float v_Width;\n\t\tvarying float v_opaque_part;\n\n\t\t"+s+"\n\n\t\tvoid main(){\n\t\t\tvec4 f_Color;\n\t\t\tf_Color.r = v_Color.r / 255.0;\n\t\t\tf_Color.g = v_Color.g / 255.0;\n\t\t\tf_Color.b = v_Color.b / 255.0;\n\t\t\tf_Color.a = 1.0;\n\n\t\t\tfloat alpha = 1.0;\n\t\t\tfloat minAlpha = 0.0;\n\t\t\tfloat feather = min(v_Width * 0.3, 2.0);\n\n\t\t\t\n\t\t\tfloat transformByte = floor(v_Transform + 0.5);\n\t\t\tvec2 translate = vec2(fract(transformByte / 4.0) * 4.0, floor(fract(transformByte / 16.0) * 4.0));\n\t\t\tfloat scale = floor(transformByte / 16.0);\n\t\t\tvec2 coord = vec2(v_Pos.x, 0. - v_Pos.y) * scale - translate * 256.0;\n\t\t\tbool isOutSide = coord.x < 0. || coord.x > 256.0 || coord.y < 0. || coord.y > 256.0;\n\n\t\t\tfloat dist = abs(length(v_Normal) * v_Width);\n\t\t\tfloat isTransparent = float(\n\t\t\t\t(dist > v_Width || isOutSide) || \n\t\t\t\t(v_LineInfo.y> 0.0 && mod(v_LineDistance, floor(v_LineInfo.y/10.0) * (2.0-fract(v_LineInfo.y/10.0))) > floor(v_LineInfo.y/10.0))\n\t\t\t);\n\n\t\t\talpha = mix(\n\t\t\t\tmix(alpha, clamp((v_Width - dist) / feather, 0.0, 1.0), float(v_Width>0. && dist>(v_Width - feather))),\n\t\t\t\t0.0,\n\t\t\t\tisTransparent\n\t\t\t);\n\n\t\t\t\n\t\t\t"+(a.default?"vec4 colorInLight = lighting_apply_on_color(f_Color);":"vec4 colorInLight = f_Color;")+"\n\t\t\tgl_FragColor =  colorInLight * (v_Color.a /255.0) * alpha * v_opaque_part;\n\t\t}\n\t",name:"base"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={v:"\nattribute vec2 a_Position;\nattribute vec4 a_Info;\nuniform mat4 u_matrix;\nuniform mat4 u_modelMatrix;\nuniform mat4 u_lightPVMatrix;\nvarying vec4 v_pos;\nvarying vec4 v_flatNDCCoord;\n\nvoid main(){\n\tv_pos = vec4(a_Position.xy - 2048.0, a_Info.x, 1.0);\n\n\t\n    v_flatNDCCoord = u_matrix * vec4(v_pos.xy, 0.0, 1.0);\n    \n    vec4 posInLightView = u_lightPVMatrix * u_modelMatrix *  vec4(v_pos.xyz, 1.0);\n\n\tgl_Position = posInLightView;\n}",f:"\nprecision mediump float;\n\nuniform float u_maskScale;\nuniform sampler2D u_maskSampler;\n\nvarying vec4 v_pos;\nvarying vec4 v_flatNDCCoord;\n\nvoid main(){ \n\tvec2 v_texCoord = (v_flatNDCCoord.xy / v_flatNDCCoord.w * u_maskScale + 1.0) / 2.0;\n\n\t\n\tvec4 maskColor = texture2D(u_maskSampler, v_texCoord);\n\tfloat isCulledByMask = maskColor.r;\n\tfloat alpha = 1.0;\n\tif(isCulledByMask > 0.99) {\n\t\tdiscard;\n\t}\n\tif(v_pos.x < -.17 || v_pos.y > .17 || v_pos.x > 256.0 || v_pos.y < -256.0){\n\t\tdiscard;\n\t}\n\n    gl_FragColor = vec4(1.0);\n}",name:"building-shadow"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(284),r="\nattribute vec2 a_Position;\nattribute vec4 a_Color;\nattribute vec4 a_Info;\nattribute vec4 a_Transform;\nattribute float a_Height;\nuniform mat4 u_matrix;\nuniform mat4 u_modelMatrix;\nuniform float u_use3D;\nvarying vec4 v_coord;\nvarying vec4 v_color;\nvarying vec2 v_Transform;\n"+i.LIGHT_UNIFORM+"\n"+i.LIGHT_VARYING+"\n"+i.LIGHT_VERTEX+"\n\nvoid main(){\n\tvec4 v_pos = vec4(a_Position.xy - 2048.0, mix(0.0, a_Height, u_use3D), 1.0);\n\tvec3 a_normal = normalize(vec3(a_Info.xyz-128.0));\n\n\t\n\tv_color = vec4(float(a_Color.r), float(a_Color.g), float(a_Color.b), float(a_Color.a)) / 255.0;\n\tvec2 objSpec = vec2(0.5, 32.0);\n\tlighting_apply_on_vertex(v_pos.xyz, a_normal, u_modelMatrix, objSpec);\n\n\t\n\tvec4 v_flatNDCCoord = u_matrix * vec4(v_pos.xy, 0.0, 1.0);\n\tv_coord = vec4(v_pos.xy, v_flatNDCCoord.xy / v_flatNDCCoord.w);\n\tv_Transform = a_Transform.xy;\n\n\tgl_Position = u_matrix * v_pos;\n}",a="\nprecision mediump float;\n\nuniform float u_maskScale;\nuniform sampler2D u_maskSampler;\n\nvarying vec4 v_coord;\nvarying vec4 v_color;\nvarying vec2 v_Transform;\n\n"+i.LIGHT_VARYING+"\n"+i.LIGHT_FRAG+"\n\nvoid main(){ \n\tvec2 v_texCoord = (v_coord.zw * u_maskScale + 1.0) / 2.0;\n\n\t\n\tvec4 maskColor = texture2D(u_maskSampler, v_texCoord);\n\tfloat isCulledByMask = maskColor.r;\n\t\n\t\n\tif(isCulledByMask > 0.99) {\n\t\tdiscard;\n\t}\n\n\t\n\tvec2 transformRound = floor(v_Transform + 0.5);\n\tvec2 translate = vec2(fract(transformRound.x / 16.0) * 16.0, floor(transformRound.x / 16.0));\n\tfloat scale = transformRound.y;\n\tvec2 coord = vec2(v_coord.x, - v_coord.y) * scale - translate * 256.0;\n\tbool isOutSide = coord.x < -.17 || coord.x > 256.0 || coord.y < -.17 || coord.y > 256.0;\n\t\n\tif(isOutSide){\n\t\t\n\t\tdiscard;\n\t}\n\n\tvec4 color = lighting_apply_on_color(v_color);\n\tgl_FragColor = vec4(color.rgb * color.a, color.a);\n}";e.default={v:r,f:a,name:"building"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.gradientNoise="\n\nvec2 random(vec2 p) {\n\treturn -1.0 + 2.0 * fract(\n            sin(\n                vec2(\n                    dot(p, vec2(127.1, 311.7)),\n                    dot(p, vec2(269.5, 183.3))\n                )\n            ) * 43758.5453123\n        );\n}\n\n\nfloat noise(vec2 p) {\n\n    vec2 i = floor(p);\n    vec2 f = fract(p);\n\n\n    float a1 = dot(random(i), f);\n    float a2 = dot(random(i + vec2(1., 0.)), f + vec2(-1., 0.));\n    float a3 = dot(random(i + vec2(1., 1.)), f + vec2(-1., -1.));\n    float a4 = dot(random(i + vec2(0., 1.)), f + vec2(0., -1.));\n\n\n    vec2 w = smoothstep(0., 1., f);\n    return mix(\n        mix(a1, a2, w.x),\n        mix(a4, a3, w.x),\n        w.y\n    );\n}\n\nconst int FBM_NUM = 5;\nconst float FREQ = 2.;\nfloat fbm(vec2 p, vec2 cellScale) {\n    float f = 0.0;\n    float a = 1.0;\n    p *= cellScale;\n\n    for (int i = 0; i < FBM_NUM; i++) {\n        f += a * noise(p);\n        p *= FREQ;\n        a /= FREQ;\n    }\n    return f;\n}\n"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(624),r="\n#define SHADER_NAME FogShader-fragment-shader\nprecision highp float;\n\nconst float PI = 3.141592653589793;\n\n\nuniform vec2 uRange;\n\n\nuniform vec3 uFogEdge;\n\nuniform sampler2D uSampler;\nuniform sampler2D uDepthSampler;\nuniform sampler2D uSkySampler;\nuniform vec4 uSkyInfo;\nuniform vec4 uViewInfo;\nuniform float uSkyBrightness;\nuniform vec4 uFogColor;\nuniform vec4 uSkyColor;\n\nvarying vec2 vPosition;\n\nfloat LinearizeDepth(float depth) {\n    float near = 0.1;\n    float far = 100.0;\n    float z = depth * 2.0 - 1.0;\n    return (2.0 * near) / (far + near - z * (far - near));\n}\n\nfloat getDepthFromY(float y) {\n\t\n\treturn min(uFogEdge.z + (uFogEdge.y - uFogEdge.z) * y / uFogEdge.x, 1.);\n}\n\nfloat getCoordByDisplay(float value, float max, float displayType) {\n\t\n\treturn mix(\n\t\tvalue / max,\n\t\tmix(\n\t\t\tvalue,\n\t\t\tfract(value / max),\n\t\t\tstep(2.0, displayType)\n\t\t),\n\t\tstep(1.0, displayType)\n\t);\n}\n\n"+i.gradientNoise+"\n\nvoid main() {\n\tvec2 texCoord = (vPosition + vec2(1.0)) / 2.0;\n\n\t\n\tfloat depth = texture2D(uDepthSampler, texCoord).x;\n\n\t\n\tdepth = min(getDepthFromY(vPosition.y), depth);\n\t\n\n\t\n\tfloat fogFactor = mix(\n\t\tsmoothstep(getDepthFromY(uFogEdge.x - uRange.x), uFogEdge.y, depth),\n\t\t1. - smoothstep(uFogEdge.y, getDepthFromY(uFogEdge.x + uRange.y), depth),\n\t\tstep(uFogEdge.y, depth)\n\t);\n\n\t\n\t\n\tvec4 sceneColor = vec4(0.);\n\n\t\n\nfloat edgeY = (uFogEdge.x + 1.) / 2.;\nfloat x = fract((vPosition.x * uViewInfo.y + uViewInfo.x) / 2. / PI);\nvec2 skyCoord = vec2(\n\tgetCoordByDisplay(x, uSkyInfo.x * uViewInfo.y / PI, uSkyInfo.z),\n\tgetCoordByDisplay((texCoord.y - edgeY) / (1.0 - edgeY), uSkyInfo.y / (1.0 - edgeY), uSkyInfo.w)\n);\nvec4 skyColor = mix(\n\tuSkyColor,\n\ttexture2D(uSkySampler, skyCoord),\n\tstep(0.001, uSkyInfo.x * uSkyInfo.y)\n);\n\n\nvec2 p = vec2(texCoord.x - uViewInfo.w + uViewInfo.x / uViewInfo.y / 2., texCoord.y - edgeY);\nfloat mask = smoothstep(0., 0.5, p.y);\nfloat n = mix(\n\t0.,\n\tmax(0., fbm(p, vec2(2., 4.)) * mask),\n\tuViewInfo.z\n);\nvec4 skyWithCloud = vec4(mix(skyColor.rgb, vec3(1.0), n) * uSkyBrightness, skyColor.a);\n\n\t\n\t\n\tvec4 bgColor = mix(sceneColor, skyWithCloud, step(uFogEdge.y, depth));\n\n\t\n\t\n\tvec4 blendColor = mix(bgColor, uFogColor, fogFactor);\n\t\n\t\n\t\n\n\tgl_FragColor = mix(\n\t\tblendColor,\n\t\tsceneColor,\n\t\tfloat(vPosition.y < uFogEdge.x - uRange.x)\n\t);\n}\n";e.default={v:"\n#define SHADER_NAME FogShader-vertex-shader\nattribute vec2 aClipSpacePosition;\nvarying vec2 vPosition;\n\n\nuniform vec2 uRange;\n\nuniform vec3 uFogEdge;\n\nvoid main() {\n\tfloat bottom = uFogEdge.x - uRange.x;\n\tfloat y = mix(\n\t\tbottom,\n\t\taClipSpacePosition.y,\n\t\tstep(0., aClipSpacePosition.y)\n\t);\n\tvPosition = vec2(aClipSpacePosition.x, y);\n\t\n\tgl_Position = vec4(vPosition, 1.0, 1.0);\n}\n",f:r,name:"fog"}},function(t,e,n){"use strict";function i(t){return{v:"\n\t#define SHADER_NAME FXAA3Shader-vertex-shader\n\tattribute vec2 aClipSpacePosition;\n\n\tvoid main() {\n\tgl_Position = vec4(aClipSpacePosition, 1.0, 1.0);\n\t}\n\t",f:"\n\t#define SHADER_NAME FXAA3Shader-fragment-shader\n\tprecision highp float;\n\n\t"+(0,r.getFxaaFunPart)(t)+"\n\n\n\tuniform vec2 uResolution;\n\tuniform sampler2D uSampler;\n\tuniform bool uEnabled;\n\n\tconst float fxaaQualitySubpix = 0.5;\n\tconst float fxaaQualityEdgeThreshold = 0.125;\n\tconst float fxaaQualityEdgeThresholdMin = 0.0833;\n\n\tvoid main()\n\t{\n\t\tvec2 v_textureCoordinates = vec2(gl_FragCoord.xy / uResolution.xy);\n\t\tvec2 fxaaQualityRcpFrame = vec2(1.0) / uResolution.xy;\n\t\tvec4 color = texture2D(uSampler, v_textureCoordinates);\n\n\t\tcolor.rgb = mix(color.rgb,\n\t\tFxaaPixelShader(\n\t\t\tv_textureCoordinates,\n\t\t\tuSampler,\n\t\t\tfxaaQualityRcpFrame,\n\t\t\tfxaaQualitySubpix,\n\t\t\tfxaaQualityEdgeThreshold,\n\t\t\tfxaaQualityEdgeThresholdMin\n\t\t).rgb,\n\t\tfloat(uEnabled)\n\t\t);\n\t\tgl_FragColor = color;\n\t}",name:"fxaa3"}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var r=n(627)},function(t,e,n){"use strict";/**
 * @license
 * Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 *  * Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 *  * Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 *  * Neither the name of NVIDIA CORPORATION nor the names of its
 *    contributors may be used to endorse or promote products derived
 *    from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function i(t){return"\n    #define FXAA_QUALITY_PRESET "+t+"\n\n    #if (FXAA_QUALITY_PRESET == 10)\n        #define FXAA_QUALITY_PS 3\n        #define FXAA_QUALITY_P0 1.5\n        #define FXAA_QUALITY_P1 3.0\n        #define FXAA_QUALITY_P2 12.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 11)\n        #define FXAA_QUALITY_PS 4\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 3.0\n        #define FXAA_QUALITY_P3 12.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 12)\n        #define FXAA_QUALITY_PS 5\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 4.0\n        #define FXAA_QUALITY_P4 12.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 13)\n        #define FXAA_QUALITY_PS 6\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 2.0\n        #define FXAA_QUALITY_P4 4.0\n        #define FXAA_QUALITY_P5 12.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 14)\n        #define FXAA_QUALITY_PS 7\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 2.0\n        #define FXAA_QUALITY_P4 2.0\n        #define FXAA_QUALITY_P5 4.0\n        #define FXAA_QUALITY_P6 12.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 15)\n        #define FXAA_QUALITY_PS 8\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 2.0\n        #define FXAA_QUALITY_P4 2.0\n        #define FXAA_QUALITY_P5 2.0\n        #define FXAA_QUALITY_P6 4.0\n        #define FXAA_QUALITY_P7 12.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 20)\n        #define FXAA_QUALITY_PS 3\n        #define FXAA_QUALITY_P0 1.5\n        #define FXAA_QUALITY_P1 2.0\n        #define FXAA_QUALITY_P2 8.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 21)\n        #define FXAA_QUALITY_PS 4\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 8.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 22)\n        #define FXAA_QUALITY_PS 5\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 2.0\n        #define FXAA_QUALITY_P4 8.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 23)\n        #define FXAA_QUALITY_PS 6\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 2.0\n        #define FXAA_QUALITY_P4 2.0\n        #define FXAA_QUALITY_P5 8.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 24)\n        #define FXAA_QUALITY_PS 7\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 2.0\n        #define FXAA_QUALITY_P4 2.0\n        #define FXAA_QUALITY_P5 3.0\n        #define FXAA_QUALITY_P6 8.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 25)\n        #define FXAA_QUALITY_PS 8\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 2.0\n        #define FXAA_QUALITY_P4 2.0\n        #define FXAA_QUALITY_P5 2.0\n        #define FXAA_QUALITY_P6 4.0\n        #define FXAA_QUALITY_P7 8.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 26)\n        #define FXAA_QUALITY_PS 9\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 2.0\n        #define FXAA_QUALITY_P4 2.0\n        #define FXAA_QUALITY_P5 2.0\n        #define FXAA_QUALITY_P6 2.0\n        #define FXAA_QUALITY_P7 4.0\n        #define FXAA_QUALITY_P8 8.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 27)\n        #define FXAA_QUALITY_PS 10\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 2.0\n        #define FXAA_QUALITY_P4 2.0\n        #define FXAA_QUALITY_P5 2.0\n        #define FXAA_QUALITY_P6 2.0\n        #define FXAA_QUALITY_P7 2.0\n        #define FXAA_QUALITY_P8 4.0\n        #define FXAA_QUALITY_P9 8.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 28)\n        #define FXAA_QUALITY_PS 11\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 2.0\n        #define FXAA_QUALITY_P4 2.0\n        #define FXAA_QUALITY_P5 2.0\n        #define FXAA_QUALITY_P6 2.0\n        #define FXAA_QUALITY_P7 2.0\n        #define FXAA_QUALITY_P8 2.0\n        #define FXAA_QUALITY_P9 4.0\n        #define FXAA_QUALITY_P10 8.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 29)\n        #define FXAA_QUALITY_PS 12\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 2.0\n        #define FXAA_QUALITY_P4 2.0\n        #define FXAA_QUALITY_P5 2.0\n        #define FXAA_QUALITY_P6 2.0\n        #define FXAA_QUALITY_P7 2.0\n        #define FXAA_QUALITY_P8 2.0\n        #define FXAA_QUALITY_P9 2.0\n        #define FXAA_QUALITY_P10 4.0\n        #define FXAA_QUALITY_P11 8.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 39)\n        #define FXAA_QUALITY_PS 12\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.0\n        #define FXAA_QUALITY_P2 1.0\n        #define FXAA_QUALITY_P3 1.0\n        #define FXAA_QUALITY_P4 1.0\n        #define FXAA_QUALITY_P5 1.5\n        #define FXAA_QUALITY_P6 2.0\n        #define FXAA_QUALITY_P7 2.0\n        #define FXAA_QUALITY_P8 2.0\n        #define FXAA_QUALITY_P9 2.0\n        #define FXAA_QUALITY_P10 4.0\n        #define FXAA_QUALITY_P11 8.0\n    #endif\n\n    #define FxaaBool bool\n    #define FxaaFloat float\n    #define FxaaFloat2 vec2\n    #define FxaaFloat3 vec3\n    #define FxaaFloat4 vec4\n    #define FxaaHalf float\n    #define FxaaHalf2 vec2\n    #define FxaaHalf3 vec3\n    #define FxaaHalf4 vec4\n    #define FxaaInt2 vec2\n    #define FxaaTex sampler2D\n\n    #define FxaaSat(x) clamp(x, 0.0, 1.0)\n    #define FxaaTexTop(t, p) texture2D(t, p)\n    #define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r))\n\n    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }\n\n    FxaaFloat4 FxaaPixelShader(\n\n\n\n        FxaaFloat2 pos,\n\n\n\n\n\n        FxaaTex tex,\n\n\n\n\n\n        FxaaFloat2 fxaaQualityRcpFrame,\n\n\n\n\n\n\n\n\n\n\n\n        FxaaFloat fxaaQualitySubpix,\n\n\n\n\n\n\n\n\n\n\n        FxaaFloat fxaaQualityEdgeThreshold,\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n        FxaaFloat fxaaQualityEdgeThresholdMin\n    ) {\n    /*--------------------------------------------------------------------------*/\n        FxaaFloat2 posM;\n        posM.x = pos.x;\n        posM.y = pos.y;\n        FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);\n        #define lumaM rgbyM.y\n        FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));\n        FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));\n        FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));\n        FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));\n    /*--------------------------------------------------------------------------*/\n        FxaaFloat maxSM = max(lumaS, lumaM);\n        FxaaFloat minSM = min(lumaS, lumaM);\n        FxaaFloat maxESM = max(lumaE, maxSM);\n        FxaaFloat minESM = min(lumaE, minSM);\n        FxaaFloat maxWN = max(lumaN, lumaW);\n        FxaaFloat minWN = min(lumaN, lumaW);\n        FxaaFloat rangeMax = max(maxWN, maxESM);\n        FxaaFloat rangeMin = min(minWN, minESM);\n        FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;\n        FxaaFloat range = rangeMax - rangeMin;\n        FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);\n        FxaaBool earlyExit = range < rangeMaxClamped;\n    /*--------------------------------------------------------------------------*/\n        if(earlyExit)\n            return rgbyM;\n    /*--------------------------------------------------------------------------*/\n        FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));\n        FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));\n        FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));\n        FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));\n    /*--------------------------------------------------------------------------*/\n        FxaaFloat lumaNS = lumaN + lumaS;\n        FxaaFloat lumaWE = lumaW + lumaE;\n        FxaaFloat subpixRcpRange = 1.0/range;\n        FxaaFloat subpixNSWE = lumaNS + lumaWE;\n        FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;\n        FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;\n    /*--------------------------------------------------------------------------*/\n        FxaaFloat lumaNESE = lumaNE + lumaSE;\n        FxaaFloat lumaNWNE = lumaNW + lumaNE;\n        FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;\n        FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;\n    /*--------------------------------------------------------------------------*/\n        FxaaFloat lumaNWSW = lumaNW + lumaSW;\n        FxaaFloat lumaSWSE = lumaSW + lumaSE;\n        FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);\n        FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);\n        FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;\n        FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;\n        FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;\n        FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;\n    /*--------------------------------------------------------------------------*/\n        FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;\n        FxaaFloat lengthSign = fxaaQualityRcpFrame.x;\n        FxaaBool horzSpan = edgeHorz >= edgeVert;\n        FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;\n    /*--------------------------------------------------------------------------*/\n        if(!horzSpan) lumaN = lumaW;\n        if(!horzSpan) lumaS = lumaE;\n        if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;\n        FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;\n    /*--------------------------------------------------------------------------*/\n        FxaaFloat gradientN = lumaN - lumaM;\n        FxaaFloat gradientS = lumaS - lumaM;\n        FxaaFloat lumaNN = lumaN + lumaM;\n        FxaaFloat lumaSS = lumaS + lumaM;\n        FxaaBool pairN = abs(gradientN) >= abs(gradientS);\n        FxaaFloat gradient = max(abs(gradientN), abs(gradientS));\n        if(pairN) lengthSign = -lengthSign;\n        FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);\n    /*--------------------------------------------------------------------------*/\n        FxaaFloat2 posB;\n        posB.x = posM.x;\n        posB.y = posM.y;\n        FxaaFloat2 offNP;\n        offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;\n        offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;\n        if(!horzSpan) posB.x += lengthSign * 0.5;\n        if( horzSpan) posB.y += lengthSign * 0.5;\n    /*--------------------------------------------------------------------------*/\n        FxaaFloat2 posN;\n        posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;\n        posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;\n        FxaaFloat2 posP;\n        posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;\n        posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;\n        FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;\n        FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));\n        FxaaFloat subpixE = subpixC * subpixC;\n        FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));\n    /*--------------------------------------------------------------------------*/\n        if(!pairN) lumaNN = lumaSS;\n        FxaaFloat gradientScaled = gradient * 1.0/4.0;\n        FxaaFloat lumaMM = lumaM - lumaNN * 0.5;\n        FxaaFloat subpixF = subpixD * subpixE;\n        FxaaBool lumaMLTZero = lumaMM < 0.0;\n    /*--------------------------------------------------------------------------*/\n        lumaEndN -= lumaNN * 0.5;\n        lumaEndP -= lumaNN * 0.5;\n        FxaaBool doneN = abs(lumaEndN) >= gradientScaled;\n        FxaaBool doneP = abs(lumaEndP) >= gradientScaled;\n        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;\n        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;\n        FxaaBool doneNP = (!doneN) || (!doneP);\n        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;\n        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;\n    /*--------------------------------------------------------------------------*/\n        if(doneNP) {\n            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n            doneN = abs(lumaEndN) >= gradientScaled;\n            doneP = abs(lumaEndP) >= gradientScaled;\n            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;\n            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;\n            doneNP = (!doneN) || (!doneP);\n            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;\n            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;\n    /*--------------------------------------------------------------------------*/\n            #if (FXAA_QUALITY_PS > 3)\n            if(doneNP) {\n                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                doneN = abs(lumaEndN) >= gradientScaled;\n                doneP = abs(lumaEndP) >= gradientScaled;\n                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;\n                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;\n                doneNP = (!doneN) || (!doneP);\n                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;\n                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;\n    /*--------------------------------------------------------------------------*/\n                #if (FXAA_QUALITY_PS > 4)\n                if(doneNP) {\n                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                    doneN = abs(lumaEndN) >= gradientScaled;\n                    doneP = abs(lumaEndP) >= gradientScaled;\n                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;\n                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;\n                    doneNP = (!doneN) || (!doneP);\n                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;\n                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;\n    /*--------------------------------------------------------------------------*/\n                    #if (FXAA_QUALITY_PS > 5)\n                    if(doneNP) {\n                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                        doneN = abs(lumaEndN) >= gradientScaled;\n                        doneP = abs(lumaEndP) >= gradientScaled;\n                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;\n                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;\n                        doneNP = (!doneN) || (!doneP);\n                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;\n                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;\n    /*--------------------------------------------------------------------------*/\n                        #if (FXAA_QUALITY_PS > 6)\n                        if(doneNP) {\n                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                            doneN = abs(lumaEndN) >= gradientScaled;\n                            doneP = abs(lumaEndP) >= gradientScaled;\n                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;\n                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;\n                            doneNP = (!doneN) || (!doneP);\n                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;\n                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;\n    /*--------------------------------------------------------------------------*/\n                            #if (FXAA_QUALITY_PS > 7)\n                            if(doneNP) {\n                                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                                doneN = abs(lumaEndN) >= gradientScaled;\n                                doneP = abs(lumaEndP) >= gradientScaled;\n                                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;\n                                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;\n                                doneNP = (!doneN) || (!doneP);\n                                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;\n                                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;\n    /*--------------------------------------------------------------------------*/\n        #if (FXAA_QUALITY_PS > 8)\n        if(doneNP) {\n            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n            doneN = abs(lumaEndN) >= gradientScaled;\n            doneP = abs(lumaEndP) >= gradientScaled;\n            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;\n            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;\n            doneNP = (!doneN) || (!doneP);\n            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;\n            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;\n    /*--------------------------------------------------------------------------*/\n            #if (FXAA_QUALITY_PS > 9)\n            if(doneNP) {\n                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                doneN = abs(lumaEndN) >= gradientScaled;\n                doneP = abs(lumaEndP) >= gradientScaled;\n                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;\n                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;\n                doneNP = (!doneN) || (!doneP);\n                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;\n                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;\n    /*--------------------------------------------------------------------------*/\n                #if (FXAA_QUALITY_PS > 10)\n                if(doneNP) {\n                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                    doneN = abs(lumaEndN) >= gradientScaled;\n                    doneP = abs(lumaEndP) >= gradientScaled;\n                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;\n                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;\n                    doneNP = (!doneN) || (!doneP);\n                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;\n                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;\n    /*--------------------------------------------------------------------------*/\n                    #if (FXAA_QUALITY_PS > 11)\n                    if(doneNP) {\n                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                        doneN = abs(lumaEndN) >= gradientScaled;\n                        doneP = abs(lumaEndP) >= gradientScaled;\n                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;\n                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;\n                        doneNP = (!doneN) || (!doneP);\n                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;\n                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;\n    /*--------------------------------------------------------------------------*/\n                        #if (FXAA_QUALITY_PS > 12)\n                        if(doneNP) {\n                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                            doneN = abs(lumaEndN) >= gradientScaled;\n                            doneP = abs(lumaEndP) >= gradientScaled;\n                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;\n                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;\n                            doneNP = (!doneN) || (!doneP);\n                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;\n                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;\n    /*--------------------------------------------------------------------------*/\n                        }\n                        #endif\n    /*--------------------------------------------------------------------------*/\n                    }\n                    #endif\n    /*--------------------------------------------------------------------------*/\n                }\n                #endif\n    /*--------------------------------------------------------------------------*/\n            }\n            #endif\n    /*--------------------------------------------------------------------------*/\n        }\n        #endif\n    /*--------------------------------------------------------------------------*/\n                            }\n                            #endif\n    /*--------------------------------------------------------------------------*/\n                        }\n                        #endif\n    /*--------------------------------------------------------------------------*/\n                    }\n                    #endif\n    /*--------------------------------------------------------------------------*/\n                }\n                #endif\n    /*--------------------------------------------------------------------------*/\n            }\n            #endif\n    /*--------------------------------------------------------------------------*/\n        }\n    /*--------------------------------------------------------------------------*/\n        FxaaFloat dstN = posM.x - posN.x;\n        FxaaFloat dstP = posP.x - posM.x;\n        if(!horzSpan) dstN = posM.y - posN.y;\n        if(!horzSpan) dstP = posP.y - posM.y;\n    /*--------------------------------------------------------------------------*/\n        FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;\n        FxaaFloat spanLength = (dstP + dstN);\n        FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;\n        FxaaFloat spanLengthRcp = 1.0/spanLength;\n    /*--------------------------------------------------------------------------*/\n        FxaaBool directionN = dstN < dstP;\n        FxaaFloat dst = min(dstN, dstP);\n        FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;\n        FxaaFloat subpixG = subpixF * subpixF;\n        FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;\n        FxaaFloat subpixH = subpixG * fxaaQualitySubpix;\n    /*--------------------------------------------------------------------------*/\n        FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;\n        FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);\n        if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;\n        if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;\n        return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);\n\t}"}Object.defineProperty(e,"__esModule",{value:!0}),e.getFxaaFunPart=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={v:"#version 300 es\n#define SHADER_NAME gaussianblur-vertex-shader\nin vec2 aClipSpacePosition;\nout vec2 vTexCoord;\n\nvoid main() {\n  vTexCoord = (aClipSpacePosition + 1.0) / 2.0;\n  gl_Position = vec4(aClipSpacePosition, 0., 1.);\n}\n",f:"#version 300 es\n#define SHADER_NAME gaussianblur-fragment-shader\nprecision highp float;\n\nout vec4 fragColor;\nin vec2 vTexCoord;\n\nuniform sampler2D uSampler;\nuniform bool uHorizontal;\nuniform vec2 uResolution;\n\nconst float offset[3] = float[](0.0, 1.3846153846, 3.2307692308);\nconst float weight[3] = float[](0.2270270270, 0.3162162162, 0.0702702703);\nconst int count = 3;\n\nvoid main()\n{             \n    vec2 tex_offset = 1.0 / uResolution;\n    vec3 result = texture(uSampler, vTexCoord).rgb * weight[0];\n    if(uHorizontal)\n    {\n        for(int i = 1; i < count; ++i)\n        {\n            result += texture(uSampler, vTexCoord + vec2(tex_offset.x * offset[i], 0.0)).rgb * weight[i];\n            result += texture(uSampler, vTexCoord - vec2(tex_offset.x * offset[i], 0.0)).rgb * weight[i];\n        }\n    }\n    else\n    {\n        for(int i = 1; i < count; ++i)\n        {\n            result += texture(uSampler, vTexCoord + vec2(0.0, tex_offset.y * offset[i])).rgb * weight[i];\n            result += texture(uSampler, vTexCoord - vec2(0.0, tex_offset.y * offset[i])).rgb * weight[i];\n        }\n    }\n    fragColor = vec4(result, 1.0);\n\n}\n",name:"gaussianblur"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.grayShader=void 0;var i=n(492),r="\n  "+i.imageVertex+"\n";e.grayShader={v:r,f:"\nprecision mediump float;\n\nuniform float u_opacity;\nuniform sampler2D u_sampler;\nuniform sampler2D u_samplerColorMap;\nuniform float u_hasColorMap;\nvarying vec2 v_texCoord;\nuniform float u_usePicking;\nvoid main() {\n \n  vec4 color = texture2D(u_sampler, v_texCoord);\n\n\n\n  vec4 finalColor = mix(\n    color,\n    texture2D(u_samplerColorMap, vec2({RGBA_FORMATTER}, 0.5)),\n    step(u_usePicking, 0.5) * step(0.5,u_hasColorMap)\n  );\n  gl_FragColor = finalColor * u_opacity;\n}\n",name:"instance_gray"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={v:"\n#define SHADER_NAME highlight-vertex-shader\nattribute vec2 aClipSpacePosition;\n\nvoid main() {\n  gl_Position = vec4(aClipSpacePosition, 0., 1.);\n}\n",f:"\n#define SHADER_NAME highlight-fragment-shader\nprecision highp float;\n\nuniform vec4 uColor;\n\nvoid main() {\n  gl_FragColor = uColor;\n}\n",name:"highlight"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sphereShader=e.defaultShader=void 0;var i=n(222),r=n(492),a="\n  "+r.imageVertex+"\n",o=(e.defaultShader={v:a,f:"\nprecision mediump float;\n\nuniform float u_opacity;\nuniform sampler2D u_sampler;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n\tvec4 color = texture2D(u_sampler, v_texCoord);\n\t\n\tgl_FragColor = color * u_opacity;\n}\n",name:"instance_tex"},"\nattribute vec2 a_position;\n\nuniform mat4 u_matrix;\nuniform vec2 u_size;\nuniform vec4 u_texInfo;\nuniform vec3 u_mercator;\nuniform float u_ratio;\n\n"+i.UNIFORM_PART+"\n\nvarying vec2 v_texCoord;\nvarying vec4 v_debug;\n\n"+i.PROJECTION_PART+"\n\nvoid main() {\n\t\n  v_texCoord = u_texInfo.xy + a_position * u_texInfo.zw;\n\n\n  vec2 position = vec2(a_position.x, 1. - a_position.y) * u_size;\n\n\n  vec2 point = (position + u_mercator.xy) / pow(2., u_mercator.z);\n\n\n  vec2 latlng = fromPointToLatLng(point);\n\n  vec4 posOnPlane= u_matrix * vec4(a_position.x * u_size.x, (a_position.y - 1.) * u_size.y, 0.0, 1.0);\n  vec4 posOnSphere = uMatrix * project_view_sphere_position(latlng);\n  gl_Position = mix(posOnPlane, posOnSphere, u_ratio);\n\n\n\n\n}\n");e.sphereShader={v:o,f:"\nprecision mediump float;\n\nuniform float u_opacity;\nuniform sampler2D u_sampler;\nuniform float u_wireframe;\n\nvarying vec2 v_texCoord;\nvarying vec4 v_debug;\n\nvoid main() {\n\tvec4 color = texture2D(u_sampler, v_texCoord) * u_opacity;\n  \n  gl_FragColor = mix(\n    color,\n    vec4(1., 0., 0., .6),\n    u_wireframe\n  );\n  \n\n}\n",name:"instance_tex_sphere"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(222),r="\n#define SHADER_NAME indoor-mask-vertex-shader\n\nattribute vec3 aPosition;\n\n"+i.UNIFORM_PART+"\nuniform vec4 uRelativeCenter;\n\n"+i.PROJECTION_PART+"\n\nvoid main(void) {\n\tvec3 maskCenterPoint = vec3(project_view_local_position_precision(uRelativeCenter.xy, uRelativeCenter.zw), 0.0);\n\tgl_Position = uMatrix * vec4(maskCenterPoint + project_scale(aPosition), 1.0);\n}\n";e.default={v:r,f:"\n#define SHADER_NAME mask-fragment-shader\nprecision mediump float;\n\nuniform vec4 uColor;\n\nvoid main(void) {\n\tgl_FragColor = uColor;\n}\n",name:"indoor-mask"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(222),r=n(284),a="\n#define SHADER_NAME indoor-vertex-shader\n\nattribute vec3 aPosition;\nattribute vec3 aColor;\nattribute vec3 aNormal;\n\n"+i.UNIFORM_PART+"\n"+r.LIGHT_UNIFORM+"\nuniform vec4 uRelativeCenter;\n\nvarying vec3 vColor;\n\n"+r.LIGHT_VARYING+"\n\n"+i.PROJECTION_PART+"\n"+r.LIGHT_VERTEX+"\n\nvoid main(void) {\n\tvec3 relativeCenterPoint = vec3(project_view_local_position_precision(uRelativeCenter.xy, uRelativeCenter.zw), 0.0);\n\tvec3 worldspaceCoord = relativeCenterPoint + project_scale(aPosition);\n\tgl_Position = uMatrix * vec4(worldspaceCoord, 1.0);\n\n\tlighting_apply_on_vertex(worldspaceCoord, aNormal, mat4(1.0));\n\n\tvColor = aColor / 255.;\n}\n",o="\n#define SHADER_NAME indoor-fragment-shader\nprecision mediump float;\n\nvarying vec3 vColor;\n\n"+r.LIGHT_VARYING+"\n"+r.LIGHT_FRAG+"\n\nvoid main(void) {\n\tgl_FragColor = lighting_apply_on_color(vec4(vColor, 1.));\n}\n";e.default={v:a,f:o,name:"indoor"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(222),r=n(284),a="\n#define SHADER_NAME indoor-vertex-shader\n\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec3 aColor;\n\nattribute vec2 aInstanceCoord;\nattribute vec4 aInstanceInfo;\n\n"+i.UNIFORM_PART+"\n"+r.LIGHT_UNIFORM+"\nuniform vec4 uRelativeCenter;\nuniform bool uEnableLighting;\nuniform vec3 uBoxMin;\nuniform vec3 uBoxMax;\n\nvarying vec3 vColor;\n"+r.LIGHT_VARYING+"\n\n"+i.PROJECTION_PART+"\n"+r.LIGHT_VERTEX+"\n\nmat3 rotateZ(float deg){\n    float rad = degreeToRadian(deg);\n    return mat3(\n        vec3(cos(rad), -sin(rad), 0.),\n        vec3(sin(rad), cos(rad), 0.),\n        vec3(0., 0., 1.)\n    );\n}\n\nmat3 rotateX(float deg){\n    float rad = degreeToRadian(deg);\n    return mat3(\n        vec3(1.0, 0.0, 0.0),\n        vec3(0.0, cos(rad), -sin(rad)),\n        vec3(0.0, sin(rad), cos(rad))\n    );\n}\n\nvoid main(void) {\n\n\tmat3 modelMatrix = rotateZ(-aInstanceInfo.w);\n\n\n\tvec3 modelNormal = rotateX(-90.0) * aNormal;\n\tmodelNormal = modelMatrix * modelNormal;\n\n\n    vec3 relativeCenterPoint = vec3(project_view_local_position_precision(uRelativeCenter.xy, uRelativeCenter.zw), 0.0);\n    vec3 modelCenterPoint = relativeCenterPoint + project_scale(vec3(aInstanceCoord, 0.0));\n\n\n\n    float scale = pow(2.0, uZoom - 20.0);\n    vec3 modelSize = vec3(aInstanceInfo.xy * scale, aInstanceInfo.z * uPixelsPerMeter.z);\n    vec3 localPosition = modelMatrix * (aPosition * modelSize / (uBoxMax - uBoxMin));\n    \n\n    vec3 worldspaceCoord = modelCenterPoint + localPosition;\n\n    gl_Position = uMatrix * vec4(worldspaceCoord, 1.0);\n\n    lighting_apply_on_vertex(worldspaceCoord, modelNormal, mat4(1.0));\n    \n\n    vColor = aColor / 255.;\n}\n",o="\n#define SHADER_NAME indoor-fragment-shader\nprecision mediump float;\n\nvarying vec3 vColor;\n"+r.LIGHT_VARYING+"\n"+r.LIGHT_FRAG+"\n\nvoid main(void) {\n\tgl_FragColor = lighting_apply_on_color(vec4(vColor, 1.));\n}\n";e.default={v:a,f:o,name:"instance_escalator"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(222),r=n(301);e.default={v:"#version 300 es\n\t\t#define SHADER_NAME instance-polyline-vertex-shader\n\t\t\n\t\t\n\t\tin vec2 positions;\n\t\t\n\t\tin vec3 instanceStartPositions;\n\t\tin vec3 instanceEndPositions;\n\t\tin vec3 instanceLeftDeltas;\n\t\tin vec3 instanceRightDeltas;\n\t\tin vec4 instanceStartEndPositions64xyLow;\n\t\tin float instanceWidths;\n\t\tin float instanceOriginWidths;\n\t\tin vec4 instanceColors;\n\t\tin vec4 instanceLineInfo;\n\t\tin vec4 instanceArrowInfo;\n\t\tin float instanceArrowStartPositions;\n\t\tin float instanceDashStartPositions;\n\t\t\n\t\t\n\t\tin vec3 instancePickingColors;\n\t\t\n\t\tuniform float u_enableGeodesic;\n\t\t\n\t\tuniform float u_isBorder;\n\t\tuniform float u_widthScale;\n\t\tuniform float u_widthMinPixels;\n\t\tuniform float u_widthMaxPixels;\n\t\tuniform float u_miterLimit;\n    uniform vec2 uProject_uDegreePerPixels;\n\n\t\tuniform float u_lineJoin;\n\t\t\n\t\tuniform float u_opacity;\n\n\t\tconst float EPSILON = 0.001;\n\t\tconst float PIXEL_EPSILON = 0.1;\n\t\t\n\t\t"+i.UNIFORM_PART+"\n\t\t\n\t\t\n\t\tout vec4 vColor;\n\t\t\n\t\tout vec4 vLineInfo;\n\t\tout vec3 vPickingColor;\n\t\t\n\t\t\n\n\t\tout vec4 vClipArray;\n\t\tout vec3 vDashArray;\n\t\tout vec4 vArrowArray;\n\n\t\tout vec4 vLineSegmentInfo;\n\t\tout vec4 vTrimDirection;\n\n\t\tout vec4 vOriginInfo;\n\n\t\t\n\t\t"+i.PROJECTION_PART+' \n\t\t\n\t\t\n\t\tvec2 calculateTangent(vec3 prevPoint, vec3 currPoint, vec3 nextPoint) {\n\t\t\tvec2 deltaA = currPoint.xy - prevPoint.xy;\n\t\t\tvec2 deltaB = nextPoint.xy - currPoint.xy;\n\t\n\t\t\tfloat lenA = length(deltaA);\n\t\t\tfloat lenB = length(deltaB);\n\t\n\t\t\tlenA = mix(0.0, lenA, step(PIXEL_EPSILON, lenA));\n\t\t\tlenB = mix(0.0, lenB, step(PIXEL_EPSILON, lenB));\n\n\n\t\t\tvec2 normalA = normalize(deltaA);\n\t\t\tvec2 normalB = normalize(deltaB);\n\t\t\tif (deltaA == vec2(0.0)) normalA = vec2(0.0);\n\t\t\tif (deltaB == vec2(0.0)) normalB = vec2(0.0);\n\t\t\t\n\t\t\tvec2 dirA = mix(vec2(0.0), normalA, step(PIXEL_EPSILON, lenA));\n\t\t\tvec2 dirB = mix(vec2(0.0), normalB, step(PIXEL_EPSILON, lenB));\n\n\t\t\t\n\t\t\tvec2 tangent = vec2(dirA + dirB);\n\t\t\ttangent = mix(vec2(0.0, 0.0), normalize(tangent), step(EPSILON, length(tangent)));\n\n\t\t\treturn tangent;\n\t\t}\n\t\t \n\t\tvec3 calculateLinePosition(vec3 prevPoint, vec3 currPoint, vec3 nextPoint) {\n\t\t\tfloat lineCap = instanceLineInfo.x;\n\t\t\tvDashArray.xy = instanceLineInfo.yz;\n\t\t\tvDashArray.z = instanceDashStartPositions;\n\t\t \n\t\t\tvLineSegmentInfo.x = lineCap;\n\n\t\t\tfloat isEnd = positions.x;\n\t\t\tfloat width = clamp(instanceWidths * uPixelsPerMeter[0] * u_widthScale, u_widthMinPixels, u_widthMaxPixels) / 2.0;\n\t\t\tvClipArray.x = width;\n\t\t\t\n\n\t\t\t\n\t\t\tfloat originWidth = clamp(instanceOriginWidths * uPixelsPerMeter[0] * u_widthScale, u_widthMinPixels, u_widthMaxPixels) / 2.0;\n\t\t\tvOriginInfo.z = originWidth;\n\t\t\tvLineSegmentInfo.w = instanceArrowStartPositions / originWidth;\n\n\t\t\tvec2 deltaA = currPoint.xy - prevPoint.xy;\n\t\t\tvec2 deltaB = nextPoint.xy - currPoint.xy;\n\t\n\t\t\tfloat lenA = length(deltaA);\n\t\t\tfloat lenB = length(deltaB);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tlenA = mix(mix(PIXEL_EPSILON, 0.0, step(THRESHOLD_ZOOM, uZoom)), lenA, step(PIXEL_EPSILON, lenA));\n\t\t\tlenB = mix(mix(PIXEL_EPSILON, 0.0, step(THRESHOLD_ZOOM, uZoom)), lenB, step(PIXEL_EPSILON, lenB));\n\n\t\t\t\n\t\t\tvec2 dirA = mix(vec2(0.0), normalize(deltaA), step(PIXEL_EPSILON, lenA));\n\t\t\tvec2 dirB = mix(vec2(0.0), normalize(deltaB), step(PIXEL_EPSILON, lenB));\n\t\n\t\t\t\n\t\t\tvec2 perpA = vec2(-dirA.y, dirA.x);\n\t\t\tvec2 perpB = vec2(-dirB.y, dirB.x);\n\t\n\t\t\t\n\t\t\tvec2 tangent = vec2(dirA + dirB);\n\t\t\ttangent = mix(perpA, normalize(tangent), step(EPSILON, length(tangent)));\n\t\n\t\t\t\n\t\t\tvec2 miterVec = vec2(-tangent.y, tangent.x);\n\n\t\t\t\n\t\t\tvec2 perp = mix(perpB, perpA, isEnd);\n\t\t\tfloat L = mix(lenB, lenA, isEnd);\n\t\t\tvOriginInfo.w = L + 2.0 * width;\n\n\t\t\t\n\t\t\t\n\t\t\t\n\t\n\t\t\t\n\t\t\tvec2 vertical_offset = perp * width * positions.y;\n\t\t\tvLineInfo.x = length(vertical_offset);\n\t\t\t\n\t\t\tbool isPathStart = isEnd < 0.5 && instanceLeftDeltas == vec3(0.0);\n\t\t\tbool isPathEnd = isEnd > 0.5 && instanceRightDeltas == vec3(0.0);\n\n\t\t\tvec2 dir = mix(dirB, dirA, isEnd);\n\t\t\tvLineSegmentInfo.y = float(isPathStart);\n\t\t\tvLineSegmentInfo.z = float(isPathEnd);\n\t\t\t\n\t\t\t\n\t\t\tvec2 horizontal_offset = vec2(0.0);\n\n\t\t\t\n\t\t\t\n\t\t\thorizontal_offset = mix(-dir, dir, isEnd) * width;\n\t\t\tvClipArray.y = L / width / 2.0;\n\t\t\tfloat capLength = mix(-1.0 - vClipArray.y, 1.0 + vClipArray.y, isEnd);\n\t\t\tvClipArray.zw = vec2(capLength, positions.y);\n\t\t\tvLineInfo.z = capLength;\n\n\t\t\t\n\n\t\t\t\n\t\t\tif ((isPathStart && !bool(isEnd)) || (isPathEnd && bool(isEnd))) {\n\t\t\t\tcapLength = mix(mix(-vClipArray.y, vClipArray.y, isEnd), capLength, step(0.1, lineCap));\n\t\t\t\tvClipArray.zw = mix(vec2(capLength, positions.y), vClipArray.zw, step(0.1, lineCap));\n\t\t\t\t\n\t\t\t\t\n\t\t\t\thorizontal_offset = mix(vec2(0.0), horizontal_offset, step(0.1, lineCap));\n\t\t\t\tvLineInfo.z = mix(mix(-vClipArray.y,  vClipArray.y, isEnd), vLineInfo.z, step(0.1, lineCap));\n\t\t \n\t\t\t}\n            vLineInfo.y = capLength;\n            vLineInfo.w = instanceLineInfo.w;\n\t\t\treturn currPoint + vec3(vertical_offset, 0.0) + vec3(horizontal_offset, 0.0);\n\t\t}\n\t\t\n\t\t\n\t\tvec2 getSegmentTangent(float isEnd, vec3 segmentDirection) {\n\t\t\t\n\t\t\tvec2 segmentX = mix(-segmentDirection.xy, segmentDirection.xy, isEnd);\n\t\t\tvec2 segmentY = vec2(-segmentX.y, segmentX.x);\n\t\n\t\t\t\n      vec3 localPosition_Start = project_view_local_position_precision( instanceStartPositions, instanceStartEndPositions64xyLow.xy);\n      vec3 localPosition_End = project_view_local_position_precision( instanceEndPositions, instanceStartEndPositions64xyLow.zw);\n      \n\t\t\tvec3 geodesic_Position_Start;\n      vec3 geodesic_Position_End;\n\n      geodesic_project_view_local_precision(instanceStartPositions, instanceStartEndPositions64xyLow.xy, instanceEndPositions, instanceStartEndPositions64xyLow.zw, geodesic_Position_Start, geodesic_Position_End, uProject_uDegreePerPixels);\n     \n      vec3 startLocalPosition = mix(localPosition_Start, geodesic_Position_Start,u_enableGeodesic);\n      vec3 endLocalPosition = mix(localPosition_End, geodesic_Position_End,u_enableGeodesic);\n\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t    \n\t\t\tvec3 prevPosition = instanceStartPositions;\n\t\t\tvec2 prevPosition64xyLow = instanceStartEndPositions64xyLow.xy;\n      vec3 prevStartLinesPosition_Start;\n      vec3 prevStartLinesPosition_Start_Temp;\n      vec3 prevStartLinesPosition_End;\n      \n      vec3 lefDeltaByEnd = mix(instanceLeftDeltas, vec3(0.0), isEnd);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n      geodesic_project_view_local_precision(prevPosition - mix(lefDeltaByEnd, vec3(0.0), step(THRESHOLD_ZOOM, uZoom)), prevPosition64xyLow - mix(vec3(0.0), lefDeltaByEnd, step(THRESHOLD_ZOOM, uZoom)).xy, instanceStartPositions, instanceStartEndPositions64xyLow.xy, prevStartLinesPosition_Start_Temp, prevStartLinesPosition_End, uProject_uDegreePerPixels);\n      prevStartLinesPosition_Start = mix( prevStartLinesPosition_Start_Temp,startLocalPosition, isEnd);\n\n\t\t\tprevPosition  = mix(project_view_local_position_precision(\n\t\t\t\tprevPosition  - mix(lefDeltaByEnd, vec3(0.0), step(THRESHOLD_ZOOM, uZoom)), prevPosition64xyLow  - mix(vec3(0.0), lefDeltaByEnd, step(THRESHOLD_ZOOM, uZoom)).xy\n\t\t\t),prevStartLinesPosition_Start,u_enableGeodesic);\n\n\t\t\tvec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n\t\t\tvec2 currPositionxy64Low = mix(instanceStartEndPositions64xyLow.xy, instanceStartEndPositions64xyLow.zw, isEnd);\n\t\t\tcurrPosition = mix(startLocalPosition,endLocalPosition,isEnd);\n\n\t\t\tvec3 nextPosition = instanceEndPositions;\n\t\t\tvec2 nextPosition64xyLow = instanceStartEndPositions64xyLow.zw;\n      vec3 endNextLinesPosition_start;\n      vec3 endNextLinesPosition_End_Temp;\n      vec3 endNextLinesPosition_End;\n      vec3 rightDeltaByEnd = mix(vec3(0.0), instanceRightDeltas, isEnd);\n\n      geodesic_project_view_local_precision(instanceStartPositions, instanceStartEndPositions64xyLow.xy, nextPosition + mix(rightDeltaByEnd, vec3(0.0), step(THRESHOLD_ZOOM, uZoom)), nextPosition64xyLow + mix(vec3(0.0), rightDeltaByEnd, step(THRESHOLD_ZOOM, uZoom)).xy, endNextLinesPosition_start, endNextLinesPosition_End_Temp, uProject_uDegreePerPixels);\n      endNextLinesPosition_End = mix(endLocalPosition, endNextLinesPosition_End_Temp, isEnd);\n      \n\t\t\tnextPosition = mix(project_view_local_position_precision(\n\t\t\t\tnextPosition + mix(rightDeltaByEnd, vec3(0.0), step(THRESHOLD_ZOOM, uZoom)), nextPosition64xyLow + mix(vec3(0.0), rightDeltaByEnd, step(THRESHOLD_ZOOM, uZoom)).xy\n\t\t\t), endNextLinesPosition_End,u_enableGeodesic);\n\n\t\t\tvec2 tangent = calculateTangent(prevPosition, currPosition, nextPosition);\n\t\t\t\n\t\t\treturn vec2(dot(tangent, segmentX), dot(tangent, segmentY));\n\t\t}\n\n\t\t/*\n\t\t*  (0, 1)-------------_(1, 1)\n\t\t*       |          _,-"  |\n\t\t*       o      _,-"      o\n\t\t*       |  _,-"          |\n\t\t*   (0, -1)"-------------(1, -1)\n\t\t*/\n\n\t\tvoid main(void) {\n\t\t\tfloat isEnd = positions.x;\n\t\t\tvOriginInfo.xy = positions;\n\n      vec3 localPosition_Start = project_view_local_position_precision( instanceStartPositions, instanceStartEndPositions64xyLow.xy);\n      vec3 localPosition_End = project_view_local_position_precision( instanceEndPositions, instanceStartEndPositions64xyLow.zw);\n\n\n      vec3 geodesic_Position_Start;\n      vec3 geodesic_Position_End;\n\n      geodesic_project_view_local_precision(instanceStartPositions, instanceStartEndPositions64xyLow.xy, instanceEndPositions, instanceStartEndPositions64xyLow.zw, geodesic_Position_Start, geodesic_Position_End, uProject_uDegreePerPixels);\n     \n      vec3 startLocalPosition = mix(localPosition_Start, geodesic_Position_Start,u_enableGeodesic);\n      vec3 endLocalPosition = mix(localPosition_End, geodesic_Position_End,u_enableGeodesic);\n\n\t\t\tvec3 segmentDirection = normalize(mix(startLocalPosition - endLocalPosition, endLocalPosition - startLocalPosition, isEnd));\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n      float maxDiff = length(startLocalPosition - endLocalPosition);\n      segmentDirection *= 0.00001 * maxDiff;\n\t    \n\t\t\tvec3 prevPosition = instanceStartPositions;\n\t\t\tvec2 prevPosition64xyLow = instanceStartEndPositions64xyLow.xy;\n      vec3 prevStartLinesPosition_Start;\n      vec3 prevStartLinesPosition_Start_Temp;\n      vec3 prevStartLinesPosition_End;\n      vec3 lefDeltaByEnd = mix(instanceLeftDeltas, vec3(0.0), isEnd);\n\n      geodesic_project_view_local_precision(prevPosition - mix(lefDeltaByEnd, vec3(0.0), step(THRESHOLD_ZOOM, uZoom)), prevPosition64xyLow -  mix(vec3(0.0), lefDeltaByEnd, step(THRESHOLD_ZOOM, uZoom)).xy, instanceStartPositions, instanceStartEndPositions64xyLow.xy, prevStartLinesPosition_Start_Temp, prevStartLinesPosition_End, uProject_uDegreePerPixels);\n      prevStartLinesPosition_Start = mix( prevStartLinesPosition_Start_Temp,startLocalPosition, isEnd);\n\n\t\t\n\t\t\tprevPosition = mix(project_view_local_position_precision(\n\t\t\t\tprevPosition - mix(lefDeltaByEnd, vec3(0.0), step(THRESHOLD_ZOOM, uZoom)), prevPosition64xyLow - mix(vec3(0.0), lefDeltaByEnd, step(THRESHOLD_ZOOM, uZoom)).xy\n\t\t\t), prevStartLinesPosition_Start,u_enableGeodesic) + segmentDirection;\n\n\t\t\tvec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n\t\t\tvec2 currPositionxy64Low = mix(instanceStartEndPositions64xyLow.xy, instanceStartEndPositions64xyLow.zw, isEnd);\n\t\t\tcurrPosition = mix(startLocalPosition,endLocalPosition,isEnd);\n\n\t\t\tvec3 nextPosition = instanceEndPositions;\n\t\t\tvec2 nextPosition64xyLow = instanceStartEndPositions64xyLow.zw;\n      vec3 endNextLinesPosition_start;\n      vec3 endNextLinesPosition_End_Temp;\n      vec3 endNextLinesPosition_End;\n      vec3 rightDeltaByEnd = mix(vec3(0.0), instanceRightDeltas, isEnd);\n\n      geodesic_project_view_local_precision(instanceStartPositions, instanceStartEndPositions64xyLow.xy, nextPosition +mix(rightDeltaByEnd, vec3(0.0), step(THRESHOLD_ZOOM, uZoom)), nextPosition64xyLow + mix(vec3(0.0), rightDeltaByEnd, step(THRESHOLD_ZOOM, uZoom)).xy, endNextLinesPosition_start, endNextLinesPosition_End_Temp, uProject_uDegreePerPixels);\n      endNextLinesPosition_End = mix(endLocalPosition, endNextLinesPosition_End_Temp, isEnd);\n    \n\t\t\t\n\t\t\tnextPosition = mix(project_view_local_position_precision(\n\t\t\t\tnextPosition + mix(rightDeltaByEnd, vec3(0.0), step(THRESHOLD_ZOOM, uZoom)), nextPosition64xyLow + mix(vec3(0.0), rightDeltaByEnd, step(THRESHOLD_ZOOM, uZoom)).xy\n\t\t\t), endNextLinesPosition_End,u_enableGeodesic) + segmentDirection;\n\n\t\t\tvec3 pos = calculateLinePosition(prevPosition, currPosition, nextPosition);\n\n\t\t\t\n\t\t\tvTrimDirection.xy = -getSegmentTangent(0.0, normalize(startLocalPosition - endLocalPosition));\n\t\t\tvTrimDirection.zw = getSegmentTangent(1.0, normalize(endLocalPosition - startLocalPosition));\n\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\n\t\t\t\n\t\t\t\n\t\n\t\t\tgl_Position = uMatrix * vec4(pos, 1.0);\n\t\n\t\t\tvec4 vertexColor = instanceColors.rgba / 255.0 * u_opacity;\n\t\t\tvPickingColor = instancePickingColors;\n\t\t\tvColor = vertexColor;\n\t\t\tvArrowArray = instanceArrowInfo; \n\t\t}\n    \n    ',f:"#version 300 es\n\t\t#define SHADER_NAME instance-polyline-fragment-shader\n\t\t\n\t\tprecision highp float;\n\t\tuniform float u_isBorder;\n\t\tuniform float u_miterLimit;\n    "+r.PICK_UNIFORM+"\n    "+r.PICK_FUNCTION+"\n\t\tuniform float u_lineJoin;\n\t\tuniform sampler2D u_arrowSampler;\n        \n\t\tin vec4 vColor;\n\t\tin vec4 vLineInfo;\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\n    in vec4 vClipArray;\n\t\tin vec3 vDashArray;\n\t\tin vec4 vArrowArray;\n    \n    in vec3 vPickingColor;\n\t\tin vec4 vLineSegmentInfo;\n\t\t\n\t\t\n\t\t\n\t\t\n\t\tin vec4 vTrimDirection;\n\n\t\tin vec4 vOriginInfo;\n        \n    layout(location = 0) out vec4 fragColor;\n    layout(location = 1) out vec4 emissiveColor;\n\n\t\tvoid main(void) {\n\t\t\tvec4 fColor = vColor;\n\t\t\tvec4 opacity = vec4(0.0, 0.0, 0.0, 0.0);\n\t\t\tvec4 red = vec4(1.0, 0.0, 0.0, 1);\n\t\t\tvec2 position = vOriginInfo.xy;\n\t\t\tvec2 pixelPosition = vec2(position.x * vOriginInfo.w, position.y * vClipArray.x);\n\n\t\t\tfColor = mix(\n\t\t\t\tfColor,\n\t\t\t\topacity,\n\t\t\t\tfloat(u_lineJoin == 1.0 &&\n\t\t\t\t\tlength(vec2(abs(vClipArray.z) - vClipArray.y, vClipArray.w)) > 1.0 &&\n\t\t\t\t\t(abs(vLineInfo.y) - vClipArray.y) >= 0.0 && \n\t\t\t\t\t((vLineSegmentInfo.y < 0.5 && vLineSegmentInfo.z < 0.5) || vLineSegmentInfo.x > 1.1)\n\t\t\t\t)\n\t\t\t);\n\n\n\n\n      fColor = mix(fColor, opacity, float(\n        dot(vClipArray.zw - vec2(-vClipArray.y, 0.0), vTrimDirection.xy) > 0.0 &&\n        step(0.1, abs(vTrimDirection.x)) > 0.5 &&\n        vLineSegmentInfo.y < 0.5\n      ));\n\n\n      fColor = mix(fColor, opacity, float(\n        dot(vClipArray.zw - vec2(vClipArray.y, 0.0), vTrimDirection.zw) > 0.0 &&\n        step(0.1, abs(vTrimDirection.x)) > 0.5 &&\n        vLineSegmentInfo.z < 0.5\n      ));\n\n\t\t\t\n\t\t\tif(u_isBorder > 0.0) {\n\t\t\t\tfloat clipY = vOriginInfo.z / vClipArray.x;\n\t\t\t\tfloat clipX = (vClipArray.x - vOriginInfo.z) / vOriginInfo.w;\n\t\t\t\t\n\t\t\t\tif (vLineSegmentInfo.x == 2.0 || vLineSegmentInfo.y < 0.5 && vLineSegmentInfo.z < 0.5) {\n\t\t\t\t\t\n\t\t\t\t\tclipX = vClipArray.x / vOriginInfo.w;\n\t\t\t\t\tvec2 circle1 = vec2(vClipArray.x, 0.0);\n\t\t\t\t\tvec2 circle2 = vec2(vOriginInfo.w - vClipArray.x, 0.0);\n\t\t\t\t\t\n\t\t\t\t\tif(length(pixelPosition - circle1) < vOriginInfo.z || length(pixelPosition - circle2) < vOriginInfo.z) {\n\t\t\t\t\t\tfColor = opacity;\n\t\t\t\t\t}\n\t\t\t\t\tif(position.y < clipY && position.y > -clipY && position.x>clipX && position.x<(1.0 - clipX)) {\n\t\t\t\t\t\tfColor = opacity;\n\t\t\t\t\t}\n\t\t\t\t} else if (vLineSegmentInfo.x == 0.0){\n\t\t\t\t\tif(vLineSegmentInfo.y > 0.5 && position.y < clipY && position.y > -clipY && position.x<(1.0 - clipX)) {\n\t\t\t\t\t\tfColor = opacity;\n\t\t\t\t\t} else if(vLineSegmentInfo.z > 0.5 && position.y < clipY && position.y > -clipY && position.x>clipX) {\n\t\t\t\t\t\tfColor = opacity;\n\t\t\t\t\t}\n\t\t\t\t} else if(position.y < clipY && position.y > -clipY && position.x>clipX && position.x<(1.0 - clipX)) {\n\t\t\t\t\t\tfColor = opacity;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t\n\t\t\tfloat segmentLength = vLineInfo.z + vClipArray.y;\t\t\n\t\t \n\t\t\t\n\t\t\tif (vDashArray.y > 0.0){\n\t\t\t\tfloat dashUsedLength = vDashArray.y + vDashArray.x;\n\t\t\t\tfloat positionX = mod(pixelPosition.x - vDashArray.z, dashUsedLength);\n\t\t\t\tif (positionX>0.0 && positionX<vDashArray.y) {\n\t\t\t\t\tfColor = opacity;\n\t\t\t  }\n\t\t\t}\n\n\t\t\t\n\t\t\tvec3 normalArrowArray = vArrowArray.xyz / vClipArray.x;\n\t\t\t\n\t\t\tfloat useArrow = (1.0 - u_isBorder) * step(0.1, vArrowArray.x) * step(0.1, vArrowArray.y) * step(-vClipArray.y, -abs(vLineInfo.z)) * step(-0.001, vLineSegmentInfo.w);\n\t\t\t\n\t\t\t\n\t\t\tfloat offsetX = mix(\n\t\t\t\tmix(\n\t\t\t\t\t0.5,\n\t\t\t\t\t1.0 / normalArrowArray.x,\n\t\t\t\t\tstep(0.1, vArrowArray.w)\n\t\t\t\t),\n\t\t\t\t1.0 - 1.0 / normalArrowArray.x,\n\t\t\t\tstep(1.1, vArrowArray.w)\n\t\t\t);\n\t\t\tfloat yMod = mod(segmentLength - vLineSegmentInfo.w, normalArrowArray.y + normalArrowArray.z);\n\t\t\tfloat texCoordY = yMod / normalArrowArray.y;\n\t\t\tfloat texCoordX = offsetX + vClipArray.w / normalArrowArray.x;\n\t\t\t\n\t\t\t\n\t\t\tfloat isComplete = step(0.0, vClipArray.y * 2.0 - (segmentLength + normalArrowArray.y - yMod));\n\t\t\tfloat isFilled = (1.0 - step(1.0, texCoordY)) * step(0.0, texCoordX) * (1.0 - step(1.0, texCoordX));\n\t\t\tvec4 arrowColor = texture(u_arrowSampler, vec2(texCoordX, texCoordY));\n\n\t\t\tfColor = mix(\n\t\t\t\tfColor,\n\t\t\t\tvec4(mix(\n\t\t\t\t\tfColor.rgb,\n\t\t\t\t\tarrowColor.rgb,\n\t\t\t\t\tarrowColor.a\n\t\t\t\t), fColor.a),\n\t\t\t\tuseArrow * isFilled * isComplete\n\t\t\t);\n\n      fragColor = picking_getFinalColor(fColor, vPickingColor);\n      emissiveColor = mix(vec4(0.0), fColor, vLineInfo.w);\n\t\t\t\n\t\t\t\n\t\t}\n\t",name:"instance_polyline_glsl3"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(222),r=n(301);e.default={v:"\n\t\t#define SHADER_NAME instance-polyline-vertex-shader\n\t\t\n\t\t\n\t\tattribute vec2 positions;\n\t\t\n\t\tattribute vec3 instanceStartPositions;\n\t\tattribute vec3 instanceEndPositions;\n\t\tattribute vec3 instanceLeftDeltas;\n\t\tattribute vec3 instanceRightDeltas;\n\t\tattribute vec4 instanceStartEndPositions64xyLow;\n\t\tattribute float instanceWidths;\n\t\tattribute float instanceOriginWidths;\n\t\tattribute vec4 instanceColors;\n\t\tattribute vec4 instanceLineInfo;\n\t\tattribute vec4 instanceArrowInfo;\n\t\tattribute float instanceArrowStartPositions;\n\t\tattribute float instanceDashStartPositions;\n\t\t\n\t\tattribute vec3 instancePickingColors;\n\t\t\n\t\tuniform float u_enableGeodesic;\n\t\t\n\t\tuniform float u_isBorder;\n\t\tuniform float u_widthScale;\n\t\tuniform float u_widthMinPixels;\n\t\tuniform float u_widthMaxPixels;\n\t\tuniform float u_miterLimit;\n    uniform vec2 uProject_uDegreePerPixels;\n\n\t\tuniform float u_lineJoin;\n\t\t\n\t\tuniform float u_opacity;\n\t\t\n\t\tconst float EPSILON = 0.001;\n\t\tconst float PIXEL_EPSILON = 0.1;\n\t\t\n\t\t"+i.UNIFORM_PART+"\n\n\t\tvarying vec4 vColor;\n\t\t\n\t\t\n\t\t\n\t\t\n\t\tvarying vec4 vLineInfo;\n    varying vec3 vPickingColor;\n\n\t\t\n\n\t\tvarying vec4 vClipArray;\n\n\t\tvarying vec4 vDashArray;\n\t\tvarying vec4 vArrowArray;\n\n\t\tvarying vec4 vLineSegmentInfo;\n\t\tvarying vec4 vTrimDirection;\n\n\t\t\n\n\t\t"+i.PROJECTION_PART+"\n\t\t\n\t\t\n\t\tvec2 calculateTangent(vec3 prevPoint, vec3 currPoint, vec3 nextPoint) {\n\t\t\tvec2 deltaA = currPoint.xy - prevPoint.xy;\n\t\t\tvec2 deltaB = nextPoint.xy - currPoint.xy;\n\t\n\t\t\tfloat lenA = length(deltaA);\n\t\t\tfloat lenB = length(deltaB);\n\t\n\t\t\tlenA = mix(0.0, lenA, step(PIXEL_EPSILON, lenA));\n\t\t\tlenB = mix(0.0, lenB, step(PIXEL_EPSILON, lenB));\n\t\n\t\t\t\n\t\t\tvec2 dirA = mix(vec2(0.0), normalize(deltaA), step(PIXEL_EPSILON, lenA));\n\t\t\tvec2 dirB = mix(vec2(0.0), normalize(deltaB), step(PIXEL_EPSILON, lenB));\n\n\t\t\t\n\t\t\tvec2 tangent = vec2(dirA + dirB);\n\t\t\ttangent = mix(vec2(0.0, 0.0), normalize(tangent), step(EPSILON, length(tangent)));\n\n\t\t\treturn tangent;\n\t\t}\n        \n\t\tvec3 calculateLinePosition(vec3 prevPoint, vec3 currPoint, vec3 nextPoint) {\n\t\t\tfloat lineCap = instanceLineInfo.x;\n\t\t\tvLineSegmentInfo.x = lineCap;\n\n\t\t\tfloat isEnd = positions.x;\n\t\t\tfloat width = clamp(instanceWidths * uPixelsPerMeter[0] * u_widthScale, u_widthMinPixels, u_widthMaxPixels) / 2.0;\n\t\t\tvClipArray.x = width;\n\n\t\t\t\n\t\t\tfloat originWidth = clamp(instanceOriginWidths * uPixelsPerMeter[0] * u_widthScale, u_widthMinPixels, u_widthMaxPixels) / 2.0;\n\t\t\tvLineInfo.w = originWidth;\n\t\t\tvLineSegmentInfo.w = instanceArrowStartPositions / originWidth;\n\t\n\t\t\tvec2 deltaA = currPoint.xy - prevPoint.xy;\n\t\t\tvec2 deltaB = nextPoint.xy - currPoint.xy;\n\t\n\t\t\tfloat lenA = length(deltaA);\n\t\t\tfloat lenB = length(deltaB);\n\t\n\t\t\tlenA = mix(mix(PIXEL_EPSILON, 0.0, step(THRESHOLD_ZOOM, uZoom)), lenA, step(PIXEL_EPSILON, lenA));\n\t\t\tlenB = mix(mix(PIXEL_EPSILON, 0.0, step(THRESHOLD_ZOOM, uZoom)), lenB, step(PIXEL_EPSILON, lenB));\n\t\n\t\t\t\n\t\t\tvec2 dirA = mix(vec2(0.0), normalize(deltaA), step(PIXEL_EPSILON, lenA));\n\t\t\tvec2 dirB = mix(vec2(0.0), normalize(deltaB), step(PIXEL_EPSILON, lenB));\n\t\n\t\t\t\n\t\t\tvec2 perpA = vec2(-dirA.y, dirA.x);\n\t\t\tvec2 perpB = vec2(-dirB.y, dirB.x);\n\t\n\t\t\t\n\t\t\tvec2 tangent = vec2(dirA + dirB);\n\t\t\ttangent = mix(perpA, normalize(tangent), step(EPSILON, length(tangent)));\n\t\n\t\t\t\n\t\t\tvec2 miterVec = vec2(-tangent.y, tangent.x);\n\n\t\t\t\n\t\t\tvec2 perp = mix(perpB, perpA, isEnd);\n\t\t\tfloat L = mix(lenB, lenA, isEnd);\n\t\t\t\n\n\t\t\t\n\t\t\t\n\t\t\t\n\t\n\t\t\t\n\t\t\tvec2 vertical_offset = perp * width * positions.y;\n\t\t\tvLineInfo.x = length(vertical_offset);\n\t\n\t\n\t\t\t\n\t\t\tbool isPathStart = isEnd < 0.5 && instanceLeftDeltas == vec3(0.0);\n\t\t\tbool isPathEnd = isEnd > 0.5 && instanceRightDeltas == vec3(0.0);\n\n\t\t\tvec2 dir = mix(dirB, dirA, isEnd);\n\t\t\tvLineSegmentInfo.y = float(isPathStart);\n\t\t\tvLineSegmentInfo.z = float(isPathEnd);\n\t\t\t\n\t\t\t\n\t\t\tvec2 horizontal_offset = vec2(0.0);\n\n\t\t\t\n\t\t\t\n\t\t\thorizontal_offset = mix(-dir, dir, isEnd) * width;\n\t\t\tvClipArray.y = L;\n\t\t\tfloat clipY = L / width / 2.0;\n\t\t\tfloat capLength = mix(-1.0 - clipY, 1.0 + clipY, isEnd);\n\t\t\tvClipArray.zw = vec2(capLength, positions.y);\n\t\t\tvLineInfo.z = capLength;\n\n\t\n\t\t\t\n\n\t\t\t\n\t\t\tif ((isPathStart && !bool(isEnd)) || (isPathEnd && bool(isEnd))) {\n\t\t\t\tcapLength = mix(mix(-clipY, clipY, isEnd), capLength, step(0.1, lineCap));\n\t\t\t\tvClipArray.zw = mix(vec2(capLength, positions.y), vClipArray.zw, step(0.1, lineCap));\n\n\t\t\t\t\n\t\t\t\thorizontal_offset = mix(vec2(0.0), horizontal_offset, step(0.1, lineCap));\n\t\t\t\tvLineInfo.z = mix(mix(-clipY,  clipY, isEnd), vLineInfo.z, step(0.1, lineCap));\n\t\t\t}\n\t\t\tvLineInfo.y = capLength;\n\t\t\t\n\t\t\treturn currPoint + vec3(vertical_offset, 0.0) + vec3(horizontal_offset, 0.0);\n\t\t}\n\t\t\n\t\t\n\t\tvec2 getSegmentTangent(float isEnd, vec3 segmentDirection) {\n\t\t\t\n\t\t\tvec2 segmentX = mix(-segmentDirection.xy, segmentDirection.xy, isEnd);\n\t\t\tvec2 segmentY = vec2(-segmentX.y, segmentX.x);\n\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n      vec3 localPosition_Start = project_view_local_position_precision( instanceStartPositions, instanceStartEndPositions64xyLow.xy);\n      vec3 localPosition_End = project_view_local_position_precision( instanceEndPositions, instanceStartEndPositions64xyLow.zw);\n      \n\t\t\tvec3 geodesic_Position_Start;\n      vec3 geodesic_Position_End;\n\n      geodesic_project_view_local_precision(instanceStartPositions, instanceStartEndPositions64xyLow.xy, instanceEndPositions, instanceStartEndPositions64xyLow.zw, geodesic_Position_Start, geodesic_Position_End, uProject_uDegreePerPixels);\n     \n      vec3 startLocalPosition = mix(localPosition_Start, geodesic_Position_Start,u_enableGeodesic);\n      vec3 endLocalPosition = mix(localPosition_End, geodesic_Position_End,u_enableGeodesic);\n\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t    \n\t\t\tvec3 prevPosition = instanceStartPositions;\n\t\t\tvec2 prevPosition64xyLow = instanceStartEndPositions64xyLow.xy;\n      vec3 prevStartLinesPosition_Start;\n      vec3 prevStartLinesPosition_Start_Temp;\n      vec3 prevStartLinesPosition_End;\n      \n      vec3 lefDeltaByEnd = mix(instanceLeftDeltas, vec3(0.0), isEnd);\t\t\n      geodesic_project_view_local_precision(prevPosition - mix(lefDeltaByEnd, vec3(0.0), step(THRESHOLD_ZOOM, uZoom)), prevPosition64xyLow - mix(vec3(0.0), lefDeltaByEnd, step(THRESHOLD_ZOOM, uZoom)).xy, instanceStartPositions, instanceStartEndPositions64xyLow.xy, prevStartLinesPosition_Start_Temp, prevStartLinesPosition_End, uProject_uDegreePerPixels);\n      prevStartLinesPosition_Start = mix( prevStartLinesPosition_Start_Temp,startLocalPosition, isEnd);\n\n\t\t\tprevPosition  = mix(project_view_local_position_precision(\n\t\t\t\tprevPosition  - mix(lefDeltaByEnd, vec3(0.0), step(THRESHOLD_ZOOM, uZoom)), prevPosition64xyLow  - mix(vec3(0.0), lefDeltaByEnd, step(THRESHOLD_ZOOM, uZoom)).xy\n\t\t\t),prevStartLinesPosition_Start,u_enableGeodesic) ;\n\n\t\t\tvec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n\t\t\tvec2 currPositionxy64Low = mix(instanceStartEndPositions64xyLow.xy, instanceStartEndPositions64xyLow.zw, isEnd);\n\t\t\tcurrPosition = mix(startLocalPosition,endLocalPosition,isEnd);\n\n\t\t\tvec3 nextPosition = instanceEndPositions;\n\t\t\tvec2 nextPosition64xyLow = instanceStartEndPositions64xyLow.zw;\n      vec3 endNextLinesPosition_start;\n      vec3 endNextLinesPosition_End_Temp;\n      vec3 endNextLinesPosition_End;\n      vec3 rightDeltaByEnd = mix(vec3(0.0), instanceRightDeltas, isEnd);\n\n      geodesic_project_view_local_precision(instanceStartPositions, instanceStartEndPositions64xyLow.xy, nextPosition + mix(rightDeltaByEnd, vec3(0.0), step(THRESHOLD_ZOOM, uZoom)), nextPosition64xyLow + mix(vec3(0.0), rightDeltaByEnd, step(THRESHOLD_ZOOM, uZoom)).xy, endNextLinesPosition_start, endNextLinesPosition_End_Temp, uProject_uDegreePerPixels);\n      endNextLinesPosition_End = mix(endLocalPosition, endNextLinesPosition_End_Temp, isEnd);\n      \n\t\t\tnextPosition = mix(project_view_local_position_precision(\n\t\t\t\tnextPosition + mix(rightDeltaByEnd, vec3(0.0), step(THRESHOLD_ZOOM, uZoom)), nextPosition64xyLow + mix(vec3(0.0), rightDeltaByEnd, step(THRESHOLD_ZOOM, uZoom)).xy\n\t\t\t), endNextLinesPosition_End,u_enableGeodesic);\n\n\n\t\t\tvec2 tangent = calculateTangent(prevPosition, currPosition, nextPosition);\n\n\t\t\t\n\t\t\treturn vec2(dot(tangent, segmentX), dot(tangent, segmentY));\n\t\t}\n\n\t\tvoid main(void) {\n\t\t\tvDashArray.xy = instanceLineInfo.yz;\n\t\t\tvDashArray.z = instanceDashStartPositions;\n\t\t\tvDashArray.w = positions.x;\n\n\t\t\tfloat isEnd = positions.x;\n\n      vec3 localPosition_Start = project_view_local_position_precision( instanceStartPositions, instanceStartEndPositions64xyLow.xy);\n      vec3 localPosition_End = project_view_local_position_precision( instanceEndPositions, instanceStartEndPositions64xyLow.zw);\n\n\n      vec3 geodesic_Position_Start;\n      vec3 geodesic_Position_End;\n\n      geodesic_project_view_local_precision(instanceStartPositions, instanceStartEndPositions64xyLow.xy, instanceEndPositions, instanceStartEndPositions64xyLow.zw, geodesic_Position_Start, geodesic_Position_End, uProject_uDegreePerPixels);\n     \n      vec3 startLocalPosition = mix(localPosition_Start, geodesic_Position_Start,u_enableGeodesic);\n      vec3 endLocalPosition = mix(localPosition_End, geodesic_Position_End,u_enableGeodesic);\n\n\t\t\tvec3 segmentDirection = normalize(mix(startLocalPosition - endLocalPosition, endLocalPosition - startLocalPosition, isEnd));\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n      float maxDiff = length(startLocalPosition - endLocalPosition);\n      segmentDirection *= 0.00001 * maxDiff;\n\t    \n\t\t\tvec3 prevPosition = instanceStartPositions;\n\t\t\tvec2 prevPosition64xyLow = instanceStartEndPositions64xyLow.xy;\n      vec3 prevStartLinesPosition_Start;\n      vec3 prevStartLinesPosition_Start_Temp;\n      vec3 prevStartLinesPosition_End;\n      vec3 lefDeltaByEnd = mix(instanceLeftDeltas, vec3(0.0), isEnd);\n\n      geodesic_project_view_local_precision(prevPosition - mix(lefDeltaByEnd, vec3(0.0), step(THRESHOLD_ZOOM, uZoom)), prevPosition64xyLow -  mix(vec3(0.0), lefDeltaByEnd, step(THRESHOLD_ZOOM, uZoom)).xy, instanceStartPositions, instanceStartEndPositions64xyLow.xy, prevStartLinesPosition_Start_Temp, prevStartLinesPosition_End, uProject_uDegreePerPixels);\n      prevStartLinesPosition_Start = mix( prevStartLinesPosition_Start_Temp,startLocalPosition, isEnd);\n\n\t\t\n\t\t\tprevPosition  = mix(project_view_local_position_precision(\n\t\t\t\tprevPosition - mix(lefDeltaByEnd, vec3(0.0), step(THRESHOLD_ZOOM, uZoom)), prevPosition64xyLow - mix(vec3(0.0), lefDeltaByEnd, step(THRESHOLD_ZOOM, uZoom)).xy\n\t\t\t), prevStartLinesPosition_Start,u_enableGeodesic) + segmentDirection;\n\n\t\t\tvec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n\t\t\tvec2 currPositionxy64Low = mix(instanceStartEndPositions64xyLow.xy, instanceStartEndPositions64xyLow.zw, isEnd);\n\t\t\tcurrPosition = mix(startLocalPosition,endLocalPosition,isEnd);\n\n\t\t\tvec3 nextPosition = instanceEndPositions;\n\t\t\tvec2 nextPosition64xyLow = instanceStartEndPositions64xyLow.zw;\n      vec3 endNextLinesPosition_start;\n      vec3 endNextLinesPosition_End_Temp;\n      vec3 endNextLinesPosition_End;\n      vec3 rightDeltaByEnd = mix(vec3(0.0), instanceRightDeltas, isEnd);\n\n      geodesic_project_view_local_precision(instanceStartPositions, instanceStartEndPositions64xyLow.xy, nextPosition +mix(rightDeltaByEnd, vec3(0.0), step(THRESHOLD_ZOOM, uZoom)), nextPosition64xyLow + mix(vec3(0.0), rightDeltaByEnd, step(THRESHOLD_ZOOM, uZoom)).xy, endNextLinesPosition_start, endNextLinesPosition_End_Temp, uProject_uDegreePerPixels);\n      endNextLinesPosition_End = mix(endLocalPosition, endNextLinesPosition_End_Temp, isEnd);\n    \n\t\t\t\n\t\t\tnextPosition = mix(project_view_local_position_precision(\n\t\t\t\tnextPosition + mix(rightDeltaByEnd, vec3(0.0), step(THRESHOLD_ZOOM, uZoom)), nextPosition64xyLow + mix(vec3(0.0), rightDeltaByEnd, step(THRESHOLD_ZOOM, uZoom)).xy\n\t\t\t), endNextLinesPosition_End,u_enableGeodesic) + segmentDirection;\n\n\t\t\tvec3 pos = calculateLinePosition(prevPosition, currPosition, nextPosition);\n\n\t\t\t\n\t\t\tvTrimDirection.xy = -getSegmentTangent(0.0, normalize(startLocalPosition - endLocalPosition));\n\t\t\tvTrimDirection.zw = getSegmentTangent(1.0, normalize(endLocalPosition - startLocalPosition));\n\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\n\t\t\t\n\t\t\t\n\t\n\t\t\tgl_Position = uMatrix * vec4(pos, 1.0);\n\t\n\t\t\tvec4 vertexColor = instanceColors.rgba / 255.0 * u_opacity;\n\t\t\tvPickingColor = instancePickingColors;\n\t\t\tvColor = vertexColor;\n\t\t\tvArrowArray = instanceArrowInfo;\n\t\t}\n    \n    ",f:"\n\t\t#define SHADER_NAME instance-polyline-fragment-shader\n\t\t\n\t\tprecision highp float;\n\t\tuniform float u_isBorder;\n\t\tuniform float u_miterLimit;\n    "+r.PICK_UNIFORM+"\n    "+r.PICK_FUNCTION+"\n\t\tuniform float u_lineJoin;\n\t\tuniform sampler2D u_arrowSampler;\n        \n\t\tvarying vec4 vColor;\n\t\tvarying vec4 vLineInfo;\n    \tvarying vec4 vClipArray;\n\n\t\tvarying vec4 vDashArray;\n\t\tvarying vec4 vArrowArray;\n\t\t\n    \tvarying vec3 vPickingColor;\n\t\tvarying vec4 vLineSegmentInfo;\n\t\tvarying vec4 vTrimDirection;\n\n\t\tvoid main(void) {\n\t\t\tvec4 vOriginInfo = vec4(0.0);\n\n\t\t\tfloat clipY = vClipArray.y / vClipArray.x / 2.0;\n\t\t\tvOriginInfo.x = vDashArray.w;\n\t\t\tvOriginInfo.y = vClipArray.w;\n\t\t\tvOriginInfo.z = vLineInfo.w;\n\t\t\tvOriginInfo.w = vClipArray.y + 2.0 * vClipArray.x;\n\n\t\t\tvec4 fColor = vColor;\n\t\t\tvec4 opacity = vec4(0.0, 0.0, 0.0, 0.0);\n\t\t\tvec4 red = vec4(1.0, 0.0, 0.0, 1);\n\t\t\tvec2 position = vOriginInfo.xy;\n\t\t\tvec2 pixelPosition = vec2(position.x * vOriginInfo.w, position.y * vClipArray.x);\n\n\t\t\tfColor = mix(\n\t\t\t\tfColor,\n\t\t\t\topacity,\n\t\t\t\tfloat(u_lineJoin == 1.0 &&\n\t\t\t\t\tlength(vec2(abs(vClipArray.z) - clipY, vClipArray.w)) > 1.0 &&\n\t\t\t\t\t(abs(vLineInfo.y) - clipY) >= 0.0 && \n\t\t\t\t\t((vLineSegmentInfo.y < 0.5 && vLineSegmentInfo.z < 0.5) || vLineSegmentInfo.x > 1.1)\n\t\t\t\t)\n\t\t\t);\n\n\n\n\n      fColor = mix(fColor, opacity, float(\n        dot(vClipArray.zw - vec2(-clipY, 0.0), vTrimDirection.xy) > 0.0 &&\n        step(0.1, abs(vTrimDirection.x)) > 0.5 &&\n        vLineSegmentInfo.y < 0.5\n      ));\n\n\n      fColor = mix(fColor, opacity, float(\n        dot(vClipArray.zw - vec2(clipY, 0.0), vTrimDirection.zw) > 0.0 &&\n        step(0.1, abs(vTrimDirection.x)) > 0.5 &&\n        vLineSegmentInfo.z < 0.5\n      ));\n\n\t\t\t\n\t\t\tif(u_isBorder > 0.0) {\n\t\t\t\tfloat clipY = vOriginInfo.z / vClipArray.x;\n\t\t\t\tfloat clipX = (vClipArray.x - vOriginInfo.z) / vOriginInfo.w;\n\t\t\t\t\n\t\t\t\tif (vLineSegmentInfo.x == 2.0 || vLineSegmentInfo.y < 0.5 && vLineSegmentInfo.z < 0.5) {\n\t\t\t\t\t\n\t\t\t\t\tclipX = vClipArray.x / vOriginInfo.w;\n\t\t\t\t\tvec2 circle1 = vec2(vClipArray.x, 0.0);\n\t\t\t\t\tvec2 circle2 = vec2(vOriginInfo.w - vClipArray.x, 0.0);\n\t\t\t\t\t\n\t\t\t\t\tif(length(pixelPosition - circle1) < vOriginInfo.z || length(pixelPosition - circle2) < vOriginInfo.z) {\n\t\t\t\t\t\tfColor = opacity;\n\t\t\t\t\t}\n\t\t\t\t\tif(position.y < clipY && position.y > -clipY && position.x>clipX && position.x<(1.0 - clipX)) {\n\t\t\t\t\t\tfColor = opacity;\n\t\t\t\t\t}\n\t\t\t\t} else if (vLineSegmentInfo.x == 0.0){\n\t\t\t\t\tif(vLineSegmentInfo.y > 0.5 && position.y < clipY && position.y > -clipY && position.x<(1.0 - clipX)) {\n\t\t\t\t\t\tfColor = opacity;\n\t\t\t\t\t} else if(vLineSegmentInfo.z > 0.5 && position.y < clipY && position.y > -clipY && position.x>clipX) {\n\t\t\t\t\t\tfColor = opacity;\n\t\t\t\t\t}\n\t\t\t\t} else if(position.y < clipY && position.y > -clipY && position.x>clipX && position.x<(1.0 - clipX)) {\n\t\t\t\t\t\tfColor = opacity;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t\n\t\t\tif (vDashArray.y > 0.0){\n\t\t\t\tfloat dashUsedLength = vDashArray.y + vDashArray.x;\n\t\t\t\tfloat positionX = mod(pixelPosition.x - vDashArray.z, dashUsedLength);\n\t\t\t\tif (positionX > 0.0 && positionX < vDashArray.y) {\n\t\t\t\t\tfColor = opacity;\n\t\t\t  }\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\tfloat segmentLength = vLineInfo.z + clipY;\n\n\t\t\t\n\t\t\tvec3 normalArrowArray = vArrowArray.xyz / vClipArray.x;\n\t\t\t\n\t\t\tfloat useArrow = (1.0 - u_isBorder) * step(0.1, vArrowArray.x) * step(0.1, vArrowArray.y) * step(-clipY, -abs(vLineInfo.z)) * step(-0.001, vLineSegmentInfo.w);\n\t\t\t\n\t\t\t\n\t\t\tfloat offsetX = mix(\n\t\t\t\tmix(\n\t\t\t\t\t0.5,\n\t\t\t\t\t1.0 / normalArrowArray.x,\n\t\t\t\t\tstep(0.1, vArrowArray.w)\n\t\t\t\t),\n\t\t\t\t1.0 - 1.0 / normalArrowArray.x,\n\t\t\t\tstep(1.1, vArrowArray.w)\n\t\t\t);\n\t\t\tfloat yMod = mod(segmentLength - vLineSegmentInfo.w, normalArrowArray.y + normalArrowArray.z);\n\t\t\tfloat texCoordY = yMod / normalArrowArray.y;\n\t\t\tfloat texCoordX = offsetX + vClipArray.w / normalArrowArray.x;\n\t\t\t\n\t\t\t\n\t\t\tfloat isComplete = step(0.0, clipY * 2.0 - (segmentLength + normalArrowArray.y - yMod));\n\t\t\tfloat isFilled = (1.0 - step(1.0, texCoordY)) * step(0.0, texCoordX) * (1.0 - step(1.0, texCoordX));\n\t\t\tvec4 arrowColor = texture2D(u_arrowSampler, vec2(texCoordX, texCoordY));\n\n\t\t\tfColor = mix(\n\t\t\t\tfColor,\n\t\t\t\tvec4(mix(\n\t\t\t\t\tfColor.rgb,\n\t\t\t\t\tarrowColor.rgb,\n\t\t\t\t\tarrowColor.a\n\t\t\t\t), fColor.a),\n\t\t\t\tuseArrow * isFilled * isComplete\n\t\t\t);\n\t\t\t\n     gl_FragColor = picking_getFinalColor(fColor, vPickingColor);\n\t\t\t\n\t\t\t\n\t\t}\n\t",name:"instance_polyline"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(222);e.default={v:"\n    #define SHADER_NAME mask-vertex-shader\n\n    attribute vec3 positions;\n    attribute vec2 positions64xyLow;\n\n    "+i.UNIFORM_PART+"\n\n    "+i.PROJECTION_PART+"\n    \n    void main(void) {\n      vec3 local_position = project_view_local_position_precision(positions.xyz, positions64xyLow.xy);\n\n      gl_Position = uMatrix * vec4(local_position, 1.0);\n    }\n  ",f:"\n    #define SHADER_NAME mask-fragment-shader\n\n        precision highp float;\n        \n    uniform vec4 uColor;\n    \n    void main(void) {\n      gl_FragColor = uColor;\n    }\n  ",name:"mask"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(222),r=n(301),a=n(493);e.default={v:"\n        #define SHADER_NAME instance-glyph-vertex-shader\n\n        "+a.INSTANCE_PARTS+"\n        attribute vec4 instanceColors;\n        attribute vec4 instanceStrokeColors;\n        attribute float instanceType;\n        attribute float instanceShow;\n        \n        "+i.UNIFORM_PART+"\n        \n        "+r.PICK_UNIFORM+"\n\n        "+a.UNIFORM_PARTS+"\n        uniform float u_gamma;\n        \n        varying vec4 vColor;\n        varying vec4 vStrokeColor;\n        varying vec2 vTextureCoords;\n        varying float vGamma;\n        varying vec2 vPositions;\n        varying float vOpacity;\n\n\n\n        varying vec2 vRadiusRate;\n\n\n        varying vec4 vBorderProperty;\n        varying vec3 vBgImageInfo;\n        "+i.PROJECTION_PART+"\n        \n        "+r.PICK_FUNCTION+"\n        \n        void main(void) {\n            "+(0,a.generateMainPart)("\n\n                vec2 backgroundScale = vec2(1.0) * u_sizeScale;\n                vec2 labelScale = mix(sizePixels / imageSize.y, vec2(0.0), float(imageSize.y == 0.0));\n                vec2 instanceScale = mix(labelScale, backgroundScale, instanceType);\n\n\n                vec2 pixelOffset = positions / 2.0 * imageSize + mix(instanceInfos.xy, vec2(0.0), instanceType);\n\n                pixelOffset = mix(rotate_by_angle_onScreen(pixelOffset, instanceInfos.z) * instanceScale,\n                rotate_by_angle_onScreen(pixelOffset, instanceInfos.z) * backgroundScale,\n                          instanceType);\n                pixelOffset += instancePixelOffset.xy;\n                pixelOffset.y *= -1.0;\n            ","\n                vColor = vec4(instanceColors.rgb, instanceColors.a * u_opacity) / 255.;\n                vStrokeColor = vec4(instanceStrokeColors.rgb, instanceStrokeColors.a * u_opacity) / 255.;\n            ")+"\n\n            vGamma = u_gamma / (u_sizeScale * instanceSizes.x / imageSize.y);\n            vBorderProperty.w = instanceFrames.x;\n            vBorderProperty.xy = vec2((imageSize.x - vBorderProperty.w * 2.0) / imageSize.x, (imageSize.y - vBorderProperty.w * 2.0) / imageSize.y);\n            vOpacity = instanceShow * vOpacity;\n            vPositions = positions;\n            vBgImageInfo.x = instanceType;\n            vBorderProperty.z = clamp(instanceInfos.x, 0.0, min(imageSize.x / 2.0, imageSize.y / 2.0));\n            vRadiusRate = vec2(1.0 - vBorderProperty.z * 2.0 / imageSize.x, 1.0 - vBorderProperty.z * 2.0 / imageSize.y);\n            vBgImageInfo.yz = imageSize;\n        }\n    ",f:"\n        #define SHADER_NAME instance-marker-fragment-shader\n\n        precision highp float;\n        \n        uniform sampler2D u_sampler;\n        uniform float u_buffer;\n        uniform vec2 u_resolution;\n\n        "+r.PICK_UNIFORM+"\n        \n        varying vec4 vColor;\n        varying vec4 vStrokeColor;\n        varying vec2 vTextureCoords;\n        varying float vGamma;\n        varying vec2 vPositions;\n\n        varying float vOpacity;\n\n\n        varying vec2 vRadiusRate;\n\n\n        varying vec4 vBorderProperty;\n        varying vec3 vBgImageInfo;\n        \n        const float MIN_ALPHA = 0.05;\n        const bool useSdf = true;\n        \n        void main(void) {\n            float usedBuff = 0.548;\n\n            "+i.SDF_PART+"\n\n            float isBorder = float(abs(vPositions.x) > vBorderProperty.x || abs(vPositions.y) > vBorderProperty.y);\n            vec4 backgroundColor = vColor;\n            float isCorner = float(abs(vPositions.x) > vRadiusRate.x && abs(vPositions.y) > vRadiusRate.y);\n\n            float borderLen = length(vec2((abs(vPositions.x) - vRadiusRate.x) * vBgImageInfo.y / 2.0, (abs(vPositions.y) - vRadiusRate.y) * vBgImageInfo.z / 2.0));\n            isBorder = mix(isBorder, 1.0, step(vBorderProperty.z - vBorderProperty.w, borderLen) * isCorner);\n            backgroundColor = mix(vColor, vStrokeColor, isBorder) * vOpacity;\n            backgroundColor.w = backgroundColor.w * (1.0 - step(vBorderProperty.z, borderLen) * isCorner);\n            \n            gl_FragColor = mix(mix(color * vOpacity, backgroundColor, vBgImageInfo.x), vColor * vOpacity, picking_usePickingColor);\n        }\n    ",name:"instance_glyph"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(222),r=n(301),a=n(493);e.default={v:"\n        #define SHADER_NAME instance-marker-vertex-shader\n\n        "+a.INSTANCE_PARTS+"\n        attribute vec4 instanceColors;\n        attribute vec4 instanceStrokeColors;\n        attribute float instanceStrokeWidth;\n        attribute float instanceShow;\n        attribute float instanceType;\n        attribute vec2 instanceAnimateScaleAlpha;\n\n        "+i.UNIFORM_PART+"\n        \n        "+r.PICK_UNIFORM+"\n\n        "+a.UNIFORM_PARTS+"\n        uniform float u_gamma;\n\n        varying vec4 vColor;\n        varying vec4 vStrokeColor;\n        varying float vStrokeWidth;\n        varying vec2 vTextureCoords;\n        varying float vOpacity;\n        varying float vGamma;\n        varying float vInstanceType;\n        varying vec2 vInstanceScale;\n        varying float vAnimationAlpha;\n        \n        "+i.PROJECTION_PART+"\n        \n        "+r.PICK_FUNCTION+"\n        \n        void main(void) {\n            "+(0,a.generateMainPart)("\n\n                vec2 markerScale = mix(sizePixels / imageSize, vec2(0.0), float(imageSize.y == 0.0));\n                vec2 labelScale = mix(sizePixels / imageSize.y, vec2(0.0), float(imageSize.y == 0.0));\n                vec2 instanceScale = mix(markerScale, labelScale, instanceType);\n                vec2 pixelOffset = mix(positions / 2.0 * imageSize, positions / 2.0 * imageSize + instanceInfos.xy, instanceType);\n                pixelOffset = mix(rotate_by_angle_onScreen((pixelOffset * instanceScale + instanceInfos.xy), instanceInfos.z),\n                    pixelOffset * instanceScale,\n                    instanceType);\n                pixelOffset += instancePixelOffset.xy;\n                pixelOffset *= instanceAnimateScaleAlpha.x;\n                pixelOffset.y *= -1.0;\n            ","\n                vColor = mix(vec4(0.0, 0.0, 0.0, 0.0), vec4(instanceColors.rgb, instanceColors.a * u_opacity) / 255., instanceType);\n                vStrokeColor = vec4(instanceStrokeColors.rgb, instanceStrokeColors.a * u_opacity) / 255.;\n                vStrokeWidth = instanceStrokeWidth;\n            ")+"\n            vGamma = u_gamma / (u_sizeScale * instanceSizes.x / imageSize.y);\n            vOpacity = instanceShow * vOpacity;\n            vInstanceType = instanceType;\n            vInstanceScale = instanceScale;\n            vAnimationAlpha = instanceAnimateScaleAlpha.y;\n        }\n    ",f:"\n        #define SHADER_NAME instance-marker-fragment-shader\n\n        precision highp float;\n        \n\t\tuniform sampler2D u_sampler;\n        uniform float u_buffer;\n        uniform float u_sdfRadius;\n\n        "+r.PICK_UNIFORM+"\n        \n        varying vec4 vColor;\n        varying vec4 vStrokeColor;\n        varying float vStrokeWidth;\n        varying vec2 vTextureCoords;\n        varying float vOpacity;\n        varying float vGamma;\n        varying float vInstanceType;\n        varying vec2 vInstanceScale;\n        varying float vAnimationAlpha;\n        \n        const float MIN_ALPHA = 0.05;\n\n        \n        void main(void) {\n\n            float usedBuff =  u_buffer * (1.0 - vStrokeWidth / u_sdfRadius / vInstanceScale.y);\n\n            "+i.SDF_PART+"\n\n            vec4 texColor = texture2D(u_sampler, vTextureCoords);\n            gl_FragColor = mix(mix(texColor * vOpacity, color * vOpacity, vInstanceType), vColor, picking_usePickingColor);\n\n\n            gl_FragColor = gl_FragColor * vAnimationAlpha;\n        }\n    ",name:"instance_marker"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(340);e.default={v:[i.attributePart,"attribute vec4 a_InstanceColors;","attribute vec4 a_InstancePickingColors;","attribute vec4 a_InstanceStrokeColors;","attribute float a_InstanceStrokeWidth;","attribute vec2 a_InstanceStrentchinglens;",i.uniformPart,"uniform vec2 u_glyphTextureResolution;","uniform vec2 u_billboardTextureResolution;","uniform float u_gamma;","uniform float picking_useFeaturePickingColor;",i.varyingPart,"varying float v_gamma;","varying vec4 v_color;","varying vec4 v_strokeColor;","varying vec2 v_fontArguments;","varying float v_useFeaturePicking;",i.projectScreenPart,i.filterPart,"void main(){","\tvec2 transCoord = a_InstanceTrans.xy;",i.glPositionCusPart,"    vec2 texCoords = a_Positions.xy * 0.5 + 0.5;","vec4 textureBounds = vec4(a_InstanceTextBounds.x, u_billboardTextureResolution.y - a_InstanceTextBounds.y - a_InstanceTextBounds.w, a_InstanceTextBounds.zw);","\tvec2 billboradTextureCoords = mix(\n\t\t\t\ttextureBounds.xy,\n\t\t\t\ttextureBounds.xy + textureBounds.zw,\n\t\t\t\t\ttexCoords\n\t\t\t\t) / u_billboardTextureResolution;\n\t\t\t\n\t\t","       float xRoad = (a_InstanceTextBounds.x) / u_glyphTextureResolution.x;","       float yRoad = (u_glyphTextureResolution.y - (a_InstanceTextBounds.y)) / u_glyphTextureResolution.y;","       float wRoad = a_InstanceTextBounds.z / u_glyphTextureResolution.x;","       float hRoad = a_InstanceTextBounds.w / u_glyphTextureResolution.y;","       v_TexCoord = mix(\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tbillboradTextureCoords,\n\t\t\t\t\t\t\t\tmix(\n\t\t\t\t\t\t\t\t\tvec2(xRoad + texCoords.x * wRoad, yRoad + (texCoords.y - 1.0) * hRoad),\n\t\t\t\t\t\t\t\t\tvec2(a_InstanceTextBounds.x + a_InstanceTextBounds.z * texCoords.x, a_InstanceTextBounds.y + a_InstanceTextBounds.w * texCoords.y),\n\t\t\t\t\t\t\t\t\ta_InstanceInfo.z\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tstep(0.0, a_InstanceInfo.z)\n\t\t\t\t\t\t\t);","    v_isShow = a_InstanceInfo.y;","    v_isIcon = a_InstanceInfo.z;","    v_opacity = max(0.0, min(1.0, a_InstanceInfo.w + mix(-u_fadeChange, u_fadeChange, v_isShow)));","\t v_opacity = getFilterOpacity(v_opacity, a_InstanceTrans.z);","\t v_color = mix(a_InstanceColors, a_InstancePickingColors, picking_useFeaturePickingColor) / 255.0;","  v_useFeaturePicking = picking_useFeaturePickingColor;","\t v_strokeColor = a_InstanceStrokeColors / 255.0;","\t v_fontArguments.x = a_InstanceStrokeWidth;","\t v_gamma = u_gamma / (a_InstanceCoords.y / a_InstanceTextBounds.w);","\t v_fontArguments.y = a_InstanceCoords.y / a_InstanceTextBounds.w;","}"].join("\n"),f:["#define SDF_PX 8.0","#define EDGE_GAMMA 0.105 / 2.0","precision highp float;",i.fragPart,"uniform sampler2D u_SamplerGlyph;","uniform float u_buffer;","uniform float u_sdfRadius;",i.uniformPart,i.varyingPart,"varying float v_gamma;","varying vec4 v_color;","varying vec4 v_strokeColor;","varying vec2 v_fontArguments;","varying float v_useFeaturePicking;","void main() {",i.maskPart,"\t vec4 vColor = v_color * v_color.a;","\tvec4 color = mix(\n\t\t\t\ttexture2D(u_SamplerGlyph, v_TexCoord),\n\t\t\t\tmix(\n\t\t\t\t\ttexture2D(u_SamplerText, v_TexCoord),\n\t\t\t\t\ttexture2D(u_SamplerIcon, v_TexCoord),\n\t\t\t\t\tstep(0.0, v_isIcon)\n\t\t\t\t),\n\t\t\t\tabs(v_isIcon)\n\t\t\t);\n\t\t","\n\t\t\tfloat alpha = color.a;\n\t\t\tfloat distance = alpha;\n\n\t\t\tfloat usedBuff =  u_buffer - v_fontArguments.x  / u_sdfRadius / v_fontArguments.y *  u_buffer;\n\t\t\tfloat usedGamma = v_gamma;\n\t\t\t\n\t\t\t\n\t\t\t\n\n\t\t\tfloat outlineFactor = smoothstep(u_buffer - usedGamma, u_buffer + usedGamma, distance);\n\n\t\t\tfloat finallAlpha = smoothstep(usedBuff - usedGamma, usedBuff + usedGamma, distance);\n\t\t\t\n\t\t\tcolor = mix(\n\t\t\t\tmix(v_strokeColor * v_strokeColor.a, vColor, clamp(outlineFactor + v_useFeaturePicking, 0.0, 1.0)),\n\t\t\t\tcolor,\n\t\t\t\tstep(0.5, abs(v_isIcon))\n\t\t\t) * finallAlpha;\n\t\t\t\n\t\t\t\n\t\t\t\n\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t","    gl_FragColor = color * mix(0.0, v_opacity, isCulledByMask);","}"].join("\n"),name:"instance_symbol_custom_style"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(340);e.default={v:[i.attributePart,i.uniformPart,i.varyingPart,i.projectScreenPart,i.filterPart,"void main(){","\tvec2 transCoord = a_InstanceTrans.xy;",i.glPositionPart,"        vec2 texCoords = a_Positions.xy * 0.5 + 0.5;","        if (a_InstanceInfo.z != 1.0) {","           float x = (u_InstanceTileTextureOffset.x + a_InstanceTextBounds.x) / u_textTextureResolution.x;","           float y = (u_textTextureResolution.y - (u_InstanceTileTextureOffset.y + a_InstanceTextBounds.y)) / u_textTextureResolution.y;","           float w = a_InstanceTextBounds.z / u_textTextureResolution.x;","           float h = a_InstanceTextBounds.w / u_textTextureResolution.y;","           v_TexCoord = vec2(x + texCoords.x * w, y + (texCoords.y - 1.0) * h);","        } else {","           v_TexCoord = vec2(a_InstanceTextBounds.x + a_InstanceTextBounds.z * texCoords.x, a_InstanceTextBounds.y + a_InstanceTextBounds.w * texCoords.y);","        }","    v_isShow = a_InstanceInfo.y;","    v_isIcon = a_InstanceInfo.z;","    v_opacity = max(0.0, min(1.0, a_InstanceInfo.w + mix(-u_fadeChange, u_fadeChange, v_isShow)));","\t v_opacity = getFilterOpacity(v_opacity, a_InstanceTrans.z);","}"].join("\n"),f:["precision mediump float;",i.fragPart,i.varyingPart,"void main() {",i.maskPart,"    vec4 color = mix(texture2D(u_SamplerText, v_TexCoord), texture2D(u_SamplerIcon, v_TexCoord), v_isIcon);","    gl_FragColor = mix(color, vec4(1.0, 1.0, 1.0, color.a), u_asbackground) * color.a * mix(0.0, v_opacity, isCulledByMask);","}"].join("\n"),name:"instance_symbol_default_style"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(340),r=n(222),a="\n\t"+r.PROJECTION_PART+"\n\n\tvec2 getWorldspaceCoord(vec4 relativeCenter, vec2 localPosition) {\n\t\tvec2 relativeCenterPoint = project_view_local_position_precision(relativeCenter.xy, relativeCenter.zw);\n\t\tvec2 worldspaceCoord = relativeCenterPoint + project_scale(vec3(localPosition, 0.0)).xy;\n\t\treturn worldspaceCoord;\n\t}\n";e.default={v:[i.attributePart,"attribute vec4 a_InstanceColors;","attribute vec4 a_InstanceStrokeColors;",i.uniformPart,"uniform vec2 u_glyphTextureResolution;","uniform vec2 u_billboardTextureResolution;","uniform float u_gamma;","\n\tuniform vec4 uCenter;\n\tuniform float uZoom;\n\tuniform vec3 uPixelsPerMeter;\n\tuniform vec2 uResolution;\n\tuniform vec3 uProject_uCommonUnitsPerWorldUnit;\n\tuniform vec3 uProject_uCommonUnitsPerWorldUnit2;\n\tuniform vec4 uRelativeCenter;\n",i.varyingPart,"varying float v_gamma;","varying vec4 v_color;","varying vec4 v_strokeColor;","varying float v_fontScale;","varying float v_gammaScale;",i.projectScreenPart,a,i.filterPart,"void main(){","\tvec2 transCoord = getWorldspaceCoord(uRelativeCenter, a_InstanceTrans.xy);",i.glPositionPart,"\n\t\t\tvec2 texCoords = a_Positions.xy * 0.5 + 0.5;\n\t\t\t\n\t\t\t\n\t\t\tvec2 resolution = mix(\n\t\t\t\tu_glyphTextureResolution,\n\t\t\t\tu_billboardTextureResolution,\n\t\t\t\tabs(a_InstanceInfo.z)\n\t\t\t);\n\t\t\tvec4 textureBounds = vec4(a_InstanceTextBounds.x, resolution.y - a_InstanceTextBounds.y - a_InstanceTextBounds.w, a_InstanceTextBounds.zw);\n\t\t\tv_TexCoord = mix(\n\t\t\t\ttextureBounds.xy,\n\t\t\t\ttextureBounds.xy + textureBounds.zw,\n\t\t\t\ttexCoords\n\t\t\t) / resolution;\n\n\t\t\tv_isShow = a_InstanceInfo.y;\n\t\t\tv_isIcon = a_InstanceInfo.z;\n\t\t\tv_opacity = max(0.0, min(1.0, a_InstanceInfo.w + mix(-u_fadeChange, u_fadeChange, v_isShow)));\n\t\t\tv_color = a_InstanceColors / 255.0;\n\t\t\tv_strokeColor = a_InstanceStrokeColors / 255.0;\n\n\t\t\tv_gamma = u_gamma / (a_InstanceCoords.y / a_InstanceTextBounds.w);\n\n\t\t\tv_fontScale = a_InstanceCoords.y / a_InstanceTextBounds.w;\n\t\t\tv_gammaScale = 1.0;\n\t\t}"].join("\n"),f:["#define SDF_PX 8.0","#define EDGE_GAMMA 0.105 / 2.0","precision highp float;","uniform sampler2D u_SamplerText;","uniform sampler2D u_SamplerGlyph;","uniform float u_buffer;","uniform float u_asbackground;",i.varyingPart,"varying float v_gamma;","varying vec4 v_color;","varying vec4 v_strokeColor;","varying float v_fontScale;","varying float v_gammaScale;","void main() {","\t vec4 vColor = v_color * v_color.a;","\n\t\t\tvec4 color = mix(\n\t\t\t\ttexture2D(u_SamplerGlyph, v_TexCoord),\n\t\t\t\ttexture2D(u_SamplerText, v_TexCoord),\n\t\t\t\tabs(v_isIcon)\n\t\t\t);\n\t\t","\n\t\t\tfloat alpha = color.a;\n\t\t\tfloat distance = alpha;\n\n\t\t\tfloat usedBuff = u_buffer;\n\t\t\tfloat usedGamma = v_gamma;\n\t\t\tfloat outlineFactor = smoothstep(usedBuff - usedGamma, usedBuff + usedGamma, distance);\n\t\t\tfloat finalAlpha = smoothstep(0.5 - usedGamma, 0.5 + usedGamma, distance);\n\n\t\t\tcolor = mix(\n\t\t\t\tmix(v_strokeColor * v_strokeColor.a, vColor, outlineFactor),\n\t\t\t\tcolor,\n\t\t\t\tstep(0.5, abs(v_isIcon))\n\t\t\t) * finalAlpha;\n\t\t\t\n\t\t\tgl_FragColor = color * v_opacity;\n\t\t}"].join("\n"),name:"instance_symbol_indoor"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(284),r=n(392),a=function(t){return t&&t.__esModule?t:{default:t}}(r),o=a.default?i.LIGHT_UNIFORM+i.LIGHT_VARYING+i.LIGHT_VERTEX:"",s=a.default?i.LIGHT_VARYING+i.LIGHT_FRAG:"";e.default={v:"\n\t\tprecision highp float;\n\t\tattribute vec2 a_Position;\n\t\tattribute vec4 a_Color;\n\t\tattribute vec2 a_Normal;\n\t\tattribute vec2 a_LineInfo;\n\t\tattribute float a_LineDistance;\n\t\tattribute vec2 a_SideInfo;\n\t\tattribute vec4 a_PickingColor;\n\n\t\tuniform mat4 u_matrix;\n\t\tuniform mat4 u_modelMatrix;\n\t\tuniform float u_SizeScale;\n\t\tuniform float picking_useFeaturePickingColor;\n\n\t\tvarying vec4 v_Color;\n\t\tvarying vec2 v_Normal;\n\t\tvarying vec2 v_LineInfo;\n\t\tvarying vec2 v_Pos;\n\t\tvarying float v_Transform;\n\t\tvarying float v_LineDistance;\n\t\tvarying float v_Width;\n\t\tvarying float v_opaque_part;\n\n\t\t"+o+"\n\n\t\tvoid main(){\n\n\t\t\tfloat isSide = fract(a_SideInfo.x / 2.) * 2.;\n\t\t\tfloat isNoSideLine = floor(a_SideInfo.x / 2.);\n\t\t\tv_opaque_part = mix(1.0, 0.0, smoothstep(0.0, 1.0, isSide * isNoSideLine));\n\n\t\t\tfloat zoom = floor(u_SizeScale / 1000.) / 100.;\n\t\t\tfloat scale = fract(u_SizeScale / 1000.) * 10.;\n\t\t\tfloat preWidth = floor(a_Position.x / 2048.0)/2.0;\n\t\t\tfloat nextWidth = floor(a_Position.y / 2048.0)/2.0;\n\n\t\t\tv_Color = mix(a_Color, a_PickingColor, picking_useFeaturePickingColor);\n\t\t\tv_Normal = a_Normal;\n\t\t\tv_LineInfo = a_LineInfo;\n\t\t\tv_LineDistance = floor(a_LineDistance/10.0);\n\t\t\tvec2 point = (fract(a_Position.xy / 2048.0) * 2048.0 - 1024.0) * 0.5;\n\n\t\t\t\n\t\t\tfloat width = a_LineInfo.x / 2.0;\n\t\t\tfloat nearWidth = mix(nextWidth, preWidth, step(0.5, zoom));\n\t\t\tv_Width = mix(\n\t\t\t\twidth,\n\t\t\t\tmix(\n\t\t\t\t\tmix(width, nextWidth, zoom),\n\t\t\t\t\tmix(preWidth, width, zoom),\n\t\t\t\t\tstep(0.5, zoom)\n\t\t\t\t),\n\t\t\t\tfloat(v_LineDistance > 0. && nearWidth > 0.)\n\t\t\t) / scale;\n\n\t\t\tv_Normal = vec2(a_Normal.x - 128.0, a_Normal.y - 128.0) / 63.;\n\t\t\tv_Pos = point + v_Normal * v_Width;\n\t\t\tv_Transform = a_SideInfo.y;\n\t\t\tgl_Position = u_matrix * vec4(v_Pos, 0.0, 1.0);\n\n\t\t\t\n\t\t\t"+(a.default?"lighting_apply_on_vertex(vec3(v_Pos, 0.0), vec3(0.0, 0.0, 1.0), u_modelMatrix, vec2(0.1, 16.0));":"")+"\n\t\t}\n\t",f:"\n\t\tprecision highp float;\n\t\tuniform float u_opacity;\n\t\tvarying vec4 v_Color;\n\t\tvarying vec2 v_Normal;\n\t\tvarying vec2 v_LineInfo;\n\t\tvarying vec2 v_Pos;\n\t\tvarying float v_Transform;\n\t\tvarying float v_LineDistance;\n\t\tvarying float v_Width;\n\t\tvarying float v_opaque_part;\n\n\t\t"+s+"\n\n\t\tvoid main(){\n\t\t\tvec4 f_Color;\n\t\t\tf_Color.r = v_Color.r / 255.0;\n\t\t\tf_Color.g = v_Color.g / 255.0;\n\t\t\tf_Color.b = v_Color.b / 255.0;\n\t\t\tf_Color.a = 1.0;\n\n\t\t\tfloat alpha = u_opacity;\n\t\t\tfloat feather = min(v_Width * 0.3, 2.0);\n\n\t\t\t\n\t\t\tfloat transformByte = floor(v_Transform + 0.5);\n\t\t\tvec2 translate = vec2(fract(transformByte / 4.0) * 4.0, floor(fract(transformByte / 16.0) * 4.0));\n\t\t\tfloat scale = floor(transformByte / 16.0);\n\t\t\tvec2 coord = vec2(v_Pos.x, 0. - v_Pos.y) * scale - translate * 256.0;\n\t\t\tbool isOutSide = coord.x < 0. || coord.x > 256.0 || coord.y < 0. || coord.y > 256.0;\n\n\t\t\tfloat dist = abs(length(v_Normal) * v_Width);\n\t\t\tfloat isTransparent = float(\n\t\t\t\t(dist > v_Width || isOutSide) || \n\t\t\t\t(v_LineInfo.y> 0.0 && mod(v_LineDistance, floor(v_LineInfo.y/10.0) * (2.0-fract(v_LineInfo.y/10.0))) > floor(v_LineInfo.y/10.0))\n\t\t\t);\n\n\t\t\talpha = mix(\n\t\t\t\tu_opacity,\n\t\t\t\t0.0,\n\t\t\t\tisTransparent\n\t\t\t);\n\n\t\t\t\n\t\t\t"+(a.default?"vec4 colorInLight = lighting_apply_on_color(f_Color);":"vec4 colorInLight = f_Color;")+"\n\t\t\tgl_FragColor =  colorInLight * (v_Color.a /255.0) * alpha * v_opaque_part;\n\t\t}\n\t",name:"trafficBase"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.defaultShader={name:"instance_traffic_flow",v:"\nattribute vec2 instanceLinks;\nattribute vec4 instanceColors;\nattribute float instanceParticles;\n\nuniform mat4 uMatrix;\nuniform sampler2D uSampler;\nuniform vec2 uTexInfo;\nuniform vec4 uSubTexInfo;\nuniform float uTick;\n\nvarying vec4 vColor;\n\nvoid main() {\n\n  float stepByTime = floor(uTick / uTexInfo.y) + 0.4 + instanceParticles;\n  float linkLength = instanceLinks.y;\n  float offset = stepByTime - linkLength * floor(stepByTime / linkLength);\n\n  float index = floor(instanceLinks.x + offset);\n\n\n\n  float texSize = uTexInfo.x;\n  vec2 uvInUnit = vec2(\n    index - texSize * floor(index / texSize),\n    floor(index / texSize)\n\n  ) / (texSize - 1.);\n\n\n  vec2 uvInSampler = uSubTexInfo.xy + uvInUnit * uSubTexInfo.zw;\n\n  vec4 pointRGBA = texture2D(uSampler, uvInSampler);\n  vec2 point = vec2(\n    (pointRGBA.x + pointRGBA.y) * 256. - 128.,\n    (pointRGBA.z + pointRGBA.w) * 256. - 128.\n  );\n\n  gl_Position = uMatrix * vec4(point.x, -point.y, 0., 1.);\n  gl_PointSize = 5.;\n\n  vColor = instanceColors / 255.;\n}\n",f:"\nprecision mediump float;\n\nvarying vec4 vColor;\n\nvoid main() {\n  float alpha = 1.0 - step(0.5, distance(gl_PointCoord, vec2(0.5)));\n  gl_FragColor = vColor * alpha;\n}\n"}},,,,,,,,,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),a=i(r),o=n(1),s=i(o),l=n(10),u=n(497),c=function(){function t(e,n,i){(0,a.default)(this,t),this.workerPool=e,this.actors=[],this.currentActor=0,this.id=l.uniqueId();for(var r=this.workerPool.acquire(this.id,i),o=0;o<r.length;o++){var s=r[o],c=new u(s,n,this.id);c.name="Worker "+o,this.actors.push(c)}}return(0,s.default)(t,[{key:"send",value:function(t,e,n,i){var r=0;return"number"!=typeof i||isNaN(i)?(this.currentActor=(this.currentActor+1)%this.actors.length,r=this.currentActor):r=i-1,this.actors[r].send(t,e,n),i=r+1}},{key:"remove",value:function(){this.actors.forEach(function(t){t.remove()}),this.actors=[],this.workerPool.release(this.id)}},{key:"broadcast",value:function(t,e,n){n=n||function(){},l.asyncAll(this.actors,function(n,i){n.send(t,e,i)},n)}},{key:"destroy",value:function(){this.remove()}}]),t}();e.default=c},function(t,e,n){"use strict";var i=n(655),r=i(656);t.exports=function(){var t=new window.Worker(r);return t.objectURL=r,t}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||(0,v.default)(t,n,{configurable:!1,enumerable:!0,get:i})},e.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e.oe=function(t){throw console.error(t),t};var i=e(e.s=ENTRY_MODULE);return i.default||i}function a(t){return(""+t).replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function o(t){return!isNaN(1*t)}function s(t,e,i){var r={};r[i]=[];var s=e.toString(),l=s.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!l)return r;for(var u=l[1],c=new RegExp("(\\\\n|\\W)"+a(u)+g,"g"),f=void 0;f=c.exec(s);)"dll-reference"!==f[3]&&r[i].push(f[3]);for(c=new RegExp("\\("+a(u)+'\\("(dll-reference\\s('+m+'))"\\)\\)'+g,"g");f=c.exec(s);)t[f[2]]||(r[i].push(f[1]),t[f[2]]=n(f[1]).m),r[f[2]]=r[f[2]]||[],r[f[2]].push(f[4]);for(var d=(0,h.default)(r),p=0;p<d.length;p++)for(var v=0;v<r[d[p]].length;v++)o(r[d[p]][v])&&(r[d[p]][v]=1*r[d[p]][v]);return r}function l(t){return(0,h.default)(t).reduce(function(e,n){return e||t[n].length>0},!1)}function u(t,e){for(var n={main:[e]},i={main:[]},r={main:{}};l(n);)for(var a=(0,h.default)(n),o=0;o<a.length;o++){var u=a[o],c=n[u],f=c.pop();if(r[u]=r[u]||{},!r[u][f]&&t[u][f]){r[u][f]=!0,i[u]=i[u]||[],i[u].push(f);for(var d=s(t,t[u][f],u),p=(0,h.default)(d),v=0;v<p.length;v++)n[p[v]]=n[p[v]]||[],n[p[v]]=n[p[v]].concat(d[p[v]])}}return i}var c=n(94),f=i(c),d=n(17),h=i(d),p=n(73),v=i(p),m="[\\.|\\-|\\+|\\w|/|@]+",g="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+m+").*?\\)";t.exports=function(t,e){e=e||{};var i={main:n.m},a=e.all?{main:(0,h.default)(i.main)}:u(i,t),o="";(0,h.default)(a).filter(function(t){return"main"!==t}).forEach(function(t){for(var e=0;a[t][e];)e+=1;a[t].push(e),i[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+t+" = ("+r.toString().replace("ENTRY_MODULE",(0,f.default)(e))+")({"+a[t].map(function(e){return(0,f.default)(e)+": "+i[t][e].toString()}).join(",")+"});\n"}),o=o+"new (("+r.toString().replace("ENTRY_MODULE",(0,f.default)(t))+")({"+a.main.map(function(t){return(0,f.default)(t)+": "+i.main[t].toString()}).join(",")+"}))(self);";var s=new window.Blob([o],{type:"text/javascript"});return e.bare?s:(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(s)}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(164),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l);n(491);var c=n(703),f=i(c),d=n(706),h=i(d),p=n(709),v=i(p),m=n(713),g=i(m),_=n(711),y=i(_),x=n(716),b=i(x),S=n(90),w=n(497),E=n(726),A=function(){function t(e){var n,i=this;(0,s.default)(this,t),this.self=e,this.actor=new w(e,this),this.layerIndexes={},this.workerSourceTypes=(n={},(0,a.default)(n,S.SOURCE_TYPE.vector,E),(0,a.default)(n,S.SOURCE_TYPE.geojson,f.default),(0,a.default)(n,S.SOURCE_TYPE.geoTask,h.default),(0,a.default)(n,S.SOURCE_TYPE.imageTile,v.default),(0,a.default)(n,S.SOURCE_TYPE.indoor,g.default),(0,a.default)(n,S.SOURCE_TYPE.indoorIndex,y.default),(0,a.default)(n,S.SOURCE_TYPE.traffic,b.default),n),this.workerSources={},this.self.registerWorkerSource=function(t,e){if(i.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');i.workerSourceTypes[t]=e}}return(0,u.default)(t,[{key:"loadTile",value:function(t,e,n){this.getWorkerSource(t,e.type).loadTile(e,n)}},{key:"reloadTile",value:function(t,e,n){this.getWorkerSource(t,e.type).reloadTile(e,n)}},{key:"abortTile",value:function(t,e){this.getWorkerSource(t,e.type).abortTile(e)}},{key:"removeTile",value:function(t,e){this.getWorkerSource(t,e.type).removeTile(e)}},{key:"removeSource",value:function(t,e){var n=this.getWorkerSource(t,e.type);void 0!==n.removeSource&&n.removeSource(e)}},{key:"getWorkerSource",value:function(t,e){var n=this;if(this.workerSources[t]||(this.workerSources[t]={}),!this.workerSources[t][e]){var i={send:function(e,i,r){n.actor.send(e,i,r,t)}};this.workerSources[t][e]=new this.workerSourceTypes[e](i,t)}return this.workerSources[t][e]}},{key:"tileOffset",value:function(t,e,n){this.getWorkerSource(t,e.type).tileOffset(e,n)}}]),t}();t.exports=function(t){return new A(t)}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(17),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(28),f=i(c),d=n(654),h=function(){function t(){(0,s.default)(this,t),this.activeSet={}}return(0,u.default)(t,[{key:"acquire",value:function(t,e){return this._createWorker(e),this.activeSet[t]=!0,this.workers.slice()}},{key:"_createWorker",value:function(t){if(!this.workers){this.workers=[];for(var e=t||this._getWorkerCount();this.workers.length<e;)this.workers.push(new d)}}},{key:"_getWorkerCount",value:function(){if(f.default.isLowMobileDevice())return 2;var t=f.default.isPC()?4:2;return 1===f.default.hardwareConcurrency?1:Math.min(Math.floor(f.default.hardwareConcurrency/2),t)}},{key:"release",value:function(t){delete this.activeSet[t],(0,a.default)(this.activeSet).length>0||this.reset()}},{key:"reset",value:function(){this.activeSet={},this.workers.forEach(function(t){t.terminate()}),this.workers=null}}]),t}(),p=new h;e.default=p},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(115),a=i(r),o=n(3),s=i(o),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),p=n(4),v=i(p),m=n(93),g=i(m),_=n(264),y=i(_),x=n(29),b=n(500),S=i(b),w=n(502),E=i(w),A=n(501),T=i(A),M=n(256),I=["left:0;","top:0;","overflow:visible;","z-index:102;"],P=function(t){function e(t){(0,u.default)(this,e);var n=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this));return n.map=t,n.controls={},n.createControlContainer(t),n}return(0,v.default)(e,t),(0,f.default)(e,[{key:"createControlContainer",value:function(t){var e=t._overlayer.root;this.controlContainer=document.createElement("div");var n=this.controlContainer;n.style.cssText=I.join(""),e.appendChild(n),t._overlayer.childs.controlLayer=n}},{key:"addControl",value:function(t){if(t instanceof y.default){var e=t.id;this.controls[e]?console.warn("addControl失败：id重复。"):(this.controls[e]=t,t.addTo(this.map,this.controlContainer),this._fire("control_added",{},!0))}else new x.BaseTypeError("control","Control",t).error();return this}},{key:"removeControl",value:function(t){if(this.controls[t]){this.controls[t].remove(),delete this.controls[t],this._fire("control_removed",{},!0)}return this}},{key:"setViewMode",value:function(t){(0,a.default)(this.controls).forEach(function(e){e&&e.setViewMode&&e.setViewMode(t)})}},{key:"getControl",value:function(t){if(this.controls[t])return this.controls[t];switch(t){case M.DEFAULT_CONTROL_ID.SCALE:return new S.default({id:M.DEFAULT_CONTROL_ID.SCALE,position:M.CONTROL_POSITION.BOTTOM_LEFT,center:this.map.getCenter(),zoom:this.map.getZoom(),scale:this.map.getScale()});case M.DEFAULT_CONTROL_ID.ZOOM:return new E.default({id:M.DEFAULT_CONTROL_ID.ZOOM,position:M.CONTROL_POSITION.TOP_RIGHT});case M.DEFAULT_CONTROL_ID.ROTATION:return new T.default({id:M.DEFAULT_CONTROL_ID.ROTATION,position:M.CONTROL_POSITION.TOP_RIGHT});default:return this.controls[t]}}},{key:"destroy",value:function(){(0,a.default)(this.controls).forEach(function(t){t&&t.destroy&&t.destroy()}),this.controls={},this.map=null}}]),e}(g.default);e.default=P},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,CENTER_LEFT:3,CENTER:4,CENTER_RIGHT:5,BOTTOM_LEFT:6,BOTTOM_CENTER:7,BOTTOM_RIGHT:8};e.default=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(264),v=i(p),m=n(1066),g=i(m),_=function(t){function e(t){return(0,s.default)(this,e),(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t))}return(0,h.default)(e,t),(0,u.default)(e,[{key:"createDOM",value:function(){var t=document.createElement("div"),e="margin-bottom: 0px; width: 345px; height:51px; background: rgba(255,255,255,0.90); z-index:200;";e+="border: 1px solid #DEDEDE; border-radius: 3px; padding:0 22.5px 0 60px; box-sizing:border-box; line-height: 48px;",e+="font-family: PingFangSC-Medium;font-size: 19.5px;color: #EF4D4D;letter-spacing: 0;",t.style.cssText=e,t.innerHTML="鉴权失败，请传入正确的key";var n=document.createElement("img");return n.style.cssText="width:30px; height:30px; position:absolute; top:9px; left: 22.5px",n.src=g.default,t.appendChild(n),t}}]),e}(v.default);e.default=_},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=window.innerHeight,n=window.innerWidth,i=e>n?n:e,r="",a="",o=3.5*i/100;o>71?(a=3.9/3.5*71+"px",r="28.4px"):o<34?(a=3.9/3.5*34+"px",r="13.6px"):(a="3.9vmin",r="1.4vmin"),t.style.cssText="margin-left:"+r+";bottom:0;line-height:"+a+";font-size:"+r+";color:#333;font-family:Arial,sans-serif;white-space:nowrap;z-index:0;transform:rotateX(0deg)"}var a=n(3),o=i(a),s=n(0),l=i(s),u=n(1),c=i(u),f=n(5),d=i(f),h=n(4),p=i(h),v=n(264),m=i(v),g=n(1067),_=i(g),y=n(256),x=y.LOGO_URL.DEFAULT_LOGO,b=y.LOGO_URL.GRAY_LOGO,S=(new Date).getFullYear(),w=function(t){function e(t){return(0,l.default)(this,e),(0,d.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t))}return(0,p.default)(e,t),(0,c.default)(e,[{key:"onInit",value:function(t){this.hasSatellite=t.hasSatellite}},{key:"updateMapAppNum",value:function(t){this.hasSatellite!==t&&(this.hasSatellite=t,this.text.innerText=this.getTextValue())}},{key:"getMapAppNum",value:function(){return this.hasSatellite?y.MAP_APPROVAL_NUMBER.satellite:y.MAP_APPROVAL_NUMBER.vector}},{key:"getTextValue",value:function(){return"©"+S+" Tencent - "+this.getMapAppNum()+"号"}},{key:"createDOM",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.style,n=void 0===e?"default":e;return this._createPlatformDom(n)}},{key:"_createPlatformDom",value:function(t){var e=document.createElement("div");e.style.cssText="margin:1px;display:flex;align-items:center";var n=document.createElement("a");n.style.cssText="z-index:1;",n.href="http://map.qq.com?ref=jsapi_v3",n.target="_blank",n.style.cssText="max-height:22px;max-width:150px;transform:rotateX(0deg)",e.appendChild(n);var i=document.createElement("div");return i.className="logo-text",i.style.cssText="padding-left:5px;font-size:10px;color:#333;font-family:Arial,sans-serif;white-space:nowrap;z-index:0;transform:rotateX(0deg)",i.innerText=this.getTextValue(),e.appendChild(i),this.text=i,this.logoImg=new Image,this.logoImg.src="gray"===t?b:x,this.logoImg.style.cssText="max-height:22px;max-width:150px;",n.appendChild(this.logoImg),e}},{key:"_createVisDom",value:function(){var t=document.createElement("div");t.style.cssText="overflow:visible;margin:1px;margin-top:1vmin;display:flex;";var e=document.createElement("a");e.style.cssText="z-index:1;",e.target="_blank",e.style.cssText="transform:rotateX(0deg);",t.appendChild(e);var n=document.createElement("div");n.className="logo-text",n.style.cssText="display:none;",n.innerText=this.getTextValue(),t.appendChild(n),this.text=n;var i=new Image;return i.src=_.default,i.style.marginBottom="-500px",e.appendChild(i),i.onload=function(){i.style.height="3.5vmin",i.style.maxHeight="71px",i.style.minHeight="34px",i.style.width="10.5vmin",i.style.maxWidth="210px",i.style.minWidth="100px",i.style.imageRendering="-webkit-optimize-contrast",i.style.marginBottom="0px",window.addEventListener("resize",function(){return r(n)}),r(n)},t}},{key:"changeLogoUrl",value:function(t){t&&this.logoImg&&this.logoImg.src!==t&&(this.logoImg.src=t)}}]),e}(m.default);t.exports=w},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(27),a=i(r),o=n(25),s=i(o),l=n(95),u=i(l),c=n(3),f=i(c),d=n(0),h=i(d),p=n(1),v=i(p),m=n(5),g=i(m),_=n(4),y=i(_),x=n(264),b=i(x),S=n(305),w=n(664),E=n(663),A=n(28),T=n(215),M=n(1054),I=n(1065),P=n(1064);n(1058);var k=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,h.default)(this,e),!t.floorList||!t.buildingId)return console.error("楼层参数不合法!",t),(0,g.default)(n);var n=(0,g.default)(this,(e.__proto__||(0,f.default)(e)).call(this,t));return n._construct(),n}return(0,y.default)(e,t),(0,v.default)(e,[{key:"onInit",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.buildingId,i=e.selectedFloor,r=e.floorList;this.buildingId=n,this.floorMap=new u.default,this.floors=[],r.map(function(e,n){t.floorMap.set(e.name,String(n)),t.floors.push(e.name)}),this.list=null,this.selectedFloorIdx=this.floorMap.get(i),this._floorIndex=this._getFloorIndex(this.selectedFloorIdx)}},{key:"createDOM",value:function(){var t=(0,S.Template)(M,{floors:this.floors}),e=(0,T.toDom)(t),n=document.createElement("div");return n.appendChild(e.querySelector(".floor-control")),n}},{key:"_construct",value:function(){var t=this;this.wrapperNode=this.dom.querySelector(".floor-control-wrapper"),this.list=this.dom.querySelector(".floor-control-list"),this.arrTopImg=this.dom.querySelector(".arr-top"),this.arrBottomImg=this.dom.querySelector(".arr-bottom"),this.arrTopImg.src=I,this.arrBottomImg.src=P,(0,w.Transform)(this.list),this.floorListScroll=new E.Scroll({touch:this.wrapperNode,vertical:!0,target:this.list,property:"translateY",bindSelf:!0,maxSpeed:2,outFactor:.2,min:-40*Math.max(this.floors.length-4,0),max:0,lockDirection:!1,maxRegion:10,springMaxRegion:1,touchStart:function(){t.floorListScroll.min=-40*Math.max(t.floors.length-4,0)}}),this._bindEvents(),"number"==typeof this._floorIndex&&this._floorIndex>-1&&this._updateSelectedFloor(this._floorIndex,!0)}},{key:"setFreezing",value:function(t){t?(0,T.addClass)(this.wrapperNode,"freezing"):(0,T.removeClass)(this.wrapperNode,"freezing")}},{key:"selectFloor",value:function(t,e){var n=this.floorMap.get(t),i=this._getFloorIndex(n);i>-1?this._updateSelectedFloor(i,!1,e):console.error("楼层不存在!",n)}},{key:"_bindEvents",value:function(){var t=this,e=this._bindClick();if((0,A.isPC)()){e.remove();var n={},i={};(0,A.on)(this.list,"mousedown",function(t){n=(0,T.getPointerXY)(t)}),(0,A.on)(this.list,"mouseup",function(e){if(i=(0,T.getPointerXY)(e),Math.abs(i.y-n.y)<=2&&Math.abs(i.x-n.x)<=2){if((0,T.hasClass)(t.wrapperNode,"freezing"))return!0;var r=e.target.getAttribute("data-floor");t.selectFloor(r)}})}}},{key:"_bindClick",value:function(){var t=this;return(0,A.on)(this.list,".floor-control-item:click",function(e){if((0,T.hasClass)(t.wrapperNode,"freezing"))return!0;var n=e.selectorTarget.getAttribute("data-floor");t.selectFloor(n)})}},{key:"getFloorName",value:function(t){var e=t.toString(),n=!0,i=!1,r=void 0;try{for(var o,l=(0,s.default)(this.floorMap.entries());!(n=(o=l.next()).done);n=!0){var u=(0,a.default)(o.value,2),c=u[0];if(u[1]===e)return c}}catch(t){i=!0,r=t}finally{try{!n&&l.return&&l.return()}finally{if(i)throw r}}}},{key:"_getFloorIndex",value:function(t){var e=this.getFloorName(t);return this.floors.indexOf(e)}},{key:"_getFloorItem",value:function(t){return this.dom.querySelector('.floor-control-item[data-index="'+t+'"]')}},{key:"_addSelected",value:function(t){(0,T.addClass)(t,"selected-item"),3===t.innerHTML.length?t.style.fontSize="13px":4===t.innerHTML.length?t.style.fontSize="10px":t.innerHTML.length>4&&(t.style.fontSize="8px")}},{key:"_removeSelected",value:function(t){(0,T.removeClass)(t,"selected-item"),t.style.fontSize=""}},{key:"_updateSelectedFloor",value:function(t,e,n){var i=this,r=this._getFloorItem(this._floorIndex),a=this._getFloorItem(t);if(this._removeSelected(r),this._addSelected(a),this.floorListScroll){var o=this.floorListScroll.getComputedPosition(),s=Math.floor((this.floorListScroll.max-o)/40);[0,1,2,3].map(function(t){return t+s}).includes(t)||this.floorListScroll.to(Math.min(this.floorListScroll.max,Math.max(-40*(t-2),this.floorListScroll.min)),200)}if(e||t!==this._floorIndex){this._floorIndex=t;var l=parseInt(this.floorMap.get(this.floors[t]),10),u=l>this.selectedFloorIdx;this.selectedFloorIdx=l,n||setTimeout(function(){i.emit("floor-change",{floorIdx:i.selectedFloorIdx,floorName:i.floors[i.selectedFloorIdx],upper:u})},0)}}},{key:"show",value:function(){this.dom.style.display="block"}},{key:"hide",value:function(){this.dom.style.display="none"}},{key:"changeBottom",value:function(t){if(isNaN(t))return void console.error("top需要传数字");this.dom.style.bottom=t+"px"}}]),e}(b.default);e.default=k},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return 1-Math.sqrt(1-t*t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Scroll=void 0;var a=n(0),o=i(a),s=n(1),l=i(s),u=n(28),c=n(215),f="cubic-bezier(0.1, 0.57, 0.1, 1)";e.Scroll=function(){function t(e){(0,o.default)(this,t),this.element="string"==typeof e.touch?document.querySelector(e.touch):e.touch,this.scroller=this._getValue(e.target,this.element),this.vertical=this._getValue(e.vertical,!0),this.property=e.property,this.sensitivity=this._getValue(e.sensitivity,1),this.lockDirection=this._getValue(e.lockDirection,!0),this.tickID=0,this.handlers=[],this.initialValue=this._getValue(e.initialValue,this.scroller[this.property]),this.scroller[this.property]=this.initialValue,this.moveFactor=this._getValue(e.moveFactor,1),this.factor=this._getValue(e.factor,1),this.outFactor=this._getValue(e.outFactor,.3),this.min=e.min,this.max=e.max,this.maxRegion=this._getValue(e.maxRegion,600),this.deceleration=6e-4,this.springMaxRegion=this._getValue(e.springMaxRegion,60),this.fixed=this._getValue(e.fixed,!1);var n=function(){};if(this.change=e.change||n,this.touchEnd=e.touchEnd||n,this.touchStart=e.touchStart||n,this.touchMove=e.touchMove||n,this.touchCancel=e.touchCancel||n,this.animationEnd=e.animationEnd||n,this.hasMin=!(void 0===this.min),this.hasMax=!(void 0===this.max),this.isTouchStart=!1,this.step=e.step,this.inertia=this._getValue(e.inertia,!0),this.maxSpeed=e.maxSpeed,this.hasMaxSpeed=!(void 0===this.maxSpeed),this.hasMax&&this.hasMin){if(this.min>this.max)throw"min value can't be greater than max value";this.currentPage=Math.round((this.max-this.scroller[this.property])/this.step)}this.preventDefault=this._getValue(e.preventDefault,!0),this.eventTarget=self,e.bindSelf&&(this.eventTarget=this.element),this.bindEvents(),this._endCallbackTag=!0,this._endTimeout=null}return(0,l.default)(t,[{key:"bindEvents",value:function(){var t=this;(0,u.isPC)()?(this.handlers.push((0,u.on)(this.eventTarget,"mousedown",function(e){t._start(e)})),this.handlers.push((0,u.on)(this.eventTarget,"mouseup",function(e){t._end(e)})),this.handlers.push((0,u.on)(this.eventTarget,"mouseleave",function(e){t._end(e)})),this.handlers.push((0,u.on)(this.eventTarget,"mousemove",function(e){t._move(e)})),this.handlers.push((0,u.on)(this.eventTarget,"click",function(t){t.stopPropagation()}))):(this.handlers.push((0,u.on)(this.eventTarget,"touchstart",function(e){t._start(e)})),this.handlers.push((0,u.on)(this.eventTarget,"touchend",function(e){t._end(e)})),this.handlers.push((0,u.on)(this.eventTarget,"touchcancel",function(e){t._cancel(e)})),this.handlers.push((0,u.on)(this.eventTarget,"touchmove",function(e){t._move(e)}))),this.handlers.push((0,u.on)(this.scroller,c.TRANSITIONEND,function(e){t._transitionEnd(e)}))}},{key:"_getValue",value:function(t,e){return void 0===t?e:t}},{key:"_transitionEnd",value:function(){var t=this;if(this._triggerTransitionEnd){var e=this.scroller[this.property];return e<this.min?void this.to(this.min,600,f):e>this.max?void this.to(this.max,600,f):void(this.step?(this._correction(),this._endCallbackTag&&(this._endCallbackTag=setTimeout(function(){t.animationEnd(e),(0,u.cancelFrame)(t.tickID)},400),this._endCallbackTag=!1)):(this.animationEnd(e),(0,u.cancelFrame)(this.tickID)))}}},{key:"_cancelAnimation",value:function(){this.scroller.style[c.TRANSITIONDURATION]="0ms",this.scroller[this.property]=this.getComputedPosition()}},{key:"getComputedPosition",value:function(){var t=self.getComputedStyle(this.scroller,null);return t=t[c.TRANSFORM].split(")")[0].split(", "),this.vertical?+(t[13]||t[5]):+(t[12]||t[4])}},{key:"_tick",value:function(){this.change(this.getComputedPosition()),this.tickID=(0,u.frame)(this._tick.bind(this))}},{key:"_start",value:function(t){(0,u.cancelFrame)(this.tickID),this._endCallbackTag=!0,this.isTouchStart=!0,this._firstTouchMove=!0,this._preventMove=!1,this.touchStart(t,this.scroller[this.property]),this._cancelAnimation(),clearTimeout(this._endTimeout),this.hasMax&&this.hasMin&&(this.currentPage=Math.round((this.max-this.scroller[this.property])/this.step)),this.startTime=(new Date).getTime();var e=(0,c.getPointerXY)(t);this.preX=e.x,this._startX=this.preX,this.preY=e.y,this._startY=this.preY,this.start=this.vertical?this.preY:this.preX,t.stopPropagation()}},{key:"_move",value:function(t){if(this.isTouchStart){var e=(0,c.getPointerXY)(t),n=Math.abs(e.x-this._startX),i=Math.abs(e.y-this._startY);if(this._firstTouchMove&&this.lockDirection){var r=n-i;r>0&&this.vertical?this._preventMove=!0:r<0&&!this.vertical&&(this._preventMove=!0),this._firstTouchMove=!1}if(n<10&&i<10)return;if(!this._preventMove){var a=this.moveFactor,o=(this.vertical?e.y-this.preY:e.x-this.preX)*this.sensitivity;this.hasMax&&this.scroller[this.property]>this.max&&o>0?a=this.outFactor:this.hasMin&&this.scroller[this.property]<this.min&&o<0&&(a=this.outFactor),o*=a,this.preX=e.x,this.preY=e.y,this.scroller[this.property]+=o;var s=(new Date).getTime();s-this.startTime>300&&(this.startTime=s,this.start=this.vertical?this.preY:this.preX),this.touchMove(t,this.scroller[this.property])}this.preventDefault&&t.cancelable&&t.preventDefault(),t.stopPropagation()}}},{key:"_end",value:function(t){if(this.isTouchStart){var e=this.scroller[this.property],n=(0,c.getPointerXY)(t);if((n.x-this._startX>=2||n.y-this._startY>=2)&&(0,u.isPC)(),!1===this.touchEnd(t,e))return void(this._triggerTransitionEnd=!1);if(this._triggerTransitionEnd=!0,this.hasMax&&e>this.max)this.to(this.max,600,f);else if(this.hasMin&&e<this.min)this.to(this.min,600,f);else if(this.inertia&&!this._preventMove){var i=(new Date).getTime()-this.startTime;if(i<300){var a=((this.vertical?n.y:n.x)-this.start)*this.sensitivity,o=Math.abs(a)/i,s=this.factor*o;this.hasMaxSpeed&&s>this.maxSpeed&&(s=this.maxSpeed);var l=e+s*s/(2*this.deceleration)*(a<0?-1:1),d=1;l<this.min?l<this.min-this.maxRegion?(d=r((e-this.min+this.springMaxRegion)/(e-l)),l=this.min-this.springMaxRegion):(d=r((e-this.min+this.springMaxRegion*(this.min-l)/this.maxRegion)/(e-l)),l=this.min-this.springMaxRegion*(this.min-l)/this.maxRegion):l>this.max&&(l>this.max+this.maxRegion?(d=r((this.max+this.springMaxRegion-e)/(l-e)),l=this.max+this.springMaxRegion):(d=r((this.max+this.springMaxRegion*(l-this.max)/this.maxRegion-e)/(l-e)),l=this.max+this.springMaxRegion*(l-this.max)/this.maxRegion));var h=Math.round(o/this.deceleration)*d;this.to(Math.round(l),h,f)}else this.step&&this._correction()}else this.step&&this._correction();this.isTouchStart=!1,t.stopPropagation()}}},{key:"_cancel",value:function(t){(0,u.cancelFrame)(this.tickID),this.step&&this._correction(),this.touchCancel(t)}},{key:"goMin",value:function(t){var e=this.scroller[this.property];(t||this.hasMin&&e<this.min)&&this.to(this.min,200,f)}},{key:"goMax",value:function(t){var e=this.scroller[this.property];(t||this.hasMax&&e>this.max)&&this.to(this.max,200,f)}},{key:"to",value:function(t,e,n){var i=this.scroller,r=this.property;i.style[c.TRANSITIONDURATION]=this._getValue(e,600)+"ms",i.style[c.TRANSITIONTIMINGFUNCTION]=n||f,i[r]=t}},{key:"_correction",value:function(){var t=self.getComputedStyle(this.scroller)[c.TRANSFORM],e=this.vertical?parseInt(t.split(",")[13]):parseInt(t.split(",")[12]),n=Math.floor(Math.abs(e/this.step)),i=e%this.step,r=void 0;Math.abs(i)>this.step/2?(r=(e<0?-1:1)*(n+1)*this.step,r>this.max&&(r=this.max),r<this.min&&(r=this.min),this.to(r,400,f)):(r=(e<0?-1:1)*n*this.step,r>this.max&&(r=this.max),r<this.min&&(r=this.min),this.to(r,400,f))}},{key:"destroy",value:function(){this.handlers.forEach(function(t){t&&t.remove&&t.remove()})}}]),t}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){for(var i=0,r=e.length;i<r;i++){a(t,e[i],n)}}function a(t,e,n){(0,f.default)(t,e,{get:function(){return this["_"+e]},set:function(t){this["_"+e]=t,n()}})}function o(t){return"object"===("undefined"==typeof HTMLElement?"undefined":(0,u.default)(HTMLElement))?t instanceof HTMLElement:t&&"object"===(void 0===t?"undefined":(0,u.default)(t))&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName}function s(t,e){if(!t.hasOwnProperty("translateX")){var n=["translateX","translateY","translateZ","scaleX","scaleY","scaleZ","rotateX","rotateY","rotateZ","skewX","skewY","originX","originY","originZ"],i=o(t);e||n.push("perspective"),r(t,n,function(){var n=t.matrix3d.identity().appendTransform(t.translateX,t.translateY,t.translateZ,t.scaleX,t.scaleY,t.scaleZ,t.rotateX,t.rotateY,t.rotateZ,t.skewX,t.skewY,t.originX,t.originY,t.originZ),r=(e?"":"perspective("+t.perspective+"px) ")+"matrix3d("+Array.prototype.slice.call(n.elements).join(",")+")";i?(t.style.transform=r,t.style.msTransform=r,t.style.OTransform=r,t.style.MozTransform=r,t.style.webkitTransform=r):t.transform=r}),t.matrix3d=new h,e||(t.perspective=500),t.scaleX=1,t.scaleY=1,t.scaleZ=1,t.translateX=0,t.translateY=0,t.translateZ=0,t.rotateX=0,t.rotateY=0,t.rotateZ=0,t.skewX=0,t.skewY=0,t.originX=0,t.originY=0,t.originZ=0}}Object.defineProperty(e,"__esModule",{value:!0}),e.Transform=void 0;var l=n(19),u=i(l),c=n(73),f=i(c),d=.017453292519943295,h=function(t,e,n,i,r,a,o,s,l,u,c,f,d,h,p,v){this.elements=window.Float32Array?new Float32Array(16):[];var m=this.elements;m[0]=void 0!==t?t:1,m[4]=e||0,m[8]=n||0,m[12]=i||0,m[1]=r||0,m[5]=void 0!==a?a:1,m[9]=o||0,m[13]=s||0,m[2]=l||0,m[6]=u||0,m[10]=void 0!==c?c:1,m[14]=f||0,m[3]=d||0,m[7]=h||0,m[11]=p||0,m[15]=void 0!==v?v:1};h.prototype={set:function(t,e,n,i,r,a,o,s,l,u,c,f,d,h,p,v){var m=this.elements;return m[0]=t,m[4]=e,m[8]=n,m[12]=i,m[1]=r,m[5]=a,m[9]=o,m[13]=s,m[2]=l,m[6]=u,m[10]=c,m[14]=f,m[3]=d,m[7]=h,m[11]=p,m[15]=v,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},multiplyMatrices:function(t,e){var n=t.elements,i=this.elements,r=n[0],a=n[4],o=n[8],s=n[12],l=n[1],u=n[5],c=n[9],f=n[13],d=n[2],h=n[6],p=n[10],v=n[14],m=n[3],g=n[7],_=n[11],y=n[15],x=e[0],b=e[1],S=e[2],w=e[3],E=e[4],A=e[5],T=e[6],M=e[7],I=e[8],P=e[9],k=e[10],L=e[11],C=e[12],R=e[13],D=e[14],N=e[15];return i[0]=r*x+a*E+o*I+s*C,i[4]=r*b+a*A+o*P+s*R,i[8]=r*S+a*T+o*k+s*D,i[12]=r*w+a*M+o*L+s*N,i[1]=l*x+u*E+c*I+f*C,i[5]=l*b+u*A+c*P+f*R,i[9]=l*S+u*T+c*k+f*D,i[13]=l*w+u*M+c*L+f*N,i[2]=d*x+h*E+p*I+v*C,i[6]=d*b+h*A+p*P+v*R,i[10]=d*S+h*T+p*k+v*D,i[14]=d*w+h*M+p*L+v*N,i[3]=m*x+g*E+_*I+y*C,i[7]=m*b+g*A+_*P+y*R,i[11]=m*S+g*T+_*k+y*D,i[15]=m*w+g*M+_*L+y*N,this},_rounded:function(t,e){return e=Math.pow(10,e||15),Math.round(t*e)/e},_arrayWrap:function(t){return self.Float32Array?new Float32Array(t):t},appendTransform:function(t,e,n,i,r,a,o,s,l,u,c,f,h,p){var v=o*d,m=this._rounded(Math.cos(v)),g=this._rounded(Math.sin(v)),_=s*d,y=this._rounded(Math.cos(_)),x=this._rounded(Math.sin(_)),b=l*d,S=this._rounded(Math.cos(-1*b)),w=this._rounded(Math.sin(-1*b));return this.multiplyMatrices(this,this._arrayWrap([1,0,0,t,0,m,g,e,0,-g,m,n,0,0,0,1])),this.multiplyMatrices(this,this._arrayWrap([y,0,x,0,0,1,0,0,-x,0,y,0,0,0,0,1])),this.multiplyMatrices(this,this._arrayWrap([S*i,w*r,0,0,-w*i,S*r,0,0,0,0,1*a,0,0,0,0,1])),(u||c)&&this.multiplyMatrices(this,this._arrayWrap([this._rounded(Math.cos(u*d)),this._rounded(Math.sin(u*d)),0,0,-1*this._rounded(Math.sin(c*d)),this._rounded(Math.cos(c*d)),0,0,0,0,1,0,0,0,0,1])),(f||h||p)&&(this.elements[12]-=f*this.elements[0]+h*this.elements[4]+p*this.elements[8],this.elements[13]-=f*this.elements[1]+h*this.elements[5]+p*this.elements[9],this.elements[14]-=f*this.elements[2]+h*this.elements[6]+p*this.elements[10]),this}};var p=function(t,e,n,i,r,a){return this.a=null===t?1:t,this.b=e||0,this.c=n||0,this.d=null===i?1:i,this.tx=r||0,this.ty=a||0,this};p.prototype={identity:function(){return this.a=1,this.d=1,this.b=0,this.c=0,this.tx=0,this.ty=0,this},appendTransform:function(t,e,n,i,r,a,o,s,l){var u=void 0,c=void 0;if(r%360){var f=r*d;u=Math.cos(f),c=Math.sin(f)}else u=1,c=0;return a||o?(a*=d,o*=d,this.append(Math.cos(o),Math.sin(o),-Math.sin(a),Math.cos(a),t,e),this.append(u*n,c*n,-c*i,u*i,0,0)):this.append(u*n,c*n,-c*i,u*i,t,e),(s||l)&&(this.tx-=s*this.a+l*this.c,this.ty-=s*this.b+l*this.d),this},append:function(t,e,n,i,r,a){var o=this.a,s=this.b,l=this.c,u=this.d;return this.a=t*o+e*l,this.b=t*s+e*u,this.c=n*o+i*l,this.d=n*s+i*u,this.tx=r*o+a*l+this.tx,this.ty=r*s+a*u+this.ty,this},initialize:function(t,e,n,i,r,a){return this.a=t,this.b=e,this.c=n,this.d=i,this.tx=r,this.ty=a,this},setValues:function(t,e,n,i,r,a){return this.a=null===t?1:t,this.b=e||0,this.c=n||0,this.d=null===i?1:i,this.tx=r||0,this.ty=a||0,this},copy:function(t){return this.setValues(t.a,t.b,t.c,t.d,t.tx,t.ty)}},s.getMatrix3D=function(t){var e={translateX:0,translateY:0,translateZ:0,rotateX:0,rotateY:0,rotateZ:0,skewX:0,skewY:0,originX:0,originY:0,originZ:0,scaleX:1,scaleY:1,scaleZ:1};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return(new h).identity().appendTransform(e.translateX,e.translateY,e.translateZ,e.scaleX,e.scaleY,e.scaleZ,e.rotateX,e.rotateY,e.rotateZ,e.skewX,e.skewY,e.originX,e.originY,e.originZ).elements},s.getMatrix2D=function(t){var e={translateX:0,translateY:0,rotation:0,skewX:0,skewY:0,originX:0,originY:0,scaleX:1,scaleY:1};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return(new p).identity().appendTransform(e.translateX,e.translateY,e.scaleX,e.scaleY,e.rotation,e.skewX,e.skewY,e.originX,e.originY)};var v=s;e.Transform=v},function(t,e,n){"use strict";function i(t,e,n,i,r){var a=(e[1]-t[1])*(n[2]-t[2])-(e[2]-t[2])*(n[1]-t[1]),o=(e[2]-t[2])*(n[0]-t[0])-(e[0]-t[0])*(n[2]-t[2]),s=(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0]),l=Math.max(Math.abs(a),Math.abs(o),Math.abs(s));if(i>0&&l>0){var u=i/l;a*=u,o*=u,s*=u}return r=r||0,a+=r,o+=r,s+=r,[~~a,~~o,~~s]}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,n){"use strict";n(491);var i=n(108),r=function(t){return t&&t.__esModule?t:{default:t}}(i),a=n(44),o=n(57),s=window[o]||(window[o]={}),l=n(592),u=n(490),c=r.default.key,f=r.default.version,d=r.default.loadScriptTime;for(var h in l)l.hasOwnProperty(h)&&(s[h]=l[h]);s.Handler=u;var p=+new Date;(0,a.pv)({key:c,version:f,loadDeltaTime:p-d}),location.protocol.indexOf("file")>-1&&console.error("腾讯地图 JavaScript API 不支持在file协议使用，请在http或https协议下使用！"),t.exports=s},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(23),a=i(r),o=n(15),s=i(o),l=n(3),u=i(l),c=n(0),f=i(c),d=n(1),h=i(d),p=n(5),v=i(p),m=n(4),g=i(m),_=n(93),y=i(_),x=n(46),b=i(x),S=n(214),w=i(S),E=n(695),A=i(E),T=n(53),M=n(90),I=function(t){function e(t,n){(0,f.default)(this,e);var i=(0,v.default)(this,(e.__proto__||(0,u.default)(e)).call(this));return i._buildingId=t,i._cityId=t.substring(0,6),i._map=n.map,i._id="indoor_bulding_"+i._buildingId,i._manager=n.manager,i._buildingInfo=null,i._buildingBounds=null,i._isActiveStatus=!1,i._destroyed=!1,i._createLayer(n),i}return(0,g.default)(e,t),(0,h.default)(e,[{key:"isActive",value:function(){return this._isActiveStatus}},{key:"_setActiveStatus",value:function(t){this._isActiveStatus=t}},{key:"_createLayer",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._sourceId=this._id,this._map.addSource(this._sourceId,{type:M.SOURCE_TYPE.indoor,data:{buildingId:this._buildingId,cityId:this._cityId,indoorStyleId:e.indoorStyleId}}),this._regionLayer=new A.default((0,s.default)(e,{map:this._map,id:this._id+"_region",sourceId:this._sourceId,type:T.RENDER_LAYER_TYPE.indoorRegion})),this._poiLayer=new A.default((0,s.default)(e,{map:this._map,id:this._id+"_poi",sourceId:this._sourceId,type:T.RENDER_LAYER_TYPE.indoorPoi})),this._escalatorLayer=new A.default((0,s.default)(e,{map:this._map,id:this._id+"_escalator",sourceId:this._sourceId,type:T.RENDER_LAYER_TYPE.indoorEscalator})),this._map.getSource(this._sourceId).on("loaded",function(){t._destroyed||t.getManager().emit("building_source_loaded")})}},{key:"_setVisible",value:function(t){if(t!==this._visible){this._regionLayer.setVisible(t),this._poiLayer.setVisible(t),this._escalatorLayer.setVisible(t),this._visible=t;var e=t?"show":"hide";this.emit(e)}}},{key:"getVisible",value:function(){return this._visible}},{key:"setSelectedFloor",value:function(t){if(this.isActive()){var e=this.getSelectedFloor();if(this._map&&e!==t){this._map.getSource(this._sourceId).setSelectedFloor(t)<0?console.warn("该室内建筑物无对应楼层: ",t):this.emit("floor_changed")}}else console.warn("该室内建筑物处于非激活状态，该方法无效!");return this}},{key:"getMap",value:function(){return this._map}},{key:"getManager",value:function(){return this._manager}},{key:"getSelectedFloor",value:function(){if(this._map)return this._map.getSource(this._sourceId).getSelectedFloor()}},{key:"getBuildingInfo",value:function(){if(this._buildingInfo)return this._buildingInfo;var t=this._map&&this._map.getSource(this._sourceId),e=t&&t.getMetaData();return e&&(this._buildingInfo=this._formatBuildingInfo(e)),this._buildingInfo}},{key:"getBuildingInfoAsync",value:function(){var t=this;return new a.default(function(e){t._buildingInfo&&e(t._buildingInfo);var n=t._map&&t._map.getSource(t._sourceId),i=n&&n.getMetaData();i?(t._buildingInfo=t._formatBuildingInfo(i),e(t._buildingInfo)):n.once("loaded",function(){t._destroyed||(t._buildingInfo=t._formatBuildingInfo(n.getMetaData()),e(t._buildingInfo))})})}},{key:"_formatBuildingInfo",value:function(t){var e=t.floorInfo.bounds[0],n=t.floorInfo.bounds[1],i=new b.default(e.lat,e.lng),r=new b.default(n.lat,n.lng),a=new w.default(i,r);return this._buildingBounds=a,{cityId:this._cityId,buildingId:this._buildingId,buildingName:t.buildingName,defaultFloor:t.floorInfo.floorStrArr[t.floorInfo.defaultNum],center:new b.default(t.center.lat,t.center.lng),floorList:t.floorInfo.floorStrArr.map(function(t){return{name:t,bounds:a}}),bounds:a}}},{key:"destroy",value:function(){this._regionLayer=null,this._poiLayer=null,this._escalatorLayer=null,this._buildingId=null,this._cityId=null,this._map=null,this._id=null,this._manager=null,this._buildingInfo=null,this._buildingBounds=null,this._isActiveStatus=!1,this._destroyed=!0}},{key:"buildingId",get:function(){return this._buildingId}}]),e}(y.default);e.default=I},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var n=t.getActiveIndoorBuilding();if(e!==n){if(n&&(n._setActiveStatus(!1),n.off("floor_changed",t._onActiveIndoorBuildingFloorChange)),e&&(e._setActiveStatus(!0),e.on("floor_changed",t._onActiveIndoorBuildingFloorChange)),e){var i=e.getSelectedFloor(),r=e.buildingId;t._map.indoorStateChange({floorName:i,buildingId:r},null)}else t._map.indoorStateChange(null,!!e);t._activeIndoorBuilding=e,t._updateFloorControl().then(function(){t.emit("active_changed",t._activeIndoorBuilding)})}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(23),o=i(a),s=n(15),l=i(s),u=n(3),c=i(u),f=n(0),d=i(f),h=n(1),p=i(h),v=n(5),m=i(v),g=n(4),_=i(g),y=n(22),x=i(y),b=n(93),S=i(b),w=n(302),E=n(28),A=i(E),T=n(10),M=n(667),I=i(M),P=n(662),k=i(P),L=n(659),C=i(L),R=n(401),D=n(343),N=n(256),B=n(669),O=i(B),F=n(90),z={map:null,visible:!0,minZoom:x.default.minShowIndoorZoom,maxZoom:x.default.maxZoom},V=0,U=100,G=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.default)(this,e);var n=(0,m.default)(this,(e.__proto__||(0,c.default)(e)).call(this)),i=(0,l.default)({},z,t);return n._options=i,n._map=i.map,n._visible=i.visible,n._minZoom=i.minZoom,n._maxZoom=i.maxZoom,n._indexSource=null,n._indoorBuildingList=[],n._indoorBuildingIds=[],n._userBuildingIdList=null,n._autoActive=!0,n._activeIndoorBuilding=null,n._floorControl=null,n._initialized=!1,n._isFloorControlVisible=!0,n._indoorStyleId=V,n._onActiveIndoorBuildingFloorChange=n._onActiveIndoorBuildingFloorChange.bind(n),n._initializePromise=null,n.checkInitialize(i),n}return(0,_.default)(e,t),(0,p.default)(e,[{key:"checkInitialize",value:function(t){var e=this;if((0,T.isInRange)(this._map.getZoom(),this._minZoom,this._maxZoom))return void(this._initializePromise=this._init(t));this.changeInitListener=A.default.throttle(function(){(0,T.isInRange)(e._map.getZoom(),e._minZoom,e._maxZoom)&&!e._initializePromise&&(e._initializePromise=e._init(t))},50),this._map.on("zoom_changed",this.changeInitListener)}},{key:"_init",value:function(t){var e=this,n=D.IndoorStyleMap.getInstance(),i=this._indoorStyleId,r=0;return this.changeInitListener&&this._map.off("zoom_changed",this.changeInitListener),(0,w.checkKey)(this._map).then(function(t){var a=t&&t.indoor_map;r=a&&a.type;var o=a&&a.enable,s=a&&a.building_list;return 1===o&&Array.isArray(s)?(e._userBuildingIdList=s,n.has(i)?s:(0,R.loadIndoorStyleFile)(i).then(function(t){return t&&n.set(e._indoorStyleId,t),s})):null}).then(function(n){if(n){var i=n.length;U=i>0?i:U;var a=1===r?1:0;return e._map.on("moveend",A.default.debounce(e._createBuildingInView.bind(e,t,a),50)),e._map.on("zoom_changed",A.default.throttle(e._onMapZoomChanged.bind(e),50)),e._map.on("center_changed",A.default.throttle(e._onMapCenterChanged.bind(e),50)),e.on("building_source_loaded",e._onBuildingSourceLoaded.bind(e)),e._createBuildingInView(t,a)}}).then(function(){e._initialized=!0})}},{key:"_createBuildingInView",value:function(t,e){var n=this,i=this._getCityList();this._indexSource||(this._indexSource=this._map.layerResource&&this._map.layerResource.addIndoorIndexSource(F.SOURCE_TYPE.indoorIndex));var r=this._getViewBounds();return new o.default(function(a){n._indexSource&&n._indexSource.loadIndexData(i,r,e,function(e){var i=e;Array.isArray(n._userBuildingIdList)&&n._userBuildingIdList.length>0&&(i=e.filter(function(t){return n._userBuildingIdList.includes(t)})),n._createIndoorBuildingList(i,t),n._visibleCheck(),a()})})}},{key:"_getCityList",value:function(){var t=this._map.getZoom(),e=[];if((0,T.isInRange)(t,this._minZoom,this._maxZoom)){var n=this._map.getCenter();e=O.default.filter(function(t){var e=t.leftBottom,i=t.rightTop,r=n.getLat(),a=n.getLng();return(0,T.isInRange)(r,e.lat,i.lat)&&(0,T.isInRange)(a,e.lng,i.lng)}).map(function(t){return t.cityId})}return e}},{key:"_getViewBounds",value:function(){var t=this._map.getBounds();if(this._map.transform){var e=this._map.transform.latLngToCoord(t.getNorthEast(),20),n=e.x,i=e.y,r=this._map.transform.latLngToCoord(t.getSouthWest(),20);return{left:r.x,right:n,top:i,bottom:r.y}}}},{key:"_createIndoorBuildingList",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};0!==t.length&&(0===this._userBuildingIdList&&this._buildingNumLimitCheck(t),t.forEach(function(t){if(!e._indoorBuildingIds.includes(t)){var i=new I.default(t,(0,l.default)(n,{map:e._map,manager:e,indoorStyleId:e._indoorStyleId}));e._indoorBuildingList.push(i),e._indoorBuildingIds.push(t)}}))}},{key:"_buildingNumLimitCheck",value:function(t){var e=this,n=this._indoorBuildingIds.length,i=t.filter(function(t){return e._indoorBuildingIds.includes(t)}),r=i.length,a=t.length-r;if(n+a>U){for(var o=n+a-U,s=[],l=0;l<n&&(i.includes(this._indoorBuildingIds[l])||s.push(l),s.length!==o);l++);for(var u=0;u<o;u++){this._indoorBuildingIds.splice(s[u],1);var c=this._indoorBuildingList.splice(s[u],1)[0];c&&c.destroy(),c=null}}}},{key:"_onBuildingSourceLoaded",value:function(){this.getActiveIndoorBuilding()||this._autoActiveCheck()}},{key:"_onMapCenterChanged",value:function(){this._initialized&&this._autoActiveCheck()}},{key:"_onMapZoomChanged",value:function(){this._visibleCheck()}},{key:"_visibleCheck",value:function(){var t=this._map.getZoom();(0,T.isInRange)(t,this._minZoom,this._maxZoom)?this._visible&&this._indoorBuildingList.forEach(function(t){t._setVisible(!0)}):this._indoorBuildingList.forEach(function(t){t._setVisible(!1)})}},{key:"_autoActiveCheck",value:function(){var t=this;if(this._autoActive){var e=this._map.getCenter(),n=this._map.getZoom();n>=this._minZoom&&n<=this._maxZoom&&this._indoorBuildingList.length>0&&this._indoorBuildingList.some(function(n){var i=n.getBuildingInfo(),a=i&&i.bounds&&i.bounds.contains(e);return a&&r(t,n),a})||r(this,null)}}},{key:"_updateFloorControl",value:function(){var t=this,e=this.getActiveIndoorBuilding();return e?e.getBuildingInfoAsync().then(function(n){t._floorControl&&t._floorControl.buildingId===n.buildingId||(t._floorControl&&(t._map.removeControl(N.DEFAULT_CONTROL_ID.FLOOR),t._floorControl.destroy(),t._floorControl=null),t._floorControl=new k.default({id:N.DEFAULT_CONTROL_ID.FLOOR,position:C.default.BOTTOM_RIGHT,buildingId:n.buildingId,selectedFloor:e.getSelectedFloor()||n.defaultFloor,floorList:n.floorList}),t._map.addControl(t._floorControl),t._floorControl.on("floor-change",function(e){var n=e.floorName;t.getActiveIndoorBuilding()&&t.getActiveIndoorBuilding().setSelectedFloor(n)})),t._isFloorControlVisible&&t._floorControl.show()}):(this._floorControl&&this._floorControl.hide(),o.default.resolve())}},{key:"_onActiveIndoorBuildingFloorChange",value:function(){var t=this.getActiveIndoorBuilding();if(this._floorControl&&this._initialized&&t){var e=t.getSelectedFloor();this._map.indoorStateChange({floorName:e,buildingId:t.buildingId},null),this._floorControl.selectFloor(e)}}},{key:"initialize",value:function(){return this._initializePromise||(this._initializePromise=this._init()),this._initializePromise}},{key:"setAutoActive",value:function(t){return this._autoActive=!!t,this._autoActiveCheck(),this}},{key:"setActiveIndoorBuilding",value:function(t){if(this._initialized||console.warn("室内地图管理器尚未初始化完毕，该方法无效!"),this._autoActive)return console.warn("自动激活模式下，该方法无效!"),this;if(!t)return r(this,null),this;var e=this.getIndoorBuilding(t);return e&&r(this,e),this}},{key:"setVisible",value:function(t){t=!!t,this._visible=t;var e=this._map.getZoom();return t&&!(0,T.isInRange)(e,this._minZoom,this._maxZoom)?this:(this._indoorBuildingList.forEach(function(e){e._setVisible(t)}),this)}},{key:"showFloorControl",value:function(){this.getActiveIndoorBuilding()&&(this._isFloorControlVisible=!0,this._floorControl&&this._floorControl.show())}},{key:"hideFloorControl",value:function(){this._isFloorControlVisible=!1,this._floorControl&&this._floorControl.hide()}},{key:"getMap",value:function(){return this._map}},{key:"getAutoActive",value:function(){return this._autoActive}},{key:"getActiveIndoorBuilding",value:function(){return this._initialized||console.warn("室内地图管理器尚未初始化完毕，该方法无效!"),this._activeIndoorBuilding}},{key:"getVisible",value:function(){return this._visible}},{key:"getIndoorBuilding",value:function(t){return this._initialized||console.warn("室内地图管理器尚未初始化完毕，该方法无效!"),"string"!=typeof t?(console.error("室内地图管理器：请传入正确的buildingId"),null):(this._userBuildingIdList&&!this._indoorBuildingIds.includes(t)&&(0===this._userBuildingIdList.length||this._userBuildingIdList.includes(t))&&this._createIndoorBuildingList([t],this._options),this._indoorBuildingList.filter(function(e){return e.buildingId===t})[0]||null)}},{key:"getIndoorBuildingList",value:function(){var t=this;if(!this._userBuildingIdList)return[];if(Array.isArray(this._userBuildingIdList)&&0===this._userBuildingIdList.length)return[];var e=this._userBuildingIdList.filter(function(e){return!t._indoorBuildingIds.includes(e)});return e.length>0&&this._createIndoorBuildingList(e,this._options),this._indoorBuildingList}},{key:"destroy",value:function(){this.removeAllListeners(),this._floorControl&&this._floorControl.destroy(),this._indexSource=null,this._indoorBuildingList&&this._indoorBuildingList.length>0&&this._indoorBuildingList.forEach(function(t){t.destroy()}),this._indoorBuildingList=null,this._indoorBuildingIds=null,this._userBuildingIdList=null}}],[{key:"getInstance",value:function(t){return this(t)}}]),e}(S.default);e.default=G},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=[{cityId:1,cityName:"阿坝藏族羌族自治州",leftBottom:{lng:100.527191,lat:30.5941792},rightTop:{lng:104.437462,lat:34.3129807}},{cityId:2,cityName:"阿克苏地区",leftBottom:{lng:78.0278625,lat:39.46632},rightTop:{lng:84.0897293,lat:42.6467705}},{cityId:3,cityName:"阿拉尔市",leftBottom:{lng:80.5910263,lat:40.3629417},rightTop:{lng:81.9546509,lat:40.9459915}},{cityId:4,cityName:"阿拉善盟",leftBottom:{lng:97.1728973,lat:37.4060097},rightTop:{lng:106.870407,lat:42.7955093}},{cityId:5,cityName:"阿勒泰地区",leftBottom:{lng:85.5280609,lat:45.0013466},rightTop:{lng:91.0756912,lat:49.1796417}},{cityId:6,cityName:"阿里地区",leftBottom:{lng:78.3958511,lat:29.6754494},rightTop:{lng:86.3286438,lat:35.8606606}},{cityId:7,cityName:"安康市",leftBottom:{lng:108.025841,lat:31.7050705},rightTop:{lng:110.206619,lat:33.8416901}},{cityId:8,cityName:"安庆市",leftBottom:{lng:115.762444,lat:29.7817001},rightTop:{lng:117.742203,lat:31.2683601}},{cityId:9,cityName:"鞍山市",leftBottom:{lng:122.187637,lat:40.0004501},rightTop:{lng:123.76844,lat:41.5684013}},{cityId:10,cityName:"安顺市",leftBottom:{lng:105.248627,lat:25.3531303},rightTop:{lng:106.571159,lat:26.6234398}},{cityId:11,cityName:"安阳市",leftBottom:{lng:113.633263,lat:35.2048492},rightTop:{lng:114.989021,lat:36.3664703}},{cityId:12,cityName:"澳門特別行政區",leftBottom:{lng:113.532799,lat:22.1022892},rightTop:{lng:113.610321,lat:22.2143898}},{cityId:13,cityName:"白城市",leftBottom:{lng:121.641777,lat:44.2273903},rightTop:{lng:124.369949,lat:46.3047295}},{cityId:14,cityName:"百色市",leftBottom:{lng:104.45018,lat:22.8547001},rightTop:{lng:107.88459,lat:25.0993195}},{cityId:15,cityName:"白沙黎族自治县",leftBottom:{lng:109.038727,lat:18.9357204},rightTop:{lng:109.701729,lat:19.4867706}},{cityId:16,cityName:"白山市",leftBottom:{lng:126.12088,lat:41.3637886},rightTop:{lng:128.31842,lat:42.8214684}},{cityId:17,cityName:"白银市",leftBottom:{lng:103.555313,lat:35.4118881},rightTop:{lng:105.524643,lat:37.6380882}},{cityId:18,cityName:"保定市",leftBottom:{lng:113.767166,lat:38.2375298},rightTop:{lng:116.335167,lat:39.95224}},{cityId:19,cityName:"宝鸡市",leftBottom:{lng:106.310501,lat:33.579361},rightTop:{lng:108.05732,lat:35.1055908}},{cityId:20,cityName:"保山市",leftBottom:{lng:98.0895004,lat:24.1221294},rightTop:{lng:100.047417,lat:25.8563404}},{cityId:21,cityName:"保亭黎族苗族自治县",leftBottom:{lng:109.405197,lat:18.3876495},rightTop:{lng:109.852119,lat:18.83354}},{cityId:22,cityName:"包头市",leftBottom:{lng:109.254807,lat:40.2477493},rightTop:{lng:111.445999,lat:42.7367783}},{cityId:23,cityName:"巴彦淖尔市",leftBottom:{lng:105.19912,lat:40.1707306},rightTop:{lng:109.904839,lat:42.4640388}},{cityId:24,cityName:"巴音郭楞蒙古自治州",leftBottom:{lng:82.4704132,lat:35.639389},rightTop:{lng:93.8679123,lat:43.5614319}},{cityId:25,cityName:"巴中市",leftBottom:{lng:106.36805,lat:31.25173},rightTop:{lng:107.761841,lat:32.7391319}},{cityId:26,cityName:"北海市",leftBottom:{lng:108.848152,lat:20.8681602},rightTop:{lng:109.792152,lat:21.9190407}},{cityId:27,cityName:"北京市",leftBottom:{lng:115.423866,lat:39.4396019},rightTop:{lng:117.506706,lat:41.0608292}},{cityId:28,cityName:"蚌埠市",leftBottom:{lng:116.73571,lat:32.7119484},rightTop:{lng:118.075287,lat:33.5029106}},{cityId:29,cityName:"本溪市",leftBottom:{lng:123.589394,lat:40.816349},rightTop:{lng:125.791267,lat:41.5696411}},{cityId:30,cityName:"毕节市",leftBottom:{lng:103.602074,lat:26.3577995},rightTop:{lng:106.726822,lat:27.7762299}},{cityId:31,cityName:"滨州市",leftBottom:{lng:117.264549,lat:36.6877708},rightTop:{lng:118.380569,lat:38.3085785}},{cityId:32,cityName:"博尔塔拉蒙古自治州",leftBottom:{lng:79.8846817,lat:44.004612},rightTop:{lng:83.8048172,lat:45.3883896}},{cityId:33,cityName:"亳州市",leftBottom:{lng:115.545723,lat:32.8593216},rightTop:{lng:116.832817,lat:34.0696716}},{cityId:34,cityName:"沧州市",leftBottom:{lng:115.702438,lat:37.4709206},rightTop:{lng:117.953407,lat:38.9453011}},{cityId:35,cityName:"长春市",leftBottom:{lng:124.543671,lat:43.2640915},rightTop:{lng:127.09449,lat:45.2520523}},{cityId:36,cityName:"常德市",leftBottom:{lng:110.491577,lat:28.4049091},rightTop:{lng:112.305939,lat:30.1263695}},{cityId:37,cityName:"昌都市",leftBottom:{lng:93.5946198,lat:28.4352398},rightTop:{lng:99.110817,lat:32.5928612}},{cityId:38,cityName:"昌江黎族自治县",leftBottom:{lng:108.600777,lat:18.8782406},rightTop:{lng:109.29821,lat:19.5490608}},{cityId:39,cityName:"昌吉回族自治州",leftBottom:{lng:85.5804825,lat:43.1013985},rightTop:{lng:91.5870132,lat:45.4880676}},{cityId:40,cityName:"长沙市",leftBottom:{lng:111.896248,lat:27.8480892},rightTop:{lng:114.261261,lat:28.6616306}},{cityId:41,cityName:"长治市",leftBottom:{lng:111.981598,lat:35.8231201},rightTop:{lng:113.739258,lat:37.1247711}},{cityId:42,cityName:"常州市",leftBottom:{lng:119.140572,lat:31.1525402},rightTop:{lng:120.201859,lat:32.0591393}},{cityId:43,cityName:"朝阳市",leftBottom:{lng:118.84597,lat:40.6007118},rightTop:{lng:121.300911,lat:42.3829689}},{cityId:44,cityName:"潮州市",leftBottom:{lng:116.36805,lat:23.4261494},rightTop:{lng:117.206261,lat:24.23279}},{cityId:45,cityName:"承德市",leftBottom:{lng:115.908173,lat:40.1918907},rightTop:{lng:119.25309,lat:42.6180382}},{cityId:46,cityName:"成都市",leftBottom:{lng:103.023376,lat:30.0939312},rightTop:{lng:104.892853,lat:31.4346695}},{cityId:47,cityName:"澄迈县",leftBottom:{lng:109.725159,lat:19.372879},rightTop:{lng:110.261864,lat:20.0893803}},{cityId:48,cityName:"郴州市",leftBottom:{lng:112.229713,lat:24.8905201},rightTop:{lng:114.237503,lat:26.8396797}},{cityId:49,cityName:"赤峰市",leftBottom:{lng:116.367401,lat:41.285511},rightTop:{lng:120.987038,lat:45.2432518}},{cityId:50,cityName:"池州市",leftBottom:{lng:116.648598,lat:29.5614605},rightTop:{lng:118.131439,lat:30.8452892}},{cityId:51,cityName:"重庆市",leftBottom:{lng:105.289787,lat:28.1602497},rightTop:{lng:110.200401,lat:32.2011986}},{cityId:52,cityName:"崇左市",leftBottom:{lng:106.56028,lat:21.594059},rightTop:{lng:108.112556,lat:23.3547306}},{cityId:53,cityName:"楚雄彝族自治州",leftBottom:{lng:100.721611,lat:24.2197895},rightTop:{lng:102.482277,lat:26.4988899}},{cityId:54,cityName:"滁州市",leftBottom:{lng:117.16095,lat:31.8509197},rightTop:{lng:119.22979,lat:33.216671}},{cityId:55,cityName:"大连市",leftBottom:{lng:120.920418,lat:38.250061},rightTop:{lng:123.534721,lat:40.2038498}},{cityId:56,cityName:"大理白族自治州",leftBottom:{lng:98.8642807,lat:24.6606007},rightTop:{lng:101.04641,lat:26.696579}},{cityId:57,cityName:"丹东市",leftBottom:{lng:117.608596,lat:36.843903},rightTop:{lng:137.14943,lat:43.72608}},{cityId:58,cityName:"儋州市",leftBottom:{lng:108.891983,lat:19.1788597},rightTop:{lng:109.766167,lat:19.9512997}},{cityId:59,cityName:"大庆市",leftBottom:{lng:123.755363,lat:45.3827896},rightTop:{lng:125.79126,lat:47.47612}},{cityId:60,cityName:"大同市",leftBottom:{lng:112.579514,lat:39.0481491},rightTop:{lng:114.562531,lat:40.7433701}},{cityId:61,cityName:"大兴安岭地区",leftBottom:{lng:121.182663,lat:50.9030266},rightTop:{lng:127.029572,lat:53.5634804}},{cityId:62,cityName:"达州市",leftBottom:{lng:106.6661,lat:30.3247604},rightTop:{lng:108.54673,lat:32.3382301}},{cityId:63,cityName:"德宏傣族景颇族自治州",leftBottom:{lng:97.5288391,lat:23.8391094},rightTop:{lng:98.7270432,lat:25.33605}},{cityId:64,cityName:"德阳市",leftBottom:{lng:103.795441,lat:30.5235405},rightTop:{lng:105.17466,lat:31.6984806}},{cityId:65,cityName:"德州市",leftBottom:{lng:115.75869,lat:36.4085388},rightTop:{lng:117.6073,lat:38.0099792}},{cityId:66,cityName:"定安县",leftBottom:{lng:110.123848,lat:19.2112808},rightTop:{lng:110.552711,lat:19.7281208}},{cityId:67,cityName:"定西市",leftBottom:{lng:103.467056,lat:34.1242905},rightTop:{lng:105.64782,lat:36.0434189}},{cityId:68,cityName:"迪庆藏族自治州",leftBottom:{lng:98.5940475,lat:26.8659992},rightTop:{lng:100.309219,lat:29.2484894}},{cityId:69,cityName:"东方市",leftBottom:{lng:108.572449,lat:18.7147293},rightTop:{lng:109.126282,lat:19.3674297}},{cityId:70,cityName:"东莞市",leftBottom:{lng:113.521858,lat:22.65555},rightTop:{lng:114.260269,lat:23.1431999}},{cityId:71,cityName:"东营市",leftBottom:{lng:118.105743,lat:36.9369011},rightTop:{lng:119.342072,lat:38.1630707}},{cityId:72,cityName:"鄂尔多斯市",leftBottom:{lng:106.475952,lat:37.6173286},rightTop:{lng:111.463211,lat:40.8837891}},{cityId:73,cityName:"恩施土家族苗族自治州",leftBottom:{lng:108.36776,lat:29.1143303},rightTop:{lng:110.642776,lat:31.3971806}},{cityId:74,cityName:"鄂州市",leftBottom:{lng:114.506058,lat:30.0165501},rightTop:{lng:115.091293,lat:30.6148701}},{cityId:75,cityName:"防城港市",leftBottom:{lng:107.48481,lat:21.4794598},rightTop:{lng:108.607368,lat:22.3736801}},{cityId:76,cityName:"佛山市",leftBottom:{lng:112.390572,lat:22.6437092},rightTop:{lng:113.391747,lat:23.5727692}},{cityId:77,cityName:"福州市",leftBottom:{lng:118.384598,lat:25.2075596},rightTop:{lng:120.532837,lat:26.6392307}},{cityId:78,cityName:"抚州市",leftBottom:{lng:115.591858,lat:26.4950104},rightTop:{lng:117.303299,lat:28.4933796}},{cityId:79,cityName:"抚顺市",leftBottom:{lng:123.669518,lat:41.2389412},rightTop:{lng:125.489891,lat:42.4778481}},{cityId:80,cityName:"阜新市",leftBottom:{lng:121.019867,lat:41.6928291},rightTop:{lng:122.976601,lat:42.8437309}},{cityId:81,cityName:"阜阳市",leftBottom:{lng:114.8825,lat:32.4035416},rightTop:{lng:116.635048,lat:33.5840912}},{cityId:82,cityName:"甘南藏族自治州",leftBottom:{lng:100.764427,lat:33.1030006},rightTop:{lng:104.76194,lat:35.5940895}},{cityId:83,cityName:"赣州市",leftBottom:{lng:113.913612,lat:24.4862404},rightTop:{lng:116.64431,lat:27.1436405}},{cityId:84,cityName:"甘孜藏族自治州",leftBottom:{lng:97.3528519,lat:27.9609203},rightTop:{lng:102.494583,lat:34.1957703}},{cityId:85,cityName:"广安市",leftBottom:{lng:105.947571,lat:30.0171814},rightTop:{lng:107.314011,lat:30.852869}},{cityId:86,cityName:"广元市",leftBottom:{lng:104.61628,lat:31.5252304},rightTop:{lng:106.766747,lat:32.9328995}},{cityId:87,cityName:"广州市",leftBottom:{lng:112.96196,lat:22.5145607},rightTop:{lng:114.059258,lat:23.9292698}},{cityId:88,cityName:"贵港市",leftBottom:{lng:109.20845,lat:22.6535206},rightTop:{lng:110.662659,lat:24.0421696}},{cityId:89,cityName:"桂林市",leftBottom:{lng:109.618279,lat:24.2535},rightTop:{lng:111.492561,lat:26.3854103}},{cityId:90,cityName:"贵阳市",leftBottom:{lng:106.124077,lat:26.1840305},rightTop:{lng:107.2798,lat:27.3553791}},{cityId:91,cityName:"果洛藏族自治州",leftBottom:{lng:96.9792175,lat:32.5127792},rightTop:{lng:101.778862,lat:35.5824699}},{cityId:92,cityName:"固原市",leftBottom:{lng:105.32505,lat:35.2382889},rightTop:{lng:106.958679,lat:36.5176315}},{cityId:93,cityName:"哈尔滨市",leftBottom:{lng:125.688599,lat:44.0616989},rightTop:{lng:130.240707,lat:46.6744576}},{cityId:94,cityName:"海北藏族自治州",leftBottom:{lng:98.0933533,lat:36.7344704},rightTop:{lng:102.642166,lat:39.090271}},{cityId:95,cityName:"海东市",leftBottom:{lng:101.666412,lat:35.4483185},rightTop:{lng:103.072693,lat:37.1489296}},{cityId:96,cityName:"海口市",leftBottom:{lng:110.069496,lat:19.5237503},rightTop:{lng:110.709084,lat:20.1800804}},{cityId:97,cityName:"海南藏族自治州",leftBottom:{lng:98.9322205,lat:34.6409912},rightTop:{lng:101.799133,lat:37.2373505}},{cityId:98,cityName:"海西蒙古族藏族自治州",leftBottom:{lng:89.6401367,lat:32.7208214},rightTop:{lng:99.78508,lat:39.2215195}},{cityId:99,cityName:"哈密地区",leftBottom:{lng:91.1776886,lat:40.7524414},rightTop:{lng:96.3890991,lat:45.0900536}},{cityId:100,cityName:"邯郸市",leftBottom:{lng:113.46228,lat:36.048851},rightTop:{lng:115.4841,lat:37.022171}},{cityId:101,cityName:"杭州市",leftBottom:{lng:118.344948,lat:29.1887302},rightTop:{lng:120.721947,lat:30.5664806}},{cityId:102,cityName:"汉中市",leftBottom:{lng:105.491577,lat:32.146019},rightTop:{lng:108.284073,lat:33.8785019}},{cityId:103,cityName:"鹤壁市",leftBottom:{lng:113.996048,lat:35.4426689},rightTop:{lng:114.758102,lat:36.0485992}},{cityId:104,cityName:"河池市",leftBottom:{lng:106.571083,lat:23.5531693},rightTop:{lng:109.161217,lat:25.6107407}},{cityId:105,cityName:"合肥市",leftBottom:{lng:116.687492,lat:30.9508095},rightTop:{lng:117.965851,lat:32.5360794}},{cityId:106,cityName:"鹤岗市",leftBottom:{lng:129.673492,lat:47.0608521},rightTop:{lng:132.524826,lat:48.3533325}},{cityId:107,cityName:"黑河市",leftBottom:{lng:124.74855,lat:47.5869026},rightTop:{lng:129.537567,lat:51.0035477}},{cityId:108,cityName:"衡水市",leftBottom:{lng:115.19146,lat:37.0597992},rightTop:{lng:116.56501,lat:38.3703995}},{cityId:109,cityName:"衡阳市",leftBottom:{lng:111.54361,lat:26.1142292},rightTop:{lng:113.283943,lat:27.4670391}},{cityId:110,cityName:"和田地区",leftBottom:{lng:77.4038315,lat:34.3325081},rightTop:{lng:84.9199219,lat:39.6336403}},{cityId:111,cityName:"河源市",leftBottom:{lng:114.241814,lat:23.1641808},rightTop:{lng:115.59301,lat:24.7810192}},{cityId:112,cityName:"菏泽市",leftBottom:{lng:114.823349,lat:34.5508614},rightTop:{lng:116.414032,lat:35.8635483}},{cityId:113,cityName:"贺州市",leftBottom:{lng:110.57074,lat:23.6517391},rightTop:{lng:112.061867,lat:25.1515808}},{cityId:114,cityName:"红河哈尼族彝族自治州",leftBottom:{lng:101.80204,lat:22.4412899},rightTop:{lng:104.282463,lat:24.7642708}},{cityId:115,cityName:"淮安市",leftBottom:{lng:118.21949,lat:32.7160492},rightTop:{lng:119.645187,lat:34.0930214}},{cityId:116,cityName:"淮北市",leftBottom:{lng:116.3937,lat:33.2784386},rightTop:{lng:117.058311,lat:34.2487183}},{cityId:117,cityName:"怀化市",leftBottom:{lng:108.790848,lat:25.8655605},rightTop:{lng:111.113068,lat:29.0210991}},{cityId:118,cityName:"淮南市",leftBottom:{lng:116.364891,lat:32.3860397},rightTop:{lng:117.215286,lat:33.003521}},{cityId:119,cityName:"黄冈市",leftBottom:{lng:114.402023,lat:29.7205601},rightTop:{lng:116.136841,lat:31.6047497}},{cityId:120,cityName:"黄南藏族自治州",leftBottom:{lng:100.68679,lat:34.0640984},rightTop:{lng:102.456642,lat:36.1696205}},{cityId:121,cityName:"黄山市",leftBottom:{lng:117.202583,lat:29.3929996},rightTop:{lng:118.902573,lat:30.5166492}},{cityId:122,cityName:"黄石市",leftBottom:{lng:114.531693,lat:29.5069904},rightTop:{lng:115.510941,lat:30.33041}},{cityId:123,cityName:"呼和浩特市",leftBottom:{lng:110.5187,lat:39.5889397},rightTop:{lng:112.30896,lat:41.3858604}},{cityId:124,cityName:"惠州市",leftBottom:{lng:113.812828,lat:22.3743896},rightTop:{lng:115.41877,lat:23.9594307}},{cityId:125,cityName:"葫芦岛市",leftBottom:{lng:119.216583,lat:39.954071},rightTop:{lng:121.101257,lat:41.2059708}},{cityId:126,cityName:"呼伦贝尔市",leftBottom:{lng:115.528923,lat:47.0968704},rightTop:{lng:126.07608,lat:53.3356628}},{cityId:127,cityName:"湖州市",leftBottom:{lng:119.236954,lat:30.3732891},rightTop:{lng:120.490501,lat:31.1787891}},{cityId:128,cityName:"佳木斯市",leftBottom:{lng:129.507706,lat:45.9452362},rightTop:{lng:135.09726,lat:48.4652023}},{cityId:129,cityName:"江门市",leftBottom:{lng:112.003487,lat:21.4434299},rightTop:{lng:113.263329,lat:22.8528194}},{cityId:130,cityName:"吉安市",leftBottom:{lng:113.834587,lat:25.9722195},rightTop:{lng:115.935379,lat:27.9613094}},{cityId:131,cityName:"焦作市",leftBottom:{lng:112.568733,lat:34.8115196},rightTop:{lng:113.646973,lat:35.4944992}},{cityId:132,cityName:"嘉兴市",leftBottom:{lng:120.295967,lat:30.2451706},rightTop:{lng:121.541481,lat:31.0303497}},{cityId:133,cityName:"嘉峪关市",leftBottom:{lng:97.8316422,lat:39.6320496},rightTop:{lng:98.5236893,lat:39.9784012}},{cityId:134,cityName:"揭阳市",leftBottom:{lng:115.61335,lat:22.8476601},rightTop:{lng:116.636101,lat:23.7733994}},{cityId:135,cityName:"吉林市",leftBottom:{lng:125.650551,lat:42.5628281},rightTop:{lng:128.017487,lat:44.6469116}},{cityId:136,cityName:"济南市",leftBottom:{lng:116.223824,lat:36.0293388},rightTop:{lng:117.747437,lat:37.5390282}},{cityId:137,cityName:"金昌市",leftBottom:{lng:101.41864,lat:38.0237007},rightTop:{lng:102.734329,lat:38.9994812}},{cityId:138,cityName:"晋城市",leftBottom:{lng:111.939537,lat:35.2033615},rightTop:{lng:113.625061,lat:36.0641708}},{cityId:139,cityName:"景德镇市",leftBottom:{lng:116.962708,lat:28.7178898},rightTop:{lng:117.71064,lat:29.9314899}},{cityId:140,cityName:"荆门市",leftBottom:{lng:111.860252,lat:30.3902397},rightTop:{lng:113.490494,lat:31.6106396}},{cityId:141,cityName:"荆州市",leftBottom:{lng:111.243797,lat:29.4276199},rightTop:{lng:114.091049,lat:30.6581097}},{cityId:142,cityName:"金华市",leftBottom:{lng:119.228706,lat:28.5226898},rightTop:{lng:120.783852,lat:29.6822205}},{cityId:143,cityName:"济宁市",leftBottom:{lng:115.866364,lat:34.4502602},rightTop:{lng:117.597542,lat:35.9813309}},{cityId:144,cityName:"晋中市",leftBottom:{lng:111.408463,lat:36.6441498},rightTop:{lng:114.139923,lat:38.0931816}},{cityId:145,cityName:"锦州市",leftBottom:{lng:120.717194,lat:40.7294807},rightTop:{lng:122.600273,lat:42.1297379}},{cityId:146,cityName:"九江市",leftBottom:{lng:113.942047,lat:28.6851692},rightTop:{lng:116.904037,lat:30.0746002}},{cityId:147,cityName:"酒泉市",leftBottom:{lng:92.3222809,lat:38.1041794},rightTop:{lng:100.20182,lat:42.7955093}},{cityId:148,cityName:"鸡西市",leftBottom:{lng:130.399857,lat:44.53383},rightTop:{lng:133.949524,lat:46.6113396}},{cityId:149,cityName:"济源市",leftBottom:{lng:112.036949,lat:34.8956909},rightTop:{lng:112.767319,lat:35.2798004}},{cityId:150,cityName:"开封市",leftBottom:{lng:113.877296,lat:34.1970482},rightTop:{lng:115.26548,lat:35.0226517}},{cityId:151,cityName:"喀什地区",leftBottom:{lng:74.4605026,lat:35.4513206},rightTop:{lng:79.8657608,lat:40.2581711}},{cityId:152,cityName:"克拉玛依市",leftBottom:{lng:84.5517731,lat:44.1077805},rightTop:{lng:86.036171,lat:46.2131767}},{cityId:153,cityName:"克孜勒苏柯尔克孜自治州",leftBottom:{lng:73.4909286,lat:37.6508789},rightTop:{lng:78.8792191,lat:41.3994408}},{cityId:154,cityName:"昆明市",leftBottom:{lng:102.168663,lat:24.38521},rightTop:{lng:103.673592,lat:26.5426903}},{cityId:155,cityName:"来宾市",leftBottom:{lng:108.418243,lat:23.2688408},rightTop:{lng:110.458473,lat:24.4675598}},{cityId:156,cityName:"莱芜市",leftBottom:{lng:117.331367,lat:35.9906311},rightTop:{lng:117.974678,lat:36.552948}},{cityId:157,cityName:"廊坊市",leftBottom:{lng:116.116913,lat:38.4735794},rightTop:{lng:117.260078,lat:40.0967293}},{cityId:158,cityName:"兰州市",leftBottom:{lng:102.600906,lat:35.5711288},rightTop:{lng:104.576378,lat:37.0364189}},{cityId:159,cityName:"拉萨市",leftBottom:{lng:89.7535477,lat:29.2380791},rightTop:{lng:92.6215668,lat:31.0558205}},{cityId:160,cityName:"乐东黎族自治县",leftBottom:{lng:108.64994,lat:18.2978306},rightTop:{lng:109.407997,lat:18.9620495}},{cityId:161,cityName:"乐山市",leftBottom:{lng:102.911041,lat:28.4202309},rightTop:{lng:104.252129,lat:29.9285908}},{cityId:162,cityName:"凉山彝族自治州",leftBottom:{lng:100.061317,lat:26.0457802},rightTop:{lng:103.877457,lat:29.3026409}},{cityId:163,cityName:"连云港市",leftBottom:{lng:118.408463,lat:33.979599},rightTop:{lng:119.850807,lat:35.1229095}},{cityId:164,cityName:"聊城市",leftBottom:{lng:115.282509,lat:35.7792015},rightTop:{lng:116.545616,lat:37.0232506}},{cityId:165,cityName:"辽阳市",leftBottom:{lng:122.590973,lat:40.7083397},rightTop:{lng:123.688843,lat:41.6118279}},{cityId:166,cityName:"辽源市",leftBottom:{lng:124.840012,lat:42.2995682},rightTop:{lng:125.843849,lat:43.2328987}},{cityId:167,cityName:"丽江市",leftBottom:{lng:99.3820267,lat:25.9848804},rightTop:{lng:101.51403,lat:27.9242191}},{cityId:168,cityName:"临沧市",leftBottom:{lng:98.6727905,lat:23.0779896},rightTop:{lng:100.547028,lat:25.0324001}},{cityId:169,cityName:"临汾市",leftBottom:{lng:110.374191,lat:35.3865089},rightTop:{lng:112.57444,lat:36.9346809}},{cityId:170,cityName:"临高县",leftBottom:{lng:109.49408,lat:19.5733795},rightTop:{lng:109.897087,lat:20.0396595}},{cityId:171,cityName:"陵水黎族自治县",leftBottom:{lng:109.755768,lat:18.2743607},rightTop:{lng:110.229263,lat:18.8091908}},{cityId:172,cityName:"临夏回族自治州",leftBottom:{lng:102.685997,lat:34.9414787},rightTop:{lng:103.858818,lat:36.2103004}},{cityId:173,cityName:"临沂市",leftBottom:{lng:117.418716,lat:34.3773499},rightTop:{lng:119.203239,lat:36.2068405}},{cityId:174,cityName:"林芝市",leftBottom:{lng:92.1635284,lat:27.5596104},rightTop:{lng:98.7536392,lat:30.6712303}},{cityId:175,cityName:"丽水市",leftBottom:{lng:118.699173,lat:27.4168701},rightTop:{lng:120.438812,lat:28.9501591}},{cityId:176,cityName:"六盘水市",leftBottom:{lng:104.308571,lat:25.3223705},rightTop:{lng:105.721603,lat:26.9198208}},{cityId:177,cityName:"柳州市",leftBottom:{lng:108.5877,lat:23.9060192},rightTop:{lng:110.177963,lat:26.0515099}},{cityId:178,cityName:"陇南市",leftBottom:{lng:104.023758,lat:32.5941086},rightTop:{lng:106.583961,lat:34.5327415}},{cityId:179,cityName:"龙岩市",leftBottom:{lng:115.853439,lat:24.3703594},rightTop:{lng:117.753151,lat:26.0330791}},{cityId:180,cityName:"娄底市",leftBottom:{lng:110.772034,lat:27.2053204},rightTop:{lng:112.524193,lat:28.2342796}},{cityId:181,cityName:"六安市",leftBottom:{lng:115.371033,lat:31.008419},rightTop:{lng:117.25489,lat:32.6611099}},{cityId:182,cityName:"漯河市",leftBottom:{lng:113.461662,lat:33.4047318},rightTop:{lng:114.29541,lat:33.9852104}},{cityId:183,cityName:"洛阳市",leftBottom:{lng:111.138443,lat:33.5629883},rightTop:{lng:112.984749,lat:35.0709305}},{cityId:184,cityName:"泸州市",leftBottom:{lng:105.145111,lat:27.6595192},rightTop:{lng:106.380608,lat:29.3267193}},{cityId:185,cityName:"吕梁市",leftBottom:{lng:110.375908,lat:36.7321091},rightTop:{lng:112.329323,lat:38.7314987}},{cityId:186,cityName:"马鞍山市",leftBottom:{lng:117.896248,lat:31.2918797},rightTop:{lng:118.888832,lat:32.0581093}},{cityId:187,cityName:"茂名市",leftBottom:{lng:110.325279,lat:21.3386803},rightTop:{lng:111.68351,lat:22.7048607}},{cityId:188,cityName:"眉山市",leftBottom:{lng:102.8526,lat:29.4004898},rightTop:{lng:104.503937,lat:30.3617306}},{cityId:189,cityName:"梅州市",leftBottom:{lng:115.315277,lat:23.3734493},rightTop:{lng:116.941513,lat:24.9373608}},{cityId:190,cityName:"绵阳市",leftBottom:{lng:103.748787,lat:30.7056789},rightTop:{lng:105.726219,lat:33.0419884}},{cityId:191,cityName:"牡丹江市",leftBottom:{lng:128.230911,lat:43.4264488},rightTop:{lng:131.322891,lat:45.9873085}},{cityId:192,cityName:"南昌市",leftBottom:{lng:115.438721,lat:28.1574993},rightTop:{lng:116.565491,lat:29.1733303}},{cityId:193,cityName:"南充市",leftBottom:{lng:105.444649,lat:30.4580097},rightTop:{lng:106.968391,lat:31.8483696}},{cityId:194,cityName:"南京市",leftBottom:{lng:118.362877,lat:31.2292004},rightTop:{lng:119.240486,lat:32.6129684}},{cityId:195,cityName:"南宁市",leftBottom:{lng:107.329353,lat:22.2025299},rightTop:{lng:109.620338,lat:24.0322609}},{cityId:196,cityName:"南平市",leftBottom:{lng:117.003418,lat:26.2546902},rightTop:{lng:119.275322,lat:28.3129005}},{cityId:197,cityName:"南通市",leftBottom:{lng:120.202339,lat:31.6141701},rightTop:{lng:121.999161,lat:32.7111397}},{cityId:198,cityName:"南阳市",leftBottom:{lng:110.982887,lat:32.26894},rightTop:{lng:113.814667,lat:33.80159}},{cityId:199,cityName:"那曲地区",leftBottom:{lng:85.0527191,lat:29.9365005},rightTop:{lng:95.0232468,lat:36.4849815}},{cityId:200,cityName:"内江市",leftBottom:{lng:104.269539,lat:29.1844292},rightTop:{lng:105.446068,lat:30.0394707}},{cityId:201,cityName:"宁波市",leftBottom:{lng:120.877373,lat:28.8407707},rightTop:{lng:122.309402,lat:30.4506607}},{cityId:202,cityName:"宁德市",leftBottom:{lng:118.548332,lat:26.2919006},rightTop:{lng:120.749741,lat:27.67519}},{cityId:203,cityName:"怒江傈僳族自治州",leftBottom:{lng:98.1321182,lat:25.5491695},rightTop:{lng:99.6433868,lat:28.3944302}},{cityId:204,cityName:"盘锦市",leftBottom:{lng:121.476044,lat:40.6391411},rightTop:{lng:122.42057,lat:41.4518394}},{cityId:205,cityName:"攀枝花市",leftBottom:{lng:101.138229,lat:26.0817795},rightTop:{lng:102.24749,lat:27.3427906}},{cityId:206,cityName:"平顶山市",leftBottom:{lng:112.249092,lat:33.1282196},rightTop:{lng:113.688469,lat:34.3456802}},{cityId:207,cityName:"平凉市",leftBottom:{lng:105.345482,lat:34.8834305},rightTop:{lng:107.86409,lat:35.7500687}},{cityId:208,cityName:"萍乡市",leftBottom:{lng:113.576149,lat:26.9584789},rightTop:{lng:114.275276,lat:28.0050907}},{cityId:209,cityName:"普洱市",leftBottom:{lng:99.1557236,lat:22.0240002},rightTop:{lng:102.323448,lat:24.8268108}},{cityId:210,cityName:"莆田市",leftBottom:{lng:118.452957,lat:24.9391499},rightTop:{lng:119.720039,lat:25.7518406}},{cityId:211,cityName:"濮阳市",leftBottom:{lng:114.874611,lat:35.3308716},rightTop:{lng:116.110443,lat:36.2104416}},{cityId:212,cityName:"黔东南苗族侗族自治州",leftBottom:{lng:107.298981,lat:25.3063107},rightTop:{lng:109.595367,lat:27.527689}},{cityId:213,cityName:"潜江市",leftBottom:{lng:112.502739,lat:30.0774097},rightTop:{lng:113.033577,lat:30.6462498}},{cityId:214,cityName:"黔南布依族苗族自治州",leftBottom:{lng:106.211052,lat:25.0581398},rightTop:{lng:108.30368,lat:27.4843292}},{cityId:215,cityName:"黔西南布依族苗族自治州",leftBottom:{lng:104.529549,lat:24.6183891},rightTop:{lng:106.531639,lat:26.1756592}},{cityId:216,cityName:"青岛市",leftBottom:{lng:119.513107,lat:35.5273285},rightTop:{lng:121.406502,lat:37.1468506}},{cityId:217,cityName:"庆阳市",leftBottom:{lng:106.362221,lat:35.2414398},rightTop:{lng:108.715538,lat:37.1590881}},{cityId:218,cityName:"清远市",leftBottom:{lng:111.927452,lat:23.4543591},rightTop:{lng:113.916321,lat:25.2019005}},{cityId:219,cityName:"秦皇岛市",leftBottom:{lng:118.568459,lat:39.4296112},rightTop:{lng:119.863167,lat:40.6130486}},{cityId:220,cityName:"钦州市",leftBottom:{lng:108.183693,lat:21.5037308},rightTop:{lng:109.870689,lat:22.6821098}},{cityId:221,cityName:"琼海市",leftBottom:{lng:110.120117,lat:18.9760704},rightTop:{lng:110.721657,lat:19.4722805}},{cityId:222,cityName:"琼中黎族苗族自治县",leftBottom:{lng:109.523941,lat:18.7276707},rightTop:{lng:110.158569,lat:19.4198208}},{cityId:223,cityName:"齐齐哈尔市",leftBottom:{lng:122.400597,lat:46.2237282},rightTop:{lng:126.675209,lat:48.9354706}},{cityId:224,cityName:"七台河市",leftBottom:{lng:130.104813,lat:45.5882797},rightTop:{lng:131.935455,lat:46.3353882}},{cityId:225,cityName:"泉州市",leftBottom:{lng:117.578499,lat:24.3017101},rightTop:{lng:119.06678,lat:25.9316406}},{cityId:226,cityName:"曲靖市",leftBottom:{lng:103.052559,lat:24.3475895},rightTop:{lng:104.828751,lat:27.0522289}},{cityId:227,cityName:"衢州市",leftBottom:{lng:118.028282,lat:28.23909},rightTop:{lng:119.346153,lat:29.4968891}},{cityId:228,cityName:"日喀则市",leftBottom:{lng:82.141983,lat:27.2101307},rightTop:{lng:90.3494492,lat:31.8070793}},{cityId:229,cityName:"日照市",leftBottom:{lng:118.601082,lat:34.9581299},rightTop:{lng:119.952026,lat:36.0414581}},{cityId:230,cityName:"三门峡市",leftBottom:{lng:110.359917,lat:33.5501289},rightTop:{lng:112.031097,lat:35.0837898}},{cityId:231,cityName:"三明市",leftBottom:{lng:116.383308,lat:25.4776897},rightTop:{lng:118.672607,lat:27.1298294}},{cityId:232,cityName:"三沙市",leftBottom:{lng:105.590164,lat:2},rightTop:{lng:125.76929,lat:28.130243}},{cityId:233,cityName:"三亚市",leftBottom:{lng:108.931976,lat:18.1160793},rightTop:{lng:109.810959,lat:18.6233902}},{cityId:234,cityName:"上海市",leftBottom:{lng:120.855919,lat:30.6703892},rightTop:{lng:121.999474,lat:31.8675308}},{cityId:235,cityName:"商洛市",leftBottom:{lng:108.575882,lat:33.0947304},rightTop:{lng:111.036926,lat:34.4323502}},{cityId:236,cityName:"商丘市",leftBottom:{lng:114.826897,lat:33.7067184},rightTop:{lng:116.65036,lat:34.8606682}},{cityId:237,cityName:"上饶市",leftBottom:{lng:116.235687,lat:27.8003101},rightTop:{lng:118.487686,lat:29.6993198}},{cityId:238,cityName:"山南地区",leftBottom:{lng:90.0673676,lat:26.8494492},rightTop:{lng:94.3594894,lat:29.8240604}},{cityId:239,cityName:"汕头市",leftBottom:{lng:116.25029,lat:23.0408096},rightTop:{lng:117.359306,lat:23.6460304}},{cityId:240,cityName:"汕尾市",leftBottom:{lng:114.918297,lat:22.6116199},rightTop:{lng:116.227768,lat:23.4721298}},{cityId:241,cityName:"韶关市",leftBottom:{lng:112.852386,lat:23.8879204},rightTop:{lng:114.745323,lat:25.5167599}},{cityId:242,cityName:"绍兴市",leftBottom:{lng:119.888496,lat:29.2250595},rightTop:{lng:121.231552,lat:30.2862892}},{cityId:243,cityName:"邵阳市",leftBottom:{lng:109.822113,lat:25.962019},rightTop:{lng:112.091141,lat:27.6624203}},{cityId:244,cityName:"神农架林区",leftBottom:{lng:109.939919,lat:31.2963295},rightTop:{lng:110.982727,lat:31.8611107}},{cityId:245,cityName:"沈阳市",leftBottom:{lng:122.425743,lat:41.1994896},rightTop:{lng:123.813599,lat:43.0429192}},{cityId:246,cityName:"深圳市",leftBottom:{lng:113.676979,lat:22.2339993},rightTop:{lng:114.652138,lat:22.8514996}},{cityId:247,cityName:"石河子市",leftBottom:{lng:85.9007874,lat:44.1234818},rightTop:{lng:86.170639,lat:44.4628601}},{cityId:248,cityName:"石家庄市",leftBottom:{lng:113.522743,lat:37.4392509},rightTop:{lng:115.483467,lat:38.7645683}},{cityId:249,cityName:"十堰市",leftBottom:{lng:109.43557,lat:31.5059605},rightTop:{lng:111.585602,lat:33.271431}},{cityId:250,cityName:"石嘴山市",leftBottom:{lng:105.986122,lat:38.616909},rightTop:{lng:106.988083,lat:39.3917503}},{cityId:251,cityName:"双鸭山市",leftBottom:{lng:130.666473,lat:45.7880974},rightTop:{lng:134.347366,lat:47.5725212}},{cityId:252,cityName:"朔州市",leftBottom:{lng:111.898064,lat:39.0895805},rightTop:{lng:113.572723,lat:40.2991905}},{cityId:253,cityName:"四平市",leftBottom:{lng:123.305931,lat:42.8219604},rightTop:{lng:125.784317,lat:44.1563187}},{cityId:254,cityName:"松原市",leftBottom:{lng:123.109871,lat:43.9916496},rightTop:{lng:126.194168,lat:45.5417976}},{cityId:255,cityName:"苏州市",leftBottom:{lng:119.918633,lat:30.7580795},rightTop:{lng:121.386993,lat:32.0347214}},{cityId:256,cityName:"宿州市",leftBottom:{lng:116.159286,lat:33.2740517},rightTop:{lng:118.187599,lat:34.6508217}},{cityId:257,cityName:"绥化市",leftBottom:{lng:124.873772,lat:45.5043678},rightTop:{lng:128.555862,lat:48.0974007}},{cityId:258,cityName:"遂宁市",leftBottom:{lng:105.059341,lat:30.1749001},rightTop:{lng:106.001053,lat:31.1609001}},{cityId:259,cityName:"随州市",leftBottom:{lng:112.727821,lat:31.32621},rightTop:{lng:114.13459,lat:32.4321213}},{cityId:260,cityName:"宿迁市",leftBottom:{lng:117.940071,lat:33.13694},rightTop:{lng:119.1763,lat:34.4222298}},{cityId:261,cityName:"塔城地区",leftBottom:{lng:82.2501907,lat:43.4809608},rightTop:{lng:87.3363266,lat:47.2344589}},{cityId:262,cityName:"台州市",leftBottom:{lng:120.289917,lat:28.0003605},rightTop:{lng:121.979637,lat:29.3401108}},{cityId:263,cityName:"泰州市",leftBottom:{lng:119.646523,lat:31.9272804},rightTop:{lng:120.559113,lat:33.2190819}},{cityId:264,cityName:"泰安市",leftBottom:{lng:116.048439,lat:35.6303978},rightTop:{lng:118.002647,lat:36.4768715}},{cityId:265,cityName:"太原市",leftBottom:{lng:111.51593,lat:37.4562302},rightTop:{lng:113.156342,lat:38.4213486}},{cityId:266,cityName:"唐山市",leftBottom:{lng:117.512032,lat:38.900631},rightTop:{lng:119.448532,lat:40.4650192}},{cityId:267,cityName:"天津市",leftBottom:{lng:116.707947,lat:38.555481},rightTop:{lng:118.06942,lat:40.2532692}},{cityId:268,cityName:"天门市",leftBottom:{lng:112.592613,lat:30.3778706},rightTop:{lng:113.467369,lat:30.9039803}},{cityId:269,cityName:"天水市",leftBottom:{lng:104.577477,lat:34.0765991},rightTop:{lng:106.714996,lat:35.1779099}},{cityId:270,cityName:"铁岭市",leftBottom:{lng:123.452957,lat:41.9868889},rightTop:{lng:125.109543,lat:43.4924316}},{cityId:271,cityName:"铜川市",leftBottom:{lng:108.583549,lat:34.8046417},rightTop:{lng:109.496582,lat:35.5810814}},{cityId:272,cityName:"通化市",leftBottom:{lng:125.264076,lat:40.8618813},rightTop:{lng:126.754272,lat:43.0220795}},{cityId:273,cityName:"通辽市",leftBottom:{lng:119.238251,lat:42.2457581},rightTop:{lng:123.720779,lat:45.6865997}},{cityId:274,cityName:"铜陵市",leftBottom:{lng:117.249451,lat:30.4141502},rightTop:{lng:118.165527,lat:31.1289902}},{cityId:275,cityName:"铜仁市",leftBottom:{lng:107.753067,lat:27.1212196},rightTop:{lng:109.474548,lat:29.0864506}},{cityId:276,cityName:"吐鲁番市",leftBottom:{lng:87.2599487,lat:41.1891403},rightTop:{lng:91.9163666,lat:43.6343918}},{cityId:277,cityName:"图木舒克市",leftBottom:{lng:78.6532364,lat:39.6160011},rightTop:{lng:79.6058426,lat:40.1293716}},{cityId:278,cityName:"屯昌县",leftBottom:{lng:109.821892,lat:19.1306705},rightTop:{lng:110.252731,lat:19.5927391}},{cityId:279,cityName:"万宁市",leftBottom:{lng:110.012733,lat:18.5727806},rightTop:{lng:110.614479,lat:19.1047993}},{cityId:280,cityName:"潍坊市",leftBottom:{lng:118.175079,lat:35.7119408},rightTop:{lng:120.011307,lat:37.3332787}},{cityId:281,cityName:"威海市",leftBottom:{lng:121.176933,lat:36.6739082},rightTop:{lng:122.726158,lat:38.2525711}},{cityId:282,cityName:"渭南市",leftBottom:{lng:108.9645,lat:34.20961},rightTop:{lng:110.606941,lat:35.8539581}},{cityId:283,cityName:"文昌市",leftBottom:{lng:110.462769,lat:19.3158607},rightTop:{lng:111.31723,lat:20.2484207}},{cityId:284,cityName:"文山壮族苗族自治州",leftBottom:{lng:103.574097,lat:22.6856899},rightTop:{lng:106.200073,lat:24.4594593}},{cityId:285,cityName:"温州市",leftBottom:{lng:119.625343,lat:27.0132389},rightTop:{lng:121.372627,lat:28.6110497}},{cityId:286,cityName:"乌海市",leftBottom:{lng:106.59095,lat:39.0368309},rightTop:{lng:107.181061,lat:39.9054604}},{cityId:287,cityName:"武汉市",leftBottom:{lng:113.700409,lat:29.9666405},rightTop:{lng:115.080811,lat:31.3612499}},{cityId:288,cityName:"芜湖市",leftBottom:{lng:117.48262,lat:30.6380501},rightTop:{lng:118.73336,lat:31.5359898}},{cityId:289,cityName:"五家渠市",leftBottom:{lng:87.3679199,lat:44.0043602},rightTop:{lng:87.7174988,lat:44.5968704}},{cityId:290,cityName:"乌兰察布市",leftBottom:{lng:110.337868,lat:40.1639404},rightTop:{lng:114.81105,lat:43.379879}},{cityId:291,cityName:"乌鲁木齐市",leftBottom:{lng:86.7889175,lat:42.9170418},rightTop:{lng:88.9795074,lat:45.0016747}},{cityId:292,cityName:"武威市",leftBottom:{lng:101.830902,lat:36.7551613},rightTop:{lng:104.207367,lat:39.4612999}},{cityId:293,cityName:"无锡市",leftBottom:{lng:119.519676,lat:31.1206703},rightTop:{lng:120.604446,lat:31.9852009}},{cityId:294,cityName:"五指山市",leftBottom:{lng:109.323799,lat:18.6266804},rightTop:{lng:109.732292,lat:19.0324993}},{cityId:295,cityName:"吴忠市",leftBottom:{lng:105.571373,lat:36.572319},rightTop:{lng:107.657066,lat:38.2624283}},{cityId:296,cityName:"梧州市",leftBottom:{lng:110.325142,lat:22.6071396},rightTop:{lng:111.667213,lat:24.4049206}},{cityId:297,cityName:"厦门市",leftBottom:{lng:117.886009,lat:24.3841305},rightTop:{lng:118.453987,lat:24.9073391}},{cityId:298,cityName:"香港特別行政區",leftBottom:{lng:113.616013,lat:22.0750065},rightTop:{lng:114.50898,lat:22.5916195}},{cityId:299,cityName:"湘潭市",leftBottom:{lng:111.99971,lat:27.3380604},rightTop:{lng:113.091919,lat:28.0735798}},{cityId:300,cityName:"湘西土家族苗族自治州",leftBottom:{lng:109.186653,lat:27.7199993},rightTop:{lng:110.391006,lat:29.6338406}},{cityId:301,cityName:"襄阳市",leftBottom:{lng:110.764,lat:31.2297993},rightTop:{lng:113.118736,lat:32.6276398}},{cityId:302,cityName:"咸宁市",leftBottom:{lng:113.537819,lat:29.0294895},rightTop:{lng:114.973717,lat:30.2978191}},{cityId:303,cityName:"西安市",leftBottom:{lng:107.62751,lat:33.693882},rightTop:{lng:109.822456,lat:34.74366}},{cityId:304,cityName:"仙桃市",leftBottom:{lng:112.940979,lat:30.0696602},rightTop:{lng:113.824944,lat:30.5324593}},{cityId:305,cityName:"咸阳市",leftBottom:{lng:107.651894,lat:34.1955299},rightTop:{lng:109.178223,lat:35.544239}},{cityId:306,cityName:"孝感市",leftBottom:{lng:113.316689,lat:30.3799992},rightTop:{lng:114.591988,lat:31.853899}},{cityId:307,cityName:"锡林郭勒盟",leftBottom:{lng:111.154129,lat:41.575779},rightTop:{lng:120.123337,lat:46.77705}},{cityId:308,cityName:"兴安盟",leftBottom:{lng:119.482262,lat:44.2563591},rightTop:{lng:123.643593,lat:47.6574402}},{cityId:309,cityName:"邢台市",leftBottom:{lng:113.760094,lat:36.7540207},rightTop:{lng:115.852943,lat:37.8066902}},{cityId:310,cityName:"西宁市",leftBottom:{lng:100.90403,lat:36.2311096},rightTop:{lng:101.91449,lat:37.4052696}},{cityId:311,cityName:"新乡市",leftBottom:{lng:113.382111,lat:34.8777008},rightTop:{lng:115.018753,lat:35.839138}},{cityId:312,cityName:"信阳市",leftBottom:{lng:113.710114,lat:31.3823605},rightTop:{lng:115.943787,lat:32.6597099}},{cityId:313,cityName:"新余市",leftBottom:{lng:114.485558,lat:27.53022},rightTop:{lng:115.406487,lat:28.1076393}},{cityId:314,cityName:"忻州市",leftBottom:{lng:110.944801,lat:38.1324005},rightTop:{lng:113.967003,lat:39.6637001}},{cityId:315,cityName:"西双版纳傣族自治州",leftBottom:{lng:99.9450912,lat:21.1399498},rightTop:{lng:101.844193,lat:22.5901508}},{cityId:316,cityName:"宣城市",leftBottom:{lng:117.970444,lat:29.9435902},rightTop:{lng:119.649498,lat:31.3047504}},{cityId:317,cityName:"许昌市",leftBottom:{lng:113.065529,lat:33.6887512},rightTop:{lng:114.324966,lat:34.4069214}},{cityId:318,cityName:"徐州市",leftBottom:{lng:116.361816,lat:33.7185211},rightTop:{lng:118.674423,lat:34.9399414}},{cityId:319,cityName:"雅安市",leftBottom:{lng:101.936493,lat:28.8487797},rightTop:{lng:103.395248,lat:30.9384594}},{cityId:320,cityName:"延安市",leftBottom:{lng:107.659721,lat:35.3443909},rightTop:{lng:110.552528,lat:37.5010109}},{cityId:321,cityName:"延边朝鲜族自治州",leftBottom:{lng:127.46888,lat:41.9987984},rightTop:{lng:131.319122,lat:44.5139198}},{cityId:322,cityName:"盐城市",leftBottom:{lng:119.459297,lat:32.5754509},rightTop:{lng:120.994926,lat:34.5445213}},{cityId:323,cityName:"阳江市",leftBottom:{lng:111.282082,lat:21.4660397},rightTop:{lng:112.369362,lat:22.6784}},{cityId:324,cityName:"阳泉市",leftBottom:{lng:112.919868,lat:37.6619492},rightTop:{lng:114.044571,lat:38.5243607}},{cityId:325,cityName:"扬州市",leftBottom:{lng:119.016487,lat:32.2179298},rightTop:{lng:119.911797,lat:33.4158211}},{cityId:326,cityName:"烟台市",leftBottom:{lng:119.553398,lat:36.559639},rightTop:{lng:122.03804,lat:38.6573601}},{cityId:327,cityName:"宜春市",leftBottom:{lng:113.889679,lat:27.5454998},rightTop:{lng:116.149887,lat:29.0996895}},{cityId:328,cityName:"伊春市",leftBottom:{lng:127.631432,lat:46.4828873},rightTop:{lng:130.777573,lat:49.441349}},{cityId:329,cityName:"宜宾市",leftBottom:{lng:103.611809,lat:27.8405991},rightTop:{lng:105.355797,lat:29.2660408}},{cityId:330,cityName:"宜昌市",leftBottom:{lng:110.255661,lat:29.9457092},rightTop:{lng:112.084328,lat:31.5735302}},{cityId:331,cityName:"伊犁哈萨克自治州",leftBottom:{lng:80.1640167,lat:42.258461},rightTop:{lng:85.2510071,lat:44.8430405}},{cityId:332,cityName:"银川市",leftBottom:{lng:105.838699,lat:37.6021194},rightTop:{lng:106.87043,lat:38.8690491}},{cityId:333,cityName:"营口市",leftBottom:{lng:121.859306,lat:39.9198418},rightTop:{lng:123.007309,lat:40.9410782}},{cityId:334,cityName:"鹰潭市",leftBottom:{lng:116.692207,lat:27.84659},rightTop:{lng:117.472794,lat:28.6279202}},{cityId:335,cityName:"益阳市",leftBottom:{lng:110.721138,lat:27.9746494},rightTop:{lng:112.950127,lat:29.5243607}},{cityId:336,cityName:"永州市",leftBottom:{lng:110.9515,lat:24.6363602},rightTop:{lng:112.457367,lat:26.8679295}},{cityId:337,cityName:"榆林市",leftBottom:{lng:107.263802,lat:36.8189201},rightTop:{lng:111.246147,lat:39.5869904}},{cityId:338,cityName:"玉林市",leftBottom:{lng:109.541069,lat:21.6341991},rightTop:{lng:110.898888,lat:23.1247902}},{cityId:339,cityName:"岳阳市",leftBottom:{lng:112.315292,lat:28.4218502},rightTop:{lng:114.15712,lat:29.8472996}},{cityId:340,cityName:"运城市",leftBottom:{lng:110.219887,lat:34.5842896},rightTop:{lng:112.081917,lat:35.8212814}},{cityId:341,cityName:"云浮市",leftBottom:{lng:111.056427,lat:22.3756905},rightTop:{lng:112.521652,lat:23.3238392}},{cityId:342,cityName:"玉树藏族自治州",leftBottom:{lng:89.4090881,lat:31.6002407},rightTop:{lng:97.776123,lat:36.2771111}},{cityId:343,cityName:"玉溪市",leftBottom:{lng:101.276817,lat:23.3137798},rightTop:{lng:103.153099,lat:24.9523697}},{cityId:344,cityName:"枣庄市",leftBottom:{lng:116.811401,lat:34.4612503},rightTop:{lng:117.832039,lat:35.3204498}},{cityId:345,cityName:"张家界市",leftBottom:{lng:109.693748,lat:28.8672409},rightTop:{lng:111.337532,lat:29.7908993}},{cityId:346,cityName:"张家口市",leftBottom:{lng:113.825562,lat:39.5560112},rightTop:{lng:116.465561,lat:42.1491394}},{cityId:347,cityName:"张掖市",leftBottom:{lng:97.3878403,lat:37.6070404},rightTop:{lng:102.215363,lat:39.8840218}},{cityId:348,cityName:"漳州市",leftBottom:{lng:116.899567,lat:23.5487995},rightTop:{lng:118.24514,lat:25.1944695}},{cityId:349,cityName:"湛江市",leftBottom:{lng:109.628792,lat:20.0595989},rightTop:{lng:111.081047,lat:21.9182796}},{cityId:350,cityName:"肇庆市",leftBottom:{lng:111.361977,lat:22.7697697},rightTop:{lng:112.88179,lat:24.3998203}},{cityId:351,cityName:"昭通市",leftBottom:{lng:102.87149,lat:26.5343094},rightTop:{lng:105.316383,lat:28.6684303}},{cityId:352,cityName:"郑州市",leftBottom:{lng:112.721176,lat:34.2621002},rightTop:{lng:114.22319,lat:34.9885406}},{cityId:353,cityName:"镇江市",leftBottom:{lng:118.969482,lat:31.6252193},rightTop:{lng:119.981506,lat:32.3162003}},{cityId:354,cityName:"中山市",leftBottom:{lng:113.158546,lat:22.2039089},rightTop:{lng:113.693253,lat:22.7772007}},{cityId:355,cityName:"中卫市",leftBottom:{lng:104.293633,lat:36.1216583},rightTop:{lng:106.459618,lat:37.7277107}},{cityId:356,cityName:"周口市",leftBottom:{lng:114.091621,lat:33.0526619},rightTop:{lng:115.653214,lat:34.3372002}},{cityId:357,cityName:"舟山市",leftBottom:{lng:121.521332,lat:29.545639},rightTop:{lng:122.992256,lat:30.9029293}},{cityId:358,cityName:"珠海市",leftBottom:{lng:113.059349,lat:21.7801895},rightTop:{lng:114.411263,lat:22.4543991}},{cityId:359,cityName:"驻马店市",leftBottom:{lng:113.097687,lat:32.2771912},rightTop:{lng:115.219704,lat:33.5306091}},{cityId:360,cityName:"株洲市",leftBottom:{lng:112.966667,lat:26.0451908},rightTop:{lng:114.106934,lat:28.0290203}},{cityId:361,cityName:"淄博市",leftBottom:{lng:117.545601,lat:35.9234695},rightTop:{lng:118.520798,lat:37.2891502}},{cityId:362,cityName:"自贡市",leftBottom:{lng:104.052917,lat:28.9241199},rightTop:{lng:105.270042,lat:29.6372604}},{cityId:363,cityName:"资阳市",leftBottom:{lng:104.192131,lat:29.6740208},rightTop:{lng:105.753868,lat:30.6436806}},{cityId:364,cityName:"遵义市",leftBottom:{lng:105.608841,lat:27.1325493},rightTop:{lng:108.21476,lat:29.2213001}},{cityId:365,cityName:"taiwan",leftBottom:{lng:119.198798,lat:21.835159},rightTop:{lng:122.331982,lat:25.72666}}];e.default=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){var i=function(e){var n=t.styles[e.styleId];return n?(0,T.default)({},{text:e.content||z.text,color:n.color||z.color,backgroundColor:n.backgroundColor||z.backgroundColor,borderColor:n.borderColor||z.borderColor,borderWidth:f(n.borderWidth||z.borderWidth,"number",0),strokeColor:n.strokeColor||z.strokeColor,borderRadius:f(n.borderRadius||z.borderRadius,"number",0),size:n.size||z.size,width:f(n.width||z.width,"number",0),height:f(n.height||z.height,"number",0),padding:f(n.padding||z.padding,"string",""),scale:n.scale||z.scale,offset:n.offset||z.offset,angle:n.angle||z.angle,alignment:O[n.alignment]||O[z.alignment],verticalAlignment:F[n.verticalAlignment]||F[z.verticalAlignment],wrapOptions:n.wrapOptions}):(0,T.default)({},z,{color:"rgba(0, 0, 0, 0)"})},r={};t.geometries.forEach(function(t){var e=i(t),n=e.text;n&&(0,E.default)(n).forEach(function(t){r[t]=1})});var s=(0,S.default)(r);e.send("addGlyphs",{glyphs:s},function(e,r){var s=JSON.parse(r.mapping),l=a(t.geometries,s,i),u=o(l,s,i);n&&n(u)})}function a(t,e,n){var i=[];return t.forEach(function(t,r){if(t.position){var a=n(t),o=a.text,s=a.wrapOptions,l=a.size,u=void 0,c=void 0,f=void 0;if(o){var d=(0,E.default)(o);if(s){f=s.rowSpacing||0;var p=h(d,s,l,e);u=p.warpMap,c=p.lines}var v=[0],m=0,g=0,_=0,y=[{offsetsX:g,offsetsY:_}],x=[],b=[];if(i.push({geometry:t,geometryIndex:r}),c&&(d=c.flat()),d.forEach(function(n,a){var o={letter:n,index:a,offsets:v,len:d.length,geometry:t,geometryIndex:r},s=e[n];if(m+=s?s.width:B,u&&c){o.warpOpts={YXIndex:u[a].YXIndex,warpLineWidth:x,warpLineHeight:b,offsetsXY:y};var l=u[a].YXIndex[0],h=u[a].YXIndex[1];g+=s?s.width:B,N(h)&&h==c[l].length-1&&(x.push(g),g=0,_+=e[n].height||B,0==l&&(b[0]=_),l!==c.length-1?_+=f:b[1]=_),y.push({offsetsX:g,offsetsY:_})}v.push(m),i.push(o)}),0!==x.length&&0!==b.length){var S=i.length-d.length-1;i[S].warpLineWidth=x,i[S].warpLineHeight=b}}}}),i}function o(t,e,n){var i=t.length,r=new Float32Array(3*i),a=new Float32Array(2*i),o=new Uint16Array(2*i),f=new Float32Array(4*i),d=new Float32Array(4*i),h=new Uint8ClampedArray(4*i),p=new Uint8ClampedArray(4*i),v=new Uint8ClampedArray(i),m=new Uint8ClampedArray(3*i),g=new Float32Array(3*i),_=new Uint8ClampedArray(i),y=0,b=0,S=0,w=0,E=0,A=0,T=0,P=0,L=0,C=0,R=0,D=[];return t.forEach(function(t){var i=n(t.geometry),N=e[t.letter],B=0;N||(B=1),_[L]=B,L+=1;var O=new k.default(i.color).toUpArray(),F=new k.default(i.strokeColor).toUpArray(),z=new k.default(i.backgroundColor,{defaultColor:"rgba(0, 0, 0, 0)"}).toUpArray(),V=new k.default(i.borderColor,{defaultColor:"rgba(0, 0, 0, 0)"}).toUpArray(),U=t.geometry.position,G="lat"in U&&"lng"in U,H=(0,M.splitLatLngNumber)(U.lng||0),Y=(0,M.splitLatLngNumber)(U.lat||0),j=U.height;r[y]=H.high,y+=1,r[y]=Y.high,y+=1,r[y]=j,y+=1,a[b]=H.low,b+=1,a[b]=Y.low,b+=1,o[S]=i.size,S+=1,o[S]=i.size,S+=1,s({type:B,info:t,style:i,instanceInfos:f,infoIndex:w,letterRect:N}),w+=4;var W=t.geometry.content;l({style:i,type:B,instanceFrames:d,letterRect:N,letterCount:W.length,frameIndex:E,info:t}),E+=4,u({styleColor:O,bgColor:z,type:B,isValidPosition:G,instanceColors:h,colorIndex:A}),A+=4,u({styleColor:F,bgColor:V,type:B,isValidPosition:G,instanceColors:p,colorIndex:T}),T+=4,v[P]=1,P+=1;var X=(0,I.encodePickingColor)(t.geometryIndex);G?(m[C]=X[0],C+=1,m[C]=X[1],C+=1,m[C]=X[2],C+=1):(m[C]=0,C+=1,m[C]=0,C+=1,m[C]=0,C+=1),g[R]=i.offset.x,R+=1,g[R]=i.offset.y,R+=1,g[R]=1,R+=1;var Z=t.geometryIndex,q=t.len,Q=t.index,J=t.warpOpts;if(D[Z])D[Z].lettersCount+=1,D[Z].widthSum+=N.width,D[Z].fontSize=D[Z].fontSize||N&&N.fontSize;else{var K=t.geometry;D[Z]={geometryIndex:Z,geometry:K,style:i,lettersCount:1,fontSize:N&&N.fontSize,widthSum:N&&N.width||0}}if(Q===q-1&&N){J&&J.warpLineWidth&&(D[Z].widthSum=Math.max.apply(Math,(0,x.default)(J.warpLineWidth))),D[Z].heightSum=J&&J.warpLineHeight[1]||N.height;var $=c(i,q,J),tt=$.styleWidth,et=$.styleHeight,nt=tt*N.fontSize/i.size,it=et*N.fontSize/i.size;D[Z].widthSum=Math.max(D[Z].widthSum,nt),D[Z].heightSum=Math.max(D[Z].heightSum,it)}}),{count:i,instancePositionList:r,instancePosition64xyLowList:a,instanceSizeList:o,instanceInfoList:f,instanceFrameList:d,instanceColorList:h,instanceStrokeColorList:p,instanceShowList:v,instanceTypeList:_,instancePickingColorList:m,instancePixelOffsetList:g,labelInfoList:D}}function s(t){var e=t.type,n=t.info,i=t.style,r=t.instanceInfos,a=t.letterRect,o=t.infoIndex;if(e)return r[o]=i.borderRadius,o+=1,r[o]=0,o+=1,r[o]=i.angle,o+=1,r[o]=1,void(o+=1);var s=n.offsets[n.offsets.length-1],l=n.offsets[n.index];if(n.warpOpts){var u=n.warpOpts.offsetsXY[n.index],c=n.warpOpts.warpLineWidth[n.warpOpts.YXIndex[0]];r[o]=(i.alignment-1)*c/2+a.width/2+u.offsetsX||0,o+=1,r[o]=n.warpOpts.warpLineHeight[1]*(i.verticalAlignment-1)/2+n.warpOpts.warpLineHeight[0]/2+u.offsetsY||0,o+=1}else r[o]=(i.alignment-1)*s/2+a.width/2+l||0,o+=1,r[o]=a.height/2*i.verticalAlignment||0,o+=1;r[o]=i.angle,o+=1,r[o]=1,o+=1}function l(t){var e=t.instanceFrames,n=t.type,i=t.style,r=t.letterRect,a=t.letterCount,o=t.info,s=t.frameIndex,l=o.warpLineHeight,u=o.warpLineWidth;if(n){var f=c(i,a,{warpLineHeight:l,warpLineWidth:u}),d=f.styleWidth,h=f.styleHeight;return d&&h?(e[s]=i.borderWidth,s+=1,e[s]=i.borderWidth,s+=1,e[s]=d+2*i.borderWidth||0,s+=1,e[s]=h+2*i.borderWidth||0,void(s+=1)):(e[s]=0,s+=1,e[s]=0,s+=1,e[s]=0,s+=1,e[s]=0,void(s+=1))}e[s]=r.x||0,s+=1,e[s]=r.y||0,s+=1,e[s]=r.width||0,s+=1,e[s]=r.height||0,s+=1}function u(t){var e=t.type,n=t.styleColor,i=t.isValidPosition,r=t.instanceColors,a=t.bgColor,o=t.colorIndex;if(e)return r[o]=i?a[0]:0,o+=1,r[o]=i?a[1]:0,o+=1,r[o]=i?a[2]:0,o+=1,r[o]=i?a[3]:0,void(o+=1);r[o]=i?n[0]:0,o+=1,r[o]=i?n[1]:0,o+=1,r[o]=i?n[2]:0,o+=1,r[o]=i?n[3]:0,o+=1}function c(t,e,n){var i=t.height,r=t.width;if((!i||!r)&&t.padding){var a=d(t.padding,"padding"),o=a.widthPadding,s=a.heightPadding;n&&n.warpLineHeight&&n.warpLineWidth?(i=n.warpLineHeight[1]+2*s,r=Math.max.apply(Math,(0,x.default)(n.warpLineWidth))+2*o):(i=t.size+2*s,r=t.size*(e-1)+2*o)}return{styleHeight:i,styleWidth:r}}function f(t,e,n){return(void 0===t?"undefined":(0,_.default)(t))!==e?n:t}function d(t,e){function n(t){var e=t.match(/\d+\px/);return(0,m.default)(e,1)[0].slice(0,-2)}try{var i=t.split(" ");return{heightPadding:n(i[0]),widthPadding:n(i[1]||i[0])}}catch(t){return console.error(e+"样式设置无法解析"),{wiheightPadding:0,widthPadding:0}}}function h(t,e,n,i){var r=e.maxWidth,a=e.maxLineCount,o=[],s=[];if(!r&&!t.includes(V))return{warpMap:null,lines:null};if(r&&!t.includes(V)){var l=p(t,n,i),u=l.letterWidthArr,c=l.textWidth,f=0;if(!(c>r&&u[0]<=r))return{warpMap:null,lines:null};var d=[],h=0;t.forEach(function(e,n){var i={letter:e,index:n};h+=u[n],h<r?(d.push(e),i.YXIndex=[f,d.length-1],s.push(i)):(o.push(d),d=[e],h=u[n],f++,i.YXIndex=[f,d.length-1],s.push(i)),n==t.length-1&&o.push(d)})}if(t.includes(V)){var v=[];o=[];var m=0;t.forEach(function(e,n){var i={letter:e,index:n};e==V?(o.push(v),v=[],m++):(v.push(e),i.YXIndex=[m,v.length-1],s.push(i)),n==t.length-1&&o.push(v)})}if(a&&o.length>a){for(var g=o.slice(a-1),_=0,y=0;y<a-1;y++)_+=o[y].length;g.flat().forEach(function(t,e){s[_+e].YXIndex=[a-1,e]}),o.splice(a-1,o.length-a+1,g.flat())}return{warpMap:s,lines:o}}function p(t,e,n){var i=[],r=0;return t.forEach(function(t){var a=n[t];a?(i.push(a.width*e/a.fontSize),r+=a.width*e/a.fontSize):(i.push(B*e/a.fontSize),r+=B*e/a.fontSize)}),{letterWidthArr:i,textWidth:r}}Object.defineProperty(e,"__esModule",{value:!0});var v=n(27),m=i(v),g=n(19),_=i(g),y=n(18),x=i(y),b=n(17),S=i(b),w=n(82),E=i(w),A=n(15),T=i(A),M=n(148),I=n(249),P=n(233),k=i(P),L=n(408),C=i(L),R=n(36),D=i(R),N=D.default.isNumber,B=32,O={left:1,center:0,right:-1},F={top:1,middle:0,bottom:-1},z=new C.default;z.text="";var V="\n";e.default=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){var i=function(e){var n=t.styles[e.styleId];return n.text=e.content||P,n},r=[];(0,y.default)(t.styles).forEach(function(e){t.styles[e].src&&r.push(t.styles[e].src)});var o={};t.geometries.forEach(function(t){var e=i(t),n=e.text;n&&(0,g.default)(n).forEach(function(t){o[t]=1})});var s=(0,y.default)(o);e.send("addMarkers",{markerSrcs:r,glyphs:s},function(e,r){var o=JSON.parse(r.mapping),s=a(t.geometries,o,i);n&&n(s)})}function a(t,e,n){var i=s(t,e,n),r=i.length,a=new Array(3*r),u=new Float32Array(2*r),c=new Uint16Array(2*r),f=new Float32Array(4*r),d=new Float32Array(4*r),h=new Uint8ClampedArray(3*r),p=new Float32Array(3*r),m=new Uint8ClampedArray(4*r),g=new Uint8ClampedArray(4*r),_=new Uint16Array(r),b=new Uint8ClampedArray(r),w=new Uint8ClampedArray(r),E=new Float32Array(2*r),A=0,T=0,M=0,I=0,P=0,k=0,L=0,C=0,R=0,D=0,N=0,B=[];return i.forEach(function(t){var i=n(t.geometry),r=t.geometry.position,s=r.height;a[A]=r.lng,A+=1,a[A]=r.lat,A+=1,a[A]=s,A+=1,u[T]=0,T+=1,u[T]=0,T+=1;var O=null;if(t.src){if(!(O=e[t.src])){var F=(0,y.default)(e),z=F.find(function(t){return/^data:/.test(t)});z||(z=F[0]),O=e[z]}c[M]=parseInt(i.width,10),M+=1,c[M]=parseInt(i.height,10),M+=1,f[I]=i.width/2-i.anchor.x,I+=1,f[I]=i.height/2-i.anchor.y,I+=1,f[I]=t.geometry.properties&&"$angle"in t.geometry.properties?t.geometry.properties.$angle:i.rotate,I+=1,f[I]=i.faceTo,I+=1,p[L]=0,L+=1,p[L]=0,L+=1,p[L]=i.opacity,L+=1,w[C]=0,C+=1}else{O=e[t.letter],c[M]=i.size,M+=1,c[M]=i.size,M+=1;var V=t.offsets[t.offsets.length-1],U=t.offsets[t.index];if(t.warpOpts){var G=t.warpOpts.offsetsXY[t.index],H=t.warpOpts.warpLineWidth[t.warpOpts.YXIndex[0]],Y=void 0,j=void 0;switch(i.direction){case 0:Y=0,j=0;break;case 1:Y=0,j=-1;break;case 2:Y=0,j=1;break;case 3:Y=-1,j=0;break;case 4:Y=1,j=0}f[I]=(Y-1)*H/2+O.width/2+G.offsetsX||0,I+=1,f[I]=t.warpOpts.warpLineHeight[1]*(j-1)/2+t.warpOpts.warpLineHeight[0]/2+G.offsetsY||0,I+=1}else f[I]=O.width/2+U-V/2,I+=1,f[I]=0,I+=1;f[I]=0,I+=1,f[I]=1,I+=1;var W=l(t,O,i);p[L]=W.x+i.offset.x,L+=1,p[L]=W.y+i.offset.y,L+=1,p[L]=1,L+=1,t.offsetToMarkerCenter={x:W.x+i.offset.x,y:W.y+i.offset.y},w[C]=1,C+=1}d[P]=O.x,P+=1,d[P]=O.y,P+=1,d[P]=O.width,P+=1,d[P]=O.height,P+=1;var X=new S.default(i.color).toUpArray(),Z=new S.default(i.strokeColor).toUpArray(),q=(0,v.default)(X,4);m[R]=q[0],m[R+1]=q[1],m[R+2]=q[2],m[R+3]=q[3];var Q=(0,v.default)(Z,4);g[R]=Q[0],g[R+1]=Q[1],g[R+2]=Q[2],g[R+3]=Q[3],_[N]=i.strokeWidth,b[N]=1;var J=(0,x.encodePickingColor)(t.geometryIndex),K=(0,v.default)(J,3);h[k]=K[0],h[k+1]=K[1],h[k+2]=K[2],k+=3,E[D]=t.animateScale,E[D+1]=t.animateAlpha,N+=1,D+=2,R+=4,o(t,i,O,B)}),{count:r,instancePositionList:a,instancePosition64xyLowList:u,instanceSizeList:c,instanceInfoList:f,instanceFrameList:d,instancePickingColorList:h,instancePixelOffsetList:p,instanceColorList:m,instanceStrokeColorList:g,instanceStrokeWidthList:_,instanceShowList:b,instanceTypeList:w,instanceAnimateScaleAlphaList:E,labelInfoList:B}}function o(t,e,n,i){var r=t.geometryIndex,a=t.warpOpts;if(i[r])i[r].lettersCount+=1;else{var o=t.geometry;i[r]={geometryIndex:r,geometry:o,style:e,markerWidth:0,markerHeight:0,fontSize:I,labelWidthSum:0,lettersCount:1,offsetToMarkerCenter:{x:0,y:0}}}t.src?(i[r].markerWidth=n.width,i[r].markerHeight=n.height):(i[r].fontSize=n.fontSize,i[r].labelWidthSum+=n.width,a&&a.warpLineWidth&&a.warpLineHeight&&(i[r].labelWidthSum=Math.max.apply(Math,(0,h.default)(a.warpLineWidth)),i[r].labelHeightSum=a.warpLineHeight[1]),i[r].offsetToMarkerCenter=t.offsetToMarkerCenter)}function s(t,e,n){var i=[];return t.forEach(function(t,r){if(t.position){var a=n(t),o=t.animateScale,s=void 0===o?1:o,l=t.animateAlpha,u=void 0===l?1:l;i.push({src:a.src,geometry:t,geometryIndex:r,animateScale:s,animateAlpha:u});var f=a.text,d=a.wrapOptions,h=a.size;if(f){var p=(0,g.default)(f),v=void 0,m=void 0,_=void 0;if(d){_=d.rowSpacing||0;var y=c(p,d,h,e);v=y.warpMap,m=y.lines}var x=[0],b=0,S=0,w=0,E=[{offsetsX:S,offsetsY:w}],A=[],I=[];if(m&&(p=m.flat()),p.forEach(function(n,a){var o={letter:n,index:a,offsets:x,len:p.length,geometry:t,geometryIndex:r,animateScale:s,animateAlpha:u},l=e[n];if(b+=l?l.width:M,v&&m){o.warpOpts={YXIndex:v[a].YXIndex,warpLineWidth:A,warpLineHeight:I,offsetsXY:E};var c=v[a].YXIndex[0],f=v[a].YXIndex[1];S+=l?l.width:M,T(f)&&f===m[c].length-1&&(A.push(S),S=0,w+=e[n].height||M,0===c&&(I[0]=w),c!==m.length-1?w+=_:I[1]=w),E.push({offsetsX:S,offsetsY:w})}x.push(b),i.push(o)}),0!==A.length&&0!==I.length){var P=i.length-p.length-1;i[P].warpLineWidth=A,i[P].warpLineHeight=I}}}}),i}function l(t,e,n){var i=u({x:0-n.anchor.x,y:0-n.anchor.y},n.rotate),r=u({x:n.width-n.anchor.x,y:0-n.anchor.y},n.rotate),a=u({x:0-n.anchor.x,y:n.height-n.anchor.y},n.rotate),o=u({x:n.width-n.anchor.x,y:n.height-n.anchor.y},n.rotate),s=Math.min(i.x,r.x,a.x,o.x),l=Math.max(i.x,r.x,a.x,o.x),c=Math.min(i.y,r.y,a.y,o.y),f=Math.max(i.y,r.y,a.y,o.y),d=n.size/e.height,h=t.offsets[t.offsets.length-1],p=h/2*d,v=e.height/2*d,m=(s+l)/2,g=(c+f)/2;switch(n.direction){case 0:break;case 1:g=c-v;break;case 2:g=f+v;break;case 3:m=s-p;break;case 4:m=l+p}if(t.warpOpts)switch(n.direction){case 0:break;case 1:g=c;break;case 2:g=f;break;case 3:m=s;break;case 4:m=l}return{x:m,y:g}}function u(t,e){var n=new w.Vector4(t.x,t.y,0,1),i=(new w.Matrix4).setRotate(-e,0,0,1),r=i.multiplyVector4(n);return{x:r.elements[0],y:r.elements[1]}}function c(t,e,n,i){var r=e.maxWidth,a=e.maxLineCount,o=[],s=[];if(!r&&!t.includes(k))return{warpMap:null,lines:null};if(r&&!t.includes(k)){var l=f(t,n,i),u=l.letterWidthArr,c=l.textWidth,d=0;if(!(c>r&&u[0]<=r))return{warpMap:null,lines:null};var h=[],p=0;t.forEach(function(e,n){var i={letter:e,index:n};p+=u[n],p<r?(h.push(e),i.YXIndex=[d,h.length-1],s.push(i)):(o.push(h),h=[e],p=u[n],d+=1,i.YXIndex=[d,h.length-1],s.push(i)),n===t.length-1&&o.push(h)})}if(t.includes(k)){var v=[];o=[];var m=0;t.forEach(function(e,n){var i={letter:e,index:n};e===k?(o.push(v),v=[],m+=1):(v.push(e),i.YXIndex=[m,v.length-1],s.push(i)),n===t.length-1&&o.push(v)})}if(a&&o.length>a){for(var g=o.slice(a-1),_=0,y=0;y<a-1;y++)_+=o[y].length;g.flat().forEach(function(t,e){s[_+e].YXIndex=[a-1,e]}),o.splice(a-1,o.length-a+1,g.flat())}return{warpMap:s,lines:o}}function f(t,e,n){var i=[],r=0;return t.forEach(function(t){var a=n[t];a?(i.push(a.width*e/a.fontSize),r+=a.width*e/a.fontSize):(i.push(M*e/a.fontSize),r+=M*e/a.fontSize)}),{letterWidthArr:i,textWidth:r}}Object.defineProperty(e,"__esModule",{value:!0});var d=n(18),h=i(d),p=n(27),v=i(p),m=n(82),g=i(m),_=n(17),y=i(_),x=(n(148),n(249)),b=n(233),S=i(b),w=n(109),E=n(36),A=i(E),T=A.default.isNumber,M=32,I=24,P="",k="\n";e.default=r},function(t,e,n){"use strict";function i(t){var e=t.geometries.map(function(t){return t.paths||[]}),n=new r.PolygonParseHelper({complexPolygons:e,IndexType:Uint32Array});n.updatePositions({fp64:!0});var i=n.getPositions();return{indices:n.getIndices(),positions:i,positions64xyLow:n.getPositions64xyLow()}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(344);e.default=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return new m.default(t).toUpArray()}function a(t,e){var n=function(e){var n=t.styles[e]||x,i=r(n.color),a=r(n.borderColor),o=r(n.eraseColor);return{color:i.slice(0,3),borderColor:a.slice(0,3),width:n.width,borderWidth:n.borderWidth?2*n.borderWidth+n.width:0,opacity:i[3],borderOpacity:a[3],lineCap:n.lineCap||0,dashArray:n.dashArray,arrowInfo:n.arrowInfo,eraseColor:o.slice(0,3),eraseOpacity:o[3],enableBloom:n.enableBloom}};t.geometries.forEach(function(n){var i=n.rainbowPaths;if(i&&i.length>0){var r=[],a=[],s=!0,l=!1,u=void 0;try{for(var f,h=(0,d.default)(i.entries());!(s=(f=h.next()).done);s=!0){var p=(0,c.default)(f.value,2),v=p[0],m=p[1];if(v>0){var _=i[v-1].path,y=_[_.length-1],x=m.path[0];if(y.lat===x.lat&&y.lng===x.lng){var b=(0,g.deduplicatePoint)(m.path.slice(1));r[r.length-1]=r[r.length-1].concat(b);var S=a[a.length-1],w=S[S.length-1].end;S.push({color:m.color,borderColor:m.borderColor,start:w,end:r[r.length-1].length-1})}else r.push((0,g.deduplicatePoint)(m.path)),a.push([{color:m.color,borderColor:m.borderColor,start:0,end:m.path.length-1}])}else r.push((0,g.deduplicatePoint)(m.path)),a.push([{color:m.color,borderColor:m.borderColor,start:0,end:m.path.length-1}])}}catch(t){l=!0,u=t}finally{try{!s&&h.return&&h.return()}finally{if(l)throw u}}n.paths=r,n.styleIdList=a}else{if((0,g.isSimple)(n.paths)&&t._eraseOpts[n.id]){var E=t._eraseOpts[n.id],v=E.index,A=E.point,T=n.paths.slice(v-1,v+1);if(T.length){var M=o(T[0],T[1],A,v),I=M.ptArr,P=M.crossIndex,k=M.type;t._eraseOpts[n.id].crossOpts={ptArr:I,crossIndex:P,type:k},"start"===k||"end"===k||n.paths.splice(P,0,{lat:I[0],lng:I[1],height:0})}}n.paths=(0,g.normalize)(n.paths),e&&(n.paths=n.paths.map(function(t){return(0,g.cross180)(t)}))}});var i=t.geometries.reduce(function(t,e){return t+e.paths.reduce(function(t,e){return t+e.length-1},0)},0),a=new Float32Array(3*i),s=new Float32Array(3*i),l=new Float32Array(3*i),u=new Float32Array(3*i),f=new Float32Array(4*i),v=new Uint8ClampedArray(4*i),m=new Uint8ClampedArray(4*i),_=new Uint8ClampedArray(3*i),y=new Float32Array(1*i),b=new Float32Array(1*i),S=new Float32Array(1*i),w=new Uint8ClampedArray(4*i),E=new Uint8ClampedArray(4*i),A=0,T=0,M=0,I=0,P=0,k=0,L=0,C=0,R=0,D=0;return t.geometries.forEach(function(e,i){var o=n(e.styleId),c=t._eraseOpts[e.id]||null,d=o.color,g=o.opacity,x=o.borderColor,N=o.borderOpacity;e.paths.forEach(function(t,n){for(var B=t[0],O=0;O<t.length;O++)!function(O){if(e.rainbowPaths){var F=e.styleIdList[n].find(function(t){return O>=t.start&&O<=t.end});if(F.color){var z=r(F.color);o.color=z.slice(0,3),o.opacity=z[3]}else o.color=d,o.opacity=g;if(F.borderColor){var V=r(F.borderColor);o.borderColor=V.slice(0,3),o.borderOpacity=V[3]}else o.borderColor=x,o.borderOpacity=N}var U=t[O],G=(0,h.splitLatLngNumber)(U.lat),H=(0,h.splitLatLngNumber)(U.lng);if(O<t.length-1){a[A]=H.high,A+=1,a[A]=G.high,A+=1,a[A]=U.height,A+=1,l[M]=U.lng-B.lng,M+=1,l[M]=U.lat-B.lat,M+=1,l[M]=0,M+=1,B=U;var Y=t[O+1],j=(0,h.splitLatLngNumber)(Y.lat),W=(0,h.splitLatLngNumber)(Y.lng);f[P]=H.low,P+=1,f[P]=G.low,P+=1,f[P]=W.low,P+=1,f[P]=j.low,P+=1}if(O>0){var X=t[O+1];X||(X=U),s[T]=H.high,T+=1,s[T]=G.high,T+=1,s[T]=U.height,T+=1,u[I]=X.lng-U.lng,I+=1,u[I]=X.lat-U.lat,I+=1,u[I]=0,I+=1}if(O>0){1===e.paths.length&&c&&c.crossOpts.crossIndex>=O?(v[k]=o.eraseColor[0],m[k]=o.eraseColor[0],k+=1,v[k]=o.eraseColor[1],m[k]=o.eraseColor[1],k+=1,v[k]=o.eraseColor[2],m[k]=o.eraseColor[2],k+=1,v[k]=o.eraseOpacity,m[k]=o.eraseOpacity,k+=1):(v[k]=o.color[0],m[k]=o.borderColor[0],k+=1,v[k]=o.color[1],m[k]=o.borderColor[1],k+=1,v[k]=o.color[2],m[k]=o.borderColor[2],k+=1,v[k]=o.opacity,m[k]=o.borderOpacity,k+=1);var Z=(0,p.encodePickingColor)(i);_[3*L+0]=Z[0],_[3*L+1]=Z[1],_[3*L+2]=Z[2],L+=1,w[R]=o.lineCap,R+=1,w[R]=o.dashArray[0],R+=1,w[R]=o.dashArray[1],R+=1,w[R]=o.enableBloom,R+=1,y[C]=o.width,b[C]=o.width,S[C]=o.borderWidth,C+=1,E[D]=o.arrowInfo[0],D+=1,E[D]=o.arrowInfo[1],D+=1,E[D]=o.arrowInfo[2],D+=1,E[D]=o.arrowInfo[3],D+=1}}(O)})}),{instanceStartPositionList:a,instanceEndPositionList:s,instanceLeftDeltaList:l,instanceRightDeltaList:u,instanceStartEndPostions64xyLowList:f,instanceColorList:v,instanceBorderColorList:m,instancePickingColorList:_,instanceWidthList:y,instanceOriginWidthList:b,instanceBorderWidthList:S,instanceLineInfoList:w,instanceArrowInfoList:E,enableGeodesic:e,count:i}}function o(t,e,n,i){var r=l(t),a=l(e),o=l(n),u=[a[0]-r[0],a[1]-r[1]],c=[o[0]-r[0],o[1]-r[1]],f=s(c,u);if(f<=0)return{ptArr:t,crossIndex:i-1,type:"start"};var d=s(u,u);if(d<=f)return{ptArr:e,crossIndex:i,type:"end"};if(!(Math.abs(u[0]*c[1]-c[0]*u[1])<=.3))return{ptArr:e,crossIndex:i,type:"end"};var h=f/d,p=[r[0]+h*u[0],r[1]+h*u[1]];return{ptArr:[p[1],p[0]],crossIndex:i,type:"middle"}}function s(t,e){return t[0]*e[0]+t[1]*e[1]}function l(t){return[t.lng,t.lat]}Object.defineProperty(e,"__esModule",{value:!0});var u=n(27),c=i(u),f=n(25),d=i(f),h=n(148),p=n(249),v=n(233),m=i(v),g=n(508),_=n(350),y=i(_),x=new y.default;e.default=a},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){if(t.getLng()<e.getLng()){n.getLng()>=0?t.lng=180:e.lng=-179.9999}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),o=i(a),s=n(1),l=i(s),u=n(46),c=i(u),f=n(214),d=i(f),h=n(414),p=i(h),v=n(506),m=i(v),g=function(){function t(e,n){(0,o.default)(this,t),this.geometries=e.map(function(t){return t.position=c.default.convert(t.position),t}),this.clusters=[],this.minimumClusterSize=n.minimumClusterSize,this.gridSize=n.gridSize,this.averageCenter=n.averageCenter,this.projection=new p.default}return(0,l.default)(t,[{key:"createClusters",value:function(t){var e=this,n=t.zoom>t.maxZoom;(t.resetCluster||n)&&this._resetClusters();var i=t.pixelsPerDegree,r=new d.default(c.default.convert(t.mapBounds.sw),c.default.convert(t.mapBounds.ne)),a=this._getExtendedBounds(r,t.zoom);return this.geometries.filter(function(t){return a.contains(t.position)&&!t.hasCluster}).forEach(function(r){n?(e._createNewCluster(r,t.zoom),r.hasCluster=!0):e._addToClosestCluster(r,i,t.zoom)}),this.clusters.forEach(function(t){t.getGeometries().length<e.minimumClusterSize&&e._breakUpCluster(t)}),this.clusters=this.clusters.filter(function(t){return t.getGeometries().length}),this.clusters.map(function(t){return t.getClusterInfo()})}},{key:"_resetClusters",value:function(){this.clusters.forEach(function(t){return t.remove()}),this.clusters=[],this.geometries.forEach(function(t){return delete t.hasCluster})}},{key:"_addToClosestCluster",value:function(t,e,n){var i=null,r=4e3;this.clusters.filter(function(e){return e.isInBounds(t)}).forEach(function(n){var a=n.getCenter();if(a){var o=(a.lng-t.position.lng)*e[0],s=(a.lat-t.position.lat)*e[1],l=Math.sqrt(o*o+s*s);l<r&&(r=l,i=n)}}),i&&i.isInBounds(t)?i.add(t):this._createNewCluster(t,n),t.hasCluster=!0}},{key:"_createNewCluster",value:function(t,e){var n=new m.default(this,e);n.add(t),this.clusters.push(n)}},{key:"_getExtendedBounds",value:function(t,e){var n=t.getNorthEast(),i=t.getSouthWest(),a=this.projection.latLngToCoord(n,e),o=this.projection.latLngToCoord(i,e);a.x+=this.gridSize,a.y-=this.gridSize,o.x-=this.gridSize,o.y+=this.gridSize;var s=this.projection.coordToLatLng(a,e),l=this.projection.coordToLatLng(o,e);return r(s,l,t.getCenter()),new d.default(l,s)}},{key:"_breakUpCluster",value:function(t){var e=this;t.getGeometries().length<2||(t.getGeometries().forEach(function(n){e._createNewCluster(n,t.zoom)}),t.remove())}}]),t}();e.default=g},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(679),v=i(p),m=n(507),g=i(m),_=function(t){function e(){(0,s.default)(this,e);var t=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this));return t.materials={escalator2:[.34999999403954,.34999999403954,.34999999403954],escalator3:[1,1,1]},t}return(0,h.default)(e,t),(0,u.default)(e,[{key:"parse",value:function(t){var e=this,n=(0,g.default)(t),i=n.meshes;i.forEach(function(t){var n=t.materials[0]&&t.materials[0].name;if(n){for(var i=new Float32Array(t.attributes.POSITION.value.length),r=0;r<i.length;r+=3)i[r]=e.materials[n][0],i[r+1]=e.materials[n][1],i[r+2]=e.materials[n][2];t.attributes.COLOR_0={size:3,value:i}}});var r=i.reduce(function(t,e){return t+e.header.vertexCount},0);return{mode:4,vertexCount:r,attributes:this.mergeAttributes(i,r)}}}]),e}(v.default);e.default=_},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var n=(0,E.latLng2Mercator)(t.x||t.lng,t.y||t.lat),i=new T.default;return i.x=n.x-e.x,i.y=n.y-e.y,i}function a(t,e){return r((0,E.pixels2LongLat)(t.x,t.y),e)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(25),s=i(o),l=n(82),u=i(l),c=n(132),f=i(c),d=n(17),h=i(d),p=n(15),v=i(p),m=n(18),g=i(m),_=n(27),y=i(_),x=n(0),b=i(x),S=n(1),w=i(S),E=n(396),A=n(75),T=i(A),M=n(46),I=i(M),P=n(10),k=i(P),L=n(828),C=i(L),R=n(414),D=i(R),N=n(343),B=n(395),O=n(286),F=function(){function t(e,n){(0,b.default)(this,t),this.buildingId=e,this.dataView=n.buffer,this.zoom=20,this.areaCenter=(0,E.latLng2Mercator)(n.areaCenter.lng,n.areaCenter.lat),this.floorInfo=n.floorInfo,this.selectedFloorNum=n.selectedFloorNum,this.indoorStyle=n.indoorStyle,this.projection=new D.default,this._initialize()}return(0,w.default)(t,[{key:"_initialize",value:function(){var t=this,e=(0,y.default)(this.floorInfo.bounds,2),n=e[0],i=e[1],a=[new I.default(i.lat,n.lng),n,new I.default(n.lat,i.lng),i],o=a.map(function(e){return r(e,t.areaCenter)}),s={displayType:2,gateNum:0,gates:[],height:0,point:o,regionId:"",brickness:1},l=this._translateLatLngForSingleRegion(s,0,!0,null,0);l.isWall=!1,this._boundsRegion=l}},{key:"parseBuilding",value:function(){var t=this.buildingId,e=new DataView(this.dataView.buffer),n=0,i={};i.Attribute_size=e.getInt32(n,!0),n+=4,i.Data_size=e.getInt32(n,!0),n+=4,i.Topology_size=e.getInt32(n,!0),n+=4,i.Name_CN_size=e.getUint8(n,!0),n+=1,i.Name_CN=String.fromCharCode.apply(String,(0,g.default)(new Uint16Array(e.buffer.slice(n,n+i.Name_CN_size)))),n+=i.Name_CN_size,i.DefaultFloor=e.getUint8(n,!0),n+=1,i.Floor_num=e.getUint8(n,!0),n+=1,i.Floor_str_size=e.getUint8(n,!0),n+=1;for(var r=[],a=0;a<i.Floor_str_size;a++){var o=e.getUint8(n,!0);r.push(o),n+=1}i.floorStr=String.fromCharCode.apply(null,r);for(var s=[],l=0;l<4;l++){var u=e.getInt32(n,!0);s.push(u),n+=4}i.Floor_num=e.getInt32(n,!0),n+=4;for(var c=[],f=0;f<i.Floor_num;f++){var d=e.getInt32(n,!0);c.push(d),n+=4}for(var h=[],p=[],v=[],m=[],_=[],y=[],x=[],b=[],S=[],w=[],E=[],A=0;A<i.Floor_num;A++)if(A===this.selectedFloorNum+1){var T=A,M=[],I=[],P=[],k=[],L=[],C=[],R=[],D=[],N=[],B=[],O=T,F=e.getInt32(n,!0);n+=4;for(var z=[],V=0;V<F;V++){var U={},G=e.getInt32(n,!0);n+=4;var H=e.getInt32(n,!0);U.type=G,U.size=H,z.push(U),n+=4}for(var Y=0;Y<F;Y++){var j=z[Y].type,W=z[Y].size,X=Y;if(9===j){var Z=this._parseFloorPointLayer(e,n,O,{nowFloorPoints22:k,nowFloorPoints21:L,nowFloorPoints20:C,nowFloorPoints19:R,nowFloorPoints18:D,nowFloorPoints17:N,nowFloorPoints16:B});n+=W,k=Z.nowFloorPoints22,L=Z.nowFloorPoints21,C=Z.nowFloorPoints20,R=Z.nowFloorPoints19,D=Z.nowFloorPoints18,N=Z.nowFloorPoints17,B=Z.nowFloorPoints16}else if(4===j){var q=this._parseFloorRegionLayer(e,n,Y);n+=W;var Q=q.nowLayerRegions,J=q.nowLayerEscalatorRegions;0===I.length&&M.push({styleId:Q.styleId,points:[this._boundsRegion],layerId:X}),J.length>0&&P.push.apply(P,(0,g.default)(J)),I.push(Q)}else if(11===j){n+=W;continue}}for(var K=[],$=0;$<4;$++){var tt=e.getUint8(n,!0);K.push(tt),n+=1}v[T]=M,h[T]=I,p[T]=P,x[T]=this._refactorFloorPoints(C,t,T),b[T]=this._refactorFloorPoints(R,t,T),S[T]=this._refactorFloorPoints(D,t,T),w[T]=this._refactorFloorPoints(N,t,T),E[T]=this._refactorFloorPoints(B,t,T);var et={};et.zoom22=_,et.zoom21=y,et.zoom20=x,et.zoom19=b,et.zoom18=S,et.zoom17=w,et.zoom16=E}else n+=c[A];return i.floorBoundsData=v,i.buildingData=h,i.buildingEscalator=p,i.buildingPoint=et,i.buildingLine=m,i}},{key:"_parseFloorPointLayer",value:function(t,e,n,i){var r=i.nowFloorPoints22,a=i.nowFloorPoints21,o=i.nowFloorPoints20,s=i.nowFloorPoints19,l=i.nowFloorPoints18,u=i.nowFloorPoints17,c=i.nowFloorPoints16;e+=2,e+=2;var f=t.getInt32(e,!0);e+=4;for(var d=[],h=[],p=0;p<f;p++){var v={},m=(0,E.readUint24)(new Uint8Array(t.buffer.slice(e,e+3))),_=4095&m;_^=65536,v.classCode=_;var y=m>>12&15,x=m>>16&255;e+=3;var b=t.getUint16(e,!0);e+=2,v.hPoi_count=b;var S=t.getInt32(e,!0);e+=4,v.poiPriority=S;var w=t.getUint8(e,!0);e+=1,v.Strace=w;var A={};A.strace16=1&w,A.strace17=2&w,A.strace18=4&w,A.strace19=8&w,A.strace20=16&w,A.strace21=32&w,A.strace22=64&w,v.zoomStrace=A;var T=t.getUint32(e,!0);e+=4,v.direct=T;var M=String.fromCharCode.apply(String,(0,g.default)(new Uint16Array(t.buffer.slice(e,e+2*y))));e+=2*y,v.Name_str1=M;var I=x-y,P=String.fromCharCode.apply(String,(0,g.default)(new Uint16Array(t.buffer.slice(e,e+2*I))));h.push(P),e+=2*I,v.Name_str2=P,d.push(v)}for(var L=[],C=0;C<d.length;C++)for(var R=d[C].hPoi_count,D=0;D<R;D++){var N=t.getInt32(e,!0);e+=4;var B=t.getInt32(e,!0);e+=4;var O=(0,E.pixels2LongLat)(N,B);L.push(O)}var F=new Uint8Array(t.buffer.slice(e,e+4));F=String.fromCharCode.apply(null,F),F=F.toUpperCase(),e+=4;var z=[];if("EXPH"===F)for(var V=0;V<f;V++){var U=t.getUint16(e,!0);e+=2,z.push(U)}F=new Uint8Array(t.buffer.slice(e,e+4)),F=String.fromCharCode.apply(null,F),F=F.toUpperCase(),e+=4;var G=[];if("EXNR"===F){for(var H=[],Y=0;Y<f;Y++){var j=t.getUint16(e,!0);e+=2;for(var W=15&j,X=[],Z=0;Z<W;Z++)X.push(t.getUint8(e,!0)),e+=1;H.push(X)}for(var q=0;q<H.length;q++){for(var Q=[],J=H[q],K=0;K<J.length;K++){var $=new Uint16Array(t.buffer.slice(e,e+2*J[K])),tt=String.fromCharCode.apply(null,$);Q.push(tt),e+=2*J[K]}G.push(Q)}}for(var et=0;et<L.length;et++){for(var nt={},it=[],rt=d[et].hPoi_count,at=0;at<rt;at++);var ot="";d[et].Name_str2&&(ot="\\"+d[et].Name_str2),it.push(L[et]),nt.points=it,nt.styleId=d[et].classCode,nt.rank=d[et].poiPriority,nt.uuid=k.default.uniqueId(),nt.text=d[et].Name_str1+ot,nt.buildingId=this.buildingId;var st=d[et].zoomStrace;if(0!==st.strace20){var lt=d[et].direct;lt=lt>>16&15;var ut=(0,E.extendCopy)(nt);ut.direct=lt;var ct=z[et],ft=this._translateLatLngPointForSinglePoint(ut,ct,n,o.length);o.push(ft)}if(0!==st.strace19){var dt=d[et].direct;dt=dt>>12&15;var ht=(0,E.extendCopy)(nt);ht.direct=dt;var pt=z[et],vt=this._translateLatLngPointForSinglePoint(ht,pt,n,s.length);s.push(vt)}if(0!==st.strace18){var mt=d[et].direct;mt=mt>>8&15;var gt=(0,E.extendCopy)(nt);gt.direct=mt;var _t=z[et],yt=this._translateLatLngPointForSinglePoint(gt,_t,n,l.length);l.push(yt)}if(0!==st.strace17){var xt=d[et].direct;xt=xt>>4&15;var bt=(0,E.extendCopy)(nt);bt.direct=xt;var St=z[et],wt=this._translateLatLngPointForSinglePoint(bt,St,n,u.length);u.push(wt)}if(0!==st.strace16){var Et=d[et].direct;Et&=15;var At=(0,E.extendCopy)(nt);At.direct=Et;var Tt=z[et],Mt=this._translateLatLngPointForSinglePoint(At,Tt,n,c.length);c.push(Mt)}}return{offset:e,nowFloorPoints22:r,nowFloorPoints21:a,nowFloorPoints20:o,nowFloorPoints19:s,nowFloorPoints18:l,nowFloorPoints17:u,nowFloorPoints16:c}}},{key:"_parseFloorRegionLayer",value:function(t,e,n){var i=this,r={};e+=2;var o=t.getUint16(e,!0);e+=2,e+=4;var s=t.getInt32(e,!0);e+=4;for(var l=[],u=0;u<s;u++){var c=t.getInt32(e,!0);l.push(c),e+=4}for(var f=[],d={},h=0,p=0;p<s;p++){d[p]={},d[p].start=h;var m=t.getUint16(e,!0);f.push(m),h+=m,d[p].end=h,e+=2}for(var _=[],y=0;y<h;y++){var x=t.getUint32(e,!0);e+=4;var b=t.getUint32(e,!0);e+=4;var S={x:x,y:b};_.push(S)}var w=new Uint8Array(t.buffer.slice(e,e+4));w=String.fromCharCode.apply(null,w),w=w.toUpperCase(),e+=4;var E=[];if("EXPI"===w){for(var A=[],T=0;T<s;T++){var M=t.getUint8(e,!0);A.push(M),e+=1}for(var I=0;I<A.length;I++){var P=A[I],k=String.fromCharCode.apply(String,(0,g.default)(new Uint8Array(t.buffer.slice(e,e+P))));E.push(k),e+=A[I]}}if(w=new Uint8Array(t.buffer.slice(e,e+4)),w=String.fromCharCode.apply(null,w),w=w.toUpperCase(),e+=4,"EXMP"===w)for(var L=0;L<_.length;L++){var C=t.getUint8(e,!0);e+=1;var R=t.getUint8(e,!0);e+=1,_[L].x+=C/100,_[L].y+=R/100}for(var D=[],N=0,B=0;B<f.length;B++){var O=void 0;O=0===B?_.slice(B,f[B]):_.slice(N,N+f[B]),N+=f[B],D.push(O)}for(var F=[],z=0;z<D.length;z++){var V=D[z].map(function(t){return a(t,i.areaCenter)}),U=E[z],G={point:V,height:l[z],regionId:U};F.push(G)}if(w=new Uint8Array(t.buffer.slice(e,e+4)),w=String.fromCharCode.apply(null,w),w=w.toUpperCase(),e+=4,"EX3D"===w)for(var H=0;H<F.length;H++){var Y=t.getInt8(e,!0);e+=1;var j=t.getUint8(e,!0);e+=1;var W=t.getUint8(e,!0);e+=1;var X=t.getInt16(e,!0);e+=2;var Z=t.getUint16(e,!0);e+=2;var q=t.getUint16(e,!0);e+=2;var Q=t.getUint32(e,!0);e+=4;var J=t.getUint32(e,!0);e+=4,F[H].height=Y/10,F[H].displayType=j,F[H].brickness=W,F[H].angle=X,F[H].rectWidth=Z,F[H].rectHeight=q,F[H].centerX=Q,F[H].centerY=J}if(w=new Uint8Array(t.buffer.slice(e,e+4)),w=String.fromCharCode.apply(null,w),w=w.toUpperCase(),e+=4,"EXGT"===w)for(var K=0;K<F.length;K++){var $=F[K],tt=t.getUint16(e,!0);if(e+=2,$.gateNum=tt,$.gates=[],tt>0){for(var et=0;et<tt;et++){var nt={};nt.hasCelling=!!t.getUint8(e,!0),e+=1,$.gates.push(nt)}for(var it=0;it<tt;it++){var rt=$.gates[it];rt.pt=[{},{}];for(var at=0;at<2;at++)rt.pt[at].x=t.getUint32(e,!0),e+=4,rt.pt[at].y=t.getUint32(e,!0),e+=4,rt.pt[at].x+=t.getUint8(e,!0)/100,e+=1,rt.pt[at].y+=t.getUint8(e,!0)/100,e+=1}}}for(var ot=[],st=[],lt=0;lt<F.length;lt++){var ut=F[lt],ct=null;if(1===ut.displayType)ct=this._translateLatLngForSingleRegion(ut,n,!1);else{if(4===ut.displayType){st.push(ut);continue}var ft=this._extrudePolygon(ut.point,0===n?0:1,.2,function(t,e,n){return 0===e?n[n.length-1]:n[e-1]},function(t,e,n){return e===n.length-1?n[0]:n[e+1]}),dt=(0,v.default)({},ut,{point:ft});ct=this._translateLatLngForSingleRegion(dt,0,!0,null,0===n?0:.5)}ct.originRegion=ut,ct.isWall=!1,ot.push(ct)}var ht=this._getWallRegions(ot,n);return r.styleId=196608^o,r.points=[].concat(ot,(0,g.default)(ht)),r.layerId=n,{offset:e,nowLayerRegions:r,nowLayerEscalatorRegions:st}}},{key:"_getWallRegions",value:function(t,e){for(var n=this,i=[],r=t,a=r.slice(),o=0;o<a.length;o++){(function(t){var r=a[t],o=r.originRegion;if(2!==o.displayType)return"continue";var s=o.point,l=s[0],u=s;u[0].x===u[u.length-1].x&&u[0].y===u[u.length-1].y||u.push(u[0]),(0,E.isClockWise)(u)&&u.reverse();var c={},f=o.gates.map(function(t){return{hasCelling:t.hasCelling,pt:t.pt.map(function(t){var e=(0,E.pixels2LongLat)(t.x,t.y),i=(0,E.latLng2Mercator)(e.x,e.y),r={};return r.x=i.x-n.areaCenter.x,r.y=i.y-n.areaCenter.y,new T.default(r.x,r.y)})}}).filter(function(t){var e=t.pt.reduce(function(t,e){return""+t+e.x+"+"+e.y+";"},"");if(!c[e])return c[e]=!0,!0}),d=[[]],h=0;u.forEach(function(t,e){if(e!==u.length-1){d[h].push(t);var n=u[e+1],i=n.clone().sub(t),r=i.clone().normalize(),a=[];f.forEach(function(e){var o=e.pt[1].clone().sub(e.pt[0]),s=o.clone().normalize(),l=Math.abs(i.x*o.y-o.x*i.y),u=l<=.3,c=e.pt[0].x>=Math.min(t.x,n.x)&&e.pt[0].x<=Math.max(t.x,n.x)&&e.pt[0].y>=Math.min(t.y,n.y)&&e.pt[0].y<=Math.max(t.y,n.y)&&e.pt[1].x>=Math.min(t.x,n.x)&&e.pt[1].x<=Math.max(t.x,n.x)&&e.pt[1].y>=Math.min(t.y,n.y)&&e.pt[1].y<=Math.max(t.y,n.y);if(u&&c){var f=e.pt.slice();r.dot(s)+1<.1&&f.reverse(),a.push(f)}}),a.sort(function(e,n){return e[0].clone().sub(t).lengthSq()-n[0].clone().sub(t).lengthSq()});var o=[];a.forEach(function(t){if(0===o.length)o.push(t);else{var e=o[o.length-1];(Math.abs(t[0].x-e[0].x)>.1||Math.abs(t[0].y-e[0].y)>.1)&&o.push(t)}}),o.forEach(function(t){d[h].push(t[0]),h+=1,d[h]=[t[1]]})}}),d[h].push(l);var p=null;if(d.length>1){var m=d[0],_=m[0],y=d[d.length-1],x=y[y.length-1];x.x===_.x&&x.y===_.y&&(d.shift(),y.pop(),y.push.apply(y,(0,g.default)(m)))}p=d.map(function(t){var i=t,r=i.slice().reverse(),a=n._extrudePolygon(r,0===e?1:-1,.2,function(t,e,n){return 0===e?1===d.length?n[n.length-2]:t:n[e-1]},function(t,e,n){return e===n.length-1?1===d.length?n[1]:t:n[e+1]}),o=[].concat((0,g.default)(i),(0,g.default)(a));return(0,E.isClockWise)(o)&&0===e&&o.reverse(),o}),p.forEach(function(t){var e=(0,v.default)({},o);e.point=t;var r=n._translateLatLngForSingleRegion(e,1,!1,t.holeIndecies);r.height/=10,r.isWall=!0,i.push(r)})})(o)}return i}},{key:"_extrudePolygon",value:function(t,e,n,i,r){var a=t;return a.map(function(t,o){var s=i(t,o,a),l=r(t,o,a),u=t.clone().sub(s).normalize(),c=l.clone().sub(t).normalize(),f=new T.default(-u.y,u.x),d=new T.default(-c.y,c.x),h=0===o?d:f,p=u.clone().add(c).normalize(),v=new T.default(-p.y,p.x),m=Math.abs(v.dot(h)),g=v.clone().mult(e).mult(n/(Math.abs(m-0)<.1?1:m));return t.clone().add(g)})}},{key:"getEscalatorAttributes",value:function(t){var e=this,n=new Float32Array(2*t.length),i=new Int16Array(4*t.length);return t.forEach(function(t,r){var a=(0,E.pixels2LongLat)(t.centerX,t.centerY),o=(0,E.latLng2Mercator)(a.x,a.y);n[2*r]=o.x-e.areaCenter.x,n[2*r+1]=o.y-e.areaCenter.y,i[4*r]=t.rectWidth,i[4*r+1]=t.rectHeight,i[4*r+2]=t.height,i[4*r+3]=t.angle}),{instanceCoordsTypeArray:n,instanceInfosTypeArray:i,count:t.length}}},{key:"getTopGeometryAttributes",value:function(t){var e=this,n=this.zoom,i=t.reduce(function(t,e){return t+e.points.reduce(function(t,e){return t+(e.point&&e.point.length||0)},0)},0),r=t.reduce(function(t,e){return t+e.points.reduce(function(t,e){return t+(e.index.top&&e.index.top.length||0)},0)},0),a=r>65535?new Uint32Array(r):new Uint16Array(r),o=new Float32Array(i),s=new Uint8ClampedArray(i),l=0,u=0;t.forEach(function(t){var i=t.styleId,r=(0,N.getStyle)(i,n,e.indoorStyle);r&&t.points.forEach(function(t){if(!t._fail){var e=l,n=u;t.index.top&&(t.index.top.forEach(function(t,i){a[n+i]=t+e/3}),t.point.forEach(function(n,i){o[e+i]=n,s[e+i]=t.isWall?r.topStyle[i%3]:r.bottomStyle[i%3]}),u+=t.index.top.length,l+=t.point.length)}})});var c=this._computeNormals(o,a);return{color:s,position:o,index:a,normal:c}}},{key:"getSidesGeometryAttributes",value:function(t){var e=this,n=this.zoom,i=t.reduce(function(t,e){return t+e.points.reduce(function(t,e){return t+(e.index.sides&&6*e.index.sides.length*3||0)},0)},0),r=t.reduce(function(t,e){return t+e.points.reduce(function(t,e){return t+(e.index.sides&&6*e.index.sides.length||0)},0)},0),a=r>65535?new Uint32Array(r):new Uint16Array(r),o=new Float32Array(i),s=new Uint8ClampedArray(i),l=0,u=0;t.forEach(function(t){var i=t.styleId,r=(0,N.getStyle)(i,n,e.indoorStyle);r&&t.points.forEach(function(t){if(!t._fail){var e=l,n=u;if(t.index.sides){var i=t.index.top,c=Math.max.apply(null,i||[0]);t.index.sides.forEach(function(i,l){var u=t.isWall&&c>0&&i.every(function(t){return t>c?t-c>=c/2:t>=c/2});i.forEach(function(i,c){var f=t.point[3*i],d=t.point[3*i+1],h=t.point[3*i+2],p=e+6*l*3+3*c;o[p+0]=f,o[p+1]=d,o[p+2]=h,s[p+0]=u?r.insideStyle[0]:r.outsideStyle[0],s[p+1]=u?r.insideStyle[1]:r.outsideStyle[1],s[p+2]=u?r.insideStyle[2]:r.outsideStyle[2];var v=e/3+6*l+c;a[n+6*l+c]=v})}),l+=6*t.index.sides.length*3,u+=6*t.index.sides.length}}})});var c=this._computeNormals(o,a);return{color:s,position:o,index:a,normal:c}}},{key:"getBuildingPointInfo",value:function(t){var e=this.indoorStyle,n={},i="",r=[];(0,h.default)(t).forEach(function(a){var o=parseInt(a.replace("zoom",""),10);n[a]=[],t[a].forEach(function(t,s){return n[a][s]=[],t.directs.map(function(l,u){var c=t.styleIds[u],f=t.texts[u],d=t.ranks[u],h=t.positions.slice(3*u,3*u+3),p=(0,N.getStyle)(c,o,e);if(p){var v=(0,N.getStyle)(p.labelid,o,e);if(v){var m=p.icon_offset,g=null,_=v.fontSize,y=v.font,x=(0,E.getPoiDrawInfo)(c,o,l,e);x.drawIcon&&(g=B.ConfigUtil.getIconSrc(m),r.push(g)),i+=f;var b={direct:l,styleId:c,text:f,rank:d,font:y,fontSize:_,position:[h[0],h[1],h[2]],iconSrc:g,drawInfo:x};n[a][s].push(b)}}})}),n[a].shift()});var a=new f.default(i.split("")),o=(0,u.default)(a),s=new f.default(r);return r=(0,u.default)(s),{pointInfoSet:n,glyphList:o,iconSrcList:r}}},{key:"parseInstanceBuildingPoint",value:function(t,e,n,i){var r=this.indoorStyle;return(0,h.default)(t).forEach(function(a){var o=parseInt(a.replace("zoom",""),10);t[a].filter(function(t){return!!t}).forEach(function(t,a){var s=0,l=[],c=[],f=[],d=[],h=[],p=[],v=i[o][a];t.forEach(function(t,i){var a=v[i],m=(0,N.getStyle)(t.styleId,o,r),_=(0,N.getStyle)(m.labelid,o,r);if(a.forEach(function(e){return e.rank=t.rank}),t.drawInfo.drawIcon){var y=e[t.iconSrc];if(y){var x=B.INDOOR_ICON_SIZE/2,b=B.INDOOR_ICON_SIZE/2;l.push(t.position[0],t.position[1],0),c.push(B.INDOOR_ICON_SIZE,B.INDOOR_ICON_SIZE,x,b),f.push(y.x,y.y,y.width,y.height),d.push(0,1,-1,1),h.push(1,1,1,1),p.push(0,0,0,0),a.iconSymbolIndex=s,s+=1}}t.drawInfo.drawLabel&&a.forEach(function(e){var i=e.anchor,r=e.textBounds,a=r.w,o=r.h,v=new Uint16Array(e.text.length),m=e.text.length,y=[0],x=0,b=0;(0,u.default)(e.text).forEach(function(e){var i=t.fontSize/n[e].fontSize;x=y[y.length-1]+n[e].width*i,b=Math.max(b,n[e].height*i),y.push(x)});for(var S=Math.max(1,x/a,b/o),w={x:x/2-i.x*S,y:b/2-i.y*S},E=0;E<m;E++){var A=n[e.text[E]],T=t.fontSize/A.fontSize;l.push(t.position[0],t.position[1],0),c.push(A.width*T,A.height*T,w.x-y[E],w.y),f.push(A.x,A.y,A.width,A.height),d.push(0,1,0,1),h.push.apply(h,(0,g.default)(_.fillStyle)),p.push.apply(p,(0,g.default)(_.strokeStyle)),v[E]=s,s+=1}e.textSymbolIndexList=v,e.instance_trans=t.position,e.instance_coords=[x,b,w.x,w.y]})});var m=new Float32Array(l),_=new Float32Array(c),y=new Float32Array(f),x=new Float32Array(d),b=new Uint8ClampedArray(h),S=new Uint8ClampedArray(p);v.instance={isIndoor:!0,instanceTransTypeArray:m,instanceCoordsTypeArray:_,instanceTextBoundsTypeArray:y,instanceInfosTypeArray:x,instanceColorsTypeArray:b,instanceStrokeColorsTypeArray:S,count:d.length/4}})}),i}},{key:"_computeNormals",value:function(t,e){var n=t,i=new Float32Array(t.length),r=void 0,a=void 0,o=void 0,s=C.default.create(),l=C.default.create(),u=C.default.create(),c=C.default.create(),f=C.default.create();if(e)for(var d=e,h=0;h<d.length;h+=3)r=3*d[h+0],a=3*d[h+1],o=3*d[h+2],s[0]=n[r+0],s[1]=n[r+1],s[2]=n[r+2],l[0]=n[a+0],l[1]=n[a+1],l[2]=n[a+2],u[0]=n[o+0],u[1]=n[o+1],u[2]=n[o+2],C.default.subtract(c,u,l),C.default.subtract(f,s,l),C.default.cross(c,c,f),i[r]+=c[0],i[r+1]+=c[1],i[r+2]+=c[2],i[a]+=c[0],i[a+1]+=c[1],i[a+2]+=c[2],i[o]+=c[0],i[o+1]+=c[1],i[o+2]+=c[2];else for(var p=0;p<n.length;p+=9)s[0]=n[p+0],s[1]=n[p+1],s[2]=n[p+2],l[0]=n[p+3],l[1]=n[p+4],l[2]=n[p+5],u[0]=n[p+6],u[1]=n[p+7],u[2]=n[p+8],C.default.subtract(c,u,l),C.default.subtract(f,s,l),C.default.cross(c,c,f),i[r]+=c[0],i[r+1]+=c[1],i[r+2]+=c[2],i[a]+=c[0],i[a+1]+=c[1],i[a+2]+=c[2],i[o]+=c[0],i[o+1]+=c[1],i[o+2]+=c[2];for(var v=C.default.create(),m=0;m<i.length;m+=3)v[0]=i[m+0],v[1]=i[m+1],v[2]=i[m+2],C.default.normalize(v,v),i[m+0]=v[0],i[m+1]=v[1],i[m+2]=v[2];return i}},{key:"_translateLatLngPointForSinglePoint",value:function(t,e,n){var i=(0,v.default)({},t),r=i.points[0],a=(0,E.latLng2Mercator)(r.x,r.y);return i.points=[{x:a.x-this.areaCenter.x,y:a.y-this.areaCenter.y,z:e}],i.height=this.poiHeight/9,i.floorId=n,i}},{key:"_translateLatLngForSingleRegion",value:function(t,e,n,i,r){var a=e,o="",l=t,u=l.height,c=t,f=c.regionId;t=t.point;var d={},h=[],p=[];d.height=u;var v="";if(t.length>=3&&(0===a?(v="bottom",o="floor"):v="other",h=this.cutTrianleRegion(t,v,i)),"bottom"!==v&&!n){var m=!0,g=!1,_=void 0;try{for(var y,x=(0,s.default)(t);!(m=(y=x.next()).done);m=!0){var b=y.value;p.push(b.x),p.push(b.y),p.push(u)}}catch(t){g=!0,_=t}finally{try{!m&&x.return&&x.return()}finally{if(g)throw _}}}var S=!0,w=!1,E=void 0;try{for(var A,T=(0,s.default)(t);!(S=(A=T.next()).done);S=!0){var M=A.value;p.push(M.x),p.push(M.y),p.push(r||0)}}catch(t){w=!0,E=t}finally{try{!S&&T.return&&T.return()}finally{if(w)throw E}}return d.index={top:h.top||"",sides:h.sides||"",bottom:h.bottom||""},d.point=p,d.type=o,d.regionId=f,d}},{key:"cutTrianleRegion",value:function(t,e,n){var i=t,r=[],a=!0,o=!1,l=void 0;try{for(var u,c=(0,s.default)(i);!(a=(u=c.next()).done);a=!0){var f=u.value;r.push(f.x),r.push(f.y)}}catch(t){o=!0,l=t}finally{try{!a&&c.return&&c.return()}finally{if(o)throw l}}var d=n&&n.length>0?O(r,n):O(r);if("bottom"===e)return{top:d};var h=[],p=!0,v=!1,m=void 0;try{for(var g,_=(0,s.default)(d);!(p=(g=_.next()).done);p=!0){var y=g.value;h.push(y+i.length)}}catch(t){v=!0,m=t}finally{try{!p&&_.return&&_.return()}finally{if(v)throw m}}for(var x=[],b=0;b<i.length;b++){var S=[];S.push(b),S.push(b+i.length),S.push((b+1)%i.length),S.push(b+i.length),S.push(b===i.length-1?b+1:b+i.length+1),S.push((b+1)%i.length),x.push(S)}return{top:d,sides:x,bottom:h}}},{key:"_translateLatLngForSingleLine",value:function(t){var e=[],n=!0,i=!1,r=void 0;try{for(var a,o=(0,s.default)(t);!(n=(a=o.next()).done);n=!0){var l=a.value,u=(0,E.latLng2Mercator)(l.x,l.y);u.x=u.x-this.areaCenter.x,u.y=u.y-this.areaCenter.y;var c={};c.x=u.x,c.y=u.y,c.z=0,e.push(c)}}catch(t){i=!0,r=t}finally{try{!n&&o.return&&o.return()}finally{if(i)throw r}}return e}},{key:"_refactorFloorPoints",value:function(t,e,n){var i={buildingId:e,floorId:n,positions:new Float32Array(3*t.length),styleIds:new Uint32Array(t.length),poiIds:[],texts:[],ranks:[],heights:new Uint32Array(t.length),directs:new Uint32Array(t.length),uuids:[]};return t.forEach(function(t,e){i.positions[3*e]=t.points[0].x,i.positions[3*e+1]=t.points[0].y,i.positions[3*e+2]=t.points[0].z,i.styleIds[e]=t.styleId,i.poiIds.push(t.poiId),i.texts.push(t.text),i.ranks.push(t.rank),i.heights[e]=t.height,i.directs[e]=t.direct,i.uuids.push(t.uuid)}),i}}]),t}();e.default=F},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.STYLE=function(){return{regionStyles:{196609:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:0,maxScaleVal:22,color_side:-1118482,color_border:0,bottom_color:-1}],196610:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-1,maxScaleVal:22,color_side:-1118482,color_border:-1,bottom_color:-1}],196611:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-2953734,maxScaleVal:22,color_side:-5712919,color_border:-5712919,bottom_color:-2953734}],196612:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-203803,maxScaleVal:22,color_side:-1520948,color_border:-1520948,bottom_color:-203803}],196613:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-1117483,maxScaleVal:22,color_side:-3025487,color_border:-3025487,bottom_color:-1117483}],196614:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-3283714,maxScaleVal:22,color_side:-5519384,color_border:-5519384,bottom_color:-3283714}],196615:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-202279,maxScaleVal:22,color_side:-1191237,color_border:-1191237,bottom_color:-202279}],196616:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-1117483,maxScaleVal:22,color_side:-3025487,color_border:-3025487,bottom_color:-1117483}],196617:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-202279,maxScaleVal:22,color_side:-1191237,color_border:-1191237,bottom_color:-202279}],196618:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-855310,maxScaleVal:22,color_side:-2039584,color_border:-2039584,bottom_color:-855310}],196619:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-1117483,maxScaleVal:22,color_side:-3025487,color_border:-3025487,bottom_color:-1117483}],196620:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-2698028,maxScaleVal:22,color_side:-2039584,color_border:-2039584,bottom_color:-2698028}],196621:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-202279,maxScaleVal:22,color_side:-1191237,color_border:-1191237,bottom_color:-202279}],196622:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-202279,maxScaleVal:22,color_side:-1191237,color_border:-1191237,bottom_color:-202279}],196623:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-3283714,maxScaleVal:22,color_side:-5519384,color_border:-5519384,bottom_color:-3283714}],196624:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-2953734,maxScaleVal:22,color_side:-5712919,color_border:-5712919,bottom_color:-2953734}],196625:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-202279,maxScaleVal:22,color_side:-1191237,color_border:-1191237,bottom_color:-202279}],196626:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-1316376,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-1316376}],196627:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-2170631,maxScaleVal:22,color_side:-4012824,color_border:-4012824,bottom_color:-2170631}],196628:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-2170631,maxScaleVal:22,color_side:-4012824,color_border:-4012824,bottom_color:-2170631}],196629:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-2953734,maxScaleVal:22,color_side:-5712919,color_border:-5712919,bottom_color:-2953734}],196630:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-2953734,maxScaleVal:22,color_side:-5712919,color_border:-5712919,bottom_color:-2953734}],196631:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-202279,maxScaleVal:22,color_side:-1191237,color_border:-1191237,bottom_color:-202279}],196632:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-202279,maxScaleVal:22,color_side:-1191237,color_border:-1191237,bottom_color:-202279}],196633:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-202279,maxScaleVal:22,color_side:-1191237,color_border:-1191237,bottom_color:-202279}],196634:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-1117483,maxScaleVal:22,color_side:-3025487,color_border:-3025487,bottom_color:-1117483}],196635:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-1316376,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-1316376}],196636:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-657931,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-657931}],196637:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-657931,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-657931}],196638:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-656385,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-656385}],196639:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-1545,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-1545}],196640:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-1545,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-1545}],196641:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-656385,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-656385}],196642:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-459272,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-459272}],196643:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-656385,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-656385}],196644:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-328961,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-328961}],196645:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-328961,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-328961}],196646:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-66569,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-66569}],196647:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-66569,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-66569}],196648:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-328961,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-328961}],196649:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-2953734,maxScaleVal:22,color_side:-5712919,color_border:-5712919,bottom_color:-2953734}],196650:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-657931,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-657931}],196651:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-657931,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-657931}],196652:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-1969153,maxScaleVal:22,color_side:-2889739,color_border:-2889739,bottom_color:-1969153}],196653:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-135449,maxScaleVal:22,color_side:-859430,color_border:-859430,bottom_color:-135449}],196654:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-135449,maxScaleVal:22,color_side:-859430,color_border:-859430,bottom_color:-135449}],196655:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-1969153,maxScaleVal:22,color_side:-2889739,color_border:-2889739,bottom_color:-1969153}],196656:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-1378325,maxScaleVal:22,color_side:-2101793,color_border:-2101793,bottom_color:-1378325}],196657:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-1969153,maxScaleVal:22,color_side:-2889739,color_border:-2889739,bottom_color:-1969153}],196658:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-986625,maxScaleVal:22,color_side:-1776139,color_border:-1776139,bottom_color:-986625}],196659:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-986625,maxScaleVal:22,color_side:-1776139,color_border:-1776139,bottom_color:-986625}],196660:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-199962,maxScaleVal:22,color_side:-858152,color_border:-858152,bottom_color:-199962}],196661:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-199962,maxScaleVal:22,color_side:-858152,color_border:-858152,bottom_color:-199962}],196662:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-986625,maxScaleVal:22,color_side:-1776139,color_border:-1776139,bottom_color:-986625}],196663:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-596290,maxScaleVal:22,color_side:-596290,color_border:-1,bottom_color:-596290}],196664:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-3289606,maxScaleVal:22,color_side:-3289606,color_border:-1,bottom_color:-3289606}],196665:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-4861953,maxScaleVal:22,color_side:-4861953,color_border:-1,bottom_color:-4861953}],196666:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-5513217,maxScaleVal:22,color_side:-5513217,color_border:-1,bottom_color:-5513217}],196667:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-4656129,maxScaleVal:22,color_side:-4656129,color_border:-1,bottom_color:-4656129}],196668:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-4984092,maxScaleVal:22,color_side:-4984092,color_border:-1,bottom_color:-4984092}],196669:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-4069182,maxScaleVal:22,color_side:-4069182,color_border:-1,bottom_color:-4069182}],196670:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-1972315,maxScaleVal:22,color_side:-1972315,color_border:-1,bottom_color:-1972315}],196671:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-663120,maxScaleVal:22,color_side:-663120,color_border:-1,bottom_color:-663120}],196672:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-337216,maxScaleVal:22,color_side:-337216,color_border:-1,bottom_color:-337216}],196673:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-796706,maxScaleVal:22,color_side:-796706,color_border:-1,bottom_color:-796706}],196674:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-863247,maxScaleVal:22,color_side:-863247,color_border:-1,bottom_color:-863247}],196675:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-2108430,maxScaleVal:22,color_side:-2108430,color_border:-1,bottom_color:-2108430}],196676:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-1514785,maxScaleVal:22,color_side:-1514785,color_border:-1,bottom_color:-1514785}],196677:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-596290,maxScaleVal:22,color_side:-596290,color_border:-1,bottom_color:-596290}],196678:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-3289606,maxScaleVal:22,color_side:-3289606,color_border:-1,bottom_color:-3289606}],196679:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-4861953,maxScaleVal:22,color_side:-4861953,color_border:-1,bottom_color:-4861953}],196680:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-5513217,maxScaleVal:22,color_side:-5513217,color_border:-1,bottom_color:-5513217}],196681:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-4656129,maxScaleVal:22,color_side:-4656129,color_border:-1,bottom_color:-4656129}],196682:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-4984092,maxScaleVal:22,color_side:-4984092,color_border:-1,bottom_color:-4984092}],196683:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-4069182,maxScaleVal:22,color_side:-4069182,color_border:-1,bottom_color:-4069182}],196684:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-1972315,maxScaleVal:22,color_side:-1972315,color_border:-1,bottom_color:-1972315}],196685:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-663120,maxScaleVal:22,color_side:-663120,color_border:-1,bottom_color:-663120}],196686:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-337216,maxScaleVal:22,color_side:-337216,color_border:-1,bottom_color:-337216}],196687:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-796706,maxScaleVal:22,color_side:-796706,color_border:-1,bottom_color:-796706}],196688:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-329739,maxScaleVal:22,color_side:-1186079,color_border:-4543842,bottom_color:-329739}],196689:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-6710887,color_fill:-1,maxScaleVal:22,color_side:-1118482,color_border:-6710887,bottom_color:-1}],196690:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-6710887,color_fill:-1,maxScaleVal:22,color_side:-1118482,color_border:-6710887,bottom_color:-1}],196691:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-6710887,color_fill:-1,maxScaleVal:22,color_side:-1118482,color_border:-6710887,bottom_color:-1}],196692:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-6710887,color_fill:-1,maxScaleVal:22,color_side:-1118482,color_border:-6710887,bottom_color:-1}],196693:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-265762,maxScaleVal:22,color_side:-1648708,color_border:-1648708,bottom_color:-265762}],196694:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-6710887,color_fill:-1,maxScaleVal:22,color_side:-1118482,color_border:-6710887,bottom_color:-1}],196695:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-265762,maxScaleVal:22,color_side:-1648708,color_border:-1648708,bottom_color:-265762}]},labelStyles:{262145:[{font_size:0,maxScaleVal:18,effect:5,font_weight:0,font_color:-11385024,minScaleVal:0,background_color:-1,effect_size:.9},{font_size:0,maxScaleVal:19,effect:5,font_weight:0,font_color:-11385024,minScaleVal:19,background_color:-1,effect_size:.9},{font_size:0,maxScaleVal:22,effect:5,font_weight:0,font_color:-11385024,minScaleVal:20,background_color:-1,effect_size:.9}],262146:[{font_size:12,maxScaleVal:18,effect:5,font_weight:1,font_color:-11385024,minScaleVal:0,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:19,effect:5,font_weight:1,font_color:-11385024,minScaleVal:19,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-11385024,minScaleVal:20,background_color:-1,effect_size:.9}],262147:[{font_size:13,maxScaleVal:17,effect:5,font_weight:1,font_color:-11385024,minScaleVal:0,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:19,effect:5,font_weight:1,font_color:-11385024,minScaleVal:18,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11385024,minScaleVal:20,background_color:-1,effect_size:1}],262148:[{font_size:13,maxScaleVal:17,effect:5,font_weight:1,font_color:-3050966,minScaleVal:0,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:19,effect:5,font_weight:1,font_color:-3050966,minScaleVal:18,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-3050966,minScaleVal:20,background_color:-1,effect_size:1}],262149:[{font_size:13,maxScaleVal:17,effect:5,font_weight:1,font_color:-3050966,minScaleVal:0,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:19,effect:5,font_weight:1,font_color:-3050966,minScaleVal:18,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-3050966,minScaleVal:20,background_color:-1,effect_size:1}],262150:[{font_size:13,maxScaleVal:17,effect:5,font_weight:1,font_color:-16743471,minScaleVal:0,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:19,effect:5,font_weight:1,font_color:-16743471,minScaleVal:18,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-16743471,minScaleVal:20,background_color:-1,effect_size:1}],262151:[{font_size:13,maxScaleVal:17,effect:5,font_weight:1,font_color:-3050966,minScaleVal:0,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:19,effect:5,font_weight:1,font_color:-3050966,minScaleVal:18,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-3050966,minScaleVal:20,background_color:-1,effect_size:1}],262152:[{font_size:12,maxScaleVal:18,effect:5,font_weight:1,font_color:-11564867,minScaleVal:0,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:19,effect:5,font_weight:1,font_color:-11564867,minScaleVal:19,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-11564867,minScaleVal:20,background_color:-1,effect_size:.9}],262153:[{font_size:12,maxScaleVal:18,effect:5,font_weight:1,font_color:-4687280,minScaleVal:0,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:19,effect:5,font_weight:1,font_color:-4687280,minScaleVal:19,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-4687280,minScaleVal:20,background_color:-1,effect_size:.9}],262154:[{font_size:12,maxScaleVal:18,effect:5,font_weight:1,font_color:-8288957,minScaleVal:0,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:19,effect:5,font_weight:1,font_color:-8288957,minScaleVal:19,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-8288957,minScaleVal:20,background_color:-1,effect_size:.9}],262155:[{font_size:12,maxScaleVal:18,effect:5,font_weight:1,font_color:-10847555,minScaleVal:0,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:19,effect:5,font_weight:1,font_color:-10847555,minScaleVal:19,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-10847555,minScaleVal:20,background_color:-1,effect_size:.9}],262156:[{font_size:12,maxScaleVal:18,effect:5,font_weight:1,font_color:-4687280,minScaleVal:0,background_color:-1,effect_size:1},{font_size:12,maxScaleVal:19,effect:5,font_weight:1,font_color:-4687280,minScaleVal:19,background_color:-1,effect_size:1},{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-4687280,minScaleVal:20,background_color:-1,effect_size:1}],262157:[{font_size:12,maxScaleVal:18,effect:5,font_weight:1,font_color:-11052612,minScaleVal:0,background_color:-1,effect_size:1},{font_size:12,maxScaleVal:21,effect:5,font_weight:1,font_color:-11052612,minScaleVal:19,background_color:-1,effect_size:1},{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-11052612,minScaleVal:22,background_color:-1,effect_size:1}],262158:[{font_size:13,maxScaleVal:17,effect:5,font_weight:1,font_color:-10008623,minScaleVal:0,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:19,effect:5,font_weight:1,font_color:-10008623,minScaleVal:18,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-10008623,minScaleVal:20,background_color:-1,effect_size:1}],262159:[{font_size:13,maxScaleVal:17,effect:5,font_weight:1,font_color:-16743471,minScaleVal:0,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:19,effect:5,font_weight:1,font_color:-16743471,minScaleVal:18,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-16743471,minScaleVal:20,background_color:-1,effect_size:1}],262160:[{font_size:12,maxScaleVal:18,effect:5,font_weight:1,font_color:-10847555,minScaleVal:0,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:21,effect:5,font_weight:1,font_color:-10847555,minScaleVal:19,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-10847555,minScaleVal:22,background_color:-1,effect_size:.9}],262161:[{font_size:12,maxScaleVal:18,effect:5,font_weight:1,font_color:-11385024,minScaleVal:0,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:19,effect:5,font_weight:1,font_color:-11385024,minScaleVal:19,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-11385024,minScaleVal:20,background_color:-1,effect_size:.9}],262162:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-13278798,minScaleVal:0,background_color:-1,effect_size:.9}],262163:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-7248559,minScaleVal:0,background_color:-1,effect_size:.9}],262164:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-7248559,minScaleVal:0,background_color:-1,effect_size:.9}],262165:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-13278798,minScaleVal:0,background_color:-1,effect_size:.9}],262166:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-12878512,minScaleVal:0,background_color:-1,effect_size:.9}],262167:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-13278798,minScaleVal:0,background_color:-1,effect_size:.9}],262168:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262169:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262170:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-7182279,minScaleVal:0,background_color:-1,effect_size:.9}],262171:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-7182279,minScaleVal:0,background_color:-1,effect_size:.9}],262172:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262173:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-13278798,minScaleVal:0,background_color:-1,effect_size:.9}],262174:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-7248559,minScaleVal:0,background_color:-1,effect_size:.9}],262175:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-7248559,minScaleVal:0,background_color:-1,effect_size:.9}],262176:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-13278798,minScaleVal:0,background_color:-1,effect_size:.9}],262177:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-12878512,minScaleVal:0,background_color:-1,effect_size:.9}],262178:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-13278798,minScaleVal:0,background_color:-1,effect_size:.9}],262179:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262180:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262181:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-7182279,minScaleVal:0,background_color:-1,effect_size:.9}],262182:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-7182279,minScaleVal:0,background_color:-1,effect_size:.9}],262183:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262184:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262185:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11844161,minScaleVal:0,background_color:-1,effect_size:.9}],262186:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-13870145,minScaleVal:0,background_color:-1,effect_size:.9}],262187:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-15305788,minScaleVal:0,background_color:-1,effect_size:.9}],262188:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-16739907,minScaleVal:0,background_color:-1,effect_size:.9}],262189:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-14250907,minScaleVal:0,background_color:-1,effect_size:.9}],262190:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-12480718,minScaleVal:0,background_color:-1,effect_size:.9}],262191:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-7568090,minScaleVal:0,background_color:-1,effect_size:.9}],262192:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-5013962,minScaleVal:0,background_color:-1,effect_size:.9}],262193:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-4559043,minScaleVal:0,background_color:-1,effect_size:.9}],262194:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-6204330,minScaleVal:0,background_color:-1,effect_size:.9}],262195:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-7583631,minScaleVal:0,background_color:-1,effect_size:.9}],262196:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-9223276,minScaleVal:0,background_color:-1,effect_size:.9}],262197:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-7568770,minScaleVal:0,background_color:-1,effect_size:.9}],262198:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262199:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262200:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262201:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262202:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262203:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262204:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262205:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262206:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262207:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262208:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262209:[{font_size:12,maxScaleVal:18,effect:5,font_weight:1,font_color:-4687280,minScaleVal:0,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:19,effect:5,font_weight:1,font_color:-4687280,minScaleVal:19,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-4687280,minScaleVal:20,background_color:-1,effect_size:.9}],262210:[{font_size:12,maxScaleVal:18,effect:5,font_weight:1,font_color:-4687280,minScaleVal:0,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:19,effect:5,font_weight:1,font_color:-4687280,minScaleVal:19,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-4687280,minScaleVal:20,background_color:-1,effect_size:.9}],262211:[{font_size:14,maxScaleVal:18,effect:5,font_weight:1,font_color:-16752231,minScaleVal:0,background_color:1291845631,effect_size:1},{font_size:0,maxScaleVal:22,effect:5,font_weight:1,font_color:0,minScaleVal:19,background_color:16777215,effect_size:0}],262212:[{font_size:14,maxScaleVal:18,effect:5,font_weight:1,font_color:-4023420,minScaleVal:0,background_color:1291845631,effect_size:1},{font_size:0,maxScaleVal:22,effect:5,font_weight:1,font_color:0,minScaleVal:19,background_color:16777215,effect_size:0}],262213:[{font_size:14,maxScaleVal:19,effect:5,font_weight:1,font_color:-10057525,minScaleVal:0,background_color:1291845631,effect_size:1},{font_size:0,maxScaleVal:22,effect:5,font_weight:1,font_color:0,minScaleVal:20,background_color:16777215,effect_size:0}],262214:[{font_size:14,maxScaleVal:18,effect:5,font_weight:1,font_color:-11848551,minScaleVal:0,background_color:1291845631,effect_size:1},{font_size:0,maxScaleVal:22,effect:5,font_weight:1,font_color:0,minScaleVal:19,background_color:16777215,effect_size:0}],262215:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11844161,minScaleVal:0,background_color:-1,effect_size:.9}],262216:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-13870145,minScaleVal:0,background_color:-1,effect_size:.9}],262217:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-15305788,minScaleVal:0,background_color:-1,effect_size:.9}],262218:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-16739907,minScaleVal:0,background_color:-1,effect_size:.9}],262219:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-14250907,minScaleVal:0,background_color:-1,effect_size:.9}],262220:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-12480718,minScaleVal:0,background_color:-1,effect_size:.9}],262221:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-7568090,minScaleVal:0,background_color:-1,effect_size:.9}],262222:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-5013962,minScaleVal:0,background_color:-1,effect_size:.9}],262223:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-4559043,minScaleVal:0,background_color:-1,effect_size:.9}],262224:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-6204330,minScaleVal:0,background_color:-1,effect_size:.9}],262225:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-7583631,minScaleVal:0,background_color:-1,effect_size:.9}],262226:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-9223276,minScaleVal:0,background_color:-1,effect_size:.9}],262227:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-7568770,minScaleVal:0,background_color:-1,effect_size:.9}],262228:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262229:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262230:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262231:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262232:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262233:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262234:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262235:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262236:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262237:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262238:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262239:[{font_size:12,maxScaleVal:18,effect:5,font_weight:1,font_color:-4756097,minScaleVal:0,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:21,effect:5,font_weight:1,font_color:-4756097,minScaleVal:19,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-4756097,minScaleVal:22,background_color:-1,effect_size:.9}],262240:[{font_size:10,maxScaleVal:18,effect:4,font_weight:0,font_color:-1,minScaleVal:0,background_color:-8411598,effect_size:1},{font_size:10,maxScaleVal:19,effect:4,font_weight:0,font_color:-1,minScaleVal:19,background_color:-8411598,effect_size:1},{font_size:10,maxScaleVal:22,effect:4,font_weight:0,font_color:-1,minScaleVal:20,background_color:-8411598,effect_size:1}],262241:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-4023420,minScaleVal:0,background_color:1291845631,effect_size:1}],262242:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-11385024,minScaleVal:0,background_color:-1,effect_size:.9}],262243:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-8288957,minScaleVal:0,background_color:-1,effect_size:.9}],262244:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-8288957,minScaleVal:0,background_color:-1,effect_size:.9}],262245:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-6127544,minScaleVal:0,background_color:-1,effect_size:.9}],262246:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-5923176,minScaleVal:0,background_color:1291845631,effect_size:1}]},lineStyles:{131072:[{linelevel:0,has_side:1,minScaleVal:16,sidewidth:1.5,joinround:1,color_fill:-6313288,maxScaleVal:16,color_side:0,joincap:0,dash_length:0,width:1.5,dash_space:0,has_dash:0},{linelevel:0,has_side:1,minScaleVal:17,sidewidth:3.2,joinround:1,color_fill:-6313288,maxScaleVal:18,color_side:0,joincap:0,dash_length:0,width:3.2,dash_space:0,has_dash:0},{linelevel:0,has_side:1,minScaleVal:19,sidewidth:3.2,joinround:1,color_fill:-6313288,maxScaleVal:22,color_side:0,joincap:0,dash_length:0,width:3.2,dash_space:0,has_dash:0}],131073:[{linelevel:0,has_side:1,minScaleVal:20,sidewidth:1,joinround:1,color_fill:-6052957,maxScaleVal:22,color_side:0,joincap:0,dash_length:2,width:1,dash_space:2,has_dash:1}],131074:[{linelevel:0,has_side:1,minScaleVal:20,sidewidth:1,joinround:1,color_fill:-6052957,maxScaleVal:22,color_side:0,joincap:0,dash_length:0,width:1,dash_space:0,has_dash:0}],131075:[{linelevel:0,has_side:1,minScaleVal:20,sidewidth:1,joinround:1,color_fill:-6052957,maxScaleVal:22,color_side:0,joincap:0,dash_length:0,width:1,dash_space:0,has_dash:0}],131076:[{linelevel:0,has_side:1,minScaleVal:20,sidewidth:1,joinround:1,color_fill:-2894893,maxScaleVal:22,color_side:0,joincap:0,dash_length:0,width:1,dash_space:0,has_dash:0}],131077:[{linelevel:0,has_side:1,minScaleVal:16,sidewidth:1.5,joinround:1,color_fill:-6313288,maxScaleVal:16,color_side:0,joincap:0,dash_length:0,width:1.5,dash_space:0,has_dash:0},{linelevel:0,has_side:1,minScaleVal:17,sidewidth:3.2,joinround:1,color_fill:-6313288,maxScaleVal:18,color_side:0,joincap:0,dash_length:0,width:3.2,dash_space:0,has_dash:0},{linelevel:0,has_side:1,minScaleVal:19,sidewidth:3.2,joinround:1,color_fill:-6313288,maxScaleVal:22,color_side:0,joincap:0,dash_length:0,width:3.2,dash_space:0,has_dash:0}],131078:[{linelevel:0,has_side:1,minScaleVal:16,sidewidth:1.5,joinround:1,color_fill:-6313288,maxScaleVal:16,color_side:0,joincap:0,dash_length:0,width:1.5,dash_space:0,has_dash:0},{linelevel:0,has_side:1,minScaleVal:17,sidewidth:3.2,joinround:1,color_fill:-6313288,maxScaleVal:18,color_side:0,joincap:0,dash_length:0,width:3.2,dash_space:0,has_dash:0},{linelevel:0,has_side:1,minScaleVal:19,sidewidth:3.2,joinround:1,color_fill:-6313288,maxScaleVal:22,color_side:0,joincap:0,dash_length:0,width:3.2,dash_space:0,has_dash:0}]},pointStyles:{65537:[{icon_offset:0,maxScaleVal:22,minScaleVal:16,labelid:262153,density:6}],65538:[{icon_offset:1,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65539:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:2,maxScaleVal:22,minScaleVal:19,labelid:262145,density:0}],65540:[{icon_offset:16,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:16,maxScaleVal:22,minScaleVal:19,labelid:262243,density:0}],65541:[{icon_offset:4,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65542:[{icon_offset:5,maxScaleVal:22,minScaleVal:16,labelid:262239,density:0}],65543:[{icon_offset:6,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:6,maxScaleVal:22,minScaleVal:18,labelid:262153,density:0}],65544:[{icon_offset:7,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65545:[{icon_offset:-1,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:8,maxScaleVal:22,minScaleVal:20,labelid:262145,density:0}],65546:[{icon_offset:9,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65547:[{icon_offset:10,maxScaleVal:22,minScaleVal:16,labelid:262245,density:0}],65548:[{icon_offset:11,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65549:[{icon_offset:12,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65550:[{icon_offset:13,maxScaleVal:22,minScaleVal:16,labelid:262239,density:0}],65551:[{icon_offset:14,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65552:[{icon_offset:15,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65553:[{icon_offset:16,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:16,maxScaleVal:22,minScaleVal:19,labelid:262243,density:0}],65554:[{icon_offset:17,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65555:[{icon_offset:18,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65556:[{icon_offset:19,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65557:[{icon_offset:109,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65558:[{icon_offset:21,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65559:[{icon_offset:22,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65560:[{icon_offset:23,maxScaleVal:22,minScaleVal:16,labelid:262239,density:0}],65561:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:24,maxScaleVal:22,minScaleVal:19,labelid:262244,density:0}],65562:[{icon_offset:25,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65563:[{icon_offset:26,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:26,maxScaleVal:22,minScaleVal:18,labelid:262153,density:0}],65564:[{icon_offset:27,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65565:[{icon_offset:28,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:28,maxScaleVal:22,minScaleVal:20,labelid:262145,density:0}],65566:[{icon_offset:29,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:29,maxScaleVal:22,minScaleVal:20,labelid:262154,density:0}],65567:[{icon_offset:30,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:30,maxScaleVal:22,minScaleVal:20,labelid:262145,density:0}],65568:[{icon_offset:31,maxScaleVal:22,minScaleVal:16,labelid:262239,density:0}],65569:[{icon_offset:32,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65570:[{icon_offset:33,maxScaleVal:22,minScaleVal:16,labelid:262155,density:0}],65571:[{icon_offset:34,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:34,maxScaleVal:22,minScaleVal:19,labelid:262244,density:0}],65572:[{icon_offset:35,maxScaleVal:22,minScaleVal:16,labelid:262145,density:0}],65573:[{icon_offset:36,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:36,maxScaleVal:22,minScaleVal:19,labelid:262153,density:0}],65574:[{icon_offset:37,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:37,maxScaleVal:22,minScaleVal:20,labelid:262145,density:0}],65575:[{icon_offset:38,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65576:[{icon_offset:39,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65577:[{icon_offset:40,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:40,maxScaleVal:22,minScaleVal:20,labelid:262145,density:0}],65578:[{icon_offset:41,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65579:[{icon_offset:143,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:143,maxScaleVal:22,minScaleVal:18,labelid:262239,density:0}],65580:[{icon_offset:43,maxScaleVal:22,minScaleVal:16,labelid:262155,density:0}],65581:[{icon_offset:44,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:44,maxScaleVal:22,minScaleVal:20,labelid:262153,density:0}],65582:[{icon_offset:45,maxScaleVal:22,minScaleVal:16,labelid:262239,density:0}],65583:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:46,maxScaleVal:22,minScaleVal:19,labelid:262145,density:0}],65584:[{icon_offset:47,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:47,maxScaleVal:22,minScaleVal:20,labelid:262145,density:0}],65585:[{icon_offset:48,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65586:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262147,density:0}],65587:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262145,density:0}],65588:[{icon_offset:49,maxScaleVal:22,minScaleVal:16,labelid:262239,density:0}],65589:[{icon_offset:50,maxScaleVal:22,minScaleVal:16,labelid:262145,density:0}],65590:[{icon_offset:52,maxScaleVal:22,minScaleVal:16,labelid:262155,density:0}],65591:[{icon_offset:53,maxScaleVal:22,minScaleVal:16,labelid:262155,density:0}],65592:[{icon_offset:54,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:54,maxScaleVal:22,minScaleVal:19,labelid:262153,density:0}],65593:[{icon_offset:82,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65594:[{icon_offset:-1,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:149,maxScaleVal:22,minScaleVal:20,labelid:262156,density:0}],65595:[{icon_offset:84,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65596:[{icon_offset:85,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65597:[{icon_offset:55,maxScaleVal:22,minScaleVal:16,labelid:262239,density:0}],65598:[{icon_offset:56,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:56,maxScaleVal:22,minScaleVal:19,labelid:262245,density:0}],65599:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262148,density:0}],65600:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262149,density:0}],65601:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262150,density:0}],65602:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262151,density:0}],65603:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:109,maxScaleVal:19,minScaleVal:19,labelid:262145,density:0},{icon_offset:109,maxScaleVal:22,minScaleVal:20,labelid:262153,density:0}],65604:[{icon_offset:-1,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:20,labelid:262153,density:0}],65605:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:110,maxScaleVal:22,minScaleVal:19,labelid:262152,density:0}],65606:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:111,maxScaleVal:22,minScaleVal:18,labelid:262155,density:0}],65607:[{icon_offset:112,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65608:[{icon_offset:113,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65609:[{icon_offset:114,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65610:[{icon_offset:115,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65611:[{icon_offset:116,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65612:[{icon_offset:117,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65613:[{icon_offset:118,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65614:[{icon_offset:132,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65615:[{icon_offset:118,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65616:[{icon_offset:118,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65617:[{icon_offset:119,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65618:[{icon_offset:116,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65619:[{icon_offset:119,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65620:[{icon_offset:119,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65621:[{icon_offset:119,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65622:[{icon_offset:115,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65623:[{icon_offset:120,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65624:[{icon_offset:119,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65625:[{icon_offset:121,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65626:[{icon_offset:122,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65627:[{icon_offset:123,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65628:[{icon_offset:124,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65629:[{icon_offset:125,maxScaleVal:22,minScaleVal:16,labelid:262154,density:0}],65630:[{icon_offset:126,maxScaleVal:22,minScaleVal:16,labelid:262154,density:0}],65631:[{icon_offset:127,maxScaleVal:22,minScaleVal:16,labelid:262154,density:0}],65632:[{icon_offset:128,maxScaleVal:22,minScaleVal:16,labelid:262154,density:0}],65633:[{icon_offset:129,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65634:[{icon_offset:130,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65635:[{icon_offset:131,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65636:[{icon_offset:133,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65637:[{icon_offset:134,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65638:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262158,density:0}],65639:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262159,density:0}],65640:[{icon_offset:136,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65641:[{icon_offset:137,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65642:[{icon_offset:138,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65643:[{icon_offset:139,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65644:[{icon_offset:140,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65645:[{icon_offset:141,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65646:[{icon_offset:140,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65647:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262146,density:0}],65648:[{icon_offset:146,maxScaleVal:22,minScaleVal:16,labelid:262162,density:0}],65649:[{icon_offset:143,maxScaleVal:22,minScaleVal:16,labelid:262163,density:0}],65650:[{icon_offset:143,maxScaleVal:22,minScaleVal:16,labelid:262164,density:0}],65651:[{icon_offset:146,maxScaleVal:22,minScaleVal:16,labelid:262165,density:0}],65652:[{icon_offset:145,maxScaleVal:22,minScaleVal:16,labelid:262166,density:0}],65653:[{icon_offset:146,maxScaleVal:22,minScaleVal:16,labelid:262167,density:0}],65654:[{icon_offset:147,maxScaleVal:22,minScaleVal:16,labelid:262168,density:0}],65655:[{icon_offset:147,maxScaleVal:22,minScaleVal:16,labelid:262169,density:0}],65656:[{icon_offset:144,maxScaleVal:22,minScaleVal:16,labelid:262170,density:0}],65657:[{icon_offset:144,maxScaleVal:22,minScaleVal:16,labelid:262171,density:0}],65658:[{icon_offset:147,maxScaleVal:22,minScaleVal:16,labelid:262172,density:0}],65659:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262146,density:0}],65660:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262173,density:0}],65661:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262174,density:0}],65662:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262175,density:0}],65663:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262176,density:0}],65664:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262177,density:0}],65665:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262178,density:0}],65666:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262179,density:0}],65667:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262180,density:0}],65668:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262181,density:0}],65669:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262182,density:0}],65670:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262183,density:0}],65671:[{icon_offset:42,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65672:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262185,density:0}],65673:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262186,density:0}],65674:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262187,density:0}],65675:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262188,density:0}],65676:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262189,density:0}],65677:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262190,density:0}],65678:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262191,density:0}],65679:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262192,density:0}],65680:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262193,density:0}],65681:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262194,density:0}],65682:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262195,density:0}],65683:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262196,density:0}],65684:[{icon_offset:-1,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:8,maxScaleVal:22,minScaleVal:20,labelid:262145,density:0}],65685:[{icon_offset:40,maxScaleVal:22,minScaleVal:16,labelid:262145,density:0}],65686:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:29,maxScaleVal:22,minScaleVal:19,labelid:262145,density:0}],65687:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:46,maxScaleVal:22,minScaleVal:19,labelid:262145,density:0}],65688:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262145,density:0}],65689:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262145,density:0}],65690:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262197,density:0}],65691:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262198,density:0}],65692:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262199,density:0}],65693:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262200,density:0}],65694:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262201,density:0}],65695:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262202,density:0}],65696:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262203,density:0}],65697:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262204,density:0}],65698:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262205,density:0}],65699:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262206,density:0}],65700:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262207,density:0}],65701:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262208,density:0}],65702:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262211,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262145,density:0}],65703:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262212,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262145,density:0}],65704:[{icon_offset:-1,maxScaleVal:19,minScaleVal:16,labelid:262213,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:20,labelid:262145,density:0}],65705:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262214,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262145,density:0}],65706:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262145,density:0}],65707:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262215,density:0}],65708:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262216,density:0}],65709:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262217,density:0}],65710:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262218,density:0}],65711:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262219,density:0}],65712:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262220,density:0}],65713:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262221,density:0}],65714:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262222,density:0}],65715:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262223,density:0}],65716:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262224,density:0}],65717:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262225,density:0}],65718:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262226,density:0}],65719:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262227,density:0}],65720:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262228,density:0}],65721:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262229,density:0}],65722:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262230,density:0}],65723:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262231,density:0}],65724:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262232,density:0}],65725:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262233,density:0}],65726:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262234,density:0}],65727:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262235,density:0}],65728:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262236,density:0}],65729:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262237,density:0}],65730:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262238,density:0}],65731:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:51,maxScaleVal:22,minScaleVal:18,labelid:262156,density:0}],65732:[{icon_offset:148,maxScaleVal:22,minScaleVal:16,labelid:262156,density:0}],65733:[{icon_offset:-1,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:50,maxScaleVal:22,minScaleVal:20,labelid:262156,density:0}],65734:[{icon_offset:150,maxScaleVal:22,minScaleVal:16,labelid:262156,density:0}],65735:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262241,density:0}],65736:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:143,maxScaleVal:22,minScaleVal:19,labelid:262239,density:0}],65737:[{icon_offset:13,maxScaleVal:22,minScaleVal:16,labelid:262239,density:0}],65738:[{icon_offset:-1,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:109,maxScaleVal:22,minScaleVal:20,labelid:262153,density:0}],65739:[{icon_offset:110,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:110,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],65740:[{icon_offset:29,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262246,density:0}],65741:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:152,maxScaleVal:22,minScaleVal:19,labelid:262245,density:0}],65742:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:152,maxScaleVal:22,minScaleVal:19,labelid:262245,density:0}],66437:[{icon_offset:57,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:57,maxScaleVal:22,minScaleVal:20,labelid:262155,density:0}],66438:[{icon_offset:58,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:58,maxScaleVal:22,minScaleVal:20,labelid:262155,density:0}],66439:[{icon_offset:59,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:59,maxScaleVal:22,minScaleVal:20,labelid:262155,density:0}],66440:[{icon_offset:60,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:60,maxScaleVal:22,minScaleVal:20,labelid:262155,density:0}],66441:[{icon_offset:61,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:61,maxScaleVal:22,minScaleVal:20,labelid:262155,density:0}],66442:[{icon_offset:62,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:62,maxScaleVal:22,minScaleVal:20,labelid:262155,density:0}],66443:[{icon_offset:63,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:63,maxScaleVal:22,minScaleVal:20,labelid:262155,density:0}],66444:[{icon_offset:64,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:64,maxScaleVal:22,minScaleVal:20,labelid:262155,density:0}],66445:[{icon_offset:65,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:65,maxScaleVal:22,minScaleVal:20,labelid:262155,density:0}],66446:[{icon_offset:66,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:66,maxScaleVal:22,minScaleVal:20,labelid:262155,density:0}],66447:[{icon_offset:67,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:67,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66448:[{icon_offset:68,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],66449:[{icon_offset:69,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],66450:[{icon_offset:70,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:70,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66451:[{icon_offset:71,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],66452:[{icon_offset:72,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],66453:[{icon_offset:73,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],66454:[{icon_offset:74,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],66455:[{icon_offset:75,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],66456:[{icon_offset:76,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],66457:[{icon_offset:77,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],66458:[{icon_offset:78,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],66459:[{icon_offset:79,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],66460:[{icon_offset:80,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],66461:[{icon_offset:81,maxScaleVal:22,minScaleVal:16,labelid:262146,density:0}],66462:[{icon_offset:86,maxScaleVal:22,minScaleVal:16,labelid:262146,density:0}],66463:[{icon_offset:87,maxScaleVal:22,minScaleVal:16,labelid:262146,density:0}],66464:[{icon_offset:88,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:88,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66465:[{icon_offset:89,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:89,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66466:[{icon_offset:90,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:90,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66467:[{icon_offset:91,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:91,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66468:[{icon_offset:92,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:92,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66469:[{icon_offset:93,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:93,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66470:[{icon_offset:94,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:94,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66471:[{icon_offset:95,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:95,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66472:[{icon_offset:96,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:96,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66473:[{icon_offset:97,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:97,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66474:[{icon_offset:98,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:98,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66475:[{icon_offset:99,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:99,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66476:[{icon_offset:100,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:100,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66477:[{icon_offset:101,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:101,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66478:[{icon_offset:102,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:102,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66479:[{icon_offset:103,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:103,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66480:[{icon_offset:104,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:104,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66481:[{icon_offset:105,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:105,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66482:[{icon_offset:106,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:106,maxScaleVal:22,minScaleVal:20,labelid:262146,density:0}],66483:[{icon_offset:107,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:107,maxScaleVal:22,minScaleVal:20,labelid:262146,density:0}],66484:[{icon_offset:108,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:108,maxScaleVal:22,minScaleVal:20,labelid:262146,density:0}],66485:[{icon_offset:151,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}]},arrowStyles:{},bgColor:"#123182",stylesId:"default"}}()},function(t,e,n){"use strict";function i(t){return t=(0,s.colorToRGBA)(t),[t[0],t[1],t[2],255*t[3]]}function r(){return""}function a(){return l?"bold":""}function o(t){var e=l?"Microsoft YaHei UI,Microsoft YaHei,黑体,Hiragino Sans GB,sans-serif":"Microsoft YaHei UI,Microsoft YaHei,黑体,sans-serif";return t&&t.length>0?t:e}Object.defineProperty(e,"__esModule",{value:!0}),e.convertColorToHex=i,e.getFontStyle=r,e.getFontWeight=a,e.getFontFamily=o;var s=n(10),l=!1},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(25),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(507),f=i(c),d=function(){function t(){(0,s.default)(this,t)}return(0,u.default)(t,[{key:"parse",value:function(t){var e=(0,f.default)(t),n=e.meshes,i=n.reduce(function(t,e){return t+e.header.vertexCount},0);return{mode:4,vertexCount:i,attributes:this.mergeAttributes(n,i)}}},{key:"mergeAttributes",value:function(t,e){var n=new Float32Array(3*e),i=void 0,r=void 0,o=void 0,s=0,l=!0,u=!1,c=void 0;try{for(var f,d=(0,a.default)(t);!(l=(f=d.next()).done);l=!0){var h=f.value,p=h.attributes,v=p.POSITION,m=p.NORMAL,g=p.COLOR_0,_=p.TEXCOORD_0;n.set(v.value,3*s),m&&(i=i||new Int8Array(3*e),i.set(m.value,3*s)),g&&(r=r||new Uint8Array(3*e),r.set(g.value.map(function(t){return Math.round(255*t)}),3*s)),_&&(o=o||new Float32Array(2*e),o.set(_.value,2*s)),s+=v.value.length/3}}catch(t){u=!0,c=t}finally{try{!l&&d.return&&d.return()}finally{if(u)throw c}}var y={};return y.POSITION={value:n,size:3},i&&(y.NORMAL={value:i,size:3}),r&&(y.COLOR_0={value:r,size:3}),o&&(y.TEXCOORD_0={value:o,size:2}),y}}]),t}();e.default=d},function(t,e,n){"use strict";function i(t,e,n){if(n=n||{},"object"!==(void 0===n?"undefined":(0,a.default)(n)))throw new Error("options is invalid");var i=n,r=i.properties,l=n,u=l.npoints,c=n,f=c.offset;return t=(0,o.getCoord)(t),e=(0,o.getCoord)(e),r=r||{},u=u||100,f=f||10,new s.GreatCircle({x:t[0],y:t[1]},{x:e[0],y:e[1]},r).Arc(u,{offset:f}).json()}Object.defineProperty(e,"__esModule",{value:!0});var r=n(19),a=function(t){return t&&t.__esModule?t:{default:t}}(r),o=n(1081),s=n(681);e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=Math.PI/180,r=180/Math.PI,a=function(t,e){this.lon=t,this.lat=e,this.x=i*t,this.y=i*e};a.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},a.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new a(e,t)};var o=function(){this.coords=[],this.length=0};o.prototype.move_to=function(t){this.length++,this.coords.push(t)};var s=function(t){this.properties=t||{},this.geometries=[]};s.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},s.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},i=0;i<this.geometries.length;i++){if(0===this.geometries[i].coords.length)return"LINESTRING(empty)";this.geometries[i].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var l=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new a(t.x,t.y),this.end=new a(e.x,e.y),this.properties=n||{};var i=this.start.x-this.end.x,r=this.start.y-this.end.y,o=Math.pow(Math.sin(r/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(i/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};l.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),i=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),a=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),s=r*Math.atan2(o,Math.sqrt(Math.pow(i,2)+Math.pow(a,2)));return[r*Math.atan2(a,i),s]},l.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var i=1/(t-1),r=0;r<t;++r){var a=i*r,l=this.interpolate(a);n.push(l)}for(var u=!1,c=0,f=e&&e.offset?e.offset:10,d=180-f,h=-180+f,p=360-f,v=1;v<n.length;++v){var m=n[v-1][0],g=n[v][0],_=Math.abs(g-m);_>p&&(g>d&&m<h||m>d&&g<h)?u=!0:_>c&&(c=_)}var y=[];if(u&&c<f){var x=[];y.push(x);for(var b=0;b<n.length;++b){var S=parseFloat(n[b][0]);if(b>0&&Math.abs(S-n[b-1][0])>p){var w=parseFloat(n[b-1][0]),E=parseFloat(n[b-1][1]),A=parseFloat(n[b][0]),T=parseFloat(n[b][1]);if(w>-180&&w<h&&180===A&&b+1<n.length&&n[b-1][0]>-180&&n[b-1][0]<h){x.push([-180,n[b][1]]),b++,x.push([n[b][0],n[b][1]]);continue}if(w>d&&w<180&&-180===A&&b+1<n.length&&n[b-1][0]>d&&n[b-1][0]<180){x.push([180,n[b][1]]),b++,x.push([n[b][0],n[b][1]]);continue}if(w<h&&A>d){var M=w;w=A,A=M;var I=E;E=T,T=I}if(w>d&&A<h&&(A+=360),w<=180&&A>=180&&w<A){var P=(180-w)/(A-w),k=P*T+(1-P)*E;x.push([n[b-1][0]>d?180:-180,k]),x=[],x.push([n[b-1][0]>d?-180:180,k]),y.push(x)}else x=[],y.push(x);x.push([S,n[b][1]])}else x.push([n[b][0],n[b][1]])}}else{var L=[];y.push(L);for(var C=0;C<n.length;++C)L.push([n[C][0],n[C][1]])}for(var R=new s(this.properties),D=0;D<y.length;++D){var N=new o;R.geometries.push(N);for(var B=y[D],O=0;O<B.length;++O)B[O][1]>85&&(B[O][1]=85),B[O][1]<-85&&(B[O][1]=-85),N.move_to(B[O])}return R},e.Coord=a,e.Arc=s,e.GreatCircle=l,e.default={Coord:a,Arc:s,GreatCircle:l}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),a=i(r),o=n(1),s=i(o),l={Int8:Int8Array,Uint8:Uint8Array,Uint8Clamped:Uint8ClampedArray,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array,Float64:Float64Array},u=function(){function t(e,n,i){(0,a.default)(this,t),n=[].concat(n),this.extendEntitySize=1024,this.entitySize=e||this.extendEntitySize,this.struct=n,this.attributes=i;for(var r=void 0,o=void 0,s=0,u=0,c=n.length;u<c;u++)r=n[u],o=l[r].BYTES_PER_ELEMENT,n[u]={type:r,BYTES_PER_ELEMENT:o},s+=o;this.unit8=new Uint8Array(e*s),this.arrayBuffer=this.unit8.buffer,this.dataView=new DataView(this.arrayBuffer),this.bytesPerElement=s,this.length=0}return(0,s.default)(t,[{key:"add",value:function(t){if(t instanceof Array&&0!==t.length){if(t[0]instanceof Array)for(var e=0,n=t.length;e<n;e++)this.addItem(t[e]);else for(var i=0,r=t.length;i<r;i++)this.addItem([t[i]])}}},{key:"addItem",value:function(t){var e=this.struct;if(t.length!==e.length)throw new Error("add data error");(this.length+1)*this.bytesPerElement>this.arrayBuffer.byteLength&&this.extend();for(var n=this.length,i=this.bytesPerElement,r=void 0,a=void 0,o=this.dataView,s=0,l=0,u=e.length;l<u;l++)r=e[l?l-1:0],a=e[l],l>0&&(s+=r.BYTES_PER_ELEMENT),o["set"+a.type](n*i+s,t[l],!0);this.length+=1}},{key:"extend",value:function(){this.resize(this.entitySize+this.extendEntitySize)}},{key:"compress",value:function(){this.resize(this.length)}},{key:"resize",value:function(t){var e=this.unit8;t>this.entitySize?(this.arrayBuffer=new ArrayBuffer(t*this.bytesPerElement),this.unit8=new Uint8Array(this.arrayBuffer),this.unit8.set(e)):this.entitySize,this.entitySize=t,this.dataView=new DataView(this.arrayBuffer)}},{key:"toArray",value:function(){for(var t=this.struct,e=this.length,n=this.bytesPerElement,i=this.dataView,r=[],a=void 0,o=0;o<e;o++)for(var s=0,l=0;l<t.length;l++)a=t[l],r.push(i["get"+a.type](n*o+s,!0)),s+=a.BYTES_PER_ELEMENT;return r}}]),t}();e.default=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){for(var n=void 0,i=new p.default,r=(0,d.default)(t).sort(function(t,e){return Number(t)-Number(e)}),o=0,s=r.length;o<s;o++)n=t[r[o]],n.length<=0||a(n,i);return{vertices:i.vertiesDataBuffer,indeices:i.indicesDataBuffer,size:i.indicesDataBuffer.length,id:e,vertiesCount:i.vertiesDataBuffer.length,lineCount:i.lineCount}}function a(t,e){for(var n=0,i=t.length;n<i;n++){var r=t[n].type;r===v.BASE_LAYER_TYPE.line?(l(t[n],e,"side"),l(t[n],e,"fill")):r===v.BASE_LAYER_TYPE.region&&u(t[n],e)}}function o(t){return t=Math.ceil(t||0)}function s(t,e){var n=t.style,i=n.sidewidth,r=n.width,a=t.style,s=t.preStyle,l=t.nextStyle,u=t.zLevel,f=t.options,d=t.transform;r=o(r),i=o(i);var h=(0,_.isDefaultStyle)(f.mapStyleId),p=g.default.isDefaultNoSideLine(a.styleId);return h&&p&&(a.has_side=0),"side"===e?a.has_side?(i=i-r<2?r+2:i,{hasDash:!1,color:c(a.color_side.slice()),width:i,preWidth:o(s&&s.sidewidth),nextWidth:o(l&&l.sidewidth),noTerminal:u||a.has_dash,deltaSideWidth:Math.ceil(i-r),isSide:1,styleId:t.layerId,transform:d,pickingColor:(0,y.encodePickingColor)(t.layerId,!0)}):null:{hasDash:a.has_dash,dashLength:a.has_dash?a.dash_length:0,dashSpace:a.has_dash?a.dash_space:0,color:c(a.color_fill.slice()),width:r,preWidth:o(s&&s.width),nextWidth:o(l&&l.width),noTerminal:u||a.has_dash,startDistance:f&&f.startDistance||0,isSide:0,styleId:t.layerId,transform:d,pickingColor:(0,y.encodePickingColor)(t.layerId,!0)}}function l(t,e,n){var i=s(t,n);if(i){var r=i.color,a=i.width,o=i.dashLength,l=i.dashSpace,u=i.startDistance;t.datas.forEach(function(t){e.addLine(i,t,r,a,o,l,u)})}}function u(t,e){var n=t.datas,i=t.style,r=c((i.color_border||i.color_side||i.color_fill).slice()),a=c((i.color_fill||i.color_side||i.color_fill).slice()),o=(0,y.encodePickingColor)(t.layerId,!0),s=i.sidewidth;if(0!==a[3]){if(r[3]>0&&s>0)for(var l=0,u=n.length;l<u;l++){var f=n[l];if(!(f.length<=4)){var d={transform:t.transform};e.addLine(d,f,r,s,null,null,null,!0)}}for(var h=0,p=n.length;h<p;h++){var v=n[h];v.length<=4||e.addPolygon(v,a,{transform:t.transform,pickingColor:o})}}}function c(t){return t[0]<=1&&t[1]<=1&&t[2]<=1&&(t[0]=Math.floor(255*t[0]),t[1]=Math.floor(255*t[1]),t[2]=Math.floor(255*t[2])),t[3]<2&&(t[3]=Math.floor(255*t[3])),t}Object.defineProperty(e,"__esModule",{value:!0});var f=n(17),d=i(f),h=n(511),p=i(h),v=n(53),m=n(397),g=i(m),_=n(308),y=n(249);e.default=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return t.map(function(t,e){return 3===e?Math.round(255*t):Math.round(t)})}function a(t,e){var n=new u.default,i=!0,a=!1,o=void 0;try{for(var l,c=(0,s.default)(t);!(i=(l=c.next()).done);i=!0){var f=l.value;n.add({points:f.datas,height:f.h,colorFill:r(f.colorFill),colorSide:r(f.colorSide),transform:f.transform})}}catch(t){a=!0,o=t}finally{try{!i&&c.return&&c.return()}finally{if(a)throw o}}return{vertices:n.vertiesDataBuffer,indeices:n.indicesDataBuffer,size:n.indicesDataBuffer.length,id:e}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(25),s=i(o),l=n(688),u=i(l);e.default=a},function(t,e,n){"use strict";function i(t,e){var n=e.info,i=!0,r=!1,o=void 0;try{for(var s,l=(0,a.default)(t);!(i=(s=l.next()).done);i=!0){var u=s.value,c=u.datas[0];if(c&&c.icon&&c.icon_coords){if(!n[String(c.icon)])continue;u.id="icon_"+u.id}}}catch(t){r=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(r)throw o}}return t}Object.defineProperty(e,"__esModule",{value:!0});var r=n(25),a=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var n=null;return t&&(n=(0,p.isInterceptForPlacement)(e,t.coordZ),m.default.isClientRender&&!m.default.isBatchVector&&(n=Math.round(e)>=m.default.maxDataZoom?(0,p.isInterceptForPlacement)(e,t.coordZ):(0,p.isInterceptForPlacement)(e,t.coordZ-1))),t&&!n?t:null}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),o=i(a),s=n(1),l=i(s),u=n(28),c=i(u),f=n(687),d=i(f),h=n(53),p=n(510),v=n(22),m=i(v),g=function(){function t(e,n){(0,o.default)(this,t),this._textCache=e,this.placement=new d.default({textCache:this._textCache}),this._currentPlacementIndex=n.length-1,this._currentTileIndex=0,this._isDone=!1,this._batchedUpdate=!1,this._fadeUntil=0,this._batchUpdateTime=0,this._destroyed=!1}return(0,l.default)(t,[{key:"isDone",value:function(){return this._isDone}},{key:"continuePlacement",value:function(t,e,n,i){if(!this._destroyed){for(var a=i.zoom,o=Math.round(a),s=c.default.now(),l=!1;this._currentPlacementIndex>=0;){var u=t[this._currentPlacementIndex];if(u&&u.type===h.BASE_LAYER_TYPE.text){var f=t.filter(function(t){return t.type===h.BASE_LAYER_TYPE.point})[0],d=t.filter(function(t){return t.type===h.BASE_LAYER_TYPE.label})[0];for(u=f||d||u;this._currentTileIndex<u.tiles.length;){var p=u.tiles[this._currentTileIndex],v=d&&d.tiles[this._currentTileIndex],g=f&&f.tiles[this._currentTileIndex];Math.round(i.zoom)>=m.default.maxDataZoom&&!this._textCache&&(v&&v.children&&(v=p.children[Math.round(i.zoom)]),g&&g.children&&(g=g.children[Math.round(i.zoom)]));var _=e[p.id],y=this._textCache?this._textCache.tiles[p.id]:null,x=v&&v.features&&v.features.instance&&v.features.instance.count>0||g&&g.features&&g.features.instance&&g.features.instance.count>0;if(_&&(this._textCache?y:x)&&(this.placement.calculateTextByTile({label:r(v,a),poi:r(g,a),icon:r(g,a)},_,n,i),this.placement.impactTextByTile(p,i)),this._currentTileIndex+=1,c.default.now()-s>4){l=!0;break}}if(l)return}if(u&&u.type===h.RENDER_LAYER_TYPE.indoorPoi&&u.tiles.length>0){var b=u.tiles[0],S=n.pvMatrix,w=b.features.pois[o]&&b.features.pois[o][0],E=w&&w.instance&&w.instance.count>0;S&&E&&(this.placement.calculateAllIndoorPois(w,b.features.center,S,n,i,b),this.placement.impactTextByTile(b))}this._currentPlacementIndex-=1}this._isDone=!0}}},{key:"batchUpdate",value:function(t){return this.placement.batchUpdate(t),this._batchedUpdate=!0,this._fadeUntil=c.default.now()+300,this.placement}},{key:"isFading",value:function(){return this._isDone&&c.default.now()<this._fadeUntil}},{key:"setOverlayCellSet",value:function(t){this.placement.setOverlayCellSet(t)}},{key:"destroy",value:function(){this._destroyed||(this._textCache=null,this.placement.clear(),this.placement=null,this._currentPlacementIndex=null,this._currentTileIndex=null,this._isDone=null,this._batchedUpdate=null,this._fadeUntil=null,this._batchUpdateTime=null,this._destroyed=!0)}}]),t}();e.default=g},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(27),a=i(r),o=n(15),s=i(o),l=n(25),u=i(l),c=n(17),f=i(c),d=n(0),h=i(d),p=n(1),v=i(p),m=n(109),g=n(22),_=i(g),y=n(10),x=i(y),b=n(354),S=n(28),w=i(S),E=n(121),A=n(309),T=80,M=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,h.default)(this,t),!_.default.isBatchVector&&_.default.isClientRender?this.DELTA_SCREEN_CELL=2*T:this.DELTA_SCREEN_CELL=Math.round(T*(e.textCache&&e.textCache.scale||1)),this.boundsBuffer=0,this.iconBoundsBuffer=0,this.textScreenCoordList={},this.textDataSet={},this.textTileCellSet={},this.textFeatureSet={},this.textRoadAngleStore={},this.poiScreenCoordList={},this.poiDataSet={},this.poiTileCellSet={},this.iconScreenCoordList={},this.iconDataSet={},this.iconTileCellSet={},this.v=1,this.instanceSet={},this.cellSet={},this._batchUpdateTime=0,this.inUse=!1}return(0,v.default)(t,[{key:"updateVersion",value:function(){this.v+=1}},{key:"setInUse",value:function(t){this.inUse=t}},{key:"getInUse",value:function(){return this.inUse}},{key:"clear",value:function(){this.clearText(),this.clearPoi(),this.clearIcon(),this.instanceSet={},this.cellSet={},this.textRoadAngleStore={}}},{key:"clearText",value:function(){var t=this,e=this.v,n=this.textDataSet,i=this.textScreenCoordList;x.default.forIn(n,function(i,r){if(r.v!==e){var a=r.tileId,o=r.roadSymbolIndex;t.instanceSet[a]&&(t.instanceSet[a].instanceInfosTypeArray[4*o+1]=0),n[i].destory&&n[i].destory(),delete n[i]}}),x.default.forIn(i,function(t,n){x.default.forIn(n,function(t,i){"cell"!==t&&i.v!==e&&(n[t].destory&&n[t].destory(),delete n[t])})}),this.textTileCellSet={}}},{key:"clearPoi",value:function(){var t=this;(0,f.default)(this.poiDataSet).forEach(function(e){var n=t.poiDataSet[e],i=n.tileId,r=n.textSymbolIndexList;t.instanceSet[i]&&r.forEach(function(e){t.instanceSet[i].instanceInfosTypeArray[4*e+1]=1}),t.poiDataSet[e].destory&&t.poiDataSet[e].destory()}),this.poiDataSet={},this.poiScreenCoordList={},this.poiTileCellSet={}}},{key:"clearIcon",value:function(){var t=this;(0,f.default)(this.iconDataSet).forEach(function(e){var n=t.iconDataSet[e],i=n.tileId,r=n.iconSymbolIndex;t.instanceSet[i]&&(t.instanceSet[i].instanceInfosTypeArray[4*r+1]=1),t.iconDataSet[e].destory&&t.iconDataSet[e].destory()}),this.iconDataSet={},this.iconScreenCoordList={},this.iconTileCellSet={}}},{key:"_sortValue",value:function(t,e){return e.y-t.y>t.x-e.x?1:-1}},{key:"getFadeChange",value:function(){return(w.default.now()-this._batchUpdateTime)/500}},{key:"batchUpdate",value:function(t){this._batchUpdateTime=w.default.now(),this.batchUpdateShow();var e=0;t&&(e=(this._batchUpdateTime-t._batchUpdateTime)/500),this.batchChangeOpacity(t,e),this.batchUpdateOpacities()}},{key:"batchUpdateShow",value:function(){var t=this;(0,f.default)(this.textDataSet).forEach(function(e){var n=t.textDataSet[e];n.updateShow&&n.updateShow()}),(0,f.default)(this.poiDataSet).forEach(function(e){var n=t.poiDataSet[e];n.updateShow&&n.updateShow()}),(0,f.default)(this.iconDataSet).forEach(function(e){var n=t.iconDataSet[e];n.updateShow&&n.updateShow()})}},{key:"batchChangeOpacity",value:function(t,e){var n=this;(0,f.default)(this.textDataSet).forEach(function(i){var r=n.textDataSet[i];if(r.setOpacity){var a=t&&t.textDataSet&&t.textDataSet[i];a&&null!==a._opacity?r.setOpacity(a.getShow()!==r.getShow()?a.getOpacity():x.default.clamp(a._opacity+(r.getShow()?e:-e),0,1)):r.setOpacity(r.getShow()?1:0)}}),(0,f.default)(this.poiDataSet).forEach(function(i){var r=n.poiDataSet[i];if(r.setOpacity){var a=t&&t.poiDataSet&&t.poiDataSet[i];a&&null!==a._opacity?r.setOpacity(a.getShow()!==r.getShow()?a.getOpacity():x.default.clamp(a._opacity+(r.getShow()?e:-e),0,1)):a&&a.getShow()?r.setOpacity(1):r.setOpacity(r.isIndoor&&r.getShow()?1:0)}}),(0,f.default)(this.iconDataSet).forEach(function(i){var r=n.iconDataSet[i];if(r.setOpacity){var a=t&&t.iconDataSet&&t.iconDataSet[i];a&&null!==a._opacity?r.setOpacity(a.getShow()!==r.getShow()?a.getOpacity():x.default.clamp(a._opacity+(r.getShow()?e:-e),0,1)):a&&a.getShow()?r.setOpacity(1):r.setOpacity(r.isIndoor&&r.getShow()?1:0)}})}},{key:"batchUpdateOpacities",value:function(){var t=this;(0,f.default)(this.textDataSet).forEach(function(e){var n=t.textDataSet[e];n.updateOpacity&&n.updateOpacity()}),(0,f.default)(this.poiDataSet).forEach(function(e){var n=t.poiDataSet[e];n.updateOpacity&&n.updateOpacity()}),(0,f.default)(this.iconDataSet).forEach(function(e){var n=t.iconDataSet[e];n.updateOpacity&&n.updateOpacity()})}},{key:"calculateAlsoShowedLabel",value:function(t,e,n){var i=this;(0,f.default)(this.textFeatureSet).filter(function(t){return i.textFeatureSet[t].getShow()}).forEach(function(r){var a=i.textFeatureSet[r];t[a.tileId]&&a.zoom===n.roundZoom&&i.calculateLabelFeatures({matrix:t[a.tileId]},a.roadFeature.roads,e,a.tile,n,a.tileFeatures,a.roadFeature)})}},{key:"calculateTextByTile",value:function(t,e,n,i){t.label&&this.calculateLabelByTile(t.label,e,n,i),t.poi&&this.calculatePoiByTile(t.poi,e,n,i),t.icon&&this.calculateIconByTile(t.icon,e,n,i)}},{key:"calculateLabelByTile",value:function(t,e,n,i){var r=!0,a=!1,o=void 0;try{for(var s,l=(0,u.default)(t.features);!(r=(s=l.next()).done);r=!0){var c=s.value;c.roads instanceof Array&&c.roads.length&&this.calculateLabelFeatures({matrix:e},c.roads,n,t,i,t.features,c)}}catch(t){a=!0,o=t}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}}},{key:"calculatePoiByTile",value:function(t,e,n,i){var r=!0,a=!1,o=void 0;try{for(var s,l=(0,u.default)(t.features);!(r=(s=l.next()).done);r=!0){var c=s.value;if(c.datas&&c.datas[0]&&c.datas[0].text){var f=void 0;c.datas[0].icon&&(f=c.id),this.calculatePoi({matrix:e},c,t.scale,null,n,t.offset,f,t,i,t.features)}}}catch(t){a=!0,o=t}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}}},{key:"calculateIconByTile",value:function(t,e,n,i){var r=1/t.scale,a=!0,o=!1,s=void 0;try{for(var l,c=(0,u.default)(t.features);!(a=(l=c.next()).done);a=!0){var f=l.value;"iconSymbolIndex"in f&&this.calculateIcon({matrix:e,scale:r},f.id,t,f,n,i,t.features)}}catch(t){o=!0,s=t}finally{try{!a&&c.return&&c.return()}finally{if(o)throw s}}}},{key:"impactTextByTile",value:function(t,e){var n=this,i=this.textTileCellSet[t.id]||null,r=this.poiTileCellSet[t.id]||null,a=this.iconTileCellSet[t.id]||null,o=(0,f.default)(this.overlayCellSetList),l={};o.forEach(function(t){return l[t]=!0});var u=(0,s.default)({},i,r,a,l);(0,f.default)(u).forEach(function(t){n.impactTextByCellId(t,e)})}},{key:"impactTextByCellId",value:function(t,e){var n=this,i=this.textDataSet,r=this.poiDataSet,a=this.iconDataSet,o=this.textScreenCoordList,s=this.poiScreenCoordList,l=this.iconScreenCoordList,u=this.overlayCellSetList||[],c=void 0,f=void 0;x.default.forIn(o[t],function(e,u){if((f=i[e])&&f.getShow())for(var c=f,d=c.linkIds,h=o[t].cell,p=0;p<3;p++)if(f&&f.getShow())for(var v=0;v<3;v++)if(f&&f.getShow()){var m=h[0]+p-1+"_"+(h[1]+v-1),g=o[m],_=s[m],y=l[m];g&&x.default.forIn(g,function(t,r){var a=i[t];if(a&&a.getShow&&t!==e&&(!d||!d[t])&&n._impact(u,r))if(f.rank>a.rank){a.setShow(!1);var o=a.linkIds;x.default.forIn(o,function(t){i[t].setShow(!1)})}else{f.setShow(!1);var s=f,l=s.linkIds;x.default.forIn(l,function(t){i[t].setShow(!1)})}}),_&&x.default.forIn(_,function(t,e){var a=r[t];if(a&&a.getShow()&&n._impact(u,e)){f.setShow(!1);var o=f,s=o.linkIds;x.default.forIn(s,function(t){i[t].setShow(!1)})}}),y&&x.default.forIn(y,function(t,e){var i=a[t];i&&i.getShow()&&f.rank>=i.rank&&n._impact(u,e)&&i.setShow(!1)})}}),x.default.forIn(s[t],function(e,i){if((c=r[e])&&c.getShow())for(var o=c.linkId,u=s[t].cell,f=0;f<3;f++)if(c&&c.getShow())for(var d=0;d<3;d++)if(c&&c.getShow()){var h=u[0]+f-1+"_"+(u[1]+d-1),p=s[h],v=l[h];v&&x.default.forIn(v,function(t,e){var r=a[t];r&&r.getShow()&&c.iconId!==r.id&&c.rank>=r.rank&&n._impact(i,e)&&r.setShow(!1)}),p&&x.default.forIn(p,function(t,s){var l=r[t];if(e!==t&&l&&l.getShow()&&(!o||o!==t)&&n._impact(i,s))if(c.rank>l.rank){l.setShow(!1),a[l.iconId]&&a[l.iconId].setShow(!1);var u=l.linkId;u&&r[u]&&r[u].setShow(!1)}else{c.setShow(!1),a[c.iconId]&&a[c.iconId].setShow(!1);var f=c,d=f.linkId;d&&r[d]&&r[d].setShow(!1)}})}}),x.default.forIn(l[t],function(e,i){var r=a[e];if(r&&r.getShow())for(var o=l[t].cell,s=0;s<3;s++)if(r&&r.getShow())for(var u=0;u<3;u++)if(r&&r.getShow()){var c=o[0]+s-1+"_"+(o[1]+u-1),f=l[c];i.isInCell&&c!==t||f&&x.default.forIn(f,function(t,o){var s=a[t];e!==t&&s&&s.getShow()&&n._impact(i,o)&&(r.rank>s.rank?s.setShow(!1):r.setShow(!1))})}});var d=function(t){var e=t.x,n=t.y,i=t.w,r=t.h;return{width:i,height:r,leftTop:{x:e,y:n},rightBottom:{x:e+i,y:n+r},angle:0}};x.default.forIn(u[t],function(n,c){if(c.isVectorBaseCollision&&!(e.zoom<5)&&c.visible)for(var f=u[t].cell,h=0;h<3;h++)for(var p=0;p<3;p++){var v=f[0]+h-1+"_"+(f[1]+p-1),m=o[v],g=s[v],_=l[v];m&&x.default.forIn(m,function(t,e){var n=i[t];if(n&&n.getShow){var r=d(e);if((0,b.checkCollision)(r,c)){n.setShow(!1);var a=n.linkIds;x.default.forIn(a,function(t){i[t].setShow(!1)})}}}),g&&x.default.forIn(g,function(t,e){var n=r[t];if(n&&n.getShow()){var i=d(e);if((0,b.checkCollision)(i,c)){n.setShow(!1),a[n.iconId]&&a[n.iconId].setShow(!1);var o=n.linkId;o&&r[o]&&r[o].setShow(!1)}}}),_&&x.default.forIn(_,function(t,e){var n=a[t];if(n&&n.getShow()){var i=d(e);if((0,b.checkCollision)(i,c)){if("天安门"===n.name)return;n.setShow(!1)}}})}})}},{key:"textImpact",value:function(){var t=this;x.default.forIn(this.cellSet,function(e){t.impactTextByCellId(e)})}},{key:"_impactCoord",value:function(t,e){return!(Math.abs(t.z-e.z)>0||Math.abs(t.x-e.x)>1||Math.abs(t.y-e.y)>1)}},{key:"_impact",value:function(t,e){var n=t.x<=e.x?e.x:t.x,i=t.y<=e.y?e.y:t.y;return n>=t.x&&n<=t.x+t.w&&i>=t.y&&i<=t.y+t.h&&n>=e.x&&n<=e.x+e.w&&i>=e.y&&i<=e.y+e.h}},{key:"calculateLabelFeatures",value:function(t,e,n,i,r,a,o){if(a.instance){var s=i.id+"_"+Math.round(r.zoom);this.instanceSet[s]=a.instance,this.textRoadAngleStore[o.roadName]||(this.textRoadAngleStore[o.roadName]={fixNum:0,unfix:0});var l=e.length/2-.5,c=Math.floor(l),f=e[0].font_size||12,d=void 0;if(l%1==0)d=e[l].datas[0].coords;else{var h=e[Math.floor(l)].datas[0].coords,p=e[Math.ceil(l)].datas[0].coords;d=[(h[0]+p[0])/2,(h[1]+p[1])/2]}var v=new m.Vector4(0,0,0,1),g=!0,_=!1,y=void 0;try{for(var x,b=(0,u.default)(e);!(g=(x=b.next()).done);g=!0){var S=x.value,w=S.datas[0].screenCoords;if(!w||w.version!==n.version){v.elements[0]=S.datas[0].coords[0]+f/2,v.elements[1]=-(S.datas[0].coords[1]+f/2);var E=n.getScreenCoordsByCustomMatrix(t.matrix,v);E.rank=S.datas[0].rank,S.datas[0].screenCoords=E}}}catch(t){_=!0,y=t}finally{try{!g&&b.return&&b.return()}finally{if(_)throw y}}for(var A=e[Math.floor(l)],T=e[Math.ceil(l)],M=A.datas[0].screenCoords,I=T.datas[0].screenCoords,P={x:(M.x+I.x)/2,y:(M.y+I.y)/2},k=e[0].datas[0].coords,L=e[e.length-1].datas[0].coords,C={x:k[0],y:k[1]},R={x:L[0],y:L[1]},D=this._sortValue(C,R),N=this._sortValue(e[0].datas[0].screenCoords,e[e.length-1].datas[0].screenCoords),B=D!==N,O=void 0,F={},z=0,V=0,U=void 0,G=0,H=e.length;G<H;G++){var Y=e[G].datas[0],j=void 0,W=void 0,X=B?e[H-G-1]:e[G];Y.text=X.datas[1].text,Y.text_bounds=X.datas[1].text_bounds,Y.glyph_text_bounds=X.datas[1].glyph_text_bounds;var Z=X.roadSymbolIndex,q=a.instance.instanceTransTypeArray[3*Z],Q=a.instance.instanceTransTypeArray[3*Z+1],J=a.instance.instanceTransTypeArray[3*Z+2];X.roadSymbolIndex=e[G].roadSymbolIndex,a.instance.instanceTransTypeArray[3*X.roadSymbolIndex]=a.instance.instanceTransTypeArray[3*e[G].roadSymbolIndex],a.instance.instanceTransTypeArray[3*X.roadSymbolIndex+1]=a.instance.instanceTransTypeArray[3*e[G].roadSymbolIndex+1],a.instance.instanceTransTypeArray[3*X.roadSymbolIndex+2]=a.instance.instanceTransTypeArray[3*e[G].roadSymbolIndex+2],e[G].roadSymbolIndex=Z,a.instance.instanceTransTypeArray[3*e[G].roadSymbolIndex]=q,a.instance.instanceTransTypeArray[3*e[G].roadSymbolIndex+1]=Q,a.instance.instanceTransTypeArray[3*e[G].roadSymbolIndex+2]=J,G<H-1&&(j=e[G+1].datas[0],W=this.lineAngle(Y.screenCoords,j.screenCoords),O=G===H-2?W:0),Y.line=G===H-1?O:W,Y.line>=45&&Y.line<=135||Y.line>=225&&Y.line<=315?this.textRoadAngleStore[o.roadName].fixNum>this.textRoadAngleStore[o.roadName].unfix?Y.line>=53&&Y.line<=127||Y.line>=233&&Y.line<=307?(V+=1,this.textRoadAngleStore[o.roadName].unfix+=1):(z+=1,this.textRoadAngleStore[o.roadName].fixNum+=1):(V+=1,this.textRoadAngleStore[o.roadName].unfix+=1):(z+=1,this.textRoadAngleStore[o.roadName].fixNum+=1);var K="label_"+e[G].datas[0].text+"_"+e[G].id;F[K]=K}if(z===V){var $=e[0].datas[0].line;U=!($>=45&&$<=135||$>=225&&$<=315)}else U=z>=V;for(var tt=e.map(function(t){return t.id}).join(),et=c;et>=0;et--){var nt={coords:et===c?d:e[et+1].datas[0].coords,newCoords:et===c?d:e[et+1].datas[0].newCoords,screenCoords:et===c?P:e[et+1].datas[0].screenCoords};this.calculate({transform:t,feature:e[et],camera:n,tile:i,neighbor:nt,linkIds:F,fixType:U,gltrans:r,tileFeatures:a,roadFeature:o,roadFeatureId:tt})}for(var it=c+1;it<e.length;it++){var rt={coords:it===c+1?d:e[it-1].datas[0].coords,newCoords:it===c+1?d:e[it-1].datas[0].newCoords,screenCoords:it===c+1?P:e[it-1].datas[0].screenCoords};this.calculate({transform:t,feature:e[it],camera:n,tile:i,neighbor:rt,linkIds:F,fixType:U,gltrans:r,tileFeatures:a,roadFeature:o,roadFeatureId:tt})}}}},{key:"calculate",value:function(t){var e=t.transform,n=t.feature,i=t.camera,r=t.tile,a=t.neighbor,o=t.linkIds,s=t.fixType,l=t.gltrans,u=t.tileFeatures,c=t.roadFeature,f=t.roadFeatureId,d=n.datas[0],h=i.scale,p=n.roadSymbolIndex,v=d.text,g="label_"+v+"_"+n.id,_=u.instance.instanceCoordsTypeArray[4*p]*h,y=u.instance.instanceCoordsTypeArray[4*p+1]*h,x=d.screenCoords,b=d.line||0,S=360-this.calMix(s,b)||0,w=Math.sqrt(Math.pow(x.x-a.screenCoords.x,2)+Math.pow(x.y-a.screenCoords.y,2)),E=this.calCoords(a.coords,d.coords,w,a.newCoords,d.coordScale,h),A=E[0],T=E[1];d.newCoords=[A,T],u.instance.instanceTransTypeArray[3*p]=A,u.instance.instanceTransTypeArray[3*p+1]=-T;var M=d.newScreenCoords;if(!M||M.version!==i.version){var I=new m.Vector4(0,0,0,1);I.elements[0]=A,I.elements[1]=-T,d.newScreenCoords=i.getScreenCoordsByCustomMatrix(e.matrix,I),M=d.newScreenCoords,M.rank=d.rank,M.w=_,M.h=y,M.x-=_/2,M.y-=y/2}var P=Math.floor(M.x/this.DELTA_SCREEN_CELL),k=Math.floor(M.y/this.DELTA_SCREEN_CELL),L=P+"_"+k;M.isInCell=P===Math.floor((M.x+M.w)/this.DELTA_SCREEN_CELL)&&k===Math.floor((M.y+M.h)/this.DELTA_SCREEN_CELL),this.textFeatureSet[f]||(this.textFeatureSet[f]={_show:!0,tileId:r.id,roadFeature:c,tile:r,tileFeatures:u,zoom:l.roundZoom,getShow:function(){return this._show},setShow:function(t){this._show=t},destory:function(){this._show=null}});var C=this,R={v:this.v,_show:!0,roadSymbolIndex:p,rank:d.rank,tileId:r.id,linkIds:o,coordX:r.coordX,coordY:r.coordY,coordZ:r.coordZ,_opacity:null,getOpacity:function(){return this._opacity},setOpacity:function(t){this._opacity=t},updateOpacity:function(){u.instance.instanceInfosTypeArray[4*this.roadSymbolIndex+3]=this._opacity},getShow:function(){return this._show},setShow:function(t){this._show=t,C.textFeatureSet[f].setShow(t)},updateShow:function(){u.instance.instanceInfosTypeArray[4*this.roadSymbolIndex+1]=this._show?1:0},destory:function(){this._show=null,this._opacity=null}};M.x+M.w<-120||M.x>l.width+120||M.y+M.h<-120||M.y>l.height+120?R.setShow(!1):(M.v=this.v,this.textTileCellSet[r.id]=this.textTileCellSet[r.id]||{},this.textTileCellSet[r.id][L]=!0,this.textScreenCoordList[L]=this.textScreenCoordList[L]||{cell:[P,k]},this.textScreenCoordList[L][g]=M,this.cellSet[L]=!0),u.instance.instanceInfosTypeArray[4*p]=-S%360*Math.PI/180,u.instance.instanceInfosTypeArray[4*p+1]=1;var D=this.textDataSet[g];D&&(R.setShow(D.getShow()),R.setOpacity(D.getOpacity())),this.textDataSet[g]=R}},{key:"calculateAllIndoorPois",value:function(t,e,n,i,r,a){var o=this;if(t.instance){var s=a.id+"_"+Math.round(r.zoom);this.instanceSet[s]=t.instance;var l=r.getDistanceScales(),u=r.center,c=1/(0,E.getSpatialResolution)(r.zoom);t.forEach(function(s){var f="iconSymbolIndex"in s,d=s.length>0&&s[0].instance_trans;if(f||d){var h=s.iconSymbolIndex,p=a.id+"_icon_"+h,v=s.map(function(t,e){return"indoor_"+t.text+"_"+a.id+"_"+(t.textSymbolIndexList&&t.textSymbolIndexList[e]||"")}),m=s.map(function(t){return t.text}).join("/"),g=r.latLngToCenterLocalPixelByDistanceScales(e,{distanceScales:l,center:u,pixelsPerMeter:c,offsetMercator:f?{x:t.instance.instanceTransTypeArray[3*h],y:t.instance.instanceTransTypeArray[3*h+1]}:{x:s[0].instance_trans[0],y:s[0].instance_trans[1]}});o.calculateSingleIndoorPoi(s,{linkIds:v,indoorTile:a,hasIcon:f,iconId:p,localPixel:g,camera:i,tileMatrix:n,transform:r,indoorPois:t,textName:m}),f&&o.calculateIndoorPoiIcon({indoorPois:t,iconId:p,poiInfo:s,localPixel:g,tileMatrix:n,camera:i,transform:r,tile:a,textName:m})}})}}},{key:"calculateSingleIndoorPoi",value:function(t,e){var n=this,i=t,r=e.linkIds,o=e.indoorTile,s=e.hasIcon,l=e.iconId,u=e.localPixel,c=e.camera,f=e.tileMatrix,d=e.transform,h=e.indoorPois,p=e.textName;i.forEach(function(t,e){if(0!==t.textBounds.w&&0!==t.textBounds.h){var v=r[e],m=0===e?r[1]:r[0],g=n._generatePoiDataItem({isIndoor:!0,textSymbolIndexList:t.textSymbolIndexList,rank:t.rank,tile:o,linkId:m,iconId:l,instance:h.instance,name:p});if(n.poiDataSet[v]=g,!(e>0)){var y=1,x=1,b=0;if(i.length>1){var S=i.map(function(t){return t.textBounds}),w=(0,a.default)(S,2),E=w[0],A=w[1],T=i.map(function(t){return t.anchor}),M=(0,a.default)(T,2),I=M[0],P=M[1];A.w>E.w&&(y=A.w/E.w);var k=Math.abs(P.y-I.y)-(E.h+A.h)/2;x=(E.h+A.h+k)/E.h;var L=I.x-E.w/2-(P.x-A.w/2);L>0&&(b=L)}var C=n._generateScreenCoordsForPoi({screenCoordsContainer:t,localPixel:u,textInfo:t,boundsScale:y,boundsH:x,camera:c,tileMatrix:f,correctCallback:function(e){if(e.x-=b,s){var n=_.default.iconSize*c.scale,i=t.anchor;i.x>0?(e.x-=n,e.w+=n):i.x<0?e.w+=n:(e.h+=n,i.y>0&&(e.y-=n))}}});n._packPoiToSet(C,{item:g,transform:d,infoId:v,tile:o})}}})}},{key:"calculateIndoorPoiIcon",value:function(t){var e=t.indoorPois,n=t.iconId,i=t.poiInfo,r=t.localPixel,a=t.tileMatrix,o=t.camera,s=t.transform,l=t.tile,u=t.textName,c=new m.Vector4(0,0,0,1);c.elements[0]=r.x,c.elements[1]=r.y;var f=i.iconScreenCoods;if(!f||f.version!==o.version){i.iconScreenCoods=o.getScreenCoordsByCustomMatrix(a,c),f=i.iconScreenCoods,f.rank=i[0].rank||0,f.coord={x:f.x,y:f.y};var d=_.default.iconSize*o.scale;f.x-=d/2,f.y-=d/2,f.w=d,f.h=d,f.iconSymbolIndex=i.iconSymbolIndex}this._packIconToSet(f,{id:n,isIndoor:!0,tileId:l.id,gltrans:s,instance:e.instance,needIcon:!i[0].textSymbolIndex,name:u})}},{key:"calculatePoi",value:function(t,e,n,i,r,a,o,s,l,u){if(u.instance){var c=s.id+"_"+Math.round(l.zoom);this.instanceSet[c]=u.instance;var f=e.datas[0];if(f.coords.length)for(var d=f.text,h=1,p=1,v=f.text_bounds,m=void 0,g=0,_=d.length;g<_;g++){var y="text_"+d[g].text+"_"+e.id,x=void 0;if(m=2===_?v.slice(4*(1-g),4*(1-g)+4):v.slice(4*g,4*g+4),!(m[2]<10||m[3]<10)&&d[g].instance_trans){if(2===_){var b=d[1].text,S=d[0].text;x=0===g?"text_"+b+"_"+e.id:"text_"+S+"_"+e.id,h=d[0].instance_coords&&d[1].instance_coords?d[0].instance_coords[0]>d[1].instance_coords[0]?1:d[1].instance_coords[0]/d[0].instance_coords[0]:1,p=2}this.calculateSingle(t,d[g],y,o,e,r,x,s,g,h,p,l,u)}}}}},{key:"calculateSingle",value:function(t,e,n,i,r,a,o,s,l,u,c,f,d){var h=e.textSymbolIndexList,p=e.rank,v=this._generatePoiDataItem({isIndoor:!1,textSymbolIndexList:h,rank:p,tile:s,linkId:o,iconId:i,instance:d.instance,index:l,name:r.datas[0].textName});if(this.poiDataSet[n]=v,l)return void(this.poiDataSet[n]=v);var m=this._generateScreenCoordsForPoi({screenCoordsContainer:r.datas[0],localPixel:{x:e.instance_trans[0],y:e.instance_trans[1]},textInfo:e,boundsScale:u,boundsH:c,tileMatrix:t.matrix,camera:a,correctCallback:function(t){var n=e.centerOffset,o=_.default.iconSize,s=a.scale,l=e.instance_coords[0],c=!!i;if(r.datas[0].stretching_len){var f={x:r.datas[0].screenW||0,y:r.datas[0].screenH||0};t.x+=(n&&n.x)*s,t.y+=(n&&n.y)*s,t.w+=f.x*s,t.h+=f.y*s}else if(n){var d={x:0,y:0},h={x:0,y:0};if(0===n.x){if(d.x=-l*(u-1)/2,c){var p=Math.abs(e.instance_coords[3])+o/2;d.y=n.y>0?-p:0,h.y=p}}else{var v=Math.abs(e.instance_coords[2])+o/2;d.x=n.x<0?-l*(u-1):-v,h.x=v}t.x+=d.x*s,t.y+=d.y*s,t.w+=h.x*s,t.h+=h.y*s}!_.default.isBatchVector&&_.default.isClientRender&&((0,A.isRoadwayNum)(r.datas[0].style_id)?(t.w+=20,t.h+=15):(t.w+=10,t.h+=10))}});this._packPoiToSet(m,{item:v,infoId:n,tile:s,transform:f})}},{key:"_generateScreenCoordsForPoi",value:function(t){var e=t.screenCoordsContainer,n=t.localPixel,i=t.textInfo,r=t.boundsScale,a=t.boundsH,o=t.camera,s=t.tileMatrix,l=t.correctCallback,u=new m.Vector4(0,0,0,1),c=e.poiScreenCoords,f=o.scale;if(!c||c.version!==o.version){u.elements[0]=n.x,u.elements[1]=n.y;var d=i.instance_coords[0]*f,h=i.instance_coords[1]*f,p={x:i.instance_coords[2]*f,y:i.instance_coords[3]*f};e.poiScreenCoords=o.getScreenCoordsByCustomMatrix(s,u),c=e.poiScreenCoords,c.rank=i.rank||0,c.coord={x:c.x,y:c.y},c.x-=p.x,c.y-=p.y,c.w=d*r,c.h=h*a,l&&l(c)}return c}},{key:"_generatePoiDataItem",value:function(t){return{name:t.name||"",_show:!0,textSymbolIndexList:t.textSymbolIndexList,rank:t.rank,isIndoor:t.isIndoor,tileId:t.tile.id,linkId:t.linkId,iconId:t.iconId,coordX:t.tile.coordX,coordY:t.tile.coordY,coordZ:t.tile.coordZ,index:t.index||0,_opacity:null,getOpacity:function(){return this._opacity},setOpacity:function(t){this._opacity=t},updateOpacity:function(){var e=this;this.textSymbolIndexList.forEach(function(n){t.instance.instanceInfosTypeArray[4*n+3]=e._opacity})},getShow:function(){return this._show},setShow:function(t){this._show=t},updateShow:function(){var e=this;this.textSymbolIndexList.forEach(function(n){t.instance.instanceInfosTypeArray[4*n+1]=e._show?1:0})},destory:function(){this._show=null,this._opacity=null}}}},{key:"_packPoiToSet",value:function(t,e){var n=this.calCellCoord(t),i=n.hIdx,r=n.vIdx,a=n.cellId;t.isInCell=i===Math.floor((t.x+t.w)/this.DELTA_SCREEN_CELL)&&r===Math.floor((t.y+t.h)/this.DELTA_SCREEN_CELL),t.x+t.w<-120||t.x>e.transform.width+120||t.y+t.h<-120||t.y>e.transform.height+120?e.item.setShow(!1):(this.poiScreenCoordList[a]?this.poiScreenCoordList[a][e.infoId]=t:(this.poiScreenCoordList[a]={cell:[i,r]},this.poiScreenCoordList[a][e.infoId]=t),this.poiTileCellSet[e.tile.id]=this.poiTileCellSet[e.tile.id]||{},this.poiTileCellSet[e.tile.id][a]=!0,this.cellSet[a]=!0)}},{key:"calculateIcon",value:function(t,e,n,i,r,a,o){if(o.instance){var s=n.id+"_"+Math.round(a.zoom);this.instanceSet[s]=o.instance}var l=i.datas[0].text,u=_.default.iconSize,c=new m.Vector4(0,0,0,1);c.elements[0]=o.instance.instanceTransTypeArray[3*i.iconSymbolIndex],c.elements[1]=o.instance.instanceTransTypeArray[3*i.iconSymbolIndex+1];var f=i.datas[0].iconScreenCoods;if(!f||f.version!==r.version){i.datas[0].iconScreenCoods=r.getScreenCoordsByCustomMatrix(t.matrix,c),f=i.datas[0].iconScreenCoods,f.rank=l&&l[0]&&l[0].rank||0;var d=u*f.depthScale*r.scale,h=u*f.depthScale*r.scale;f.coord={x:f.x,y:f.y},f.x-=d/2+this.iconBoundsBuffer,f.y-=h/2+this.iconBoundsBuffer,f.w=d+2*this.iconBoundsBuffer,f.h=h+2*this.iconBoundsBuffer,!_.default.isBatchVector&&_.default.isClientRender&&l.length>1&&(f.w+=20,f.h+=10),f.iconSymbolIndex=i.iconSymbolIndex}this._packIconToSet(f,{id:e,tileId:n.id,isIndoor:!1,gltrans:a,instance:o.instance,needIcon:l.length<=0,name:i.datas[0].textName})}},{key:"_packIconToSet",value:function(t,e){var n=e.id,i=e.tileId,r=e.isIndoor,a=e.gltrans,o=e.instance,s=e.needIcon,l=e.name,u=Math.floor(t.x/this.DELTA_SCREEN_CELL),c=Math.floor(t.y/this.DELTA_SCREEN_CELL),f=u+"_"+c;t.isInCell=u===Math.floor((t.x+t.w)/this.DELTA_SCREEN_CELL)&&c===Math.floor((t.y+t.h)/this.DELTA_SCREEN_CELL),this.iconDataSet[n]={id:n,name:l,isIndoor:r,tileId:i,rank:t.rank,_show:!0,iconSymbolIndex:t.iconSymbolIndex,_opacity:null,getOpacity:function(){return this._opacity},setOpacity:function(t){this._opacity=t},updateOpacity:function(){o.instanceInfosTypeArray[4*this.iconSymbolIndex+3]=this._opacity},getShow:function(){return this._show},setShow:function(t){this._show=t},updateShow:function(){o.instanceInfosTypeArray[4*this.iconSymbolIndex+1]=this._show?1:0},destory:function(){this._show=null,this._opacity=null}},t.x+t.w<-120||t.x>a.width+120||t.y+t.h<-120||t.y>a.height+120?this.iconDataSet[n].setShow(!1):s&&(this.iconScreenCoordList[f]?this.iconScreenCoordList[f][n]=t:(this.iconScreenCoordList[f]={cell:[u,c]},this.iconScreenCoordList[f][n]=t),this.iconTileCellSet[i]=this.iconTileCellSet[i]||{},this.iconTileCellSet[i][f]=!0,this.cellSet[f]=!0)}},{key:"calMix",value:function(t,e){var n=0;return n=t?e>=90&&e<=270?e-180:e:e<=180?e-90:e-270,Math.round(n)}},{key:"lineAngle",value:function(t,e){var n=t.x,i=t.y,r=e.x,a=e.y,o=r-n,s=a-i,l=Math.sqrt(o*o+s*s),u=o/l,c=Math.acos(u),f=180*c/Math.PI;return s>0?f=-f:0===s&&o<0&&(f=180),f=f>90?360-(f-90):90-f,Math.round(f)}},{key:"calCoords",value:function(t,e,n,i,r,a){if(!n)return i;var o=e[0]-t[0],s=e[1]-t[1],l=Math.sqrt(o*o+s*s),u=l/r*a,c=u/n;return[i[0]+o*c,i[1]+s*c]}},{key:"calCellCoord",value:function(t){var e=Math.floor(t.x/this.DELTA_SCREEN_CELL),n=Math.floor(t.y/this.DELTA_SCREEN_CELL);return{hIdx:e,vIdx:n,cellId:e+"_"+n}}},{key:"getDataInCell",value:function(t,e){var n=this[e+"ScreenCoordList"],i=this[e+"DataSet"],r=[];return n&&i&&x.default.forIn(n[t],function(t,e){"cell"!==t&&r.push(x.default.extend({poiId:t},e,i[t]))}),r}},{key:"getPoi",value:function(t){var e=this,n=null,i=this.calCellCoord(t),r=i.hIdx,a=i.vIdx,o=[[0,0],[0,-1],[-1,0],[-1,-1]],s=[];o.forEach(function(t){var n=r+t[0]+"_"+(a+t[1]),i=!!(t[0]+t[1]),o=e.getDataInCell(n,"poi").filter(function(t){return t._show&&!(i&&t.isInCell)}),l=e.getDataInCell(n,"icon").filter(function(t){return t._show&&!(i&&t.isInCell)});s=s.concat(o).concat(l)});for(var l=0;l<s.length;l++){var u=s[l],c=u.x,f=u.y,d=u.w,h=u.h,p=u.coord,v=u.isIndoor,m=u.name,g={x:t.x-c,y:t.y-f},_=d+2,y=h+2;if(g.x>=-2&&g.x<=_&&g.y>=-2&&g.y<=y){n={coord:p,bounds:[c,f,d,h],isIndoor:v,name:m?m.replace("/",""):""};break}}return n}},{key:"setOverlayCellSet",value:function(t){this.overlayCellSetList=t}}]),t}();e.default=M},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(){return[{name:"a_Position",components:2,type:"UNSIGNED_SHORT",offset:0},{name:"a_Info",components:4,type:"UNSIGNED_BYTE",offset:4},{name:"a_Color",components:4,type:"UNSIGNED_BYTE",offset:8},{name:"a_Transform",components:2,type:"UNSIGNED_BYTE",offset:12},{name:"a_Height",components:1,type:"UNSIGNED_SHORT",offset:14}]}function a(){return["Uint16","Uint16","Uint8","Uint8","Uint8","Uint8","Uint8","Uint8","Uint8","Uint8","Uint8","Uint8","Uint16"]}Object.defineProperty(e,"__esModule",{value:!0});var o=n(25),s=i(o),l=n(18),u=i(l),c=n(0),f=i(c),d=n(1),h=i(d),p=n(509),v=i(p),m=n(286),g=i(m),_=n(246),y=i(_),x=n(665),b=i(x),S=function(){function t(){(0,f.default)(this,t);var e=(0,v.default)(a(),r()),n=(0,v.default)(["Int16"]);this.vertiesDataBuffer=e(1024),this.indicesDataBuffer=n(1024)}return(0,h.default)(t,[{key:"add",value:function(t){var e=t.points,n=t.height,i=t.colorFill,r=t.colorSide,a=t.transform;n*=1;for(var o=a.transX,s=void 0===o?0:o,l=a.transY,c=void 0===l?0:l,f=a.scale,d=void 0===f?1:f,h=[Math.round(s/256)+16*Math.round(c/256),Math.round(1/d)],p=this.vertiesDataBuffer,v=this.indicesDataBuffer,m=y.default.mixCoords(e,"polygon",[128,128,129,0].concat((0,u.default)(i),h,[n]),2048),_=g.default.flatten([m]),x=_.vertices,b=_.dimensions,S=(0,g.default)(x,_.holes,b,p.length),w=0,E=x.length/b;w<E;w++){for(var A=[],T=w*b,M=(w+1)*b;T<M;T++)A.push(x[T]);p.add([A])}v.add(S),this.addWalls(e,m,r,h)}},{key:"addWalls",value:function(t,e,n,i){for(var r=this.vertiesDataBuffer,a=this.indicesDataBuffer,o=r.length,l=e.length,c=y.default.mixCoords(t,"polygon",[0,0,0,0].concat((0,u.default)(n),(0,u.default)(i),[0]),2048),f=[],d=[],h=1;h<l;h++){var p=[[].concat(e[h-1]),[].concat(e[h]),[].concat(c[h-1]),[].concat(c[h])],v=(0,b.default)(p[0],p[1],p[2],127,128),m=!0,g=!1,_=void 0;try{for(var x,S=(0,s.default)(p);!(m=(x=S.next()).done);m=!0){var w=x.value;w.splice.apply(w,[6,4].concat((0,u.default)(n))),w.splice(2,3,v[0],v[1],v[2])}}catch(t){g=!0,_=t}finally{try{!m&&S.return&&S.return()}finally{if(g)throw _}}[].push.apply(f,p),d.push(o+0,o+1,o+2,o+1,o+3,o+2),o+=p.length}r.add(f),a.add(d)}}]),t}();e.default=S},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var n={increase:{},decrease:{}},i=[o(t),o(e)],r=i[0],a=i[1],s=l((0,m.default)(r),(0,m.default)(a)),u=s.sameList,c=s.increaseList,f=s.decreaseList;return c.forEach(function(t){n.increase[t]=a[t]}),f.forEach(function(t){n.decrease[t]=r[t]}),u.forEach(function(t){var e=l(r[t],a[t]),i=e.increaseList,o=e.decreaseList;i.forEach(function(e){n.increase[t]?n.increase[t].push(e):n.increase[t]=[e]}),o.forEach(function(e){n.decrease[t]?n.decrease[t].push(e):n.decrease[t]=[e]})}),n}function a(t){if("object"!==(void 0===t?"undefined":(0,p.default)(t))||null===t)return!1;if(Array.isArray(t)){var e=!0,n=!1,i=void 0;try{for(var r,o=(0,d.default)(t);!(e=(r=o.next()).done);e=!0){return!!a(r.value)}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}}return!0}function o(t){var e={};if(Array.isArray(t))t.forEach(function(t){var n=t.type,i=t.features;n&&(e[n]=s(n,i))});else{var n=t.type,i=t.features;n&&(e[n]=s(n,i))}return e}function s(t,e){if(!Array.isArray(e))return g.DEFAULT_BASEMAP[t]&&g.DEFAULT_BASEMAP[t].features;switch(t){case g.MAP_TYPE.vector:var n=[].concat((0,c.default)(e));if(n.includes("building")){var i=n.indexOf("building");n.includes("building3d")?n.splice(i,1):n.splice(i,1,"building3d")}if(n.includes("building2d")&&n.includes("building3d")){var r=n.indexOf("building2d");n.splice(r,1)}return n;case g.MAP_TYPE.satellite:case g.MAP_TYPE.traffic:case g.MAP_TYPE.handdraw:default:return e}}function l(t,e){var n=[],i=[],r=[];return Array.isArray(t)&&Array.isArray(e)&&(e.forEach(function(e){t.includes(e)?n.push(e):i.push(e)}),r=t.filter(function(t){return!n.includes(t)})),{sameList:n,increaseList:i,decreaseList:r}}Object.defineProperty(e,"__esModule",{value:!0}),e.isVerifiedBaseMap=e.formatBaseMap=e.compareBaseMap=void 0;var u=n(18),c=i(u),f=n(25),d=i(f),h=n(19),p=i(h),v=n(17),m=i(v),g=n(290);e.compareBaseMap=r,e.formatBaseMap=o,e.isVerifiedBaseMap=a},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(){return c||(c=new o.default(function(t){u(null,l.default.verSrc,function(e){e&&e.info&&0===e.error&&(l.default.dataVersion.sat=e.info.sat,l.default.dataVersion.tile=e.info["1d"],l.default.dataVersion.scenic=e.info.scenic),t()},function(){t()})})),c}Object.defineProperty(e,"__esModule",{value:!0});var a=n(23),o=i(a);e.default=r;var s=n(22),l=i(s),u=n(351).send,c=void 0},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(32),h=i(d),p=n(4),v=i(p),m=n(513),g=i(m),_=n(53),y=n(29),x=n(214),b=i(x),S=n(44),w=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.default)(this,e),t.type=_.RENDER_LAYER_TYPE.canvasGround;var n=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t));return(0,S.statCn)("CanvasGroundLayer"),n}return(0,v.default)(e,t),(0,u.default)(e,[{key:"_initialize",value:function(t){(0,h.default)(e.prototype.__proto__||(0,a.default)(e.prototype),"_initialize",this).call(this,t),t.canvas||new y.BaseTypeError("CanvasGroundLayer.canvas","HTMLCanvasElement",t.canvas).error(),t.bounds instanceof b.default||new y.BaseTypeError("CanvasGroundLayer.bounds","LatLngBounds",t.bounds).error(),this._mediaSource=t.canvas,this._bounds=t.bounds}},{key:"setCanvas",value:function(t){t||new y.BaseTypeError("CanvasGroundLayer.canvas","HTMLCanvasElement",t).error(),this._mediaSource!==t&&this._updateMediaSource(t)}},{key:"refresh",value:function(){this._resetData()}}]),e}(g.default);e.default=w},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(){return{state:0,transition:function(t){var e="overlay"===t;switch(this.state){case 0:this.state=e?1:0;break;case 1:this.state=e?1:2;break;case 2:this.state=e?1:0}}}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(82),o=i(a),s=n(15),l=i(s),u=n(3),c=i(u),f=n(0),d=i(f),h=n(1),p=i(h),v=n(5),m=i(v),g=n(32),_=i(g),y=n(4),x=i(y),b=n(287),S=i(b),w=n(90),E=n(53),A=n(36),T=i(A),M=n(29),I=n(44),P=n(28),k=i(P),L=n(496),C=i(L),R=T.default.isNumber,D=function(t){function e(t){(0,d.default)(this,e);var n=(0,m.default)(this,(e.__proto__||(0,c.default)(e)).call(this,t));return(0,I.statCn)("GrayTileLayer"),n}return(0,x.default)(e,t),(0,p.default)(e,[{key:"_initialize",value:function(t){var n=(0,l.default)({},t),i=n.colorMap;this.getTileUrl=t.getTileUrl,i&&i instanceof C.default||(new M.BaseTypeError("WeatherLayer.colorMap","GradientColor",i).error(),n.colorMap=null),this.colorMap=n.colorMap||null,this.rgbaFormatter=n.rgbaFormatter||"color.r",this.type=E.RENDER_LAYER_TYPE.grayTile,this.grayType=n.weatherType||E.RENDER_LAYER_TYPE.grayTile,this._bubbleHandler=[],this._mousemoveFSM=r(),(0,_.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"_initialize",this).call(this,t)}},{key:"setZIndex",value:function(t){return R(t)||new M.BaseTypeError("GrayTileLayer.zIndex","number",t).error(),(0,_.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"setZIndex",this).call(this,t)}},{key:"_addSource",value:function(){this._bindBubbleHandler(),this.map&&!this.map.getSource(this.sourceId)&&(this.map.addSource(this.sourceId,{type:w.SOURCE_TYPE.imageTile,tileSize:this.tileSize,data:this.getTileUrl,colorMap:this.colorMap,rgbaFormatter:this.rgbaFormatter,minZoom:this.minDataZoom,maxZoom:this.maxDataZoom}),this._fire("layer",{}))}},{key:"_removeSource",value:function(){(0,_.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"_removeSource",this).call(this),this._removeBubbleHandler()}},{key:"_bindBubbleHandler",value:function(){var t=this;this._bubbleHandler&&(this._bubbleHandler.push(k.default.on(this.map._bubbleMiddleware,"mousemove",function(){t._mousemoveFSM.transition.call(t._mousemoveFSM,"map")})),this._bubbleHandler.push(k.default.on(this.map._bubbleMiddleware,"action",function(e){e&&e.layerId===t.id&&("click"===e.eventType&&t.emit("click",(0,l.default)({},e.mapEvent,{value:t.getValueFromColor(e.pickColor),rgba:(0,o.default)(e.pickColor),type:"click",target:t})),"mousemove"===e.eventType&&(t._mousemoveFSM.transition.call(t._mousemoveFSM,"overlay"),t._emitPixelEvent("hover",t.getValueFromColor(e.pickColor),e.pickColor,e.mapEvent)))})),this._bubbleHandler.push(k.default.on(this.map,"destroy",function(){t.setMap(null)})))}},{key:"_removeBubbleHandler",value:function(){this._bubbleHandler.forEach(function(t){t&&t.remove&&t.remove()})}},{key:"_emitPixelEvent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,0,1],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.emit(t,(0,l.default)({},i,{value:e,rgba:(0,o.default)(n),type:t,target:this}))}},{key:"getValueFromColor",value:function(t){return Number(t[0]||0).toFixed(2)}}]),e}(S.default);e.default=D},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(R(t)){var e=t.id,n=void 0===e?(0,b.uniqueId)():e,i=t.paths;return t.id=n,C(i)?i.flat(3).every(function(t,e){var n=D(t);return n||new M.ClassTypeError("HighlightGeometry.path["+e+"]","LatLng",t).error(),n}):(new M.BaseTypeError("HighlightGeometry.paths","Array",i).error(),!1)}return new M.BaseTypeError("HighlightGeometry","Object",t).error(),!1}Object.defineProperty(e,"__esModule",{value:!0});var a=n(18),o=i(a),s=n(95),l=i(s),u=n(3),c=i(u),f=n(0),d=i(f),h=n(1),p=i(h),v=n(5),m=i(v),g=n(4),_=i(g),y=n(265),x=i(y),b=n(10),S=n(90),w=n(158),E=n(53),A=n(36),T=i(A),M=n(29),I=n(233),P=i(I),k=n(146),L=n(225),C=T.default.isArray,R=T.default.isObject,D=T.default.isValidLatLng,N=new L.ExtrudablePolygonStyle({color:"#ffffff",showBorder:!1,extrudeHeight:1e3}),B=function(t){function e(t){return(0,d.default)(this,e),t.type=E.RENDER_LAYER_TYPE.highlight,t.level=k.LAYER_LEVEL.POST_PROCESS,(0,m.default)(this,(e.__proto__||(0,c.default)(e)).call(this,t))}return(0,_.default)(e,t),(0,p.default)(e,[{key:"_initialize",value:function(t){var e=t.geometries,n=void 0===e?[]:e,i=new l.default;this.sourceId=this.id,this.maskGeoMap=i,this.highlightColor=new P.default("rgba(0, 0, 0, 0)").toArray(),this.shadeColor=new P.default("rgba(0, 0, 0, 0.4)").toArray(),n&&n.lenght>0&&this.add(n)}},{key:"_addSource",value:function(){this.map&&!this.map.getSource(this.sourceId)&&this.map.addSource(this.sourceId,{type:S.SOURCE_TYPE.geojson,data:{type:w.GEOMETRY_TYPES.HIGHLIGHT,geometries:[].concat((0,o.default)(this.maskGeoMap.values())),styles:{default:N,highlightColor:this.highlightColor,shadeColor:this.shadeColor}}})}},{key:"_removeSource",value:function(){this.map&&this.map.removeSource(this.sourceId)}},{key:"add",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return C(e)?(e.forEach(function(e){if(r(e)){var n=e.id;t.maskGeoMap.has(n)?console.warn("HighlightLayer.add: 已存在id为"+n+"的MaskGeometry对象。"):t.maskGeoMap.set(n,e)}}),this._updateData(),this):(new M.BaseTypeError("HighlightLayer.add()传入参数","Array",e).error(),this)}},{key:"get",value:function(t){return this.maskGeoMap.get(t)}},{key:"getAll",value:function(){return[].concat((0,o.default)(this.maskGeoMap.values()))}},{key:"remove",value:function(t){if(!C(t))return new M.BaseTypeError("HighlightLayer.remove()传入参数","Array",t).error(),this;var e=this.maskGeoMap;return t.forEach(function(t){e.has(t)?e.delete(t):console.warn("HighlightLayer.remove: 不存在id为"+t+"的MaskGeometry对象。")}),this._updateData(),this}},{key:"clear",value:function(){return this.maskGeoMap.clear(),this._updateData(),this}},{key:"update",value:function(t,e){var n=e.highlightColor,i=void 0===n?"rgba(0, 0, 0, 0)":n,a=e.shadeColor,o=void 0===a?"rgba(0, 0, 0, 0.4)":a;if(!C(t))return new M.BaseTypeError("HighlightLayer.update()传入参数","Array",t).error(),this;var s=this.maskGeoMap;return t.forEach(function(t){r(t)&&(t.styleId="default",s.set(t.id,t))}),this.highlightColor=new P.default(i).toArray(),this.shadeColor=new P.default(o).toArray(),this._updateData(),this}},{key:"_updateData",value:function(){this.map&&this.map.getSource(this.sourceId).setData({type:w.GEOMETRY_TYPES.HIGHLIGHT,geometries:[].concat((0,o.default)(this.maskGeoMap.values())),styles:{default:N,highlightColor:this.highlightColor,shadeColor:this.shadeColor}})}}]),e}(x.default);e.default=B},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(32),h=i(d),p=n(4),v=i(p),m=n(513),g=i(m),_=n(53),y=n(29),x=n(214),b=i(x),S=n(44),w=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.default)(this,e),t.type=_.RENDER_LAYER_TYPE.imageGround;var n=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t));return(0,S.statCn)("ImageGroundLayer"),n}return(0,v.default)(e,t),(0,u.default)(e,[{key:"_initialize",value:function(t){var n=this;(0,h.default)(e.prototype.__proto__||(0,a.default)(e.prototype),"_initialize",this).call(this,t),t.src||new y.BaseTypeError("ImageGroundLayer.src","URL",t.src).error(),t.bounds instanceof b.default||new y.BaseTypeError("ImageGroundLayer.bounds","LatLngBounds",t.bounds).error();var i=new Image;this._image=i,i.crossOrigin="anonymous",i.onload=function(){n._mediaSource=i,n._bounds=t.bounds;var e=n.map;e&&n.setMap(null),n.setMap(e),n.emit("image_loaded")},i.onerror=function(){console.error("图片资源获取失败: "+t.src)},i.src=t.src}},{key:"setSrc",value:function(t){var e=this;t||new y.BaseTypeError("ImageGroundLayer.src","URL",t).error(),this._image.src!==t&&(this._image.onload=function(){e._updateMediaSource(e._image),e.emit("image_loaded")},this._image.src=t)}}]),e}(g.default);e.default=w},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(32),h=i(d),p=n(4),v=i(p),m=n(265),g=i(m),_=n(90),y=n(146),x=n(53),b=function(t){function e(t){return(0,s.default)(this,e),t.level=t.type!==x.RENDER_LAYER_TYPE.indoorPoi?y.LAYER_LEVEL.BUILDING:y.LAYER_LEVEL.OVERLAY_NAA,t.zIndex=0,(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t))}return(0,v.default)(e,t),(0,u.default)(e,[{key:"_initialize",value:function(t){(0,h.default)(e.prototype.__proto__||(0,a.default)(e.prototype),"_initialize",this).call(this,t),this.buildingData=t.buildingData,this.filter=t.type,this.sourceId||(this.sourceId=this.id)}},{key:"_addSource",value:function(){this.map&&!this.map.getSource(this.sourceId)&&this.map.addSource(this.sourceId,{type:_.SOURCE_TYPE.indoor,data:this.buildingData})}},{key:"_removeSource",value:function(){this.map&&this.map.removeSource(this.sourceId)}}]),e}(g.default);e.default=b},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(32),h=i(d),p=n(4),v=i(p),m=n(265),g=i(m),_=n(90),y=function(t){function e(t){return(0,s.default)(this,e),(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t))}return(0,v.default)(e,t),(0,u.default)(e,[{key:"_initialize",value:function(t){(0,h.default)(e.prototype.__proto__||(0,a.default)(e.prototype),"_initialize",this).call(this,t),this.sourceData=t.sourceData,this.sourceId=this.id,this.minimumClusterSize=t.minimumClusterSize,this.gridSize=t.gridSize,this.averageCenter=t.averageCenter}},{key:"_addSource",value:function(){this.map&&!this.map.getSource(this.sourceId)&&this.map.addSource(this.sourceId,{type:_.SOURCE_TYPE.geoTask,data:this.sourceData,workerOptions:{gridSize:this.gridSize,minimumClusterSize:this.minimumClusterSize,averageCenter:this.averageCenter},maxZoom:this.maxZoom})}},{key:"_removeSource",value:function(){this.map&&this.map.removeSource(this.sourceId)}}]),e}(g.default);e.default=y},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(17),a=i(r),o=n(3),s=i(o),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),p=n(32),v=i(p),m=n(4),g=i(m),_=n(398),y=i(_),x=n(90),b=n(53),S=n(36),w=i(S),E=n(29),A=n(233),T=i(A),M=n(44),I=n(22),P=n(290),k=w.default.isNumber,L=w.default.isArray,C=["#13b06a","#e9ab1d","#e05649","#6c120a"],R=["#6CC356","#FAB835","#F94954","#B90149"],D=[80,30,10,5],N=function(t){function e(t){(0,u.default)(this,e),t.type=t.type||b.RENDER_LAYER_TYPE.trafficBase;var n=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t));return(0,M.statCn)(t.type===b.RENDER_LAYER_TYPE.trafficBase?"TrafficBaseTileLayer":"TrafficFlowTileLayer"),n}return(0,g.default)(e,t),(0,f.default)(e,[{key:"_initialize",value:function(t){(0,v.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"_initialize",this).call(this,t),this.sourceId=this.sourceId||this.id,this.baseColor=R.map(function(t){return new T.default(t).toUpArray()}),this.setColor(t.flowColor),this.setSpeed(t.flowSpeed),this.setFilter(t.filter)}},{key:"setZIndex",value:function(t){return k(t)||new E.BaseTypeError("TrafficTileLayer.zIndex","number",t).error(),(0,v.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"setZIndex",this).call(this,t)}},{key:"setColor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;L(t)||(new E.BaseTypeError("flowColor","Array",t).error(),t=C),4!==t.length&&(console.error("flowColor 格式错误：需传入长度为4的数组"),t=C),this.flowColor=t.map(function(t){return new T.default(t).toUpArray()})}},{key:"setSpeed",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D;L(t)||(new E.BaseTypeError("flowSpeed","Array",t).error(),t=D),4!==t.length&&(console.error("flowSpeed 格式错误：需传入长度为4的数组"),t=D),this.flowSpeed=t}},{key:"setFilter",value:function(t){var e=[];L(t)?t.forEach(function(t){(0,a.default)(P.TRAFFIC_ROAD_TYPE).includes(t)?e.push(t):new E.EnumError("filter",(0,a.default)(P.TRAFFIC_ROAD_TYPE),t).error()}):(new E.BaseTypeError("TrafficTileLayer.filter","array",t).error(),e=P.DEFAULT_BASEMAP.traffic.filter.slice()),this.trafficFilter=e.slice()}},{key:"_addSource",value:function(){this.map&&this.map.keepHighFps(!0),this.map&&!this.map.getSource(this.sourceId)&&(this.map.addSource(this.sourceId,{type:x.SOURCE_TYPE.traffic,tileSize:this.tileSize,data:function(t,e,n){var i=(t+e)%I.trafficSrc.length;return I.trafficSrc[i]+"?x="+t+"&y="+(Math.pow(2,n)-1-e)+"&z="+n+"&type=jsonp&time="+(new Date).getTime()},minZoom:this.minDataZoom,maxZoom:this.maxDataZoom,baseColor:this.baseColor,opacity:this.opacity,flowColor:this.flowColor,flowSpeed:this.flowSpeed,filter:this.trafficFilter}),this._fire("layer",{}))}},{key:"_updateFilter",value:function(t){if(t!==this.trafficFilter&&(this.setFilter(t||P.DEFAULT_BASEMAP.traffic.filter),this.map)){var e=this.map.getSource(this.sourceId);if(e&&(e.setFilter(this.trafficFilter),e.reload()),this.type===b.RENDER_LAYER_TYPE.trafficFlow){var n=this.map.renderEngine.getImageCache(this.id);n&&n.clear()}else{this.map.renderEngine.painters.trafficBase.clearStore()}this._fire("layer",{})}}},{key:"_removeSource",value:function(){this.map&&this.map.keepHighFps(!1),this.map&&this.map.removeSource(this.sourceId),this._fire("source_removed",{})}}]),e}(y.default);e.default=N},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=t.params;e.hasOwnProperty("version")||(e.version="1.3.0"),e.hasOwnProperty("CRS")||(e.CRS="EPSG:3857");var n="";for(var i in e)n=n+"&"+i+"="+e[i];return function(e,i,r){var a=new _(0,0),o=new _(0,0),s=Math.pow(2,r-1);return a.x=(e/s-1)*x,a.y=(1-(i+1)/s)*x,o.x=((e+1)/s-1)*x,o.y=(1-i/s)*x,t.url+"?REQUEST=GetMap&SERVICE=WMS"+n+"&WIDTH=256&HEIGHT=256&FORMAT=image/png&TRANSPARENT=true&BBOX="+a.x+","+a.y+","+o.x+","+o.y}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),o=i(a),s=n(0),l=i(s),u=n(5),c=i(u),f=n(4),d=i(f),h=n(287),p=i(h),v=n(245),m=i(v),g=n(44),_=n(75),y=m.default[1],x=y/2,b=function(t){function e(t){(0,l.default)(this,e),t.getTileUrl=r(t);var n=(0,c.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t));return(0,g.statCn)("WMSLayer"),n}return(0,d.default)(e,t),e}(p.default);e.default=b},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=t.params,n="";e.hasOwnProperty("version")||(e.version="1.0.0");for(var i in e)n=n+"&"+i+"="+e[i];return function(i,r,a){var o="geoserver"===t.service?e.tileMatrixSet+":"+a:a;return t.url+"?Request=GetTile&Service=WMTS"+n+"&Format=image/png&TileMatrix="+o+"&TileRow="+r+"&TileCol="+i}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),o=i(a),s=n(0),l=i(s),u=n(5),c=i(u),f=n(4),d=i(f),h=n(287),p=i(h),v=n(44),m=function(t){function e(t){(0,l.default)(this,e),t.getTileUrl=r(t);var n=(0,c.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t));return(0,v.statCn)("WMTSLayer"),n}return(0,d.default)(e,t),e}(p.default);e.default=m},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){return new Rt[e.type](t,e,n)}function a(t,e){return t instanceof Array?{imgBase64List:[].concat(t).concat(e),extOffset:t.length}:{imgBase64List:[t,e],extOffset:1}}function o(t,e){var n=e.id;return new k.default(function(e,i){if(t){var r=new Image;r.onload=function(){e(r)},r.onerror=function(){i(n)},r.src="data:img/png;base64,"+t}else e(null)})}function s(t){var e=document.createElement("canvas"),n=[],i=0,r=0;if(t.forEach(function(t){t&&(i=Math.max(t.width,i),r+=t.height)}),e.width=i,e.height=r,i&&r){var a=e.getContext("2d"),o=0;return t.forEach(function(t){n.push(o),t&&(a.drawImage(t,0,o),o+=t.height)}),{canvas:e,yOffset:n}}return{}}function l(t,e){if(t){if(Array.isArray(t))return t.find(function(t){return t.type===e});return t.type===e?t:null}}function u(t){return!(!t||t.type!==dt.MAP_TYPE.satellite)}var c,f=n(94),d=i(f),h=n(27),p=i(h),v=n(25),m=i(v),g=n(115),_=i(g),y=n(110),x=i(y),b=n(17),S=i(b),w=n(19),E=i(w),A=n(228),T=i(A),M=n(227),I=i(M),P=n(23),k=i(P),L=n(3),C=i(L),R=n(0),D=i(R),N=n(1),B=i(N),O=n(5),F=i(O),z=n(4),V=i(z),U=n(164),G=i(U),H=n(515),Y=n(653),j=i(Y),W=n(657),X=i(W),Z=n(725),q=i(Z),Q=n(521),J=i(Q),K=n(705),$=i(K),tt=n(708),et=i(tt),nt=n(712),it=i(nt),rt=n(710),at=i(rt),ot=n(707),st=i(ot),lt=n(715),ut=i(lt),ct=n(90),ft=n(53),dt=n(290),ht=n(689),pt=n(308),vt=n(727),mt=i(vt),gt=n(728),_t=n(526),yt=n(401),xt=n(690),bt=i(xt),St=n(537),wt=n(823),Et=i(wt),At=n(396),Tt=n(510),Mt=n(146),It=n(29),Pt=n(512),kt=n(93),Lt=n(22),Ct=n(10),Rt=(c={},(0,G.default)(c,ct.SOURCE_TYPE.vector,q.default),(0,G.default)(c,ct.SOURCE_TYPE.geojson,J.default),(0,G.default)(c,ct.SOURCE_TYPE.geoTask,$.default),(0,G.default)(c,ct.SOURCE_TYPE.imageTile,et.default),(0,G.default)(c,ct.SOURCE_TYPE.indoor,it.default),(0,G.default)(c,ct.SOURCE_TYPE.ground,st.default),(0,G.default)(c,ct.SOURCE_TYPE.traffic,ut.default),c),Dt=function(t){function e(t,n){(0,D.default)(this,e);var i=(0,F.default)(this,(e.__proto__||(0,C.default)(e)).call(this));return i.map=n,i._visualPlugins={},i._layers={},i._sources={},i._stylePromise=null,i.dispatcher=new j.default(X.default,i,t.workerCount),i.iconsLoader=new Et.default,i._mapStyleId=t.mapStyleId,i._finalUsedMapStyleId=pt.STYLE_ID[i._mapStyleId],i._lastStyleId=pt.STYLE_ID[i._mapStyleId],i._baseMap=null===t.baseMap?null:t.baseMap||dt.DEFAULT_BASEMAP.vector,i._baseLayerList=[],i._setEventedParent(n,null),i._on("loaderror",function(t){var e=t.tile,n=t.error;console.error("加载瓦片发生错误："+e.coord.id,e,n)}),(0,bt.default)().then(function(){i.initBaseLayer()}),i.loadStyle().then(function(t){var e=t.styleId;i._fire("mapstyle_changed",{styleId:e})}).catch(function(){}),i}return(0,V.default)(e,t),(0,B.default)(e,[{key:"getStyleIdPromise",value:function(){return(0,mt.default)(this._mapStyleId,this.map)}},{key:"loadStyle",value:function(){var t=this;if(!this._stylePromise){var e=!1;this._stylePromise=this.getStyleIdPromise().then(function(n){if(e)return k.default.reject("加载样式aborted");t._finalUsedMapStyleId=n,t._lastStyleId=n;var i=(0,gt.loadPoiIconFile)(n,Lt.iconSrc).then(function(e){return t.iconsLoader&&t.iconsLoader.load(e)}),r=(0,_t.loadPoiIconIndexFile)(n,Lt.iconIndexSrc),a=(0,yt.loadStyleFile)(n,n);return k.default.all([i,r,a]).then(function(){return e?k.default.reject("加载样式aborted"):{styleId:n,iconInfo:{scale:t.iconsLoader&&t.iconsLoader.scale,w:t.iconsLoader&&t.iconsLoader.w,h:t.iconsLoader&&t.iconsLoader.h}}})}),this._stylePromise.abort=function(){e=!0}}return this._stylePromise}},{key:"setMapStyleId",value:function(){function t(t){return e.apply(this,arguments)}var e=(0,I.default)(T.default.mark(function t(e){var n,i=this;return T.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e!==this._mapStyleId||"config"===this._finalUsedMapStyleId){t.next=2;break}return t.abrupt("return");case 2:return this._mapStyleId=e,n=this._finalUsedMapStyleId,this._stylePromise.abort(),this._stylePromise=null,this.loadStyle().then(function(t){var e=t.styleId,r=t.iconInfo;e!==n&&i.resetStyle(e,r)}),t.abrupt("return",this);case 8:case"end":return t.stop()}},t,this)}));return t}()},{key:"loadStyleConfig",value:function(t){var e=this;if(!this._stylePromise){var n=t.style,i=t.icon,r=void 0===i?null:i,a=t.iconIndex,o=void 0===a?null:a;"config"!==this._finalUsedMapStyleId&&(this._lastStyleId=this._finalUsedMapStyleId,this._finalUsedMapStyleId="config");var s=!1,l=(0,yt.setStyleConfig)(n,"config"),u=void 0,c=void 0;r&&o?(u={data:r},c={data:o}):(u={styleId:0,iconSrc:Lt.iconSrc},c={styleId:0,iconIndexSrc:Lt.iconIndexSrc});var f=(0,gt.setPoiIcon)(u).then(function(t){return e.iconsLoader.load(t)}),d=(0,_t.setPoiIconIndex)(c);this._stylePromise=k.default.all([l,f,d]).then(function(){return s?k.default.reject("加载样式aborted"):{styleId:"config",iconInfo:{scale:e.iconsLoader.scale,w:e.iconsLoader.w,h:e.iconsLoader.h}}}),this._stylePromise.abort=function(){s=!0}}return this._stylePromise}},{key:"setMapStyleConfig",value:function(t){var e=this,n=t.style,i=t.icon,r=void 0===i?void 0:i,a=t.iconIndex,o=void 0===a?void 0:a;return n?r&&"string"!=typeof r?void console.error("icon属性不合法"):o&&"object"!==(void 0===o?"undefined":(0,E.default)(o))?void console.error("iconIndex属性不合法"):(this._stylePromise.abort(),this._stylePromise=null,void this.loadStyleConfig(t).then(function(t){var n=t.styleId,i=t.iconInfo;e.resetStyle(n,i)})):void console.error("setMapStyleConfig中style属性不合法")}},{key:"resetStyle",value:function(t,e){var n=this,i=[];(0,S.default)(this._sources).forEach(function(t){n._sources[t].id&&n._sources[t].id.indexOf("vector_source")>=0&&i.push(n._sources[t])}),i.length>0&&i.forEach(function(n){n.setStyleAndIconInfo(t,e),n.clearTiles()}),this._fire("mapstyle_changed",{styleId:t})}},{key:"initBaseLayer",value:function(t){var e=this;if(this._baseMap||t){if(t||(t=this._baseMap),Array.isArray(t))return void t.forEach(function(t){e.initBaseLayer(t)});switch(t.type){case dt.MAP_TYPE.handdraw:(0,H.createHanddrawLayer)(this.map);break;case dt.MAP_TYPE.satellite:(0,H.createSatelliteLayer)(this.map,{features:t.features});break;case dt.MAP_TYPE.traffic:(0,H.createTrafficLayer)(this.map,t);break;case dt.MAP_TYPE.vector:default:(0,H.createVectorLayer)(this.map,{features:t.features,buildingRange:t.buildingRange})}}}},{key:"resetBaseLayer",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt.DEFAULT_BASEMAP.vector;if(!(0,ht.isVerifiedBaseMap)(e))return console.error("setBaseMap传入的参数不合法",e),this;var n=Array.isArray(e)?e.map(function(t){return t.type}):[e.type];null===this._baseMap&&(this._baseMap={});var i=(0,ht.compareBaseMap)(this._baseMap,e),r=i?(0,x.default)(i.increase):[],a=i?(0,x.default)(i.decrease):[];a.length>0&&this._handleDecreaseBaseMap(a),r.length>0&&this._handleIncreaseBaseMap(r,e);var o=(0,ht.formatBaseMap)(e).vector;o&&0===o.length?this._setSourceFrozen("vector_source",!0):this._setSourceFrozen("vector_source",!1);var s=(0,_.default)(dt.SATELLITE_LAYER_ID),u=void 0,c=0;return n.forEach(function(n){switch(n){case dt.MAP_TYPE.handdraw:u=t.getLayer(dt.MAP_TYPE.handdraw),u&&u.setZIndex(c+=1);break;case dt.MAP_TYPE.satellite:s.forEach(function(e){(u=t.getLayer(e))&&u.setZIndex(c+=1)});break;case dt.MAP_TYPE.traffic:(0,_.default)(dt.TRAFFIC_LAYER_ID).forEach(function(n){u=t.getLayer(n);var i=l(e,dt.MAP_TYPE.traffic);u&&(u._updateFilter(i&&i.filter),i&&i.hasOwnProperty("opacity")&&u.setOpacity(i.opacity),u.setZIndex(c+=1))});break;case dt.MAP_TYPE.vector:u=t.getLayer(dt.VECTOR_LAYER_ID.base),u&&u.setZIndex(c+=1)}}),this._baseMap=e,this}},{key:"_handleIncreaseBaseMap",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=[],r=!0,a=!1,o=void 0;try{for(var s,u=(0,m.default)(t);!(r=(s=u.next()).done);r=!0)!function(){var t=(0,p.default)(s.value,2),r=t[0],a=t[1],o=[];switch(r){case dt.MAP_TYPE.traffic:if(a.forEach(function(t){e._layers[dt.TRAFFIC_LAYER_ID[t]]?(e._setLayerVisible(dt.TRAFFIC_LAYER_ID[t],!0),e._setSourceFrozen(dt.TRAFFIC_LAYER_ID[t],!1)):o.push(t)}),o.length>0){var u=l(n,dt.MAP_TYPE.traffic);i.push(u)}break;case dt.MAP_TYPE.satellite:var c=r===dt.MAP_TYPE.satellite?dt.SATELLITE_LAYER_ID:dt.TRAFFIC_LAYER_ID;a.forEach(function(t){e._layers[c[t]]?(e._setLayerVisible(c[t],!0),e._setSourceFrozen(c[t],!1)):o.push(t)}),o.length>0&&i.push({type:r,features:o});break;case dt.MAP_TYPE.handdraw:e._layers[r]?(e._setLayerVisible(dt.MAP_TYPE.handdraw,!0),e._setSourceFrozen(dt.MAP_TYPE.handdraw,!1)):i.push({type:r});break;case dt.MAP_TYPE.vector:a.forEach(function(t){switch(t){case ft.BASE_LAYER_TYPE.base:e._layers[dt.VECTOR_LAYER_ID.base]?e._setLayerVisible(dt.VECTOR_LAYER_ID.base,!0):o.push(t);break;case ft.BASE_LAYER_TYPE.arrow:e._layers[dt.VECTOR_LAYER_ID.arrow]?e._setLayerVisible(dt.VECTOR_LAYER_ID.arrow,!0):o.push(t);break;case ft.BASE_LAYER_TYPE.building2d:case ft.BASE_LAYER_TYPE.building3d:o.push(t);break;case ft.BASE_LAYER_TYPE.point:case ft.BASE_LAYER_TYPE.label:var n=e._layers[dt.VECTOR_LAYER_ID.poi],i=t===ft.BASE_LAYER_TYPE.point?ft.BASE_LAYER_TYPE.label:ft.BASE_LAYER_TYPE.point;if(n){var r=t+"_"+n.id,a=i+"_"+n.id;n.hasChild(r)?(n.getChild(r).setVisible(!0),e.map.drawManager.updatePlace()):(n.hasChild(a)&&!1!==n.getChild(a).visible&&o.push(i),n.setMap(null),o.push(t))}else o.push(t)}}),o.length>0&&i.push({type:r,features:o})}}()}catch(t){a=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(a)throw o}}this.initBaseLayer(i)}},{key:"_handleDecreaseBaseMap",value:function(t){var e=this,n=!0,i=!1,r=void 0;try{for(var a,o=(0,m.default)(t);!(n=(a=o.next()).done);n=!0){var s=(0,p.default)(a.value,2),l=s[0],u=s[1];switch(l){case dt.MAP_TYPE.traffic:case dt.MAP_TYPE.satellite:if("break"===function(){var t=l===dt.MAP_TYPE.satellite?dt.SATELLITE_LAYER_ID:dt.TRAFFIC_LAYER_ID,n=(0,S.default)(t);return u.forEach(function(i){n.includes(i)&&(e._setLayerVisible(t[i],!1),e._setSourceFrozen(t[i],!0))}),"break"}())break;case dt.MAP_TYPE.handdraw:this._setLayerVisible(dt.MAP_TYPE.handdraw,!1),this._setSourceFrozen(dt.MAP_TYPE.handdraw,!0);break;case dt.MAP_TYPE.vector:u.forEach(function(t){switch(t){case ft.BASE_LAYER_TYPE.base:e._setLayerVisible(dt.VECTOR_LAYER_ID.base,!1);break;case ft.BASE_LAYER_TYPE.arrow:e._setLayerVisible(dt.VECTOR_LAYER_ID.arrow,!1);break;case ft.BASE_LAYER_TYPE.building2d:case ft.BASE_LAYER_TYPE.building3d:var n=e._layers[dt.VECTOR_LAYER_ID.building];n&&n.setMap(null);break;case ft.BASE_LAYER_TYPE.point:case ft.BASE_LAYER_TYPE.label:var i=e._layers[dt.VECTOR_LAYER_ID.poi];i&&i.hasChild(t+"_"+i.id)&&i.getChild(t+"_"+i.id).setVisible(!1)}})}}}catch(t){i=!0,r=t}finally{try{!n&&o.return&&o.return()}finally{if(i)throw r}}}},{key:"_setLayerVisible",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._layers[t];return n&&n.setVisible(e),this}},{key:"_setSourceFrozen",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getSource(t);return n&&(e?n.freeze():n.unfreeze()),this}},{key:"getFinalUsedMapStyleId",value:function(){return this._finalUsedMapStyleId}},{key:"getSource",value:function(t){return this._sources[t]}},{key:"addSource",value:function(t,e){var n=r(t,e,this.dispatcher);this._sources[t]=n,n._setEventedParent(this,function(){return{source:n,sourceId:t}}),n.onAdd(this.map)}},{key:"removeSource",value:function(t){if(this._sources[t]){var e=this._sources[t];delete this._sources[t],e._setEventedParent(null),e.clear(),e.onRemove&&e.onRemove(this.map)}}},{key:"addIndoorIndexSource",value:function(t){return new at.default(t,this.dispatcher)}},{key:"removeLayer",value:function(t){var e=this._layers[t];if(!e)return void this._fire("error",{error:new Error("The layer '"+t+"' does not exist in map")});e._setEventedParent(null),delete this._layers[t]}},{key:"getLayer",value:function(t){return this._layers[t]}},{key:"findLayer",value:function(t){return(0,_.default)(this._layers).find(t)}},{key:"addLayer",value:function(t){this._layers[t.id]=t,t._setEventedParent(this,{layer:{id:t.id}})}},{key:"_serializeLayers",value:function(){var t=[],e=(0,S.default)(this._layers),n=!0,i=!1,r=void 0;try{for(var a,o=(0,m.default)(e);!(n=(a=o.next()).done);n=!0){var s=a.value,l=this._layers[s];t.push(l)}}catch(t){i=!0,r=t}finally{try{!n&&o.return&&o.return()}finally{if(i)throw r}}return t.length>1&&t.sort(function(t,e){return t.rank-e.rank}),t}},{key:"getDrawLayers",value:function(){return(0,_.default)(this._layers).reduce(function(t,e){return t.concat(e.flat())},[])}},{key:"getDrawSource",value:function(t){var e=this,n={};return Ct.forIn(this._layers,function(i,r){var a=r.sourceId||r.layerSourceId,o=e.map.getSource(a);o&&t>=r.minZoom&&t<=r.maxZoom&&(n[a]=o)}),n}},{key:"_updateSource",value:function(t,e,n){var i=this.getDrawSource(t.zoom);Ct.forIn(i,function(i,r){r&&!0!==r.isFrozen&&r.update(t,e,n)})}},{key:"updateIndoorData",value:function(t,e){Ct.forIn(this._sources,function(n,i){i.updateIndoorData&&i.updateIndoorData(t,e)})}},{key:"moveLayer",value:function(t,e){var n=(0,_.default)(Mt.LAYER_LEVEL);if(!n.includes(e))return void new It.EnumError("level",n,e).error();var i=this._layers[t]||this._visualPlugins[t];if(i){if(i.setLevel(e),(0,Pt.hasBorderLayer)(i.type)){var r=t+"_border";this.moveLayer(r,e)}}else console.log("moveLayer: 当前地图不存在此图层 "+t)}},{key:"update",value:function(){}},{key:"addVisualPlugin",value:function(t){var e=t.id;if(this._visualPlugins[e])return void console.warn("The visualPlugin '"+e+"' already exists in map");this._visualPlugins[e]=t}},{key:"removeVisualPlugin",value:function(t){if(!this._visualPlugins[t])return void console.warn("The visualPlugin '"+t+"' does not exist in map");delete this._visualPlugins[t]}},{key:"getPlugins",value:function(){return(0,_.default)(this._visualPlugins)}},{key:"_sortPlugins",value:function(t,e){var n=(0,_.default)(t);return Ct.bubbleSort(n,e),n}},{key:"uploadTileImage",value:function(t,e,n){var i=this,r=e.tileId,l=a(e.imgBase64,e.extImgBase64),u=l.imgBase64List,c=l.extOffset;if(r&&u.length){this.map.renderEngine.painters.symbol.preDraw({iconsLoader:this.iconsLoader});var f=this.map.renderEngine.textCache;if(f&&!f.tiles[r]){var d=new St.ScheduleTaskNode;d.tileId=r;var h=function(){if(f.tiles[r])return n(null,null),null;var t=null,a=!1,l=!1,d=null,h=[];if((0,Tt.isInterceptForBase64)(i.map.getZoom(),e.zoom,e.maxDataZoom))return a=!0,l=!0,n(null,null),null;var p=u.map(function(t,e){return o(t,{id:r+"_"+e})});return k.default.all(p).then(function(e){var n=s(e),i=n.canvas,r=n.yOffset;t=i,h=r,a=!0,d&&d()}).catch(function(t){console.error("img upload failed ",t)}),d=function(){if(a&&!l)return(0,Tt.isInterceptForGPU)(i.map&&i.map.getZoom(),e.zoom,e.maxDataZoom)?(l=!0,n(null,null),null):t?(f.addImage(r,t,function(){t=null,f.tiles[r].yOffsetList=h,l=!0,n(null,{yOffsetList:h,extOffset:c})}),d):(n(null,{yOffsetList:h,extOffset:c}),null);if(l){if((0,Tt.isInterceptForTileData)(i.map.getZoom(),e.zoom,e.maxDataZoom))return null;var o=i.getSource(e.sourceId),s=o&&o.getDrawItems(),u=s&&s[r],p=u&&u.getData();return p?(p[ft.BASE_LAYER_TYPE.text]||(p[ft.BASE_LAYER_TYPE.text]={},p[ft.BASE_LAYER_TYPE.text][r]=t&&t.toDataURL()||""),null):d}return d},d.tileId=r,null};h.tileId=r,d.setCallback(h),d.addToQueue(this.map.fpsManager.scheduleTaskQueue)}else f&&n(null,{yOffsetList:f.tiles[r].yOffsetList,extOffset:c})}else n(null,null)}},{key:"addGlyphs",value:function(t,e,n,i){if(e.glyphs&&e.glyphs.length>0){var r=this.map.renderEngine.glyphManager.generateAtlas(e.glyphs,i||{});n(null,{mapping:(0,d.default)(r.mapping)})}else n(null,{mapping:"{}"})}},{key:"addMarkers",value:function(t,e,n){e.markerSrcs&&e.markerSrcs.length>0?this.map.renderEngine.markerManager.generateAtlas(e.markerSrcs,e.glyphs).then(function(t){n(null,{mapping:(0,d.default)(t)})}).catch(function(t){console.error(t),n(null,{mapping:"{}"})}):n(null,{mapping:"{}"})}},{key:"addBillboards",value:function(t,e,n){if(e.markerSrcs&&e.markerSrcs.length>0||e.tileId){var i=e.markerSrcs,r=null;e.tileId&&(r=JSON.parse(e.billboardData),i=r.map(function(t){return t.text})),this.map.renderEngine.markerManager.generateAtlas(i,null,{tileId:e.tileId,tileImage64:e.tileImage64,billboardData:r}).then(function(t){n(null,{mapping:(0,d.default)(t)})}).catch(function(t){console.error(t),n(null,{mapping:"{}"})})}else n(null,{mapping:"{}"})}},{key:"uploadTileTexture",value:function(t,e,n){var i=this;if(e.billboard||e.glyphs){var r=new k.default(function(n){i.addBillboards(t,e.billboard,function(t,e){n(e.mapping)})}),a={glyphs:[]},o={glyphs:[]};e.glyphs&&e.glyphs.forEach(function(t){"bold"===t.font_weight?o.glyphs.push(t.text):a.glyphs.push(t.text)});var s=new k.default(function(e){i.addGlyphs(t,a,function(t,n){e(n.mapping)},{fontWeight:"normal"})}),l=new k.default(function(e){i.addGlyphs(t,o,function(t,n){e(n.mapping)},{fontWeight:"bold"})});k.default.all([r,s,l]).then(function(t){n(null,{billboardMapping:t[0],glyphMapping:t.slice(1)})})}else n(null,{billboardMapping:"{}",glyphMapping:"{}"})}},{key:"getIndoorGlyphInfo",value:function(t,e,n){var i=this;if(e.pointInfoSet||e.glyphList||e.iconSrcList){var r=new k.default(function(n){i.addMarkers(t,{markerSrcs:e.iconSrcList},function(t,e){n(e.mapping)})}),a=new k.default(function(n){i.addGlyphs(t,{glyphs:e.glyphList},function(t,e){n(e.mapping)})}),o=JSON.parse(e.indoorStyle),s=new k.default(function(t){var n=document.createElement("canvas"),i=n.getContext("2d"),r=JSON.parse(e.pointInfoSet),a={};(0,S.default)(r).forEach(function(t){var e=parseInt(t.replace("zoom",""),10);a[e]=r[t].filter(function(t){return!!t}).map(function(t){return t.map(function(t){return(0,At.getPoiRect)(t,e,i,o)})})}),t((0,d.default)(a))});k.default.all([r,a,s]).then(function(t){n(null,{iconMapping:t[0],glyphMapping:t[1],poiMapping:t[2]})})}else n(null,{iconMapping:"{}",glyphMapping:"{}",poiMapping:"{}"})}},{key:"destroy",value:function(){var t=this;(0,S.default)(this._visualPlugins).forEach(function(e){t._visualPlugins[e].remove()}),this._visualPlugins=null,(0,_.default)(this._layers).forEach(function(t){t.setMap(null)}),this._layers=null,(0,S.default)(this._sources).forEach(function(e){t.removeSource(e)}),this._sources=null,this._stylePromise=null,this.dispatcher.destroy(),this.iconsLoader=null,this._mapStyleId=null,this._finalUsedMapStyleId=null,this._lastStyleId=null,this._baseMap=null,this._clearAllListeners(),this.map=null}},{key:"resetVectorBuildingRange",value:function(t){var e=this;Array.isArray(t)?t.forEach(function(t){"vector"===t.type&&(0,H.resetBuildingRange)(e.map,t.buildingRange)}):"vector"===t.type&&(0,H.resetBuildingRange)(this.map,t.buildingRange)}},{key:"hasSatellite",value:function(){var t=!1;return Array.isArray(this._baseMap)?this._baseMap.forEach(function(e){u(e)&&(t=!0)}):t=u(this._baseMap),t}},{key:"baseMap",get:function(){return this._baseMap},set:function(t){this.resetBaseLayer(t),this.resetVectorBuildingRange(t)}}]),e}(kt);t.exports=Dt},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(10),v=n(93),m=i(v),g=n(400),_=i(g),y=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.uniqueId)(),n=arguments[1],i=arguments[2];(0,s.default)(this,e);var r=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this)),o=n.cacheSize,l=void 0===o?0:o;return r.id=t,r.dispatcher=i,r.cache=new _.default(l,r.onCacheRemove.bind(r)),r.isFrozen=!1,r.updateUniqueId(),r}return(0,h.default)(e,t),(0,u.default)(e,[{key:"updateUniqueId",value:function(){var t=this.map&&this.map.id||(0,p.uniqueId)();this.uniqueId=t+"_"+this.id}},{key:"getUniqueId",value:function(){return this.uniqueId}},{key:"update",value:function(){this.isFrozen||this.onUpdate.apply(this,arguments)}},{key:"freeze",value:function(){this.isFrozen=!0}},{key:"unfreeze",value:function(){this.isFrozen=!1}},{key:"clear",value:function(){this.cache.reset(),this.onClear()}},{key:"reload",value:function(){this.cache.reset(),this.onReload()}},{key:"onAdd",value:function(t){this.map=t,this.updateUniqueId()}},{key:"onRemove",value:function(){this.map=null}},{key:"getDrawItems",value:function(){return{}}},{key:"onCacheRemove",value:function(){}},{key:"onUpdate",value:function(){}},{key:"onClear",value:function(){}},{key:"onReload",value:function(){}}]),e}(m.default);e.default=y},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(132),a=i(r),o=n(18),s=i(o),l=n(95),u=i(l),c=n(0),f=i(c),d=n(1),h=i(d),p=n(22),v=i(p),m=n(10),g={UP:4,DOWN:3},_=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.add,i=e.remove,r=e.show,a=e.minZoom,o=void 0===a?v.default.minZoom:a,s=e.maxZoom,l=void 0===s?v.default.maxZoom:s,c=e.round,d=void 0===c||c;(0,f.default)(this,t),this.config={minZoom:o,maxZoom:l,round:d},this.add=n,this.remove=i,this.show=r,this.coordPool=new u.default,this.deps=new u.default,this.responsers=new u.default,this.waitingPool=new u.default}return(0,h.default)(t,[{key:"getTileCoord",value:function(t){return this.coordPool.get(t)}},{key:"isLoaded",value:function(t){var e=this.getTileCoord(t);return e&&e.loaded}},{key:"clear",value:function(){var t=this;this.coordPool.forEach(function(e){t.remove(e)}),this.coordPool.clear(),this.deps.clear(),this.responsers.clear()}},{key:"update",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.config,o=r.round,l=r.minZoom,u=r.maxZoom,c=[].concat((0,s.default)(this.coordPool.values()));t=(0,m.clamp)(t,l,u),o&&(t=Math.round(t));var f=e.coveringTiles({zoom:t,round:o,minZoom:l,maxZoom:u}),d=new a.default(f.map(function(t){return t.id})),h=f.filter(function(t){return!n.coordPool.has(t.id)}),p=c.filter(function(t){return!d.has(t.id)});this.dealWithRemoveList(p,d,t),this.dealWithAddList(h,i.reason)}},{key:"dealWithRemoveList",value:function(t,e,n){var i=this;t.length,t.forEach(function(t){var r=i.isLoaded(t.id),a=t.z-n,o=(0,m.isInRange)(a,-g.DOWN,g.UP);if(r&&o)if(a>0){var s=t.ancestor(n);if(e.has(s.id))return void i.markTileToRemove(t,[s])}else if(a<0){var l=t.descendant(n),u=l.filter(function(t){return e.has(t.id)});if(u.length>0)return void i.markTileToRemove(t,u)}i.removeTile(t)})}},{key:"dealWithAddList",value:function(t,e){var n=this;t.length,t.forEach(function(t){n.addTile(t,e)})}},{key:"addTile",value:function(t,e){var n=this;t&&(t.loaded=!1,this.coordPool.set(t.id,t),this.add(t,e).then(function(){t.loaded=!0,n.removeMarkedTile(t)}))}},{key:"removeTile",value:function(t){t&&(this.isLoaded(t.id)||this.removeMarkedTile(t),this.removeFromMarked(t),this.showWaitingTiles(t.id),this.coordPool.delete(t.id),this.remove(t))}},{key:"markTileToRemove",value:function(t,e){var n=this,i=e.filter(function(t){return!n.isLoaded(t.id)});this.deps.set(t.id,new a.default(i.map(function(t){return t.id}))),i.forEach(function(e){var i=e.id;n.responsers.has(i)||n.responsers.set(i,new a.default),n.responsers.get(i).add(t.id)})}},{key:"removeMarkedTile",value:function(t){var e=this,n=void 0,i=this.responsers.get(t.id);i&&i.size&&i.forEach(function(i){if(e.deps.has(i)){var r=e.deps.get(i);r.delete(t.id),0===r.size?(e.deps.delete(i),e.removeTile(e.getTileCoord(i))):n=i}else e.removeTile(e.getTileCoord(i))}),this.responsers.delete(t.id),n?this.addTileToWaitingPool(t.id,n):this.show(t)}},{key:"removeFromMarked",value:function(t){var e=this,n=this.deps.get(t.id);n&&n.size&&n.forEach(function(n){var i=e.responsers.get(n);i.delete(t.id),0===i.size&&e.responsers.delete(n)}),this.deps.delete(t.id)}},{key:"addTileToWaitingPool",value:function(t,e){this.waitingPool.has(e)?this.waitingPool.get(e).add(t):this.waitingPool.set(e,new a.default([t]))}},{key:"showWaitingTiles",value:function(t){var e=this;this.waitingPool.has(t)&&(this.waitingPool.get(t).forEach(function(t){var n=e.getTileCoord(t);n&&e.show(n)}),this.waitingPool.delete(t))}}]),t}();e.default=_},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(704),v=i(p),m=n(519),g=i(m),_=function(t){function e(t,n,i){(0,s.default)(this,e);var r=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t,n,i));return r.loading={},r.loaded={},r}return(0,h.default)(e,t),(0,u.default)(e,[{key:"_indexData",value:function(t,e,n){try{var i={enableGeodesic:e.enableGeodesic||!1,features:{geometries:e.geometries,styles:e.styles,_eraseOpts:e._eraseOpts},type:e.type};n(null,i)}catch(t){return n(t)}}},{key:"loadTile",value:function(t,e){function n(t,n){return delete this.loading[i][r],t?e(t):n?(a.vectorTile=n,a.parse(n,this.actor,e),this.loaded[i]=this.loaded[i]||{},void(this.loaded[i][r]=a)):e(null,null)}var i=t.source,r=t.uid;this.loading[i]||(this.loading[i]={}),this.loading[i][r]=new v.default(t);var a=this.loading[i][r];a.abort=this.loadVectorData(t,n.bind(this))}},{key:"abortTile",value:function(t){var e=this.loading[t.source],n=t.uid;e&&e[n]&&e[n].abort&&(e[n].abort(),delete e[n])}},{key:"removeTile",value:function(t){var e=this.loaded[t.source],n=t.uid;e&&e[n]&&delete e[n],this.removeSource(t)}}]),e}(g.default);e.default=_},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),a=i(r),o=n(1),s=i(o),l=n(285),u=i(l),c=n(673),f=i(c),d=n(671),h=i(d),p=n(670),v=i(p),m=n(504),g=i(m),_=n(505),y=i(_),x=n(342),b=i(x),S=n(672),w=i(S),E=n(158),A=function(){function t(e){(0,a.default)(this,t),this.uid=e.uid,this.coord=e.coord}return(0,s.default)(t,[{key:"parse",value:function(t,e,n){var i=void 0,r=this.coord.x+"_"+this.coord.y+"_"+this.coord.z,a={};switch(t.type){case E.GEOMETRY_TYPES.HIGHLIGHT:i=(0,u.default)(t.features,e),i.highlightColor=t.features.styles.highlightColor,i.shadeColor=t.features.styles.shadeColor;break;case E.GEOMETRY_TYPES.MASK:i=(0,w.default)(t.features,e);break;case E.GEOMETRY_TYPES.POLYGON:i=(0,u.default)(t.features,e);break;case E.GEOMETRY_TYPES.CIRCLE:i=(0,g.default)(t.features,e);break;case E.GEOMETRY_TYPES.ELLIPSE:i=(0,y.default)(t.features,e);break;case E.GEOMETRY_TYPES.RECTANGLE:i=(0,b.default)(t.features,e);break;case E.GEOMETRY_TYPES.POLYLINE:i=(0,f.default)(t.features,t.enableGeodesic),i.uid=this.uid;break;case E.GEOMETRY_TYPES.POINT:return void(0,h.default)(t.features,e,function(t){a[r]=t,n(null,a)});case E.GEOMETRY_TYPES.LABEL:return void(0,v.default)(t.features,e,function(t){a[r]=t,n(null,a)})}a[r]=i,n(null,a)}}]),t}();e.default=A},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(521),v=i(p),m=n(90),g=function(t){function e(t,n,i){return(0,s.default)(this,e),(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t,n,i))}return(0,h.default)(e,t),(0,u.default)(e,[{key:"_initialize",value:function(){this.type=m.SOURCE_TYPE.geoTask}},{key:"update",value:function(){}},{key:"getCluster",value:function(t,e){var n={type:this.type,pixelsPerDegree:t.pixelsPerDegree,resetCluster:t.resetCluster,mapBounds:t.mapBounds,zoom:t.zoom,maxZoom:this.maxZoom,source:this.getUniqueId()};this.dispatcher.send(this.type+".getCluster",n,function(t,n){if(t||!n)return void console.error(t);var i=JSON.parse(n);return e(i)},this.workerID)}}]),e}(v.default);e.default=g},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(94),a=i(r),o=n(3),s=i(o),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),p=n(4),v=i(p),m=n(519),g=i(m),_=n(674),y=i(_),x=!1,b=function(t){function e(t,n,i){return(0,u.default)(this,e),(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t,n,i))}return(0,v.default)(e,t),(0,f.default)(e,[{key:"_indexData",value:function(t,e,n){try{var i={task:new y.default(e,{minimumClusterSize:t.minimumClusterSize,gridSize:t.gridSize,averageCenter:t.averageCenter})};n(null,i)}catch(t){return n(t)}}},{key:"getCluster",value:function(t,e){function n(n,i){x&&console.log(i),x&&console.time("createClusters");var r=i.task,o=r.createClusters(t);x&&console.timeEnd("createClusters"),e(null,(0,a.default)(o))}x&&console.log("getCluster",t),this.loadVectorData(t,n.bind(this))}}]),e}(g.default);e.default=b},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(32),h=i(d),p=n(4),v=i(p),m=n(246),g=n(257),_=i(g),y=n(307),x=i(y),b=n(517),S=i(b),w=n(218),E=i(w),A=function(t){function e(t,n,i){(0,s.default)(this,e);var r=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t,n,i));return r._data=n.data||null,r._data&&(r._data.center=r._data.bounds.getCenter()),r._glTexture=null,r._items={},r}return(0,v.default)(e,t),(0,u.default)(e,[{key:"onAdd",value:function(t){this.map=t,this._glTexture||(this._glTexture=new E.default(this.map.renderEngine.gl,{pixels:this._data.mediaSource})),this._fire("data",{dataType:"source",sourceDataType:"metadata"})}},{key:"setData",value:function(t){if(this._data=t,this._data&&(this._data.center=this._data.bounds.getCenter()),this._glTexture){var e=this.map.renderEngine.gl;this._glTexture.update(this._data.mediaSource,{textureIndex:0,minFilter:e.LINEAR,magFilter:e.LINEAR,wrapS:e.CLAMP_TO_EDGE,wrapT:e.CLAMP_TO_EDGE,premultiply:!0,useMipmap:!1,flipY:!0})}this.transform,this.camera&&this.update(this.transform,this.camera),this._fire("data",{dataType:"source",sourceDataType:"content"})}},{key:"update",value:function(t,e){if(this.transform=t,this.camera=e,this._data&&(0,m.isInFrustum)(this.map,this._data.bounds)){var n=new x.default(0,0,0,0);this.addItem(n)}}},{key:"addItem",value:function(t){var e=this._items[t.id];if(this._data&&!e){e=new _.default(t,this.tileSize),this._items[t.id]=e,e.setData({bounds:this._data.bounds,center:this._data.center,texture:this._glTexture,texInfo:{s:0,t:0,w:1,h:1}});var n=this.map.renderEngine.gl;this._glTexture.upload({textureIndex:0,minFilter:n.LINEAR,magFilter:n.LINEAR,wrapS:n.CLAMP_TO_EDGE,wrapT:n.CLAMP_TO_EDGE,premultiply:!0,useMipmap:!1,flipY:!0})}else{var i=e.getData();i.bounds=this._data.bounds,i.center=this._data.center,e.setData(i)}}},{key:"getDrawItems",value:function(){var t=this._items;return this._data?(0,m.isInFrustum)(this.map,this._data.bounds)?t:{}:t}},{key:"onRemove",value:function(){(0,h.default)(e.prototype.__proto__||(0,a.default)(e.prototype),"onRemove",this).call(this),this._items={},this._glTexture.destroy()}}]),e}(S.default);e.default=A},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(23),a=i(r),o=n(3),s=i(o),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),p=n(4),v=i(p),m=n(516),g=i(m),_=n(90),y=n(257),x=n(147),b=i(x),S=n(829),w=window.createImageBitmap&&"Firefox"!==b.default.browser,E=function(t){function e(t,n,i){(0,u.default)(this,e);var r=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t,n,i));return r.type=_.SOURCE_TYPE.imageTile,r.imageSize=n.imageSize,r}return(0,v.default)(e,t),(0,f.default)(e,[{key:"loadTile",value:function(t){var e=this,n=t.coord,i=t.uid,r=t.tileSize,o=this._data(n.x,n.y,n.z),s={url:o,uid:i,tileSize:r,imageSize:this.imageSize,type:this.type,isBitmapEnabled:w};this.dispatcher;return new a.default(function(n){var i=function(i,r){if(i)return void n(i);o.indexOf("oversea")>-1&&(e.overseaNum=e.overseaNum||0,e.overseaNum=e.overseaNum+1),r.bitmap?(t.setData(r.bitmap),n(null)):r.image?(0,S.blobToImage)(r.image).then(function(e){return(0,S.canvasToImage)((0,S.imageToCanvas)(e,{width:t.tileSize,height:t.tileSize}))}).then(function(e){t.setData(e),n(null)}).catch(function(t){console.error(t),n("Image格式转换失败")}):n("Invalid Data")};t.workerID&&t.state!==y.TILE_STATE.expired?e.dispatcher.send("reloadTile",s,i,t.workerID):t.workerID=e.dispatcher.send("loadTile",s,i)})}}]),e}(g.default);e.default=E},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),a=i(r),o=n(1),s=i(o),l=n(79),u=n(113),c=function(){function t(e){(0,a.default)(this,t),this.actor=e,this.cache=new u.Store("imageTileLoader",1e3)}return(0,s.default)(t,[{key:"loadTile",value:function(t,e){var n=t.url,i=t.uid,r=t.imageSize,a=t.isBitmapEnabled;i in this.cache||(this.cache[i]=(0,l.getImage)(n,12e3)),this.cache[i].promise.then(function(t){a?self.createImageBitmap(t,{imageOrientation:"flipY",premultiplyAlpha:"premultiply",resizeWidth:r,resizeHeight:r}).then(function(t){e(null,{bitmap:t,transferableList:[t]})}).catch(function(t){console.warn(t),e(t)}):e(null,{image:t,transfertableList:[t]})}).catch(function(t){switch(t.message){case"abort":break;default:e(t)}})}},{key:"abortTile",value:function(t){var e=t.uid;e in this.cache&&(this.cache[e].xhr.abort(),this.cache[e]=null)}},{key:"removeTile",value:function(t){this.abortTile(t)}},{key:"reloadTile",value:function(t,e){t.uid in this.cache&&delete this.cache[t.uid],this.loadTile(t,e)}}]),t}();e.default=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),a=i(r),o=n(1),s=i(o),l=n(90),u=function(){function t(e,n){(0,a.default)(this,t),this.id=e,this.dispatcher=n,this.type=l.SOURCE_TYPE.indoorIndex,this.workerId=null}return(0,s.default)(t,[{key:"loadIndexData",value:function(t,e,n,i){t.length>0?this.workerId?this.dispatcher.send(this.type+".calcBuildingListInView",{ids:t,viewBounds:e,indexType:n},i,this.workerId):this.workerId=this.dispatcher.send(this.type+".calcBuildingListInView",{ids:t,viewBounds:e,indexType:n},i):i&&i([])}},{key:"onAdd",value:function(t){this._map=t}}]),t}();e.default=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){var i=t.getUint32(e,n),r=t.getUint32(e+4,n);return n?i+Math.pow(2,32)*r:Math.pow(2,32)*i+r}Object.defineProperty(e,"__esModule",{value:!0});var a=n(18),o=i(a),s=n(228),l=i(s),u=n(125),c=i(u),f=n(23),d=i(f),h=n(227),p=i(h),v=n(19),m=i(v),g=n(115),_=i(g),y=n(25),x=i(y),b=n(0),S=i(b),w=n(1),E=i(w),A=n(22),T=i(A),M=n(89),I=i(M),P=n(120),k=i(P),L=n(79),C=function(){function t(e,n){(0,S.default)(this,t),this._mapId=n,this.actor=e,this._cityIdsCache={}}return(0,E.default)(t,[{key:"calcBuildingListInView",value:function(t,e){var n=this,i=t.ids,r=void 0===i?[]:i,a=t.viewBounds,o=t.indexType;this._getIndoorIndexList(r,o).then(function(t){var i=[],r=!0,o=!1,s=void 0;try{for(var l,u=(0,x.default)((0,_.default)(t));!(r=(l=u.next()).done);r=!0){var c=l.value;if("object"===(void 0===c?"undefined":(0,m.default)(c))&&c.dataLength>0){var f=n.getBuildingIdsInView(c.buildingList.infoList,a);i=i.concat(f)}}}catch(t){o=!0,s=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw s}}return e(i),i})}},{key:"_getIndoorIndexList",value:function(){function t(t,n){return e.apply(this,arguments)}var e=(0,p.default)(l.default.mark(function t(e,n){var i,r,a,o,s,u,f=this;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i={},r=this._getSortedCityId(e),a=r.oldIds,o=r.newIds,s=a.map(function(t){return f._getCityIndexCache(t)}),t.next=6,d.default.all(s);case 6:return u=t.sent,u.forEach(function(t,e){t?i[a[e]]=t:o.push(a[e])}),t.abrupt("return",this._loadCityData(o,n).then(function(t){return i=(0,c.default)({},i,t)}));case 11:t.prev=11,t.t0=t.catch(0),console.warn(t.t0);case 14:case"end":return t.stop()}},t,this,[[0,11]])}));return t}()},{key:"_loadCityData",value:function(t,e){var n=this,i={};if(t.length>0){var r=t.map(function(t){return t+",0"}).join(","),a=T.default.indoorIndexSrc+"&all="+e+"&data="+r;return new d.default(function(t,e){L.getArrayBuffer(a,function(r,a){if(!r&&a&&a.data){var o=new DataView(a.data);i=n._extract(o),t(i)}else e(r||"未知错误：获取室内索引失败。")})})}return new d.default(function(t){t(i)})}},{key:"_getSortedCityId",value:function(t){var e=this,n=[],i=[];return t.forEach(function(t){e._cityIdsCache[t]?n.push(t):(i.push(t),e._cityIdsCache[t]=!0)}),{oldIds:n,newIds:i}}},{key:"_getCityIndexCache",value:function(t){var e=k.default.QMAPI_indoor_index+t;return new d.default(function(t){I.default.get(e,function(e){t(e)})})}},{key:"_extract",value:function(t){var e={},n=0,i=t.getInt8(n,!0);e.cityNum=i,n+=1;for(var r=0,a=0;a<i;a++){r=t.getInt16(n,!0),n+=2,e[r]||(e[r]={}),e[r].version=t.getInt32(n,!0),n+=4,e[r].intervel=t.getInt16(n,!0),n+=2,e[r].status=t.getInt8(n,!0),n+=1;var o=t.getInt32(n,!0);e[r].dataLength=o,n+=4,o>0&&(e[r].buildingList=this._extractCityInfo(t,n)),n+=o,I.default.set(k.default.QMAPI_indoor_index+r,e[r])}return e}},{key:"_extractCityInfo",value:function(t,e){var n=e,i={};i.sign=String.fromCharCode.apply(String,(0,o.default)(new Uint8Array(t.buffer.slice(n,n+4)))),n+=4,i.df=t.getInt32(n,!0),n+=4,i.dataVer=t.getInt32(n,!0),n+=4,i.confSize=t.getInt32(n,!0),n+=4,i.crc=t.getInt32(n+i.confSize,!0),i.cityIndex=t.getInt16(n,!0),n+=2,n+=6,i.buildingNum=t.getInt32(n,!0),n+=4,i.infoList=[];for(var a=0;a<i.buildingNum;a++){var s={},l=t.getInt32(n,!0)+e;n+=4,n+=4,s.buildingId=String(parseInt(r(t,l,!0))),l+=8,s.version=t.getInt32(l,!0),l+=4,s.left=t.getInt32(l,!0),l+=4,s.right=t.getInt32(l,!0),l+=4,s.top=t.getInt32(l,!0),l+=4,s.bottom=t.getInt32(l,!0),l+=4,i.infoList.push(s)}return i}},{key:"getBuildingIdsInView",value:function(t,e){var n=[],i=e.left,r=e.right,a=e.top,o=e.bottom;return t.forEach(function(t){var e=t.buildingId,s=t.left,l=t.right,u=t.top,c=t.bottom;s>0&&l>0&&i<l&&r>s&&o>u&&a<c&&n.push(e)}),n}}]),t}();e.default=C},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(164),a=i(r),o=n(27),s=i(o),l=n(94),u=i(l),c=n(3),f=i(c),d=n(0),h=i(d),p=n(1),v=i(p),m=n(5),g=i(m),_=n(4),y=i(_),x=n(22),b=i(x),S=n(46),w=i(S),E=n(214),A=i(E),T=n(518),M=i(T),I=n(307),P=i(I),k=n(246),L=n(90),C=n(343),R=function(t){function e(t,n,i){return(0,h.default)(this,e),(0,g.default)(this,(e.__proto__||(0,f.default)(e)).call(this,t,n,i))}return(0,y.default)(e,t),(0,v.default)(e,[{key:"setSelectedFloor",value:function(t){if(!this._loaded)return-1;var e=this.getMetaData(),n=e.floorInfo.floorStrArr.indexOf(t);return n>=0&&(this._selectedFloorNum=n,this.update(this.map.transform)),n}},{key:"_tileLoaded",value:function(){this._fire("tilesloaded")}},{key:"getSelectedFloor",value:function(){return this._loaded?this.getMetaData().floorInfo.floorStrArr[this._selectedFloorNum]||null:null}},{key:"_initialize",value:function(){this.type=L.SOURCE_TYPE.indoor,this._selectedFloorNum=null}},{key:"_onLoadDataStart",value:function(){var t=C.IndoorStyleMap.getInstance().get(this._data.indoorStyleId);t.id=this._data.indoorStyleId,this.workerID=this.dispatcher.send(this.type+".setStyle",{indoorStyle:(0,u.default)(t)})}},{key:"_onLoadDataEnd",value:function(){var t=this.getMetaData(),e=t.floorInfo.defaultNum;this._selectedFloorNum=e;var n=(0,s.default)(t.floorInfo.bounds,2),i=n[0],r=n[1];this._buildingBounds=new A.default(new w.default(i.lat,i.lng),new w.default(r.lat,r.lng)),this._fire("loaded")}},{key:"_onLoadDataError",value:function(t){console.error("室内建筑物 "+this._data.buildingId+" 加载出错",t)}},{key:"update",value:function(t){if(this.transform=t,this._loaded&&(0,k.isInFrustum)(this.map,this._buildingBounds)&&t.zoom>=b.default.minShowIndoorZoom){var e=this.getMetaData(),n=new P.default(0,e.buildingId,this._selectedFloorNum,0);this._isTileDataLoaded()&&this._fire("tilesloaded"),this.addItem(n)}}},{key:"_isTileDataLoaded",value:function(){var t=this._items,e=this.getMetaData();if(!e)return!1;var n=e.buildingId+"_"+this._selectedFloorNum+"_0",i=t[n];return!(!i||!i.hasData())}},{key:"getDrawItems",value:function(){var t=this._items,e=this.getMetaData();if(!e)return t;if(!(0,k.isInFrustum)(this.map,this._buildingBounds))return{};var n=e.buildingId+"_"+this._selectedFloorNum+"_0",i=t[n];return i&&i.hasData()&&(this._currentItems=(0,a.default)({},n,i)),this._currentItems||{}}}]),e}(M.default);e.default=R},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(18),a=i(r),o=n(23),s=i(o),l=n(19),u=i(l),c=n(95),f=i(c),d=n(0),h=i(d),p=n(1),v=i(p),m=n(22),g=i(m),_=n(46),y=i(_),x=n(395),b=n(396),S=n(714),w=i(S),E=n(89),A=i(E),T=n(120),M=i(T),I=n(1042),P=n(585),k=n(79),L=function(){function t(e,n){(0,h.default)(this,t),this._indoorBuildingSet={},this._mapId=n,this.actor=e,this.loading={},this.loaded={},this.versionPromiseMap=new f.default}return(0,v.default)(t,[{key:"setStyle",value:function(t){this._indoorStyle=JSON.parse(t.indoorStyle)}},{key:"loadTile",value:function(t,e){function n(t,n){return delete this.loading[i][r],t?e(t):n?(a.vectorTile=n,a.parse(n,this.actor,this._indoorStyle,e),this.loaded[i]=this.loaded[i]||{},void(this.loaded[i][r]=a)):e(null,null)}var i=t.source,r=t.uid;this.loading[i]||(this.loading[i]={}),this.loading[i][r]=new w.default(t);var a=this.loading[i][r];a.abort=this.loadVectorData(t,n.bind(this))}},{key:"removeTile",value:function(t){this.removeSource(t)}},{key:"loadVectorData",value:function(t,e){var n=t.source;if(!this._indoorBuildingSet[n])return e(null,null);e(null,this._indoorBuildingSet[n])}},{key:"loadData",value:function(t,e){var n=function(n,i){return n?e(n):"object"!==(void 0===i?"undefined":(0,u.default)(i))?e(new Error("Input data is not a valid Indoor object.")):(this._indoorBuildingSet[t.source]=i,void e(null,{buildingId:i.buildingId,buildingName:i.Name_CN,floorInfo:i.floorInfo,center:i.areaCenter}))}.bind(this);this.loadIndoorBuffer(t,n)}},{key:"loadIndoorBuffer",value:function(t,e){var n=this,i=JSON.parse(t.data),r=M.default.QMAPI_indoor_buffer+i.buildingId;new s.default(function(t){A.default.get(r,function(e){t(e)})}).then(function(t){return n._getVersion(t).then(function(e){return n._getIndoorInfoData(i,t,e)})}).then(function(t){x.ConfigUtil.setBV(t.version),e(null,t.buildingData)}).catch(function(t){e(t,null)})}},{key:"_getVersion",value:function(t){var e=null;if(t){var n=g.default.indoorBuildingSrc+"?df=1&type=dataver&cid="+t.cityId;e=this.versionPromiseMap.get(t.cityId)||new s.default(function(t){k.getJSON(null,n,function(e,n){var i=1/0;e?console.error(e):i=n&&n.metadata&&n.metadata.version&&n.metadata.version.data,t({version:i})})}),this.versionPromiseMap.set(t.cityId,e)}else e=s.default.resolve({version:1/0});return e}},{key:"_getIndoorInfoData",value:function(t,e,n){var i=this,r=M.default.QMAPI_indoor_buffer+t.buildingId,a=g.default.indoorBuildingSrc+"?df=1&cid="+(e&&e.cityId||t.cityId)+"&bid="+t.buildingId,o=n.version;return e&&e.version>=o?s.default.resolve(e):new s.default(function(e,n){k.getArrayBuffer(a,function(a,o){if(a)n(a);else{var s=null,l=o.data,u=new DataView(l);s=i.extract(u,t.buildingId),A.default.set(r,s),e(s)}})}).catch(function(t){if(console.error(t),e)return e;throw new Error(t)})}},{key:"removeSource",value:function(t){this._indoorBuildingSet[t.source]&&delete this._indoorBuildingSet[t.source]}},{key:"extract",value:function(t,e){var n={},i=0;n.sign=String.fromCharCode.apply(String,(0,a.default)(new Uint8Array(t.buffer.slice(i,4)))),i+=4,n.version=t.getInt32(i,!0),i+=4,n.cityId=t.getInt32(i,!0),i+=4,n.buildId=t.getInt32(i,!0),i+=4,n.zipSize=t.getInt32(i,!0),i+=4,n.srcSize=t.getInt32(i,!0),i+=4,n.CRC=t.getInt32(i),i+=4,I(t.byteLength-28===n.zipSize,"Check zip size");var r=P.inflate(t.buffer.slice(i),{windowBits:-15});return I(r.length===n.srcSize,"Check unzipped size"),n.buildingData=this.extractFloorInfo(r,e),n.buildingData.buildingId=e,n.buildingData.buffer=r,n}},{key:"extractFloorInfo",value:function(t){var e=new DataView(t.buffer),n=0,i={};i.Attribute_size=e.getInt32(n,!0),n+=4,i.Data_size=e.getInt32(n,!0),n+=4,i.Topology_size=e.getInt32(n,!0),n+=4,i.Name_CN_size=e.getUint8(n,!0),n+=1,i.Name_CN=String.fromCharCode.apply(String,(0,a.default)(new Uint16Array(e.buffer.slice(n,n+i.Name_CN_size)))),n+=i.Name_CN_size,i.DefaultFloor=e.getUint8(n,!0),n+=1,i.Floor_num=e.getUint8(n,!0),n+=1,i.Floor_str_size=e.getUint8(n,!0),n+=1;for(var r=[],o=0;o<i.Floor_str_size;o++){var s=e.getUint8(n,!0);r.push(s),n+=1}i.floorStr=String.fromCharCode.apply(null,r);for(var l=[],u=0;u<4;u++){var c=e.getInt32(n,!0);l.push(c),n+=4}var f=[],d={},h={};d.x=l[0],h.x=l[1],d.y=l[2],h.y=l[3];var p=void 0,v=void 0;try{p=(0,b.pixels2LongLat)(d.x,h.y),v=(0,b.pixels2LongLat)(h.x,d.y),f.push(p),f.push(v)}catch(t){throw new Error("数据错误，bounds无效。")}return i.floorInfo={floorNum:i.Floor_num,floorStr:i.floorStr,floorStrArr:i.floorStr.split(","),bounds:f,defaultNum:i.DefaultFloor},i.Floor_num=e.getInt32(n,!0),i.areaCenter=new y.default((p.lat+v.lat)/2,(p.lng+v.lng)/2),i}}]),t}();e.default=L},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(17),a=i(r),o=n(164),s=i(o),l=n(94),u=i(l),c=n(23),f=i(c),d=n(0),h=i(d),p=n(1),v=i(p),m=n(53),g=n(676),_=i(g),y=function(){function t(e){(0,h.default)(this,t),this.uid=e.uid,this.coord=e.coord}return(0,v.default)(t,[{key:"_parseEscalator",value:function(){}},{key:"parse",value:function(t,e,n,i){var r=this.coord.x+"_"+this.coord.y+"_"+this.coord.z,a={},o=t.buffer,l=t.buildingId,c=t.areaCenter,d=new _.default(l,{buffer:o,areaCenter:c,floorInfo:t.floorInfo,selectedFloorNum:this.coord.y,indoorStyle:n}),h=d.parseBuilding(),p=d.getBuildingPointInfo(h.buildingPoint),v=new f.default(function(t){e.send("getIndoorGlyphInfo",{glyphList:p.glyphList,iconSrcList:p.iconSrcList,pointInfoSet:(0,u.default)(p.pointInfoSet),indoorStyle:(0,u.default)(n)},function(e,n){if(e)console.error(e),t(null);else{var i=JSON.parse(n.iconMapping),r=JSON.parse(n.glyphMapping),a=JSON.parse(n.poiMapping);t({poiMapping:a,iconMapping:i,glyphMapping:r})}})}),g=h.buildingData.map(function(t){if(t.length>0){return{top:d.getTopGeometryAttributes(t),sides:d.getSidesGeometryAttributes(t)}}return null}).filter(function(t){return!!t}),y=h.buildingEscalator.map(function(t){if(t.length>0){return d.getEscalatorAttributes(t)}return null}).filter(function(t){return!!t}),x=h.floorBoundsData.map(function(t){if(t.length>0){var e=d.getTopGeometryAttributes(t);return delete e.normal,delete e.color,{top:e}}}).filter(function(t){return!!t});v.then(function(t){var e=d.parseInstanceBuildingPoint(p.pointInfoSet,t.iconMapping,t.glyphMapping,t.poiMapping);a[m.RENDER_LAYER_TYPE.indoorRegion]=(0,s.default)({},r,{regions:g,bounds:x,center:c,floorIndex:d.selectedFloorNum}),a[m.RENDER_LAYER_TYPE.indoorPoi]=(0,s.default)({},r,{pois:e,bounds:x,center:c,floorIndex:d.selectedFloorNum}),a[m.RENDER_LAYER_TYPE.indoorEscalator]=(0,s.default)({},r,{escalators:y,bounds:x,center:c}),a.id=r,i(null,a)})}},{key:"transferData",value:function(t,e){var n=[],i=["top","sides"],r=["position","index","color","normal"];["regions","bounds"].forEach(function(a){e[m.RENDER_LAYER_TYPE.indoorRegion][t][a].forEach(function(t){i.forEach(function(e){r.forEach(function(i){var r=t[e]&&t[e][i]&&t[e][i].buffer;r&&n.push(r)})})})});var o=e[m.RENDER_LAYER_TYPE.indoorPoi][t].pois;(0,a.default)(o).forEach(function(t){o[t].forEach(function(t){t.instance.count>0&&["instanceTransTypeArray","instanceCoordsTypeArray","instanceTextBoundsTypeArray","instanceInfosTypeArray","instanceColorsTypeArray","instanceStrokeColorsTypeArray"].forEach(function(e){n.push(t.instance[e].buffer)})})});var s=e[m.RENDER_LAYER_TYPE.indoorEscalator][t].escalators;return s.length>0&&["instanceCoordsTypeArray","instanceInfosTypeArray"].forEach(function(t){n.push(s[0][t].buffer)}),e.transferableList=n,e}}]),t}();e.default=y},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(23),a=i(r),o=n(3),s=i(o),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),p=n(4),v=i(p),m=n(516),g=i(m),_=n(90),y=n(257),x=function(t){function e(t,n,i){(0,u.default)(this,e);var r=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t,n,i));return r.type=_.SOURCE_TYPE.traffic,r.baseColor=n.baseColor,r.flowColor=n.flowColor,r.flowSpeed=n.flowSpeed,r.setFilter(n.filter),r}return(0,v.default)(e,t),(0,f.default)(e,[{key:"setFilter",value:function(t){this.filter=t}},{key:"loadTile",value:function(t){var e=this,n=t.coord,i=t.uid,r=this.baseColor,o=this.flowColor,s=this.flowSpeed,l=this.filter,u=this._data(n.x,n.y,n.z),c={url:u,uid:i+"_"+u,baseColor:r,flowColor:o,flowSpeed:s,filter:l,type:this.type};return new a.default(function(n){var i=function(e,i){if(e)return void n(e);if(i&&i.flowData){var r=i.flowData,a=r.texSize,o=r.pixelSpace,s=r.pointArray,l=r.count,u=r.instance;self.createImageBitmap(new ImageData(s,a,a),{premultiplyAlpha:"none"}).then(function(e){t.setData({base:i.baseData,flow:{pathImage:e,count:l,instance:u,texSize:a,pixelSpace:o},uid:c.uid}),n(null)})}else n("Invalid Data")};t.workerID&&t.state!==y.TILE_STATE.expired?e.dispatcher.send("reloadTile",c,i,t.workerID):t.workerID=e.dispatcher.send("loadTile",c,i)})}}]),e}(g.default);e.default=x},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(17),a=i(r),o=n(23),s=i(o),l=n(0),u=i(l),c=n(1),f=i(c),d=n(113),h=n(79),p=n(29),v=n(719),m=function(){function t(e){(0,u.default)(this,t),this.actor=e,this.cache=new d.Store("trafficTileLoader",1e3)}return(0,f.default)(t,[{key:"loadTile",value:function(t,e){var n=t.url,i=t.uid,r=t.baseColor,a=t.flowColor,o=t.flowSpeed,l=t.filter;if(!(i in this.cache)){var u=void 0,c=new s.default(function(t,e){u=(0,h.getJSON)(i,n,function(n,i){n?e(n):t(i)})});this.cache[i]={xhr:u,promise:c}}this.cache[i].promise.then(function(t){if(t.hasOwnProperty("ret"))if(0===t.ret){var n=(0,v.parse)(t,{enc:!1,baseColor:r,flowColor:a,flowSpeed:o,filter:l});n.uid=i,e(null,n)}else e(new p.AJAXError("no data",404));else{var s=(0,v.parse)(t,{baseColor:r,flowColor:a,flowSpeed:o,filter:l});s.uid=i,e(null,s)}}).catch(function(t){switch(t.message){case"abort":break;default:e(t)}})}},{key:"abortTile",value:function(t){var e=t.uid,n=(0,a.default)(this.cache).find(function(t){return t.includes(e)});n&&(this.cache[n].xhr.abort(),this.cache[n]=null)}},{key:"removeTile",value:function(t){this.abortTile(t)}},{key:"reloadTile",value:function(t,e){t.uid in this.cache&&delete this.cache[t.uid],this.loadTile(t,e)}}]),t}();e.default=m},function(t,e,n){"use strict";function i(t){var e=0;t.forEach(function(t){var n=Math.round(t.length*r);e+=n,t.particles=n});var n=new Uint16Array(2*e),i=new Uint8ClampedArray(4*e),a=new Uint8ClampedArray(e),o=0,s=0,l=0;return t.forEach(function(t){for(var e=t.offset,r=t.length,u=t.particles,c=t.color,f=0;f<u;f++){var d=Math.floor(Math.random()*r);n[o]=e,o+=1,n[o]=r,o+=1,i[s]=c[0],s+=1,i[s]=c[1],s+=1,i[s]=c[2],s+=1,i[s]=c[3],s+=1,a[l]=d,l+=1}}),{count:e,instance:{instanceLinkList:n,instanceColorList:i,instanceParticleList:a}}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var r=.1},function(t,e,n){"use strict";function i(t){if(!t||!t.length)return t;for(var e=[],n=t[0].slice(),i=void 0,a=1;a<t.length;a++){i=t[a];switch(r(n,i)){case 1:n[1]=n[1].concat(i[1].slice(1));break;case 2:n[1]=i[1].concat(n[1].slice(1));break;case 0:default:e.push(n),n=i.slice()}}return e}function r(t,e){if(t[0]!==e[0])return 0;var n=t[1].length,i=e[1].length;if(n&&i){var r=t[1][0],o=e[1][0],s=t[1][n-1],l=e[1][i-1];return a(o,s)?1:a(r,l)?2:0}return 0}function a(t,e){var n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)<=2}Object.defineProperty(e,"__esModule",{value:!0}),e.merge=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var n=s(t,e),i=a(n.flowData,e),r=o(n.baseData,e);return{baseData:{indeices:{arrayBuffer:r.indeices.dataView,length:r.indeices.length},lineCount:r.lineCount,size:r.size,vertices:{arrayBuffer:r.vertices.dataView,attributes:r.vertices.attributes,bytesPerElement:r.vertices.bytesPerElement},vertiesCount:r.vertiesCount},flowData:i}}function a(t,e){var n=l(t,e),i=n.linkInfoList,r=n.pointArray,a=(0,b.default)(i),o=a.instance,s=a.count;return{texSize:w,pixelSpace:1e3*S,count:s,instance:o,pointArray:r}}function o(t,e){return(0,_.default)(t,e.baseColor)}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.enc,i=void 0===n||n,r=e.filter;if(!t.data)return{};var a=i?(0,y.parseJson)((0,p.decode)(t.data)):t;if(0!==a.ret)return console.error("瓦块没有数据",t),{};var o=a.features,s=(0,v.restore)(o,r);return{baseData:s,flowData:(0,m.merge)(s)}}function l(t,e){var n=e.flowColor,i=e.flowSpeed,r=0,a=[],o=new Uint8ClampedArray(w*w*4);return{linkInfoList:t.map(function(t){var e=r,s=i[t[0]]*S,l=t[1];l.forEach(function(t,n){if(a.push(t),c(o,4*e,t),e+=1,n<l.length-1)for(var i=l[n+1],r=Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2)),f=Math.ceil(r/s),d=1;d<f;d++)a.push(u(t,i,d/f)),c(o,4*e,u(t,i,d/f)),e+=1});var f={offset:r,length:e-r,color:n[t[0]]};return r=e,f}),pointArray:o}}function u(t,e,n){return{x:Math.round(t.x*(1-n)+e.x*n),y:Math.round(t.y*(1-n)+e.y*n)}}function c(t,e,n){var i=f(n),r=(0,h.default)(i,4),a=r[0],o=r[1],s=r[2],l=r[3];t[e]=a,t[e+1]=o,t[e+2]=s,t[e+3]=l}function f(t){var e=t.x+128,n=t.y+128;return[e<256?e:255,e<256?0:e-255,n<256?n:255,n<256?0:n-255]}Object.defineProperty(e,"__esModule",{value:!0});var d=n(27),h=i(d);e.parse=r,e.preParse=s,e.interpolate=l;var p=n(522),v=n(721),m=n(718),g=n(720),_=i(g),y=n(10),x=n(717),b=i(x),S=.1,w=64},function(t,e,n){"use strict";function i(t,e,n){var i=a(t,n);if(i){var o=i.color,s=i.width,l=i.dashLength,u=i.dashSpace,c=i.startDistance,f=r(t[1]);!f||f.length<2||e.addLine(i,f,o,s,l,u,c)}}function r(t){var e=[];return t.forEach(function(t){e.push(t.x,t.y)}),e}function a(t,e){var n=l;return{hasDash:0,dashLength:0,dashSpace:0,color:e[t[0]],width:n,preWidth:n,nextWidth:n,noTerminal:0,startDistance:0,isSide:0,transform:{transX:0,transY:0,scale:1}}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var n=new s.default,r=0,a=t.length;r<a;r++)i(t[r],n,e);return{vertices:n.vertiesDataBuffer,indeices:n.indicesDataBuffer,size:n.indicesDataBuffer.length,vertiesCount:n.vertiesDataBuffer.length,lineCount:n.lineCount}};var o=n(511),s=function(t){return t&&t.__esModule?t:{default:t}}(o),l=3},function(t,e,n){"use strict";function i(t){for(var e=[],n=t.slice(),i=null,r=0,a=n.length;r<a;r+=2){if(i){i={x:i.x+n[r],y:i.y+n[r+1]}}else i={x:n[r],y:n[r+1]};e.push(i)}return e}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1];t.forEach(function(t){t[0]instanceof Array?t.forEach(function(t){t[1]=i(t[1])}):t[1]=i(t[1])});var n=e.map(function(t){return a.TRAFFIC_ROAD_TYPE[t]});return t=t.filter(function(t){return n.includes(t[2])})}Object.defineProperty(e,"__esModule",{value:!0}),e.restore=r;var a=n(290)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var n=t.z-e.z,i=Math.pow(2,n);return{transX:(t.x-e.x*i)*t.tileSize,transY:(t.y-e.y*i)*t.tileSize,scale:1/i}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(15),o=i(a),s=n(0),l=i(s),u=n(1),c=i(u),f=n(307),d=i(f),h=n(523),p=i(h),v=n(22),m=i(v),g=function(){function t(e){(0,l.default)(this,t);var n=d.default.converter(e.coord);this._batchCoord=n,this._workerTile=new p.default((0,o.default)({},e,{coord:n})),m.default.isBatchVector?this._workerTile.dataZoom=n.z+1:this._workerTile.dataZoom=n.z,this._batchTiles=n.children().map(function(t){return new p.default((0,o.default)({},e,{coord:t}))})}return(0,c.default)(t,[{key:"parse",value:function(t,e,n,i,r,a,o){function s(t,e){return function(t,n){if(t&&(console.error(t),n=null),l[e]=n,(u+=1)===c.length){var i=l.reduce(function(t,e){return e&&(Array.prototype.push.apply(t,e.transferableList),delete e.transferableList),t},[]);l.transferableList=i,a(null,l)}}}if(m.default.batchRender)return void this.batchParse.apply(this,arguments);var l=[],u=0,c=this._batchTiles;this._batchTiles.forEach(function(a,l){var u=s(a.coord,l);if(!e||!e.datas||!e.datas[l])return void u(new Error("瓦片："+a.coord.id+" 加载失败!"),null);a.parse(t,e.datas[l],n,i,r,u,o)})}},{key:"batchParse",value:function(t,e,n,i,a,o,s){function l(t,e){if(t)return console.error(t),void o(t);o(null,e)}var u=this._batchCoord,c=e.datas;u.children().forEach(function(t,e){c&&(c[e].tileTransform=r(t,u))}),c?this._workerTile.parse(t,c,n,i,a,l,s):this._workerTile.parse(t,e,n,i,a,l,s)}}]),t}();e.default=g},function(t,e,n){"use strict";function i(t){return!!t&&t[0]instanceof Number&&!t[2]}e.merge=function(t){if(!t||!t.length)return t;for(var e=[],n=null,r=!1,a=void 0,o=void 0,s=0;s<t.length;s++)a=t[s],n&&i(a)&&a[0]===n[0]?r?(o=n[1],o.push(a[1])):(n[1]=[n[1]],o=n[1],o.push(a[1]),r=!0):(e.push(a),r=!1,n=i(a)?a:null);return e}},function(t,e,n){"use strict";function i(t){for(var e=[],n=t.slice(),i=0,r=n.length;i<r;i+=2)if(0===e.length)e.push(n[0],n[1]);else{var a=e[i-2]+n[i],o=e[i-1]+n[i+1];e.push(a,o)}return e}e.restores=function(t){for(var e=t||[],n=0;n<e.length;n++){var r=e[n];if(r[0]instanceof Array)for(var a=0;a<r.length;a++){var o=r[a];o[1]=i(o[1])}else r[1]=i(r[1])}return t}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return t>=C.default.maxDataZoom}Object.defineProperty(e,"__esModule",{value:!0});var a=n(17),o=i(a),s=n(25),l=i(s),u=n(3),c=i(u),f=n(0),d=i(f),h=n(1),p=i(h),v=n(5),m=i(v),g=n(32),_=i(g),y=n(4),x=i(y),b=n(44),S=n(257),w=i(S),E=n(400),A=i(E),T=n(10),M=i(T),I=n(520),P=i(I),k=n(90),L=n(22),C=i(L),R=C.default.batchRender,D=function(t){function e(t,n,i){(0,d.default)(this,e);var r=(0,m.default)(this,(e.__proto__||(0,c.default)(e)).call(this,t,n,i));return r._data=n.data,r.type=k.SOURCE_TYPE.vector,r.iconInfo=n.iconInfo||null,r.enc=n.enc,r.styleId=n.styleId,r._shadowTiles={},r._parentTiles={},r._parentCache=new A.default(0,r.unloadTile.bind(r)),r}return(0,x.default)(e,t),(0,p.default)(e,[{key:"setStyleId",value:function(t){this.styleId=t}},{key:"setStyleAndIconInfo",value:function(t,e){this.styleId=t,this.iconInfo=e}},{key:"clear",value:function(){this._shadowTiles={},(0,_.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"clear",this).call(this),this._parentTiles={},this._parentCache.reset()}},{key:"clearTiles",value:function(){var t=this;M.default.forIn(this._parentTiles,function(e){t.removeBatchTile(e)}),this._cache.reset(),this._parentCache.reset()}},{key:"reload",value:function(){var t=this;this._cache.reset(),this._parentCache.reset(),M.default.forIn(this._items,function(e,n){t.reloadTile(n,!0)})}},{key:"reloadTile",value:function(t,e){(e||t.state!==S.TILE_STATE.reloading)&&(t.state=S.TILE_STATE.reloading,this.loadBatchTile(t,{},this._tileLoaded.bind(this,t)))}},{key:"updateCacheSize",value:function(t){(0,_.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"updateCacheSize",this).call(this,t),this._parentCache.setMaxSize(64)}},{key:"update",value:function(t,e,n){var i=this;this.transform=t,this.camera=e;var r={},a={},o=void 0,s=void 0,u=!0;this.updateCacheSize(t);var c=this.transform.zoom,f=Math.max(c-4,this.minZoom);C.default.isForceNullDataProcess&&c>C.default.defaultDataZoom&&(f=Math.max(c-8,this.minZoom));var d=Math.max(c+3,this.minZoom),h=t.coveringTiles({round:!0,tileSize:this.tileSize,minZoom:this.minZoom-1,maxZoom:this.maxZoom-1,zoom:C.default.isBatchVector?c-1:c});if(h.forEach(function(t){var e=i._parentTiles[t.id];e&&e.hasData()||(u=!1,a[t.id]=!0)}),0!==M.default.keysDifference(a,this._parentTiles).length||u||c>C.default.maxDataZoom){for(var p=0;p<h.length;p++){var v=h[p];if(v.z>=C.default.maxDataZoom){var m=v.ancestor(C.default.maxDataZoom-1)||v;this.addTile(m,n,null),r[m.id]=!0}else{if(this.icon&&v.setIconUrls(this.icon),!(o=this.addTile(v,n,null)))continue;if(r[v.id]=!0,o.hasData())continue;this._findLoadedChildren(v,d,r)||(s=this.findLoadedParent(v,f,r))&&this.addTile(s.coord,n,null)}}var g=M.default.keysDifference(this._parentTiles,r),_=!0,y=!1,x=void 0;try{for(var b,S=(0,l.default)(g);!(_=(b=S.next()).done);_=!0){var w=b.value;this.removeBatchTile(w)}}catch(t){y=!0,x=t}finally{try{!_&&S.return&&S.return()}finally{if(y)throw x}}}else h.forEach(function(t){if(i._parentTiles[t.id].hasData()){var e=t.parent(d);i.checkChildrenDataIsNull(e)||(i.removeBatchTile(e&&e.id),t.children(d).forEach(function(t){i.removeBatchTile(t&&t.id)}))}})}},{key:"_findLoadedChildren",value:function(t,e,n){var i=this,r=!1;return M.default.forIn(this._parentTiles,function(a,o){if(!(n[a]||!o.hasData()||o.coord.z<=t.z||o.coord.z>e)){var s=Math.pow(2,Math.min(o.coord.z,i.maxZoom)-Math.min(t.z,i.maxZoom));if(Math.floor(o.coord.x/s)===t.x&&Math.floor(o.coord.y/s)===t.y)for(n[a]=!0,r=!0;o&&o.coord.z-1>t.z;){var l=o.coord.parent(i.maxZoom).id;o=i._parentTiles[l],o&&o.hasData()&&(delete n[a],n[l]=!0)}}}),r}},{key:"findLoadedParent",value:function(t,e,n){for(var i=t.z-1;i>=e;i--){t=t.parent(this.maxZoom);var r=this._parentTiles[t.id];if(r&&r.hasData())return n[t.id]=!0,r}}},{key:"checkChildrenDataIsNull",value:function(t){var e=this._parentTiles[t.id];if(e&&e.coord&&e.coord._children&&e.coord._children.length>0)for(var n=0;n<e.coord._children.length;n++){var i=e.coord._children[n];if(i){var r=this._parentCache.data[i.id];if(r||(r=this._parentTiles[i.id]),r&&!r._data)return!0}}return!1}},{key:"addTile",value:function(t,e,n){var i=this;if(M.default.isDefined(this.styleId)){var a=this._parentTiles[t.id];return a&&!t.isNullDefaultData&&a.isNullDefaultData&&(a=null,delete this._parentTiles[t.id],delete this._items[t.id],this._parentCache.remove(t.id)),(a&&t.isNullDefaultData&&!a.isNullDefaultData&&(a=null,delete this._parentTiles[t.id],delete this._items[t.id],this._parentCache.remove(t.id)),a&&((R||r(a.coord.z))&&a.hasData()&&(this._items[a.coord.id]=a),null!==a._data))?a:(a=this._parentCache.get(t.id),a&&!t.isNullDefaultData&&a.isNullDefaultData&&(a=null,delete this._parentTiles[t.id],delete this._items[t.id],this._parentCache.remove(t.id)),a&&t.isNullDefaultData&&!a.isNullDefaultData&&(a=null,delete this._parentTiles[t.id],delete this._items[t.id],this._parentCache.remove(t.id)),a?(this._parentTiles[t.id]=a,r(t.z)||R?this._items[t.id]=a:a.coord.children().forEach(function(t){var e=i._cache.get(t.id);e&&(i._items[t.id]=e)}),a):(a=new w.default(t,this.tileSize),a.isNullDefaultData=t.isNullDefaultData,this._parentTiles[t.id]=a,(r(t.z)||R)&&(this._items[t.id]=a),this.loadBatchTile(a,e,n?n.bind(this):this._tileLoaded.bind(this,a)),a))}return null}},{key:"removeBatchTile",value:function(t){var e=this,n=this._parentTiles[t];if(n)if(r(n.coord.z)||R?this.removeTile(n.coord.id,!0):n.coord.children().forEach(function(t){return e.removeTile(t.id)}),delete this._parentTiles[t],n.hasData()){var i=n.coord.id;this._parentCache.add(i,n)}else n.aborted=!0,this.abortTile(n),this.unloadTile(n)}},{key:"loadBatchTile",value:function(t,e,n){function i(e,i,a){var s=this;if(e)return(0,b.qos)("tile",{id:"v",status:1}),n(e);(0,b.qos)("tile",{id:"v",status:0,time:a}),t.setData(i),r(o.z)||R||o.children().forEach(function(e,n){t=new w.default(e,s.tileSize),s._items[e.id]=t,t.setData(i[n]),s._parentTiles[t.coord.parent().id]||s.removeTile(t.coord.id)}),n(null)}var a=t,o=a.coord,s=this._getVectorTileUrl(o);if(this.buildingRange){var l=void 0,u=r(o.z)?o.z:o.z+1;l=this.buildingRange[0]>C.default.maxDataZoom&&u===C.default.maxDataZoom?1:this.buildingRange[0]<=u&&u<=this.buildingRange[1]?1:0,s=s.replace("{building}",l)}var c={url:s,uid:t.uid,type:this.type,source:this.getUniqueId(),coord:o,enc:this.enc,styleId:this.styleId,reason:e,sourceId:this.id,dataFinishCallback:{finishPromise:this.map.layerResource.loadStyle.bind(this.map.layerResource),type:"vector.setStyleInfo"},isClientRender:C.default.isClientRender,maxDataZoom:C.default.maxDataZoom,isBatchVector:C.default.isBatchVector,isNullDefaultData:t.isNullDefaultData};t.workerID&&t.state!==S.TILE_STATE.expired?t.state===S.TILE_STATE.loading||this.dispatcher.send("reloadTile",c,i.bind(this),t.workerID):t.workerID=this.dispatcher.send(r(o.z)?"loadTile":"vector.loadBatchTile",c,i.bind(this))}},{key:"_getVectorTileUrl",value:function(t){return C.default.isBatchVector?r(t.z)?t.url(this._data.vectorSrc):t.urlForBatchChildren(this._data.batchVectorSrc):t.url(this._data.vectorSrc)}},{key:"abortTile",value:function(t){this.dispatcher.send("abortTile",{uid:t.uid,type:this.type,source:this.getUniqueId(),tileId:t.coord.id},null,t.workerID)}},{key:"unloadTile",value:function(t){t.clear(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.getUniqueId(),tileId:t.coord.id},null,t.workerID)}},{key:"_tileLoaded",value:function(t,e){var n=this;if(e?(t.state=S.TILE_STATE.errored,404!==e.status&&this._fire("loaderror",{tile:t,error:e})):this._fire("data",{dataType:"source",tile:t}),C.default.isForceNullDataProcess&&t.isNullDefaultData&&(t.state=S.TILE_STATE.loaded),(0,o.default)(this._items).every(function(e){return n._items&&n._items[e]&&(n._items[e].getData()&&n._items[e].state===S.TILE_STATE.loaded||t.state===S.TILE_STATE.errored)})&&this._fire("tilesloaded",{dataType:"source",tiles:this._items}),C.default.isForceNullDataProcess)if(t._data)this._items[t.coord.id]&&this._items[t.coord.id].isNullDefaultData!==t.isNullDefaultData&&(this._items[t.coord.id]=t);else{var i=t.coord.ancestor(C.default.defaultDataZoom);if(i){i.isNullDefaultData=!0,this._parentTiles[i.id]&&this._parentTiles[i.id].isNullDefaultData!==i.isNullDefaultData&&delete this._parentTiles[i.id];var r=this.addTile(i);r&&(this._items[r.coord.id]=r,r.isNullDefaultData=!0)}delete this._parentTiles[t.coord.id],delete this._items[t.coord.id]}}}]),e}(P.default);e.default=D},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(228),a=i(r),o=n(23),s=i(o),l=n(227),u=i(l),c=n(0),f=i(c),d=n(1),h=i(d),p=n(730),v=n(822),m=i(v),g=n(722),_=i(g),y=n(10),x=i(y),b=n(22),S=i(b),w=n(79),E=n(523),A=function(){function t(e){(0,f.default)(this,t),this.actor=e,this.loading={},this.loaded={},self._preloadPromiseCache||(self._preloadPromiseCache={}),self._iconIndexCache||(self._iconIndexCache={}),self._styleCache||(self._styleCache={}),this.currentStyleId=null}return(0,h.default)(t,[{key:"_toTextureCoords",value:function(t,e,n){return x.default.forIn(t,function(i,r){t[i]={left:r[0]/e,right:(r[0]+r[2])/e,top:(n-r[1])/n,bottom:(n-r[1]-r[3])/n,width:r[2],height:r[3]}}),t}},{key:"getStyleInfo",value:function(t,e){this.styleMap&&this.styleMap[t]&&"config"!==t?e(this.styleMap[t]):(this.iconInfoCallbackObj=this.iconInfoCallbackObj||{},this.iconInfoCallbackObj[t]=this.iconInfoCallbackObj[t]||[],this.iconInfoCallbackObj[t].push(e))}},{key:"setStyleInfo",value:function(t){var e=t.iconInfo,n=t.styleId;this.styleMap=this.styleMap||{},this.styleMap[n]=e,this.iconInfoCallbackObj&&this.iconInfoCallbackObj[n]&&this.iconInfoCallbackObj[n].length>0&&(this.iconInfoCallbackObj[n].forEach(function(t){t(e)}),this.iconInfoCallbackObj[n]=null)}},{key:"_preload",value:function(){function t(t,n){return e.apply(this,arguments)}var e=(0,u.default)(a.default.mark(function t(e,n){var i=this;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s.default.all([self._iconIndexCache[e]||(0,m.default)(e),self._styleCache[e]||(0,p.getStyleForWorker)(e)]).then(function(t){return self._iconIndexCache[e]=t[0],self._styleCache[e]=t[1],{iconCoords:i._toTextureCoords(t[0],n.w,n.h),style:t[1],iconInfoData:n}}));case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"deleteCache",value:function(t){null!==t&&(delete self._iconIndexCache[t],delete self._styleCache[t])}},{key:"reloadTile",value:function(t,e){var n=t.uid,i=t.source,r=this.loading[i],a=this.loaded[i];r[n]?this.abortTile(t):a[n]&&this.removeTile(t),this.loadBatchTile(t,e)}},{key:"loadBatchTile",value:function(t,e){function n(n,i,s){return n?(console.error(n),e(n)):i?this.loading[r][o]?(delete this.loading[r][o],g.vectorTile=i,g.parse(t,i,v,p,this.actor,function(t,n){e(t,n,s)},a),this.loaded[r]=this.loaded[r]||{},void(this.loaded[r][o]=g)):void e(null,null):e(null,null)}var i=this,r=t.source,a=t.enc,o=t.uid,l=t.styleId,u=t.isClientRender,c=void 0!==u&&u,f=t.maxDataZoom,d=t.isBatchVector,h=void 0===d||d;S.default.isClientRender=c,S.default.maxDataZoom=f,S.default.isBatchVector=h;var p=void 0,v=void 0,m=new s.default(function(t){i.currentStyleId!==l&&(null!==i.currentStyleId&&i.deleteCache(i.currentStyleId),i.currentStyleId=l);var e=""+l;"config"===l&&(delete self._preloadPromiseCache[e],i.deleteCache(l)),i.getStyleInfo(l,function(n){var r=self._preloadPromiseCache[e];r||(v=n,r=i._preload(l,v),self._preloadPromiseCache[e]=r),r.then(function(e){var i=e.iconCoords,r=e.style;v=n,v.info=i,p=r,t()})})});this.loading[r]||(this.loading[r]={}),this.loading[r][o]=new _.default(t);var g=this.loading[r][o],y=new s.default(function(e){g.abort=i.loadVectorData(t,e)});s.default.all([m,y]).then(function(t){n.call(i,t[1].err,t[1].data,t[1].time)})}},{key:"loadTile",value:function(t,e){function n(n,i,s){return n?e(n):i?this.loading[r][o]?(delete this.loading[r][o],d.vectorTile=i,d.parse(t,i,c,u,this.actor,function(t,n){e(t,n,s)},a),this.loaded[r]=this.loaded[r]||{},void(this.loaded[r][o]=d)):void e(null,null):e(null,null)}var i=this,r=t.source,a=t.enc,o=t.uid,l=t.styleId,u=void 0,c=void 0,f=new s.default(function(t){i.currentStyleId!==l&&(null!==i.currentStyleId&&i.deleteCache(i.currentStyleId),i.currentStyleId=l);var e=""+l;"config"===l&&(delete self._preloadPromiseCache[e],i.deleteCache(l)),i.getStyleInfo(l,function(n){var r=self._preloadPromiseCache[e];r||(c=n,r=i._preload(l,c),self._preloadPromiseCache[e]=r),r.then(function(e){var i=e.iconCoords,r=e.style;c=n,c.info=i,u=r,t()})})});this.loading[r]||(this.loading[r]={}),this.loading[r][o]=new E(t);var d=this.loading[r][o],h=new s.default(function(e){d.abort=i.loadVectorData(t,e)});s.default.all([f,h]).then(function(t){n.call(i,t[1].err,t[1].data,t[1].time)})}},{key:"abortTile",value:function(t){var e=this.loading[t.source],n=t.uid;e&&e[n]&&e[n].abort&&(e[n].abort(),delete e[n])}},{key:"removeTile",value:function(t){var e=this.loaded[t.source],n=t.uid;e&&e[n]&&delete e[n]}},{key:"loadVectorData",value:function(t,e){var n=w.getJSON(t.id,t.url,function(t,n,i){e&&e({err:t,data:n,time:i})});return function(){e=null,n.abort()}}}]),t}();t.exports=A},function(t,e,n){"use strict";function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"DEFAULT",e=arguments[1];return s.STYLE_ID.hasOwnProperty(t)?a.default.resolve(s.STYLE_ID[t]):(0,o.checkKey)(e).then(function(e){var n=s.STYLE_ID.DEFAULT;if(e&&e.custom_map_style&&e.custom_map_style.style_list){var i=parseInt(String(t).replace("style",""));e.custom_map_style.style_list.some(function(t){return i>-1&&i===t.order&&(n=t.id,(0,l.cs)({styleId:n,subkey:e.subkey}),!0)})||console.error("个性化样式 "+t+" 并未找到，已自动启用默认样式！")}return n})}Object.defineProperty(e,"__esModule",{value:!0});var r=n(23),a=function(t){return t&&t.__esModule?t:{default:t}}(r),o=n(302),s=n(308),l=n(44);e.default=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){return new f.default(function(n){var i=t||0,r=v.default.QMAPI_poi_icon+i,a=-1,l="",c="";g.default.support()?g.default.get(r,function(t){var f=JSON.parse(t);a=t?f.version:a,l=e.replace("{id}",i).replace("{version}",a),h.default.getJSON(null,l,function(t,e,l){if(!t&&e&&e.data){if("{}"!==(0,u.default)(e.data))return s({styleId:i,version:a,time:l}),c=e.data,void g.default.set(r,(0,u.default)(e),function(){n("data:image/png;base64,"+c)});c=f.data}else o({styleId:i,version:a,err:t}),console.error(t,e),c=f.data;n("data:image/png;base64,"+c)})}):(l=e.replace("{id}",i).replace("{version}",a),h.default.getJSON(null,l,function(t,e,r){return!t&&e&&e.data?"{}"===(0,u.default)(e.data)?(o({styleId:i,version:a,err:null}),console.error(e),void n(null)):(s({styleId:i,version:a,time:r}),c=e.data,void n("data:image/png;base64,"+c)):(o({styleId:i,version:a,err:t}),console.error(t,e),void n(null))}))})}function a(t){var e=t.data,n=t.styleId,i=t.iconSrc;return new f.default(function(t){e&&"string"==typeof e?g.default.support()?g.default.set(y,(0,u.default)({data:e}),function(){t("data:image/png;base64,"+e)}):(console.error("兼容性错误：当前浏览器不支持LocalStorage。"),t(null)):r(n,i).then(function(e){g.default.support()?g.default.set(y,(0,u.default)(e),function(){t(e)}):(console.error("兼容性错误：当前浏览器不支持LocalStorage。"),t(null))})})}function o(t){var e=t.styleId,n=t.version,i=t.err;(0,_.qos)("icon",{styleId:e,version:n,error:i&&i.status||0})}function s(t){var e=t.styleId,n=t.version,i=t.time;(0,_.qos)("icon",{styleId:e,version:n,loadTime:i})}Object.defineProperty(e,"__esModule",{value:!0}),e.setPoiIcon=e.loadPoiIconFile=void 0;var l=n(94),u=i(l),c=n(23),f=i(c),d=n(79),h=i(d),p=n(120),v=i(p),m=n(89),g=i(m),_=n(44),y=v.default.QMAPI_poi_icon+"config";e.loadPoiIconFile=r,e.setPoiIcon=a},function(t,e,n){"use strict";function i(t){var e=["background_color","font_color","color_fill","color_side","color_border"];["regionStyles","lineStyles","pointStyles","labelStyles","arrowStyles"].forEach(function(n){var i=t[n];o(i,function(t,n){n.forEach(function(t){e.forEach(function(e){e in t&&(t[e]=a(t[e]))})})})})}var r=n(10),a=r.colorToRGBA,o=r.forIn;t.exports=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e={};return[p.BASE_LAYER_TYPE.region,p.BASE_LAYER_TYPE.line,p.BASE_LAYER_TYPE.label,p.BASE_LAYER_TYPE.point,p.BASE_LAYER_TYPE.arrow].forEach(function(n){e[n]={type:n,style:t[n+"Styles"]}}),e.point.relyStyle=e.label.style,e.point.relyStyleField="labelid",e}function a(t){var e,n=(e={},(0,f.default)(e,p.BASE_LAYER_TYPE.region,t.region.style),(0,f.default)(e,p.BASE_LAYER_TYPE.line,t.line.style),e),i={};return g.default.forIn(n,function(t,e){g.default.forIn(e,function(e,n){var r=n[0];if(r){var a=r.stylename;i[e]=i[e]||{id:e,name:a,type:t,styles:{}};for(var o=i[e],s=0,l=n.length;s<l;s++)r=n[s],o.styles[r.minScaleVal+"-"+r.maxScaleVal]=r}})}),i}function o(t){_(t);var e=r(t);return{style:e,layerMeta:a(e),styleTag:t.Tag}}function s(t){return new u.default(function(e){var n=null,i=null;if(y.support()){var r=h.default.QMAPI_style+t;y.get(r,function(r){r?(n=JSON.parse(r).data,i=o(n),i.styleId=t,e(i)):(0,v.loadStyleFileFromServer)({styleId:t,version:-1}).then(function(n){i=o(n.data),i.styleId=t,e(i)})})}else(0,v.loadStyleFileFromServer)({styleId:t,version:-1}).then(function(n){i=o(n.data),i.styleId=t,e(i)})})}Object.defineProperty(e,"__esModule",{value:!0});var l=n(23),u=i(l),c=n(164),f=i(c);e.parseStyle=o,e.getStyleForWorker=s;var d=n(120),h=i(d),p=n(53),v=n(401),m=n(10),g=i(m),_=n(729),y=n(89)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.animatableMap=void 0;var r=n(15),a=i(r),o=n(498),s=n(10),l=i(s),u={startAnimation:function(t,e){this.stopMoving(),this._prepareMoving();var n={center:this.getCenter(),zoom:this.getZoom(),pitch:this.getPitch(),rotation:this.getRotation()};this._animate(t,{onFrame:function(t){var e=t.percentage,n=t.frame,i=this.transform;l.default.forIn(n,function(t,e){switch(t){case"percentage":break;case"rotation":i.heading=-e;break;default:i[t]=e}}),this.emit("animation_playing",{percentage:e,frame:n}),this._fireMoveEvents()},onEnd:function(){this.emit("animation_ended"),this._moveToEnd()},onLoop:function(t){this.emit("animation_looped",t)},onStop:function(){this.emit("animation_stopped"),this._moveToEnd()},onPause:function(){this._moveToEnd()}},e,n)},stopAnimation:function(){this._stopAnimate()},pauseAnimation:function(){this._pauseAnimate()},resumeAnimation:function(){this._resumeAnimate()}};e.animatableMap=(0,a.default)(u,o.animatableMixin)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(27),a=i(r),o=n(25),s=i(o),l=n(115),u=i(l),c=n(125),f=i(c),d=n(18),h=i(d),p=n(95),v=i(p),m=n(0),g=i(m),_=n(1),y=i(_),x=n(354),b=function(){function t(){(0,g.default)(this,t),this.domCollisionMap=new v.default,this.domCrossCollisionMap=new v.default,this.domVectorCollisionMap=new v.default,this.needsUpdate=!1,this.debug=!1,this.debug&&(this.boxDOM=document.createElement("div"),document.body.appendChild(this.boxDOM),this.updateBoxDOM())}return(0,y.default)(t,[{key:"getAllDomCollisionMap",value:function(){var t={};return[].concat((0,h.default)(this.domCollisionMap),(0,h.default)(this.domCrossCollisionMap),(0,h.default)(this.domVectorCollisionMap)).forEach(function(e){t[e[0]]=e[1]}),t}},{key:"addCollision",value:function(t,e,n){var i=e.dom,r=i.getBoundingClientRect(),a=Number(i.style.zIndex);if(this.checkElementVisibility((0,f.default)({},e,{rect:r})))return void(this[n].has(t)&&this[n].delete(t));var o={leftTop:{x:r.left,y:r.top},rightBottom:{x:r.right,y:r.bottom}},s=new x.OBB({leftTop:{x:r.left,y:r.top},rightBottom:{x:r.right,y:r.bottom},width:r.width,height:r.height,angle:0});this[n].set(t,{dom:i,rank:a,obb:s,boundary:o}),this.needsUpdate=!0}},{key:"checkCrossLayerCollisionDataSet",value:function(){return!(!this.domCrossCollisionMap||!this.domVectorCollisionMap)&&(this.domCrossCollisionMap.size||this.domVectorCollisionMap.size)}},{key:"checkElementVisibility",value:function(t){var e=t.width,n=t.height,i=t.rect;return i.left>=e&&i.right>=e||i.left<=0&&i.right<=0||i.top>=n&&i.bottom>=n||i.top<=0&&i.bottom<=0}},{key:"removeCollision",value:function(t){[this.domCollisionMap,this.domCrossCollisionMap,this.domVectorCollisionMap].forEach(function(e){e&&e.has(t)&&e.delete(t)}),this.needsUpdate=!0}},{key:"updateVisibility",value:function(){var t=this.getAllDomCollisionMap();(0,u.default)(t).forEach(function(t){var e=t.dom;e.visible?e.style.visibility="visible":e.style.visibility="hidden"})}},{key:"updateBoxDOM",value:function(){var t=!0,e=!1,n=void 0;try{for(var i,r=(0,s.default)(this.domCollisionMap.entries());!(t=(i=r.next()).done);t=!0){var o=(0,a.default)(i.value,2),l=o[0],u=o[1],c="DO_"+l,f=this.boxDOM.querySelector("."+c),d=u.obb;if(f){var h="red";"visible"===u.dom.style.visibility&&(h="green"),f.style.cssText=["visibility: visible;","position:fixed;","top:"+(d.centerPoint[1]-d.halfHeight)+"px;","left:"+(d.centerPoint[0]-d.halfWidth)+"px;","width:"+2*d.halfWidth+"px;","height:"+2*d.halfHeight+"px;","box-sizing: border-box;","border: 4px solid "+h+";","z-index: 9999;"].join("")}else{var p=document.createElement("div");p.className=c,p.style.cssText=["visibility: visible;","position:fixed;","top:"+(d.centerPoint[1]-d.halfHeight)+"px;","left:"+(d.centerPoint[0]-d.halfWidth)+"px;","width:"+2*d.halfWidth+"px;","height:"+2*d.halfHeight+"px;","box-sizing: border-box;","border: 4px solid red;","z-index: 9999;"].join(""),this.boxDOM.appendChild(p)}}}catch(t){e=!0,n=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw n}}}},{key:"resetVisibility",value:function(){var t=this.getAllDomCollisionMap();(0,u.default)(t).forEach(function(t){t.dom.visible=!0})}},{key:"destroy",value:function(){[this.domCollisionMap,this.domCrossCollisionMap,this.domVectorCollisionMap].forEach(function(t){t.clear()}),this.domCollisionMap=null,this.domCrossCollisionMap=null,this.domVectorCollisionMap=null}}]),t}();e.default=b},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var n=document.createElement(t);return n.style.cssText=e,n}Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),o=i(a),s=n(0),l=i(s),u=n(1),c=i(u),f=n(5),d=i(f),h=n(4),p=i(h),v=n(407),m=i(v),g=n(46),_=i(g),y=n(10),x=n(36),b=i(x),S=n(29),w=n(28),E=n(44),A=b.default.isString,T=b.default.isNumber,M=b.default.isObject,I=["position:absolute;","left:0;top:0;","padding:0px 0px 6px;"],P=["min-width:100px;","white-space:nowrap;","background-color:white;","text-align:center;","padding:25px 10px 12px;","border-radius:6px;","box-shadow:0 2px 4px 0 rgba(0,0,0,0.15);"],k=["width:10px;height:10px;","background-color:white;","transform:rotate(45deg);","position:absolute;","bottom:1px;","left:0;right:0;","margin:auto;","box-shadow:2px 2px 2px rgba(0,0,0,0.15);"],L=["width:15px;height:15px;","position:absolute;","right:5px;top:5px;","cursor:pointer;"],C={x:0,y:0},R=function(t){function e(t){return(0,l.default)(this,e),(0,d.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t||{}))}return(0,p.default)(e,t),(0,c.default)(e,[{key:"onInit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.content="",this.zIndex=0,this.offset=C,this.enableCustom=!!t.enableCustom&&t.enableCustom,this._handlers=[],this._domResizeObserver=null,this.setContent(t.content).setZIndex(t.zIndex).setOffset(t.offset).setPosition(t.position),(0,E.statCn)("InfoWindow")}},{key:"onDestroy",value:function(){this._handlers.forEach(function(t){t&&t.remove()}),this._domResizeObserver&&this._domResizeObserver.disconnect()}},{key:"createDOM",value:function(){var t=this;if(this.enableCustom)return this.dom;var e=r("div",P.join(""));e.innerHTML=this.content,window.ResizeObserver&&(this._domResizeObserver=new ResizeObserver(function(){t.updateDOM()}),this._domResizeObserver.observe(e));var n=r("div",k.join("")),i=r("div",L.join(""));i.innerHTML='<svg style="fill: #aaa;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">\n<path d="M579.888 512l190.064-190.064a48 48 0 0 0-67.888-67.872L512 444.112 321.936 254.064a48 48 0 1 0-67.872 67.872L444.112 512 254.064 702.064a48 48 0 1 0 67.872 67.872L512 579.888l190.064 190.064a48 48 0 0 0 67.872-67.888L579.888 512z" fill></path>\n</svg>',this._handlers.push((0,w.on)(i,"click,touchend",function(){t.emit("closeclick"),t.close()}));var a=r("div",I.join(""));return a.appendChild(e),a.appendChild(n),a.appendChild(i),a.style.zIndex=this.zIndex,this._handlers.push((0,w.on)(a,"click, touchstart, touchend",function(t){t&&t.stopPropagation&&t.stopPropagation()})),a}},{key:"updateDOM",value:function(){if(this.map){var t=this.map.projectToContainer(this.position),e=this.offset.x||0,n=this.offset.y||0,i=t.x-this.dom.clientWidth/2+e+"px",r=t.y-this.dom.clientHeight+n+"px";this.dom.style.transform="translate("+i+", "+r+")"}}},{key:"close",value:function(){return this.dom&&(this.dom.style.display="none"),this}},{key:"open",value:function(){return this.dom&&(this.dom.style.display="",this.updateDOM()),this}},{key:"setPosition",value:function(t){return t instanceof _.default?(this.position=t,this.updateDOM()):console.error("类型错误: InfoWindow.position参数类型错误，应为TMap.LatLng。"),this}},{key:"getPosition",value:function(){return this.position}},{key:"setContent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!A(t))return new S.BaseTypeError("InfoWindow.content","string",t).error(),this;if(this.enableCustom){this._removeFromMap(),this.content=t;var e=(new DOMParser).parseFromString(t,"text/html").body.firstElementChild;if(e)return this.dom&&(e.style.cssText=this.dom.style.cssText),this.dom=e,this.dom.style.position="absolute",this._addToMap(),this;this.enableCustom=!1,console.error("自定义信息窗体解析错误: content内容无法被解析为DOM，将自动转为默认样式。")}return this.content=t,this.dom&&(this.dom.firstElementChild.innerHTML=this.content,this.updateDOM()),this}},{key:"setZIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return T(t)?(this.zIndex=t,this.dom&&(this.dom.style.zIndex=this.zIndex),this):(new S.BaseTypeError("InfoWindow.zIndex","number",t).error(),this)}},{key:"setOffset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;return M(t)?(t=(0,y.extend)({},C,t),T(t.x)?T(t.y)?(this.offset=t,this.dom&&this.updateDOM(),this):(new S.BaseTypeError("InfoWindow.offset.y","number",t.y).error(),this):(new S.BaseTypeError("InfoWindow.offset.x","number",t.x).error(),this)):(new S.BaseTypeError("InfoWindow.offset","object",t).error(),this)}}]),e}(m.default);e.default=R},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(125),a=i(r),o=n(17),s=i(o),l=n(3),u=i(l),c=n(0),f=i(c),d=n(1),h=i(d),p=n(5),v=i(p),m=n(32),g=i(m),_=n(4),y=i(_),x=n(46),b=i(x),S=n(349),w=i(S),E=n(158),A=n(53),T=n(504),M=n(36),I=i(M),P=n(225),k=P.CircleStyle,L=I.default.isValidColor,C=I.default.isNumber,R=function(t){function e(t){return(0,f.default)(this,e),(0,v.default)(this,(e.__proto__||(0,u.default)(e)).call(this,t))}return(0,y.default)(e,t),(0,h.default)(e,[{key:"_setGeometryType",value:function(){this._geometryType=E.GEOMETRY_TYPES.CIRCLE,this._layerType=A.RENDER_LAYER_TYPE.circle,this._className="MultiCircle"}},{key:"_checkGeometries",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(t,e){t?t.center&&t.center instanceof b.default?!t.radius||!C(t.radius)||t.radius<=0?console.error("MultiCircle.geometries: 希望传入CircleGeometry数组，实际第"+e+"元素的radius属性无效！"):(t.styleId||(t.styleId="default"),t._valid=!0):console.error("MultiCircle.geometries: 希望传入CircleGeometry数组，实际第"+e+"元素的center属性无效！"):console.error("MultiCircle.geometries: 希望传入CircleGeometry数组，实际第"+e+"元素不存在！")})}},{key:"_getDefaultStyle",value:function(){return new k}},{key:"_checkStyles",value:function(t){(0,g.default)(e.prototype.__proto__||(0,u.default)(e.prototype),"_checkStyles",this).call(this,t),(0,s.default)(t).forEach(function(e){var n=t[e];n&&n instanceof k?n instanceof k&&(L(n.color)?L(n.borderColor)||console.error("MultiCircle.styles: 样式id ",e," 对应的PolygonStyle.borderColor属性无效",n):console.error("MultiCircle.styles: 样式id ",e," 对应的PolygonStyle.color属性无效",n)):console.error("MultiCircle.styles: 样式id ",e,"希望传入CircleStyle实例，实际传入：",n)})}},{key:"_transferFromGeometry",value:function(t){return(0,g.default)(e.prototype.__proto__||(0,u.default)(e.prototype),"_transferFromGeometry",this).call(this,t).map(function(t){var e=t.center,n=t.radius;if(t._valid)return(0,a.default)({},t,{paths:(0,T.getCirclePath)(e,n)})}).filter(function(t){return!!t})}},{key:"_getAllPoints",value:function(){return this.getGeometries().map(function(t){return t.center})}},{key:"_getAllSegments",value:function(){return[]}}]),e}(w.default);t.exports=R},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(125),a=i(r),o=n(17),s=i(o),l=n(3),u=i(l),c=n(0),f=i(c),d=n(1),h=i(d),p=n(5),v=i(p),m=n(32),g=i(m),_=n(4),y=i(_),x=n(46),b=i(x),S=n(349),w=i(S),E=n(158),A=n(53),T=n(505),M=n(36),I=i(M),P=n(225),k=P.EllipseStyle,L=I.default.isValidColor,C=I.default.isNumber,R=function(t){function e(t){return(0,f.default)(this,e),(0,v.default)(this,(e.__proto__||(0,u.default)(e)).call(this,t))}return(0,y.default)(e,t),(0,h.default)(e,[{key:"_setGeometryType",value:function(){this._geometryType=E.GEOMETRY_TYPES.ELLIPSE,this._layerType=A.RENDER_LAYER_TYPE.ellipse,this._className="MultiEllipse"}},{key:"_checkGeometries",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(t,e){t?t.center&&t.center instanceof b.default?!t.majorRadius||!C(t.majorRadius)||t.majorRadius<=0?console.error("MultiEllipse.geometries: 希望传入EllipseGeometry数组，实际第"+e+"元素的majorRadius属性无效！"):!t.minorRadius||!C(t.minorRadius)||t.minorRadius<=0?console.error("MultiEllipse.geometries: 希望传入EllipseGeometry数组，实际第"+e+"元素的minorRadius属性无效！"):(t.styleId||(t.styleId="default"),t._valid=!0):console.error("MultiEllipse.geometries: 希望传入EllipseGeometry数组，实际第"+e+"元素的center属性无效！"):console.error("MultiEllipse.geometries: 希望传入EllipseGeometry数组，实际第"+e+"元素不存在！")})}},{key:"_getDefaultStyle",value:function(){return new k}},{key:"_checkStyles",value:function(t){(0,g.default)(e.prototype.__proto__||(0,u.default)(e.prototype),"_checkStyles",this).call(this,t),(0,s.default)(t).forEach(function(e){var n=t[e];n&&n instanceof k?n instanceof k&&(L(n.color)?L(n.borderColor)||console.error("MultiEllipse.styles: 样式id ",e," 对应的EllipseStyle.borderColor属性无效",n):console.error("MultiEllipse.styles: 样式id ",e," 对应的EllipseStyle.color属性无效",n)):console.error("MultiEllipse.styles: 样式id ",e,"希望传入EllipseStyle实例，实际传入：",n)})}},{key:"_transferFromGeometry",value:function(t){return(0,g.default)(e.prototype.__proto__||(0,u.default)(e.prototype),"_transferFromGeometry",this).call(this,t).map(function(t){var e=t.center,n=t.majorRadius,i=t.minorRadius;if(t._valid)return(0,a.default)({},t,{paths:(0,T.getEllipsePath)(e,n,i)})}).filter(function(t){return!!t})}},{key:"_getAllPoints",value:function(){return this.getGeometries().map(function(t){return t.center})}},{key:"_getAllSegments",value:function(){return[]}}]),e}(w.default);t.exports=R},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(t&&t.length===e.length){for(var n=0;n<t.length;n++)if(t[n].heightSum!==e[n].heightSum||t[n].widthSum!==e[n].widthSum)return!1;return!0}return!1}var a=n(25),o=i(a),s=n(17),l=i(s),u=n(15),c=i(u),f=n(3),d=i(f),h=n(0),p=i(h),v=n(1),m=i(v),g=n(5),_=i(g),y=n(32),x=i(y),b=n(4),S=i(b),w=n(46),E=i(w),A=n(311),T=i(A),M=n(408),I=i(M),P=n(158),k=n(53),L=n(36),C=i(L),R=C.default.isNumber,D=C.default.isUndefined,N=C.default.isString,B=function(t){function e(t){(0,p.default)(this,e);var n=(0,_.default)(this,(e.__proto__||(0,d.default)(e)).call(this,t));return n.labelInfoList=null,n._labelBoxListener=n._labelBoxListener.bind(n),n.map.on("data_render",n._labelBoxListener),n}return(0,S.default)(e,t),(0,m.default)(e,[{key:"_initialize",value:function(t){var e=t.enableCollision,n=t.collisionOptions,i=(0,c.default)(n||{});i.sameSource=!0===i.sameSource||!0===e,i.crossSource=!0===i.crossSource,i.vectorBaseMapSource=!0===i.vectorBaseMapSource,this.collisionOptions=i}},{key:"_createLayer",value:function(){(0,x.default)(e.prototype.__proto__||(0,d.default)(e.prototype),"_createLayer",this).call(this),this.layer._collisionOptions=this.collisionOptions}},{key:"_setGeometryType",value:function(){this._geometryType=P.GEOMETRY_TYPES.LABEL,this._layerType=k.RENDER_LAYER_TYPE.label,this._className="MultiLabel"}},{key:"_checkGeometries",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(t,e){t?t.styleId?t.position&&t.position instanceof E.default?t.content?D(t.rank)||R(t.rank)?D(t.collisionGroupId)||N(t.collisionGroupId)||(console.error("MultiLabel.geometries: 希望传入LabelGeometry数组，实际第"+e+"元素的collisionGroupId属性无效!"),t.collisionGroupId=void 0):console.error("MultiLabel.geometries: 希望传入LabelGeometry数组，实际第"+e+"元素的rank属性无效!"):console.error("MultiLabel.geometries: 希望传入LabelGeometry数组，实际第"+e+"元素的content属性无效!"):console.error("MultiLabel.geometries: 希望传入LabelGeometry数组，实际第"+e+"元素的position属性无效！"):t.styleId="default":console.error("MultiLabel.geometries: 希望传入LabelGeometry数组，实际第"+e+"元素不存在！")})}},{key:"_getDefaultStyle",value:function(){return new I.default}},{key:"_checkStyles",value:function(t){(0,x.default)(e.prototype.__proto__||(0,d.default)(e.prototype),"_checkStyles",this).call(this,t),(0,l.default)(t).forEach(function(e){var n=t[e];n&&n instanceof I.default||console.error("MultiLabel.styles: 样式id ",e,"希望传入LabelStyle实例，实际传入：",n)})}},{key:"getLabelBoxes",value:function(t){if(!(D(t)||this.geometries.find(function(e){return e.id==t})&&t))return console.error("id不存在！"),{};var e={},n=this.labelInfoList;if(t){var i=!0,r=!1,a=void 0;try{for(var s,l=(0,o.default)(n);!(i=(s=l.next()).done);i=!0){var u=s.value;if(u.geometry.id==t){e={};var c=u.style.size/(u.fontSize+4)*u.heightSum,f=u.style.size/(u.fontSize+4)*u.widthSum;e[u.geometry.id]=[f,c];break}}}catch(t){r=!0,a=t}finally{try{!i&&l.return&&l.return()}finally{if(r)throw a}}}else{var d=!0,h=!1,p=void 0;try{for(var v,m=(0,o.default)(n);!(d=(v=m.next()).done);d=!0){var g=v.value,_=g.style.size/(g.fontSize+4)*g.heightSum,y=g.style.size/(g.fontSize+4)*g.widthSum;e[g.geometry.id]=[y,_]}}catch(t){h=!0,p=t}finally{try{!d&&m.return&&m.return()}finally{if(h)throw p}}}return e}},{key:"_labelBoxListener",value:function(){var t=this;if(this.map){var e=this.map.renderEngine.data.filter(function(e){return e.id==t.id});if(e[0]&&e[0].tiles[0]){var n=e[0].tiles[0].features.labelInfoList;n&&!r(this.labelInfoList,n)&&(this.labelInfoList=n,this.emit("labelBox_changed"))}}}},{key:"destroy",value:function(){this.map.off("data_render",this._labelBoxListener),this.labelInfoList=null,(0,x.default)(e.prototype.__proto__||(0,d.default)(e.prototype),"destroy",this).call(this)}}]),e}(T.default);t.exports=B},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(17),a=i(r),o=n(15),s=i(o),l=n(3),u=i(l),c=n(0),f=i(c),d=n(1),h=i(d),p=n(5),v=i(p),m=n(32),g=i(m),_=n(4),y=i(_),x=n(149),b=i(x),S=n(391),w=n(416),E=i(w),A=n(10),T=n(75),M=i(T),I=n(46),P=i(I),k=n(311),L=i(k),C=n(158),R=n(53),D=n(120),N=n(28),B=n(533),O=function(t){return"number"==typeof t&&!(0,b.default)(t)},F=function(t){function e(t){(0,f.default)(this,e);var n=(0,v.default)(this,(e.__proto__||(0,u.default)(e)).call(this,t));return(0,s.default)(n,S.easableMixin),n._movingState=null,n._pausedState=null,n}return(0,y.default)(e,t),(0,h.default)(e,[{key:"_initialize",value:function(t){var e=t.enableCollision,n=t.collisionOptions,i=(0,s.default)(n||{});i.sameSource=!0===i.sameSource||!0===e,i.crossSource=!0===i.crossSource,i.vectorBaseMapSource=!0===i.vectorBaseMapSource,this.collisionOptions=i}},{key:"_createLayer",value:function(){(0,g.default)(e.prototype.__proto__||(0,u.default)(e.prototype),"_createLayer",this).call(this),this.layer._collisionOptions=this.collisionOptions,this._enterLeaveAnimation(!0)}},{key:"_setGeometryType",value:function(){this._geometryType=C.GEOMETRY_TYPES.POINT,this._layerType=R.RENDER_LAYER_TYPE.marker,this._className="MultiMarker"}},{key:"_checkGeometries",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=!1;e.forEach(function(t,e){t?t.styleId||(t.styleId="default"):console.error("MultiMarker.geometries: 希望传入PointGeometry数组，实际第"+e+"元素不存在！"),t.position&&t.position instanceof P.default||console.error("MultiMarker.geometries: 希望传入PointGeometry数组，实际第"+e+"元素的position属性无效！"),t.markerAnimation&&(n=!0)}),n&&(this.hasEnterLeaveAnimation=!0,e.forEach(function(e,n){t._checkMarkerAnimation(e,n)}))}},{key:"_checkMarkerAnimation",value:function(t,e){var n=t.markerAnimation;if(n){var i=n.enter,r=n.leave;if(i){var a=this._checkMarkerAnimationParams(i,e);this.maxEnterDuration=Math.max(a,this.maxEnterDuration||0)}if(r){var o=this._checkMarkerAnimationParams(r,e);this.maxLeaveDuration=Math.max(o,this.maxLeaveDuration||0)}}}},{key:"_checkMarkerAnimationParams",value:function(t,e){var n=t.scaleStart,i=void 0===n?D.DEFAULT_MARKER_ANIMATION_PARAMS.scaleStart:n,r=t.scaleEnd,a=void 0===r?D.DEFAULT_MARKER_ANIMATION_PARAMS.scaleEnd:r,o=t.alphaStart,s=void 0===o?D.DEFAULT_MARKER_ANIMATION_PARAMS.alphaStart:o,l=t.alphaEnd,u=void 0===l?D.DEFAULT_MARKER_ANIMATION_PARAMS.alphaEnd:l,c=t.duration,f=void 0===c?D.DEFAULT_MARKER_ANIMATION_PARAMS.duration:c;return(!O(i)||i<0)&&(console.error("MultiMarker.geometries: 希望传入PointGeometry数组，实际第"+e+"元素动画参数的scaleStart属性无效: "+i),i=D.DEFAULT_MARKER_ANIMATION_PARAMS.scaleStart),(!O(a)||a<0)&&(console.error("MultiMarker.geometries: 希望传入PointGeometry数组，实际第"+e+"元素动画参数的scaleEnd属性无效: "+a),a=D.DEFAULT_MARKER_ANIMATION_PARAMS.scaleEnd),(!O(s)||s<0||s>1)&&(console.error("MultiMarker.geometries: 希望传入PointGeometry数组，实际第"+e+"元素动画参数的alphaStart属性无效: "+s),s=D.DEFAULT_MARKER_ANIMATION_PARAMS.alphaStart),(!O(u)||u<0||u>1)&&(console.error("MultiMarker.geometries: 希望传入PointGeometry数组，实际第"+e+"元素动画参数的alphaEnd属性无效: "+u),u=D.DEFAULT_MARKER_ANIMATION_PARAMS.alphaEnd),(!O(f)||f<0)&&(console.error("MultiMarker.geometries: 希望传入PointGeometry数组，实际第"+e+"元素动画参数的duration属性无效: "+f),f=D.DEFAULT_MARKER_ANIMATION_PARAMS.duration),t.scaleStart=i,t.scaleEnd=a,t.alphaStart=s,t.alphaEnd=u,t.duration=f,t.duration}},{key:"_getDefaultStyle",value:function(){return new B}},{key:"_checkStyles",value:function(t){(0,g.default)(e.prototype.__proto__||(0,u.default)(e.prototype),"_checkStyles",this).call(this,t),(0,a.default)(t).forEach(function(e){var n=t[e];n&&n instanceof B?n.width&&n.width>0&&n.width%1==0?n.height&&n.height>0&&n.height%1==0?n.src||console.error("MultiMarker.styles: 样式id ",e," 对应的MarkerStyle.src属性无效",n):console.error("MultiMarker.styles: 样式id ",e," 对应的MarkerStyle.height属性无效",n):console.error("MultiMarker.styles: 样式id ",e," 对应的MarkerStyle.width属性无效",n):console.error("MultiMarker.styles: 样式id ",e,"希望传入MarkerStyle实例，实际传入：",n)})}},{key:"moveAlong",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.autoRotation,r=void 0!==i&&i;if(!this.getMap())return this;this.stopMove();var o={},l=this.map.transform.getDistanceScales(),u=l.pixelsPerMeter,c=l.pixelsPerDegree,f=[c[0]/u[0],c[1]/u[1]];try{(0,a.default)(t).forEach(function(n){if(!(n in e._idSet))return void console.warn("MultiMarker中并不存在id为: "+n+"的点！");var i=t[n],r=i.path,a=i.duration,s=i.speed;if(e._checkMoveAlongParams(i,n)){var l=[],u=0,c=0;if(r.forEach(function(t,e,n){if(e!==n.length-1){var i=void 0;n[e+1].lng*t.lng<0&&(i=t.lng/Math.abs(t.lng)*(180-Math.abs(n[e+1].lng))+(180-Math.abs(t.lng)));var r=new M.default((i||n[e+1].lng-t.lng)*f[0],(n[e+1].lat-t.lat)*f[1]),a=r.mag();u+=a,l.push({angle:r.angle(),segDistance:a,start:t,end:n[e+1],radio:null,totalRadio:null})}}),0===u)return void console.error("moveAlong方法中id为"+n+"对应的path计算得到的总长度为0");var d=s/3.6,h=a||u/d*1e3;l.forEach(function(t){t.radio=t.segDistance/u,c+=t.radio,t.totalRadio=c,t.pendingTime=t.radio*h,t.totalPendingTime=t.totalRadio*h,t.totalDistance=u}),o[n]={segmentInfos:l,pendingTime:h,curSeg:0,geometry:e._rawGeometries[e._idSet[n]],param:i}}})}catch(t){console.error("moveAlong数据解析出错，请检查传入参数是否合法",t)}this._moveParamSet=t;var d=[],h=0;return(0,a.default)(o).forEach(function(e){var n=o[e].geometry;n.position.equals(t[e].path[0])||d.push((0,s.default)({},n,{position:t[e].path[0]})),h=h>o[e].pendingTime?h:o[e].pendingTime}),d.length>0&&this.updateGeometries(d),this._startMoveAnimation(o,{duration:h,startTime:0,autoRotation:r}),this}},{key:"_checkMoveAlongParams",value:function(t,e){var n=t.path,i=t.duration,r=t.speed,a=void 0!==i,o=void 0!==r;return Array.isArray(n)&&n.length>0?a||o?a&&(!O(i)||i<=0)?(console.error("moveAlong方法中id为"+e+"对应的duration: "+i+"不合法!"),!1):!(o&&(!O(r)||r<=0))||(console.error("moveAlong方法中id为"+e+"对应的speed: "+r+"不合法!"),!1):(console.error("moveAlong方法中id为"+e+"对应的duration和speed均未定义!"),!1):(console.error("moveAlong方法中id为"+e+"对应的path: "+n+"不合法!"),!1)}},{key:"_startMoveAnimation",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.duration,r=void 0===i?0:i,o=n.startTime,l=void 0===o?0:o,u=n.autoRotation,c=void 0!==u&&u,f=this._moveParamSet;this._ease(function(n){var i=[],o={},u=l+n*r;(0,a.default)(t).forEach(function(n){var r=t[n],a=r.segmentInfos[r.curSeg];if(a){for(;u>a.totalPendingTime&&(r.curSeg+=1,a=r.segmentInfos[r.curSeg]););if(a){var l=new P.default(0,0),d=(u+a.pendingTime-a.totalPendingTime)/a.pendingTime;if(l.lat=(0,E.default)(a.start.lat,a.end.lat,d),l.lng=(0,E.default)(a.start.lng,a.end.lng,d),a.start.lng*a.end.lng<0){var h=a.start.lng,p=a.end.lng,v=(180-Math.abs(h))/(180-Math.abs(h)+(180-Math.abs(p)));l.lng=d<=v?d/v*(180-Math.abs(h))*(h/Math.abs(h))+h:p/Math.abs(p)*(180-(d-v)/(1-v)*(180-Math.abs(p)))}r.geometry.position=l;var m=r.geometry.styleId&&0===e.styles[r.geometry.styleId].faceTo;c&&m&&(r.geometry.properties=(0,s.default)({},r.geometry.properties,{$angle:(0,A.radianToDegree)(a.angle)-90}));var g=f[n].path.slice(0,r.curSeg+1);g.push(l),o[n]={passedLatLngs:g,angle:r.geometry.properties&&r.geometry.properties.$angle},i.push(r.geometry)}}}),e._movingState={moveAlongProcessed:t,time:u,left:(1-n)*r,autoRotation:c},e.updateGeometries(i);var d=e.getMap();d&&d._changeFPS(),e.emit("moving",o)},function(){e._movingState=null,e._pausedState=null,e.emit("move_ended",f)},function(){e._movingState&&(e.emit("move_stopped",f),e._pausedState=null,e._movingState=null)},{easing:A.linearEase,animate:!0,duration:r})}},{key:"stopMove",value:function(){return this._abortFn&&(this._abortFn(),this._abortFn=null),this._finishFn=null,this}},{key:"pauseMove",value:function(){return this._movingState&&(this._pausedState=this._movingState,this._movingState=null,this.stopMove(),this.emit("move_paused")),this}},{key:"resumeMove",value:function(){if(this._pausedState){var t=this._pausedState,e=t.moveAlongProcessed,n=t.autoRotation,i=t.time,r=t.left;this._startMoveAnimation(e,{duration:r,autoRotation:n,startTime:i}),this._pausedState=null,this._movingState=null,this.emit("move_resumed")}return this}},{key:"_getAllPoints",value:function(){return this.getGeometries().map(function(t){return t.position})}},{key:"_enterLeaveAnimation",value:function(t,e,n,i){var r=this;this._enterLeave&&this._enterLeave(),this._enterLeaveFinish=n,this._enterLeaveFinishParms=i,this.map&&this.map.keepHighFps(!0);var a=t?this.maxEnterDuration:this.maxLeaveDuration;this._enterLeave=(0,N.timed)(function(n){this.geometries.forEach(function(i){if(i.animateScale=1,i.animateAlpha=1,!e||e.length&&e.indexOf(i.id)>-1){var r=n*a;if(i.markerAnimation){var o=t?i.markerAnimation.enter:i.markerAnimation.leave;if(o){var s=o.scaleStart,l=o.scaleEnd,u=o.alphaStart,c=o.alphaEnd,f=o.duration;i.animateScale=r>f?t?1:0:s+r/f*(l-s),i.animateAlpha=r>f?t?1:0:u+r/f*(c-u)}else i.animateAlpha=t?1:0}1===n&&(i.animateScale=t?1:0,i.animateAlpha=t?1:0)}}),this.updateGeometries(this.geometries),1===n&&this._finishAction()},function(){r._finishAction()},a,this)}},{key:"_finishAction",value:function(){this._enterLeaveFinish&&this._enterLeaveFinish.call(this,this._enterLeaveFinishParms),this._enterLeaveFinish=null,this._enterLeaveFinishParms=null,this.map&&this.map.keepHighFps(!1)}},{key:"setMap",value:function(t){return null===t||t instanceof window.TMap.Map?t===this.map?this:(t?this.map?(this.setMap(null),this.setMap(t)):this.id&&t.getLayer(this.id)?console.error("Map中已存在id为"+this.id+"的图层，无法重复添加"):(this.map=t,this._bindBubbleHandler(),this._createLayer()):this.hasEnterLeaveAnimation?this._enterLeaveAnimation(!1,null,this._removeLayerAction):this._removeLayerAction(),this):(console.error("所传入参数并非TMap.Map的实例！"),this)}},{key:"_removeLayerAction",value:function(){this._removeBubbleHander(),this._removeLayer(),this.map=null}},{key:"setVisible",value:function(t){return t=Boolean(t),this.getVisible()===t?this:(this.hasEnterLeaveAnimation?t?(this._visibleAction(t),this._enterLeaveAnimation(t)):this._enterLeaveAnimation(t,null,this._visibleAction,t):this._visibleAction(t),this)}},{key:"_visibleAction",value:function(t){this.layer&&this.layer.setVisible(t)}},{key:"add",value:function(t){var e=this;return t?(this.hasEnterLeaveAnimation&&this._enterLeave&&this._enterLeave(),Array.isArray(t)||(t=[t]),this._checkGeometries(t,this.styles),this._addIDs=[],this._assignIdToGeometry(t).forEach(function(t){e._idSet.hasOwnProperty(t.id)||(e._idSet[t.id]=e._rawGeometries.length,e.hasEnterLeaveAnimation&&(e._addIDs.push(t.id),t.animateAlpha=0),e._rawGeometries.push(t))}),this.updateGeometries(this._rawGeometries,!0),this.hasEnterLeaveAnimation&&this._enterLeaveAnimation(!0,this._addIDs),this):this}},{key:"remove",value:function(t){return this.hasEnterLeaveAnimation?this._enterLeaveAnimation(!1,t,this._removeAction,t):this._removeAction(t),this}},{key:"_removeAction",value:function(t){return(0,g.default)(e.prototype.__proto__||(0,u.default)(e.prototype),"remove",this).call(this,t)}},{key:"destroy",value:function(){this.hasEnterLeaveAnimation?this._enterLeaveAnimation(!1,null,this._destroyAction):this._destroyAction()}},{key:"_destroyAction",value:function(){this.hasEnterLeaveAnimation=!1,(0,g.default)(e.prototype.__proto__||(0,u.default)(e.prototype),"destroy",this).call(this),this._enterLeave=null,this._addIDs=[]}},{key:"setGeometries",value:function(t){return(0,g.default)(e.prototype.__proto__||(0,u.default)(e.prototype),"setGeometries",this).call(this,t),this._updateEnterLeaveInfo(),this}},{key:"updateGeometries",value:function(t,n){return(0,g.default)(e.prototype.__proto__||(0,u.default)(e.prototype),"updateGeometries",this).call(this,t,n),this._updateEnterLeaveInfo(),this}},{key:"_updateEnterLeaveInfo",value:function(){var t=!1,e=0,n=0;this.geometries.forEach(function(i){if(i.markerAnimation){t=!0;var r=i.markerAnimation,a=r.enter,o=r.leave;a&&(e=Math.max(a.duration||0,e)),o&&(n=Math.max(o.duration||0,n))}}),this.hasEnterLeaveAnimation=t,this.maxEnterDuration=e,this.maxLeaveDuration=n}}]),e}(L.default);t.exports=F},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(125),a=i(r),o=n(17),s=i(o),l=n(3),u=i(l),c=n(0),f=i(c),d=n(1),h=i(d),p=n(5),v=i(p),m=n(32),g=i(m),_=n(4),y=i(_),x=n(349),b=i(x),S=n(158),w=n(53),E=n(342),A=n(36),T=i(A),M=n(214),I=i(M),P=n(225),k=P.RectangleStyle,L=T.default.isValidColor,C=T.default.isNumber,R=T.default.isValidLatLng,D=function(t){function e(t){return(0,f.default)(this,e),(0,v.default)(this,(e.__proto__||(0,u.default)(e)).call(this,t))}return(0,y.default)(e,t),(0,h.default)(e,[{key:"_setGeometryType",value:function(){this._geometryType=S.GEOMETRY_TYPES.RECTANGLE,this._layerType=w.RENDER_LAYER_TYPE.rectangle,this._className="MultiRectangle"}},{key:"_checkGeometries",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(t,e){t?t.center&&t.center instanceof TMap.LatLng?!t.width||!C(t.width)||t.width<=0?console.error("MultiRectangle.geometries: 希望传入RectangleGeometry数组，实际第"+e+"元素的width属性无效！"):!t.height||!C(t.height)||t.height<=0?console.error("MultiRectangle.geometries: 希望传入RectangleGeometry数组，实际第"+e+"元素的height属性无效！"):(t.styleId||(t.styleId="default"),t._valid=!0):console.error("MultiRectangle.geometries: 希望传入RectangleGeometry数组，实际第"+e+"元素的center属性无效！"):console.error("MultiRectangle.geometries: 希望传入RectangleGeometry数组，实际第"+e+"元素不存在！")})}},{key:"_getDefaultStyle",value:function(){return new k}},{key:"_checkStyles",value:function(t){(0,g.default)(e.prototype.__proto__||(0,u.default)(e.prototype),"_checkStyles",this).call(this,t),(0,s.default)(t).forEach(function(e){var n=t[e];n&&n instanceof k?n instanceof k&&(L(n.color)?L(n.borderColor)||console.error("MultiRectangle.styles: 样式id ",e," 对应的RectangleStyle.borderColor属性无效",n):console.error("MultiRectangle.styles: 样式id ",e," 对应的RectangleStyle.color属性无效",n)):console.error("MultiRectangle.styles: 样式id ",e,"希望传入RectangleStyle实例，实际传入：",n)})}},{key:"_transferFromGeometry",value:function(t){return(0,g.default)(e.prototype.__proto__||(0,u.default)(e.prototype),"_transferFromGeometry",this).call(this,t).map(function(t){var e=t.center,n=t.width,i=t.height;if(t._valid)return(0,a.default)({},t,{paths:(0,E.getRectanglePath)(e,n,i)})}).filter(function(t){return!!t})}}],[{key:"getBounds",value:function(t){if(!t)return void console.error("geometry参数无效,预期是RectangleGeometry对象，实际传入：",t);var e=t.center,n=t.width,i=t.height;if(!e||!R(e))return void console.error("RectangleGeometry.center 属性无效,预期是符合要求的经纬度坐标，实际传入：",e);if(!C(n)||n<=0)return void console.error("RectangleGeometry.width 属性无效,预期是正数，实际传入：",n);if(!C(i)||i<=0)return void console.error("RectangleGeometry.height 属性无效,预期是正数，实际传入：",i);var r=(0,E.getRectanglePath)(e,n,i);return new I.default(r[2],r[0])}}]),e}(b.default);t.exports=D},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(407),v=i(p),m=n(591),g=i(m),_=n(304),y=function(t){function e(){return(0,s.default)(this,e),(0,f.default)(this,(e.__proto__||(0,a.default)(e)).apply(this,arguments))}return(0,h.default)(e,t),(0,u.default)(e,[{key:"onInit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.count=t.count,this.instance=t.instance,this.position=this.instance.center||this.instance.position,this.zoomOnClick=t.zoomOnClick,this.zIndex=t.zIndex,this._handlers=[],this.visible=!0}},{key:"createDOM",value:function(){var t=this,e=document.createElement("div");return this.instance&&this._updateContent(e),this.finger=new _.Finger(e,{preventDefaultMove:!0,preventDefaultEnd:!0}),this.finger.on("tap",function(){t.instance.geometries&&t.visible&&t.zoomOnClick&&t.map.fitBounds(t.instance.bounds),t.emit("overlay-click",t.instance)}),e}},{key:"updateContent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.count=t.count,this.instance=t.instance,this.position=this.instance.center||this.instance.position,this._updateContent(this.dom),this.updateDOM(),this.map!==t.map&&this.setMap(t.map),this}},{key:"_updateContent",value:function(t){var e=t.style.visibility;if(1===this.count){t.textContent="",t.style.cssText=["position:absolute;","width: 32px;","height: 32px;","visibility: "+e+";","z-index: "+this.zIndex+";"].join(" ");var n=document.createElement("img");n.height=32,n.src=g.default,n.style.cssText=["position: absolute;","bottom: 16px;"].join(" "),t.appendChild(n)}else t.style.cssText="\n\t\t\tposition: absolute;\n\t\t\twidth: 40px;\n\t\t\theight: 40px;\n\t\t\tborder-radius: 40px;\n\t\t\tbackground-color: green;\n\t\t\ttransform: translate3d(718.348px, 395.68px, 0px);\n\t\t\ttext-align: center;\n\t\t\tline-height: 40px;\n\t\t\tbox-shadow: 0 1px 1px 0 rgba(0,0,0,0.2);\n\t\t\tborder: 1px solid #3875FF;\n\t\t\tbackground-color: rgba(227,235,255,0.9);\n\t\t\tfont-size: 14px;\n\t\t\tcolor: #1D63FF;\n      visibility: "+e+";\n      z-index: "+this.zIndex+";",t.textContent=this.count}},{key:"updateDOM",value:function(){if(this.map&&this.visible){var t=this.map.projectToContainer(this.position),e=t.getX()-20+"px",n=t.getY()-20+"px";this.dom.style.transform="translate3d("+e+", "+n+", 0px)"}}},{key:"setVisible",value:function(t){return this.visible=!!t,this.dom.style.display=this.visible?"":"none",this}},{key:"onDestroy",value:function(){this._handlers.forEach(function(t){return t.remove()}),this.finger&&this.finger.destroy(),this.removeAllListeners(),this.count=null,this.instance=null,this.position=null,this.dom=null,this.visible=null}}]),e}(v.default);e.default=y},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(94),a=i(r),o=n(3),s=i(o),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),p=n(32),v=i(p),m=n(4),g=i(m),_=n(22),y=i(_),x=n(506),b=i(x),S=n(532),w=i(S),E=n(696),A=i(E),T=n(28),M=i(T),I=n(10),P=i(I),k=n(46),L=i(k),C=n(768),R=i(C),D=n(29),N=n(44),B=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.default)(this,e);var n=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this));return n.id=t.id||P.default.uniqueId(),n._defaultMarkers=[],n.clusters=[],n._overlayList=[],n._eventHandlers=[],n._ready=!1,n._prevZoom=null,n._cacheCluster=n.clusters,n.zIndex=t.zIndex||null,n.enableDefaultStyle=!1!==t.enableDefaultStyle,n.minimumClusterSize=t.minimumClusterSize||2,n.zoomOnClick=!!n.enableDefaultStyle&&!1!==t.zoomOnClick,n.gridSize=t.gridSize||60,n.averageCenter=!1!==t.averageCenter,n.maxZoom=P.default.clamp(t.maxZoom||y.default.maxZoom,y.default.minZoom,y.default.maxZoom),n._checkGeometries(t.geometries),n._rawGeometries=n._assignIdToGeometry(t.geometries),n._idSet=n._updateGeometryIdSet(n._rawGeometries),n.geometries=n._rawGeometries,n.collisionOptions=t.collisionOptions||{sameSource:!1,crossSource:!1,vectorBaseMapSource:!1},n.collisionOptions.sameSource=!1,t.map&&n.setMap(t.map),(0,N.statCn)("Map"),n}return(0,g.default)(e,t),(0,f.default)(e,[{key:"setMap",value:function(t){return t===this.map?this:null===t||t instanceof window.TMap.Map?(t?this.map?(this.setMap(null),this.setMap(t)):this.id&&t.getLayer(this.id)?console.error("Map中已存在id为"+this.id+"的图层，无法重复添加"):(this.map=t,this._bindEventHandler(),this._createLayer(),this._ready=!0,this._redraw()):(this._removeEventHander(),this._removeLayer(),this._overlayList.forEach(function(t){return t.setMap(null)}),this.map=null,this._ready=!1),this):(console.error("所传入参数并非TMap.Map的实例！"),this)}},{key:"setGeometries",value:function(t){return Array.isArray(t)?t===this._rawGeometries?this:((0,v.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"setGeometries",this).call(this,t,this.styles),this):(new D.BaseTypeError("geometries","Array",t).error(),this)}},{key:"updateGeometries",value:function(t,n){return t?((0,v.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"updateGeometries",this).call(this,t,n),this):this}},{key:"_bindEventHandler",value:function(){var t=this;this._eventHandlers.push(M.default.on(this.map,"zoom",function(){var e=P.default.round(t.map.getZoom(),1);t._prevZoom!==e&&(t._prevZoom=e,t._resetViewport())})),this._eventHandlers.push(M.default.on(this.map,"idle",function(){t._redraw()})),this._eventHandlers.push(M.default.on(this,"geometry_changed",function(){t.map&&(t.map&&t.map.getSource(t.id).setData(t.geometries),t._resetViewport(),t._redraw())}))}},{key:"_removeEventHander",value:function(){this._eventHandlers.forEach(function(t){return t.remove()})}},{key:"getMap",value:function(){return this.map}},{key:"_createLayer",value:function(){this.layer=new A.default({map:this.map,id:this.id,type:this._layerType,zIndex:this.zIndex,maxZoom:this.maxZoom,gridSize:this.gridSize,minimumClusterSize:this.minimumClusterSize,averageCenter:this.averageCenter,sourceData:this.geometries})}},{key:"_removeLayer",value:function(){this.layer.setMap(null)}},{key:"_resetViewport",value:function(){this.clusters=[],this._resetCluster=!0}},{key:"_redraw",value:function(){var t=this;if(this._ready&&this.map.getSource(this.id)){var e=this.map.transform.getDistanceScales(),n=this.map.getBounds();this.map.getSource(this.id).getCluster({pixelsPerDegree:e.pixelsPerDegree,resetCluster:this._resetCluster,mapBounds:{sw:n.getSouthWest(),ne:n.getNorthEast()},zoom:this.map.getZoom()},function(e){t.clusters=e.map(function(t){return b.default.normalizeClusterInfo(t)}),t._checkClusterChange(),t._repaint()}),this._resetCluster=!1}}},{key:"_repaint",value:function(){var t=this;if(this.enableDefaultStyle&&this.layer.visible){this._overlayList.forEach(function(t){return t.setVisible(!1)});var e=0,n=this._overlayList.length;this.clusters.forEach(function(i){var r={count:i.geometries.length,instance:i,map:t.map,zoomOnClick:t.zoomOnClick,collisionOptions:t.collisionOptions,zIndex:t.zIndex||0};t._constructOverlay(e,n,r),e+=1})}}},{key:"_constructOverlay",value:function(t,e,n){var i=this;if(t<e)this._overlayList[t].setVisible(!0),this._overlayList[t].updateContent(n);else{var r=new R.default(n);r.on("overlay-click",function(t){var e={};t.geometries?e.cluster=t:e.geometry=t,i.emit("click",e)}),this._overlayList.push(r)}}},{key:"_checkClusterChange",value:function(){var t=this,e=this.clusters,n=[];e.forEach(function(t){n.push((0,a.default)(t.geometries))});var i=!1;n.forEach(function(e,n){e!==(t._cacheCluster&&t._cacheCluster[n])&&(i=!0)}),i&&0!==n.length&&(this._cacheCluster=n,this.emit("cluster_changed"))}},{key:"_checkGeometries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.filter(function(t,n){return t?t.position&&t.position instanceof L.default?(t.styleId&&e[t.styleId]||(t.styleId="default"),!0):(console.error("MarkerCluster.geometries: 希望传入PointGeometry数组，实际第"+n+"元素的position属性无效！"),!1):(console.error("MarkerCluster.geometries: 希望传入PointGeometry数组，实际第"+n+"元素不存在！"),!1)})}},{key:"getClusters",value:function(){return this.clusters}},{key:"zoomInCluster",value:function(t){t.bounds?this.map.fitBounds(t.bounds):console.warn("聚合簇 "+t+" 缺少bounds信息")}},{key:"setVisible",value:function(t){this._overlayList.forEach(function(t){return t.setVisible(!1)}),this.layer.setVisible(t),this._repaint()}},{key:"getVisible",value:function(){return this.layer.visible}},{key:"destroy",value:function(){this.setMap(null),this._resetViewport(),this._overlayList.forEach(function(t){return t.destroy()}),this._defaultMarkers=null,this.clusters=null,this._overlayList=null,this._eventHandlers=null,this._ready=null,this._prevZoom=null,this._cacheCluster=null,this.zIndex=null,this.enableDefaultStyle=null,this.minimumClusterSize=null,this.zoomOnClick=null,this.gridSize=null,this.averageCenter=null,this.maxZoom=null,this._rawGeometries=null,this.id=null,this._idSet=null,this.geometries=null}}]),e}(w.default);e.default=B},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(28),v=i(p),m=n(814),g=i(m),_=n(93),y=function(t){function e(t,n){(0,s.default)(this,e);var i=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this));return i.map=t,i.el=i.map.getContainer(),i.eventHandlers=[],i.pickQuery=new g.default(i.map),i.featurePicking=n.featurePicking,i.pickingRadius=n.pickingRadius,[{type:"mousedown",immediate:!0,delay:!1},{type:"mouseout",immediate:!0,delay:!1},{type:"mouseover",immediate:!0,delay:!1},{type:"mouseup",immediate:!0,delay:!1},{type:"touchstart",immediate:!0,delay:!1},{type:"touchend",immediate:!0,delay:!1},{type:"touchcancel",immediate:!1,delay:!1},{type:"click",immediate:!0,delay:!1},{type:"rightclick",immediate:!1,delay:!1},{type:"dblclick",immediate:!1,delay:!0}].forEach(function(t){i.eventHandlers.push(v.default.on(i.map,t.type,function(e){e.delay?setTimeout(function(){i.onHandleEvent(e,t)},50):i.onHandleEvent(e,t)}))}),i.eventHandlers.push(v.default.on(i.map,{mousemove:v.default.throttle(function(t){i.requestPick("mousemove",{event:t})},50),touchmove:v.default.throttle(function(t){i.requestPick("touchmove",{event:t})},50)})),i._pickRequestObject={},i._isPicking=!1,i.setMaxListeners(300),i}return(0,h.default)(e,t),(0,u.default)(e,[{key:"onHandleEvent",value:function(t,e){this.requestPick(e.type,{event:t}),e.immediate&&this.runPick()}},{key:"requestPick",value:function(t,e){if(!this.map.moving||"dblclick"===t||"touchmove"===t||"touchend"===t){delete this._pickRequestObject.type,delete this._pickRequestObject.pos,delete this._pickRequestObject.radius,this._pickRequestObject.type=t;var n=e.event;if(n&&(n.point||n.points)){var i=n.points&&n.points[0]||n.point;this._pickRequestObject.pos=i,this._pickRequestObject.radius=1,this._pickRequestObject.mapEvent=n,"click"===t&&this.featurePicking&&(this._pickRequestObject.radius=this.pickingRadius||5)}}}},{key:"runPick",value:function(){var t=this;(!this._isPicking&&this._pickRequestObject.type&&!this.map.moving||"touchmove"===this._pickRequestObject.type)&&(this._isPicking=!0,this.pickQuery.pickObject({x:this._pickRequestObject.pos.x,y:this._pickRequestObject.pos.y,radius:this._pickRequestObject.radius,featurePicking:this.featurePicking&&"click"===this._pickRequestObject.type,callback:function(e){e&&e.layerId&&e.objectIndex>-1&&t.emit("action",{eventType:t._pickRequestObject.type,layerId:e.layerId,objectIndex:e.objectIndex,pickColor:e.pickColor,mapEvent:t._pickRequestObject.mapEvent}),"click"===t._pickRequestObject.type&&t.featurePicking&&t.map.emit("feature_picked",e.featurePick),t.emit(t._pickRequestObject.type,t._pickRequestObject.mapEvent),t._clearRequest(),t._isPicking=!1}}))}},{key:"_clearRequest",value:function(){this._pickRequestObject={}}},{key:"destroy",value:function(){this._clearRequest(),this.pickQuery.destroy(),this.map=null,this.removeAllListeners()}}]),e}(_);e.default=y},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(115),a=i(r),o=n(18),s=i(o),l=n(228),u=i(l),c=n(27),f=i(c),d=n(23),h=i(d),p=n(227),v=i(p),m=n(3),g=i(m),_=n(0),y=i(_),x=n(1),b=i(x),S=n(5),w=i(S),E=n(4),A=i(E),T=n(93),M=i(T),I=n(302),P=n(535),k=n(773),L=n(515),C=n(772),R=n(290),D=n(536),N=n(499),B=i(N),O=n(256),F=O.LOGO_URL.DEFAULT_LOGO,z={ANY:1,CENTER:0},V=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,y.default)(this,e);var n=(0,w.default)(this,(e.__proto__||(0,g.default)(e)).call(this));return n._map=t.map,n._init(),n}return(0,A.default)(e,t),(0,b.default)(e,[{key:"_init",value:function(){function t(){return e.apply(this,arguments)}var e=(0,v.default)(u.default.mark(function t(){var e,n,i,r,a,o,s;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=(0,I.checkKey)(this._map),n=(0,I.overseaCheckKey)(),t.next=4,h.default.all([e,n]);case 4:if(i=t.sent,r=(0,f.default)(i,2),a=r[0],o=r[1],a){t.next=9;break}return console.error("鉴权失败：海外图鉴权失败"),t.abrupt("return");case 9:if(!o||0!==o.error){t.next=18;break}return t.next=12,(0,D.getOnlineFrontier)(o);case 12:this.frontier=t.sent,s=o&&o.info&&o.info.detail,this.tilesrc=o&&o.info&&o.info.tilesrc,this.isOverseaMap=!1,this._turnOnOverseaControl(),this._turnOnLogoControl(s);case 18:case"end":return t.stop()}},t,this)}));return t}()},{key:"_turnOnOverseaControl",value:function(){var t=this;this._switchOversea(),this._map.on("bounds_changed",function(){t._switchOversea()}),this._map.on("mapstyle_changed",function(){t._switchOversea()})}},{key:"_switchOversea",value:function(){var t=this._map.getBaseMap();if(this.tilesrc&&"satellite"!==t.type){if(this._map.getZoom()>6){var e=this._map.getBounds();return void(this._checkIsInDistrict("china",e,z.ANY)?this._changeMapType("china"):this._changeMapType("overseamap"))}this._changeMapType("china")}}},{key:"_changeMapType",value:function(t){if(this.isOverseaMap||"overseamap"!==t)this.isOverseaMap&&"china"===t&&(this.isOverseaMap=!1,this._changeLayerVisible("china"));else{this.isOverseaMap=!0;var e=this._map.getLayer("oversea");e||(e=(0,L.createOverseaLayer)({map:this._map,tilesrc:this.tilesrc,key:B.default,encrypt:C.encrypt})),this._changeLayerVisible("oversea")}}},{key:"_changeLayerVisible",value:function(t){var e=this,n="oversea"===t;this.visibleCache=this.visibleCache||{};var i=[].concat((0,s.default)(R.VECTOR_LAYER_ID),["handdraw","traffic_base","oversea"]);(0,a.default)(i).forEach(function(t){var i=e._map.getLayer(t);if(i)if(n){if(e.visibleCache[t]=i.visible,"oversea"===t)return void i.setVisible(!0);i.setVisible(!1)}else{if("oversea"===t)return void i.setVisible(!1);var r=e.visibleCache[t];i.setVisible(r)}}),n?(this._map.getSource("oversea")&&this._map.getSource("oversea").unfreeze(),this._map.getSource("vector_source")&&this._map.getSource("vector_source").freeze(),this._map.getSource("traffic_base")&&this._map.getSource("traffic_base").freeze(),this._map.getSource("handdraw")&&this._map.getSource("handdraw").freeze()):(this._map.getSource("oversea")&&this._map.getSource("oversea").freeze(),this._map.getSource("vector_source")&&this._map.getSource("vector_source").unfreeze(),this._map.getSource("traffic_base")&&this._map.getSource("traffic_base").unfreeze(),this._map.getSource("handdraw")&&this._map.getSource("handdraw").unfreeze())}},{key:"_turnOnLogoControl",value:function(t){var e=this;this._switchLogo(t),this._map.on("bounds_changed",function(){e._switchLogo(t)}),this._map.on("mapstyle_changed",function(){e._switchLogo(t)})}},{key:"_switchLogo",value:function(t){var e=this;if("satellite"!==this._map.getBaseMap().type)for(var n=Math.ceil(this._map.getZoom()),i=t||P.defaultLogoRules,r=0;r<i.length;r++){var a=i[r];n>=a.level[0]&&n<=a.level[1]&&function(){var t=null,n=-1;a.districts.forEach(function(i){if("default"===i.frontier)i.priority>n&&(t=i,n=i.priority);else{var r=e._map.getBounds();e._checkIsInDistrict(i.frontier,r,i.rule)&&i.priority>n&&(t=i,n=i.priority)}}),e._updateLogo(t)}()}}},{key:"_checkIsInDistrict",value:function(t,e,n){var i=this.frontier&&this.frontier[t],r=!1;if(i)if(n===z.CENTER){var a=e.getCenter();r=(0,k.isPointInFrontier)(a,i)}else if(n===z.ANY){for(var o=(0,k.getBoundsPoints)(e,!0),s=0;s<o.length;s++)if((0,k.isPointInFrontier)(o[s],i)){r=!0;break}r=r||(0,k.isFrontierInBounds)(e,i)}return r}},{key:"_updateLogo",value:function(t){var e=this._map.layerResource.getFinalUsedMapStyleId(),n=void 0;n=1===e&&t.logo_night?t.logo_night:t.logo?t.logo:F;var i=this._map.getControl(this._map.lgId);i&&i.changeLogoUrl(n)}}]),e}(M.default);e.default=V},function(t,e,n){"use strict";function i(t){return l(t)?r(t):t}function r(t){var e=s.enc.Utf8.parse(t),n=s.enc.Utf8.parse("d8ab2f7b7a7536a71894084e1c812fd0"),i=s.enc.Utf8.parse("c0ab1f54he78k36d"),r=s.AES.encrypt(e,n,{iv:i});return encodeURIComponent(r.toString())}Object.defineProperty(e,"__esModule",{value:!0}),e.encrypt=i;var a=n(36),o=function(t){return t&&t.__esModule?t:{default:t}}(a),s=n(1015),l=o.default.isString},function(t,e,n){"use strict";function i(t,e){var n=o(t),i=s(e),r=n.x,a=n.y,l=i.polyX,u=i.polyY,c=u.length-1,f=!1,d=void 0;for(d=0;d<u.length;d++)(u[d]<a&&u[c]>=a||u[c]<a&&u[d]>=a)&&(l[d]<=r||l[c]<=r)&&(f^=l[d]+(a-u[d])/(u[c]-u[d])*(l[c]-l[d])<r),c=d;return f}function r(t,e){var n=t.getNorthEast(),i=t.getSouthWest(),r=new l(n.getLat(),i.getLng()),a=new l(i.getLat(),n.getLng()),o=[n,r,i,a],s=n.getLng()>i.getLng()?n.getLng():n.getLng()+360;return o.push(new l(n.getLat(),(s+i.getLng())/2)),o.push(new l(i.getLat(),(s+i.getLng())/2)),o.push(new l((n.getLat()+i.getLat())/2,n.getLng())),o.push(new l((n.getLat()+i.getLat())/2,i.getLng())),e&&o.push(t.getCenter()),o}function a(t,e){for(var n=s(e),i=n.latLngArray,r=0;r<i.length;r++)if(t.contains(i[r]))return!0;return!1}function o(t){var e=t.getLng().toString(),n=t.getLat().toString(),i=20037508.34*e/180,r=Math.log(Math.tan((90+n)*Math.PI/360))/(Math.PI/180);return r=20037508.34*r/180,{x:i,y:r}}function s(t){var e=t.split(":"),n=[],i=[],r=[];if(e.length>0)for(var a=0;a<e.length;a++){var o=e[a].split(",");n[a]=new l(o[1],o[0]),i[a]=20037508.34*o[0]/180,r[a]=Math.log(Math.tan((90+o[1])*Math.PI/360))/(Math.PI/180)*20037508.34/180}return{latLngArray:n,polyX:i,polyY:r}}Object.defineProperty(e,"__esModule",{value:!0}),e.isPointInFrontier=i,e.getBoundsPoints=r,e.isFrontierInBounds=a;var l=n(46)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(0),a=i(r),o=n(1),s=i(o),l=n(410),u=n(312),c=function(){function t(e,n){(0,a.default)(this,t),this._map=e,this._setMapZoomType(n.mapZoomType),this._onDblClick=this._onDblClick.bind(this)}return(0,s.default)(t,[{key:"isEnabled",value:function(){return!!this._enabled}},{key:"enable",value:function(){this.isEnabled()||(this._map._on("dblclick",this._onDblClick),this._enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this._map._off("dblclick",this._onDblClick),this._enabled=!1)}},{key:"_setMapZoomType",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.MAP_ZOOM_TYPE.DEFAULT;return t===u.MAP_ZOOM_TYPE.CENTER?this._aroundCenter=!0:(t!==u.MAP_ZOOM_TYPE.DEFAULT&&console.error("mapZoomType参数错误，参数应该是MAP_ZOOM_TYPE常量"),this._aroundCenter=!1)}},{key:"_onDblClick",value:function(t){var e=t.point;(0,l.isResponsible)(this._map,e)&&this._map.zoomTo(Math.min(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),this._map.transform.maxZoom),{around:this._aroundCenter?this._map.getCenter():t.latLng},t)}}]),t}();t.exports=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(0),a=i(r),o=n(1),s=i(o),l=n(410),u=n(28),c=n(215),f=n(10),d=f.bezier(0,0,.3,1),h=function(){function t(e){(0,a.default)(this,t),this._map=e,this._el=e.getContainer(),this._moveStartEvent=null,f.bindAll(["_onDown","_onMove","_onUp","_onTouchEnd","_onMouseUp"],this)}return(0,s.default)(t,[{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active}},{key:"enable",value:function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._el.addEventListener("touchstart",this._onDown),this._enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._el.removeEventListener("touchstart",this._onDown),this._enabled=!1)}},{key:"_onDown",value:function(t){if(!this._ignoreEvent(t)&&!this.isActive()){this._moveStartEvent=t,t.touches&&((0,u.isMiniProgram)()&&"pc"!==(0,u.getMiniProgramEnv)()||!(0,u.isMiniProgram)())?(window.document.addEventListener("touchmove",this._onMove),window.document.addEventListener("touchend",this._onTouchEnd)):(window.document.addEventListener("mousemove",this._onMove),window.document.addEventListener("mouseup",this._onMouseUp)),window.addEventListener("blur",this._onMouseUp),this._active=!1;var e=c.mousePos(this._el,t);(0,l.isResponsible)(this._map,e)&&(this._pos=e),this._inertia=[[Date.now(),this._pos]]}}},{key:"_onMove",value:function(t){var e=this;if(!this._ignoreEvent(t)){if(!this.isActive()){if(!this._isMoved(t))return;this._active=!0,this._map.moving=!0,this._fireEvent("dragstart",t),this._fireEvent("panstart",t),this._fireEvent("movestart",t),this._map.once("moveend",function(){e._active=!1})}var n=c.mousePos(this._el,t),i=this._map;(0,l.isResponsible)(i,n)&&(i.stopMoving(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),n]),i.transform.setLocationAtPoint(i.unprojectFromContainer(this._pos),n),this._pos=n),this._fireEvent("drag",t),this._fireEvent("pan",t),this._fireEvent("move",t),t.touches||t.preventDefault()}}},{key:"_onUp",value:function(t){var e=this;if(this.isActive()){this._active=!1,this._fireEvent("dragend",t),this._fireEvent("panend",t),this._drainInertiaBuffer();var n=function(){e._map.moving=!1,e._fireEvent("moveend",t)},i=this._inertia;if(i.length<2)return void n();var r=i[i.length-1],a=i[0],o=r[1].sub(a[1]),s=(r[0]-a[0])/1e3;if(0===s||r[1].equals(a[1]))return void n();var u=c.mousePos(this._el,t);if((0,l.isResponsible)(this._map,u)){var f=o.mult(.3/s),h=f.mag();h>1400&&(h=1400,f._unit()._mult(h));var p=h/750,v=f.mult(-p/2);this._map.panBy(v,{duration:1e3*p,easing:d,noMoveStart:!0},{originalEvent:t})}}}},{key:"_onMouseUp",value:function(t){this._ignoreEvent(t)||(this._onUp(t),window.document.removeEventListener("mousemove",this._onMove),window.document.removeEventListener("mouseup",this._onMouseUp),window.removeEventListener("blur",this._onMouseUp))}},{key:"_onTouchEnd",value:function(t){this._ignoreEvent(t)||(this._onUp(t),window.document.removeEventListener("touchmove",this._onMove),window.document.removeEventListener("touchend",this._onTouchEnd))}},{key:"_fireEvent",value:function(t,e){return this._map._fire(t,{originalEvent:e})}},{key:"_ignoreEvent",value:function(t){var e=this._map;if(e.boxZoom&&e.boxZoom.isActive())return!0;if(e.dragRotate&&e.dragRotate.isActive())return!0;if(t.touches)return t.touches.length>1;if(t.ctrlKey)return!0;return"mousemove"===t.type?!1&t.buttons:t.button&&0!==t.button}},{key:"_drainInertiaBuffer",value:function(){for(var t=this._inertia,e=Date.now();t.length>0&&e-t[0][0]>160;)t.shift()}},{key:"_isMoved",value:function(t){var e=this._moveStartEvent;if(!e)return!0;var n=void 0,i=void 0;return t.touches?(n=e.touches[0],i=t.touches[0]):(n=e,i=t),Math.abs(i.clientX-n.clientX)>2||Math.abs(i.clientY-n.clientY)>2}}]),t}();t.exports=h},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(0),a=i(r),o=n(1),s=i(o),l=n(28),u=n(36),c=i(u),f=n(29),d=n(215),h=n(10),p=c.default.isBoolean,v=h.bezier(0,0,.25,1),m=function(){function t(e){(0,a.default)(this,t),this._map=e,this._el=e.getContainer(),this._pitchWithRotate=!0,this._moveStartEvent=null,this.pitchable=!0,this.rotatable=!0,h.bindAll(["_onDown","_onMove","_onUp"],this)}return(0,s.default)(t,[{key:"setPitchable",value:function(t){p(t)?this.pitchable=t:new f.BaseTypeError("pitchable","Boolean",t).error()}},{key:"setRotatable",value:function(t){p(t)?this.rotatable=t:new f.BaseTypeError("rotatable","Boolean",t).error()}},{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active}},{key:"enable",value:function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._enabled=!1)}},{key:"_onDown",value:function(t){this._ignoreEvent(t)||this.isActive()||(this._moveStartEvent=t,window.document.addEventListener("mousemove",this._onMove),window.document.addEventListener("mouseup",this._onUp),window.addEventListener("blur",this._onUp),this._active=!1,this._inertia=[[Date.now(),this._map.getHeading()]],this._pos=d.mousePos(this._el,t),this._startPos=this._pos,this._center=this._map.transform.centerPoint,t.preventDefault())}},{key:"_onMove",value:function(t){var e=this;if(!this._ignoreEvent(t)){if(!this.isActive()){if(!this._isMoved(t))return;this._active=!0,this._map.moving=!0,this._fireEvent("dragstart",t),this._fireEvent("rotatestart",t),this._fireEvent("movestart",t),this._pitchWithRotate&&this._fireEvent("pitchstart",t),this._map.once("moveend",function(){e._active=!1})}var n=this._map;if(n.stopMoving(),this.rotatable||this.pitchable){var i=this._pos,r=d.mousePos(this._el,t),a=.8*(i.x-r.x),o=-.5*(i.y-r.y),s=n.getHeading()-a,l=n.getPitch()-o,u=this._inertia,c=u[u.length-1];this.rotatable&&(this._drainInertiaBuffer(),u.push([Date.now(),n._normalizeHeading(s,c[1])]),this._fireEvent("rotate",t),n.transform.heading=s),this.pitchable&&(this._fireEvent("pitch",t),n.transform.pitch=l),this._fireEvent("drag",t),this._fireEvent("move",t),this._pos=r}}}},{key:"_onUp",value:function(t){var e=this;if(!this._ignoreEvent(t)&&(window.document.removeEventListener("mousemove",this._onMove),window.document.removeEventListener("mouseup",this._onUp),window.removeEventListener("blur",this._onUp),this.isActive())){this._active=!1,this._fireEvent("dragend",t),this._fireEvent("rotateend",t),this._drainInertiaBuffer();var n=this._map,i=n.getHeading(),r=this._inertia,a=function(){Math.abs(i)<e._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:t}):(e._map.moving=!1,e._fireEvent("moveend",t)),e._pitchWithRotate&&e._fireEvent("pitchend",t)};if(r.length<2)return void a();var o=r[0],s=r[r.length-1],l=r[r.length-2],u=n._normalizeHeading(i,l[1]),c=s[1]-o[1],f=c<0?-1:1,d=(s[0]-o[0])/1e3;if(0===c||0===d)return void a();var h=Math.abs(c*(.25/d));h>180&&(h=180);var p=h/180;u+=f*h*(p/2),Math.abs(n._normalizeHeading(u,0))<this._bearingSnap&&(u=n._normalizeHeading(0,u)),n.headTo(u,{duration:1e3*p,easing:v,noMoveStart:!0},{originalEvent:t})}}},{key:"_fireEvent",value:function(t,e){return this._map._fire(t,{originalEvent:e})}},{key:"_ignoreEvent",value:function(t){var e=this._map;if(e.boxZoom&&e.boxZoom.isActive())return!0;if(e.dragPan&&e.dragPan.isActive())return!0;if(t.touches&&((0,l.isMiniProgram)()&&"pc"!==(0,l.getMiniProgramEnv)()||!(0,l.isMiniProgram)()))return t.touches.length>1;var n=t.ctrlKey?1:2,i=t.ctrlKey?0:2,r=t.button;return"undefined"!=typeof InstallTrigger&&2===t.button&&t.ctrlKey&&window.navigator.platform.toUpperCase().indexOf("MAC")>=0&&(r=0),"mousemove"===t.type?t.buttons&0===n:!this.isActive()&&r!==i}},{key:"_drainInertiaBuffer",value:function(){for(var t=this._inertia,e=Date.now();t.length>0&&e-t[0][0]>160;)t.shift()}},{key:"_isMoved",value:function(t){var e=this._moveStartEvent;if(!e)return!0;var n=e,i=t;return Math.abs(i.clientX-n.clientX)>2||Math.abs(i.clientY-n.clientY)>2}}]),t}();t.exports=m},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(93),v=i(p),m=n(10),g=i(m),_=function(t){function e(t){(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this));return n.transform=t,n.bindIdleEvent(),n.start(),n.isJudging=!1,n.timer=null,n.duration=100,n.input=void 0,n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"start",value:function(){this.isJudging||(this.input=this.transform.getInput(),this.isJudging=!0,this.judge())}},{key:"stop",value:function(){this.isJudging=!1,this.timer&&window.clearTimeout(this.timer)}},{key:"judge",value:function(){this.timer=window.setTimeout(function(){var t=this.transform.getInput();this.inputEqual(t,this.input)?(this.stop(),this._fire("idle")):this.judge(),this.input=t}.bind(this),this.duration)}},{key:"bindIdleEvent",value:function(){this.transform._on("input_change",this.start.bind(this))}},{key:"inputEqual",value:function(t,e){return!(!t||!e)&&(g.default.forIn(t,function(n){return("center"!==n||t[n].lat===e[n].lat&&t[n].lng===e[n].lng)&&(t[n]===e[n]&&void 0)}),!0)}}]),e}(v.default);e.default=_},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(0),a=i(r),o=n(1),s=i(o),l=n(10),u=function(){function t(e){(0,a.default)(this,t),this._map=e,this._el=e.getContainer(),l.bindAll(["_onTouchStart","_onTouchMove","_onTouchEnd"],this),this.timer=null,this.duration=750,this.buffer=3,this.position=null,this.enabled=!1}return(0,s.default)(t,[{key:"enable",value:function(){this.enabled||(this._el.addEventListener("touchstart",this._onTouchStart),this._el.addEventListener("touchmove",this._onTouchMove),this._el.addEventListener("touchend",this._onTouchEnd),this.enabled=!0)}},{key:"disable",value:function(){this.enabled&&(this._el.removeEventListener("touchstart",this._onTouchStart),this._el.removeEventListener("touchmove",this._onTouchMove),this._el.removeEventListener("touchend",this._onTouchEnd),this.enabled=!1)}},{key:"startLongPress",value:function(){this.timer=window.setTimeout(function(){this._map._fire("longpress"),this.endLongPress()}.bind(this),this.duration)}},{key:"endLongPress",value:function(){window.clearTimeout(this.timer),this.position=null}},{key:"_onTouchStart",value:function(t){this.endLongPress(),1===t.touches.length&&(this.startLongPress(),this.position={x:t.touches[0].pageX,y:t.touches[0].pageY})}},{key:"_onTouchMove",value:function(t){if(this.position){var e=t.touches[0].pageX-this.position.x,n=t.touches[0].pageY-this.position.y;Math.sqrt(e*e+n*n)>this.buffer&&this.endLongPress()}}},{key:"_onTouchEnd",value:function(){this.endLongPress()}}]),t}();t.exports=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(0),a=i(r),o=n(1),s=i(o),l=n(410),u=n(22),c=i(u),f=n(312),d=n(215),h=n(10),p=n(28),v=window.navigator.userAgent.toLowerCase(),m=-1!==v.indexOf("firefox"),g=-1!==v.indexOf("safari")&&-1===v.indexOf("chrom"),_=function(){function t(e,n){(0,a.default)(this,t),this._map=e,this._el=e.getContainer(),h.bindAll(["_onWheel","_onTimeout"],this),this._setMapZoomType(n.mapZoomType)}return(0,s.default)(t,[{key:"isEnabled",value:function(){return!!this._enabled}},{key:"enable",value:function(){this.isEnabled()||(this._el.addEventListener("wheel",this._onWheel,!1),this._el.addEventListener("mousewheel",this._onWheel,!1),this._enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this._el.removeEventListener("wheel",this._onWheel),this._el.removeEventListener("mousewheel",this._onWheel),this._enabled=!1)}},{key:"_setMapZoomType",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.MAP_ZOOM_TYPE.DEFAULT;return t===f.MAP_ZOOM_TYPE.CENTER?this._aroundCenter=!0:(t!==f.MAP_ZOOM_TYPE.DEFAULT&&console.error("mapZoomType参数错误，参数应该是MAP_ZOOM_TYPE常量"),this._aroundCenter=!1)}},{key:"_onWheel",value:function(t){var e=void 0;"wheel"===t.type?(e=t.deltaY,m&&t.deltaMode===window.WheelEvent.DOM_DELTA_PIXEL&&(e/=p.devicePixelRatio),t.deltaMode===window.WheelEvent.DOM_DELTA_LINE&&(e*=40)):"mousewheel"===t.type&&(e=-t.wheelDeltaY,g&&(e/=3));var n=p.now(),i=n-(this._time||0);this._pos=d.mousePos(this._el,t),this._time=n,0!==e&&e%4.000244140625==0?this._type="wheel":0!==e&&Math.abs(e)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=e,this._timeout=setTimeout(this._onTimeout.bind(this,t),40)):this._type||(this._type=Math.abs(i*e)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,e+=this._lastValue)),t.shiftKey&&e&&(e/=4),this._type&&this._zoom(-e,t),t.preventDefault()}},{key:"_onTimeout",value:function(t){this._type="wheel",this._zoom(-this._lastValue,t)}},{key:"_zoom",value:function(t,e){if(0!==t){var n=this._map;if(n){var i=d.mousePos(this._el,e);if((0,l.isResponsible)(this._map,i)){var r=2/(1+Math.exp(-Math.abs(t/100)));t<0&&0!==r&&(r=1/r);var a=n.ease?n.ease.to:n.transform.scrollScale,o=n.transform&&n.transform.minZoom||c.default.minZoom,s=n.transform&&n.transform.maxZoom||c.default.maxZoom,u=h.clamp(n.transform.scaleZoom(a*r),o,s);n.zoomTo(u,{duration:"wheel"===this._type?200:0,around:this._aroundCenter?n.getCenter():n.unprojectFromContainer(this._pos),delayEndEvents:100,smoothEasing:!0},{originalEvent:e})}}}}}]),t}();t.exports=_},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(0),a=i(r),o=n(1),s=i(o),l=n(215),u=n(10),c=function(){function t(e){(0,a.default)(this,t),this._map=e,this._el=e.getContainer(),u.bindAll(["_onStart","_onMove","_onEnd"],this)}return(0,s.default)(t,[{key:"isEnabled",value:function(){return!!this._enabled}},{key:"enable",value:function(t){this.isEnabled()||(this._el.addEventListener("touchstart",this._onStart,!1),this._enabled=!0,this._aroundCenter=t&&"center"===t.around)}},{key:"disable",value:function(){this.isEnabled()&&(this._el.removeEventListener("touchstart",this._onStart),this._enabled=!1)}},{key:"isActive",value:function(){return!!this._active}},{key:"_onStart",value:function(t){if(!this._ignoreEvent(t)){var e=l.mousePos(this._el,t.touches[0]),n=l.mousePos(this._el,t.touches[1]);this._posP0=e,this._posP1=n,this._startPitch=this._map.transform.pitch,this._gestureIntent=void 0,this._inertia=[],this._active=!1,window.document.addEventListener("touchmove",this._onMove,!1),window.document.addEventListener("touchend",this._onEnd,!1)}}},{key:"_onMove",value:function(t){if(!this._ignoreEvent(t)){this.isActive()||(this._active=!0);var e=l.mousePos(this._el,t.touches[0]),n=l.mousePos(this._el,t.touches[1]),i=this._posP0.sub(e),r=this._posP1.sub(n),a=.5*(i.y+r.y),o=this._map;if(this._posP0=e,this._posP1=n,this._gestureIntent)o.transform.pitch=o.getPitch()-a,this._drainInertiaBuffer(),this._inertia.push([Date.now(),a]),this._fireEvent("pitch",t),this._fireEvent("move",t);else{Math.abs(Math.abs(i.x)-Math.abs(r.x))<2&&(this._gestureIntent="pitch",this._startPitch=o.transform.pitch)}t.preventDefault()}}},{key:"_onEnd",value:function(){this._active=!1,window.document.removeEventListener("touchmove",this._onMove),window.document.removeEventListener("touchend",this._onEnd),this._drainInertiaBuffer()}},{key:"_fireEvent",value:function(t,e){return this._map._fire(t,{originalEvent:e})}},{key:"_ignoreEvent",value:function(t){var e=this._map;return!(!e.dragPan||!e.dragPan.isActive())||(!(!e.touchZoomRotate||!e.touchZoomRotate.isActive())||(t.touches?t.touches.length<2:void 0))}},{key:"_drainInertiaBuffer",value:function(){for(var t=this._inertia,e=Date.now();t.length>2&&e-t[0][0]>160;)t.shift()}}]),t}();t.exports=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(0),a=i(r),o=n(1),s=i(o),l=n(312),u=n(215),c=n(10),f=c.bezier(0,0,.15,1),d=function(){function t(e,n){(0,a.default)(this,t),this._map=e,this._el=e.getContainer(),c.bindAll(["_onStart","_onMove","_onEnd"],this),this._setMapZoomType(n.mapZoomType)}return(0,s.default)(t,[{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active}},{key:"enable",value:function(){this.isEnabled()||(this._el.addEventListener("touchstart",this._onStart,!1),this._enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this._el.removeEventListener("touchstart",this._onStart),this._enabled=!1)}},{key:"disableRotation",value:function(){this._rotationDisabled=!0}},{key:"enableRotation",value:function(){this._rotationDisabled=!1}},{key:"_setMapZoomType",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.MAP_ZOOM_TYPE.DEFAULT;return t===l.MAP_ZOOM_TYPE.CENTER?this._aroundCenter=!0:(t!==l.MAP_ZOOM_TYPE.DEFAULT&&console.error("mapZoomType参数错误，参数应该是MAP_ZOOM_TYPE常量"),this._aroundCenter=!1)}},{key:"_onStart",value:function(t){if(2===t.touches.length){var e=u.mousePos(this._el,t.touches[0]),n=u.mousePos(this._el,t.touches[1]);this._posP0=e,this._posP1=n,this._startVec=e.sub(n),this._startScale=this._map.transform.scrollScale,this._startHeading=this._map.transform.heading,this._gestureIntent=void 0,this._inertia=[],this._active=!1,window.document.addEventListener("touchmove",this._onMove,!1),window.document.addEventListener("touchend",this._onEnd,!1)}}},{key:"_onMove",value:function(t){if(2===t.touches.length){var e=u.mousePos(this._el,t.touches[0]),n=u.mousePos(this._el,t.touches[1]),i=e.add(n).div(2),r=e.sub(n),a=r.mag()/this._startVec.mag(),o=this._rotationDisabled?0:180*r.angleWith(this._startVec)/Math.PI,s=this._map;if(this._gestureIntent){var l={};"rotate"===this._gestureIntent&&(l.heading=this._startHeading+o),"zoom"===this._gestureIntent&&(l.zoom=s.transform.scaleZoom(this._startScale*a)),s.stopMoving(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),a,i]),s.easeTo(l,{duration:0,around:this._aroundCenter?s.getCenter():s.unprojectFromContainer(i)},{originalEvent:t}),this._fireEvent("rotate",t),this._fireEvent("move",t)}else{var c=Math.abs(1-a)>.15;Math.abs(o)>8?this._gestureIntent="rotate":c&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._startVec=r,this._startScale=s.transform.scrollScale,this._startHeading=s.transform.heading,this.isActive()||(this._active=!0))}t.preventDefault()}}},{key:"_onEnd",value:function(t){window.document.removeEventListener("touchmove",this._onMove),window.document.removeEventListener("touchend",this._onEnd),this._drainInertiaBuffer(),this._active=!1;var e=this._inertia,n=this._map;if(e.length<2)return void n.snapToNorth({},{originalEvent:t});var i=e[e.length-1],r=e[0],a=n.transform.scaleZoom(this._startScale*i[1]),o=n.transform.scaleZoom(this._startScale*r[1]),s=a-o,l=(i[0]-r[0])/1e3,u=i[2];if(0===l||a===o)return void n.snapToNorth({},{originalEvent:t});var c=.15*s/l;Math.abs(c)>2.5&&(c=c>0?2.5:-2.5);var d=1e3*Math.abs(c/(12*.15));n.easeTo({},{duration:d,easing:f,around:this._aroundCenter?n.getCenter():n.unprojectFromContainer(u)},{originalEvent:t})}},{key:"_fireEvent",value:function(t,e){return this._map._fire(t,{originalEvent:e})}},{key:"_drainInertiaBuffer",value:function(){for(var t=this._inertia,e=Date.now();t.length>2&&e-t[0][0]>160;)t.shift()}},{key:"_ignoreEvent",value:function(t){var e=this._map;return!(!e.touchTilt||!e.touchTilt.isActive())||(t.touches?t.touches.length<2:void 0)}}]),t}();t.exports=d},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),a=i(r),o=n(1),s=i(o),l=n(28),u=i(l),c=n(783),f=i(c),d=n(537),h=function(){function t(){var e=this;(0,a.default)(this,t),this.fps=6,this.now=null,this.then=null,this.interval=1e3/this.fps,this.delta=null,this._frameDeadline=0,this._channel=new MessageChannel,this.scheduleTaskQueue=new d.ScheduleTaskQueue,this.callbacks={},this._channel.port1.onmessage=function(){if(e.scheduleTaskQueue)for(var t=e._frameDeadline-u.default.now(),n=e.scheduleTaskQueue.first;n&&(t>1||n.isTimeout());){var i=n;n=n.next,i&&i.runTask(),t=e._frameDeadline-u.default.now()}}}return(0,s.default)(t,[{key:"_initStats",value:function(){this.stats=new f.default,this.stats.domElement.style.position="absolute",this.stats.domElement.style.right="14px",this.stats.domElement.style.bottom="140px",this.stats.domElement.style.zIndex=1e6,document.body.appendChild(this.stats.domElement)}},{key:"updateFPS",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;this.fps=Math.max(0,Math.min(t,60)),this.interval=0===this.fps?1/0:1e3/this.fps}},{key:"setCallback",value:function(t){this.addCallback("singlecb",t,!0)}},{key:"addCallback",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];"function"==typeof e&&(this.callbacks[t]?n&&(this.callbacks[t]=e):this.callbacks[t]=e)}},{key:"removeCallback",value:function(t){delete this.callbacks[t]}},{key:"clearAllCallbacks",value:function(){this.callbacks={}}},{key:"start",value:function(){this._animFrameId||this._destroyed||(this.then=u.default.now(),this.tick())}},{key:"tickOnce",value:function(){var t=this;this.isUpdating||(0,u.default)(function(e){t.callback&&t.callback(e)})}},{key:"tick",value:function(t){var e=this;if(this._animFrameId=u.default.frame(function(t){e.tick(t)}),this.now=u.default.now(),this.delta=this.now-this.then,this.delta>this.interval){this.stats&&this.stats.update(),this.then=this.now-this.delta%this.interval,this._frameDeadline=t+this.interval;for(var n in this.callbacks)this.callbacks[n](t);this._channel.port2.postMessage(null)}}},{key:"stop",value:function(){u.default.cancelFrame(this._animFrameId),this._animFrameId=null}},{key:"destroy",value:function(){this.stop(),this.clearAllCallbacks();for(var t=this.scheduleTaskQueue.first;t;){var e=t;t=t.next,e.remove()}this.scheduleTaskQueue=null,this._destroyed=!0}},{key:"isUpdating",get:function(){return!!this._animFrameId}}]),t}();e.default=h},function(t,e,n){"use strict";var i=function(){var t=0,e=0,n=Date.now(),i=n,r=0,a=1e3,o=0,s=0,l=1e3,u=0,c=0,f=0,d=document.createElement("div");d.id="stats",d.addEventListener("mousedown",function(t){t.preventDefault(),f+=1,x(f%2)},!1),d.style.cssText="width:80px;opacity:0.9;cursor:pointer";var h=document.createElement("div");h.id="fps",h.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",d.appendChild(h);var p=document.createElement("div");p.id="fpsText",p.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",p.innerHTML="FPS",h.appendChild(p);var v=document.createElement("div");for(v.id="fpsGraph",v.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",h.appendChild(v);74>v.children.length;){var m=document.createElement("span");m.style.cssText="width:1px;height:30px;float:left;background-color:#113",v.appendChild(m)}var g=document.createElement("div");g.id="ms",g.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",d.appendChild(g);var _=document.createElement("div");_.id="msText",_.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",_.innerHTML="MS",g.appendChild(_);var y=document.createElement("div");for(y.id="msGraph",y.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",g.appendChild(y);74>y.children.length;)m=document.createElement("span"),m.style.cssText="width:1px;height:30px;float:left;background-color:#131",y.appendChild(m);var x=function(t){switch(f=t){case 0:h.style.display="block",g.style.display="none";break;case 1:h.style.display="none",g.style.display="block"}};return{domElement:d,setMode:x,begin:function(){n=Date.now()},end:function(){var f=Date.now();r=f-n,a=Math.min(a,r),o=Math.max(o,r),_.textContent=r+" MS ("+a+"-"+o+")";var d=Math.min(30,30-r/200*30);return y.appendChild(y.firstChild).style.height=d+"px",c+=1,f>i+1e3&&(s=Math.round(1e3*c/(f-i)),l=Math.min(l,s),u=Math.max(u,s),e+=s,p.textContent=s+" FPS ("+l+"-"+u+") Avg: "+parseInt(e/t),d=Math.min(30,30-s/100*30),v.appendChild(v.firstChild).style.height=d+"px",i=f,c=0),t+=1,f},update:function(){n=this.end()}}};t.exports=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(15),a=i(r),o=n(3),s=i(o),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),p=n(32),v=i(p),m=n(4),g=i(m),_=n(310),y=i(_),x=n(10),b=n(551),S=n(405),w=i(S),E=n(540),A=function(t){function e(t){(0,u.default)(this,e);var n=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t)),i=t.map,r=t.init,a=t.render,o=t.keepFps,l=void 0!==o&&o,c=t.visible,f=void 0===c||c;if(n.init=r||null,n.render=a||null,n.visible=f,!(i&&i instanceof y.default)){var d;return console.error("未传入必填项map或所传入参数并非TMap.Map的实例！"),d=n,(0,h.default)(n,d)}return n.addTo(i),i.keepHighFps(l),n}return(0,g.default)(e,t),(0,f.default)(e,[{key:"setKeepFps",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.map)return this.map.keepHighFps(t),this}},{key:"redraw",value:function(){return this.map&&this.map._render(),this}},{key:"addTo",value:function(t){if(t!==this.map){if(this.map&&this.remove(!0),(0,v.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"addTo",this).call(this,t),"function"==typeof this.init){this.mapCamera=t.renderEngine.camera;var n=this.init(this.gl),i=n.renderer,r=n.camera,a=n.scene,o=n.group;if(!(i&&r&&a&&o))return console.error("init failed, renderer, camera, scene, group is required");t.threeSourceMgr||(t.threeSourceMgr=new w.default({map:t,renderer:i,camera:r,scene:a,group:o}));var l=t.threeSourceMgr;this.renderer=l.getRenderer(),this.camera=l.getCamera(),this.scene=l.getScene(),this.group=l.getGroup(),this.scene.uuid!=a.uuid&&this.scene.add(this.group),this._onMapResize=this._onMapResize.bind(this),this._onMapOffsetChanged=this._onMapOffsetChanged.bind(this),this.map.on("resize",this._onMapResize),this.map.on("offset_changed",this._onMapOffsetChanged)}return this}}},{key:"setRender",value:function(t){"function"==typeof t?this.render=t:console.error("render只能为function")}},{key:"draw",value:function(){var t=this,e=this.gl;(0,b.preserveParameters)(e,{DEPTH_TEST:!1,STENCIL_TEST:!1,BLEND:!0,CULL_FACE:!1,CULL_FACE_MODE:e.BACK,BLEND_SRC_RGB:e.ONE,BLEND_DST_RGB:e.ONE_MINUS_SRC_ALPHA,BLEND_SRC_ALPHA:e.ONE,BLEND_DST_ALPHA:e.ONE_MINUS_SRC_ALPHA,VIEWPORT:[0,0,e.canvas.width,e.canvas.height],UNPACK_FLIP_Y_WEBGL:!1,UNPACK_PREMULTIPLY_ALPHA_WEBGL:!1},function(){t._draw()})}},{key:"_draw",value:function(){var t=this.scene,e=this.camera,n=this.renderer,i=this.map,r=this.group,a=this.render;if(n&&e&&t){t.rotation.x=(0,x.degreeToRadian)(-i.getPitch()),t.rotation.z=(0,x.degreeToRadian)(-i.getRotation());var o=i.getScale()*Math.pow(2,i.getZoom()-20);if(t.scale.set(o,o,o),r){var s=i.projectToWorldPlane(i.getCenter(),20);r.position.set(-s.x,s.y,0),r.updateMatrix()}"function"==typeof a&&this.visible&&a(),n.resetState&&n.resetState()||n.state.reset()}}},{key:"_setViewOffset",value:function(){if(this.mapCamera&&this.camera){var t=this.mapCamera,e=t.offset,n=t.resolution;this.camera.setViewOffset(n.width,n.height,-e.x,-e.y,n.width,n.height)}}},{key:"_onMapResize",value:function(){var t=this.camera;if(t){var e=this.mapCamera,n=e.fovy,i=e.view,r=e.near,o=e.far,s=e.distance,l=(i.right-i.left)/(i.top-i.bottom);(0,a.default)(t,{fov:n,aspect:l,near:r,far:o}),t.position.z=s,this._setViewOffset()}}},{key:"_onMapOffsetChanged",value:function(){this._setViewOffset()}},{key:"destroy",value:function(){return this.remove(!0),this.data=null,this._visible=!0,this.removeAllListeners(),this}},{key:"show",value:function(){return this.visible=!0,this}},{key:"hide",value:function(){return this.visible=!1,this}}]),e}(E);e.default=A},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(17),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(686),f=i(c),d=n(53),h=n(22),p=i(h),v=n(550),m=i(v),g=n(10),_=i(g),y=n(549),x=i(y),b=function(){function t(e){(0,s.default)(this,t),this.painter=e,this.renderLayers=null,this._destroyed=!1,this._needReplace=!0,this._needOverlayReplace=!0,this.gradualPlacementArr=[],this.overlayCellSet=[],this.lastRenderLayers=[]}return(0,u.default)(t,[{key:"updatePlace",value:function(){this._needReplace=!0}},{key:"updateOverlayPlace",value:function(){this._needOverlayReplace=!0}},{key:"resize",value:function(t,e){this._destroyed||(this.width=t,this.height=e,this.painter.resize(t,e))}},{key:"update",value:function(t,e){var n=this;if(!this._destroyed){var i=t.getDrawLayers().filter(function(t){return!t.isHidden(e.zoom)}),r=t.getPlugins(),o=[],s={};i.forEach(function(i){var r=i.filter,l=i.sourceId,u=t.getSource(l);if(u){var c=u.getDrawItems();if(0!==(0,a.default)(c).length){var f={};f.tileSize=i.tileSize,f.type=i.type,f.rank=i.rank,f.id=i.id,f.opacity=i.opacity,"LABEL"!==i.type&&"MARKER"!==i.type||(f._collisionOptions=i._collisionOptions,f.zIndex=i.zIndex),i.type===d.RENDER_LAYER_TYPE.grayTile&&(f.colorMap=i.colorMap,f.rgbaFormatter=i.rgbaFormatter),i.type===d.RENDER_LAYER_TYPE.imageTile&&(f.imageSize=i.imageSize),"MASK"===i.type&&(f.isMaskReverse=i.isMaskReverse);var h=[];_.default.forIn(c,function(t,a){var o=a.getQueryData(r),l=a.coord;if(o){var u={},c=void 0,f=void 0;if(l.isVirtualCoord())c=0,f=0;else{if((l.z-e.tileZoom>=4||e.tileZoom-l.z>=5)&&e.tileZoom<=p.default.maxDataZoom&&!(i.maxDataZoom<p.default.maxDataZoom&&l.z<=i.maxDataZoom-1)&&i.type!==d.RENDER_LAYER_TYPE.grayTile&&!a.isNullDefaultData)return;var v=e.projectionTopLeft(l.z);c=l.wrapXAroundCenter(e.center)*i.tileSize-v.x,f=l.y*i.tileSize-v.y}u.offset={x:c,y:f},u.id=l.id,u.coordX=l.x,u.coordY=l.y,u.coordZ=l.z,u.size=a.tileSize;var m=u.id in o?o[u.id]:o;if(m&&m.children&&Math.round(e.zoom)>=p.default.maxDataZoom){var g=m.children[Math.round(e.zoom)];!g||n.painter.textCache&&[d.BASE_LAYER_TYPE.point,d.BASE_LAYER_TYPE.label].includes(r)||(m=g)}if(u.features=m,u.scale=l.isVirtualCoord()?1:e.calCoordsScale(l.z),!s[u.id]){var _={};_.offset=u.offset,_.scale=u.scale,_.tileSize=i.tileSize,s[u.id]=_}h.push(u)}}),h.sort(function(t,e){return t.coordZ>e.coordZ?1:-1}),f.tiles=h,o.push(f)}}}),r.forEach(function(t){o.push({type:d.RENDER_LAYER_TYPE.visualPlugin,visualPlugin:t,rank:t.rank})}),o.sort(function(t,e){return t.rank-e.rank}),this.renderLayers=o;var l=!1;this.painter.preRender(e,s);var u=_.default.deepEqual(this.lastRenderLayers,o.map(function(t){return t.id}));return this.lastRenderLayers=o.map(function(t){return t.id}),x.default.bind(this)(),!this._needOverlayReplace&&u||(this.overlayCellSet=(0,m.default)({renderLayers:o,transform:e,camera:this.painter.camera,textCache:this.painter.textCache,renderer:this.painter}),this._needOverlayReplace=!1,this._needReplace=!0),l=this.updateGradualPlacement(t,e),this.painter.render(this.renderLayers,e,this.placement,{fadeChange:this.placement.getFadeChange(),iconsLoader:t.iconsLoader}),l}}},{key:"updateGradualPlacement",value:function(t,e){var n=!1;if((!this.gradualPlacement||this.gradualPlacement.isDone()&&!this.gradualPlacement.isFading()&&this._needReplace)&&(this.gradualPlacement=new f.default(this.painter.textCache,this.renderLayers),this._needReplace=!1,this.gradualPlacementArr.push(this.gradualPlacement),this.gradualPlacement.setOverlayCellSet(this.overlayCellSet),this.gradualPlacementArr.length>3)){var i=this.gradualPlacementArr[0];if(i.getInUse&&i.getInUse())return;this.gradualPlacementArr.shift(),i.destroy(),i=null}return this.gradualPlacement.isDone()||(this.painter.painters.symbol&&this.painter.painters.symbol.preDraw({iconsLoader:t.iconsLoader}),this.gradualPlacement.placement.updateVersion(),this.gradualPlacement.continuePlacement(this.renderLayers,this.painter.tilesMatrix,this.painter.camera,e),this.gradualPlacement.isDone()?this.placement=this.gradualPlacement.batchUpdate(this.placement):(this.lastGradualPlacement=this.gradualPlacement,n=!0,this.placement||(this.placement=this.gradualPlacement.placement))),this.gradualPlacement&&this.gradualPlacement.placement!==this.placement&&this.placement.batchUpdateShow(),n}},{key:"resetGradualPlacement",value:function(){this.gradualPlacement&&(this.gradualPlacement.destroy(),this.gradualPlacement=null)}},{key:"render",value:function(t,e){if(!this._destroyed)return this.update(t,e)}},{key:"destroy",value:function(){this._destroyed||(this.gradualPlacement&&(this.gradualPlacement.destroy(),this.gradualPlacement=null),this.painter=null,this.renderLayers=null,this._destroyed=!0,this.gradualPlacementArr=[])}},{key:"getPoi",value:function(t){return this.placement?this.placement.getPoi(t):null}}]),t}();t.exports=b},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=JSON.parse((0,s.default)(t));return g.default.forIn(n,function(t,n){n.x*=e,n.y*=e}),n}function a(t,e){var n=t*Math.PI/180,i=e/2*Math.PI/180;return(Math.cos(n)*Math.tan(n+i)-Math.sin(n))/Math.tan(i)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(94),s=i(o),l=n(15),u=i(l),c=n(0),f=i(c),d=n(1),h=i(d),p=n(109),v=n(113),m=n(10),g=i(m),_=n(121),y=n(22),x=i(y),b=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.map,i=e.view,r=e.look,a=e.scale,o=e.offset;(0,f.default)(this,t),this.version=0,this.look=r,this.view=i,this.map=n,this.scale=a,this.lookPoint=new p.Vector3(r.slice(0,3)),this.lightPosition=new p.Vector3([0,0,0]);var s=i.right-i.left,l=i.top-i.bottom;this.resolution={width:s,height:l},this.pMatrix=new p.Matrix4,this.vMatrix=new p.Matrix4,this.vInverseMatrix=new p.Matrix4,this.rotateMatrix=new p.Matrix4,this.scaleMatrix=new p.Matrix4,this.matrixStore=new v.Store("matrixStore",1e4),this.fovy=30,this.distance=Math.floor(r[2]=i.top/Math.tan(this.fovy/2*Math.PI/180)),this.far=4*this.distance,this.near=1;var u=o.x,c=void 0===u?0:u,d=o.y,h=void 0===d?0:d;this.pMatrix.setPerspective(this.fovy,s/l,this.near,this.far,2*c/s,-2*h/l),this.offset={x:c,y:h},this.setLookAt(r),this.cache={},this.fogPitch=45}return(0,h.default)(t,[{key:"setView",value:function(t){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])this.updateVersion();else for(var e in t)if(t.hasOwnProperty(e)&&this.view[e]!==t[e]){this.updateVersion();break}this.view=t;var n=t.right-t.left,i=t.top-t.bottom,r=this.fovy,a=this.near,o=this.offset;this.distance=Math.floor(t.top/Math.tan(r/2*Math.PI/180)),this.far=4*this.distance,this.resolution.width=n,this.resolution.height=i,this.pMatrix.setPerspective(r,n/i,a,this.far,2*o.x/n,-2*o.y/i),this._setPVMatrix()}},{key:"setOffset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0};g.default.deepEqual(t,this.offset)||(this.offset=t,this.setView(this.view,!0))}},{key:"setLookAt",value:function(t){for(var e=0,n=t.length;e<n;e++)if(this.look[e]!==this.look[e]){this.updateVersion();break}this.look=t,this._setPVMatrix()}},{key:"setRotate",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e%=360,n%=360,t===this.pitch&&e===this.heading&&n===this.roll||this.updateVersion(),(t||0===t)&&(t=Math.min(Math.max(t,0),x.default.maxPitch)),this.heading=e,this.pitch=t,this.roll=n,this._setPVMatrix()}},{key:"setScale",value:function(t){t!==this.scale&&(this.updateVersion(),this.scaleMatrix.setScale(t,t,t),this.scale=t,this._setPVMatrix())}},{key:"canvasCoordsToGLCoords",value:function(t,e){return(0,_.fromScreenToNdc)(t,e,this.resolution)}},{key:"glCoordsToCanvasCoords",value:function(t,e){return(0,_.fromNdcToScreen)(t,e,this.resolution)}},{key:"getScreenCoordsByCustomMatrix",value:function(t,e){var n=(0,_.getScreenCoordsByCustomMatrix)(t,e,this.resolution);return(0,u.default)({},n,{version:this.version})}},{key:"getScreenCoordsFromPixel",value:function(t){var e=new p.Vector4(t.x,t.y,0,1);return this.getScreenCoordsByCustomMatrix(this.pvMatrix,e)}},{key:"getScreenCoordsFromWorld",value:function(t){return this.getScreenCoordsByCustomMatrix(this.pvMatrix,t)}},{key:"getBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this.cache,n=this.version,i=this.pvMatrix;if(e.bounds&&e.bounds.version===n)return r(e.bounds.value,1/t);var a=Math.min(this.getFogEdge()[1],1),o={centerDelta:{x:0,y:0},leftTop:(0,_.getZPlaneCoordsByCustomMatrix)(i,{x:-1,y:a}),rightTop:(0,_.getZPlaneCoordsByCustomMatrix)(i,{x:1,y:a}),leftBottom:(0,_.getZPlaneCoordsByCustomMatrix)(i,{x:-1,y:-1}),rightBottom:(0,_.getZPlaneCoordsByCustomMatrix)(i,{x:1,y:-1})};return this.cache.bounds={version:this.version,value:o},r(o,1/t)}},{key:"getFogEdge",value:function(){var t=this.fogPitch;if(this.pitch<t-5)return[1,1/0,1,1];if(this.cache.fogEdge&&this.cache.fogEdge.version===this.version)return this.cache.fogEdge.value;var e=this.map.transform._zoom>18?this.map.transform._zoom-17:1,n=this.view.top/this.scale*a(t,this.fovy)*e,i=n*Math.sin(this.heading*Math.PI/180),r=n*Math.cos(this.heading*Math.PI/180),o=this.pvMatrix.multiplyVector4({elements:[i,r,0,1]}).elements,s=o.map(function(t){return t/o[3]});return this.cache.fogEdge={version:this.version,value:s},s}},{key:"getLookPosition",value:function(){return this.vInverseMatrix.multiplyVector3(this.lookPoint)}},{key:"getLightPosition",value:function(t){return this.vInverseMatrix.multiplyVector3(t||this.lightPosition)}},{key:"_setPVMatrix",value:function(){var t=new p.Matrix4,e=new p.Matrix4;e.translate(0,0,-this.distance),e.rotate(-this.pitch,1,0,0),e.rotate(this.roll,0,1,0),e.rotate(this.heading,0,0,1),e.scale(this.scale,this.scale,this.scale),e.translate(0,0,0),this.vMatrix=e,this.vInverseMatrix.set(e).invert(),t.multiply(this.pMatrix).multiply(e),this.pvMatrix=t}},{key:"updateVersion",value:function(){this.version+=1}},{key:"destroy",value:function(){this.version=0,this.look=null,this.view=null,this.map=null,this.scale=null,this.lookPoint=null,this.lightPosition=null,this.resolution=null,this.pMatrix=null,this.vMatrix=null,this.vInverseMatrix=null,this.rotateMatrix=null,this.scaleMatrix=null,this.matrixStore.clear(),this.matrixStore=null,this.fovy=null,this.distance=null,this.far=null,this.near=null,this.cache=null}}]),t}();e.default=b},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=t[0],n=[];return n=e?e.color:[0,0,0],{lighting_uAmbientColor:n}}function a(t){var e=[],n=[];return t.forEach(function(t){e.push.apply(e,(0,l.default)(t.direction)),n.push.apply(n,(0,l.default)(t.color))}),t.length||(e.push(0,0,0),n.push(0,0,0)),{lighting_uDirDirection:e,lighting_uDirColor:n,lighting_uDirCount:t.length}}function o(t,e){var n=[],i=[],r=[];return t.forEach(function(t){var a=e.latLngToCenterLocalPixel(t.position),o=1/(0,S.getSpatialResolution)(e.zoom),s=o*t.height;n.push(a.x,a.y,s),i.push.apply(i,(0,l.default)(t.attenuation)),r.push.apply(r,(0,l.default)(t.color))}),t.length||(n.push(0,0,0),i.push(0,0,0),r.push(0,0,0)),{lighting_uPointPosition:n,lighting_uPointAtt:i,lighting_uPointColor:r,lighting_uPointCount:t.length}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(18),l=i(s),u=n(15),c=i(u),f=n(164),d=i(f),h=n(0),p=i(h),v=n(1),m=i(v),g=n(788),_=i(g),y=n(352),x=n(541),b=i(x),S=n(121),w=n(109),E=n(10),A=i(E),T=function(){function t(){var e;(0,p.default)(this,t),this.lights=(e={},(0,d.default)(e,y.LIGHT_TYPE.AMBIENT,[]),(0,d.default)(e,y.LIGHT_TYPE.DIRECTION,[]),(0,d.default)(e,y.LIGHT_TYPE.POINT,[]),e),this.setConfig(),this._uniforms={},this._cameraVer=null}return(0,m.default)(t,[{key:"setConfig",value:function(t){var e=this,n=(0,c.default)({},_.default,t),i=n.active,r=n.toneMapping,a=n.intensity,o=n.lightList,s=n.shadowOptions;return i?this.enable():this.disable(),this._toneMapping=r,this.setIntensity(a),this.clearLights(),o&&o.forEach(function(t){e.addLight(new b.default(t))}),this.setShadowOptions(s),this}},{key:"addLight",value:function(t){var e=t.type;return this.lights[e]&&this.lights[e].length<4?this.lights[e].push(t):console.warn(e+"类型光源暂不支持，或已达上限，不可添加。"),this}},{key:"removeLight",value:function(t){var e=this.lights[t.type],n=e.findIndex(function(e){return e.id===t.id});return n>=0&&e.splice(n,1),this}},{key:"clearLights",value:function(){var t=this;return A.default.forIn(this.lights,function(e){t.lights[e]=[]}),this}},{key:"getLights",value:function(){var t=[];return A.default.forIn(this.lights,function(e,n){t.push.apply(t,(0,l.default)(n))}),t}},{key:"setIntensity",value:function(t){return this.intensity=(0,c.default)({ambient:0,diffuse:0,specular:0},this.intensity,t),this}},{key:"getIntensity",value:function(){return this.intensity}},{key:"enable",value:function(){return this.active=!0,this}},{key:"disable",value:function(){return this.active=!1,this}},{key:"isActive",value:function(){return this.active}},{key:"setShadowOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.lightId,n=t.intensity,i=void 0===n?1:n,r=t.enabled,a=void 0!==r&&r;return this._shadowEnabled=a,this._shadowLightId=e,this._shadowIntensity=Math.max(0,Math.min(i,1)),this}},{key:"getShadowOptions",value:function(){return{enabled:this._shadowEnabled,lightId:this._shadowLightId,intensity:this._shadowIntensity}}},{key:"getShadowLight",value:function(){return this._shadowEnabled&&this.lights[y.LIGHT_TYPE.DIRECTION][this._getShadowLightIndex()]}},{key:"_getShadowLightIndex",value:function(){var t=this;return this.lights[y.LIGHT_TYPE.DIRECTION].findIndex(function(e){return e.id===t._shadowLightId})}},{key:"_updateViewPos",value:function(t){t?t.version!==this._cameraVer&&(this._uniforms.lighting_uViewPos=t.getLookPosition().elements,this._cameraVer=t.version):this._uniforms.lighting_uViewPos=[0,0,1e3]}},{key:"getLightPVMatrix",value:function(t){var e;if(!this.getShadowLight())return new w.Matrix4;var n=new w.Vector3(this.getShadowLight().direction),i=new w.Vector3(n.elements).scale(3e3,3e3,3e3),r=new w.Vector3(0,0,1);n.equals(r)&&(r=new w.Vector3(0,1,0));var a=(e=new w.Matrix4).setLookAt.apply(e,(0,l.default)(i.elements).concat([0,0,0],(0,l.default)(r.elements)));return(new w.Matrix4).setOrtho(t.left,t.right,t.bottom,t.top,1,6e3).scale(.75,.75,1).multiply(a)}},{key:"update",value:function(t){var e=t.camera,n=t.transform,i=t.view,s=this.isActive(),l=this.intensity,u=this._toneMapping;this._updateViewPos(e);var f=r(this.lights[y.LIGHT_TYPE.AMBIENT]),d=a(this.lights[y.LIGHT_TYPE.DIRECTION]),h=o(this.lights[y.LIGHT_TYPE.POINT],n);(0,c.default)(this._uniforms,{lighting_uBase:[s,l.ambient,l.diffuse,l.specular],lighting_uToneMapping:[u.enable,u.exposure],lighting_uShadow:[this._shadowEnabled&&this._shadowIntensity,this._getShadowLightIndex()],lighting_uShadowLightPVMatrix:this.getLightPVMatrix(i).elements},f,d,h)}},{key:"uniforms",get:function(){return this._uniforms}}]),t}();e.default=T},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(352);e.default={active:!0,toneMapping:{enable:!1,exposure:1},intensity:{ambient:1,diffuse:1,specular:1},lightList:[{type:i.LIGHT_TYPE.AMBIENT,color:"#FFF",intensity:.8},{id:"$main",type:i.LIGHT_TYPE.DIRECTION,color:"#FFF",intensity:.2,direction:[-1,2,-1.41]},{type:i.LIGHT_TYPE.DIRECTION,color:"#FFF",intensity:.2,direction:[1,-2,-1.41]}],shadowOptions:{enabled:!1}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(15),a=i(r),o=n(17),s=i(o),l=n(3),u=i(l),c=n(0),f=i(c),d=n(1),h=i(d),p=n(5),v=i(p),m=n(32),g=i(m),_=n(4),y=i(_),x=n(313),b=i(x),S=n(620),w=i(S),E=n(218),A=i(E),T=n(113),M=n(217),I=i(M),P=n(10),k=i(P),L=n(1077),C=i(L),R=!1,D=new Image;D.onload=function(){R=!0},D.src=C.default;var N=function(t){function e(t){(0,f.default)(this,e);var n=(0,v.default)(this,(e.__proto__||(0,u.default)(e)).call(this,t));return n.shaderSource=w.default,n._store=new T.Store("buffer",100,16,function(t){t.positions&&t.positions.delete(),t.indices&&t.indices.delete(),t.instanceBuffers&&(0,s.default)(t.instanceBuffers).forEach(function(e){var n=t.instanceBuffers[e];n.data=null,n.buffer.delete()})}),n.shaderParams={attributes:["a_Positions","a_InstanceCoords","a_InstanceColor","a_InstanceWidth"],uniforms:["u_matrix","u_mapScale","u_SamplerArrow","u_resolution"]},n.positions=new Int16Array([-1,1,1,1,-1,-1,1,-1]),n.indices=new Uint8Array([0,2,1,1,2,3]),n}return(0,y.default)(e,t),(0,h.default)(e,[{key:"draw",value:function(t,e,n){var i=this.gl,r=n.tileId||0;i.useProgram(i.program),i.uniform1f(this.u_mapScale,e.scale),i.uniform1i(this.u_SamplerArrow,0),i.uniform2f(this.u_resolution,e.width,e.height),i.uniformMatrix4fv(this.u_matrix,!1,e.matrix),this.drawTileInstance(r,t.instance)}},{key:"drawTileInstance",value:function(t,e){if(!(e.count<1)){var n=this.gl,i=this._store;i.exist(t)||i.set(t,this.createBuffer(t,e));var r=i.get(t);r.positions.bind(),r.positions.pointToAttrib({location:this.a_Positions,size:2,type:n.SHORT}),r.indices.bind(),k.default.forIn(r.instanceBuffers,function(t,e){var i=e.buffer,r=e.location,a=e.size,o=e.type;i.bind(),i.pointToAttrib({location:r,size:a,type:o}),n.vertexAttribDivisor(r,1)}),n.drawElementsInstanced(n.TRIANGLES,this.indices.length,n.UNSIGNED_BYTE,0,e.count),n.bindBuffer(n.ARRAY_BUFFER,null),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null),n.vertexAttribDivisor(this.a_InstanceCoords,0),n.vertexAttribDivisor(this.a_InstanceColor,0),n.vertexAttribDivisor(this.a_InstanceWidth,0)}}},{key:"createBuffer",value:function(t,e){var n=this.gl,i={positions:null,indices:null,instanceBuffers:{}};if(this.positions&&(i.positions=new I.default(n,{data:this.positions})),this.indices&&(i.indices=new I.default(n,{target:n.ELEMENT_ARRAY_BUFFER,data:this.indices})),e){var r={instanceCoordsTypeArray:{location:this.a_InstanceCoords,size:4,type:n.FLOAT},instanceColorTypeArray:{location:this.a_InstanceColor,size:4,type:n.FLOAT},instanceWidthTypeArray:{location:this.a_InstanceWidth,size:1,type:n.FLOAT}};k.default.forIn(r,function(t,r){i.instanceBuffers[t]=(0,a.default)({data:e[t],buffer:new I.default(n,{data:e[t],usage:n.DYNAMIC_DRAW})},r)})}return i}},{key:"afterDraw",value:function(){this._arrowTex&&this._arrowTex.unbind()}},{key:"loadTexture",value:function(){R?(this._arrowTex||(this._arrowTex=new A.default(this.gl,{pixels:D}),this._arrowTex.upload({flipY:!0})),this._arrowTex.bind()):(this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,null))}},{key:"clear",value:function(){this._store.clear(),this._arrowTexture&&(this._arrowTexture.destroy(),this._arrowTexture=null)}},{key:"destroy",value:function(){this.positions=null,this.indices=null,this._store.clear(),this._store=null,this._arrowTex&&(this._arrowTex.delete(),this._arrowTex=null),(0,g.default)(e.prototype.__proto__||(0,u.default)(e.prototype),"destroy",this).call(this)}}]),e}(b.default);e.default=N},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(216),v=i(p),m=n(621),g=i(m),_=n(113),y=n(226),x=n(22),b=i(x),S=function(t){function e(t){(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t));return n.store=new _.Store("buffer",1024,128,y.deleteBuffersCallback),n.shaderSource=g.default,n.shaderParams={attributes:["a_Position","a_Color","a_Normal","a_LineInfo","a_LineDistance","a_SideInfo","a_PickingColor"],uniforms:["u_matrix","u_modelMatrix","u_SizeScale","picking_useFeaturePickingColor"]},n.enableLight=!0,n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"draw",value:function(t,e,n,i,r){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=this.gl,s=this.store,l=t.vertices,u=t.indeices,c=t.isNullDefaultData,f=void 0!==c&&c,d="base_"+r+"_"+t.id+"_"+Math.round(i),h=e.matrix,p=e.modelMatrix,v=void 0;s.exist(d)?(v=s.get(d),v.isNullDefaultData!==f&&(v=s.set(d,{vertices:this.bindVertexBuffer(l),indices:this.bindElementBuffer(u),length:u.length,isNullDefaultData:f}),v=s.get(d)),this.bindVertexBuffer(l,v.vertices),this.bindElementBuffer(u,v.indices)):v=s.set(d,{vertices:this.bindVertexBuffer(l),indices:this.bindElementBuffer(u),length:u.length,isNullDefaultData:f}),o.uniformMatrix4fv(this.u_matrix,!1,h),o.uniformMatrix4fv(this.u_modelMatrix,!1,p);var m=~~(100*(i-~~i));o.uniform1f(this.u_SizeScale,1e3*m+Math.min(Math.floor(100*(n||1)),255)),o.uniform1f(this.picking_useFeaturePickingColor,a?1:0);var g=b.default.batchRender?o.UNSIGNED_INT:o.UNSIGNED_SHORT;o.drawElements(o.TRIANGLES,v.length,g,0),this.unbindVertexBuffer(v.vertices,l.attributes)}}]),e}(v.default);e.default=S},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(216),v=i(p),m=n(623),g=i(m),_=n(113),y=n(226),x=function(t){function e(t){(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t));return n.store=new _.Store("buffer",1024,128,y.deleteBuffersCallback),n.shaderSource=g.default,n.shaderParams={attributes:["a_Position","a_Color","a_Info","a_Transform","a_Height"],uniforms:["u_matrix","u_modelMatrix","u_use3D","u_maskSampler","u_maskScale"]},n.enableLight=!0,n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"draw",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.gl,r=this.store,a=t.vertices,o=t.indeices,s="build_"+t.id+"_"+e.zoom,l=e.matrix,u=e.modelMatrix,c=e.maskScale||1,f=void 0;r.exist(s)?(f=r.get(s),this.bindVertexBuffer(a,f.vertices),this.bindElementBuffer(o,f.indices)):f=r.set(s,{vertices:this.bindVertexBuffer(a),indices:this.bindElementBuffer(o),length:o.length}),i.uniformMatrix4fv(this.u_matrix,!1,l),i.uniformMatrix4fv(this.u_modelMatrix,!1,u),i.uniform1i(this.u_maskSampler,0),i.uniform1f(this.u_maskScale,c),i.uniform1f(this.u_use3D,n.use3D?1:0),i.drawElements(i.TRIANGLES,f.length,i.UNSIGNED_SHORT,0),this.unbindVertexBuffer(f.vertices,a.attributes)}}]),e}(v.default);e.default=x},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(94),a=i(r),o=n(3),s=i(o),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),p=n(32),v=i(p),m=n(4),g=i(m),_=n(313),y=i(_),x=n(629),b=function(t){function e(t){(0,u.default)(this,e);var n=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t));return n.shaderSource=JSON.parse((0,a.default)(x.grayShader)),n.shaderParams={attributes:["a_position"],uniforms:["u_matrix","u_size","u_texInfo","u_opacity","u_sampler","u_Resolution","u_hasColorMap","u_samplerColorMap","u_usePicking"]},n.geometry={vertices:new Float32Array([0,0,0,1,1,0,1,1]),indices:new Uint8Array([0,2,1,1,2,3])},n}return(0,g.default)(e,t),(0,f.default)(e,[{key:"preDraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.hasColorMap,i=t.colorMapTexture,r=t.rgbaFormatter,a=this.shaderSource.f;if(this.shaderSource.f=x.grayShader.f.replace("{RGBA_FORMATTER}",r),(0,v.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"preDraw",this).call(this,{updated:a!==this.shaderSource.f}),this.gl.uniform1f(this.u_hasColorMap,n?1:0),i&&i._uploaded){if(this.gl.uniform1i(this.u_samplerColorMap,1),!this.buffers){var o=this.geometry,l=o.vertices,u=o.indices;this.buffers=this.createBuffer(null,l,u)}this.bindBuffer()}}},{key:"bindBuffer",value:function(){var t=this.gl;this.buffers.vertices.bind(),this.buffers.vertices.pointToAttrib({location:this.a_position,size:2,type:t.FLOAT}),this.buffers.indices.bind()}},{key:"draw",value:function(t){var e=t.matrix,n=t.size,i=t.texInfo,r=t.opacity,a=t.resolution,o=t.usePicking,s=void 0!==o&&o,l=this.gl;l.uniformMatrix4fv(this.u_matrix,!1,e.elements),l.uniform1i(this.u_sampler,0),l.uniform2f(this.u_size,n.width,n.height),l.uniform2f(this.u_Resolution,a.width,a.height),l.uniform4f(this.u_texInfo,i.s,i.t,i.w,i.h),l.uniform1f(this.u_opacity,r),l.uniform1f(this.u_usePicking,s?1:0),l.drawElements(l.TRIANGLES,this.buffers.length,l.UNSIGNED_BYTE,0)}},{key:"destroy",value:function(){this.buffers&&(this.buffers.vertices.delete(),this.buffers.indices.delete()),this.vertices=null,this.indices=null,(0,v.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"destroy",this).call(this)}}]),e}(y.default);e.default=b},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(15),a=i(r),o=n(3),s=i(o),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),p=n(32),v=i(p),m=n(4),g=i(m),_=n(411),y=i(_),x=n(634),b=i(x),S=n(217),w=i(S),E=n(10),A=i(E),T=n(675),M=i(T),I=n(1052),P=new M.default,k=P.parse(I),L={minX:-17.631067276000977,maxX:15.692798614501953,minY:-3.118868112564087,maxY:3.4938244819641113,minZ:.05786377936601639,maxZ:20.096586227416992},C=function(t){function e(t){(0,u.default)(this,e);var n=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t));return n.shaderSource=b.default,n.shaderParams={attributes:["aPosition","aNormal","aColor","aInstanceCoord","aInstanceInfo"],uniforms:n.commonUniformList.concat(["uEnableLighting","lighting_uCameraPosition","lighting_lightPositions","uBoxMin","uBoxMax"])},n.enableLight=!0,n.model=k,n}return(0,g.default)(e,t),(0,f.default)(e,[{key:"createModelBuffer",value:function(){var t=this.gl,e=this.model.attributes;this.modelBuffers={positions:{buffer:new w.default(t,{data:e.POSITION.value}),location:this.aPosition,size:e.POSITION.size,type:t.FLOAT},normals:{buffer:new w.default(t,{data:e.NORMAL.value}),location:this.aNormal,size:e.NORMAL.size,type:t.BYTE},colors:{buffer:new w.default(t,{data:e.COLOR_0.value}),location:this.aColor,size:e.COLOR_0.size,type:t.UNSIGNED_BYTE}}}},{key:"createBuffer",value:function(t){var e=this.gl,n={},i={instanceCoordsTypeArray:{location:this.aInstanceCoord,size:2,type:e.FLOAT},instanceInfosTypeArray:{location:this.aInstanceInfo,size:4,type:e.SHORT}};return A.default.forIn(i,function(i,r){n[i]=(0,a.default)({data:t[i],buffer:new w.default(e,{target:e.ARRAY_BUFFER,data:t[i],usage:e.DYNAMIC_DRAW})},r)}),n}},{key:"setBuffers",value:function(t){var n=this;this.modelBuffers||this.createModelBuffer();var i=this.modelBuffers;A.default.forIn(i,function(t,e){var n=e.buffer,i=e.location,r=e.size,a=e.type;n.bind(),"index"!==t&&n.pointToAttrib({location:i,size:r,type:a})});var r=(0,v.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"setBuffers",this).call(this,t);return A.default.forIn(r,function(t,e){var i=e.location;n.gl.vertexAttribDivisor(i,1)}),r}},{key:"setUniforms",value:function(t,n,i,r){(0,v.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"setUniforms",this).call(this,t,n,i,r);var a=this.gl;a.uniform3f(this.uBoxMin,L.minX,L.minY,L.minZ),a.uniform3f(this.uBoxMax,L.maxX,L.maxY,L.maxZ)}},{key:"draw",value:function(t,e,n,i){if(t&&n){var r=this.gl,a=this.model;r.useProgram(r.program),this.setUniforms(t,e,n,i);var o=this.setBuffers(t);r.drawArraysInstanced(a.mode,0,a.vertexCount,t.count),r.bindBuffer(r.ARRAY_BUFFER,null),A.default.forIn(o,function(t,e){var n=e.location;r.vertexAttribDivisor(n,0)})}}},{key:"destroy",value:function(){this.model=null,(0,v.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"destroy",this).call(this)}}]),e}(y.default);e.default=C},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(32),h=i(d),p=n(4),v=i(p),m=n(411),g=i(m),_=n(632),y=i(_),x=n(217),b=i(x),S=function(t){function e(t){(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t));return n.shaderSource=y.default,n.shaderParams={attributes:["aPosition"],uniforms:n.commonUniformList.concat(["uColor"])},n}return(0,v.default)(e,t),(0,u.default)(e,[{key:"createBuffer",value:function(t){var e=this.gl,n=t.position,i=t.index;return{position:{location:this.aPosition,size:3,type:e.FLOAT,data:n,buffer:new b.default(e,{data:n,usage:e.DYNAMIC_DRAW})},index:{data:i,buffer:new b.default(e,{target:e.ELEMENT_ARRAY_BUFFER,data:i}),type:2===i.BYTES_PER_ELEMENT?e.UNSIGNED_SHORT:e.UNSIGNED_INT,length:i.byteLength/i.BYTES_PER_ELEMENT}}}},{key:"setUniforms",value:function(t,n,i,r){(0,h.default)(e.prototype.__proto__||(0,a.default)(e.prototype),"setUniforms",this).call(this,t,n,i,r);var o=this.gl,s=r.color||[1,1,1,1];o.uniform4f(this.uColor,s[0],s[1],s[2],s[3])}}]),e}(g.default);e.default=S},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(544),v=i(p),m=n(642),g=i(m),_=n(148),y=n(121),x=function(t){function e(t){(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t));return n.shaderParams.uniforms=n.shaderParams.uniforms.concat(["uCenter","uZoom","uPixelsPerMeter","uResolution","uProject_uCommonUnitsPerWorldUnit","uProject_uCommonUnitsPerWorldUnit2","uRelativeCenter"]),n.shaderSource=g.default,n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"draw",value:function(t,e,n,i){var r=this.gl;r.useProgram(r.program),this.setCommonUniforms(t,i),this.setUniforms(n,t,e,i),this.drawTileInstance(n.id,n,i.updateSubData,!0)}},{key:"setUniforms",value:function(t,e,n,i){var r=this.gl,a=e.center,o=e.zoom,s=1/(0,y.getSpatialResolution)(o),l=i.distanceScales||e.getDistanceScales(),u=(0,_.splitLatLngNumber)(a.lat),c=(0,_.splitLatLngNumber)(a.lng),f={latPart:(0,_.splitLatLngNumber)(t.center.lat),lngPart:(0,_.splitLatLngNumber)(t.center.lng)};r.uniformMatrix4fv(this.u_matrix,!1,n.elements),r.uniform4f(this.uCenter,c.high,u.high,c.low,u.low),r.uniform1f(this.uZoom,o),r.uniform3f(this.uPixelsPerMeter,s,s,s),r.uniform3f(this.uProject_uCommonUnitsPerWorldUnit,l.pixelsPerDegree[0],l.pixelsPerDegree[1],l.pixelsPerDegree[2]),r.uniform3f(this.uProject_uCommonUnitsPerWorldUnit2,l.pixelsPerDegree2[0],l.pixelsPerDegree2[1],l.pixelsPerDegree2[2]),r.uniform2f(this.uResolution,e.width,e.height),r.uniform4f(this.uRelativeCenter,f.lngPart.high,f.latPart.high,f.lngPart.low,f.latPart.low),r.uniform2f(this.u_InstanceTileTextureOffset,0,0)}}]),e}(v.default);e.default=x},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(15),a=i(r),o=n(3),s=i(o),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),p=n(4),v=i(p),m=n(411),g=i(m),_=n(633),y=i(_),x=n(217),b=i(x),S=n(10),w=i(S),E=function(t){function e(t){(0,u.default)(this,e);var n=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t));return n.shaderSource=y.default,n.shaderParams={attributes:["aPosition","aColor","aNormal"],uniforms:n.commonUniformList},n.enableLight=!0,n}return(0,v.default)(e,t),(0,f.default)(e,[{key:"createBuffer",value:function(t){var e=this.gl,n=t.index,i={},r={position:{location:this.aPosition,size:3,type:e.FLOAT},color:{location:this.aColor,size:3,type:e.UNSIGNED_BYTE},normal:{location:this.aNormal,size:3,type:e.FLOAT},index:{type:2===n.BYTES_PER_ELEMENT?e.UNSIGNED_SHORT:e.UNSIGNED_INT,length:n.byteLength/n.BYTES_PER_ELEMENT}};return w.default.forIn(r,function(n,r){i[n]=(0,a.default)({data:t[n],buffer:new b.default(e,{target:"index"===n?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER,data:t[n],usage:e.DYNAMIC_DRAW})},r)}),i}}]),e}(g.default);e.default=E},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(15),a=i(r),o=n(3),s=i(o),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),p=n(32),v=i(p),m=n(4),g=i(m),_=n(543),y=i(_),x=n(638),b=i(x),S=n(28),w=i(S),E=1/16/w.default.devicePixelRatio,A=function(t){function e(t){(0,u.default)(this,e),t.attribList=["instanceColors","instanceStrokeColors","instanceShow","instanceType"],t.uniformList=["u_gamma","u_buffer"];var n=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t));return n.shaderSource=b.default,n.symbolManager=t.glyphManager,n}return(0,g.default)(e,t),(0,f.default)(e,[{key:"_onDraw",value:function(){var t=this.gl;t.uniform1f(this.u_sizeMinPixels,10),t.uniform1f(this.u_gamma,E),t.uniform1f(this.u_buffer,.71)}},{key:"_onDrawInstanceTile",value:function(){this.gl.vertexAttribDivisor(this.instanceColors,0),this.gl.vertexAttribDivisor(this.instanceStrokeColors,0),this.gl.vertexAttribDivisor(this.instanceShow,0),this.gl.vertexAttribDivisor(this.instanceType,0)}},{key:"getInstanceConfig",value:function(){var t=this.gl;return(0,a.default)((0,v.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"getInstanceConfig",this).call(this),{instanceColorList:{location:this.instanceColors,size:4,type:t.UNSIGNED_BYTE},instanceStrokeColorList:{location:this.instanceStrokeColors,size:4,type:t.UNSIGNED_BYTE},instanceShowList:{location:this.instanceShow,size:1,type:t.UNSIGNED_BYTE},instanceTypeList:{location:this.instanceType,size:1,type:t.UNSIGNED_BYTE}})}}]),e}(y.default);e.default=A},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(15),a=i(r),o=n(3),s=i(o),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),p=n(32),v=i(p),m=n(4),g=i(m),_=n(543),y=i(_),x=n(639),b=i(x),S=n(28),w=i(S),E=1/16/w.default.devicePixelRatio,A=function(t){function e(t){(0,u.default)(this,e),t.attribList=["instanceColors","instanceStrokeColors","instanceStrokeWidth","instanceShow","instanceType","instanceAnimateScaleAlpha"],t.uniformList=["u_gamma","u_buffer","u_sdfRadius"];var n=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t));return n.shaderSource=b.default,n.symbolManager=t.markerManager,n}return(0,g.default)(e,t),(0,f.default)(e,[{key:"_onDraw",value:function(){var t=this.gl;t.uniform1f(this.u_sizeMinPixels,10),t.uniform1f(this.u_gamma,E),t.uniform1f(this.u_buffer,.71),t.uniform1f(this.u_sdfRadius,this.symbolManager.setting.radius)}},{key:"_onDrawInstanceTile",value:function(){this.gl.vertexAttribDivisor(this.instanceColors,0),this.gl.vertexAttribDivisor(this.instanceStrokeColors,0),this.gl.vertexAttribDivisor(this.instanceStrokeWidth,0),this.gl.vertexAttribDivisor(this.instanceShow,0),this.gl.vertexAttribDivisor(this.instanceType,0),this.gl.vertexAttribDivisor(this.instanceAnimateScaleAlpha,0)}},{key:"getInstanceConfig",value:function(){var t=this.gl;return(0,a.default)((0,v.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"getInstanceConfig",this).call(this),{instanceColorList:{location:this.instanceColors,size:4,type:t.UNSIGNED_BYTE},instanceStrokeColorList:{location:this.instanceStrokeColors,size:4,type:t.UNSIGNED_BYTE},instanceStrokeWidthList:{location:this.instanceStrokeWidth,size:1,type:t.UNSIGNED_SHORT},instanceShowList:{location:this.instanceShow,size:1,type:t.UNSIGNED_BYTE},instanceTypeList:{location:this.instanceType,size:1,type:t.UNSIGNED_BYTE},instanceAnimateScaleAlphaList:{location:this.instanceAnimateScaleAlpha,size:2,type:t.FLOAT}})}}]),e}(y.default);e.default=A},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(15),a=i(r),o=n(18),s=i(o),l=n(3),u=i(l),c=n(0),f=i(c),d=n(1),h=i(d),p=n(5),v=i(p),m=n(4),g=i(m),_=n(216),y=i(_),x=n(637),b=i(x),S=n(113),w=n(148),E=n(217),A=i(E),T=n(226),M=n(10),I=i(M),P=function(t){function e(t){(0,f.default)(this,e);var n=(0,v.default)(this,(e.__proto__||(0,u.default)(e)).call(this,t));return n.store=new S.Store("buffer",128,16,T.deleteInstanceCacllback),n.shaderSource=b.default,n.shaderParams={attributes:["positions","positions64xyLow"],uniforms:["uMatrix","uCenter","uZoom","uPixelsPerMeter","uResolution","uProject_uCommonUnitsPerWorldUnit","uProject_uCommonUnitsPerWorldUnit2","uColor"]},n}return(0,g.default)(e,t),(0,h.default)(e,[{key:"draw",value:function(t,e,n,i){var r=this.gl;if(e){var a=t.center,o=t.zoom,l=t.getDistanceRatio(),u=i.distanceScales,c=i.color,f=(0,w.splitLatLngNumber)(a.lat),d=(0,w.splitLatLngNumber)(a.lng),h=[d.high,f.high,d.low,f.low];r.useProgram(r.program),r.uniformMatrix4fv(this.uMatrix,!1,e.elements),r.uniform4f.apply(r,[this.uCenter].concat(h)),r.uniform1f(this.uZoom,o),r.uniform3f(this.uPixelsPerMeter,l,l,l),r.uniform3f.apply(r,[this.uProject_uCommonUnitsPerWorldUnit].concat((0,s.default)(u.pixelsPerDegree))),r.uniform3f.apply(r,[this.uProject_uCommonUnitsPerWorldUnit2].concat((0,s.default)(u.pixelsPerDegree2))),r.uniform2f(this.uResolution,t.width,t.height),r.uniform4f(this.uColor,c[0],c[1],c[2],c[3]),this.drawTile(n.uid,n)}}},{key:"drawTile",value:function(t,e){var n=this.gl,i=this.store,r=!1;if(i){i.exist(t)?this._hasChangedBuffer(t,e)&&(r=!0):i.set(t,this.createBuffer(t,e));var a=i.get(t);I.default.forIn(a,function(t,i){var a=i.buffer,o=i.location,s=i.size,l=i.type;a.bind(),r&&(a.bufferData(e[t],{usage:n.DYNAMIC_DRAW}),i.data=e[t]),"indices"!==t&&a.pointToAttrib({location:o,size:s,type:l})}),n.drawElements(n.TRIANGLES,a.indices.data.length,n.UNSIGNED_INT,0),n.bindBuffer(n.ARRAY_BUFFER,null),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)}}},{key:"_hasChangedBuffer",value:function(t,e){var n=this.store.get(t);for(var i in n)if(n.hasOwnProperty(i)&&e[i]&&n[i].data!==e[i])return!0;return!1}},{key:"createBuffer",value:function(t,e){var n=this.gl;if(e){var i={},r={positions:{location:this.positions,size:3,type:n.FLOAT},positions64xyLow:{location:this.positions64xyLow,size:2,type:n.FLOAT},indices:{}};return I.default.forIn(r,function(t,r){i[t]=(0,a.default)({data:e[t],buffer:new A.default(n,{target:"indices"===t?n.ELEMENT_ARRAY_BUFFER:n.ARRAY_BUFFER,data:e[t],usage:n.DYNAMIC_DRAW})},r)}),i}}}]),e}(y.default);e.default=P},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(28),v=i(p),m=n(825),g=n(353),_=i(g),y=n(626),x=i(y),b=12,S=15,w=39,E=function(t){function e(t){(0,s.default)(this,e),t.uniformList=["uResolution","uSampler","uEnabled"];var n=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t)),i=(0,m.getGraphicHardwareInfo)(n.gl),r=v.default.devicePixelRatio>=2?S:i?/(\bHD\b)|(\bUHD\b)/.test(i.renderer)?b:w:b;return n.shaderSource=(0,x.default)(r),n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"setUniforms",value:function(t){var e=t.resolution,n=t.texture,i=t.enabled,r=this.gl;r.uniform2f(this.uResolution,e[0],e[1]),r.uniform1f(this.uEnabled,i),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,n),r.uniform1i(this.uSampler,0)}}]),e}(_.default);e.default=E},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(18),a=i(r),o=n(3),s=i(o),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),p=n(32),v=i(p),m=n(4),g=i(m),_=n(353),y=i(_),x=n(625),b=i(x),S=function(t){function e(t){(0,u.default)(this,e),t.uniformList=["uRange","uFogEdge","uSampler","uDepthSampler","uSkySampler","uSkyInfo","uViewInfo","uSkyBrightness","uFogColor","uSkyColor"];var n=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t));return n.shaderSource=b.default,n.brightness=1,n.colors={},n}return(0,g.default)(e,t),(0,f.default)(e,[{key:"preDraw",value:function(){(0,v.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"preDraw",this).call(this)}},{key:"setFogColor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[.93,.93,.93,1];this.colors.fog=t}},{key:"setSkyColor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[.8,.8784,1,1];this.colors.sky=t}},{key:"setBrightness",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.brightness=t}},{key:"setUniforms",value:function(t){var e=t.rangeList,n=t.fogEdge,i=t.texture,r=t.depth,o=t.skyTex,s=t.skyInfo,l=t.viewInfo,u=this.gl;u.uniform4fv(this.uFogColor,this.colors.fog),u.uniform4fv(this.uSkyColor,this.colors.sky),u.uniform2f(this.uRange,e[0],e[1]),u.uniform3f(this.uFogEdge,n[0],n[1],n[2]),u.uniform4f.apply(u,[this.uSkyInfo].concat((0,a.default)(s))),u.uniform4f.apply(u,[this.uViewInfo].concat((0,a.default)(l))),u.uniform1f(this.uSkyBrightness,this.brightness),u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,i),u.uniform1i(this.uSampler,0),u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,r),u.uniform1i(this.uDepthSampler,1),o?(o.bind(u,{textureIndex:2}),u.uniform1i(this.uSkySampler,2)):(u.activeTexture(u.TEXTURE2),u.bindTexture(u.TEXTURE_2D,null))}}]),e}(y.default);e.default=S},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(353),v=i(p),m=n(628),g=i(m),_=function(t){function e(t){(0,s.default)(this,e),t.uniformList=["uSampler","uHorizontal","uResolution"];var n=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t));return n.shaderSource=g.default,n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"setUniforms",value:function(t){var e=t.texture,n=t.horizontal,i=t.resolution,r=this.gl;e.bind(),r.uniform1i(this.uSampler,0),r.uniform1i(this.uHorizontal,n),r.uniform2f(this.uResolution,i[0],i[1])}}]),e}(v.default);e.default=_},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(353),v=i(p),m=n(630),g=i(m),_=function(t){function e(t){(0,s.default)(this,e),t.uniformList=["uColor"];var n=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t));return n.shaderSource=g.default,n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"setUniforms",value:function(t){var e=t.color;this.gl.uniform4fv(this.uColor,e)}}]),e}(v.default);e.default=_},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(15),a=i(r),o=n(3),s=i(o),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),p=n(4),v=i(p),m=n(216),g=i(m),_=n(494),y=i(_),x=n(113),b=n(148),S=n(217),w=i(S),E=n(226),A=n(10),T=i(A),M=function(t){function e(t){(0,u.default)(this,e);var n=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t));return n.store=new x.Store("buffer",128,16,E.deleteInstanceCacllback),n.shaderSource=y.default,n.shaderParams={attributes:["vertexPositions","vertexValid","positions","positions64xyLow","nextPositions","nextPositions64xyLow","elevations","fillColors","lineColors","pickingColors"],uniforms:["uMatrix","uCenter","uZoom","uPixelsPerMeter","uResolution","uProject_uCommonUnitsPerWorldUnit","uProject_uCommonUnitsPerWorldUnit2","picking_usePickingColor","u_isSideVertex","u_extruded","u_isWireframe","u_elevationScale","u_opacity"]},n.enableLight=!0,n}return(0,v.default)(e,t),(0,f.default)(e,[{key:"draw",value:function(t,e,n,i){var r=this.gl;if(e){var a=t.center,o=t.zoom,s=t.getDistanceRatio(),l=i.distanceScales,u=i.extruded,c=void 0===u?1:u,f=(0,b.splitLatLngNumber)(a.lat),d=(0,b.splitLatLngNumber)(a.lng);r.useProgram(r.program),r.uniformMatrix4fv(this.uMatrix,!1,e.elements),r.uniform4f(this.uCenter,d.high,f.high,d.low,f.low),r.uniform1f(this.uZoom,o),r.uniform3f(this.uPixelsPerMeter,s,s,s),r.uniform3f(this.uProject_uCommonUnitsPerWorldUnit,l.pixelsPerDegree[0],l.pixelsPerDegree[1],l.pixelsPerDegree[2]),r.uniform3f(this.uProject_uCommonUnitsPerWorldUnit2,l.pixelsPerDegree2[0],l.pixelsPerDegree2[1],l.pixelsPerDegree2[2]),r.uniform2f(this.uResolution,t.width,t.height),r.uniform1f(this.picking_usePickingColor,i.usePicking?1:0),r.uniform1f(this.u_isSideVertex,0),r.uniform1f(this.u_extruded,c),r.uniform1f(this.u_isWireframe,!1),r.uniform1f(this.u_elevationScale,1),r.uniform1f(this.u_opacity,1),this.drawTile(n.uid,n)}}},{key:"drawTile",value:function(t,e){var n=this.gl,i=this.store,r=!1;if(i){i.exist(t)?this._hasChangedBuffer(t,e)&&(r=!0):i.set(t,this.createBuffer(t,e));var a=i.get(t);n.disableVertexAttribArray(this.vertexPositions),n.disableVertexAttribArray(this.nextPositions),n.disableVertexAttribArray(this.nextPositions64xyLow),T.default.forIn(a,function(t,i){var a=i.buffer,o=i.location,s=i.size,l=i.type;a.bind(),r&&(a.bufferData(e[t],{usage:n.DYNAMIC_DRAW}),i.data=e[t]),"indices"!==t&&a.pointToAttrib({location:o,size:s,type:l})}),n.drawElements(n.TRIANGLES,a.indices.data.length,n.UNSIGNED_INT,0),n.bindBuffer(n.ARRAY_BUFFER,null),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)}}},{key:"_hasChangedBuffer",value:function(t,e){var n=this.store.get(t);for(var i in n)if(n.hasOwnProperty(i)&&e[i]&&n[i].data!==e[i])return!0;return!1}},{key:"createBuffer",value:function(t,e){var n=this.gl;if(e){var i={},r={elevations:{location:this.elevations,size:1,type:n.FLOAT},fillColors:{location:this.fillColors,size:4,type:n.UNSIGNED_BYTE},lineColors:{location:this.lineColors,size:4,type:n.UNSIGNED_BYTE},pickingColors:{location:this.pickingColors,size:3,type:n.UNSIGNED_BYTE},positions:{location:this.positions,size:3,type:n.FLOAT},positions64xyLow:{location:this.positions64xyLow,size:2,type:n.FLOAT},vertexValid:{location:this.vertexValid,size:1,type:n.UNSIGNED_BYTE},indices:{}};return T.default.forIn(r,function(t,r){i[t]=(0,a.default)({data:e[t],buffer:new w.default(n,{target:"indices"===t?n.ELEMENT_ARRAY_BUFFER:n.ARRAY_BUFFER,data:e[t],usage:n.DYNAMIC_DRAW})},r)}),i}}}]),e}(g.default);e.default=M},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(32),h=i(d),p=n(4),v=i(p),m=n(15),g=i(m),_=n(216),y=i(_),x=n(494),b=i(x),S=n(113),w=n(148),E=n(217),A=i(E),T=n(226),M=n(10),I=i(M),P=(0,g.default)({},b.default,{name:"polygon_side"}),k=function(t){function e(t){(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t));return n.store=new S.Store("buffer",128,16,T.deleteInstanceCacllback),n.shaderSource=P,n.shaderParams={attributes:["vertexPositions","vertexValid","positions","positions64xyLow","nextPositions","nextPositions64xyLow","elevations","fillColors","lineColors","pickingColors"],uniforms:["uMatrix","uCenter","uZoom","uPixelsPerMeter","uResolution","uProject_uCommonUnitsPerWorldUnit","uProject_uCommonUnitsPerWorldUnit2","picking_usePickingColor","u_isSideVertex","u_extruded","u_isWireframe","u_elevationScale","u_opacity"]},n.enableLight=!0,n._vertPositions=new Float32Array([1,1,0,1,0,0,1,0]),n}return(0,v.default)(e,t),(0,u.default)(e,[{key:"draw",value:function(t,e,n,i){var r=this.gl;if(e){var a=t.center,o=t.zoom,s=t.getDistanceRatio(),l=i.distanceScales,u=i.extruded,c=void 0===u?1:u,f=(0,w.splitLatLngNumber)(a.lat),d=(0,w.splitLatLngNumber)(a.lng);r.useProgram(r.program),r.uniformMatrix4fv(this.uMatrix,!1,e.elements),r.uniform4f(this.uCenter,d.high,f.high,d.low,f.low),r.uniform1f(this.uZoom,o),r.uniform3f(this.uPixelsPerMeter,s,s,s),r.uniform3f(this.uProject_uCommonUnitsPerWorldUnit,l.pixelsPerDegree[0],l.pixelsPerDegree[1],l.pixelsPerDegree[2]),r.uniform3f(this.uProject_uCommonUnitsPerWorldUnit2,l.pixelsPerDegree2[0],l.pixelsPerDegree2[1],l.pixelsPerDegree2[2]),r.uniform2f(this.uResolution,t.width,t.height),r.uniform1f(this.picking_usePickingColor,i.usePicking?1:0),r.uniform1f(this.u_isSideVertex,1),r.uniform1f(this.u_extruded,c),r.uniform1f(this.u_isWireframe,i.drawBorder?1:0),r.uniform1f(this.u_elevationScale,1),r.uniform1f(this.u_opacity,1),this.drawTile(n.uid,n,i.drawBorder)}}},{key:"drawTile",value:function(t,e,n){var i=this.gl,r=this.store,a=!1;if(r){r.exist(t)?this._hasChangedBuffer(t,e)&&(a=!0):r.set(t,this.createBuffer(t,e));var o=r.get(t);o.vertexPositions.bind(),o.vertexPositions.pointToAttrib({location:this.vertexPositions,size:2,type:i.FLOAT}),I.default.forIn(o,function(t,n){if("vertexPositions"!==t){var r=n.buffer,o=n.location,s=n.size,l=n.type;r.bind(),a&&(r.bufferData(e[t],{usage:i.DYNAMIC_DRAW}),n.data=e[t]),"indices"!==t&&(r.pointToAttrib({location:o,size:s,type:l}),i.vertexAttribDivisor(o,1))}}),i.drawArraysInstanced(n?i.LINE_STRIP:i.TRIANGLE_FAN,0,4,e.elevations.length),i.bindBuffer(i.ARRAY_BUFFER,null),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null),i.vertexAttribDivisor(this.positions,0),i.vertexAttribDivisor(this.positions64xyLow,0),i.vertexAttribDivisor(this.elevations,0),i.vertexAttribDivisor(this.fillColors,0),i.vertexAttribDivisor(this.lineColors,0),i.vertexAttribDivisor(this.nextPositions,0),i.vertexAttribDivisor(this.nextPositions64xyLow,0),i.vertexAttribDivisor(this.pickingColors,0),i.vertexAttribDivisor(this.vertexValid,0)}}},{key:"_hasChangedBuffer",value:function(t,e){var n=this.store.get(t);for(var i in n)if(n.hasOwnProperty(i)&&e[i]&&"indices"!==i&&n[i].data!==e[i])return!0;return!1}},{key:"createBuffer",value:function(t,e){var n=this.gl;if(e){var i={},r={elevations:{location:this.elevations,size:1,type:n.FLOAT},fillColors:{location:this.fillColors,size:4,type:n.UNSIGNED_BYTE},lineColors:{location:this.lineColors,size:4,type:n.UNSIGNED_BYTE},pickingColors:{location:this.pickingColors,size:3,type:n.UNSIGNED_BYTE},positions:{location:this.positions,size:3,type:n.FLOAT},positions64xyLow:{location:this.positions64xyLow,size:2,type:n.FLOAT},vertexValid:{location:this.vertexValid,size:1,type:n.UNSIGNED_BYTE},nextPositions:{location:this.nextPositions,size:3,type:n.FLOAT},nextPositions64xyLow:{location:this.nextPositions64xyLow,size:2,type:n.FLOAT},indices:{}};return this._vertPositions&&(i.vertexPositions=new A.default(n,{data:this._vertPositions})),I.default.forIn(r,function(t,r){i[t]=(0,g.default)({data:e[t],buffer:new A.default(n,{target:"indices"===t?n.ELEMENT_ARRAY_BUFFER:n.ARRAY_BUFFER,data:e[t],usage:n.DYNAMIC_DRAW})},r)}),i}}},{key:"destroy",value:function(){this._vertPositions=null,(0,h.default)(e.prototype.__proto__||(0,a.default)(e.prototype),"destroy",this).call(this)}}]),e}(y.default);e.default=k},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(15),a=i(r),o=n(3),s=i(o),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),p=n(32),v=i(p),m=n(4),g=i(m),_=n(216),y=i(_),x=n(636),b=i(x),S=n(635),w=i(S),E=n(113),A=n(148),T=n(217),M=i(T),I=n(226),P=n(218),k=i(P),L=n(1076),C=i(L),R=n(10),D=i(R),N=n(346),B=i(N),O=n(46),F=i(O),z=!1,V=new Image;V.onload=function(){z=!0},V.src=C.default;var U=function(t){function e(t){(0,u.default)(this,e);var n=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t));return n.store=new E.Store("buffer",128,16,I.deleteInstanceCacllback),n.shaderSource=n.gl.isWebGL2?w.default:b.default,n.shaderParams={attributes:["positions","instanceStartPositions","instanceEndPositions","instanceLeftDeltas","instanceRightDeltas","instanceStartEndPositions64xyLow","instanceWidths","instanceColors","instanceLineInfo","instanceArrowInfo","instanceArrowStartPositions","instanceDashStartPositions","instancePickingColors","instanceOriginWidths"],uniforms:["uMatrix","uCenter","uZoom","uPixelsPerMeter","uResolution","uProject_uCommonUnitsPerWorldUnit","uProject_uCommonUnitsPerWorldUnit2","uProject_uDegreePerPixels","picking_usePickingColor","u_isBorder","u_widthScale","u_widthMinPixels","u_widthMaxPixels","u_enableGeodesic","u_miterLimit","u_lineJoin","u_opacity","u_arrowSampler"]},n.modelPositions=new Int16Array([0,1,0,-1,1,1,1,-1]),n.modelIndicies=new Uint8Array([0,1,2,1,3,2]),n}return(0,g.default)(e,t),(0,f.default)(e,[{key:"loadTexture",value:function(){z?(this._arrowTex||(this._arrowTex=new k.default(this.gl,{pixels:V}),this._arrowTex.upload({flipY:!0})),this._arrowTex.bind()):(this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,null))}},{key:"afterDraw",value:function(){this._arrowTex&&this._arrowTex.unbind()}},{key:"draw",value:function(t,e,n,i){var r=this.gl;if(e&&0!==n.count){var a=t.center,o=t.zoom,s=t.getDistanceRatio(),l=i.distanceScales,u=(0,A.splitLatLngNumber)(a.lat),c=(0,A.splitLatLngNumber)(a.lng);r.useProgram(r.program),r.uniformMatrix4fv(this.uMatrix,!1,e.elements),r.uniform4f(this.uCenter,c.high,u.high,c.low,u.low),r.uniform1f(this.uZoom,o),r.uniform3f(this.uPixelsPerMeter,s,s,s),r.uniform3f(this.uProject_uCommonUnitsPerWorldUnit,l.pixelsPerDegree[0],l.pixelsPerDegree[1],l.pixelsPerDegree[2]),r.uniform2f(this.uProject_uDegreePerPixels,l.degreesPerPixel[0],l.degreesPerPixel[1]),r.uniform3f(this.uProject_uCommonUnitsPerWorldUnit2,l.pixelsPerDegree2[0],l.pixelsPerDegree2[1],l.pixelsPerDegree2[2]),r.uniform2f(this.uResolution,t.width,t.height),r.uniform1f(this.picking_usePickingColor,i.usePicking?1:0),r.uniform1f(this.u_isBorder,i.drawBorder?1:0),r.uniform1f(this.u_widthScale,1/s),r.uniform1f(this.u_widthMinPixels,0),r.uniform1f(this.u_widthMaxPixels,1e3),r.uniform1f(this.u_miterLimit,150),r.uniform1f(this.u_lineJoin,1),r.uniform1f(this.u_opacity,1),r.uniform1i(this.u_arrowSampler,0),r.uniform1f(this.u_enableGeodesic,n.enableGeodesic?1:0);var f=this._calcStratPosition(n,t,i.drawBorder),d=f.instanceArrowStartPositionList,h=f.instanceDashStartPositionList;n.instanceArrowStartPositionList=d,n.instanceDashStartPositionList=h,this.drawTileInstance(n.uid,n,i.drawBorder)}}},{key:"_calcStratPosition",value:function(t,e,n){var i=t.count,r=t.instanceArrowInfoList,a=t.instanceLineInfoList,o=t.instanceBorderWidthList,s=t.instanceOriginWidthList,l=new Float32Array(i),u=new Float32Array(i),c={instanceArrowStartPositionList:l,instanceDashStartPositionList:u};if(0===r[1]&&0===a[2])return c;for(var f=t.instanceStartPositionList,d=t.instanceEndPositionList,h=t.instanceStartEndPostions64xyLowList,p=e.getDistanceRatio(),v=r[1],m=v+r[2],g=a[1],_=a[2],y=_+g,x=0,b=0,S=n?(o[0]-s[0])/2:0,w=0;w<i;w++){var E=new F.default(f[3*w+1]+h[4*w+1],f[3*w]+h[4*w]),A=new F.default(d[3*w+1]+h[4*w+3],d[3*w]+h[4*w+2]),T=(0,B.default)(E,A),M=T*p;if(0!==r[1])if(x<v)l[w]=0,x=M%m;else{var I=m-x;M<I?(l[w]=-1,x+=M):(l[w]=I,x=(M-I)%m)}if(0!==a[2]&&0===w)if(M>g)if(u[w]=g+S,M>y){var P=M%y;b=g-P}else b=g-M;else u[w]=9999,b=g-M;if(0!==a[2]&&w>0){u[w]=b+S;var k=!0;if(b>M)b-=M;else for(var L=b;L<=M;)k?(L+=_,k=!1,L>M&&(b=-(_-(L-M)))):(L+=g,k=!0,L>M&&(b=L-M))}}return c={instanceArrowStartPositionList:l,instanceDashStartPositionList:u}}},{key:"drawTileInstance",value:function(t,e,n){var i=this.gl,r=this.store,a=!1;if(r){r.exist(t)?this._hasChangedBuffer(t,e)&&(a=!0):r.set(t,this.createBuffer(t,e));var o=r.get(t);o.positions.bind(),o.positions.pointToAttrib({location:this.positions,size:2,type:i.SHORT}),o.indices.bind(),D.default.forIn(o.instanceBuffers,function(t,r){if(n){if("instanceColorList"===t||"instanceWidthList"===t)return}else if("instanceBorderColorList"===t||"instanceBorderWidthList"===t)return;var o=r.buffer,s=r.location,l=r.size,u=r.type;o.bind(),a&&(o.bufferData(e[t],{usage:i.DYNAMIC_DRAW}),r.data=e[t]),o.pointToAttrib({location:s,size:l,type:u}),i.vertexAttribDivisor(s,1)}),i.drawElementsInstanced(i.TRIANGLES,this.modelIndicies.length,i.UNSIGNED_BYTE,0,e.count),i.bindBuffer(i.ARRAY_BUFFER,null),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null),i.vertexAttribDivisor(this.instanceStartPositions,0),i.vertexAttribDivisor(this.instanceEndPositions,0),i.vertexAttribDivisor(this.instanceLeftDeltas,0),i.vertexAttribDivisor(this.instanceRightDeltas,0),i.vertexAttribDivisor(this.instanceStartEndPositions64xyLow,0),i.vertexAttribDivisor(this.instancePickingColors,0),i.vertexAttribDivisor(this.instanceColors,0),i.vertexAttribDivisor(this.instanceWidths,0),i.vertexAttribDivisor(this.instanceOriginWidths,0),i.vertexAttribDivisor(this.instanceLineInfo,0),i.vertexAttribDivisor(this.instanceArrowInfo,0),i.vertexAttribDivisor(this.instanceArrowStartPositions,0),i.vertexAttribDivisor(this.instanceDashStartPositions,0)}}},{key:"_hasChangedBuffer",value:function(t,e){var n=this.store.get(t),i=n.instanceBuffers;for(var r in i)if(i.hasOwnProperty(r)&&e[r]&&i[r].data!==e[r])return!0;return!1}},{key:"createBuffer",value:function(t,e){var n=this.gl,i={positions:null,indices:null,instanceBuffers:{}};if(this.modelPositions&&(i.positions=new M.default(n,{data:this.modelPositions})),this.modelIndicies&&(i.indices=new M.default(n,{target:n.ELEMENT_ARRAY_BUFFER,data:this.modelIndicies})),e){var r={instanceStartPositionList:{location:this.instanceStartPositions,size:3,type:n.FLOAT},instanceEndPositionList:{location:this.instanceEndPositions,size:3,type:n.FLOAT},instanceLeftDeltaList:{location:this.instanceLeftDeltas,size:3,type:n.FLOAT},instanceRightDeltaList:{location:this.instanceRightDeltas,size:3,type:n.FLOAT},instanceStartEndPostions64xyLowList:{location:this.instanceStartEndPositions64xyLow,size:4,type:n.FLOAT},instanceColorList:{location:this.instanceColors,size:4,type:n.UNSIGNED_BYTE},instanceBorderColorList:{location:this.instanceColors,size:4,type:n.UNSIGNED_BYTE},instanceWidthList:{location:this.instanceWidths,size:1,type:n.FLOAT},instanceBorderWidthList:{location:this.instanceWidths,size:1,type:n.FLOAT},instanceOriginWidthList:{location:this.instanceOriginWidths,size:1,type:n.FLOAT},instanceLineInfoList:{location:this.instanceLineInfo,size:4,type:n.UNSIGNED_BYTE},instanceArrowInfoList:{location:this.instanceArrowInfo,size:4,type:n.UNSIGNED_BYTE},instancePickingColorList:{location:this.instancePickingColors,size:3,type:n.UNSIGNED_BYTE},instanceArrowStartPositionList:{location:this.instanceArrowStartPositions,size:1,type:n.FLOAT},instanceDashStartPositionList:{location:this.instanceDashStartPositions,size:1,type:n.FLOAT}};D.default.forIn(r,function(t,r){e[t]&&(i.instanceBuffers[t]=(0,a.default)({data:e[t],buffer:new M.default(n,{data:e[t],usage:n.DYNAMIC_DRAW})},r))})}return i}},{key:"destroy",value:function(){this.modelIndicies=null,this.modelPositions=null,this._arrowTex&&(this._arrowTex.delete(),this._arrowTex=null),(0,v.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"destroy",this).call(this)}}]),e}(y.default);e.default=U},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(216),v=i(p),m=n(643),g=i(m),_=n(113),y=n(226),x=n(22),b=i(x),S=function(t){function e(t){(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t));return n.store=new _.Store("buffer",1024,128,y.deleteBuffersCallback),n.shaderSource=g.default,n.shaderParams={attributes:["a_Position","a_Color","a_Normal","a_LineInfo","a_LineDistance","a_SideInfo","a_PickingColor"],uniforms:["u_matrix","u_modelMatrix","u_SizeScale","u_opacity"]},n.enableLight=!0,n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"draw",value:function(t,e,n,i,r,a){var o=this.gl,s=this.store,l=t.vertices,u=t.indeices,c="traffic_"+a+"_"+t.id+"_"+Math.round(i),f=e.matrix,d=e.modelMatrix,h=void 0;s.exist(c)?(h=s.get(c),this.bindVertexBuffer(l,h.vertices),this.bindElementBuffer(u,h.indices)):h=s.set(c,{vertices:this.bindVertexBuffer(l),indices:this.bindElementBuffer(u),length:u.length}),o.uniformMatrix4fv(this.u_matrix,!1,f),o.uniformMatrix4fv(this.u_modelMatrix,!1,d);var p=~~(100*(i-~~i));o.uniform1f(this.u_SizeScale,1e3*p+Math.min(Math.floor(100*(n||1)),255)),o.uniform1f(this.u_opacity,r);var v=b.default.batchRender?o.UNSIGNED_INT:o.UNSIGNED_SHORT;o.drawElements(o.TRIANGLES,h.length,v,0),this.unbindVertexBuffer(h.vertices,l.attributes)}}]),e}(v.default);e.default=S},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(15),a=i(r),o=n(3),s=i(o),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),p=n(4),v=i(p),m=n(113),g=n(226),_=n(313),y=i(_),x=n(644),b=n(217),S=i(b),w=n(10),E=i(w),A=function(t){function e(t){(0,u.default)(this,e);var n=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t));return n.shaderParams={attributes:["instanceLinks","instanceColors","instanceParticles"],uniforms:["uMatrix","uSampler","uTexInfo","uSubTexInfo","uTick"]},n.shaderSource=x.defaultShader,n.store=new m.Store("buffer",128,16,g.deleteInstanceCacllback),n}return(0,v.default)(e,t),(0,f.default)(e,[{key:"draw",value:function(t,e){var n=this.gl,i=this.store,r=e.matrix,a=e.texInfo,o=e.uid,s=e.tick,l=t.texSize,u=t.pixelSpace,c=t.count,f=t.instance;n.uniformMatrix4fv(this.uMatrix,!1,r.elements),n.uniform1i(this.uSampler,0),n.uniform2f(this.uTexInfo,l,u),n.uniform4f(this.uSubTexInfo,a.s,a.t,a.w,a.h),n.uniform1f(this.uTick,s);var d=!1;if(i.exist(o)){var h=i.get(o).instanceBuffers;this.isBufferChanged(h,f)&&(d=!0)}else i.set(o,this.createBuffer(o,f));var p=i.get(o);E.default.forIn(p.instanceBuffers,function(t,e){var i=e.buffer,r=e.location,a=e.size,o=e.type;i.bind(),d&&(i.bufferData(f[t],{usage:n.DYNAMIC_DRAW}),e.data=f[t]),i.pointToAttrib({location:r,size:a,type:o}),n.vertexAttribDivisor(r,1)}),n.drawArraysInstanced(n.POINTS,0,1,c),n.bindBuffer(n.ARRAY_BUFFER,null),n.vertexAttribDivisor(this.instanceLinks,0),n.vertexAttribDivisor(this.instanceColors,0),n.vertexAttribDivisor(this.instanceParticles,0)}},{key:"createBuffer",value:function(t,e){var n=this.gl,i={positions:null,indices:null,instanceBuffers:{}};if(this.modelPositions&&(i.positions=new S.default(n,{data:this.modelPositions})),e){var r=this.getInstanceConfig();E.default.forIn(r,function(t,r){i.instanceBuffers[t]=(0,a.default)({data:e[t],buffer:new S.default(n,{data:e[t],usage:n.DYNAMIC_DRAW})},r)})}return i}},{key:"getInstanceConfig",value:function(){var t=this.gl;return{instanceLinkList:{location:this.instanceLinks,size:2,type:t.UNSIGNED_SHORT},instanceColorList:{location:this.instanceColors,size:4,type:t.UNSIGNED_BYTE},instanceParticleList:{location:this.instanceParticles,size:1,type:t.UNSIGNED_BYTE}}}}]),e}(y.default);e.default=A},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(216),v=i(p),m=n(622),g=i(m),_=n(113),y=n(226),x=function(t){function e(t){(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t));return n.store=new _.Store("buffer",1024,128,y.deleteBuffersCallback),n.shaderSource=g.default,n.shaderParams={attributes:["a_Position","a_Info"],uniforms:["u_matrix","u_modelMatrix","u_lightPVMatrix","u_maskSampler","u_maskScale"]},n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"draw",value:function(t,e){var n=this.gl,i=this.store,r=t.vertices,a=t.indeices,o="build_"+t.id,s=e.matrix,l=e.modelMatrix,u=e.lightPVMatrix,c=e.maskScale||1,f=void 0;i.exist(o)?(f=i.get(o),this.bindVertexBuffer(r,f.vertices),this.bindElementBuffer(a,f.indices)):f=i.set(o,{vertices:this.bindVertexBuffer(r),indices:this.bindElementBuffer(a),length:a.length}),n.uniformMatrix4fv(this.u_matrix,!1,s),n.uniformMatrix4fv(this.u_modelMatrix,!1,l),n.uniformMatrix4fv(this.u_lightPVMatrix,!1,u),n.uniform1i(this.u_maskSampler,0),n.uniform1f(this.u_maskScale,c),n.drawElements(n.TRIANGLES,f.length,n.UNSIGNED_SHORT,0)}}]),e}(v.default);e.default=x},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return!!Ht(t)&&t.some(function(t){return(0,mt.isOverlayLayer)(t.type)})}function a(t){return!!Ht(t)&&t.some(function(t){return(0,mt.isGrayTileLayer)(t.type)})}function o(t){return r(t)||t.some(function(t){return(0,mt.isGrayTileLayer)(t.type)||(0,mt.isTextureLayer)(t)||(0,mt.isIndoorLayer)(t)||t.type===mt.RENDER_LAYER_TYPE.mask||t.type===mt.RENDER_LAYER_TYPE.highlight})}function s(t){t&&t.stops&&!t.isEmpty()||(t={stops:{0:"rgba(255, 255, 255,1)",1:"rgba(0,0,0, 1)"}});var e=document.createElement("canvas"),n=e.getContext("2d");e.width=256,e.height=1;var i=n.createLinearGradient(0,0,256,1);for(var r in t.stops)t.stops[r]&&i.addColorStop(+r,t.stops[r]);return n.fillStyle=i,n.fillRect(0,0,256,1),e}Object.defineProperty(e,"__esModule",{value:!0});var l=n(17),u=i(l),c=n(125),f=i(c),d=n(25),h=i(d),p=n(18),v=i(p),m=n(0),g=i(m),_=n(1),y=i(_),x=n(826),b=n(790),S=i(b),w=n(804),E=i(w),A=n(805),T=i(A),M=n(806),I=i(M),P=n(544),k=i(P),L=n(797),C=i(L),R=n(798),D=i(R),N=n(791),B=i(N),O=n(789),F=i(O),z=n(542),V=i(z),U=n(792),G=i(U),H=n(794),Y=i(H),j=n(796),W=i(j),X=n(795),Z=i(X),q=n(793),Q=i(q),J=n(809),K=i(J),$=n(799),tt=i($),et=n(28),nt=i(et),it=n(786),rt=i(it),at=n(821),ot=i(at),st=n(546),lt=i(st),ut=n(817),ct=i(ut),ft=n(816),dt=i(ft),ht=n(818),pt=i(ht),vt=n(524),mt=n(53),gt=n(545),_t=i(gt),yt=n(547),xt=i(yt),bt=n(815),St=n(811),wt=i(St),Et=n(146),At=n(308),Tt=n(812),Mt=i(Tt),It=n(218),Pt=i(It),kt=n(109),Lt=n(787),Ct=i(Lt),Rt=n(803),Dt=i(Rt),Nt=n(813),Bt=i(Nt),Ot=n(808),Ft=i(Ot),zt=n(807),Vt=i(zt),Ut=n(36),Gt=i(Ut),Ht=Gt.default.isArray,Yt=n(10),jt=function(){function t(e,n){(0,g.default)(this,t),n=n||{};var i=n.renderOptions||{},r=i.preserveDrawingBuffer,a=void 0!==r&&r,o=i.disableAntialias,s=void 0!==o&&o,l=i.disableShadow,u=void 0!==l&&l,c=i.skyOptions,f=void 0===c?{}:c,d=i.fogOptions,h=void 0===d?{}:d,p=i.enableBloom,v=void 0!==p&&p,m=i.disableWebGL2,_=void 0!==m&&m;e.style.zIndex=2,this._destroyed=!1,this.styleId=At.STYLE_ID[n.mapStyleId],this.isDefaultStyle=(0,At.isDefaultStyle)(n.mapStyleId),this.canvas=e,this.maskScale=.5,this.map=n.map;var y=this.createContext(e,{preserveDrawingBuffer:a,disableWebGL2:_});this.skyOptions=f,this.textCache=this.isDefaultStyle?new ot.default(this.gl):null,this.textCacheDeleteHandle=this._onTextCacheDelete.bind(this),this.textCache&&this.textCache.on("deleteCache",this.textCacheDeleteHandle),this.imageCaches={},this.imageCacheManagers={},this.grayCaches={},this.colorMapCanvas={},this.glyphManager=new dt.default(this.gl),this.markerManager=new pt.default(this.gl),this.lightManager=new Ct.default,this.painters={base:new S.default({gl:y}),polygon:new E.default({gl:y}),side:new T.default({gl:y}),polyline:new I.default({gl:y}),arrow:new F.default({gl:y}),building:new B.default({gl:y}),buildingShadow:new K.default({gl:y}),marker:new D.default({gl:y,markerManager:this.markerManager}),symbol:new k.default({gl:y,textCache:this.textCache,glyphManager:this.glyphManager,markerManager:this.markerManager}),image:new V.default({gl:y}),gray:new G.default({gl:y}),label:new C.default({gl:this.gl,glyphManager:this.glyphManager}),mask:new tt.default({gl:y}),indoorMask:new Y.default({gl:y}),indoorRegion:new W.default({gl:y}),indoorPoi:new Z.default({gl:y,glyphManager:this.glyphManager,markerManager:this.markerManager}),indoorEscalator:new Q.default({gl:y}),highlight:new Dt.default({gl:y}),trafficFlow:new Ft.default({gl:y}),trafficBase:new Vt.default({gl:y})},this.disableAntialias=nt.default.isLowMobileDevice()||s,this.disableShadow=nt.default.isLowMobileDevice()||u,this.enableBloom=v&&y.isWebGL2,this.createFrameBuffer({skyOptions:f,fogOptions:h}),this.resize(e.clientWidth,e.clientHeight),this.camera=new rt.default({map:this.map,view:this.view,look:[0,0,0,0,0,0,0,1,0],scale:n.scale,offset:n.offset}),this.camera.setRotate(n.pitch||0,n.heading||0),this.camera.fogPitch=h.pitch||45,this.map.on("zoom_changed",nt.default.throttle(this._checkBgColor.bind(this),50)),this._updateBgColor()}return(0,y.default)(t,[{key:"setDepth",value:function(t,e){this.gl.depthRange(t,e)}},{key:"createContext",value:function(t,e){var n=e.preserveDrawingBuffer,i=void 0!==n&&n,r=e.disableWebGL2,a=void 0!==r&&r,o={alpha:!0,antialias:!1,depth:!0,failIfMajorPerformanceCaveat:!1,powerPreference:(0,et.isPC)()?"high-performance":"default",preserveDrawingBuffer:i,stencil:!1},s=null;return a||(s=t.getContext("webgl2",o)),s?s.isWebGL2=!0:(s=t.getContext("webgl",o),s.isWebGL2=!1),s.id=Yt.uniqueId(),s.clearColor.apply(s,Yt.rgbaToGLColor((0,vt.getBgColor)(this.styleId,this.transform&&this.transform.zoom||10))),s.enable(s.BLEND),s.disable(s.CULL_FACE),s.disable(s.DEPTH_TEST),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),this.gl=s,this.getExtensions(),s}},{key:"getExtensions",value:function(){var t=this.gl,e=new bt.Extensions(t);t.isWebGL2?(e.set("WEBGL_depth_texture",!0),e.set("OES_element_index_uint",!0)):(e.get("WEBGL_depth_texture","depth textures not supported"),e.get("OES_element_index_uint","element_index_uint not supported"),e.get("WEBGL_draw_buffers","draw buffers not supported"),e.extendWebGL1()),e.get("WEBGL_debug_renderer_info","WEBGL_debug_renderer_info not supported"),t.extensions_TMAP=e}},{key:"createFrameBuffer",value:function(t){var e=this.gl,n=this.enableBloom,i={},r=this.gl.extensions_TMAP.get("WEBGL_depth_texture");i.mask=new _t.default(e),this.disableShadow||(i.shadow=new _t.default(e,{attachments:{depth:r?new Pt.default(e,{pixels:null,internalformat:"DEPTH_COMPONENT24",format:"DEPTH_COMPONENT",type:"UNSIGNED_INT"}):new xt.default(this.gl)}})),i.main=new _t.default(e,{id:"fb-main",attachments:{color:n?[new Pt.default(e,{pixels:null}),new Pt.default(e,{pixels:null})]:void 0,depth:r?new Pt.default(e,{tex:null,internalformat:"DEPTH24_STENCIL8",format:"DEPTH_STENCIL",type:"UNSIGNED_INT_24_8"}):new xt.default(this.gl)}}),i.pass0=new _t.default(e,{id:"fb-pass-1"}),i.pass1=new _t.default(e,{id:"fb-pass-2"}),this.fxaaPass=new wt.default(e),this.fogPass=new Mt.default(e,{skyOptions:t.skyOptions,fogColor:t.fogOptions.color,fogRange:t.fogOptions.range}),n&&(this.bloomBlurPass=new Bt.default(e)),this.frameBuffer=i}},{key:"onMapStyleUpdate",value:function(t){if("config"!==t&&this.styleId===t)return void this._updateBgColor();this.isDefaultStyle!==(0,At.isDefaultStyle)(t)?(this.isDefaultStyle=(0,At.isDefaultStyle)(t),this.textCache&&this.textCache.off("deleteCache",this.textCacheDeleteHandle),this.textCache=this.isDefaultStyle?new ot.default(this.gl):null,this.textCache&&this.textCache.on("deleteCache",this.textCacheDeleteHandle),this.painters.symbol.destroy(),this.painters.symbol=null,this.painters.symbol=new k.default({gl:this.gl,textCache:this.textCache,glyphManager:this.glyphManager,markerManager:this.markerManager}),this.fogPass._setSkyOptions(this.skyOptions||{})):this.painters.symbol.clear(),this.painters.base.clearStore(),this.painters.building.clearStore(),this.painters.arrow.clearStore(),this.styleId=t,this._updateBgColor()}},{key:"getDrawContainer",value:function(){return this.canvas}},{key:"resize",value:function(t,e){var n=this;this.view={left:-t/2,right:t/2,bottom:-e/2,top:e/2,near:-1,far:1e3};var i=nt.default.devicePixelRatio;this.canvas.width=t*i,this.canvas.height=e*i,this.gl.viewport(0,0,t*i,e*i),this.camera&&this.camera.setView(this.view),Yt.forIn(this.frameBuffer,function(t,e){e&&e.resize(n.canvas.width,n.canvas.height)})}},{key:"setTilesMatrix",value:function(t){var e=this,n={},i={},r=this.view;Yt.forIn(t,function(t,a){var o=(0,x.getModelMatrix)({view:r,offset:a.offset,scale:a.scale});n[t]=e.camera.pvMatrix.clone().multiply(o),i[t]=o}),this.tilesMatrix=n,this.tilesModelMatrix=i}},{key:"catcheTextTexture",value:function(t,e){if(this.painters.symbol&&(this.painters.symbol.preDraw({iconsLoader:e}),t&&0!==t.length)){var n=this.textCache;n.loadTexture();for(var i,r=0;i=t[r];r++)i.features&&""!==i.features&&n.add(i.id,i.features)}}},{key:"clear",value:function(){var t=this.gl;t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT)}},{key:"preRender",value:function(t,e){t=t||this.transform;var n=t&&t.heading||0,i=t&&t.pitch||0,r=t&&t.roll||0;this.camera.setRotate(i,n,r),this.setTilesMatrix(e)}},{key:"drawMask",value:function(t){var e=this,n=this.maskScale,i=t.filter(function(t){return t.type===mt.RENDER_LAYER_TYPE.indoorRegion}),r=t.filter(function(t){return t.type===mt.RENDER_LAYER_TYPE.mask});this.frameBuffer.mask.bind();var a=this.gl;if(a.clearColor(0,1,0,1),this.clear(),i.length||r.length){var o=this.transform,s=(new kt.Matrix4).scale(n,n,n).multiply(this.camera.pvMatrix);this.painters.indoorMask.preDraw(),i.forEach(function(t){var n=t.tiles&&t.tiles[0];if(n){var i=n.features,r=i.center,a=i.bounds,l=i.floorIndex,u={uid:t.id+"_"+l+"_bounds",center:r,position:a[0].top.position,index:a[0].top.index};e.painters.indoorMask.draw(u,o,s,{color:[1,1,1,1]})}}),this.painters.mask.preDraw(),r.forEach(function(t){if(!t.isMaskReverse){var n=t.tiles&&t.tiles[0];n&&e.painters.mask.draw(o,s,n.features,{color:[1,1,1,1],distanceScales:e.distanceScales})}});var l=t.filter(function(t){return t.type===mt.RENDER_LAYER_TYPE.mask&&t.isMaskReverse});l&&l.length>=1&&(a.colorMask(!1,!0,!1,!1),a.clearColor(0,0,0,1),this.clear(),l.forEach(function(t){var n=t.tiles&&t.tiles[0];n&&e.painters.mask.draw(o,s,n.features,{color:[0,1,0,0],distanceScales:e.distanceScales})}),a.colorMask(!0,!0,!0,!0))}a.clearColor.apply(a,Yt.rgbaToGLColor(this.background)),this.frameBuffer.mask.unbind()}},{key:"drawShadow",value:function(t){var e=this,n=t.filter(function(t){return t.type===mt.RENDER_LAYER_TYPE.building3d});if(n.length){this.frameBuffer.shadow.bind();var i=this.gl;this.clear(),i.enable(i.DEPTH_TEST),i.enable(i.CULL_FACE),i.colorMask(!1,!1,!1,!1);var r=this.lightManager.getLightPVMatrix(this.view);n.forEach(function(t){e.drawBuildingShadows(t,r)}),i.disable(i.DEPTH_TEST),i.disable(i.CULL_FACE),i.colorMask(!0,!0,!0,!0),this.frameBuffer.shadow.unbind()}}},{key:"drawBloom",value:function(){var t=this.gl,e=0,n="main",i="pass0",r=!0;t.clearColor(0,0,0,0);for(var a=0;a<9;a++)this.bloomBlurPass.setProps({horizontal:r}),this.bloomBlurPass.render({inputBuffer:this.frameBuffer[n],outputBuffer:this.frameBuffer[i],colorIndex:0===a?1:0}),n="pass"+e,i="pass"+(1-e),e=1-e,r=!r;t.blendFunc(t.ONE,t.ONE),this.bloomBlurPass.setProps({horizontal:r}),this.bloomBlurPass.render({inputBuffer:this.frameBuffer[n],outputBuffer:this.frameBuffer.main,preserve:!0}),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.clearColor.apply(t,(0,v.default)(Yt.rgbaToGLColor(this.background)))}},{key:"clearBloomBuffer",value:function(){var t=this.gl;this.frameBuffer.main.setDrawBuffers(["COLOR_ATTACHMENT0","COLOR_ATTACHMENT1"]),t.clearBufferfv(t.COLOR,1,new Float32Array([0,0,0,0])),this.frameBuffer.main.setDrawBuffers(["COLOR_ATTACHMENT0"])}},{key:"render",value:function(t,e,n,i){if(!this._destroyed){e=e||this.transform,this.transform=e,t=t||this.data,this.data=t,this.distanceScales=o(t)?e.getDistanceScales():null,this.lightManager.update({transform:e,camera:this.camera,view:this.view}),this.textCache&&this.textCache.updateRenderTiles(this.tilesMatrix),this.drawMask(t),!this.disableShadow&&this.lightManager.getShadowLight()&&this.drawShadow(t);var r=!(i.disableAntialias||this.disableAntialias),a=this.camera.getFogEdge(),s=this.gl.extensions_TMAP.get("WEBGL_depth_texture")&&a[1]<1/0,l=[],u=[];if(t.forEach(function(t){t.rank>=(0,Et.getNAALine)()?u.push(t):l.push(t)}),this.frameBuffer.main.bind(),this.clear(),this.enableBloom&&this.clearBloomBuffer(),this.draw(l,n,i),this.enableBloom&&this.drawBloom(),this.fxaaPass.setProps({enabled:r}),this.fxaaPass.render({inputBuffer:this.frameBuffer.main,outputBuffer:null}),s){var c=this.camera.pvMatrix.multiplyVector4({elements:[0,0,0,1]}).elements;this.fogPass.setProps({fogEdge:a,depthAtCenter:(c[2]/c[3]+1)/2,depthTexture:this.frameBuffer.main.depth.texture,heading:e.heading}),this.frameBuffer.pass0.copy(null),this.fogPass.render({inputBuffer:this.frameBuffer.pass0,outputBuffer:null,preserve:!0})}this.draw(u,n,i)}}},{key:"draw",value:function(t,e,n){var i=this,r=n.fadeChange,a=n.iconsLoader;t.forEach(function(n){switch(n.type){case mt.RENDER_LAYER_TYPE.text:i.textCache&&i.catcheTextTexture(n.tiles,a);var o=t.filter(function(t){return t.type===mt.BASE_LAYER_TYPE.point})[0],s=t.filter(function(t){return t.type===mt.BASE_LAYER_TYPE.label})[0];i.baseTextOptions={placement:e,fadeChange:r,iconsLoader:a},i.drawBaseText(e,r,a,{showPoint:!!o,showLabel:!!s});break;case mt.RENDER_LAYER_TYPE.base:i.drawBase(n);break;case mt.RENDER_LAYER_TYPE.arrow:i.drawArrows(n);break;case mt.RENDER_LAYER_TYPE.building3d:i.drawBuildings(n,!0);break;case mt.RENDER_LAYER_TYPE.building2d:i.drawBuildings(n,!1),i.drawBase(n,!0);break;case mt.RENDER_LAYER_TYPE.circle:case mt.RENDER_LAYER_TYPE.ellipse:case mt.RENDER_LAYER_TYPE.rectangle:case mt.RENDER_LAYER_TYPE.polygon:i.drawPolygons(n,{distanceScales:i.distanceScales,usePicking:!1});break;case mt.RENDER_LAYER_TYPE.polyline:i.drawPolylines(n,{distanceScales:i.distanceScales,usePicking:!1});break;case mt.RENDER_LAYER_TYPE.label:i.drawLabels(n,{distanceScales:i.distanceScales,usePicking:!1});break;case mt.RENDER_LAYER_TYPE.marker:i.drawMarkers(n,{distanceScales:i.distanceScales,usePicking:!1});break;case mt.RENDER_LAYER_TYPE.visualPlugin:n.visualPlugin.draw(i.camera);break;case mt.RENDER_LAYER_TYPE.grayTile:i.drawGrayTile(n);break;case mt.RENDER_LAYER_TYPE.imageTile:i.drawImageTile(n);break;case mt.RENDER_LAYER_TYPE.canvasGround:case mt.RENDER_LAYER_TYPE.imageGround:i.drawGroundLayer(n);break;case mt.RENDER_LAYER_TYPE.indoorRegion:i.drawIndoorRegions(n);break;case mt.RENDER_LAYER_TYPE.indoorPoi:i.drawIndoorPois(n,{fadeChange:r});break;case mt.RENDER_LAYER_TYPE.indoorEscalator:i.drawIndoorEscalators(n);break;case mt.RENDER_LAYER_TYPE.highlight:i.drawHighlight(n,{distanceScales:i.distanceScales,usePicking:!1});break;case mt.RENDER_LAYER_TYPE.trafficBase:i.drawTrafficBaseTile(n);break;case mt.RENDER_LAYER_TYPE.trafficFlow:i.drawTrafficFlowTile(n)}})}},{key:"hasPickableLayer",value:function(){return r(this.data)||a(this.data)}},{key:"isNeedColor",value:function(t){return this.data.some(function(e){return(0,mt.isGrayTileLayer)(e.type)&&e.id===t})}},{key:"renderForPicking",value:function(t){var e=this;if(this.data){var n=this.data.filter(function(t){return(0,mt.isOverlayLayer)(t.type)||(0,mt.isGrayTileLayer)(t.type)});return n.length>0&&this.distanceScales?(n.forEach(function(n,i){switch(n.type){case mt.RENDER_LAYER_TYPE.rectangle:case mt.RENDER_LAYER_TYPE.circle:case mt.RENDER_LAYER_TYPE.ellipse:case mt.RENDER_LAYER_TYPE.polygon:t&&t(i),e.drawPolygons(n,{distanceScales:e.distanceScales,usePicking:!0,picking_zindex:i});break;case mt.RENDER_LAYER_TYPE.polyline:t&&t(i),e.drawPolylines(n,{distanceScales:e.distanceScales,usePicking:!0,picking_zindex:i});break;case mt.RENDER_LAYER_TYPE.label:t&&t(i),e.drawLabels(n,{distanceScales:e.distanceScales,usePicking:!0});break;case mt.RENDER_LAYER_TYPE.marker:t&&t(i),e.drawMarkers(n,{distanceScales:e.distanceScales,usePicking:!0});break;case mt.RENDER_LAYER_TYPE.grayTile:t&&t(i),e.drawGrayTile(n,{usePicking:!0})}}),n):null}}},{key:"renderForFeaturePicking",value:function(){if(this.data){var t=this.getTypeLayer(mt.BASE_LAYER_TYPE.base),e=this.getTypeLayer(mt.BASE_LAYER_TYPE.point),n=this.getTypeLayer(mt.BASE_LAYER_TYPE.label);this.drawBase(t,!1,!0);var i=this.baseTextOptions,r=i.placement,a=i.fadeChange,o=i.iconsLoader;r&&a&&o&&this.drawBaseText(r,a,o,{showPoint:!!e,showLabel:!!n,usePicking:!0})}}},{key:"getTypeLayer",value:function(t){if(this.data)return this.data.filter(function(e){return e.type===t})[0]}},{key:"drawBaseText",value:function(t,e,n,i){t.setInUse(!0);var r=this.painters,a=this.maskScale,o=this.gl;r.symbol&&(r.symbol.preDraw({iconsLoader:n,maskTexture:this.frameBuffer.mask.color}),i.showLabel&&t.calculateAlsoShowedLabel(this.tilesMatrix,this.camera,this.transform),r.symbol.draw(this.transform,this.tilesMatrix,t,{showPoint:i.showPoint,showLabel:i.showLabel,asBackground:!1,updateSubData:!0,fadeChange:e,iconsLoader:n,maskScale:a,usePicking:i.usePicking}),r.symbol.afterDraw(),this.frameBuffer.mask.color.unbind(o,{textureIndex:3}),t.setInUse(!1))}},{key:"drawBuildings",value:function(t,e){var n=this,i=t;if(i&&0!==i.tiles.length){var r=this.gl;this._withBlendEliminationDraw(r,function(){var t=n.painters.building,a=i.tiles;t.preDraw({lightUniforms:n.lightManager.uniforms,shadowTexture:n.frameBuffer.shadow&&n.frameBuffer.shadow.depth}),n.frameBuffer.mask.color.bind(r);var o=!0,s=!1,l=void 0;try{for(var u,c=(0,h.default)(a);!(o=(u=c.next()).done);o=!0){var f=u.value,d=f.features&&f.features.buildings;if(d){var p={zoom:n.transform.roundZoom,matrix:n.tilesMatrix[f.id].elements,modelMatrix:n.tilesModelMatrix[f.id].elements,maskScale:n.maskScale};t.draw(d,p,{scale:f.scale,use3D:e})}}}catch(t){s=!0,l=t}finally{try{!o&&c.return&&c.return()}finally{if(s)throw l}}n.frameBuffer.mask.color.unbind(),t.afterDraw()},{useCullFace:!0})}}},{key:"drawArrows",value:function(t){var e=t;if(e&&e.tiles&&0!==e.tiles.length){var n=this.painters.arrow,i=e.tiles;n.preDraw();var r=!0,a=!1,o=void 0;try{for(var s,l=(0,h.default)(i);!(r=(s=l.next()).done);r=!0){var u=s.value,c=u.features;if(c){var f=this.transform,d=f.width,p=f.height,v=f.scale,m={matrix:this.tilesMatrix[u.id].elements,width:d,height:p,scale:v};n.draw(c,m,{tileId:u.id})}}}catch(t){a=!0,o=t}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}n.afterDraw()}}},{key:"drawBuildingShadows",value:function(t,e){if(t&&0!==t.tiles.length){var n=this.painters.buildingShadow;n.preDraw(),this.frameBuffer.mask.color.bind(this.gl);var i=!0,r=!1,a=void 0;try{for(var o,s=(0,h.default)(t.tiles);!(i=(o=s.next()).done);i=!0){var l=o.value,u=l.features;if(u){var c={matrix:this.tilesMatrix[l.id].elements,modelMatrix:this.tilesModelMatrix[l.id].elements,lightPVMatrix:e.elements,maskScale:this.maskScale};n.draw(u,c,{scale:l.scale})}}}catch(t){r=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}this.frameBuffer.mask.color.unbind()}}},{key:"drawBase",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t&&0!==t.tiles.length){var i=this.painters.base,r=t.tiles;i.preDraw({lightUniforms:this.lightManager.uniforms,shadowTexture:this.frameBuffer.shadow&&this.frameBuffer.shadow.depth});var a=!0,o=!1,s=void 0;try{for(var l,u=(0,h.default)(r);!(a=(l=u.next()).done);a=!0){var c=l.value,f=e?c.features&&c.features.buildSideShapes:c.features;if(f){var d={matrix:this.tilesMatrix[c.id].elements,modelMatrix:this.tilesModelMatrix[c.id].elements};i.draw(f,d,c.scale,this.transform._zoom,t.id,n)}}}catch(t){o=!0,s=t}finally{try{!a&&u.return&&u.return()}finally{if(o)throw s}}i.afterDraw()}}},{key:"drawHighlight",value:function(t,e){var n=this.gl,i=t.tiles&&t.tiles[0];if(i&&i.features){n.enable(n.DEPTH_TEST),n.enable(n.STENCIL_TEST),n.colorMask(!1,!1,!1,!1),n.depthMask(!1),n.enable(n.CULL_FACE),n.stencilFunc(n.ALWAYS,1,255),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT);var r=this.camera.getLookPosition().elements,a=this.camera.getLightPosition().elements,o=this.camera.pvMatrix;e.noBorder=!0,e.extruded=!0,n.cullFace(n.FRONT),n.stencilOp(n.KEEP,n.INCR,n.KEEP),this._reallyDrawPolygon(o,i,r,a,e),e.extruded=!1,n.cullFace(n.BACK),n.stencilOp(n.KEEP,n.INCR,n.INCR),this._reallyDrawPolygon(o,i,r,a,e),e.extruded=!0,n.stencilOp(n.KEEP,n.DECR,n.KEEP),this._reallyDrawPolygon(o,i,r,a,e),n.disable(n.DEPTH_TEST),n.colorMask(!0,!0,!0,!0),n.stencilMask(0),n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);var s=this.painters.highlight;n.stencilFunc(n.EQUAL,1,255),s.preDraw(),s.draw({color:i.features.highlightColor}),n.stencilFunc(n.EQUAL,0,255),s.draw({color:i.features.shadeColor}),n.disable(n.STENCIL_TEST),n.disable(n.CULL_FACE),n.cullFace(n.BACK),n.depthMask(!0),n.stencilMask(255),n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA)}}},{key:"drawPolygons",value:function(t,e){var n=this.gl,i=t.tiles&&t.tiles[0];if(i&&i.features){var r=this.camera.getLookPosition().elements,a=this.camera.getLightPosition().elements,o=this.camera.pvMatrix;e.usePicking||n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.enable(n.CULL_FACE),n.enable(n.DEPTH_TEST),n.colorMask(!1,!1,!1,!1),this._reallyDrawPolygon(o,i,r,a,e),n.disable(n.DEPTH_TEST),n.colorMask(!0,!0,!0,!0),this._reallyDrawPolygon(o,i,r,a,e),n.disable(n.CULL_FACE),e.usePicking||n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA)}}},{key:"_reallyDrawPolygon",value:function(t,e,n,i,r){this.painters.side.preDraw({lightUniforms:this.lightManager.uniforms}),r.noBorder||this.painters.side.draw(this.transform,t,e.features,{drawBorder:!0,distanceScales:r.distanceScales,usePicking:r.usePicking,picking_zindex:r.picking_zindex,cameraPosition:n,lightPosition:i,extruded:r.extruded}),this.painters.side.draw(this.transform,t,e.features,{drawBorder:!1,distanceScales:r.distanceScales,usePicking:r.usePicking,picking_zindex:r.picking_zindex,cameraPosition:n,lightPosition:i,extruded:r.extruded}),this.painters.polygon.preDraw({lightUniforms:this.lightManager.uniforms}),this.painters.polygon.draw(this.transform,t,e.features,{distanceScales:r.distanceScales,usePicking:r.usePicking,picking_zindex:r.picking_zindex,cameraPosition:n,lightPosition:i,extruded:r.extruded})}},{key:"drawPolylines",value:function(t,e){var n=this.gl;this.painters.polyline.preDraw();var i=t.tiles&&t.tiles[0];if(i&&i.features){var r=this.camera.pvMatrix;e.usePicking||(n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA),this.enableBloom&&n.frameBuffer.setDrawBuffers(["COLOR_ATTACHMENT0","COLOR_ATTACHMENT1"])),this.painters.polyline.draw(this.transform,r,i.features,{drawBorder:!0,distanceScales:e.distanceScales,usePicking:e.usePicking,picking_zindex:e.picking_zindex}),this.painters.polyline.draw(this.transform,r,i.features,{drawBorder:!1,distanceScales:e.distanceScales,usePicking:e.usePicking,picking_zindex:e.picking_zindex}),e.usePicking||(n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA),this.enableBloom&&n.frameBuffer.setDrawBuffers(["COLOR_ATTACHMENT0"]))}}},{key:"drawGrayTile",value:function(t,e){var n=this,i=this.tilesMatrix,r=this.painters,a=this.grayCaches,o=this.gl,l=this.transform,u=l.viewTransition,c=l.zoom,d=l.center,h=l.width,p=l.height;a[t.id]||(a[t.id]=new lt.default(o,{itemWidth:t.tileSize,config:{magFilter:o.LINEAR}}));var v=a[t.id];t.tiles.forEach(function(t){v.addImage(t.id,t.features)}),v.loadTexture(),this.colorMapCanvas[t.id]||(this.colorMapCanvas[t.id]=s(t.colorMap)),this.colorMapTexture?this.colorMapTexture.update(this.colorMapCanvas[t.id],{textureIndex:1,width:256,height:1}):this.colorMapTexture=new Pt.default(this.map.renderEngine.gl,{pixels:this.colorMapCanvas[t.id],width:256,height:1});var m=r.gray;m.preDraw({hasColorMap:!!t.colorMap,colorMapTexture:this.colorMapTexture,rgbaFormatter:t.rgbaFormatter}),o.enable(o.CULL_FACE),t.tiles.forEach(function(r){var a=v.getTexCoord(r.id);a&&m.draw((0,f.default)({viewTransition:u,mercator:[r.coordX*r.size,r.coordY*r.size,r.coordZ],zoom:c,center:d,pvMatrix:n.camera.pvMatrix,matrix:i[r.id],size:{width:t.tileSize,height:t.tileSize},resolution:{width:h,height:p},texInfo:a,opacity:t.opacity},e))}),o.disable(o.CULL_FACE),m.afterDraw()}},{key:"drawImageTile",value:function(t){var e=this,n=t.imageSize,i=this.tilesMatrix,r=this.painters,a=this.imageCacheManagers,o=this.gl,s=this.transform,l=s.isSphere,u=s.viewTransition,c=s.zoom,f=s.center;a[t.id]||(a[t.id]=new ct.default(o,{itemWidth:n}));var d=a[t.id];d.updateTilesImage(t);var h=r.image;h.preDraw({isSphere:l}),o.enable(o.CULL_FACE),t.tiles.forEach(function(n){var r=d.getTexCoord(n.id),a=r.cacheIndex,o=r.texInfo;if(!o)return void console.log("no texInfo",n.id);d.imageCacheArray[a].loadTexture(),h.draw({isSphere:l,viewTransition:u,mercator:[n.coordX*n.size,n.coordY*n.size,n.coordZ],zoom:c,center:f,pvMatrix:e.camera.pvMatrix,matrix:i[n.id],size:{width:t.tileSize,height:t.tileSize},texInfo:o,opacity:t.opacity})}),o.disable(o.CULL_FACE),d.deleteOldCache(),h.afterDraw()}},{key:"drawTrafficBaseTile",value:function(t){if(t&&0!==t.tiles.length){var e=this.painters.trafficBase,n=t.tiles;e.preDraw({lightUniforms:this.lightManager.uniforms,shadowTexture:this.frameBuffer.shadow&&this.frameBuffer.shadow.depth});var i=!0,r=!1,a=void 0;try{for(var o,s=(0,h.default)(n);!(i=(o=s.next()).done);i=!0){var l=o.value,u=l.features.base;if(u){var c={matrix:this.tilesMatrix[l.id].elements,modelMatrix:this.tilesModelMatrix[l.id].elements};u.id=l.id+"_"+l.features.uid,e.draw(u,c,l.scale,this.transform._zoom,t.opacity,t.id)}}}catch(t){r=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}e.afterDraw()}}},{key:"drawTrafficFlowTile",value:function(t){var e=this,n=this.tilesMatrix,i=this.painters,r=this.imageCaches,a=this.gl;r[t.id]||(r[t.id]=new lt.default(a,{itemWidth:64,width:1024,height:1024,config:{minFilter:a.NEAREST,magFilter:a.NEAREST,flipY:!0}}));var o=r[t.id];t.tiles.forEach(function(t){o.addImage(t.id+"_"+t.features.uid,t.features.flow.pathImage)}),o.loadTexture();var s=i.trafficFlow;s.preDraw(),this._startTick||(this._startTick=nt.default.now()),t.tiles.forEach(function(t){var i=o.getTexCoord(t.id+"_"+t.features.uid);i&&s.draw(t.features.flow,{uid:t.uid+"_"+t.features.uid,matrix:n[t.id],texInfo:i,tick:nt.default.now()-e._startTick})}),s.afterDraw()}},{key:"drawGroundLayer",value:function(t){var e=this,n=this.painters,i=this.gl,r=n.image;r.preDraw(),t.tiles.forEach(function(n){n.features.texture.bind(i);var a=n.features.bounds,o=e.transform.latLngToCenterLocalPixelByDistanceScales(a.getNorthEast(),{distanceScales:e.distanceScales,center:a.getSouthWest()});o.x=Math.abs(o.x),o.y=Math.abs(o.y);var s=e.transform.latLngToCenterLocalPixelByDistanceScales(n.features.center,{distanceScales:e.distanceScales,center:e.map.getCenter()});r.draw({matrix:e.camera.pvMatrix.clone().translate(s.x-o.x/2,s.y+o.y/2,0),size:{width:o.x,height:o.y},texInfo:n.features.texInfo,opacity:t.opacity}),n.features.texture.unbind(i)}),r.afterDraw()}},{key:"drawLabels",value:function(t,e){var n=this.gl;this.painters.label.preDraw();var i=t.tiles&&t.tiles[0];if(i&&i.features){e.usePicking||n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);var r=this.camera.pvMatrix;this.painters.label.draw(this.transform,r,i.features,{distanceScales:e.distanceScales,usePicking:e.usePicking,picking_zindex:e.picking_zindex}),e.usePicking||n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA)}}},{key:"updateLabel",value:function(t){if(t){var e=0;t.forEach(function(t){"LABEL"!==t.type&&"MARKER"!==t.type||(e+=1)}),this._LabelCalcCollisionCount=e}}},{key:"drawMarkers",value:function(t,e){var n=t.tiles&&t.tiles[0];if(n&&n.features&&n.features.count>0){this.painters.marker.preDraw();var i=this.camera.pvMatrix;this.painters.marker.draw(this.transform,i,n.features,{distanceScales:e.distanceScales,usePicking:e.usePicking,picking_zindex:e.picking_zindex})}}},{key:"drawIndoorRegions",value:function(t){var e=this,n=this.gl,i=t.tiles&&t.tiles[0];if(i){var r=i.features,a=r.center,o=r.regions,s=r.floorIndex,l=o[0],u=this.camera.pvMatrix;n.enable(n.DEPTH_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),this.painters.indoorRegion.preDraw({lightUniforms:this.lightManager.uniforms});["sides","top"].forEach(function(n){var i={uid:t.id+"_"+s+"_region_"+n,center:a,position:l[n].position,color:l[n].color,normal:l[n].normal,index:l[n].index},r={distanceScales:e.distanceScales};e.painters.indoorRegion.draw(i,e.transform,u,r)}),n.disable(n.DEPTH_TEST),n.disable(n.CULL_FACE)}}},{key:"drawIndoorEscalators",value:function(t){var e=this.gl,n=t.tiles&&t.tiles[0];if(n){var i=n.features,r=i.escalators[0];if(r){r.uid=t.id,r.center=i.center;var a=this.camera.pvMatrix;e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),this.painters.indoorEscalator.preDraw({lightUniforms:this.lightManager.uniforms});var o={distanceScales:this.distanceScales};this.painters.indoorEscalator.draw(r,this.transform,a,o),e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE)}}}},{key:"drawIndoorPois",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.tiles&&t.tiles[0];if(n){var i=n.features,r=Math.round(this.transform.zoom);if(i.pois[r]&&i.pois[r][0]){var a=i.pois[r][0].instance;if(a.id=n.id+"_"+r,a.center=i.center,!a.count)return;this.painters.indoorPoi.preDraw(),this.painters.indoorPoi.draw(this.transform,this.camera.pvMatrix,a,{showPoint:!0,showLabel:!0,distanceScales:this.distanceScales,iconsLoader:{},fadeChange:e.fadeChange,updateSubData:!0})}}}},{key:"_withBlendEliminationDraw",value:function(t,e,n){t.enable(t.DEPTH_TEST),n.useCullFace&&t.enable(t.CULL_FACE),t.colorMask(!1,!1,!1,!1),e&&e(),t.depthFunc(t.LEQUAL),t.colorMask(!0,!0,!0,!0),e&&e(),t.disable(t.DEPTH_TEST),n.useCullFace&&t.disable(t.CULL_FACE)}},{key:"_updateBgColor",value:function(t){if(!this._destroyed){var e=this.getBgColor();(e!==this.background||t)&&(this._disableUpdateClearColor||(this.background=e,this.gl.clearColor.apply(this.gl,Yt.rgbaToGLColor(e))),this.fogPass.setFogColor(Yt.rgbaToGLColor(e)),this.map&&this.map.emit("bgcolor_change",e))}}},{key:"getBgColor",value:function(){return(0,vt.getBgColor)(this.styleId,this.transform&&this.transform.zoom||10)}},{key:"_checkBgColor",value:function(){var t=(0,vt.getBgColor)(this.styleId,this.transform&&this.transform.zoom||10);this.background!==t&&this._updateBgColor()}},{key:"_setClearColor",value:function(t){this.background=t,this.gl.clearColor.apply(this.gl,Yt.rgbaToGLColor(t)),this._disableUpdateClearColor=!0}},{key:"getImageCache",value:function(t){return this.imageCaches[t]}},{key:"_onTextCacheDelete",value:function(t){var e=this;this.map&&this.map.layerResource&&this.map.layerResource._sources&&this.map.layerResource._sources.vector_source&&t.forEach(function(t){e.map.layerResource._sources.vector_source._parentCache.remove(t)})}},{key:"destroy",value:function(){var t=this;if(!this._destroyed){this.camera.destroy(),this.camera=null,this.styleId=null,this.isDefaultStyle=null,this.canvas=null,this.maskScale=null,this.distanceScales=null,this.map=null,this.textCache&&(this.textCache.off("deleteCache",this.textCacheDeleteHandle),this.textCache.destroy()),this.textCache=null,Yt.forIn(this.imageCaches,function(t,e){e.destroy()}),this.imageCaches=null,this.glyphManager.destroy(),this.glyphManager=null,this.markerManager.destroy(),this.markerManager=null,this.fxaaPass&&(this.fxaaPass.destroy(),this.fxaaPass=null),this.fogPass&&(this.fogPass.destroy(),this.fogPass=null),(0,u.default)(this.frameBuffer).keys(function(e){t.frameBuffer[e].delete()}),this.frameBuffer=null,(0,u.default)(this.painters).forEach(function(e){t.painters[e].destroy()}),this.painters=null;var e=this.gl.extensions_TMAP.get("WEBGL_lose_context");e&&e.loseContext(),this.gl.extensions_TMAP.destroy(),delete this.gl.extensions_TMAP,this.gl=null,this._destroyed=!0}}}]),t}();e.default=jt},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(15),a=i(r),o=n(3),s=i(o),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),p=n(4),v=i(p),m=n(412),g=i(m),_=n(800),y=i(_),x=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,u.default)(this,e),void 0===n.enabled&&(n.enabled=!0);var i=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t,(0,a.default)({id:"fxaa-pass"},n)));return i._painter=new y.default({gl:t}),i}return(0,v.default)(e,t),(0,f.default)(e,[{key:"_renderPass",value:function(t){var e=t.inputBuffer;this._painter.preDraw(),this._painter.draw({resolution:[e.width,e.height],enabled:this.props.enabled,texture:e.texture})}}]),e}(g.default);e.default=x},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(18),a=i(r),o=n(17),s=i(o),l=n(115),u=i(l),c=n(19),f=i(c),d=n(3),h=i(d),p=n(0),v=i(p),m=n(1),g=i(m),_=n(5),y=i(_),x=n(4),b=i(x),S=n(412),w=i(S),E=n(801),A=i(E),T=n(218),M=i(T),I=n(120),P=n(233),k=i(P),L=30*Math.PI/180,C=0,R=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.fogColor,r=n.skyOptions,a=n.id,o=void 0===a?"fog-pass":a,s=n.fogRange,l=void 0===s?[200,400]:s,u=n.heading,c=void 0===u?0:u;(0,v.default)(this,e);var f=(0,y.default)(this,(e.__proto__||(0,h.default)(e)).call(this,t,{id:o,fogRange:l,heading:c}));return f._painter=new A.default({gl:t}),f._setSkyOptions(r),i?(f.setFogColor(new k.default(i).toArray()),f._disableColorSetting=!0):f.setFogColor(),f}return(0,b.default)(e,t),(0,g.default)(e,[{key:"setFogColor",value:function(t){this._disableColorSetting||this._painter.setFogColor(t)}},{key:"_checkSkyOptions",value:function(t){var e={width:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"width",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"number",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(void 0!==t){if((void 0===t?"undefined":(0,f.default)(t))===n)return t;console.error("SkyOptions."+e+" 期望类型是"+n+"，实际传入类型："+(void 0===t?"undefined":(0,f.default)(t)))}return i},height:function(t){return e.width(t,"height","number",0)},color:function(t){return e.width(t,"color","string","")},src:function(t){return e.width(t,"src","string","")},brightness:function(t){return e.width(t,"brightness","number",1)},animated:function(t){return e.width(t,"animated","boolean",!1)},horizontal:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"horizontal",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"number",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:I.IMAGE_DISPLAY.SCALE;if(void 0!==t){var r=(0,u.default)(I.IMAGE_DISPLAY).includes(t);if((void 0===t?"undefined":(0,f.default)(t))===n&&r)return t;console.error("SkyOptions."+e+" 期望类型是：IMAGE_DISPLAY")}return i},vertical:function(t){return e.horizontal(t,"vertical","number",I.IMAGE_DISPLAY.ORIGIN)}},n={};return(0,s.default)(e).forEach(function(i){n[i]=e[i](t[i])}),n}},{key:"_setSkyOptions",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this._checkSkyOptions(e),i=n.width,r=n.height,a=n.src,o=n.color,s=n.horizontal,l=n.vertical,u=n.brightness,c=n.animated;if(this.skyTex=void 0,a){var f=new Image;f.crossOrigin="anonymous",f.onload=function(){if(location&&location.protocol&&location.protocol.indexOf("file:")>-1&&/^\.\.?\//.test(a))return void console.error("不支持在file协议下，加载相对路径图片");t.skyTex=new M.default(t.gl,{pixels:f,width:i,height:r}),t.skyTex.upload({flipY:!0})},f.onerror=function(){console.error("图片加载失败")},f.src=a}this._painter.setSkyColor(o?new k.default(o).toArray():void 0),this.skyDisplay=[s,l],this.skyAnimated=c,this._painter.setBrightness(u)}},{key:"_renderPass",value:function(t){var e=t.inputBuffer,n=this.props.fogRange.map(function(t){return 2*t/e.height}),i=this.skyTex,r=[0,0,0,0];i&&(r=[i.width/e.width,i.height/e.height].concat((0,a.default)(this.skyDisplay)));var o=this._depthRange||[0,1],s=o[0]+(o[1]-o[0])*this.props.depthAtCenter,l=o[0]+(o[1]-o[0])*(this.props.fogEdge[2]+1)/2;this._painter.preDraw(),this._painter.draw({rangeList:n,fogEdge:[this.props.fogEdge[1],l,s],texture:e.texture,depth:this.props.depthTexture,skyTex:i,skyInfo:r,viewInfo:[this.props.heading*Math.PI/180,Math.atan(e.width/e.height*Math.tan(L/2)),this.skyAnimated,C+=3e-4]})}},{key:"_onDestroy",value:function(){this.skyTex&&this.skyTex.delete()}}]),e}(w.default);e.default=R},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(15),a=i(r),o=n(3),s=i(o),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),p=n(4),v=i(p),m=n(802),g=i(m),_=n(412),y=i(_),x=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,u.default)(this,e);var i=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t,(0,a.default)({id:"gsblur-pass"},n)));return i._painter=new g.default({gl:t}),i}return(0,v.default)(e,t),(0,f.default)(e,[{key:"_renderPass",value:function(t){var e=t.inputBuffer,n=t.colorIndex;this._painter.preDraw(),this._painter.draw({texture:e.getColorAttach(n),horizontal:!!this.props.horizontal,resolution:[e.width,e.height]})}}]),e}(y.default);e.default=x},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=t.deviceX,n=t.deviceY,i=t.deviceRadius,r=t.deviceWidth,a=t.deviceHeight;if(!(e>=0&&n>=0&&e<r&&n<a))return null;var o=Math.max(0,e-i),s=Math.max(0,n-i);return{x:o,y:s,width:Math.min(r,e+i)-o+1,height:Math.min(a,n+i)-s+1,centerX:e,centerY:n}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(15),o=i(a),s=n(82),l=i(s),u=n(18),c=i(u),f=n(0),d=i(f),h=n(1),p=i(h),v=n(249),m=n(28),g=i(m),_=n(545),y=i(_),x=function(t){return t.useDevicePixels&&"undefined"!=typeof window?g.default.devicePixelRatio:1},b=function(){function t(e){var n=this;(0,d.default)(this,t),this.map=e,this.render=e.renderEngine,this._eventHandlers=[],this._fbo=this.createFBO(),this._eventHandlers.push(g.default.on(this.map,"resize",function(){n.updateFBO()}))}return(0,p.default)(t,[{key:"createFBO",value:function(){var t=this.render.gl,e=this.render.canvas.width,n=this.render.canvas.height,i=new y.default(t,{width:e,height:n});return i.unbind(),i}},{key:"updateFBO",value:function(){var t=this.render.canvas.width,e=this.render.canvas.height;this._fbo.resize(t,e)}},{key:"_getPickingFBO",value:function(){return(this._fbo||this.createFBO()).buffer}},{key:"pickObject",value:function(t){var e=t.x,n=t.y,i=t.mode,r=t.radius,a=t.callback,o=t.featurePicking,s=void 0!==o&&o,l=this._pickObject({x:e,y:n,radius:r,mode:i,pickingFBO:this._getPickingFBO(),lastPickedInfo:this._lastPickedInfo,useDevicePixels:!0,featurePicking:s});a&&a(l)}},{key:"_pickObject",value:function(t){var e=t.x,n=t.y,i=t.radius,a=t.mode,o=t.pickingFBO,s=t.useDevicePixels,l=t.viewport,u=t.featurePicking;if(this.render.hasPickableLayer()||u){var c=x({useDevicePixels:s}),f=Math.round(e*c),d=Math.round(this.render.canvas.height-n*c),h=Math.round(i*c),p=r({deviceX:f,deviceY:d,deviceRadius:h,deviceWidth:this.render.canvas.width,deviceHeight:this.render.canvas.height}),m=p&&this._getPickedColorFromPickingFBO({viewport:l,useDevicePixels:s,pickingFBO:o,deviceRect:p,mode:a,deviceRadius:h,featurePicking:u});if(m){var g=this.render.isNeedColor(m.layerId),_=(0,v.decodePickingColor)(m.pickedColor),y={objectIndex:g?0:_,layerId:m&&m.layerId,pickColor:g?m.pickedColor:null};if(u&&m){var b=m&&(0,v.decodeStylePickingColor)(m.featurePickedColor);y.featurePick=b}return y}}}},{key:"_getPickedColorFromPickingFBO",value:function(t){var e=t.deviceRect,n=t.deviceRadius,i=t.featurePicking,r=this.render.gl;this._fbo.bind(),r.enable(r.SCISSOR_TEST),r.scissor(e.x,e.y,e.width,e.height),r.clearColor(0,0,0,.001),r.enable(r.BLEND),r.blendFuncSeparate(r.ONE,r.ZERO,r.CONSTANT_ALPHA,r.ZERO),r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD),r.blendColor(0,0,0,0),r.colorMask(!0,!0,!0,!0);var a={},s=null,u=new Uint8Array(4);if((this.render.hasPickableLayer()||i)&&(s=this.render.renderForPicking(function(t){r.blendColor(0,0,0,(t+1)/255)}),r.readPixels(e.x+n,e.y+n,1,1,r.RGBA,r.UNSIGNED_BYTE,u),i)){var f=new Uint8Array(e.width*e.height*4);r.blendFuncSeparate(r.ONE,r.ZERO,r.ONE,r.ZERO),r.clearColor(0,0,0,0),this.render.renderForFeaturePicking(),r.readPixels(e.x,e.y,e.width,e.height,r.RGBA,r.UNSIGNED_BYTE,f),a.featurePickedColor=[].concat((0,c.default)((0,l.default)(f)))}return r.clear(r.COLOR_BUFFER_BIT),this._fbo.unbind(),r.disable(r.SCISSOR_TEST),r.blendFuncSeparate(r.ONE,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA),this.render._updateBgColor(!0),(0,o.default)(a,{layerId:s&&s[u[3]-1]&&s[u[3]-1].id,pickedColor:u})}},{key:"destroy",value:function(){this._eventHandlers.forEach(function(t){t&&t.remove&&t.remove()}),this._fbo&&this._fbo.delete(),this.render=null,this.map=null}}]),t}();e.default=b},function(t,e,n){"use strict";function i(t,e){var n=t.getExtension(e);if(!n)return null;var i=e.split("_")[0],r="_"+i;for(var a in n){var o=n[a],s="function"==typeof o,l=s?i:r,u=a;a.endsWith(l)&&(u=a.substring(0,a.length-l.length)),void 0!==t[u]?s||t[u]===o||console.warn("conflict:",u,t[u],o,a):t[u]=s?function(t){return function(){return t.apply(n,arguments)}}(o):o}return n}Object.defineProperty(e,"__esModule",{value:!0});e.Extensions=function(t){var e={};return{get:function(n,i){if(void 0!==e[n])return e[n];var r=void 0;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return!r&&i&&console.error(i),e[n]=r,r},set:function(t,n){e[t]=n},extendWebGL1:function(){t.DEPTH_COMPONENT24=t.DEPTH_COMPONENT,t.DEPTH24_STENCIL8=t.DEPTH_STENCIL,i(t,"OES_vertex_array_object"),i(t,"ANGLE_instanced_arrays"),i(t,"WEBGL_depth_texture"),i(t,"WEBGL_draw_buffers")},destroy:function(){e=null}}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=t.glyphList,n=t.getGlyphWidth,i=t.fontSize,r=t.fontWeight,a=t.glyphHeight,s=t.buffer,l=t.maxCanvasWidth,u=t.mapping,c=void 0===u?{}:u,f=t.xOffset,d=void 0===f?0:f,h=t.yOffset,p=void 0===h?0:h,m=0,g=d;(0,o.default)(e).forEach(function(t,e){if(!c[t]||c[t]&&c[t].fontWeight!==r){var o=n(t,e);g+o+2*s>l&&(g=0,m+=1),c[t]={x:g,y:p+m*(a+2*s),fontSize:i,fontWeight:r,width:o+2*s,height:a+2*s,mask:!0},g+=o+2*s}});var _=a+2*s;return{mapping:c,xOffset:g,yOffset:p+m*_,canvasHeight:(0,v.getPowerOf2)(p+(m+1)*_)}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(82),o=i(a),s=n(15),l=i(s),u=n(0),c=i(u),f=n(1),d=i(f);e.buildMapping=r;var h=n(548),p=i(h),v=n(413),m=n(218),g=i(m),_=n(28),y='"SF Pro SC","SF Pro Display","SF Pro Icons","PingFang SC","Helvetica Neue","Helvetica","Arial", "Microsoft YaHei",sans-serif',x="normal",b=24,S=2,w=.25,E=10,A=1024*((0,_.isPC)()?4:2),T=function(){function t(e){(0,c.default)(this,t),this.setting={fontFamily:y,fontWeight:x,fontSize:b,useSdf:!0,buffer:S,cutoff:w,radius:E},this.gl=e,this._debounceTimeId=null,this.debug=!1}return(0,d.default)(t,[{key:"updateTextStyle",value:function(t,e,n,i){t.font=i+" "+n+"px "+e,t.fillStyle="#000",t.textBaseline="baseline",t.textAlign="left"}},{key:"generateAtlas",value:function(t,e){var n=this,i={};(0,l.default)(i,this.setting,e);var a=i.fontFamily,o=i.fontWeight,s=i.fontSize,u=i.buffer,c=i.useSdf,f=i.radius,d=i.cutoff;this.canvas||(this.canvas=document.createElement("canvas"),this.canvas.width=A,this.canvas.height=A/8,this.glyphTexture=new g.default(this.gl,{pixels:this.canvas}),this.debug&&(this.canvas.style.position="fixed",this.canvas.style.top=0,this.canvas.style.left=0,document.body.appendChild(this.canvas))),this.lastAtlas||(this.lastAtlas={mapping:{},xOffset:0,yOffset:0});var h=this.canvas.getContext("2d");this.updateTextStyle(h,a,s,o);var v=t.filter(function(t){return!n.lastAtlas.mapping[t]||n.lastAtlas.mapping[t]&&n.lastAtlas.mapping[t].fontWeight!==o}),m=r({glyphList:t,getGlyphWidth:function(t){return h.measureText(t).width},fontSize:s,fontWeight:o,glyphHeight:1*s,buffer:u,maxCanvasWidth:A,mapping:this.lastAtlas.mapping,xOffset:this.lastAtlas.xOffset,yOffset:this.lastAtlas.yOffset});if(this.canvas.height<m.canvasHeight){var _=h.getImageData(0,0,this.canvas.width,this.canvas.height);this.canvas.height=m.canvasHeight,h.putImageData(_,0,0)}if(this.updateTextStyle(h,a,s,o),v.length>0){if(c){var y=new p.default(s,u,f,d,a,o),x=h.createImageData(y.size,y.size);v.forEach(function(t){n.makeRGBAImageData(y.draw(t),x),h.putImageData(x,m.mapping[t].x,m.mapping[t].y)})}else v.forEach(function(t){h.fillText(t,m.mapping[t].x,m.mapping[t].y+.9*s)});this.canvasUpdated=!0}this.lastAtlas=m;var b={};return t.forEach(function(t){b[t]=m.mapping[t]}),{xOffset:m.xOffset,yOffset:m.yOffset,mapping:b,data:this.canvas,width:this.canvas.width,height:this.canvas.height}}},{key:"uploadToGPU",value:function(t){if(t.force||this.canvasUpdated){var e=this.canvas,n=e.width,i=e.height,r=this.canvas.getContext("2d").getImageData(0,0,n,i);this.glyphTexture.update(r,t)}else this.glyphTexture.upload(t);this.canvasUpdated=!1}},{key:"makeRGBAImageData",value:function(t,e){for(var n=0;n<t.length;n++)e.data[4*n+0]=t[n],e.data[4*n+1]=t[n],e.data[4*n+2]=t[n],e.data[4*n+3]=t[n]}},{key:"destroy",value:function(){this.glyphTexture&&this.glyphTexture.destroy(),this.canvas&&(this.canvas.width=1,this.canvas.height=1,this.canvas=null),this.setting=null,this.gl=null}}]),t}();e.default=T},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(17),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(28),f=i(c),d=n(546),h=i(d),p=f.default.isPC()?8192:1024,v=function(){function t(e,n){(0,s.default)(this,t),this.width=n.width||p,this.height=n.height||p/2;var i=n.itemWidth||256;this.maxCount=this.width/i*(this.height/i),this.gl=e,this.options=n,this.imageCacheArray=[],this.loadedTilesId=[]}return(0,u.default)(t,[{key:"updateTilesImage",value:function(t){var e=t.tiles,n=t.imageSize,i=this.maxCount,r=this.gl,o=this.imageCacheArray,s=this.width,l=this.height;e.forEach(function(t){for(var e=0,u=0;u<o.length;u++){if(o[u].images[t.id])return;e+=(0,a.default)(o[u].images).length}if(o.length<Math.ceil((e+1)/i)){var c=new h.default(r,{width:s,height:l,debug:!1,itemWidth:n,config:{magFilter:r.NEAREST}});o.push(c)}var f=o.length-1;o[f].addImage(t.id,t.features)})}},{key:"deleteOldCache",value:function(){var t=this.imageCacheArray,e=[];t.forEach(function(t){t.usedInUpdateNum<10?(e.push(t),t.usedInUpdateNum+=1):t.destroy()}),this.imageCacheArray=e}},{key:"getTexCoord",value:function(t){for(var e=0;e<this.imageCacheArray.length;e++){var n=this.imageCacheArray[e],i=n.getTexCoord(t);if(i)return n.usedInUpdateNum=0,{cacheIndex:e,texInfo:i}}return{cacheIndex:-1,texInfo:null}}},{key:"destroy",value:function(){this.imageCacheArray&&(this.imageCacheArray=null),this.width=null,this.height=null,this.itemWidth=null,this.gl=null}}]),t}();e.default=v},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=t.markers,n=t.getMarkerWidth,i=t.rowHeight,r=t.buffer,o=t.maxCanvasWidth,s=t.mapping,l=void 0===s?{}:s,u=t.xOffset,f=void 0===u?0:u,h=t.yOffset,v=void 0===h?0:h,m=t.lastRowHeight,g=void 0===m?0:m,_=t.lastXSpareSet,y=void 0===_?{}:_,x=t.lastYSpare,S=void 0===x?0:x,w=0,E=f,A=i+2*r,T=v+w*A,M=(0,p.default)({},y);(0,d.default)(e).forEach(function(t,e){if(!l[t.src]){var s=n(t,e);if(E+s+2*r>o){w++,T=v+w*A;var u=a(M,T);E=u<0?0:o-u}l[t.src]={x:E+r,y:T+r,width:s,height:Math.min(t.height,i),mask:!0},E+=s+2*r}});var I=o-E,P=S+v-T,k=T+i;if(i>g)M=(0,c.default)({},k,I);else{for(var L in M)M.hasOwnProperty(L)&&L<=k&&delete M[L];M[k]=I}return{mapping:l,xOffset:E,yOffset:T,spareRowHeight:Math.max(i,g),xSpareSet:M,ySpare:i>g?T+i-v:P>0?P:i,canvasHeight:(0,b.getPowerOf2)(v+(w+1)*A)}}function a(t,e){for(var n=(0,l.default)(t).map(function(t){return Number(t)}).sort(function(t,e){return t-e}),i=0;i<n.length;i++)if(e<=n[i])return t[n[i]];return-1}function o(t){var e=t.glyphList,n=t.getGlyphWidth,i=t.fontSize,r=t.glyphHeight,o=t.buffer,s=t.maxCanvasWidth,l=t.mapping,u=void 0===l?{}:l,f=t.xOffset,h=void 0===f?0:f,v=t.yOffset,m=void 0===v?0:v,g=t.lastRowHeight,_=void 0===g?0:g,y=t.lastXSpareSet,x=void 0===y?{}:y,S=t.lastYSpare,w=void 0===S?0:S,E=0,A=h,T=r+2*o,M=m,I=(0,p.default)({},x);(0,d.default)(e).forEach(function(t,e){if(!u[t]){var l=n(t,e);if(A+l+2*o>s){E++,M=m+E*T;var c=a(I,M);A=c<0?0:s-c}u[t]={x:A+o,y:M+o,fontSize:i,width:l+2*o,height:r+2*o,mask:!0},A+=l+2*o}});var P=s-A,k=w+m-M,L=M+r;if(r>_)I=(0,c.default)({},L,P);else{for(var C in I)I.hasOwnProperty(C)&&C<=L&&delete I[C];I[L]=P}return{mapping:u,xOffset:A,yOffset:M,spareRowHeight:Math.max(r,_),xSpareSet:I,ySpare:r>_?M+r-m:k>0?k:r,canvasHeight:(0,b.getPowerOf2)(m+(E+1)*T)}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(17),l=i(s),u=n(164),c=i(u),f=n(82),d=i(f),h=n(125),p=i(h),v=n(23),m=i(v),g=n(0),_=i(g),y=n(1),x=i(y);e.buildAtlas=r;var b=n(413),S=n(218),w=i(S),E=n(28),A=n(548),T=i(A),M='"SF Pro SC","SF Pro Display","SF Pro Icons","PingFang SC","Helvetica Neue","Helvetica","Arial", "Microsoft YaHei",sans-serif',I="normal",P=24,k=2,L=.25,C=10,R=1024*((0,E.isPC)()?2:1),D=function(){function t(e){var n=this;(0,_.default)(this,t),this._reUpdateCanvas=(0,E.debounce)(function(){n.canvasUpdated=!0},5e3),this.setting={fontFamily:M,fontWeight:I,fontSize:P,useSdf:!0,buffer:k,cutoff:L,radius:C},this.queuePromise=null,this.gl=e,this.debug=!1,this._destroyed=!1}return(0,x.default)(t,[{key:"updateTextStyle",value:function(t,e,n,i){t.font=i+" "+n+"px "+e,t.fillStyle="#000",t.textBaseline="baseline",t.textAlign="left"}},{key:"generateAtlas",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=this.setting,s=a.fontFamily,l=a.fontWeight,u=a.fontSize,c=a.buffer,f=a.useSdf,d=a.radius,h=a.cutoff;this.canvas||(this.canvas=document.createElement("canvas"),this.canvas.width=R,this.canvas.height=R/2,this.markerTexture=new w.default(this.gl,{pixels:this.canvas}),this.debug&&(this.canvas.style.position="fixed",this.canvas.style.top=0,this.canvas.style.left=0,document.body.appendChild(this.canvas))),this.lastAtlas||(this.lastAtlas={mapping:{},xOffset:0,yOffset:0});var p=this.canvas.getContext("2d");if(e&&e.length>0){this.updateTextStyle(p,s,u,l);var v=e.filter(function(t){return!n.lastAtlas.mapping[t]}),g=o({glyphList:e,getGlyphWidth:function(t){return p.measureText(t).width},fontSize:u,glyphHeight:1*u,buffer:c,maxCanvasWidth:R,mapping:this.lastAtlas.mapping,xOffset:this.lastAtlas.xOffset,yOffset:this.lastAtlas.yOffset,lastRowHeight:this.lastAtlas.spareRowHeight,lastXSpareSet:this.lastAtlas.xSpareSet,lastYSpare:this.lastAtlas.ySpare});if(v.length>0){if(f){var _=new T.default(u,c,d,h,s,l),y=p.createImageData(_.size,_.size);v.forEach(function(t){n.makeRGBAImageData(_.draw(t),y),p.putImageData(y,g.mapping[t].x,g.mapping[t].y)})}else v.forEach(function(t){p.fillText(t,g.mapping[t].x,g.mapping[t].y+.9*u)});this.canvasUpdated=!0}this.lastAtlas=g}var x=null,b=t.filter(function(t){return!n.lastAtlas.mapping[t]}).map(function(t){if(i.tileId){if(!x){var e=[];"string"==typeof i.tileImage64?e.push(i.tileImage64):e=i.tileImage64,x=m.default.all(e.map(function(t,e){return new m.default(function(n,r){if(t){var a=new Image;a.onload=function(){n(a)},a.onerror=function(){console.error("Image加载失败: "+i.tileId+"-"+e),n(null)},a.src="data:image/png;base64,"+t}else n(null)})}))}return x.then(function(e){var n=i.billboardData.filter(function(e){return e.text===t})[0],r=n&&n.bounds,a=n&&n.cidx;return e[a]?{tileImage:e[a],isSimulate:!0,src:t,width:r[2],height:r[3],bounds:r}:null})}return new m.default(function(e,n){var i=new Image;/^data:/.test(t)||(i.crossOrigin="anonymous"),i.onload=function(){e(i)},i.onerror=function(){console.error("Image加载失败: "+t+" 改为用默认marker"),e(null)},i.src=t})}),S=m.default.all(b);return this.queuePromise=(null===this.queuePromise?S:this.queuePromise.then(function(){return S},function(t){return console.error(t),S})).then(function(a){if(!n._destroyed){a=a.filter(function(t){return!!t});var o=r({markers:a,getMarkerWidth:function(t){return t.height>128?128*t.width/t.height:t.width},rowHeight:i.tileId?30:Math.min(128,a.reduce(function(t,e){return Math.max(t,e.height)},0)),buffer:4,maxCanvasWidth:R,mapping:n.lastAtlas.mapping,xOffset:n.lastAtlas.xOffset,yOffset:n.lastAtlas.yOffset,lastRowHeight:n.lastAtlas.spareRowHeight,lastXSpareSet:n.lastAtlas.xSpareSet,lastYSpare:n.lastAtlas.ySpare});if(n.canvas.height<o.canvasHeight){var s=p.getImageData(0,0,n.canvas.width,n.canvas.height);n.canvas.height=o.canvasHeight,p.putImageData(s,0,0)}a.forEach(function(t){var e=o.mapping[t.src];if(!e.isFilled){if(t.isSimulate){var n=t.bounds;p.drawImage(t.tileImage,n[0],n[1],n[2],n[3],e.x,e.y,e.width,e.height)}else p.drawImage(t,e.x,e.y,e.width,e.height);e.isFilled=!0}}),n.lastAtlas=o,n.canvasUpdated=n.canvasUpdated||a.length>0;var l={};return t.forEach(function(t){l[t]=o.mapping[t]}),e&&e.length>0&&e.forEach(function(t){l[t]=o.mapping[t]}),n.canvasUpdated&&n._reUpdateCanvas(),l}}),this.queuePromise}},{key:"uploadToGPU",value:function(t){if(t.force||this.canvasUpdated){var e=this.canvas,n=e.width,i=e.height,r=this.canvas.getContext("2d").getImageData(0,0,n,i);this.markerTexture.update(r,t)}else this.markerTexture.upload(t);this.canvasUpdated=!1}},{key:"makeRGBAImageData",value:function(t,e){for(var n=0;n<t.length;n++)e.data[4*n+0]=t[n],e.data[4*n+1]=t[n],e.data[4*n+2]=t[n],e.data[4*n+3]=t[n]}},{key:"destroy",value:function(){this._destroyed||(this.markerTexture&&(this.markerTexture.destroy(),this.markerTexture=null),this.canvas&&(this.canvas.width=1,this.canvas.height=1,this.canvas=null),this.queuePromise=null,this.gl=null,this._destroyed=!0)}}]),t}();e.default=D},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(289),v=i(p),m=n(820),g=i(m),_={attributes:"getAttribLocation",uniforms:"getUniformLocation"},y=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.default)(this,e),(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t,n))}return(0,h.default)(e,t),(0,u.default)(e,[{key:"_onCreate",value:function(){return this.gl.createProgram()}},{key:"_onDelete",value:function(t){t||(this._vShader.delete(),this._fShader.delete()),this.gl.deleteProgram(this._object)}},{key:"_initialize",value:function(t){var e=t.vShader,n=t.fShader;this.attachShader(e,n)}},{key:"attachShader",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.gl;"string"==typeof t&&(t=new g.default(i,{type:i.VERTEX_SHADER,source:t})),"string"==typeof e&&(e=new g.default(i,{type:i.FRAGMENT_SHADER,source:e})),n&&this._vShader&&this._fShader&&(i.detachShader(this._object,this._vShader.shader),i.detachShader(this._object,this._fShader.shader)),i.attachShader(this._object,t.shader),i.attachShader(this._object,e.shader),this._vShader=t,this._fShader=e,i.linkProgram(this._object),this.check()}},{key:"enable",value:function(){this.gl.useProgram(this._object),this.gl.program=this._object}},{key:"check",value:function(){var t=this.gl;this.getParameter(t.LINK_STATUS)||(console.error(t.getProgramInfoLog(this._object)),console.log(this._source))}},{key:"getParameter",value:function(t){return this.gl.getProgramParameter(this._object,t)}},{key:"getLocations",value:function(t,e){var n=this,i={},r=_[t];return r&&e.forEach(function(t){i[t]=n.gl[r](n._object,t)}),i}},{key:"program",get:function(){return this._object}}]),e}(v.default);e.default=y},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(289),v=i(p),m=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.default)(this,e),(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t,n))}return(0,h.default)(e,t),(0,u.default)(e,[{key:"_onCreate",value:function(t){var e=t.type;return this.gl.createShader(e)}},{key:"_onDelete",value:function(){this.gl.deleteShader(this._object)}},{key:"_initialize",value:function(t){var e=t.source;e&&this.setSource(e)}},{key:"setSource",value:function(t){this._source=t,this.gl.shaderSource(this._object,t),this.compile(),this.check()}},{key:"compile",value:function(){this.gl.compileShader(this._object)}},{key:"check",value:function(){var t=this.gl;this.getParameter(t.COMPILE_STATUS)||(console.error(t.getShaderInfoLog(this._object)),console.log(this._source))}},{key:"getParameter",value:function(t){return this.gl.getShaderParameter(this._object,t)}},{key:"shader",get:function(){return this._object}}]),e}(v.default);e.default=m},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),p=n(28),v=i(p),m=n(218),g=i(m),_=n(10),y=i(_),x=n(112),b=i(x),S=v.default.isPC()?12288:4096,w=function(t){function e(t){(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this));return n.gl=t,n.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),n.maxTextureSize>S?n.width=S:n.width=n.maxTextureSize,n.height=n.width,n.itemWidth=512,n.scale=2,n.next={x:0,y:0},n.tiles={},n.tilePositions={},n._renderTiles=null,n.debug=0,n.debug&&(n.canvas=n.createCanvas(n.width,n.height),n.debugShow()),n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"updateRenderTiles",value:function(t){this._renderTiles=t}},{key:"getTexCoord",value:function(t,e){var n=this.tiles[t];if(!n)return null;var i=this.scale;return{x:(n.x+e[0])/this.width,y:(this.height-(n.y+e[1]))/this.height,w:e[2]/this.width,h:e[3]/this.height,fontSize:{w:e[2]/i,h:e[3]/i}}}},{key:"addImage",value:function(t,e,n){if(t in this.tiles||!e)return void(n&&n());this.updateTextSubImg(e,t),n&&n()}},{key:"add",value:function(t,e,n){var i=this.tiles;if(t in i)return void(n&&n());this.createItem(e,function(e){this.updateTextSubImg(e,t),n&&n()}.bind(this))}},{key:"updateTextSubImg",value:function(t,e){this.loadTexture();var n=this.tiles;if(!(e in n)){var i=this.tilePositions,r=this.next,a=t.height,o=r.x,s=r.y;s+a>this.height&&(o+=this.itemWidth,s=0),o>=this.width&&(o=0),this.removeOldTiles(o,s,a);var l=o+"-"+s;n[e]={x:o,y:s,height:a},i[l]=e,this.texture.updateSub(t,{flipY:!0,premultiply:!0,xOffset:o,yOffset:this.height-s-a}),r.x=o,r.y=s+a,this.debug&&this.canvas.ctx.drawImage(t,o,s)}}},{key:"loadTexture",value:function(){var t=this.gl;if(this.texture)this.texture.bind();else{var e=new g.default(t);e.resize(this.width,this.height,{flipY:!0,premultiply:!0}),this.texture=e}}},{key:"removeOldTiles",value:function(t,e,n){var i=this.tiles,r=this.tilePositions,a=[];y.default.forIn(i,function(i,o){if(!(o.x!==t||o.y>=e+n||o.y+o.height<=e)){var s=o.x+"-"+o.y;delete r[s],a.push(i)}});for(var o=0,s=a.length;o<s;o++)delete i[a[o]];a.length>0&&this.emit("deleteCache",a),a=void 0}},{key:"createItem",value:function(t,e){var n=new Image;n.onload=function(){"function"==typeof e&&e(n,n.width,n.height)}.bind(this),n.src=t}},{key:"createCanvas",value:function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,n.ctx=n.getContext("2d"),this.debug&&document.body.appendChild(n),n}},{key:"debugShow",value:function(){this.debug&&(document.getElementById("TextCache")||(console.info(232),this.canvas.style.position="absolute",this.canvas.style.zIndex="10000",this.canvas.style.border="1px solid red",this.canvas.style.width="8192px",this.canvas.style.height="8192px",this.canvas.style.left="0",this.canvas.style.top="0",this.canvas.style.pointerEvents="none",this.canvas.id="TextCache",document.body.appendChild(this.canvas)))}},{key:"destroy",value:function(){this.texture&&(this.texture.destroy(),this.texture=null),this.width=null,this.height=null,this.itemWidth=null,this.scale=null,this.next=null,this.tiles=null,this.tilePositions=null,this._renderTiles=null,this.debug=0,this.canvas=null,this.gl=null}}]),e}(b.default);e.default=w},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return new o.default(function(e){if(l.default.support()){var n=c.default.QMAPI_poi_icon_json+t;l.default.get(n,function(n){if(n){var i=JSON.parse(n).data;e(i)}else(0,h.loadPoiIconIndexFile)(t,d.default.iconIndexSrc).then(function(t){e(t)},function(t){console.error(t),e(null)})})}else(0,h.loadPoiIconIndexFile)(t,d.default.iconIndexSrc).then(function(t){e(t)},function(t){console.error(t),e(null)})})}Object.defineProperty(e,"__esModule",{value:!0});var a=n(23),o=i(a),s=n(89),l=i(s),u=n(120),c=i(u),f=n(22),d=i(f),h=n(526);e.default=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(23),a=i(r),o=n(0),s=i(o),l=n(1),u=i(l),c=n(824),f=i(c),d=function(){function t(){(0,s.default)(this,t),this.img=null,this.w=0,this.h=0,this.scale=2}return(0,u.default)(t,[{key:"load",value:function(t){var e=this;return new a.default(function(n){function i(t){t.img&&(t.ready=!0,n())}(0,f.default)(t,function(t){e.w=t.originalWidth,e.h=t.originalHeight,e.img=t.pixels,i(e,e.w,e.h)})})}}]),t}();e.default=d},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if("function"==typeof e){if(t in a.textures)return void e(a.textures[t]);var n=new Image;/^data:/.test(t)||(n.crossOrigin="anonymous"),n.onload=function(){if(a.textures[t])return void e(a.textures[t]);var i=u.default.extendCanvasToPow2(n,1);a.textures[t]=new s.default(null,{pixels:i,originalWidth:n.width,originalHeight:n.height,width:i.width,height:i.height}),e(a.textures[t])}.bind(this),n.src=t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(113),o=n(218),s=i(o),l=n(413),u=i(l);e.default=r},function(t,e,n){"use strict";function i(t){var e=t.extensions_TMAP.get("WEBGL_debug_renderer_info");return e?{vendor:t.getParameter(e.UNMASKED_VENDOR_WEBGL),renderer:t.getParameter(e.UNMASKED_RENDERER_WEBGL)}:null}Object.defineProperty(e,"__esModule",{value:!0}),e.getGraphicHardwareInfo=i},function(t,e,n){"use strict";function i(t,e,n,i){i=i||1;var r=new a.Matrix4,o=new a.Matrix4;return o.scale(i,i,i),r=r.multiply(e),r=r.multiply(o),r=r.multiply(function(t,e){var n=new a.Matrix4,i=t.x+e.left,r=e.top-t.y;return n.setTranslate(i,r,0),n}(n,t))}function r(t){var e=t.view,n=t.offset,i=t.scale,r=void 0===i?1:i,o=new a.Matrix4;return o.scale(r,r,r).translate(n.x+e.left,e.top-n.y,0),o}Object.defineProperty(e,"__esModule",{value:!0}),e.mixMatrix=i,e.getModelMatrix=r;var a=n(109)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n,i){(i<270&&i>90&&t.getLng()>e.getLng()||i>270&&i<90&&t.getLng()<e.getLng())&&(n.getLng()>=0?t.lng=180:e.lng=-179.9999)}function a(t){var e=O.degreeToRadian(t.getLat()),n=O.degreeToRadian(t.getLng());return new k.Vector4(Math.cos(e)*Math.sin(n),Math.sin(e),Math.cos(e)*Math.cos(n),1)}function o(t){var e=(0,c.default)(t.elements,3),n=e[0],i=e[1],r=e[2],a=Math.asin(i),o=void 0,s=Math.cos(a);return 0===s?o=0:(o=Math.asin(O.clamp(n/s,-1,1)),o=r/s>0?o:Math.PI-o),new N(O.radianToDegree(a),O.radianToDegree(o),!0)}function s(t,e){var n=t.getLat(),i=-t.getLng(),r=l(e);return(new k.Matrix4).translate(0,0,-r).scale(r,r,r).rotate(n,1,0,0).rotate(i,0,1,0)}function l(t){return 256*Math.pow(2,t)/(2*Math.PI)}var u=n(27),c=i(u),f=n(15),d=i(f),h=n(3),p=i(h),v=n(0),m=i(v),g=n(1),_=i(g),y=n(5),x=i(y),b=n(4),S=i(b),w=n(22),E=i(w),A=n(245),T=i(A),M=n(307),I=i(M),P=n(120),k=n(109),L=n(121),C=n(391),R=n(503),D=i(R),N=n(46),B=n(75),O=n(10),F=n(214),z=n(414),V=n(93),U=E.default.tileSize,G=Math.PI,H=G/180,Y=T.default[1],j=function(t){function e(t,n){(0,m.default)(this,e);var i=(0,x.default)(this,(e.__proto__||(0,p.default)(e)).call(this));return i._minZoom=t.minZoom||E.default.mainZoom,i._maxZoom=t.maxZoom||E.default.maxZoom,i._minPitch=t.minPitch||E.default.minPitch,i._maxPitch=t.maxPitch||E.default.maxPitch,i._fov=t.fov||.6435011087932844,i.width=t.width||0,i.height=t.height||0,i.zoom=t.zoom||10,i.tileZoom=Math.floor(i._zoom),i._center=N.convert(t.center)||new N(39.908782,116.3974),i.heading=t.heading||0,i._pitch=t.pitch||0,i._roll=t.roll||0,i._scale=t.scale||1,i.viewTransition=t.viewMode===P.VIEW_MODE.SPHERE?1:0,i._boundary=t.boundary||null,i.projection=new z,i.renderEngine=n,(0,d.default)(i,C.easableMixin),i}return(0,S.default)(e,t),(0,_.default)(e,[{key:"_isCameraReady",value:function(){var t=this.renderEngine&&this.renderEngine.camera&&this.renderEngine.camera.resolution;return t&&null!==t.width&&null!==t.height}},{key:"resize",value:function(t,e){this.width=t,this.height=e,this._isCameraReady()&&this._fire("bounds_changed",{bounds:this.getBounds()},!0),this._fire("input_change"),this._constrain()}},{key:"transitTo",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._stopEase(),n=(0,d.default)({duration:500,easing:O.ease},n);var i=this.viewTransition,r=t===P.VIEW_MODE.SPHERE?1:0;this._fire("transit_start"),this._ease(function(t){e.viewTransition=O.mix(i,r,t)},function(){e._fire("transit_end")},function(){e.viewTransition=r},n)}},{key:"_constrain",value:function(){if(this._boundary&&!this._boundary.isEmpty()){if(this._unmodify)return void(this._unmodify=!1);var t=this.width,e=this.height,n=this.center,i=t/this._scale,r=e/this._scale,a=this.latLngToCoord(this._boundary.getSouthWest()),o=this.latLngToCoord(this._boundary.getNorthEast()),s=this.latLngToCoord(n),l=[a.x,o.x],u=[o.y,a.y];if(Math.round(l[0])!==Math.round(l[1])&&Math.round(u[0])!==Math.round(u[1])){var c=void 0,f=void 0,d=l&&l[1]-l[0]<i?i/(l[1]-l[0]):0,h=u&&u[1]-u[0]<r?r/(u[1]-u[0]):0,p=Math.max(d,h);if(p){c=d?(l[0]+l[1])/2:s.x,f=h?(u[0]+u[1])/2:s.y;var v=this.coordToLatLng({x:c,y:f});this._unmodify=!0,this.zoom+=this.scaleZoom(p),this.center=v}else if(s.x-i/2<l[0]&&(c=l[0]+i/2),s.x+i/2>l[1]&&(c=l[1]-i/2),s.y-r/2<u[0]&&(f=u[0]+r/2),s.y+r/2>u[1]&&(f=u[1]-r/2),void 0!==c||void 0!==f){var m=this.coordToLatLng({x:void 0!==c?c:s.x,y:void 0!==f?f:s.y});if(m.lat===this._center.lat&&m.lng===this._center.lng)return;this._unmodify=!0,this.center=m}}}}},{key:"zoomScale",value:function(t){return Math.pow(2,t)}},{key:"scaleZoom",value:function(t){return Math.log(t)/Math.LN2}},{key:"calCoordsScale",value:function(t){return this.scrollScale/this.zoomScale(t)}},{key:"latLngToCoord",value:function(t,e){return this.projection.latLngToCoord(t,e||this.zoom)}},{key:"coordToLatLng",value:function(t,e){return this.projection.coordToLatLng(t,e||this.zoom)}},{key:"latLngToCenterLocalPixel",value:function(t){var e=this.latLngToCoord(this.center,this.zoom);t.lng-this.center.lng>180?t.lng=t.lng-360:t.lng-this.center.lng<-180&&(t.lng=t.lng+360);var n=this.latLngToCoord(t,this.zoom);return new D.default(n.x-e.x,e.y-n.y,n.z-e.z)}},{key:"centerLocalPixelToLatLng",value:function(t){var e=this.latLngToCoord(this.center,this.zoom),n=new B(e.x+t.x,e.y-t.y);return this.coordToLatLng(n,this.zoom)}},{key:"latLngToCenterLocalPixelByDistanceScales",value:function(t,e){var n=e.distanceScales||this.getDistanceScales(),i=e.center||this.center,r=e.offsetMercator,a=new N(t.lat-i.lat,t.lng-i.lng),o=O.clamp(a.lat,-1,1),s=[n.pixelsPerDegree[0],n.pixelsPerDegree[1]+n.pixelsPerDegree2[1]*o],l=new B(a.lng*s[0],a.lat*s[1]);return r&&(l.x+=r.x*e.pixelsPerMeter,l.y+=r.y*e.pixelsPerMeter),l}},{key:"projectionTopLeft",value:function(t){var e=this.latLngToCoord(this.center,t);return new B(e.x-this.width/2,e.y-this.height/2)}},{key:"latLngToWorldCoord",value:function(t){if(this.isSphere){var e=a(t);return s(this.center,this.zoom).multiplyVector4(e)}var n=this.latLngToCenterLocalPixel(t),i=n.x,r=n.y,o=n.z;return new k.Vector4(i,r,o,1)}},{key:"worldCoordToLatLng",value:function(t){if(this.isSphere){return o(s(this.center,this.zoom).invert().multiplyVector4(t))}var e=(0,c.default)(t.elements,2),n=e[0],i=e[1];return this.centerLocalPixelToLatLng(new B(n,i))}},{key:"screenToLatLng",value:function(t){var e=this.renderEngine.camera,n=(0,L.fromScreenToNdc)(t.x,t.y,e.resolution),i=void 0;if(this.isSphere){var r=l(this.zoom),a=(0,L.getSphereCoordsByCustomMatrix)(e.pvMatrix,n,r);if(!a)return null;var o=a.x,s=a.y,u=a.z;i=new k.Vector4(o,s,u,1)}else{var c=(0,L.getZPlaneCoordsByCustomMatrix)(e.pvMatrix,n),f=c.x,d=c.y;i=new k.Vector4(f,d,0,1)}return this.worldCoordToLatLng(i)}},{key:"latLngToScreen",value:function(t){var e=this.latLngToWorldCoord(t),n=this.renderEngine.camera,i=n.pvMatrix,r=n.resolution,a=(0,c.default)((0,L.getNdcCoordsByCustomMatrix)(i,e).elements,2),o=a[0],s=a[1];return(0,L.fromNdcToScreen)(o,s,r)}},{key:"latLngToTileCoord",value:function(t,e){return this.latLngToCoord(t,e||this.zoom).div(U)}},{key:"tileCoordToLatLng",value:function(t,e){return this.coordToLatLng(t.mult(U),e||this.zoom)}},{key:"setLocationAtPoint",value:function(t,e){var n=this.latLngToTileCoord(t),i=this.latLngToTileCoord(this.center),r=this.screenToLatLng(e),a=this.latLngToTileCoord(r),o=a.sub(i),s=n.sub(o);this.center=this.tileCoordToLatLng(s)}},{key:"getBounds",value:function(){if(this.isSphere)return new F(new N(-90,-180),new N(90,180));var t=new F,e=Math.min(this.renderEngine.camera.getFogEdge()[1],1),n=(1-e)/2*this.height,i=this.screenToLatLng(new B(0,n)),a=this.screenToLatLng(new B(this.width,n)),o=this.screenToLatLng(new B(0,this.height)),s=this.screenToLatLng(new B(this.width,this.height));return r(a,i,this.center,this.heading),r(s,o,this.center,this.heading),t.extend(i).extend(a).extend(o).extend(s),t}},{key:"coveringTiles",value:function(t){var e=this.isSphere,n=t.round,i=t.pixelGeo,r=t.minZoom,a=t.maxZoom,o=t.zoom,s=void 0===o?this.zoom:o;s=O.clamp(s,r,a);var l=e?3:n?Math.round(s):Math.floor(s);if(!this.width||!this.height)return[];if(i){return[new I.default(l,0,0,0,U)]}return e?this.coveringTilesOnSphere(l,t):this.coveringTilesOnPlane(l,1)}},{key:"coveringTilesOnSphere",value:function(t){var e=I.default.coverAll(t);return this._sortTiles(e,U)}},{key:"coveringTilesOnPlane",value:function(t,e){e=e||1;var n=this.calCoordsScale(t),i=this.renderEngine.camera.getBounds(n);O.forIn(i,function(t,n){n.x*=e,n.y*=e});var r=this.latLngToCoord(this.center,t),a=[{column:~~(r.x+i.leftTop.x)/U,row:~~(r.y-i.leftTop.y)/U},{column:~~(r.x+i.rightTop.x)/U,row:~~(r.y-i.rightTop.y)/U},{column:~~(r.x+i.rightBottom.x)/U,row:~~(r.y-i.rightBottom.y)/U},{column:~~(r.x+i.leftBottom.x)/U,row:~~(r.y-i.leftBottom.y)/U}],o=I.default.cover(t,a);return this._sortTiles(o,U)}},{key:"_sortTiles",value:function(t,e){for(var n=0,i=t.length;n<i;n++){var r=t[n],a=this.projectionTopLeft(r.z),o=r.x*e-a.x+e/2,s=r.y*e-a.y+e/2,l=Math.pow(o-this.centerPoint.x,2)+Math.pow(s-this.centerPoint.y,2);r.ds=Math.sqrt(l)}return O.bubbleSort(t,"ds"),t}},{key:"getDistanceRatio",value:function(t){var e=256*this.zoomScale(t||this.zoom),n=this.center;return e/(Y*Math.abs(Math.cos(n.lat*H)))}},{key:"getDistanceScales",value:function(t){var e=this.center,n=e.lat,i=this.zoomScale(t||this.zoom),r={},a=U*i,o=Math.cos(n*H),s=a/360,l=s/o,u=a/Y/o;r.pixelsPerMeter=[u,u,u],r.metersPerPixel=[1/u,1/u,1/u],r.pixelsPerDegree=[s,l,u],r.degreesPerPixel=[1/s,1/l,1/u];var c=H*Math.tan(n*H)/o,f=s*c/2,d=a/Y*c,h=d/l*u;return r.pixelsPerDegree2=[0,f,d],r.pixelsPerMeter2=[h,0,h],r}},{key:"getInput",value:function(){return{height:this.height,width:this.width,center:this._center,zoom:this._zoom,heading:this._heading,pitch:this._pitch}}},{key:"isSphere",get:function(){return this.viewTransition>0}},{key:"size",get:function(){return new B(this.width,this.height)}},{key:"minZoom",get:function(){return this._minZoom},set:function(t){t=Math.max(t,E.default.minZoom),this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(t){t=Math.min(t,E.default.maxZoom),this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}},{key:"maxPitch",get:function(){return this._maxPitch},set:function(t){t=Math.min(t,E.default.maxPitch),this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}},{key:"zoom",get:function(){return this._zoom},set:function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._isCameraReady()&&this._fire("bounds_changed",{bounds:this.getBounds()},!0),this.renderEngine&&this._zoom!==e&&this.renderEngine.camera.updateVersion(),this._zoom=e,this._fire("zoom_changed",{zoom:this._zoom},!0),this._scrollScale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._fire("input_change"),this._constrain())}},{key:"roundZoom",get:function(){return Math.round(this._zoom)}},{key:"scrollScale",get:function(){return this._scrollScale}},{key:"center",get:function(){return this._center},set:function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this.renderEngine&&this._center&&t&&(this._center.lat!==t.lat||this._center.lng!==t.lng)&&this.renderEngine.camera.updateVersion(),this._center=t,this._fire("center_changed",{center:this._center},!0),this._isCameraReady()&&this._fire("bounds_changed",{bounds:this.getBounds()},!0),this._fire("input_change"),this._constrain())}},{key:"centerPoint",get:function(){return new B(this.width/2,this.height/2)}},{key:"heading",get:function(){return this._heading/Math.PI*180},set:function(t){if(!isNaN(t)){var e=O.wrap(t,0,360)*Math.PI/180;this._heading!==e&&(this._heading=e,this._isCameraReady()&&this._fire("bounds_changed",{bounds:this.getBounds()},!0),this._fire("input_change"))}}},{key:"pitch",get:function(){return this._pitch/Math.PI*180},set:function(t){if(!isNaN(t)){var e=O.clamp(t,this._minPitch,this._maxPitch)/180*Math.PI;this._pitch!==e&&(this._pitch=e,this._isCameraReady()&&this._fire("bounds_changed",{bounds:this.getBounds()},!0),this._fire("input_change"))}}},{key:"roll",get:function(){return this._roll/Math.PI*180},set:function(t){if(!isNaN(t)){var e=O.clamp(t,-90,90)/180*Math.PI;this._roll!==e&&(this._roll=e,this._isCameraReady()&&this._fire("bounds_changed",{bounds:this.getBounds()},!0),this._fire("input_change"))}}},{key:"fov",get:function(){return this._fov/Math.PI*180},set:function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._fov=t/180*Math.PI)}},{key:"scale",get:function(){return this._scale},set:function(t){this._scale!==t&&(this._scale=t,this.renderEngine.camera.setScale(t),this._fire("scale_changed",{scale:this._scale},!0),this._isCameraReady()&&this._fire("bounds_changed",{bounds:this.getBounds()},!0),this._fire("input_change"),this._constrain())}},{key:"boundary",get:function(){return this._boundary||null},set:function(t){t instanceof F&&(this._boundary=t,this._constrain())}}]),e}(V);t.exports=j},function(t,e,n){"use strict";var i=n(27),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.create=function(){var t=new Float32Array(3);return t[0]=0,t[1]=0,t[2]=0,t},e.clone=function(t){var e=new Float32Array(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},e.fromValues=function(t,e,n){var i=new Float32Array(3);return i[0]=t,i[1]=e,i[2]=n,i},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.set=function(t,e,n,i){return t[0]=e,t[1]=n,t[2]=i,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},e.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},e.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t},e.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t},e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},e.scaleAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t},e.distance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return Math.sqrt(n*n+i*i+r*r)},e.squaredDistance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return n*n+i*i+r*r},e.length=function(t){var e=(0,r.default)(t,3),n=e[0],i=e[1],a=e[2];return Math.sqrt(n*n+i*i+a*a)},e.squaredLength=function(t){var e=(0,r.default)(t,3),n=e[0],i=e[1],a=e[2];return n*n+i*i+a*a},e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},e.normalize=function(t,e){var n=(0,r.default)(e,3),i=n[0],a=n[1],o=n[2],s=i*i+a*a+o*o;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s),t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},e.cross=function(t,e,n){var i=(0,r.default)(e,3),a=i[0],o=i[1],s=i[2],l=(0,r.default)(n,3),u=l[0],c=l[1],f=l[2];return t[0]=o*f-s*c,t[1]=s*u-a*f,t[2]=a*c-o*u,t},e.lerp=function(t,e,n,i){var a=(0,r.default)(e,3),o=a[0],s=a[1],l=a[2];return t[0]=o+i*(n[0]-o),t[1]=s+i*(n[1]-s),t[2]=l+i*(n[2]-l),t},e.hermite=function(t,e,n,i,r,a){var o=a*a,s=o*(2*a-3)+1,l=o*(a-2)+a,u=o*(a-1),c=o*(3-2*a);return t[0]=e[0]*s+n[0]*l+i[0]*u+r[0]*c,t[1]=e[1]*s+n[1]*l+i[1]*u+r[1]*c,t[2]=e[2]*s+n[2]*l+i[2]*u+r[2]*c,t},e.bezier=function(t,e,n,i,r,a){var o=1-a,s=o*o,l=a*a,u=s*o,c=3*a*s,f=3*l*o,d=l*a;return t[0]=e[0]*u+n[0]*c+i[0]*f+r[0]*d,t[1]=e[1]*u+n[1]*c+i[1]*f+r[1]*d,t[2]=e[2]*u+n[2]*c+i[2]*f+r[2]*d,t},e.random=function(t,e){e=e||1;var n=2*Math.random()*Math.PI,i=2*Math.random()-1,r=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(n)*r,t[1]=Math.sin(n)*r,t[2]=i*e,t},e.transformMat4=function(t,e,n){var i=(0,r.default)(e,3),a=i[0],o=i[1],s=i[2],l=n[3]*a+n[7]*o+n[11]*s+n[15]||1;return t[0]=(n[0]*a+n[4]*o+n[8]*s+n[12])/l,t[1]=(n[1]*a+n[5]*o+n[9]*s+n[13])/l,t[2]=(n[2]*a+n[6]*o+n[10]*s+n[14])/l,t},e.transformMat3=function(t,e,n){var i=(0,r.default)(e,3),a=i[0],o=i[1],s=i[2];return t[0]=a*n[0]+o*n[3]+s*n[6],t[1]=a*n[1]+o*n[4]+s*n[7],t[2]=a*n[2]+o*n[5]+s*n[8],t},e.transformQuat=function(t,e,n){var i=(0,r.default)(e,3),a=i[0],o=i[1],s=i[2],l=(0,r.default)(n,4),u=l[0],c=l[1],f=l[2],d=l[3],h=d*a+c*s-f*o,p=d*o+f*a-u*s,v=d*s+u*o-c*a,m=-u*a-c*o-f*s;return t[0]=h*d+m*-u+p*-f-v*-c,t[1]=p*d+m*-c+v*-u-h*-f,t[2]=v*d+m*-f+h*-c-p*-u,t},e.rotateX=function(t,e,n,i){var r=[],a=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],a[0]=r[0],a[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),a[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},e.rotateY=function(t,e,n,i){var r=[],a=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],a[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),a[1]=r[1],a[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},e.rotateZ=function(t,e,n,i){var r=[],a=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],a[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),a[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),a[2]=r[2],t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},e.forEach=function(t,e,n,i,r,a){var o=void 0,s=void 0;for(e||(e=3),n||(n=0),s=i?Math.min(i*e+n,t.length):t.length,o=n;o<s;o+=e)vec[0]=t[o],vec[1]=t[o+1],vec[2]=t[o+2],r(vec,vec,a),t[o]=vec[0],t[o+1]=vec[1],t[o+2]=vec[2];return t},e.angle=function(t,e){var n=fromValues(t[0],t[1],t[2]),i=fromValues(e[0],e[1],e[2]);normalize(n,n),normalize(i,i);var r=dot(n,i);return r>1?0:r<-1?Math.PI:Math.acos(r)},e.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},e.equals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}},function(t,e,n){"use strict";function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new s.default(function(n,i){var r=window.URL.createObjectURL(t),a=new Image(e.width,e.height);a.src=r,a.onload=function(){n(a)},a.onerror=function(){i(new Error("blob to image failed"))}})}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.width||t.width,i=e.height||t.height,r=document.createElement("canvas");return r.width=n,r.height=i,r.getContext("2d").drawImage(t,0,0,n,i),r}function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new s.default(function(n,i){var r=new Image(e.width,e.height);r.src=t.toDataURL("image/png"),r.onload=function(){n(r)},r.onerror=function(){i()}})}Object.defineProperty(e,"__esModule",{value:!0});var o=n(23),s=function(t){return t&&t.__esModule?t:{default:t}}(o);e.blobToImage=i,e.imageToCanvas=r,e.canvasToImage=a},function(t,e,n){"use strict";function i(t){var e=new a.default({id:"WatermaskLayer-TencentMap",getTileUrl:function(t,e,n){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAABHNCSVQICAgIfAhkiAAAIABJREFUeJzs3WlzHdeZJ/j/czLvvgN3wUYQIsENoCjJ0EbJsuGtymW7a7qmmxE9MR0x/b6/RH2YnumJqZmpmZqudpVt2fSuxZQlLiDBFSQBXAD3Arj7lpnnmRcUJRAiSEqWRFH8/yIQwbiZefJkvmA+efKc5wGIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiICDDAKedxd+KrTh53B4iIiD4Xc3Oh7KodG9jus47jmBSiv1hdPdN53N36qnIfdweIiIj+Uoni8ZK73D3uG0w7YpJi0WuawSSARQD6uPv3VcQhEiIiemLNz8+7G/3oC67IX8HIGBSRDze5EMiglFnC1lbwWDv5FcUAgIiInjwzM+GoGZosb3V/5EBmIXCNas865pwruKjAFCChZCu41O1u9R93d7+KGAAQEdET5JSTHbH7I31nzjHyuijSYuAZMRcF+lZjdeFc7/BkJdz0j4si5Udk02tUNx53r7+KGAAQEdETIZ9/PSWpW6+rkZehuk8gokZXxZjfNDL6Qe/GxS0AinJZo6liHkAR1riDVmXhcff9q4iTAImI6KvO5IpHjvdk+9tGEAagIuoL7O9aq5feB7D7G7+q+DegzqxA909NzUeXlk73HkO/v9IYABAR0VfX9HQk0wl9K1BzXFQNABjFsnX0zcbKpc29DtMgsi3wtyHIVfy1QwDOfWl9fkKYx90BIiJ62p1yMsXjByMTxw59YtPVq75aqVtVDyJ1ALBA3Dgh+6AWE0BbzZ39jWL/F9LtJxznABAR0eMk2XGcCIDvhBXPZA+MXmyvr3s7tms/n9gMhSLXgkCWXOiUAhlYGStkD15pNJb9+zXabq/bUKIwIgYlWDGvvTh7fmlp6YFBw9OGAQARET1WkVgpIaKHFYj1e9b1mvO3gIWPk/fUar5X22j7zY1WNJUPoDKh0HQ36IW9o/tvo1y+34Nd4+mhYUD2qYiuVvo3B+319pd3VV99/ARARESPVS7eWlE1SxCoG+jh3NiF8Xv3+HtTKMwkAdiExC/ByCIAOCJH4yu95/fK+6+OW4OKb1RcB93kF34hTxiOABAR0WNVq9X8ZHako1anVRBVhYzmE8u1Ws0vFGaSJn3xpIq8UMgdvL6y8k43mxhd8xwvAzVFgRTd1Lrvtarl3e26w6UQfHtUREO+mI377fM0YwBARESPXbe53nCS+YKBFERkqIvUWjRWyHjG/kigB1U03bMDZ9CqLLXb696guXk5nCqOimjeqDzjRvN9r1Nd29nmeDYedILwCYGJiHHWBs2N5cd1fV9FDACIiOiLIvgUVWfH88nb3cA9AkVM4D+jsM9CEFNBWxS3ooF+0OlUW3f3T4RSqzbkZAUmawT7wpmSk4nmtzudygAAarWaRlLF56EaM1Y3++3K0ud/iU8uBgBERPS5KxRmkk5uZC6Uzg+XMtP1vWbr7xQOTwwHjkxAkYLeyVNjILdMyPzh0Gj0T9euna3v3L/X2+7HcqPrCIKYipQEdtR3TC4dGWp2OptNABpJFk4AiMNItf/i7BK4EuAjDACIiOhzVSjMJPsh+29E5YhR3e8H3XqvvXc+/qmpqaiNjL44cDAPYAgfjhqIiA1H7E+3by3cLpfL963o169v9PqTxZupgYQDi3EAQ9Y4025ipOftz9fCfTkkirRANw/azo1KpcLKgB9iAEBERJ+TuVBqPDPtifwtVIYFMlDH/qlevnRmjwPM8MRzYw3P+ZFAZgQIq6AjQFNEI6pwrDUmHSusdaYKwF4P70ol6DYrt0KZQhuKAoCEMZiKdE0WolkoYjBmO2Q7N2q12kNHIp4WDACIiOgvljswl3GjgxeheFkUSUCqMOa3zdXieczEXUxOmk+u158JmYT9iVGMCKQnwGXP4A8RwQ0LMwkgIga5wJF90Z4purFC0s3l3ImhZ71abWn3g1y95nzFpDYqYXFiCptWoAhFDAAUpiFe9Hq7fU+SoacaAwAiIvqLREeOThnP/rWIHoQiomJuiBP8HGI7oVTvtVjPzoVb/f6gubkrd38lSKTydYFJiJrfNob1A//6wlYyMmStg2lAElA4UKRUtWSM7DfqTPVsZzocK6Uy8bzX6fznDnD6w6RBC+q3qvVMYuSWNdpS6BAgUQAw0LhnUIwnh3oj+eO9+wQQT51Hnp1JRER0j5mZcKpq58Q1L6lFSAwGEH23sXL8XeAfgkTxeMm49sdQZEX93zXWLr/ziC07ydKxfy8iE3d/EMhvfA1GXONMK1SgEIjUfcf9aXf5g5X7NVIozCQHLv5nq7gnCZBCO6FAznmZyGLr6p83AeiHf08VVgMkIqJPZ2YmnGk5E8G29zyMeQYqgYHelrB9p7Z06RZw0QJA23qdtBpPIbDiRD/FGQKB0wYsVNCUOyMAzw6Fcv+15lfeEhM+ItBnoCpmEOz5Jt8L+VGjrkCgsKiJUQ/AEFTivoNXpNV/JT16bAMwFWNQVt80vcDvRtLxzvb1M00AX+sVAwwAiIjokWWnns/6W/7zCjsjMDGINODo2ajnnl9fOntvrv2q00dJfIiKGifyac6j4jdFjCrsTQNzSAW5uq3Ptdau/g5AJT0xuwBgKGMjzb0S/JtAUiriiNjAF3POdeSaDaRkRCdV7ARUMqpSBLQYBJgVYwPHmLbfbpcnJibeXF5e7n62u/RkYABARESPJFc8csLvei8bg5SqGhGsRSL6Zr8tSQtvDMCVe49Y8ERmgt1j6+n07JCN953W2tXKXucysF2FgeOYmgRSVtUpVczGxqeXuitXlxvLF7YAbDUe0F/PcbKuWhcqgeME9cbypS0AW5ibuzpWRqjt9kdVgyMSmHGrmlZVB0AajlSWXfdr/0mAAQARET3AKSe/72ypHzgv+RbTIrAW2jXwzxwaS71/o1wbsW7kuz1IMlOa+QAR5736rXM17Pqu7qg66YnZocDTF9TocwaRBUxP/wpXr/b3OPGdYz0VDckH6suIQBNhP3a0Oze3jjNnHjabX0wgOTVwVNAT4OMJiGfOeKuAB+Dah3/ITD6bCwZ2VIyfc400sPSSByx95rv2JOAqACIi2lN+PHSoH9jvQ2VMVH2IXAzC+pvWyuLlcrlsncRw2IU4MJJXwRg8HQ9nh3uD5ndqwIJGk4VZBTJQDcPqMRGZAiACZKK90Ea/vbF9v/NGksPjgJmyrmy1Vhb+HEkMFwHJW6PJWB2Vfnu99qB+l0onEp7RZ0WRM5B6KeH9eWtra88kQP36Rm/QqlQGzc3bvUZ1455yxF9TLAdMREQATjnpiWOHUmNz+Z2/ysBrCNBXsUsC+08G9hIQv7tZW2tXK7W1kd954v6jEV1Rg5K1zgHgHxSYC6nKnRdNkSxEsgrpqqCpQAQSvLhXb9QxLgA4AcIArIScPyikK4pkYIJvPOxqWmqTYm0WAMTRlat7jzQ8tTgCQET0lJuamora6PYPoOY1RT83aFUv3d3W6VRa/Vb1wqBVvRg2B40N+X8ngT8TS+X9fqu6DkCBJes31xv9+NhSxAxs1mn9UVNH006s/QPHkQkAIqIBVK9Es/af0JdVFTmmkEwsmu/3O58s0xtO5KcFMgajjUGzeqnfqHSTyWLbAocEyGay+WqnUd3a65qSydIBKzoLABFf3u50Knvu+7TiCAAR0VNuaWnKVyMNAGrgTA6NzMzg3jwxAQDrZ/pRCNaNUceqfCc5MvPv8vteGMPdZ8n6kR4EF9tB+kXrN/+ja+QARH2jZlkl+JfmsZF/qS4uNmuR7jrEXoFA1ZXXSqUTid19MvdZNhhS56aqrgBAN5DvZaeez+5xSeLDTgF31vxPTkZv/iX35+uKIwBERE+9JRtJD7fFYp8CSahGE6PZW92trXuGzf3GejMdHVq2Bh0rMmxEhn3r9wat2ZWxseGoxFdfEDgnreCQiBhANq0TvBW3obe31hbKH1Xiq9VsLDmSstBhB3Zh04muoFneOanPhJLF5wTIQrA9aN4ZkWi31/1wqqgGMgEgbn3VwYszy7sr/KUnZocEdh4QA8H7Ny+fvfHF3r8nEwMAIiLCoFntxdJFo4pnYBBHEKr3mpWNmZmZ8MDNPxcdGu316xu9Tmdz0G9V18OJ0Vvq+r7juufCidrkwNofitFpBZIABI79Y8Szv66vLa602+uDu+eZmTkVbol9GQYvGNVufe3Zf0bzF4Nd3THRVHEfgOLOAAAABpOFeqgrEwJkRZBMbLU3es3KPWWC3VThNbEyJgZ9E3J/0a9v9L7Qm/eEYgBAREQAgN7hyc1Qy58SlbRaHY5nS0GtIz9QYBYDhPudytUPd9VB+1g/kmw0Abwq1n0FQEKM+EZlGa78Y3Pl4pVOZ3OAu8v5pqaiqcTIgUav+hMDOSRAGJCEZKvrQeMT3+e136pcjaXyfQsEg1b14yH8SiWIp/JtCI5AEYMY2z+879bdQkP5/OspNf2/gQBGdKFeil7+ZBEiAhgAEBHRXeWyDecLGybQGUDiqjgAIK7Qjgmh0m9WbgCQ1PjR4Xii/6KFvAEr4yICMbpqrbzdHMIf+9cWWh83esqJltypmO+eFCsvAkgaaAeAD0gIwKrXrKzdrzv9VrWcS4xVd1fw67Wq9ViyFFNg1KpNx5uD9V6rWgOAyEgopjbaAwIPBlf6i2erX9DdeuIxERAREQG4k+Y36Povwqi5++IukIrR4Lf1jLOCFSB34EDa75lvBhIcFIXAYNsxwbsID241rl+v4+NHuSRLJwpqFl64k7cfCYgEgeqCA70IlVdUMOGKPjBF8Pr62ftm+k266bfqXu2giGQCmG/Pzc2tnDlzxtu+fr0O4C2UTiSQ9T08hUV+HhVHAIiInnqnnExeX1BrfwzREnasABCVxqGJ+Fvls2c9AOhtb3uheH5CREoC6UOCX9dXFhd629s7JwzK0MjMjDr2J6IYEyAMg21X8M/N8sJ7mcSY13fsEVFJa0gWBvXKnimB99JoLPvhVKlnRA4Amtxo++17RhLa6x4qlT0T/xBHAIiInnqFwoVY1+CwABGIbag6Vw00CpGjgA4tLntHAFzAnbdpmxLvgxbCByGaEGsOYmrqJpaWelNTU9FNLzppfedFDzoqKhZAFQZXS/H+n+4m4xkkWq70IgkA8D1t7d2zB4v6/u2e6y4bSEkCHfo87sXThCMARERfA+PjR4ebzepnql7X6VS8aLzUMyJd1wzeqZcXz0WHRqqqOADVJIBoMpK+1e3eWRbYam11osmiATClMKko3GosUUh1/OirojInojmFdB0H562Gf98qn720Mw2vcaaGHWO/AcAMuc3TjUZjz5K+D+73phdPDnesozdbY/EPONnv02EAQET0BJuYOBmzqcwbvpU3wunJm4NmufNZ2ul3KvV+e/ZWt/nnGgDt1zf6sWyxrlaPGoOkRELbvcbGOgBkiscPpkPpawPbmwKQEWv2K+Sw3vl8EIJqzYTk/6wfKlwZnH/rE2/48Uz+iKo+Aweb1ZVrf/pLrr/XqtYHzeomH/6fHgMAIqInmJeOlxzrvKKKlKo/NJafvV6rLd3/jXp+3k148RORRPGboVgh7HXumX2vwL0JdfqNje1wqjgG1VxgMTbIRs6nUmMZCOY9O8g4xrwHsRkVbAl0SNQMRMQBELMwbmSjV58cTfm7ivCYSLrwbShSqnbhniV+9xLMzIRRmcfTUJjncWAAQET0BPMnSv1QB2ljpChArO13aoNW5f5L35aWEE0VXhbFAREJBkcnrz/szdnJ5hqiZkqARATRrFonK4KDChs+OBZ768bloYVBs30tmtK+gZ5VwKhK1kBHjQSHW36oEIoVY4nUcCycLZlobGREYV8SUd+ovtNvb9YAmKmpqYhNjqdNOjcUTxdHoomRZ6J9OeYMrbe9evUzzxOgvTEAICJ6QqTGjw5LtDARdHYUwalUgmh2uKEqh3CnTF8kEyvc7HQqu7PrAYDGkvmEQp4Ro0G4Pbg1eMi8Af8bz3bD1WZCREYFklNoXkSMOvZXS4vnKndGDSpBv1Ut91rV2nB6/4oXeOvW1ZSoGYJi2BiZCkT2w8pBNcE0IFERozBmKJQoHgknCzM9G57VADNG5YhacwSiBwEUfItFf1emP/p8MAAgIvrqM/GR2RcdmJ84glKiOHmjt13+aNndoFntRpM5A5j9AmTURaO3R3KdbGIs8MQ+p4A4Vm9/+Aa+t6Ulm42PdK1j96siJoAr0MvNscSZ+40eNJtlr9+pbnnN6kIskV0LHDcj0NSdzH9IAHK3yI+BIiVAVoAMFCkA8TvBwZ1nk0DVSHBm0Nz8TPMa6MEYABARffVpIlMsqNpnREws8Ad20Dq+svObff/IVCXcDiZEkVaruUy8eOV+owDtl471w5vtWYEkIabab1XKeEiyHCdXiGiAwwDiIhIYR872Fj/4RAnf3X3ut7e2vWblfKKYWvB8pyEieQEiAuka1XU4pi0iTaPYtiLbRmRFXXsbAc5pVN4+Uor/eunyeQ7/f0EYABARPQFGhhP1bhDer4qUiEmF4t3bXnvj4yx55bI1ieGWgXlGBCmISfXa3772iQl0S0s2lM7nRGUEjukNDu978DyAqaloxAu/LiL7cCdBkIFILB0t3NjjM8Mn9La3B4lMsQSLZwC4cOy7aaf1awwiV1yLy1t5LAxuLCz0W5Urg0Z1adCubni1SqvMmf1fKPO4O0BERA+3tLTUs7b/c1V4UE3DxXO79+kl/bKBvQkAgWMPRPefnbxfW44xSwAAqyPY3Hzgi2CyG3kNwFFVNeJiwar6qjrSCttnH7Xv2ezzmcDKiwpEVOyN5kriT8vLy91KZaFVqSy0sLAwAMCH/ZeMAQAR0ROitX5tA2I/gECNtc9m9h0/eM8OV6/2PTd4HyINtQiFvPBzY2Nz8d3tNDynrEAfqpmRXi611/li4ycmjDgzCjXWmLON5YV/dYxegkJCvnkpNf7y8EM7PT0d8WOD/wDVDEQaSPi/Bc54Dz2OvnAMAIiIniBi7AUotgFA/eC1qamp6M7t3eXLZSv2BgBIEOyrB+2D2JHbHwCwPtRXI1sA0HS90b3O1V05u2yBXwlkIdLrvQ3AeuIuQKShghD89muYnt6zmE+hMJNMt915USQE6BvIn1tXr+4u/UuPCQMAIqInSHP18rYRc04MPMDkt/z4c8Df7/y/3MY9eUshXRWEHcd5FtPT4XtbOa2OYgsAnMDfMwAAgNbawqVGpH16a+tqEwC6q/mywi6KiBXBZLoXuu9nhunp6cjA6KuAHL3zi16vJ3rnALBAz1cEAwAioidL4PR7l9WioapGfTmaHPkv9wzFVyoLLUfNvwCAWh1NN0Mv7GrDQrF55x9m/8POh6WlHj5aKXDaN445D0VfoVHx5flCYSa5+6CtZugFK/Kcqrgw2E6a+ml8WAyIvhoYABARPWG2tq42FHj3w7fwIZHwUexa1VVfH76lH34KAPBKamwuv2OzwrU1EbGiSOHUqU+1IqyxfGHLN/pHEbEqMtE17tTHW+fdoeLR1zyR1yFQVV1Oofa/r66uci3/VwwDACKix+KUMzMzE95ra6Ewk7zfm/VdrbXYZYVdUlWjwGyieDx/7x6nfccG76ugrSIugt5JzM2F7m51rPSt2h4AJN9bfPhkvl06q7HzVnVFVY0R7xtTU/N35iLMNSUQJ6pAXxXLEO+XfPh/NTEPABHRl6xYPF4ymfXvdXqS6zVnV3cX4SmVTiQ80e96jnkhPZm/3qncb7192UbSQ1VV56gAcTE2OWhVL+3co3/0mZbb8PIGUhCRRLjd2x40NzcBwImVosbBM1DEJBgsD5qb968fsKeyNelC0xUcUkiqp32v31xfRrls+0cnl2N9XQSCpVb58uanvT/05WAAQET05ZChoel0KDPynG/wIyiGrdVkJNta2p2PP5IpjPiC56A6bLtmJjpU2urXv93YndRn0NzsRdLFkEDGoBhKJov17s5CQOWyTWeHOtbKQQViEGOKmelbjcayHx8uhWHxDBQpccx6v1FZ+bTXE42PRmCCA1CJQTU+aFU+uHvefn2j97A6A/R4MQAgIvqCjY3NxW16aCZwzLdF5BgUBgZbMGYx6snK7ox63eZGKxYv1VS0oNCMtbovFF/re+3NCu5N26vhxEQPCCYAxBWSjRcnl3bWCeg2NpvhdDECxYRA092gVxu0qxupUC5kRQ4qkFFrq4NWdelRryeXO5CJDo0esxq8JJCiGHji+n/uNzZX/9J7RV8eBgBERF+Yvzfpwvp0T/xvOTDPiiIlItaofGAx+F2rPHq103m3d58Dtd/eqIeTmWXAGRKgAJFRNzVqvdbGPTn4B603+tHkqiviTEBsVL2g02/95zXg9EeBwmQps97uO4cASQiQf/bo/vPX9g170Uqtra5cNY5zo9+oPPLbemioOGWtmReRHAy2XWN/X58ePYelJWbze4LIw3chIqK9TE3NR6em4J8+fdrf/ftmd+37EHMEACBQK7IWC9lfVW9efFghnR3m3dRY5UeweggAFPLei0cLv73nfPPzbupi5T9BPsy2J94/Nlcv3/NNP1M68owa87eq4nrivNsrn/vNo5w9PXHskKpKc+XS5Z2/J0eOzxvXxorRwS+vcnnfE4kjAEREn8H09HTEk/FDHe383Vq1NRwdGtns1zf6uQNzmXAk91zb7/xEREY+OsDYt1pZ+UXn6sVPWdt+ySYKqTUbhFIAhoxoaW27EytkptcajeU7QcDSko1kh1sCMw3VmKPwe63qzZ2t9HOxfhixHBTDrtiReLq42mtW7t+X6enIUHRszE0NfxeBnBRINpItLu8cJRi0Npb6jcrVra0tJvZ5QjEAICL6DDSbTfrqzBtoTkSGRYNiJF5Iqg1eAvQYgLCIBPhwuXUp4f2/W4uL93zrn5qaivrR8cNj+dlmrbbk3+88ANDb3u7HhxPrYiMhVYwAmu/rIDGan125e9ygWd2MpIoZAEVAhpOR3Eq3u9n8qJFGI4hGi4ExOqkiYVV1RvPJ27Va7Z7zpsaPDkcHodd86MuiUhLRwMCpqsHSp/lMQF99DACIiD6D3vb2IBsrXPddm4ZKXlXSYsy4qmYAMeKYS67FGQscAgAnkIXmjlnxicLMSFcj3zWqz7W0m/SaG9ceeL5ardffl78d60hYgXERybf9zshYfvb63SAglBhtwtgDAOLWcUrHj0wu7Cyp2+/M191UNSeKksAkOza2NWiu38nNP3EylkqkT6rKtwGMiyKsgrYbOL9JhmpvV5avtb6A20iPEQMAIqLPxkkkCiELU4SRIgAjIiqiVRP2f9ZYvvSukxgVI/YoALcVcm/49Y167sBc2o1mXxHI9wQ6DIFjRHOpofztTr364IdspRKMFhLlvo3EABQhmu35vdRofuZ2rbbkD9rr3Ui6GBHIGATxSttre83K+scNLGg0M1wTKzMqiCg0nI4O3Q5nJkfD2v4hFEcECCu0q45cyCD2z5W1D5YbjcaeoxP05GIAQET06UguN5cJZ3PP+gbfVsEBCASQTVF9P6ahX2+uXtwAgEg2FwXMYQARWNkIZwp5eN4bgBwyBlZVliEIAYgGnhMZFOK3sGtIfrdareano/n1wEgMipKIzfW8bmTfaGZ1a2vLj6RyXaiZBJAwQDw6NHK7X9/4aKXBoFntOunhwBEzKUDGM6YACV5RRUqgXai54SD4Q7N86YNms3yfBET0dcEAgIjoEc3NzYWaNnsscIJvGqNHAUkKpAfHeVe193ZzffFyu73+Ua37WG40qoE/DUjcCIZMoNMKpOFgyzXmjxFP3w0cC6jsE0Ei0g9X+p3KQ8vldjqVwXB6suxbP6SQMRgttL1Q6viRyZtLl8+3Y6mSq9ApEYkh0Ha/VVnDjvwBUckPNGSOARoSIAuBWMG6cc1vhiPt99dXrlVxb74B+hpiAEBE9AjGx48Ol5v2JwBeEEEKECPGrkYD55+3185fGrS2PpHvPpwcSgDOcQARABFxYF2Rd+urC/+919hY63Qqg8G+4nq4hxkACd+RqN+avAqUH7qevtkse/32/K1EspK2kJInevP25bM3AKDf2liNJvOHFEgqpDjIRs6h0fDn5+fdSjc6K2Hz7wRw77blGPxq7kjxl4tn363unhRIX1/MA0BEtDeTmXw2Ewy8E4DMCCT+0RbFtuvgF9ursyvAPwS7j4GHA4HaVwUaFWhPjbkdkv57WytXVwHc84CPjhydCqv5WxWEjOiv6uWL7z1qB3MHDmS8bnysVT52eWc/8vuOjA0Gzr9XQSiAXgqpXVDbsyUSAAAgAElEQVS4r6rRUShEBW2juOnEe3/Yvn79Uy5NpK8DBgBERPdTmEmmHcxAcOjO0jsAsJsQqYvIPrUICbQr4rwznrNnFxYWBtPT05FyI3LUcfRZBYoCtQbOLat2ORwKlqXnNCqVhQ52BQDAvJsqVX8IsUdU0Ip6wf9WrS42P9GnT8dJlI59xxg5IRBr1fYFEheRQC2uGTjn6xOhZZw54z28Kfo6YgBARLRLbmxmMrAyD7E5VXHFYCAiF+CYP9ftdi/pZ56B6DdFkRIDD74sur4u+2GZg2pWBSFVDKzR3w85zYsNPz0vgkkLsbAawOi2qm4ZV1ZjXmh1ff1sOzZ2fJ+rwV9DJSPAQmNt9me7RhY+lYmJk7HtwfYbjuPMqKoDAAKpSNj8rh7uroDZ+556DACIiHaamwulV/v/QdUWxcBTK/WQ47y5tXJ2eeduQ+MnJjwb/A1U0zt/F6AvRi+lTPP3y8vL3VLpRKLrBH8LaAEq5u7D+F62GoicEys5Y/CcAh3fBv/aW1+88Sl7L5iaiuS6sWnPyDdFkYBADdARx16qofU2lpeZzIcAcBIgEdG9ymWbjuU3PCMZ69g/TWbl9K3r57d37SXhXNGxAUICHQMAMfBgzVUTlj/WVxbebzQaAwBot49pIr295Rmsm0DWDLCljjRF1QrEhcARMTELc9to7wrEnRYg7sKgn08sP2xZ4MdOOekJPRj2Qq+r4AWoRBXaMWKuWI282Vg9vwCu56cdOAJARPRJJn/kSKK6uNjCJ5fDOdnx2eNWMQtFUaHGipSNBGdERK2vY8Z1VhrLF67jE9/6AQAyNTUV2fSiCV/deAQ2H4gdj/vhd9bXz27kJo6f8H37A1EM1A39a3Plg8v3aWOHvzex8f97zPXt8yrBvrsTFVXsjZCYP2XCnY2lpaX7VRykpxwDACKiR1QsHi91JPiOiIzf/c2EzK9fOJh///Tp035i7NgPjJUTKuZGq5z/J+D0nm/cqbG5vOu3xrbzziUsLHjYEWgkRmf+o1GUrGC9XV74Lw/okkmPzLwIg1fUIgwARqThqP5ha21hAVzLTw/ATwBE9DQxydKJQjJTeG68lN541Ep209PTES86+mqg+n2I5FTQNsBVceW/NZYvXFtaWrLAKSea3JgHJCpGLw+a797CJx7Ap5z8/tiIRDKvq/rfhWumwj13c9Bcv6d0bypd2lbVaQEyyfgwuu3qyic6NT/vJnuJvwNwAoCBaMM45qKEQ29uL5+7/RnvDz1FGAAQ0VOhUJhJuqnC8yL6agA93PZdHTQrj/SgNKYQV2BORXIi6lvH/U1rtfB2v/Fu++4++byOBEZeElEf4p4bNDcqu8/vZKsvBtZ7VSD7RcRA4Qhs5uSLswt3gog7uqV03/XctAgKKqboFko3vdpGe2d7WFqykXTOqsqEY3TRM/4fWyuL53q1NU7yo0fCAICIvuZOOamx4LAP+ZEYHFQgCUAg6A2alcVHaaHT2fScTDHkCCYAGAu97TXfXd25j5suvgGgACN1G9ZzXq3Sunv+ZElnA8f8jQBTUMSh2JYQzggwokC6vNXVQXPj42BkaytIpgsegP0qiDmBSP/wvtso35shcNDc3A7FR242h3DJv764DQ7506fAAICIvqZOOZlJJxuObnxfxLwCICYCBcQAgDi40G9UPjm0vgcvE6lHNLpfFWkHiEWyxZV+o9IFgPTE7JBCX4ZKVFRvtqZL57A0ZRLFZCGSqvy1GHwDiqgKOhD9oLV28f/rTxTWoz1NKqQkVktuonTTa3/8lt9rVurRRDGjwKhVpGP1oNpvb+xejaBee6ONSuUz5wugpxcDACJ6ck1PR5LhoaFdefhNsnSiEMmsPy+BfleBERENYHDDiLMKoCAi6kRjv+htlx89GU6j4cvQUMu1zmFAEjDa6TcqZQBwkoWjDmRaoBq4+n5otWkS6cHzIsG3AeQF2hPIlSAU/Ka9cukCAItKJTDpsYGonYIg6jhW+vuKyzsf5qnYUNW65gQUEQt0B+35W8AC3/Lpc2EedweIiD4DyRSPH0y2oz+GRL5198e5ublQPH/seSPBD0XlJatIANgKrP4yhfjPfACqaiDB2vb1M586/33v5uJNABdV1dFATuQOzKXy+SNJY3FILUIq0nS9UNt1zfcDCeYgJgKDqwb63xtDeLNze3EVO4bpZ0ZC6wLdgELU4lC6IpM7z1etLjatogcAYmwGc9f5fzZ9btyH70JE9FUz70DWnxGVZ1TQBIChseP7Fle7P3ZCEldVgQIwePvwaOztM2fOeG0AydGZAwDga+gha+v3ZNNO/Tf1IDMJ1bTf6nynH3NXHE/3AUAYzh9cyHoP0lWFqGpNQvLb2uqlLazd29DExMnYlZXad0XMlN75MhHRsCkAuA7ADk1Pp/1W+HVVpABAjanhzAELnPmMXSe6Fz8BENETaMmG0oUJgYwbANF0PmMtXgcQE0gfRq6HxLxZX71wvvzhxLl06dirgByESD0UcX/fq609JDnOKadQQKLTqdxTLKfRaNhosmhEZAKCYQP3nDjBJQv066sX3mm31z03XnKNwZQYhMTaZr9VXcedN38ZGppOh7Ol2V7Q+yuITIiBp4pVJ2rfbNxeWMDcnBP3Cs+rxfegsk8MPFG97MZ67/S2f88Z/vS54QgAET2JjGONa0WhQEStnBCRQBU3VeTCSLx3/eqOYjfZqeezfs9/QWBhJLhVi2tn76bn3WhpZTJkLowPAhsDTr25qyiPlbC56vfttBGMqfVPhHrevza2rl65u0Mh3rpc7UenxZpnIO5MavzoUinmt9aaoUMDkWMC7BMjKiLLxgkuNEzzGpY+zNG/vh4xTuqQqEnDYNUxciETbl1eus5sfvT5YgBARE+e6emQtmz0o2SmYhuOg7eSNnFtdfVM9+qu5XB+v39CRGKi2rWCJSwsDHY3OTT0StoPNWZgqoeshlMCRKxxtoDKJzKm1m+dqyVLx86JmJLAjgWR6GHcGZtXAFhaWurhwIE3k+3o/wKxhSAwL691IhkDLSgQVgsPbvBuuK/nq9Vd6YaXl7syfvQXYfXz4jkrlcqF9jaX99EXgAEAET1xCvVwaOBIXKEQwRoc56fbyxe2dq+RA4B8/shY3+IQBKLG3E5pdLk5NRUtddNOG0g4xpsILA570hwHBFALI2JFbU/V2QQK93v4autY6VLqUmUOkHxg9FDuwIEr29evfzyx8Pr1OsaPnIN1XnCAGVgFgIEAC5lQ4/Ty8nK3ucf1NVcubTaBzb/8ThHtjQEAET1xuk4kJjLIQQGoOGp1JlGcbRrX7xk/5PedwBdxrGpgBopZQLJ3jrROO+ieTPYT2Q68rDEmZVUcEQACVaANmAqMlANPrrc3zm8A5+//9n36tB8an35zEIT+1liM+b3YcQC/37mLG4r92fb9CRibE5UVa/zzzaxzo7Gw/IkRCKIvG4sBEdETJ12YnYaLf6OqHy+LE6hYeFY0gEiAD4fNDTSmKvd92RERq7BNGF0zVlY9166lBpH6+vrZ9v32v5/k6LFvicpLAvTVsf+1uXJp55u7SU8cOxgKHNf49nalstD6jJdM9LnjCAARPXlcf1rVMSpoC/x1qJsRSE5FwwK554u57njPEZFARRuArQQwy5Fu9/r29vUm7hyhAPDR7MCp+SjcZcWOyYT344TcczrwpxRSEGt+COB/3bHZNpYvXtnrWKLHiSMARPSYzbup8bVM89BIHaf3Lp97V6l0ItGW4D8JNOoY/LK2uvBnAJifn3c/+OBWIhLJhFvaK0HwLYHEINIQB7+KDTnlY0ND/dMPPodkp57PWK9/VH0cN8Z5v14+/9Hkvj3cKckrehIAXDU/31q7cPEhxxA9dswDQESPTT5/JOVk29+AdU6GN7u9QWuj+rBjnNTw9wGMqqBpdfDO3TTAS0tLttfb7ufzUdv3QzNizKiIWgP7dmP14sWXjh2zD3r4l0onEogPz1jYk2IxC5GoCnLp8aErnc3NB32z13gx1VI/tE9V0gEQSYYzt7vdrUdPM0z0GDAAIKLHIlE8/Jx13O8KcABAUlTzidLk9Qfl58/nj40GrrwBheM4stA8MrqIHWV0AQDRkdfVyAlVuJ7In9pj8TNjksrdqPb+Op4c7vZa1drudovF46Wea//GAMcEyKpiYBz4UCT8viODVmXpQdfS294eIJvvOlaOGJEkQk6j16ysf8ZbQ/SlYABARF+iU06y5BbC6fwPjZhvQBCTOxP2jIiEdeD1+u3K6l5HO9nhcagzDoOOA/ypd+7dHSv/5kLZkcwbAcyLEBHjyK326sK/5HqxVD8U+SFU9wkkdXCycKVyp+COSU/M5txE8VuB0e8BSArgO2JvO/H+/4N+KKQGIwKMxYZGLvXrGw9MxBM0qlvh1PAoVIbUIlvMTV9qNJYf+kmD6HFhAEBEX4Y7FfrS6y8AwbwABTEYiOJySPwzvpoYgKw4EooNj9/eK03voLm5OZZPLPQH2KwdHV2++/Y/MTERM3F5NRAzBwHUYNmNxH7W2y73e71tL5TM50RkzAqczZ6uJ5xREx0qzqrVNwSYEhEL0Rsm5P6uvjL7dm/7991EpuQH0P0CRAJfxWtXbuIh3/UzseK25+AZBxoKJLjdba43Pv9bSfT5YABARF+oiYmTMY1mXxITvArgkBHjKLAsjv6uEffe7968su5EcjXjmOMCjYlqrdesbOzVXq1W8/vtre2Ph/7nXRMfnLRqTgBwxUhZ7eCXjdsX7o4OaDae6gXGPS4wYVgZkrA9DGAGQEIE6yrOb6Kevr9VvrB+t9xut7mvG0kEoxAMiyAUSeduD5qbD0ghDHQ6lU40W6yJb67VhoLyztK+RF81DACI6AszNH5iouN3/y0cnQYQFwPPGP9048jIb/pn/1TF1lYAAH53s+mmhwqipgDVVL9VPYdHnEWfHYm+EYiZA+CqoBnN4f+q3Vi85zt/u11rh1KlcajmRJACkBQR6xq8W8/hZ4PrF9Y7ncquiX5lG8kMQeAcFJGoNWbLa1Z21fT7BO03Klv99sY2H/70Vcc8AET0uZuamopu9RPf9gL/+IfL8tuO0WtW9L3ayuVNrHyyGm/YyllrMKVWCsnSiXxr/eyeowAAJD0xm4NvXw0gxwCoGFmNpPz/VllY3JlsR5IjL+TF9I+IYvJuRKFibsD4v95eubSJPWccAM3XT1xN/nZhINCYY20JMzPh+9URIHoSmYfvQkT06SwNDwf4MEufKDyjeK++evyXu7Lk3SPpttahemfYXgYzD2o/nj82Yn39HsQc+fD7/XWF9/Pq4uJH6fXz+SOp+OjRbwj6P4bi5Z1ZA8Om986D+vKRf/iHAIotALDqpEqbbuihxxA9IRgAENHnYC6UKMw8Hys+exIAcOaMB1fehkDVwLWwsftV1dupaXJRC0kAgJr7p+4FgJmZU2E3bOZFsE9VTWD0bMZk/7W5evnDHAKnnOTo8WMD1/07F/JNAMMQrbuu+blCugDQRzj/KFc1NTUfhdgcAIhRLxTasg87huhJwTkARPQXmHdTY8ND4WT7r4zIN4zovnR04mans9bsNyrdSGYYUNlnjOQT6f7yfWfFz82FMjY/FWjwP4gioYJWONb/WW97+775ACqVhSCcHi6ras43sthdXfj1neV2p5z0RCbnxG99xxF5WUUTomZgjC4kEf9pZeWD5XCqNCfQsBi7NmhWlx90ZVNT89HtQfVbAMbFwDdqFiqrV5fBDH/0NcEAgIg+C5MozJTiqc6LVr3vCWRYRCwA8cXPTY5mr25tbQWDueNr0c3WAVXJBKqpQWt+8e4sewBIjR3ORxv2DRj7GiARMbLmQH9Vu31lHYBkJp/NxYf3RXYnBxo0q93BSPa6f3PxJgAkR6YLkfTW8xp43zXAqED7AlwzsH+oly990GyWBwAQTedPQuEEIlf2ntB3yonng9G+7b4K4BgUBtZejQT4U6dTYXY/+tpgAEBEn8rExMmYjSdfMyKvqMGUAI4j9oaFXBVFQRxJdn2n02tWNrC0FIQz+Z6oTIlIzs1WW15j46MMeaFoKS0GzyuMayB/hIN366sL63Nzc6G6nzuhgpPWCyafPbLvarlcvnf4/c4KAsXcXCjawmsCeQ7QiHFwW43+YTjSe39t+WoVH76xp8aPDsPKHAC41v1zv72+OyOgJIrHS+FM9aQD+QYM9glEYeSd0MB7d3Pz4/kFRF8HDACI6BH9vckUqwe66P2PIrIfQExhui5C/1RbO//24MjkaqhtJ2E1F4jE4rmR2/36Rm9sONnu2PAwVPNQLcWGRq7fzarndSqtcGJ0NZzqvVe7tbjUb1S6qfGjw5vN4JQxOCaKlEBz1YZXG7Sr918VUC7bUKoUVsWka+XX9bWF04NmtVqr1e7JwhfJDr0Ia8ZV0BZX3+s3Kt2d21PFoych+CsDHYUgBoPtkJh/rq9euMC8/vR1xACAiB5JeqKSg+L7ALIiGliDczEv+OnWxoUNAIpy2UYzhbIEmDUiabGm3m+tl2u1mh+N5lUNJo2YqKr1B835lbufAgbt9XZ3a8tLjR0eDidGXjEq34UiZQQdFelBEIYYd9CqXNqrb4PWTG1yZPv91duLK7jPN/rp6elIux/+HoCIqL3RjHQXsStASEWHVF0ZBUzXMXirkcWb3esXtne3RfR1wQCAiB5JvzHrhTPNqACjUOO70Le2Ni5t3LtPpRtJ5o0C+1V0ODY0cqNf3+j1O8cboXQ7LYpRiCbT2Ua501hrAkAudyATzux7XqCvApgWA4WVa6LBHwMnqBprJgw0Hh0avbp3Pv4lu/VhUqH7CSKl5wA5LAae4wTnerevfWL1f7e72Q4lMmUTci/VVxZuMJEPfd1xGSARPaLTflMTHwRqaioasSoz09PTkd17RaycF8EaVNO2b79599h2yr6lCg8qmW7QmwEgqbFnj/qR2L+FCV5VkbyIbsDoT4dj7Z/X1xdvGJhlFemrkZD1+6XP0uvU+NFhhRxTVQPVWsSPXsX9Z/Lb1vq1jcbyha3Pch6iJw0DACLa6YFr9bF6piMhewYArGB/tR0auXeHuZBGI+nA2jsT9kQPpwvHDgEAFhebrsqvBaJOgNlEafZ/gg1+DGheoUZt8H4x4f0fjeWLV5aWlnoA0Hzt2RoUA1W4qk7xM1yPAzXHVDECgQaO+/76+tn2Z2iH6GuHnwCICFNTU9Egvm86nhxO9FrV+oP2HXzj+FZkqzMsihGBpPqt2UXgJYmNu+OJmP9yAPttATJ3lwWqkXgmVrjZ6VQGvUKiHvLDIxAMiSAlisH/z96dPUedZXmC/57z23x3l+9yrYDYxBIQijUjMkJRWblVdVVblXWatc08zfOM2fwL9WfM8/TLjFVZdXXXdHZmVGdmZMZCLJBksAgEAgRIcsnd5S7f/bfdMw9AJBBAENHEBvfzhNx/m18z7Hfucs4lICQiIqGrwcjYvqcm/9KSOOnSFJTkGei6vcPXgNXHLsaTKR+YAdEiBAZYrvbS8qEe2te0W3QAoGnPNsqMH5zpK/t1EvVCCCNezOxZfeQ+9quryo6nmyBjDxHljOTQs+O1AwbkJWGZIoDIkGUSXhKSGRZExaLuqFuvY2cncFJjSoSmCGQRyWVQuAxwBUyzIUnCyZS2716h7yTyJQATQtL1UnIN3ar/OD8sm52bDNj4MUBxImyxZf6bu3Je9/417TYdAGjaM2pu7ueOG7HeIvCbEOQAYmZJDEN3x+vV64861+s1XTuZj0IwySQzRChDEBHCwGLzX3bWz592e7UNO1GYAiELoWQykr0yGGy73lSp4/RRBlEWIFbKPGmwaotgN4jyIthLmXwn7DSaABDJjJWheAaMfiI2uDpsfnFKXql0ND5k+hkx5YnhU8i/bW+ce8S2P5r27NEBgKY9YwqF+YQdL8x3wvbfGOAJQDVI6DSxREQoJUzxTKRw7fPb495D7ERmQDAnAMQF8AD1aS/h/+vw+oUWbi+yy6emr3kI9wOSVcRDt19fR70exlKFIZj2AogTi9upHj7ppLfqUJwjQtpQdCCSKGQi8fFQSKUhNMWgoVLmlfvz9+9XqSzEBvDeZKYZEgQAPuy8MX8BS0u6hK+m3UUHAJr2zJi348XiYTHoZTHkCIN8sJwi0zzR2Th/JR0rb4ak9jEo7bLZ83tb1Uddzes1h5F4wQFhGoRRQDgZ3Lh0zw573W7VN5NZNsiYVoS8FS2s+YN6b9RrdK1UMUoKFRAl7HjzZq96/qYVK1UNiCiiDIBxkNotoBwBDgCPw3DT7W8/co2CkSvFAxWUASRYsNzJ4WP8/vcPn9LQtGeUDgA07elH8cJ8OZLEIpt4TgRZAa2JmL/uVs9fdtu1IQCMjy8EXXdnGkCaoCoxM35pNNp5SN79LXtmCvX2CPMEJAwW0ytlruO+fPxEcbYvXlAGkDOIs6++OL+8uroaelOFDWeIvQDGiMOk12tc8Pu1vntgei3RD9cVhRYRZSGIAgAROYpo2kkUDznx3JSdzFeiyUI2mh4rReLFyKj3f3SAd2S0s+n6U8W1mNiXCtHh1eby8qNGMjTtmaUDAE17ejEmJyNjiamXwPRTIskokEcEi0TI8iJnRqPqCPPzdtYoHGi77f/AzGmwtA3T+B/t2qUq8AtjbHc0FYvmisNu7XM7+dXr9TA1lq0qZRwi4Ww8sG7cdRxhft42O+GssOwjwAYksrHTbXrdRhP1ehhLFwDQLATZaHx80+1v7aBaVcNureN1GyupSGE1YEwCiIKAW9dAHER5AlUEtEvE2C2GGN6+a1dxZ7+Aej0c7WyOHlUcSNOedToA0LSnUKWyEDNSY/O2st8S0F4ImkTGqbTR/h+ucvaAaIycEE60ZNhDvCoGnoegD6YzxPRuZ+18NTN7LGPFtp4Pff8tJTJbyccv3l9fHwAGne2uk8hnBSgGCmOF9PTVUinOfnRqt9NXrzLTCwAcAjwhOCIUS0WyNwaDbS8dG+/6FOYAGhNSxXS0sHLX2gMZzBY8Z4ijAKLEVBXIMoPaTNQH0xCiXAi5hsjWaCJ3A6uPnyKoac86HQBo2lNkcXHRrPacvQGr1xDisALbBJwQ9j/pVC+sdjodz0oXhSHTIlJSJLNMlCGSi2FI7/e2lpbd7CEVizrHSOEVEuxjwBfDWKo5qnr/8P4dZrTYJRNTBBR9eNG+b+0ipRZAKAnIJeaTIP+8UrTbYCRhmzujTm2r398K7ESJGJgmolgI8dx+YwO3FxFGjNwUAweZwJDg0+7m8gm3V7+aiY9fD226pkLvioi1YsZHa6PTpx85XaFp2r3Mb/sBNE17MgqF+cSpS/W/cCxzj4iwIhrFovRPtWvnbm3Wc1uExPGJlCjYDGqZhvHb5vr5DQCqWDxcGnn1HwmMMgQC4IId4L16/WwfDy6fCwDo15dqifLhq0TqeQEfun0oEauNiM2/q6+e3wKA+MT8hIQ45ofqVQDnAKje5vkLifL8IRKZVsT7kpV9K92NSw0AsMFFEDkQ+JYZ3knjU7er+X2W099/8D6BmqY9gg4ANO37jbLZuWToRPYNoRYY4kBomyFxBcRGQ0wD2MLsbCThJnYxwhf8kHIQ1WTCublK9OypU7tVcsIb48B4ro/wiBGSEtAGjOB0d2N5BcDjzKOrBEbn+8reDcKYQAYG4aP2xsXTuCtwsJ3RyWAUmSaFbHz8wI/71YtvAxA26Tfw5X9lkoIhxjyAd7PZuWQosksBBpFsb69VtoBLX08ratozSE8BaNr31OzsbAT2xCHf4FdBOEKCHkOdND3/A2VYHhFNKpKCFc950dA6RsCCgNIAdhxL/Vtr/eJl30/FjEzzeSj8QAi7manGjFNRMU80N5e25ubmrMddSNfrNQfRVJ4EtAtEI4utPw27W/csHBy1Wr6ZyLHBNMHgIqfH14LuVufOLoIgmlZANpIpXWEyJhToMAgGmfiN2znZ+FoaUtOeUToA0LTvo7k5R42ify8iBwWUAMkf2eR3OxsXVofD5igZyXYVcxFAkUFTYC4osE8QSwhKkXHTipdKPvOPGJhTIo4NnDAD9V5z6+LNmZkchkbp9YFH+1PRYvULigJ9xu3NNCIJfzeIMgzVH3XrN+87ROL5yaEE4ZQIkiSSHIuPX+/3t/xceqYZkD8OoRyBSkLCYCqyYKOzceF9PGIKQtO0L08HAJr2fdRsKjNROEpAWhiNfvXCL91OfQAAmJtz2I/uFlYHmMgUoGNA/SoG59OA1BEIHBKeA9Q+ZthCWCUO/1t7c/lSpTJGnl3e3+7jb4lkloizzFwf9mqP2fuuKidTGEBofwikvd6hT+/fvGe0szmykhmfydxDkJhH0vJ69Ua3Ww3MWJ6YMSOCdABcMFRwRpl0wes2Bk+8DTXtGacDAE37nnISBcWCaQLS8UypW87G2mFseo/t8g+Z5TgJdcQIz5Ti/tsbN57bkWg1AcbuW1X1hImpykQnO+PRDzxTeWnOTvd952ViWQAwAMOFIBawinlTxUuPu4teLjEz8hFMQ5CNJoeu26t9rga/12u2rHh+CkRZYmEvHbmOTsfPxIqDgJEnpjgRNzqb//Gc1/0n/fLXtK+BDgA07XtqLD4+8KFyYIyFIsWhssqk5JiIpAXqU3D4fndj+XIksssOYhvHDcarBGTunG8J3m9Vl84lpJyNDMPXFdELBGSVhOdEmSfYVFsE2k3CKWuoTK/XuP44z9XtVpWdKsUBmVSiSj944fDp1c/n50sik2krMQ6ToqRhmtf8znZ3MKh7VqzcMsS4VkyMlpvNf9YlfDXta6IDAE37nur3t/xothQglN0AYhBkwXI9LtY/tbbOX/G62/1KZX66C/XvDcIcgLgy8CdGCIATSlQYSRSyQuFPQCgzo+449MudtYtLfr/Wc6MV14TsIUiciMad1Nhlr7v9OL1xiSVyrEAzBIpf3xlshdTtSkkAACAASURBVJ168/6DnOj4LiHsBsGIGtFzg85mFwD8fq3v9rd2dBU/Tft66TRATfsea988t5qaOHyNlMow07mdNC50l/4+iE25ZdPn4z2hvUQqZKjrpiUfNm4ub6THjywIwjKI94NkjkWaAdTSYGP5JADK5/cnwoi1yw/UawaJCMEXBYvEeBlYeBs45X/Rc8UoVu+rYUsBCVOpXS5wBbcW8XG8MF+ExUdCUUcIpITkakTqra+9sTRNu4ceAdC07zeJFRI1w1HLrevLNxKcyjmpK8c5wMvEPAEKt5SiD7OR4ccbN57vRCqYYiX7QcgyoQuhT8g2T/TWl64tLi6ajVHsYED0mlI4TAivkwQfEpMSoRIDMTvitbxB43O9+ft1u9XAjOfHiajMIHFT0yvoVn1g0XBS3ecN0HNE8AU4DVanGutXu99EY2ma9mc6ANC077lRq+UOm0fDTCX2nIj5JkjtEUJoGvwHyw0/3qldXFNqImVnGn/BJAssyLIh5xSFv+tWL15x27VhNnt46kaz/3ODME9MPkv4PzpR94y7frU+Fp/q+BQeFZAN0zS9XGwVD9gT4H6RdNYGeC9AyjCwFnS2usCqStiZpmfIgEi9162WV7zuyf4XXUvTtCdPTwFo2jePC7PzRR/2aGf1TzuPOnBy8tVoT9r7ReGViDL/0+0SuPdcK1E6mmfe+mkoVCADPoNWQgrfb60tNTE/b40ZR44ECF4mRgKKOh7CX482lq/h9nB/YPHxQKnnDCJlMP7UyuBjLC17mJtzUoWDe/syepMIoRAZUOGenJvYtQ1c+KIfqWxzh12ARCKmGibvfN5srnQAfHLrL13ZT9O+LXoEQNO+WZwqH1rwA/lR6AdTTjKz5fWan1tYNzs7G1GJ8V1e4L4poKMicIZm6Abdxto9B+b3JxwLf0eKUiC5wZb5bnvt3IfeVDFMSmWP7ckPQXKcSLoE89TzBwpvr5w/1cpm51KcHD+gGD9WRGUiugITv26vLy2jUDAiVmEiOuQ3yKDnyeC2odRHIcgmIB2KKubTMxe73eoj1wL4OwXPSUqBiJQoqnn9hq7Yr2nfIToA0LRvFtnp3DQTTxEoQzAnOFVoBd16+/b3nBk/ON1X9usU0vMCZIkREOgiheaS19+6dwRgsO3ZidJIiK5GA5xuVs/XACAm+SJZ6qckKCmmTWL1q87G0rXV1dUwWz407zG/ZhAOwTTWTBV+0M7SWffKUi9ROlqMuPIDAl4AU5JJfWREYx+11s7eiMZKLiC7QRQPyLfd7lvXgaXPqvMlynMFOz6Z+PMz1sN8auaGy95qNODtx60mqGnaN4O+7QfQtGfPopkqbb0A5ldExACoIWL893Jyor3WX33ZFDp6q1gPQJA6Q/6ws3nkJvCPD0uLu/P/+LOXcaWyEOti8BMo2gOijuFY/xh6A1OE32AYMwLVtWG8v109dwlAuLCwYC2tD48boBdElAUD59OIfbCxcWoIQBLl4wUh9ycsKN+6EQ0DhL8cbV5cBYCxycNH/QCvMcJ+Z/PC//21NZ2maU+MDgA07VuxYKVKgwUY9JIoWAC2BRQjSJRIQiHqIAiXS6nw5MrKivtV7pCs7DsgyvoRE2wRNAUqRsSBIXTZCtXJen2pNzn5arSDnUmE9DIIWQplC7Zxsn3z3LVb11jIiuofIvALAJoEqSnwDJFEoPgSKbkYmvIKC0oEGimiaoqcX21snNLV+zTtO04HAJr2pM3NOZVB2vjCl+DsYiTh1v+aRGbvfCSgIRAuAdHzvc3TdQA0NraQUraftUK30Wgsf4l0uUUzNV7/SxE5dOvidDkw3T8O11c2gH9ApPTPM5YRHhGlJoV5B2F4Nm3Er2xsnBrk8/uTrmMfRhjuZ0IkhCxB/Au9Hx5vpv+w9KYiOU5EIQASERZSq4C5VI6Prn7VgEXTtG+WzgLQtCdl8tVoXO28xj2e6Iq7DeD/e8iRFC/Ml3hYe1mIyp99CLkYCXGqPh3fxqlbxXYS5eP5UEZ/qUhlfNv4EMDpx3+gdwIjuvuE34/sI4IVkvjD9ZW11OShbBj+44sE2UWARSZ9ZPSHy63W1XYfvzDipf4Rj4zjpIIxYVq1LPm4ff1CDUCY/52RdA2KAQwRMcCyYxrGJ7ZvXtnaOjNY0Tv2adr3hg4ANO1JWXN8owxbIHkYYkxOTkbX1taGdx3BmJuzcq5z1A/lZVFwiERAaAHBB52NS5cAKNT/fILtdV3PtkMCxUzBIQCfAri/rv5Dta5ebedK8x/5RD8wROZTpYMtFeB5g8UkUeuRvP2rrTNn+sAvjPR0Zcx3l1432NgjCj1w+OvuxqWLXYCABTNRHu0fkbxBQIwELiBXHZ/+UK+f6z2pJtQ07ZujAwBNe2LeCRQd7BEgIjBbXiYF3AoAKpWF2IBGe1VfHfVEiiAIGC0RWYn69Md6/dIDX6LN5ko3UT6wBeJJBSTis/PF/urS5pd5KseInnXVcIaAKSF6jVmtg3GqvXbxarsKSVb25UWdPRS4dMwwqCNkfJQk+9ONjfODubk5pzZKTIs/nCeiXSCEEtJlpvDszubFmwB0vX5N+57SAYCmPUEmBx2lzJAEJmGUALDl5Pfv74h7iJVUBOQQw1PKOKPs4NLg+oXqF3SfhU1jHYEcIRIncFEB8KUCgI2NU8N46cAFEBcJcIi41l77xZXJyV87217rGCljrwAJNugTFeBKv3a20QXCQmG+XOvTc0r8PUSIgrChFH2aj/avrq6ujr56K2ma9l2gAwBNe4KEnS4CpQAYIduRSqUS64n5cxFlCAAibJlkvtPcPLOBxxzK75Qi15MbIxeClCFcmZ2dXfqSL2ApREeXG258H0RmVUC7osX/Z9QKeJ9lGGNKqWrEVv/SuLm8CUDNzi5Gtr3aq67IggAGBEEAvDfcKJwC3gl7ep5f054KuhCQpj1BCSsTU4axH0xmSFxtVq9cN9OZEYmZMk3jvfbG+d8Nu1ttfJmXaLWqrHg+S0RlxRJ6HLnmtmtfqge+s7MTRHPZEZSxD5AYM00SMDIM/0Snuvy7QWe7g7k5O+FU9vXD7o8JtI+EPYJcIYt/2a8urQCrj732QNO07z49AqBpT5BpRnwfoQAgUykDAPp7J84lL22stdYubePWi59i+f3jbMb826l+X0hZ4QUOzOcMhTHygxSAL719bvv68vX4xPxZDnGMQGIRfbi9fvkC5uftVJ12oaf2gdUcBCSKL8EKlzspuo6l87qCn6Y9hfQIgKY9QWauaFMYHhbABmPT69VvYHVVed3tz2oCxAvzZcPknxLCfeVs+Xr7MXrzQWe7byeKx0CICBttr1u7+RUeT/xcvOr45j4A0ZAVp5z966bnvgHCiwKMQ6FjmvJ+0kifqq+d3kK9rhf5adpTir/tB9C0pxWB4lhYsO7/3OQwKqAYgNyOp/6Xcvl4AV9clEsJhysAwEpNfuWHWl0dMZt/AkGgaM/IaP1vAjkEEYMlPL1vMvqfWmsXz66tnRh+8cU0Tfs+0wGApj3A7OxsJDZzcPx/5hpK1K7Men/i/s/bW8vXOcTbYN4RSGRA/s9yuecq+IIgwDTMKyCIEFUeFFg8nnnbp1CJyBAAmCgkkYumwf/S3lr+7anbBYg0TXv66SkATbsXZcYPzvR981UWOh7LTV4b7Ww+9oK7SLoURagOC8gikCVMttetL993mLiD+k40lt5RZM6CJK0MVczExzf79+/2d/e1MyUoJfsgiDgDr+Z1G9uP/7P+gaMTzYloAouGyCEitoXUdTL5gxR3zmytr3yJa2ma9jTQAYCm3TY/P28PzfxrAN4CcQFCUVFh6gEv8IdKWmPZkI15/HmB7Vg8lu2P+ttb9x0qbr+5YyfSq4C5H0AmZDWXmi5cHNQfvG1uIWnTSEUmCcgwied2G1ce66Hm5pyUufwjQ9TrgOQF4ikz/EM/Y3zgXlmqdzqd4HF/n6ZpTw8dAGjPvEplIaZi6QPdIf81AbuJGCTigcggkVgkPr7t9muPtepepYtZA9gPgkGCAIAhZEwkI9mLg8H2517sXq85iMZKTcUyCUEiHPG0lZioer3Nz83BdzrPw04M8wSpKFDc69VP4/50woUFK0nJbCxRLIx6jQ4AIBJxLESOCMMxDCwZjvN298b563qBn6Y923QAoD3DFqxkJb/Pg/syk3kckJgIfBY6K0ZwRsATIIqKwPDG5m6is/aFPeVIslwhljkS8QKiKwYoKSROYJB4vbfWgKXP5f+7/VrHThT7AE2CJA1Dck4qu+l1G/cFAatixbNJBk2DELHL6ctes3knu4ASpaNFuxssEPg1EUzb8fENr7/VR7cbmJF8M2RZ7VcvnP4yUxqapj29dACgPZOSEwdyTsxfJOB5CBXoVm3+q44Z/KY1xhe9qxdrTrIQhWCSDKSSEjYG3a0vnCc3k9kZBmaFeCRW+C4U5QlIE3HSSDW2gm6t84DTxOvVm9FkPhChXQRJsaL8nunFy/X60j29dCNViBLRLgJswNj02vX6/Py83Tezxxl4nQm7IBIRgjIR3Bj1GjsA4A8aveD2vzVN0wAdAGjPFsL8vJ2k3MtK6OdEXARgMmTABt7rbCy9N+xst+8MjXu9+g0nVZqHkngokvV69bP4ggp+Trx0EIRxKAwToX2KDGwLcBAiEZPFd7uHbj6kop64vUY1kc6LCE8IkGkNaym/99bVu0cNYpmSAUV7AMQRqnYsWZCdIf8Ng+YBRIkkNJiuCqtfdaoXq0+w7TRNe8roAEB7JlQqCzGJZfbbQ36TmOaJ6LMUWGXwuc760kd4QG3+aKzUBmQPCMlIoui7vf99E3jnYUGA4aQLFQJVhKjW2jz36bBb61jxYowI4yDk4snh2vDBowAAgOFUsWYNlcVMBQIVnVSdvVy8hp2dAADcziE/mujvFSDN4DEB7QckRQJfiNbA4QedjYvvf376QNM07V46ANCeCRLL/hCEF4kwBoIQ0XkR8YgoRUqidjJz0+t9Np/+GXc8NXB8HgMoT6ASZz5dDzrb3YfdJh0pNENWURC1vG79BgCkY4V6wGoXhBISSu7VFw9dWF19SF39ej30UjM1QwVJBooklLdVtOl1t5oAKDkRGYNgHqA4AAuACZYdAb0bDXGqtXXxS+0UqGnas0sHANozIZYppEWwF4ZqhJ76r73a4bNOZsslot1EHDXI9ke9Nz+/SK/ZDOOp8iiETAOIG4rZ7S1ee9BiPgAYDOqe23trtZi+UruTXjcY1H0rllPMxqwQUmvbo5Hfqz18eL5b9f18fM0JjN0CbsUV/7Hf3/KSEwf2ieK/AlEGAJHAg4GTac683dg4XR0MHpw+qGma9iA6ANCeGtnsXMouTMRSdt4czBZwd5rbKO20o2ZsrVOKvu9fOdsGlsTrNrbtZLEIkbwiyRiZnY2gs/W53v2wW+tHEoUCgIIQYpFMo+V26o9IC1yS+3PrE6X0KPTN0q0FgZK3YqU1v197aNEf7OwEY/HKinLoRijBmJko/pSEXiTAIZArwEZgev/W31g+13mM7ARN07T76QBAe2qYmdJfSSjP+YyZyIgmnERxLBIrRZPRsWCwea3vtmstVKv3DL2nnGw1MHg/CRKGCLm9+soDLi35dK7lgneTIAmI5U0Vr36ZPPpRq+XZiaIwY5ZADlh5Xu/w+qO22I1GMwWl5LkQeIVAeSJSDLqhiD7++Q/n3/v0w/faX6J5NE3T7qEDAO2pUCodjQek3gIoQUAaQJGIphSpmZB5bzSVzxfSker9PfPBYNuz4jmPiPYQY8x2ci1v8PkSu91uYxiP5z1FNEdAKtrn/qhfv7+63yN5LxxqWY3uOISyIEolM97G8AEjDpXKQgyJsVcCg18D0RSBbAEPLOA3jhgnW5tnq0tLSw8NHDRN0x6HDgC0p0K/v+XH05X1wPCrTORDsUUQJoIFUIKE/PrGlU8fdG42Uel7pipBYYwNmhzPHzq3s7MaAItmfiZXsiKZv3bGSm67unTJSWXzEC4AmIzkypfdx9jK9zOrqyodLbZCQw5BKOJRaPrdxl0jDotmupSaccn99xDaQ4AjgMfApW7C/efhjeXNfn9Lb9ajadoToQMA7akx7G51/M72ltttXPb69dNOpriilFdjGH4o6qrfb9QedF6/vxXY8QIYmBJCZKj6kkiNKzvafikUWRQgA5DhdesXOVkaMjADIKpUmJkuZ642m83HngoYDOo9J1MUCKYM4Ww0OVkd9TbbABAbjx4TUT8hUIwAl4nWTMbv2tWl02g29Ty/pmlPlA4AtKeW26kPvV6z7vbqV/3+4e1HzbdX8vHuIDRLEMqSUC6E7BaiaSKADayB5azbaTSD7vTAToRxJiqRosQwNIaj7mL9YVkBDxLLJ3sSGFMiSIqE46lodmUw2PaceDokmIcNg6tCwQcJip2qb5xp4AuKD2mapn0VOgDQvvMKhcWElUxOZnKlsX778TbluY886uUPADs7x+Ck3TREpnArv94RgUcIPsg6o3e3bqzUbx1ZVWPx8bov4V4QxUXJmJ1cv/GgGgIPM2q1PDNdJAbNgBANAc/rN9a8fqsfS+U3x5zBqdrNK7Vut6qH+zVN+9roAED7rmMrGX9NkXrLD0L2+o1LX+0yvzCAqAncmwWA+Xk7qsbKkfTwpwQ5BIDufGVEwv/SWb90fud2Fb47+v0t38wXNinEHBElScyo15++BlTV4uKiWRtFfxZJlhajyTzcXmMLD+jBF5LTHV/8cQHSIIqno4XNwaDeG/Ua7fvvp2ma9nXQAYD23TJ9ZCwZz8ymnLx7Z/vcSKqUE8issHS9XuPC3NycE4vttx83/z1ePFxyUtvHo8kg5+6fqt9JBYzlD47HfOMlGPQyAQUiUkJ0g4AQQEyFnPB6ixcfNLzvtxs9K130+VaBoIKTCuDtm66unjgRRNJ5gqKjYHZiZvLGaNRy7z+/2636TjTvgWk/CBGfKPB6h9a+aKRC0zTtSdEBgPadka0cnrIC+amA50JTNb3udgMArEQhQ8BeMAZWtFzvB+aP3NCd9fr1R44GzM7ORpRTWSBSrxPJbhJVTAxp7U7qnZMqTRPJywAiirBFrH7fC63Tlql8Bs2CkEai3g579fqDru+X0i3TNaLEVCJI2WkHodtf3PS6f2jZyVyJwBPMTnPUrz1w8aE7aOxEkrkkEWXYUlfc9slN6Pl+TdO+IToA0L4zhgvzA6vRe4VAcRIK3XLmBprNMDpWSgGyR4RMJnmBSDLESOdTuZXuAze9+YURy0fLI0V/B8J+EEWISASwPRUafu9W6p33wqGW2ejvMUiulOL+rzavX6qhv+WnnWxfMRUFyJhEhUimuOp26p+/T7MZZmLFWmhQRQRpAsrRTGM46i7WrGijCWAeQNLt18895CeLW86s2QFd6qxdvAL98tc07RukAwDtu2N1VVnxYpoIZUWkEqZ/NWmOWz6Hu0l4CoIIgwcgXLYM652t9fOfL8SzuGgmBzdeBns/IaI4MTwouiKCm8xUZKKcnRpved2tbayuqol8/NLWzZVLd6fyDQbbnp0qKyLZRRBHSI287lvVB00FDAZ1LxUpNAKmCghJEKacTCOUkNvEkiemshkrXXto2d9mM9Q792ma9m3QAYD2rUlOHMjZscKe4tje7p35fCeZ7hGM55jhhB6TMB2H0F4QMUhWyeIPilH3zPrqhRYAZGaPZRwnWXH7zQ4AweqqxNL5PIh2s8i6An9YTronOUxsjBAUIZIFpJyKZC8PBtvewxbceVP5jj1CAUJ5ECUy0e31/kNe4oNBvWfHx6sGqawIxkhkgg0qApSCSBQUel6vcf1ra0hN07SvQAcA2reiUlmIeWH4FjMWXHFnkpHs9mCw3fV6zUEkkd8rQkkmLguQEcJIBO/0JmIn3IufNu701jPjB2fCUP4GMA5E8xPLo53NEQCMuvVaMlVutiYiH3iXP601m82g2636dqLALJgGIRqaHN7ZrveB6vUwZsS3lGEdISDuGUr8buPqww73+lv9Qsa56iMaEaAMQQqAAwAGy7bbbVx5si2oaZr2P0cHANq3olSKcz+00iBJQSgfEk056dwgEivNKeJZAiwiUmzQp2Yk+m+dm2du3lq9v2hGJ9Pj0Xj2L0XoNSKxAGobQuvD7lbn9uVl2K017t/4x+tN71gpb5yExqAQT0Xzm4NBo/ewZxyNdkZOOmsSjAorKRjZqZt+Z/Nztfvv6HQ6gdutXYmnCuuKlEUgnwxZi+btd/tbuoSvpmnfLfTFh2jaE8GR0v6ZqJdotlqnbu9it2jGZ2t5w6XnROQwkQQCMgikRMQQQr9XXfq/7lwgXjxcIsZBkNpHgiRYdgBaNuzBuZ3V1Z3HeYjoxNykpZz/IBAWodO9zcK7wDsPTSfMzB7L+J7/V6xkXDFV04j8y8bGqcct+sO4tbBPL+7TNO07R48AaF+71OShrB0v/ZSBY2x65qjXuAlAgBeJrUaJRPYRIQEQw1DbLPgExNMA7Lnpwql4PG6FscmXSMLXiLGLCcwk58H82+568cpo50+PXYUv6Da70UQxKkAFQNZOBFe83uZn56cKB/e6g0bzzt+jnU3XThUMVphkotQAXt/vNaqPeTv94tc07TtLBwDa14UwOxtJOZUFKPwckDyBLAiKdmb3Ja+7PkxNypwJ+gkxMkLom4z3OhsX3rYSU74gPEiA1fFUbejbfwWRfcRsEwgiMCHgkBBPJ13TyhQy8UQxYaay5WgiP2vkCvDbjxja7x1acxL9fQQkhcKS36ufByD5/GvJ0HL/o5UodrxevXHn+LST7YcmT4sgaRDidjq/rlfua5r2facDAO2JK5WOxilV2BPx+S0hOgSCAUYTIA9ATMTLzk0XVtauxHYiKS8ZklEncX/XqS5fASCRTC4CUfsAikBoP5HYRFSHBH8KoG4YTCaEMySYDEXtEyUHlMghCO0X0KyCdINuY+3hT7gqsXRRATJNQql4ptwddWoNJ5nYq4C9TJJ2MqWbd3L/B4Ntj7KZvqnM/QLEAXa97uLGl9kASNM07btGBwDaExWbOTgeinqDIQsCThNkKJAzEjFOiEttJpkEkOuNZOD2zqyP5xIb9ZuXLnu9Zh8A0tNHxpQvx1gwCYIhgAvmU2TQic7GxSt+b3sjbmVuCNsbypQ4gxJEqLPIDoAuAV2LjeqoW/98jYC7JJzswGejSEBGKRmzCqUNUfIchLIM2k4geuHuzXiCdrNtp4oFCHIgSUTSjWsPLA6kaZr2PWF+2w+gPV0kDBnCBRE2iaSmJPKr3ubpJoCwUJjve8ABAaaU8JFsdm5ldXXl9sr9BSuW946GXvAyEztyawEdHDP4z9trlzZxqz4/AIDZEBfhLkNJRQQGk7nUzgV/rra3NB8C5x/5nI3GcjdZ2X+WYFQglOGBvASDsiCIIlQfsNBPde3+24lRfJIUMhIGrwP4r0+izTRN074NegRAe6KCzpGhFR+kiVFiEAz4N0a9Rgu4VTXPTud8UrSLmOKh6Sivd3AjPzVW5rj7l4YhR4nIEKAPwAFBKpkj79TrSwEAQuloPJ4oHlBMPyXCrBANCbAVhL0olrG05KFeDx93aN772V/sWNfr0wAyIOQgiBKJcny8+8D0wJ2dMJYuekJQbFvvuu3a6Em2naZp2jdJBwDaE7aqnGS6BzLmAMRBLG45fRO3i/d43UbLTheLEMmDw7gdD2+IDKYAeo5EtgGcNsW8pkjNgai7fu2dT+bm5hzPHt9ns7xqkBwjFibBJRb/Y0U8yyQZa2CteP2t25X65m3MpU3cVd73gZaWxEmNbQl4jgAbAIjQaE3FPr6/hsAdo+5iw+vSZbf98WNnHmiapn0X6QBA+7K4WDxcLBRi4UPL6PaaQytd9ElhDwky0YDXR73G7dx/iBUttYnkKECOsBjdMfooMaSmMumPnY2lK3YyNwtgBixrqWyh3R5YbzDhOUDyRNwgxb/tJN0z7s3jLSfVKENQgB16XqdxI5Y/OB5J8huGclJBd+sRCwFvP2t3e2Cl8lkSKgGACN7zLp/ZfPgZS6K37NU07WmgAwDtcXE6fSRjZgp/p0x5qe/HdrzeVuNhB/vd+pYVL+4iQgZAwe01zgK/4FRB5mDir273uIlESnEXN1rVpZU7i+qcVPGHt0vpGmFAL4KRFbCvKPigV73wK7dfa93q3S+JHS+YRNjDARUS2aIC48cASgbCihWvXPvzqMDDOancLMMoCaHX27zw359Ug2mapn2X6QBA+0KJ8vGCk8oeV5b8BQNZCAxhiRWS01fuXil/v+hYcUhKZgSUdmJliSQ3D8OklyGIMKFPBFcAJwByhdSta6UmD2UllDeI4YsABpFHxBcjjvp9e+3i5fvvEUvmYwo0AyAaKswI4DKDBGSKKPH7h25+UY/di5TqFoWGJdalUb9WewJNpmma9p2nAwDtoQqF+QTSpaMGwh8A2GsAPoPPgiXPQinP8D23U19/2PnuZKFnupIiUJEYkwIUCQQIrTDJ+0TUgqDCRClPgpHbq286sfwiQAVWUhU2PmIVLPtgDn2a9A5Mr909N+/kD+wjwzzGSrIgGDB42QiDE8owPFKoEOCY0d6G/4h6/wCAQd2bLo9VM0lu1Ov1R68b0DRNe0roAEB7EEqXju4KWH7GhP1CEheoVTL4v7XHIyvRjnIUZIJEJqzE1D2ldO9Rr4fxeD5URDMQOGDZYZPf7oxHTo0unWmOpgpNa8DTgKSJELHi+ZCIjhMRATjb3Tx/xo3mA4fprxkoxkJradSquvn8/qSRKf/MZLwIQQ6GdG0Yv93Zl//YPX+q6aWdLTt0niNGnE0eeN36Br6gLG+z2Qz1y1/TtGeJDgC0uyyaxWKigFThdSJ5HaQiIrQjDv++t7b0gdupD1B9ncxEPQrQFACbEVpu79Dqw4bZR73GjpUqZ0ikDLDniVwKLp1pAQDq9TCXyvV8WKHDVwAAIABJREFUwj6AEyISJUYAoh5ZxkduuzbEYFasZLCHgDSpoBWJFkueST8noCyggQk+F1Xm2/XNsxvI5QxUq0Cn40dTuVCEdgGUyqemlx41VaFpmvYs0gGABuDOPH/3uYDwOkEmIdQk4HTa7PyucXOlCkCSEwdyTnL7GCl1/NbmPQCBEnbK3fG6W82HXTsTydd8A/tJkDKFDbc3f+1OwNDrNdrRRCmmIBUwsW2Ev/ZYVns3l+q3zq4ikiykAUyQSFkR9huQgBgXLfZPtKoXz/X7k5KspPZG2+qwGSsM/EG95+YTLTu05kmQ9A2/6nYaD30+TdO0Z5EOAJ5xi4uLZn1gH2Got4hkl1JiiUFnDct4p7N+/lqn0/GxsGBleOyohPwGIHsFEFJyUsjIARIDKfaS0zfwkF72YFD3ItF8B0z7iVQmnhqtDbu1zp3vc+ldXY+8gxDEwtC0+hsXTt11ujipcoyAOQFsNug6VPhuO8tnh1eXW4ny8bwT994k8PNgTJik/FHv8Dp2/hRGEoU8gAJCIa/fuPR1t6Wmadr3iQ4AnmGZ2WOZtc3Ov2Pi42ByhGnNtMz/3F07v3S7yh0lky9lI6P+3yuhw0TkmEQrZBm/7GwsXR6L50Y+0x4CZWzGltfd2n7YvdyDM12n5xcglAshM8XM3FKnM4dsOXZwoLy/BeAAAEjyCbvYHg7r9TvnmpkxWxSVLBWe2Nm88Du3v91GfZqTxfTLgvBnRCgSCSnwDdPzPhgO/zgEFkwn4e8BqKCIld+rf/q1N6imadr3iA4AniHx4uFSNFYYt8dy5HUbw1FiFznwZiDICaEfiPy+v35+EwDl8wfHOVV6Abb3F0SICfimAB92quffvxUcLFgqA9MUtUsEDkTlvd7i2YeW4a1WVTRW9onUNEDxgXLjkVRvXoAFgCwhdEEICLDFlHQykrs2GGx7AOB3ZkcT+c7FzfUr65XKQkximf2RVPCXIDrIBgUCvkGGvNfdWHp/OPxREC+gFMuoV0RwSEBDsuWE1/5zQKFpmqbpAOCZEh3LvQmSV0AYed3GGjprQTQ27oHDfQS2mdCLpIs9O5I7Fhr8ChF2EaOrDHk/5tPJndrSBgCkJg9lzaj/CkO9AiAO0DaTnHV7xa1H1eGfGk8N+r6VAaHAQBFCWSIWsFoxRU6wQQ1ApgFElWEO3F5tE4AAVbWz82OJlMLZQAWvMdExAVIwVEOFciIh5slm9fwm5uaclLW9QEQ/EMiMEPpi4ER/bWkJX5AFoGma9qzRuwE+Q1QoERI2IUJ3PmtvnbmemNh/hkI6LoJjpHCUDMMBSSigj9Kc+uPa2olR//YLNJ0/+HwYykvMiEFABsknMY6e3Ng4NQIuqEplIdbF8PmA4Q3Xlj6++/4rKytuonT0j4xgrxBsQG2bZP6mOR7fxKlTPgBOjB/YTcK7RNTR1OShq521881sdi7lW0tvEoxZYdhgeCzGO+2odw4rK96dZyu0bWtoYJqAMWZZswz1buPm8iYAXbpX0zTtPjoAeIYwGY6IwAypc9fHqldOvJvYGM6RICkQiOCGMsP3BzeXN7oAMD9vZ5qqoohfV4ISC1xmuWqa6uPGzeWNHYAw+Wok5Q4nezJ4BUJFW8mgNLt4ZnX1nXt2zOttnanFKwcvsqKjQhwZeWFw++UPACoh0XcHcCtCGBOFgwBOKMc6BsheCLlgWbE4OLm9tvS53P56famXnj7yb3Ax1t44e/XrbEtN07TvOz0F8AyxY8VXQXAA86zbr7U++6JaVdFkDiCeAsDE4bv99eVV4BdGLB+ORz3jFQG9AqKEAGsW8EnaGX6yceNKC1g0U5Px3bbvvkKGelmABEEabPDJTaO+jQdsGJS0Mo3QNA6QIE5seF6vtnrnu15vc2DHciYxTxBJyYyWVsOItIyQWdg/3d24+OGws92+/5p3uO3a6J7fpmmapj2QDgCeEaXS0bjP6gfE8BXsP95fvS8VLXYD5hwgY1BcSGTG63a0/hKZ/BJEppjgMtO7ToCPt2tLGzs7O0GifLwQSXR+SILnhVAiiBDjBAw+0V4/f/1BL38AGA6brpMq2RCZApCdmy58encVvmhuvAelJkSQZiA/ncapNcO77l2/XIMeztc0TXsidADwjAjG8jOGwgGIalnu4Pxo1HLv/n4wqHt2osAMTIMRD8LwABjjRGIyy3nLV79sbl24MRjUvbm5OUdFy0eA4G8FVBKCBQGRUCAU+0N3/dNb6YALC1aS8vs4kT8Y9Oo3775fJF3oI5RdREg0PQmCbuOzrXvdds01kmXLIDUJokRtYHTCmxc3vpGG0jRNe0boAOAZEUsUX4cgB+b1dty7dLt3zpXKQtQ0o7HR6P/0vd7Vlp3yyxDKMpEPkhuewe/11y98Mhhse7Ozs5EwXt7dHVk/ItCRW7v5yrrBuA5BSpgcUaGkY4W6lRyfsNvuD4nwoqFQShdLq/2d2mdb87qdQ340MUwLYdwE5dzpwhncNQrgR/Ndh2laBCmbxE5FC9cHg7r3rTSepmnaU0gHAE+Ff+D09HbGbdfcB31bKMwnfOLXmWAQq2X35soNAJIoHS14ErwuBh+KFlZujnZOD6x8ucUqzCsYJzJG52Rr7UoNAGfKB2b6vvMqEb1IQAagbcOQD42oe3InYa0YA8kzKA9GKmAaJ6jnQVQAc5uAU9Ifbt076rCq7EzOIuEZkDjWkFte765c/cG0WIlwjoCMMJQXxXV/p/7oXf00TdO0x6azAL73fmGkJv7fF0OfnisU5v9Lvb60ef8RAzZ2GaQiJGokxA3cnkc34MZD4imAYs5Q2QDQv3auhrm5f8bKRa8HyNzcz53qYPUNFdIBsFgQEmb1qTHyPm42V7q4vRKfy3MfAfZ+EsQBiQsAg+lyoKwT3c3T23jA3H03zauplrQFVGTCFPCLZeAfw8nJV6Mdt/MmSE2IEFhRJ+lFOv37L6BpmqZ9ZToA+M5bNJOVjYwhRnynengN+Mdbw+Rzc05yEJslde5lCanAJMGI+UUA/3rP6QsLlrE+mBIhBlEn6hvVzgPuchfByopXqSxEB8Fo72bvxusMigDwmHg9EvLvtrbO1z47enY2kuzasxDrddBdWXmMj3Y2zr/3yDstLXmqfOAmgUsklMnnz8QaDXS7QfvfiYkpUhQIZM2zghPttfMP3nJY0zRN+0p0APAdlyjX9ouYr4WKVHZi+VdH9y5ufnhhe9ruhfvBwV4BWRBqi6HOs8UX7z8/f71XcA0eBwFQcmVr68yfO9JiMZMyBMDIkc828klNHpzrh6OjYqhJEjJZZC2ALI1xZ2VtY21466gFyymMZuwhDpIlMwJxCFIXJhMKY1DYWyodPX3P/R7AsMw15asXQlZpz7AyALpi0m/Yl+Ok0Cym/aWVlZUHTm1omqZpX50OAL7jDMUjxSoJFglC9dypS/XnTZaKADEVSmia9CfHp3O19SONz0YH7tUFowlBhqPDewKEkMUhgg0B2jfOfjYwEISSMkRmmbhDRKcNb3Sp3Vzp3q64R8nKQk4FowVitRugGBH6QnSaTGNJeWEFoEWCZAfiHQVw4lG/r110biTWhj4Txa2Q00NgrbN2voWFhT/g1Klwp67T/jRN074OehHgd5zbr7WsVC5JQiVA8hDkmMgEoxUx1b+21i6e6fdr/YfV4B8Mtr1iJnLdM4xh+8aVu6vjcSJWmlMkUyT4/9u7s++4riu/4799bo0oFAozQACcR4ESZTXllhnZbXbbbtvLyeqsXtFfkMf8E/kr8gfkMe7koePVcVteCWO3ZUc2NZIgJZESSIEAiMJYBaDGe3YeOJgDOEgtkZL4/ayFF5xT9x5crsW765x99mm3tqr/71ZDZ7x/Nde2kG13fr1evfhJo7HakmTS6UxlV+Gl6PEnwXwiWEii24JC9xf1+YsftDaWmsN9e7a66u5yqV8hVPoKg4vb2yv1B/6BCwuxtzI2n4a05kmz1qqtrUlyLSxEUb8fAL409ugueFqmpqaKNQ1PxW77Wybtud0Q7A83a/Q3Pv/VT2dKu6o/CO7PS5Jb+KfNhXMXduq5b9++wnKrd79i+qKZTZp5GqMWFLrvvXx08qMzZ87cVfCnMHZ0f0bJv7WgbIh6d2Oq+Js7yv0CAL4CmAH4ihqcPDHVSDOnFOPLkobMLN4M10whubp87d9dkc64dDpTGMvuK/aPhnZ9ufnwq97hUCZb7GZOylWWpGBe7smWr969Ve+1pDCW7mt1i9+R/CUzDcp9PVjmzUxP483ap5fnZmdn75ui726t1Ap9owNyjcagcrJt17q16w+eBQAAPHEEAE9ReeLE0WLv4N7W5t5laSFK0tTUqaIXe3/i7t9xszFJmZCJsxklr7tpSK6yLJYzg+cXOhvLm5XdvfuTNPzMPBzPl0eO5EvDPX09o+uPKprT37en7N34Xd2cBTKzoifZ7dZmdUGSJiZO9oTy4vcT2SmZjwUzi8Hf38zU/6k1f2muubb2sGDDW6VdCznTtMlLlqb97a3l81/QYwMAfAEIAJ6S8uSxU4r+AwWbDJXm1dHefamXBo40YutvzWy3mcuklZDL/Grj05k3GvWlWlIeyQS3six9oxJLS/X6QjdT7n/JYugx84zL+mW2J83oRE9lvNGsLS096P65/MC3XNqrRCtyNSWVoqyn2D/6aatWbXQr5VGL4WULyrn5QtbCr2rzx98fLG78RbE8Vs707fHRSuK1Wm3ntfqt6918ZXBMbsPBLN/arL55Xx8AwFNDAPCUlEb21tNO55jcClIyFL29VxZOmlQy03V5eCcUcr/fuPLe7cI+nfqeleJg/MTSONaJ3SNDlb2Lq/PnPuorDl6K+e5iiLZpruim0M35O5316pZ0OiPdO00/nctV7AdyFSWdy2W6f+pGOxCk/iSaNzers93aynZPz2jXErtSC7U3GtcurVTGMvtS8x9H6bB750grLY7k+8cHSuXh0Kwf37p1n6mpU8XQO/S8YnxesqwHv96uL597og8YAPBQBABPSXNtoZWrjJXNtctcZZcNmKyVKLyrXPht7dq5j5vri/dMsy/Ect/kYNqNP1HQaJrGWnNr6fr29kq7VVtda24uf1ouDl3JKfNJvpt4Uh76q3xpa6C19Z8WbuQL3DA4MTYRo7/ssmaS67y19ulHV/N9owW5puQaylUGPm7XV7aaW9Vqs15dVK3WlaT8wHDoWmxIlk0sKUs+YtJkKu0r9TRaza2lanny2OFm2vmeLH3e3fJmvpRm4plO7SE7AQAATxwBwJNnU1Onip1C718Gt5fMbvwbmKvdyoX/tTV/7u3WxtID19e3a4v1TN/IIXPrS4OPj/YfOl+rzd3KwvftfWNKGv5cV/EnbhqPwQuFyrm5dn359o6BUnlgV1RyMHhcSprpe43GaqtQGd1UjHtkVjZPJg/uGblQrVbvyu5v1aqNbn15rrNZfT/fP/KRp6lcYUAKFnrSc83h/phrZf7epCGTKwSd67WNf169Nrv6pTxJAMDnRgDwBI2MTPeGvtFDbW/+IJgdC8El802zkJFZEmLcbG8+f+3+Kfu7FfrGO+a+V1KxYa1sp169MjFxsqjy8MHctr5nwZ73G0WeViyEy/U0O6et67e34W3XV1b6+odXWkmyXrt+8aoktWrVVrE8lCiEScmLa+2w1alXH5hD0KpVG+2tlU+G+/acT721sF7oLurSpUa+MrRubmkhJq+vLs68V6/X2f4HAF9BBABPxGtJZayzPw2Z75n8BZcqClozt7PdpPN2ojDoroosdPoKtavb2ysPzeBvD/VsJt1MfzAbDtH6k76RTidtv2jm35Y0aPJmCLqQFpLfbX56/gNtXb/vetu15bXO4d2rNwvuSJKXxgc2YzvZ7W59IVq+ODI5d/8yxN3q9YVOc3N5XaurqSS168vrraN7Ptm69O4jjhwAADxNBABfsuHho2WVV34ULHzbb+znD6n8YsV6frG88N7Vbn11o1Qe35ClMWQzv7NS20sjI7nn9u3zhT+/nO+2vt7tKQ2kprDXpZ5EvlsWRuSWWLBruZz/cm1u7Hxn/c3bp/Xt6J7rN1ZXW+W+wXbq4YgF6/VO2mhtVRceeo37+b3XBQB89RAAfMkKEwOFmIZpk/rMbCnI/7m+eOGten2hrZsv1kZ9qdaqL1/O50amut3M36cte2Wp3bnc2Vje3OmaY2MnSt3gu13JbkkZyYK7OkmIv/2Lo2P/Z+bdP9UetYzwINv1lZV8aWRU0pDkfX3FoY8eNSMBAPj6CU97AN90q5cu1UNHbwWz34yW2v+wvnDhirTjATdmmVAx87yZpYNpff3eDlNTp4rliaNHWyH+2JV8z+WFW23B5FJWZ86M/Kvr57syv3dTXWb97UzyXek1AkUA+IbhP/YnoLW9vN6sVxdXV1e7D+51OpOtbB2xqAkzVavzl9+6o9FKo8+Pta35fYvJt6J8xMw8lX8YEl+R27CkjIJPZntXc+2ju+f/NdPw7a3rjaQ0kiTBpmQ2pIHlpbS2tPZ5rwcA+OohAHgy7vpWPjZ2omTloX+fL40eLPQPD/YNjXZL2a3YCfayucqe2IftenX2Vv/C+LHvB/kPTTYsUxJNS1nTL+sLF84WKiOuaEdvdg1BGi/WY6Y53rd4KzHv84y3UK60TWHSpd5MqvKukeOX1tdnHxLAAAC+TggAvkjT07lybqj/zj33OwmV/gNByckbx/vanm5XJzrBjifmJZNZPls4s72xcHv9P9c3Opgx7TWFFQWdGy+1X5+/8sGqJLX6Djfyah6WW8Hc593M3OOBXCcz2lMe3m6O9zc/TyDQ3lxt5nvHsmY+GWUbW62tpc52dcecBADA1w8BwBfDSiPT48W2nfJozw2Uds1u3bHv/l695V09MaPVkNpqNHVkypjUI1diZh69mxaHJtdubcHrDJXWM57bMuuerc9fvLh65wv98JjlN9q7ZDbkUi3x5F8UfFDSZPRwMNvJVMp9Y61GfemzVuLz3eOVlXor2ciWmm/Xrn248rmeDADgK8me9gC+ysbGTpSKxVo6Ozv70L3w5dHjr3riL5jUY7LoZm/W5//DH6T//KB1eLvxczro0FwysV1JamnjP5opd7PVTV5Nu/b6VnVm8Y7P7JTgF/rGpr/tpu+arFlbPP9fBgYO9HWKxZ9a9EmZ3FxtmdYspm9sDCXXNDPzWbL6H3RfAMDXGDMAO7PKrudf7ij+rK38VrO2dP2+Hvv2Ffp6J/flekb+TqbDZsq6eyMkNpNptt5pNP7HQ4MGSS7NRq2uppme/qNudtQVtpX4oqJnJes38z3F3l0bra2ldT3kJZzpHxk21wFJmT3jL5+dn//jVrtePVfuG1+Liv0K1uOuilt4rtDwE7m+0Yme8khPvme8Z2TgYPOOUsIAgGcEAcDOklzv4A8lq0TFod6xg5cbq9daN5peSwq7fE9Pt/AdyV+Rq9eklkkfdjz+YWvhwtuNxmrrcW80MHCgkmZyfy1TT1C8XLaeX3WzjeueZkZkGpTFfYXSrpXW1oOz8PO9YwPBdEBS6BZX39leubFvv1FfWikM7rqaytYyijJXwWU9cg26a7+CHW532wsPuzYA4JuJAGBnHoaGapmYHJGrxzudQmuzeql3/NBIvrR+OphekvmEXIklXrVc/PVgtvn+8rXLy5/tNq8l2cG1kyY7ZFFd8+QPy4vvLrU2VteKPWOb0eIeyXpcPh4qIyvdenVjp6vk+8aHzOJBuZJCq3t+c3N1+1Zba2Op2aktXR8s772qTOtKx8JStDQNUlaKnW4uneGkPgB49mSe9gC+qg6UkmsLzfRS18JRdz9e2nVcku+VYq+55LJmJvgb69cuvC1JO76Z/2zHdfTSyPkRd03LPXgSljbnz12+1dbOtZvZmMl4lGQayEe90jt8dG15+YOdX9buJpnce3bM65ifP7staVvSvKR3bv462WlcAIBvPioBPsDMzEy7m9GHJmtKUnA/bq5eN9XN7JxH+4f1+Zm3H3WdqalTxd5dzx+rjJ3Yf29bztKDISov843+sP6Pd7Zl0swBj8qZ6bqZd91sqpVNvqUdEjdjN+bdLSNJ2Wzps3ybT7VzVUIAwDccAcADDE29OClPjin47WUSMy0mMfN6beH861tL5+5PDLzLa0lh7PCBjU7tR3L/mxjSHw4cOFm5s0fGk3ej6X8n7r+em5u7u3aA66Ak5UL2zeDJu+4e3O1E7/hLw/fcKIRstyRJ5t6dm/vxY+cfAACeXSwB3GPw0Ct9rVrtlU63e0Tmefc7v3F7yMVuVY/41jw8fLTczs68Ks8ecvOcucyC17utrbued7U6sylp5t7Pj4w8d7hpGjT3amxsLeazPde2knTcoiZN7Z9K+q+3O588mdi17QGXlCah+pCthwAA3EYAcMvEyZ6ydac6m/VXQ7BBN3fJ6jK/aEmn7Wn2VXcbbWeSo5LO7nAF09SpQiVdf66lcFLufTK5ZDXL+Pu1sZ63dPbsTsWB7l6DP3ky25xvfl9ypUHztf2Vhs6e7faOH3/P3EfdfGRo4oVjK/PvX5QkrawkrtKI5LIkzH3hzwUA8I1EADA9neur+d6YNk+Ya7dLSTBtueyTfNffrVZnruv06aTvQnW/m0+mSk+WJ45cqc9/+OeM/0OH8r1bhQNK156LHvZLLpnVPOqyF31ma3ZmSXOPs9b+WlKZP/dClPUF90aImY9vBQ25dmuunc1eN9lUK8bnNT39sWZm2uV2rteCVzxK3TSd/bIeEwDgm+WZzgHo6zs+WF4Jf6tu+JG573N5cLPZJGR+USu1zlRvVOFznTnTNYU3Xd4wVznp5v5KOp2RpN7xl0Z6two/k/vfmIf9ZhYV7MOs2S83nxv5zdbszKIeM9GuPPHugMum5bJoyeLGVO7TW22rq5fqMcTLMrnMBwfXW2M3WjLHPCrrCtvN3PbSF/+UAADfRM/sDEDf2PQrbv5dyeUmd7eGsv5/N6+ev6gb2fF3GSjW51cavVdl8WgMcaJ3vHpEfnzc1HpJrhs78NyahW78VbV64SNJNzbcPbbXksTPTafSqEyeKL13ycCTYJ9Y9O+aQk/L8kOSPm1lw0q+nW5k3C9rdvazlPgFADzDntkA4MY3abnktWCaLdn6G/NX57cf1H12drZZnDj4buL5yRvV//ynt9IDzdWOiu+VPPen69XzW59vQD9Ps93pt9Jc0pF3bH3+4pV7exQ7mUwzcbl7kqQ3zg1oXzl3oa3TH01PL4X1Rbb0AQAezzMbANQWi2/3jW2HbDb9dGXuxcUN/fzhR+aePJlN5lu9Ury9K8CC2h5vvIg9KL9t7YKkzxkA3N4V8HvdX6HR+qaODzS76csuC+ZqR7M7juY90525by8BAAAP9qyfBhj0GOvzw8OvlpuZ9R8H911+68Q+Sa6wne+0/7GVzf5dMOXNY7Nr4eNSau8sPbJOwOOZnp7OfbKilzLBTpjU6+5BHj8YK3dfv3TpEnv+AQCfy7MeADyMDQyc7GvmG0cT1yt254vfbDZIu909yaR6MyO93c7ZX6bRDwVZSeZpTP16VtnzMe/Xco20Ux1RWzPHUz1qpuFOU1PF3m7lZybfa2bRo2+E4O+8dHTsvTNnznCCHwDgcyMA2MHY2InSljr7Q7AXXRqTy2S2YaZtucZM6W+ibI/cDph7t5vqv20vj1WLk3PjSVo4FCzdLYVhdw8utYJpTbLloNDopL4eMtbuxE4zZL1tSRJzodhY+/jsjscJjI4+P9bIxO94jOuW6Fz92sWVJ/08AADfPAQAd3ktqYxe2CdLX3azEZfyZqErjx9G5f8UrbEnI/uuyf/Fk2Qjpv5Dc5UUdGmsp/3LG1PyJ7OVPe3e0OpOdoIflSfjJi/cuoOZp3LrRlPX5N0biYjxYn3+g989cFhTp4oaa3cfUEgIAIDP7JlNAryHTUycLG74zF+5dMzdEpncpOv5fPx19cZeflV2Hd3rMpOk2tz5T8pjx6/J/IhF7b6+neyT9IF0trNxVWuS1iSdO3ToUH6llT3sqQ51Y5gwWd7Ncybl5GZyKQ3JA3cfSJLmft8QNf4AAF8gAoCJkz0DoXWo1m29GuQ9MosmqyrxD/Itna8uzNzOto+Wycs92I3qvWkh+h9bWe33qLwUnpuYOPnpzWN3b7uZqHfu5k8oTx4bkPuwlIwE82J09eZcqw+PAAAA+GI98wHAcHuzv5UL3zZZj5s2JZ9REmfqc/ettZunypvJuknsSlK1OrNYnnzhj1L6b8zDvnVrHJX0sCOC4801/BVJH9z8XdC95wEAAPAle6ZLAUvS8vIH1z2GjxXih2bd/15fGP39Tol2hw4dypmsR5LSjNVu/b5+7dibklbcPcm6Xpmefi1372cfIYoAAADwhD3zAYCk9OVjI7+tz1/8nzcO+Nl5e91KjAVPvFeSKs38HcV+fp5a6r8z8250la6sXzgtvXZvIR8AAL5SCAAkPc6e+na9UJR7v5mlzz03uHpnWy1fn3MLH0tSEuOR/vH3d39ZYwUA4ItAAPCY8okNBllRabd6X8AwN9e0EC+arOmmXOrJCxMTJ3ue0lABAHgkAoDH1FXc5+7Bk+TqDs1em7vwUWq6JJdZ4vs2Qzr5xAcJAMBjIgB4DFNTp4oKdsDMYojJtQf1y2TDmy7f9qhc7LZf0vT0Z00IBADgiSAAeAy17sYLHpX36BvZtF19UL+Nq++vxdT+YGYxMfWX17t9T3KcAAA8rme+DsCjTE2dKtY6G6/IpJCEueWpYlPLD+4/mK9d3Ii9xW7is9uffrj25EYKAMDjIwB4OKt11l90s5wFddIYrz2qHv/c3FxD0htPaHwAAHwuLAE8RGXPC/0KOixJHlWz0L3+tMcEAMAXgRmABzN1uvslDUmSm3+8Of/h6iM+AwDA1wIzAA8yPZ1VtAGZRUnqs40/6UbZXgAAvvbsaQ/gq+10pjzAg6ZhAAABpklEQVSxcDC49W4sXDz7tEcDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMDT9f8BIvJhSKhxlM4AAAAASUVORK5CYII="},imageSize:512,minZoom:1,maxZoom:20,visible:!0,zIndex:9999,opacity:.7,map:t});t.layerResource.moveLayer(e.id,o.LAYER_LEVEL.BUILDING)}Object.defineProperty(e,"__esModule",{value:!0});var r=n(287),a=function(t){return t&&t.__esModule?t:{default:t}}(r),o=n(146);e.default=i},,,,,,function(t,e,n){n(983),n(922),n(924),n(923),n(926),n(928),n(933),n(927),n(925),n(935),n(934),n(930),n(931),n(929),n(921),n(932),n(936),n(937),n(888),n(890),n(889),n(939),n(938),n(909),n(919),n(920),n(910),n(911),n(912),n(913),n(914),n(915),n(916),n(917),n(918),n(892),n(893),n(894),n(895),n(896),n(897),n(898),n(899),n(900),n(901),n(902),n(903),n(904),n(905),n(906),n(907),n(908),n(970),n(975),n(982),n(973),n(965),n(966),n(971),n(976),n(978),n(961),n(962),n(963),n(964),n(967),n(968),n(969),n(972),n(974),n(977),n(979),n(980),n(981),n(883),n(885),n(884),n(887),n(886),n(872),n(870),n(876),n(873),n(879),n(881),n(869),n(875),n(866),n(880),n(864),n(878),n(877),n(871),n(874),n(863),n(865),n(868),n(867),n(882),n(469),n(954),n(581),n(959),n(582),n(955),n(956),n(957),n(958),n(580),n(891),n(960),n(995),n(996),n(984),n(985),n(990),n(993),n(994),n(988),n(991),n(989),n(992),n(986),n(987),n(940),n(941),n(942),n(943),n(944),n(947),n(945),n(946),n(948),n(949),n(950),n(951),n(953),n(952),t.exports=n(105)},function(t,e,n){n(997),t.exports=n(105).Array.flatMap},function(t,e,n){n(998),t.exports=n(105).Array.includes},function(t,e,n){n(999),t.exports=n(105).Object.entries},function(t,e,n){n(1e3),t.exports=n(105).Object.getOwnPropertyDescriptors},function(t,e,n){n(1001),t.exports=n(105).Object.values},function(t,e,n){"use strict";n(580),n(1002),t.exports=n(105).Promise.finally},function(t,e,n){n(1003),t.exports=n(105).String.padEnd},function(t,e,n){n(1004),t.exports=n(105).String.padStart},function(t,e,n){n(1006),t.exports=n(105).String.trimRight},function(t,e,n){n(1005),t.exports=n(105).String.trimLeft},function(t,e,n){n(1007),t.exports=n(467).f("asyncIterator")},,,,,,,function(t,e,n){var i=n(64),r=n(361),a=n(78)("species");t.exports=function(t){var e;return r(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!r(e.prototype)||(e=void 0),i(e)&&null===(e=e[a])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){"use strict";var i=n(62),r=Date.prototype.getTime,a=Date.prototype.toISOString,o=function(t){return t>9?t:"0"+t};t.exports=i(function(){return"0385-07-25T07:06:39.999Z"!=a.call(new Date(-5e13-1))})||!i(function(){a.call(new Date(NaN))})?function(){if(!isFinite(r.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),i=e<0?"-":e>9999?"+":"";return i+("00000"+Math.abs(e)).slice(i?-6:-4)+"-"+o(t.getUTCMonth()+1)+"-"+o(t.getUTCDate())+"T"+o(t.getUTCHours())+":"+o(t.getUTCMinutes())+":"+o(t.getUTCSeconds())+"."+(n>99?n:"0"+o(n))+"Z"}:a},function(t,e,n){"use strict";var i=n(61),r=n(261);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return r(i(this),"number"!=t)}},function(t,e,n){var i=n(275),r=n(363),a=n(336);t.exports=function(t){var e=i(t),n=r.f;if(n)for(var o,s=n(t),l=a.f,u=0;s.length>u;)l.call(t,o=s[u++])&&e.push(o);return e}},function(t,e,n){"use strict";function i(t,e,n,u,c,f,d,h){for(var p,v,m=c,g=0,_=!!d&&s(d,h,3);g<u;){if(g in n){if(p=_?_(n[g],g,e):n[g],v=!1,a(p)&&(v=p[l],v=void 0!==v?!!v:r(p)),v&&f>0)m=i(t,e,p,o(p.length),m,f-1)-1;else{if(m>=9007199254740991)throw TypeError();t[m]=p}m++}g++}return m}var r=n(361),a=n(64),o=n(88),s=n(239),l=n(78)("isConcatSpreadable");t.exports=i},function(t,e,n){t.exports=n(365)("native-function-to-string",Function.toString)},function(t,e,n){var i=n(457),r=Math.pow,a=r(2,-52),o=r(2,-23),s=r(2,127)*(2-o),l=r(2,-126),u=function(t){return t+1/a-1/a};t.exports=Math.fround||function(t){var e,n,r=Math.abs(t),c=i(t);return r<l?c*u(r/l/o)*l*o:(e=(1+o/a)*r,n=e-(e-r),n>s||n!=n?c*(1/0):c*n)}},function(t,e,n){var i=n(63),r=n(465).set,a=i.MutationObserver||i.WebKitMutationObserver,o=i.process,s=i.Promise,l="process"==n(253)(o);t.exports=function(){var t,e,n,u=function(){var i,r;for(l&&(i=o.domain)&&i.exit();t;){r=t.fn,t=t.next;try{r()}catch(i){throw t?n():e=void 0,i}}e=void 0,i&&i.enter()};if(l)n=function(){o.nextTick(u)};else if(!a||i.navigator&&i.navigator.standalone)if(s&&s.resolve){var c=s.resolve(void 0);n=function(){c.then(u)}}else n=function(){r.call(i,u)};else{var f=!0,d=document.createTextNode("");new a(u).observe(d,{characterData:!0}),n=function(){d.data=f=!f}}return function(i){var r={fn:i,next:void 0};e&&(e.next=r),t||(t=r,n()),e=r}}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var i=n(11);i(i.P,"Array",{copyWithin:n(553)}),n(270)("copyWithin")},function(t,e,n){"use strict";var i=n(11),r=n(238)(4);i(i.P+i.F*!n(232)([].every,!0),"Array",{every:function(t){return r(this,t,arguments[1])}})},function(t,e,n){var i=n(11);i(i.P,"Array",{fill:n(446)}),n(270)("fill")},function(t,e,n){"use strict";var i=n(11),r=n(238)(2);i(i.P+i.F*!n(232)([].filter,!0),"Array",{filter:function(t){return r(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(11),r=n(238)(6),a="findIndex",o=!0;a in[]&&Array(1)[a](function(){o=!1}),i(i.P+i.F*o,"Array",{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(270)(a)},function(t,e,n){"use strict";var i=n(11),r=n(238)(5),a=!0;"find"in[]&&Array(1).find(function(){a=!1}),i(i.P+i.F*a,"Array",{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(270)("find")},function(t,e,n){"use strict";var i=n(11),r=n(238)(0),a=n(232)([].forEach,!0);i(i.P+i.F*!a,"Array",{forEach:function(t){return r(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(239),r=n(11),a=n(143),o=n(562),s=n(453),l=n(88),u=n(447),c=n(468);r(r.S+r.F*!n(362)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,r,f,d=a(t),h="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,m=void 0!==v,g=0,_=c(d);if(m&&(v=i(v,p>2?arguments[2]:void 0,2)),void 0==_||h==Array&&s(_))for(e=l(d.length),n=new h(e);e>g;g++)u(n,g,m?v(d[g],g):d[g]);else for(f=_.call(d),n=new h;!(r=f.next()).done;g++)u(n,g,m?o(f,v,[r.value,g],!0):r.value);return n.length=g,n}})},function(t,e,n){"use strict";var i=n(11),r=n(356)(!1),a=[].indexOf,o=!!a&&1/[1].indexOf(1,-0)<0;i(i.P+i.F*(o||!n(232)(a)),"Array",{indexOf:function(t){return o?a.apply(this,arguments)||0:r(this,t,arguments[1])}})},function(t,e,n){var i=n(11);i(i.S,"Array",{isArray:n(361)})},function(t,e,n){"use strict";var i=n(11),r=n(221),a=[].join;i(i.P+i.F*(n(335)!=Object||!n(232)(a)),"Array",{join:function(t){return a.call(r(this),void 0===t?",":t)}})},function(t,e,n){"use strict";var i=n(11),r=n(221),a=n(242),o=n(88),s=[].lastIndexOf,l=!!s&&1/[1].lastIndexOf(1,-0)<0;i(i.P+i.F*(l||!n(232)(s)),"Array",{lastIndexOf:function(t){if(l)return s.apply(this,arguments)||0;var e=r(this),n=o(e.length),i=n-1;for(arguments.length>1&&(i=Math.min(i,a(arguments[1]))),i<0&&(i=n+i);i>=0;i--)if(i in e&&e[i]===t)return i||0;return-1}})},function(t,e,n){"use strict";var i=n(11),r=n(238)(1);i(i.P+i.F*!n(232)([].map,!0),"Array",{map:function(t){return r(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(11),r=n(447);i(i.S+i.F*n(62)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)r(n,t,arguments[t++]);return n.length=e,n}})},function(t,e,n){"use strict";var i=n(11),r=n(554);i(i.P+i.F*!n(232)([].reduceRight,!0),"Array",{reduceRight:function(t){return r(this,t,arguments.length,arguments[1],!0)}})},function(t,e,n){"use strict";var i=n(11),r=n(554);i(i.P+i.F*!n(232)([].reduce,!0),"Array",{reduce:function(t){return r(this,t,arguments.length,arguments[1],!1)}})},function(t,e,n){"use strict";var i=n(11),r=n(451),a=n(253),o=n(277),s=n(88),l=[].slice;i(i.P+i.F*n(62)(function(){r&&l.call(r)}),"Array",{slice:function(t,e){var n=s(this.length),i=a(this);if(e=void 0===e?n:e,"Array"==i)return l.call(this,t,e);for(var r=o(t,n),u=o(e,n),c=s(u-r),f=new Array(c),d=0;d<c;d++)f[d]="String"==i?this.charAt(r+d):this[r+d];return f}})},function(t,e,n){"use strict";var i=n(11),r=n(238)(3);i(i.P+i.F*!n(232)([].some,!0),"Array",{some:function(t){return r(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(11),r=n(237),a=n(143),o=n(62),s=[].sort,l=[1,2,3];i(i.P+i.F*(o(function(){l.sort(void 0)})||!o(function(){l.sort(null)})||!n(232)(s)),"Array",{sort:function(t){return void 0===t?s.call(a(this)):s.call(a(this),r(t))}})},function(t,e,n){n(296)("Array")},function(t,e,n){var i=n(11);i(i.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,n){var i=n(11),r=n(855);i(i.P+i.F*(Date.prototype.toISOString!==r),"Date",{toISOString:r})},function(t,e,n){"use strict";var i=n(11),r=n(143),a=n(261);i(i.P+i.F*n(62)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=r(this),n=a(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},function(t,e,n){var i=n(78)("toPrimitive"),r=Date.prototype;i in r||n(220)(r,i,n(856))},function(t,e,n){var i=Date.prototype,r=i.toString,a=i.getTime;new Date(NaN)+""!="Invalid Date"&&n(211)(i,"toString",function(){var t=a.call(this);return t===t?r.call(this):"Invalid Date"})},function(t,e,n){var i=n(11);i(i.P,"Function",{bind:n(556)})},function(t,e,n){"use strict";var i=n(64),r=n(274),a=n(78)("hasInstance"),o=Function.prototype;a in o||n(107).f(o,a,{value:function(t){if("function"!=typeof this||!i(t))return!1;if(!i(this.prototype))return t instanceof this;for(;t=r(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,n){var i=n(107).f,r=Function.prototype,a=/^\s*function ([^ (]*)/;"name"in r||n(106)&&i(r,"name",{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(t){return""}}})},function(t,e,n){"use strict";var i=n(557),r=n(279);t.exports=n(357)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=i.getEntry(r(this,"Map"),t);return e&&e.v},set:function(t,e){return i.def(r(this,"Map"),0===t?0:t,e)}},i,!0)},function(t,e,n){var i=n(11),r=n(565),a=Math.sqrt,o=Math.acosh;i(i.S+i.F*!(o&&710==Math.floor(o(Number.MAX_VALUE))&&o(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:r(t-1+a(t-1)*a(t+1))}})},function(t,e,n){function i(t){return isFinite(t=+t)&&0!=t?t<0?-i(-t):Math.log(t+Math.sqrt(t*t+1)):t}var r=n(11),a=Math.asinh;r(r.S+r.F*!(a&&1/a(0)>0),"Math",{asinh:i})},function(t,e,n){var i=n(11),r=Math.atanh;i(i.S+i.F*!(r&&1/r(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,n){var i=n(11),r=n(457);i(i.S,"Math",{cbrt:function(t){return r(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e,n){var i=n(11);i(i.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,n){var i=n(11),r=Math.exp;i(i.S,"Math",{cosh:function(t){return(r(t=+t)+r(-t))/2}})},function(t,e,n){var i=n(11),r=n(456);i(i.S+i.F*(r!=Math.expm1),"Math",{expm1:r})},function(t,e,n){var i=n(11);i(i.S,"Math",{fround:n(860)})},function(t,e,n){var i=n(11),r=Math.abs;i(i.S,"Math",{hypot:function(t,e){for(var n,i,a=0,o=0,s=arguments.length,l=0;o<s;)n=r(arguments[o++]),l<n?(i=l/n,a=a*i*i+1,l=n):n>0?(i=n/l,a+=i*i):a+=n;return l===1/0?1/0:l*Math.sqrt(a)}})},function(t,e,n){var i=n(11),r=Math.imul;i(i.S+i.F*n(62)(function(){return-5!=r(4294967295,5)||2!=r.length}),"Math",{imul:function(t,e){var n=+t,i=+e,r=65535&n,a=65535&i;return 0|r*a+((65535&n>>>16)*a+r*(65535&i>>>16)<<16>>>0)}})},function(t,e,n){var i=n(11);i(i.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,e,n){var i=n(11);i(i.S,"Math",{log1p:n(565)})},function(t,e,n){var i=n(11);i(i.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,n){var i=n(11);i(i.S,"Math",{sign:n(457)})},function(t,e,n){var i=n(11),r=n(456),a=Math.exp;i(i.S+i.F*n(62)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(r(t)-r(-t))/2:(a(t-1)-a(-t-1))*(Math.E/2)}})},function(t,e,n){var i=n(11),r=n(456),a=Math.exp;i(i.S,"Math",{tanh:function(t){var e=r(t=+t),n=r(-t);return e==1/0?1:n==1/0?-1:(e-n)/(a(t)+a(-t))}})},function(t,e,n){var i=n(11);i(i.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,n){"use strict";var i=n(63),r=n(219),a=n(253),o=n(452),s=n(261),l=n(62),u=n(273).f,c=n(240).f,f=n(107).f,d=n(298).trim,h=i.Number,p=h,v=h.prototype,m="Number"==a(n(272)(v)),g="trim"in String.prototype,_=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){e=g?e.trim():d(e,3);var n,i,r,a=e.charCodeAt(0);if(43===a||45===a){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===a){switch(e.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+e}for(var o,l=e.slice(2),u=0,c=l.length;u<c;u++)if((o=l.charCodeAt(u))<48||o>r)return NaN;return parseInt(l,i)}}return+e};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof h&&(m?l(function(){v.valueOf.call(n)}):"Number"!=a(n))?o(new p(_(e)),n,h):_(e)};for(var y,x=n(106)?u(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),b=0;x.length>b;b++)r(p,y=x[b])&&!r(h,y)&&f(h,y,c(p,y));h.prototype=v,v.constructor=h,n(211)(i,"Number",h)}},function(t,e,n){var i=n(11);i(i.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,n){var i=n(11),r=n(63).isFinite;i(i.S,"Number",{isFinite:function(t){return"number"==typeof t&&r(t)}})},function(t,e,n){var i=n(11);i(i.S,"Number",{isInteger:n(561)})},function(t,e,n){var i=n(11);i(i.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){var i=n(11),r=n(561),a=Math.abs;i(i.S,"Number",{isSafeInteger:function(t){return r(t)&&a(t)<=9007199254740991}})},function(t,e,n){var i=n(11);i(i.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){var i=n(11);i(i.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,n){var i=n(11),r=n(573);i(i.S+i.F*(Number.parseFloat!=r),"Number",{parseFloat:r})},function(t,e,n){var i=n(11),r=n(574);i(i.S+i.F*(Number.parseInt!=r),"Number",{parseInt:r})},function(t,e,n){"use strict";var i=n(11),r=n(242),a=n(552),o=n(463),s=1..toFixed,l=Math.floor,u=[0,0,0,0,0,0],c="Number.toFixed: incorrect invocation!",f=function(t,e){for(var n=-1,i=e;++n<6;)i+=t*u[n],u[n]=i%1e7,i=l(i/1e7)},d=function(t){for(var e=6,n=0;--e>=0;)n+=u[e],u[e]=l(n/t),n=n%t*1e7},h=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==u[t]){var n=String(u[t]);e=""===e?n:e+o.call("0",7-n.length)+n}return e},p=function(t,e,n){return 0===e?n:e%2==1?p(t,e-1,n*t):p(t*t,e/2,n)},v=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e};i(i.P+i.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(62)(function(){s.call({})})),"Number",{toFixed:function(t){var e,n,i,s,l=a(this,c),u=r(t),m="",g="0";if(u<0||u>20)throw RangeError(c);if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(m="-",l=-l),l>1e-21)if(e=v(l*p(2,69,1))-69,n=e<0?l*p(2,-e,1):l/p(2,e,1),n*=4503599627370496,(e=52-e)>0){for(f(0,n),i=u;i>=7;)f(1e7,0),i-=7;for(f(p(10,i,1),0),i=e-1;i>=23;)d(1<<23),i-=23;d(1<<i),f(1,1),d(2),g=h()}else f(0,n),f(1<<-e,0),g=h()+o.call("0",u);return u>0?(s=g.length,g=m+(s<=u?"0."+o.call("0",u-s)+g:g.slice(0,s-u)+"."+g.slice(s-u))):g=m+g,g}})},function(t,e,n){"use strict";var i=n(11),r=n(62),a=n(552),o=1..toPrecision;i(i.P+i.F*(r(function(){return"1"!==o.call(1,void 0)})||!r(function(){o.call({})})),"Number",{toPrecision:function(t){var e=a(this,"Number#toPrecision: incorrect invocation!");return void 0===t?o.call(e):o.call(e,t)}})},function(t,e,n){var i=n(11);i(i.S+i.F,"Object",{assign:n(567)})},function(t,e,n){var i=n(11);i(i.S,"Object",{create:n(272)})},function(t,e,n){var i=n(11);i(i.S+i.F*!n(106),"Object",{defineProperties:n(568)})},function(t,e,n){var i=n(11);i(i.S+i.F*!n(106),"Object",{defineProperty:n(107).f})},function(t,e,n){var i=n(64),r=n(260).onFreeze;n(241)("freeze",function(t){return function(e){return t&&i(e)?t(r(e)):e}})},function(t,e,n){var i=n(221),r=n(240).f;n(241)("getOwnPropertyDescriptor",function(){return function(t,e){return r(i(t),e)}})},function(t,e,n){n(241)("getOwnPropertyNames",function(){return n(569).f})},function(t,e,n){var i=n(143),r=n(274);n(241)("getPrototypeOf",function(){return function(t){return r(i(t))}})},function(t,e,n){var i=n(64);n(241)("isExtensible",function(t){return function(e){return!!i(e)&&(!t||t(e))}})},function(t,e,n){var i=n(64);n(241)("isFrozen",function(t){return function(e){return!i(e)||!!t&&t(e)}})},function(t,e,n){var i=n(64);n(241)("isSealed",function(t){return function(e){return!i(e)||!!t&&t(e)}})},function(t,e,n){var i=n(11);i(i.S,"Object",{is:n(576)})},function(t,e,n){var i=n(143),r=n(275);n(241)("keys",function(){return function(t){return r(i(t))}})},function(t,e,n){var i=n(64),r=n(260).onFreeze;n(241)("preventExtensions",function(t){return function(e){return t&&i(e)?t(r(e)):e}})},function(t,e,n){var i=n(64),r=n(260).onFreeze;n(241)("seal",function(t){return function(e){return t&&i(e)?t(r(e)):e}})},function(t,e,n){var i=n(11);i(i.S,"Object",{setPrototypeOf:n(459).set})},function(t,e,n){"use strict";var i=n(334),r={};r[n(78)("toStringTag")]="z",r+""!="[object z]"&&n(211)(Object.prototype,"toString",function(){return"[object "+i(this)+"]"},!0)},function(t,e,n){var i=n(11),r=n(573);i(i.G+i.F*(parseFloat!=r),{parseFloat:r})},function(t,e,n){var i=n(11),r=n(574);i(i.G+i.F*(parseInt!=r),{parseInt:r})},function(t,e,n){var i=n(11),r=n(237),a=n(61),o=(n(63).Reflect||{}).apply,s=Function.apply;i(i.S+i.F*!n(62)(function(){o(function(){})}),"Reflect",{apply:function(t,e,n){var i=r(t),l=a(n);return o?o(i,e,l):s.call(i,e,l)}})},function(t,e,n){var i=n(11),r=n(272),a=n(237),o=n(61),s=n(64),l=n(62),u=n(556),c=(n(63).Reflect||{}).construct,f=l(function(){function t(){}return!(c(function(){},[],t)instanceof t)}),d=!l(function(){c(function(){})});i(i.S+i.F*(f||d),"Reflect",{construct:function(t,e){a(t),o(e);var n=arguments.length<3?t:a(arguments[2]);if(d&&!f)return c(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var i=[null];return i.push.apply(i,e),new(u.apply(t,i))}var l=n.prototype,h=r(s(l)?l:Object.prototype),p=Function.apply.call(t,h,e);return s(p)?p:h}})},function(t,e,n){var i=n(107),r=n(11),a=n(61),o=n(261);r(r.S+r.F*n(62)(function(){Reflect.defineProperty(i.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,n){a(t),e=o(e,!0),a(n);try{return i.f(t,e,n),!0}catch(t){return!1}}})},function(t,e,n){var i=n(11),r=n(240).f,a=n(61);i(i.S,"Reflect",{deleteProperty:function(t,e){var n=r(a(t),e);return!(n&&!n.configurable)&&delete t[e]}})},function(t,e,n){"use strict";var i=n(11),r=n(61),a=function(t){this._t=r(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};n(563)(a,"Object",function(){var t,e=this,n=e._k;do{if(e._i>=n.length)return{value:void 0,done:!0}}while(!((t=n[e._i++])in e._t));return{value:t,done:!1}}),i(i.S,"Reflect",{enumerate:function(t){return new a(t)}})},function(t,e,n){var i=n(240),r=n(11),a=n(61);r(r.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return i.f(a(t),e)}})},function(t,e,n){var i=n(11),r=n(274),a=n(61);i(i.S,"Reflect",{getPrototypeOf:function(t){return r(a(t))}})},function(t,e,n){function i(t,e){var n,s,c=arguments.length<3?t:arguments[2];return u(t)===c?t[e]:(n=r.f(t,e))?o(n,"value")?n.value:void 0!==n.get?n.get.call(c):void 0:l(s=a(t))?i(s,e,c):void 0}var r=n(240),a=n(274),o=n(219),s=n(11),l=n(64),u=n(61);s(s.S,"Reflect",{get:i})},function(t,e,n){var i=n(11);i(i.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,n){var i=n(11),r=n(61),a=Object.isExtensible;i(i.S,"Reflect",{isExtensible:function(t){return r(t),!a||a(t)}})},function(t,e,n){var i=n(11);i(i.S,"Reflect",{ownKeys:n(572)})},function(t,e,n){var i=n(11),r=n(61),a=Object.preventExtensions;i(i.S,"Reflect",{preventExtensions:function(t){r(t);try{return a&&a(t),!0}catch(t){return!1}}})},function(t,e,n){var i=n(11),r=n(459);r&&i(i.S,"Reflect",{setPrototypeOf:function(t,e){r.check(t,e);try{return r.set(t,e),!0}catch(t){return!1}}})},function(t,e,n){function i(t,e,n){var l,d,h=arguments.length<4?t:arguments[3],p=a.f(c(t),e);if(!p){if(f(d=o(t)))return i(d,e,n,h);p=u(0)}if(s(p,"value")){if(!1===p.writable||!f(h))return!1;if(l=a.f(h,e)){if(l.get||l.set||!1===l.writable)return!1;l.value=n,r.f(h,e,l)}else r.f(h,e,u(0,n));return!0}return void 0!==p.set&&(p.set.call(h,n),!0)}var r=n(107),a=n(240),o=n(274),s=n(219),l=n(11),u=n(276),c=n(61),f=n(64);l(l.S,"Reflect",{set:i})},function(t,e,n){var i=n(63),r=n(452),a=n(107).f,o=n(273).f,s=n(454),l=n(359),u=i.RegExp,c=u,f=u.prototype,d=/a/g,h=/a/g,p=new u(d)!==d;if(n(106)&&(!p||n(62)(function(){return h[n(78)("match")]=!1,u(d)!=d||u(h)==h||"/a/i"!=u(d,"i")}))){u=function(t,e){var n=this instanceof u,i=s(t),a=void 0===e;return!n&&i&&t.constructor===u&&a?t:r(p?new c(i&&!a?t.source:t,e):c((i=t instanceof u)?t.source:t,i&&a?l.call(t):e),n?this:f,u)};for(var v=o(c),m=0;v.length>m;)!function(t){t in u||a(u,t,{configurable:!0,get:function(){return c[t]},set:function(e){c[t]=e}})}(v[m++]);f.constructor=u,u.prototype=f,n(211)(i,"RegExp",u)}n(296)("RegExp")},function(t,e,n){"use strict";var i=n(61),r=n(88),a=n(445),o=n(364);n(358)("match",1,function(t,e,n,s){return[function(n){var i=t(this),r=void 0==n?void 0:n[e];return void 0!==r?r.call(n,i):new RegExp(n)[e](String(i))},function(t){var e=s(n,t,this);if(e.done)return e.value;var l=i(t),u=String(this);if(!l.global)return o(l,u);var c=l.unicode;l.lastIndex=0;for(var f,d=[],h=0;null!==(f=o(l,u));){var p=String(f[0]);d[h]=p,""===p&&(l.lastIndex=a(u,r(l.lastIndex),c)),h++}return 0===h?null:d}]})},function(t,e,n){"use strict";var i=n(61),r=n(143),a=n(88),o=n(242),s=n(445),l=n(364),u=Math.max,c=Math.min,f=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,h=/\$([$&`']|\d\d?)/g,p=function(t){return void 0===t?t:String(t)};n(358)("replace",2,function(t,e,n,v){function m(t,e,i,a,o,s){var l=i+t.length,u=a.length,c=h;return void 0!==o&&(o=r(o),c=d),n.call(s,c,function(n,r){var s;switch(r.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,i);case"'":return e.slice(l);case"<":s=o[r.slice(1,-1)];break;default:var c=+r;if(0===c)return n;if(c>u){var d=f(c/10);return 0===d?n:d<=u?void 0===a[d-1]?r.charAt(1):a[d-1]+r.charAt(1):n}s=a[c-1]}return void 0===s?"":s})}return[function(i,r){var a=t(this),o=void 0==i?void 0:i[e];return void 0!==o?o.call(i,a,r):n.call(String(a),i,r)},function(t,e){var r=v(n,t,this,e);if(r.done)return r.value;var f=i(t),d=String(this),h="function"==typeof e;h||(e=String(e));var g=f.global;if(g){var _=f.unicode;f.lastIndex=0}for(var y=[];;){var x=l(f,d);if(null===x)break;if(y.push(x),!g)break;""===String(x[0])&&(f.lastIndex=s(d,a(f.lastIndex),_))}for(var b="",S=0,w=0;w<y.length;w++){x=y[w];for(var E=String(x[0]),A=u(c(o(x.index),d.length),0),T=[],M=1;M<x.length;M++)T.push(p(x[M]));var I=x.groups;if(h){var P=[E].concat(T,A,d);void 0!==I&&P.push(I);var k=String(e.apply(void 0,P))}else k=m(E,d,A,T,I,e);A>=S&&(b+=d.slice(S,A)+k,S=A+E.length)}return b+d.slice(S)}]})},function(t,e,n){"use strict";var i=n(61),r=n(576),a=n(364);n(358)("search",1,function(t,e,n,o){return[function(n){var i=t(this),r=void 0==n?void 0:n[e];return void 0!==r?r.call(n,i):new RegExp(n)[e](String(i))},function(t){var e=o(n,t,this);if(e.done)return e.value;var s=i(t),l=String(this),u=s.lastIndex;r(u,0)||(s.lastIndex=0);var c=a(s,l);return r(s.lastIndex,u)||(s.lastIndex=u),null===c?-1:c.index}]})},function(t,e,n){"use strict";var i=n(454),r=n(61),a=n(337),o=n(445),s=n(88),l=n(364),u=n(458),c=n(62),f=Math.min,d=[].push,h="length",p=!c(function(){RegExp(4294967295,"y")});n(358)("split",2,function(t,e,n,c){var v;return v="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[h]||2!="ab".split(/(?:ab)*/)[h]||4!=".".split(/(.?)(.?)/)[h]||".".split(/()()/)[h]>1||"".split(/.?/)[h]?function(t,e){var r=String(this);if(void 0===t&&0===e)return[];if(!i(t))return n.call(r,t,e);for(var a,o,s,l=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,p=void 0===e?4294967295:e>>>0,v=new RegExp(t.source,c+"g");(a=u.call(v,r))&&!((o=v.lastIndex)>f&&(l.push(r.slice(f,a.index)),a[h]>1&&a.index<r[h]&&d.apply(l,a.slice(1)),s=a[0][h],f=o,l[h]>=p));)v.lastIndex===a.index&&v.lastIndex++;return f===r[h]?!s&&v.test("")||l.push(""):l.push(r.slice(f)),l[h]>p?l.slice(0,p):l}:"0".split(void 0,0)[h]?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,i){var r=t(this),a=void 0==n?void 0:n[e];return void 0!==a?a.call(n,r,i):v.call(String(r),n,i)},function(t,e){var i=c(v,t,this,e,v!==n);if(i.done)return i.value;var u=r(t),d=String(this),h=a(u,RegExp),m=u.unicode,g=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(p?"y":"g"),_=new h(p?u:"^(?:"+u.source+")",g),y=void 0===e?4294967295:e>>>0;if(0===y)return[];if(0===d.length)return null===l(_,d)?[d]:[];for(var x=0,b=0,S=[];b<d.length;){_.lastIndex=p?b:0;var w,E=l(_,p?d:d.slice(b));if(null===E||(w=f(s(_.lastIndex+(p?0:b)),d.length))===x)b=o(d,b,m);else{if(S.push(d.slice(x,b)),S.length===y)return S;for(var A=1;A<=E.length-1;A++)if(S.push(E[A]),S.length===y)return S;b=x=w}}return S.push(d.slice(x)),S}]})},function(t,e,n){"use strict";n(582);var i=n(61),r=n(359),a=n(106),o=/./.toString,s=function(t){n(211)(RegExp.prototype,"toString",t,!0)};n(62)(function(){return"/a/b"!=o.call({source:"a",flags:"b"})})?s(function(){var t=i(this);return"/".concat(t.source,"/","flags"in t?t.flags:!a&&t instanceof RegExp?r.call(t):void 0)}):"toString"!=o.name&&s(function(){return o.call(this)})},function(t,e,n){"use strict";var i=n(557),r=n(279);t.exports=n(357)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(r(this,"Set"),t=0===t?0:t,t)}},i)},function(t,e,n){"use strict";n(212)("anchor",function(t){return function(e){return t(this,"a","name",e)}})},function(t,e,n){"use strict";n(212)("big",function(t){return function(){return t(this,"big","","")}})},function(t,e,n){"use strict";n(212)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,e,n){"use strict";n(212)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,e,n){"use strict";var i=n(11),r=n(461)(!1);i(i.P,"String",{codePointAt:function(t){return r(this,t)}})},function(t,e,n){"use strict";var i=n(11),r=n(88),a=n(462),o="".endsWith;i(i.P+i.F*n(450)("endsWith"),"String",{endsWith:function(t){var e=a(this,t,"endsWith"),n=arguments.length>1?arguments[1]:void 0,i=r(e.length),s=void 0===n?i:Math.min(r(n),i),l=String(t);return o?o.call(e,l,s):e.slice(s-l.length,s)===l}})},function(t,e,n){"use strict";n(212)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,e,n){"use strict";n(212)("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},function(t,e,n){"use strict";n(212)("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},function(t,e,n){var i=n(11),r=n(277),a=String.fromCharCode,o=String.fromCodePoint;i(i.S+i.F*(!!o&&1!=o.length),"String",{fromCodePoint:function(t){for(var e,n=[],i=arguments.length,o=0;i>o;){if(e=+arguments[o++],r(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?a(e):a(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}})},function(t,e,n){"use strict";var i=n(11),r=n(462);i(i.P+i.F*n(450)("includes"),"String",{includes:function(t){return!!~r(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";n(212)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,e,n){"use strict";var i=n(461)(!0);n(455)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){"use strict";n(212)("link",function(t){return function(e){return t(this,"a","href",e)}})},function(t,e,n){var i=n(11),r=n(221),a=n(88);i(i.S,"String",{raw:function(t){for(var e=r(t.raw),n=a(e.length),i=arguments.length,o=[],s=0;n>s;)o.push(String(e[s++])),s<i&&o.push(String(arguments[s]));return o.join("")}})},function(t,e,n){var i=n(11);i(i.P,"String",{repeat:n(463)})},function(t,e,n){"use strict";n(212)("small",function(t){return function(){return t(this,"small","","")}})},function(t,e,n){"use strict";var i=n(11),r=n(88),a=n(462),o="".startsWith;i(i.P+i.F*n(450)("startsWith"),"String",{startsWith:function(t){var e=a(this,t,"startsWith"),n=r(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),i=String(t);return o?o.call(e,i,n):e.slice(n,n+i.length)===i}})},function(t,e,n){"use strict";n(212)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,e,n){"use strict";n(212)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,e,n){"use strict";n(212)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,e,n){"use strict";n(298)("trim",function(t){return function(){return t(this,3)}})},function(t,e,n){"use strict";var i=n(63),r=n(219),a=n(106),o=n(11),s=n(211),l=n(260).KEY,u=n(62),c=n(365),f=n(297),d=n(278),h=n(78),p=n(467),v=n(579),m=n(857),g=n(361),_=n(61),y=n(64),x=n(143),b=n(221),S=n(261),w=n(276),E=n(272),A=n(569),T=n(240),M=n(363),I=n(107),P=n(275),k=T.f,L=I.f,C=A.f,R=i.Symbol,D=i.JSON,N=D&&D.stringify,B=h("_hidden"),O=h("toPrimitive"),F={}.propertyIsEnumerable,z=c("symbol-registry"),V=c("symbols"),U=c("op-symbols"),G=Object.prototype,H="function"==typeof R&&!!M.f,Y=i.QObject,j=!Y||!Y.prototype||!Y.prototype.findChild,W=a&&u(function(){return 7!=E(L({},"a",{get:function(){return L(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=k(G,e);i&&delete G[e],L(t,e,n),i&&t!==G&&L(G,e,i)}:L,X=function(t){var e=V[t]=E(R.prototype);return e._k=t,e},Z=H&&"symbol"==typeof R.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof R},q=function(t,e,n){return t===G&&q(U,e,n),_(t),e=S(e,!0),_(n),r(V,e)?(n.enumerable?(r(t,B)&&t[B][e]&&(t[B][e]=!1),n=E(n,{enumerable:w(0,!1)})):(r(t,B)||L(t,B,w(1,{})),t[B][e]=!0),W(t,e,n)):L(t,e,n)},Q=function(t,e){_(t);for(var n,i=m(e=b(e)),r=0,a=i.length;a>r;)q(t,n=i[r++],e[n]);return t},J=function(t,e){return void 0===e?E(t):Q(E(t),e)},K=function(t){var e=F.call(this,t=S(t,!0));return!(this===G&&r(V,t)&&!r(U,t))&&(!(e||!r(this,t)||!r(V,t)||r(this,B)&&this[B][t])||e)},$=function(t,e){if(t=b(t),e=S(e,!0),t!==G||!r(V,e)||r(U,e)){var n=k(t,e);return!n||!r(V,e)||r(t,B)&&t[B][e]||(n.enumerable=!0),n}},tt=function(t){for(var e,n=C(b(t)),i=[],a=0;n.length>a;)r(V,e=n[a++])||e==B||e==l||i.push(e);return i},et=function(t){for(var e,n=t===G,i=C(n?U:b(t)),a=[],o=0;i.length>o;)!r(V,e=i[o++])||n&&!r(G,e)||a.push(V[e]);return a};H||(R=function(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(n){this===G&&e.call(U,n),r(this,B)&&r(this[B],t)&&(this[B][t]=!1),W(this,t,w(1,n))};return a&&j&&W(G,t,{configurable:!0,set:e}),X(t)},s(R.prototype,"toString",function(){return this._k}),T.f=$,I.f=q,n(273).f=A.f=tt,n(336).f=K,M.f=et,a&&!n(271)&&s(G,"propertyIsEnumerable",K,!0),p.f=function(t){return X(h(t))}),o(o.G+o.W+o.F*!H,{Symbol:R});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),it=0;nt.length>it;)h(nt[it++]);for(var rt=P(h.store),at=0;rt.length>at;)v(rt[at++]);o(o.S+o.F*!H,"Symbol",{for:function(t){return r(z,t+="")?z[t]:z[t]=R(t)},keyFor:function(t){if(!Z(t))throw TypeError(t+" is not a symbol!");for(var e in z)if(z[e]===t)return e},useSetter:function(){j=!0},useSimple:function(){j=!1}}),o(o.S+o.F*!H,"Object",{create:J,defineProperty:q,defineProperties:Q,getOwnPropertyDescriptor:$,getOwnPropertyNames:tt,getOwnPropertySymbols:et});var ot=u(function(){M.f(1)});o(o.S+o.F*ot,"Object",{getOwnPropertySymbols:function(t){return M.f(x(t))}}),D&&o(o.S+o.F*(!H||u(function(){var t=R();return"[null]"!=N([t])||"{}"!=N({a:t})||"{}"!=N(Object(t))})),"JSON",{stringify:function(t){for(var e,n,i=[t],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=e=i[1],(y(e)||void 0!==t)&&!Z(t))return g(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Z(e))return e}),i[1]=e,N.apply(D,i)}}),R.prototype[O]||n(220)(R.prototype,O,R.prototype.valueOf),f(R,"Symbol"),f(Math,"Math",!0),f(i.JSON,"JSON",!0)},function(t,e,n){"use strict";var i=n(11),r=n(366),a=n(466),o=n(61),s=n(277),l=n(88),u=n(64),c=n(63).ArrayBuffer,f=n(337),d=a.ArrayBuffer,h=a.DataView,p=r.ABV&&c.isView,v=d.prototype.slice,m=r.VIEW;i(i.G+i.W+i.F*(c!==d),{ArrayBuffer:d}),i(i.S+i.F*!r.CONSTR,"ArrayBuffer",{isView:function(t){return p&&p(t)||u(t)&&m in t}}),i(i.P+i.U+i.F*n(62)(function(){return!new d(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(t,e){if(void 0!==v&&void 0===e)return v.call(o(this),t);for(var n=o(this).byteLength,i=s(t,n),r=s(void 0===e?n:e,n),a=new(f(this,d))(l(r-i)),u=new h(this),c=new h(a),p=0;i<r;)c.setUint8(p++,u.getUint8(i++));return a}}),n(296)("ArrayBuffer")},function(t,e,n){var i=n(11);i(i.G+i.W+i.F*!n(366).ABV,{DataView:n(466).DataView})},function(t,e,n){n(255)("Float32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(255)("Float64",8,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(255)("Int16",2,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(255)("Int32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(255)("Int8",1,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(255)("Uint16",2,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(255)("Uint32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(255)("Uint8",1,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(255)("Uint8",1,function(t){return function(e,n,i){return t(this,e,n,i)}},!0)},function(t,e,n){"use strict";var i,r=n(63),a=n(238)(0),o=n(211),s=n(260),l=n(567),u=n(558),c=n(64),f=n(279),d=n(279),h=!r.ActiveXObject&&"ActiveXObject"in r,p=s.getWeak,v=Object.isExtensible,m=u.ufstore,g=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},_={get:function(t){if(c(t)){var e=p(t);return!0===e?m(f(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return u.def(f(this,"WeakMap"),t,e)}},y=t.exports=n(357)("WeakMap",g,_,u,!0,!0);d&&h&&(i=u.getConstructor(g,"WeakMap"),l(i.prototype,_),s.NEED=!0,a(["delete","has","get","set"],function(t){var e=y.prototype,n=e[t];o(e,t,function(e,r){if(c(e)&&!v(e)){this._f||(this._f=new i);var a=this._f[t](e,r);return"set"==t?this:a}return n.call(this,e,r)})}))},function(t,e,n){"use strict";var i=n(558),r=n(279);n(357)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(r(this,"WeakSet"),t,!0)}},i,!1,!0)},function(t,e,n){"use strict";var i=n(11),r=n(858),a=n(143),o=n(88),s=n(237),l=n(555);i(i.P,"Array",{flatMap:function(t){var e,n,i=a(this);return s(t),e=o(i.length),n=l(i,0),r(n,i,i,e,0,1,t,arguments[1]),n}}),n(270)("flatMap")},function(t,e,n){"use strict";var i=n(11),r=n(356)(!0);i(i.P,"Array",{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(270)("includes")},function(t,e,n){var i=n(11),r=n(571)(!0);i(i.S,"Object",{entries:function(t){return r(t)}})},function(t,e,n){var i=n(11),r=n(572),a=n(221),o=n(240),s=n(447);i(i.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,i=a(t),l=o.f,u=r(i),c={},f=0;u.length>f;)void 0!==(n=l(i,e=u[f++]))&&s(c,e,n);return c}})},function(t,e,n){var i=n(11),r=n(571)(!1);i(i.S,"Object",{values:function(t){return r(t)}})},function(t,e,n){"use strict";var i=n(11),r=n(105),a=n(63),o=n(337),s=n(575);i(i.P+i.R,"Promise",{finally:function(t){var e=o(this,r.Promise||a.Promise),n="function"==typeof t;return this.then(n?function(n){return s(e,t()).then(function(){return n})}:t,n?function(n){return s(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){"use strict";var i=n(11),r=n(577),a=n(367),o=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(a);i(i.P+i.F*o,"String",{padEnd:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,n){"use strict";var i=n(11),r=n(577),a=n(367),o=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(a);i(i.P+i.F*o,"String",{padStart:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,n){"use strict";n(298)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,e,n){"use strict";n(298)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,e,n){n(579)("asyncIterator")},function(t,e,n){for(var i=n(469),r=n(275),a=n(211),o=n(63),s=n(220),l=n(294),u=n(78),c=u("iterator"),f=u("toStringTag"),d=l.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=r(h),v=0;v<p.length;v++){var m,g=p[v],_=h[g],y=o[g],x=y&&y.prototype;if(x&&(x[c]||s(x,c,d),x[f]||s(x,f,g),l[g]=d,_))for(m in i)x[m]||a(x,m,i[m],!0)}},function(t,e,n){var i=n(11),r=n(465);i(i.G+i.B,{setImmediate:r.set,clearImmediate:r.clear})},function(t,e,n){var i=n(63),r=n(11),a=n(367),o=[].slice,s=/MSIE .\./.test(a),l=function(t){return function(e,n){var i=arguments.length>2,r=!!i&&o.call(arguments,2);return t(i?function(){("function"==typeof e?e:Function(e)).apply(this,r)}:e,n)}};r(r.G+r.B+r.F*s,{setTimeout:l(i.setTimeout),setInterval:l(i.setInterval)})},function(t,e,n){n(1010),n(1009),n(1008),t.exports=n(105)},function(t,e,n){!function(i,r,a){t.exports=e=r(n(50),n(299),n(300),n(280),n(119))}(0,function(t){return function(){var e=t,n=e.lib,i=n.BlockCipher,r=e.algo,a=[],o=[],s=[],l=[],u=[],c=[],f=[],d=[],h=[],p=[];!function(){for(var t=[],e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;for(var n=0,i=0,e=0;e<256;e++){var r=i^i<<1^i<<2^i<<3^i<<4;r=r>>>8^255&r^99,a[n]=r,o[r]=n;var v=t[n],m=t[v],g=t[m],_=257*t[r]^16843008*r;s[n]=_<<24|_>>>8,l[n]=_<<16|_>>>16,u[n]=_<<8|_>>>24,c[n]=_;var _=16843009*g^65537*m^257*v^16843008*n;f[r]=_<<24|_>>>8,d[r]=_<<16|_>>>16,h[r]=_<<8|_>>>24,p[r]=_,n?(n=v^t[t[t[g^v]]],i^=t[t[i]]):n=i=1}}();var v=[0,1,2,4,8,16,32,64,128,27,54],m=r.AES=i.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var t=this._keyPriorReset=this._key,e=t.words,n=t.sigBytes/4,i=this._nRounds=n+6,r=4*(i+1),o=this._keySchedule=[],s=0;s<r;s++)if(s<n)o[s]=e[s];else{var l=o[s-1];s%n?n>6&&s%n==4&&(l=a[l>>>24]<<24|a[l>>>16&255]<<16|a[l>>>8&255]<<8|a[255&l]):(l=l<<8|l>>>24,l=a[l>>>24]<<24|a[l>>>16&255]<<16|a[l>>>8&255]<<8|a[255&l],l^=v[s/n|0]<<24),o[s]=o[s-n]^l}for(var u=this._invKeySchedule=[],c=0;c<r;c++){var s=r-c;if(c%4)var l=o[s];else var l=o[s-4];u[c]=c<4||s<=4?l:f[a[l>>>24]]^d[a[l>>>16&255]]^h[a[l>>>8&255]]^p[a[255&l]]}}},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,s,l,u,c,a)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,f,d,h,p,o);var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,i,r,a,o,s){for(var l=this._nRounds,u=t[e]^n[0],c=t[e+1]^n[1],f=t[e+2]^n[2],d=t[e+3]^n[3],h=4,p=1;p<l;p++){var v=i[u>>>24]^r[c>>>16&255]^a[f>>>8&255]^o[255&d]^n[h++],m=i[c>>>24]^r[f>>>16&255]^a[d>>>8&255]^o[255&u]^n[h++],g=i[f>>>24]^r[d>>>16&255]^a[u>>>8&255]^o[255&c]^n[h++],_=i[d>>>24]^r[u>>>16&255]^a[c>>>8&255]^o[255&f]^n[h++];u=v,c=m,f=g,d=_}var v=(s[u>>>24]<<24|s[c>>>16&255]<<16|s[f>>>8&255]<<8|s[255&d])^n[h++],m=(s[c>>>24]<<24|s[f>>>16&255]<<16|s[d>>>8&255]<<8|s[255&u])^n[h++],g=(s[f>>>24]<<24|s[d>>>16&255]<<16|s[u>>>8&255]<<8|s[255&c])^n[h++],_=(s[d>>>24]<<24|s[u>>>16&255]<<16|s[c>>>8&255]<<8|s[255&f])^n[h++];t[e]=v,t[e+1]=m,t[e+2]=g,t[e+3]=_},keySize:8});e.AES=i._createHelper(m)}(),t.AES})},function(t,e,n){!function(i,r){t.exports=e=r(n(50))}(0,function(t){return function(){function e(t){return t<<8&4278255360|t>>>8&16711935}var n=t,i=n.lib,r=i.WordArray,a=n.enc;a.Utf16=a.Utf16BE={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],r=0;r<n;r+=2){var a=e[r>>>2]>>>16-r%4*8&65535;i.push(String.fromCharCode(a))}return i.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i++)n[i>>>1]|=t.charCodeAt(i)<<16-i%2*16;return r.create(n,2*e)}};a.Utf16LE={stringify:function(t){for(var n=t.words,i=t.sigBytes,r=[],a=0;a<i;a+=2){var o=e(n[a>>>2]>>>16-a%4*8&65535);r.push(String.fromCharCode(o))}return r.join("")},parse:function(t){for(var n=t.length,i=[],a=0;a<n;a++)i[a>>>1]|=e(t.charCodeAt(a)<<16-a%2*16);return r.create(i,2*n)}}}(),t.enc.Utf16})},function(t,e,n){!function(i,r,a){t.exports=e=r(n(50),n(119))}(0,function(t){return function(e){var n=t,i=n.lib,r=i.CipherParams,a=n.enc,o=a.Hex,s=n.format;s.Hex={stringify:function(t){return t.ciphertext.toString(o)},parse:function(t){var e=o.parse(t);return r.create({ciphertext:e})}}}(),t.format.Hex})},function(t,e,n){!function(i,r,a){t.exports=e=r(n(50),n(368),n(1016),n(1013),n(299),n(300),n(471),n(583),n(1032),n(584),n(1034),n(1033),n(1031),n(470),n(1027),n(280),n(119),n(1017),n(1019),n(1018),n(1021),n(1020),n(1022),n(1023),n(1024),n(1026),n(1025),n(1014),n(1012),n(1035),n(1030),n(1029),n(1028))}(0,function(t){return t})},function(t,e,n){!function(i,r){t.exports=e=r(n(50))}(0,function(t){return function(){if("function"==typeof ArrayBuffer){var e=t,n=e.lib,i=n.WordArray,r=i.init;(i.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var e=t.byteLength,n=[],i=0;i<e;i++)n[i>>>2]|=t[i]<<24-i%4*8;r.call(this,n,e)}else r.apply(this,arguments)}).prototype=i}}(),t.lib.WordArray})},function(t,e,n){!function(i,r,a){t.exports=e=r(n(50),n(119))}(0,function(t){return t.mode.CFB=function(){function e(t,e,n,i){var r=this._iv;if(r){var a=r.slice(0);this._iv=void 0}else var a=this._prevBlock;i.encryptBlock(a,0);for(var o=0;o<n;o++)t[e+o]^=a[o]}var n=t.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(t,n){var i=this._cipher,r=i.blockSize;e.call(this,t,n,r,i),this._prevBlock=t.slice(n,n+r)}}),n.Decryptor=n.extend({processBlock:function(t,n){var i=this._cipher,r=i.blockSize,a=t.slice(n,n+r);e.call(this,t,n,r,i),this._prevBlock=a}}),n}(),t.mode.CFB})},function(t,e,n){!function(i,r,a){t.exports=e=r(n(50),n(119))}(0,function(t){/** @preserve
	 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
	 * derived from CryptoJS.mode.CTR
	 * Jan Hruby jhruby.web@gmail.com
	 */
return t.mode.CTRGladman=function(){function e(t){if(255==(t>>24&255)){var e=t>>16&255,n=t>>8&255,i=255&t;255===e?(e=0,255===n?(n=0,255===i?i=0:++i):++n):++e,t=0,t+=e<<16,t+=n<<8,t+=i}else t+=1<<24;return t}function n(t){return 0===(t[0]=e(t[0]))&&(t[1]=e(t[1])),t}var i=t.lib.BlockCipherMode.extend(),r=i.Encryptor=i.extend({processBlock:function(t,e){var i=this._cipher,r=i.blockSize,a=this._iv,o=this._counter;a&&(o=this._counter=a.slice(0),this._iv=void 0),n(o);var s=o.slice(0);i.encryptBlock(s,0);for(var l=0;l<r;l++)t[e+l]^=s[l]}});return i.Decryptor=r,i}(),t.mode.CTRGladman})},function(t,e,n){!function(i,r,a){t.exports=e=r(n(50),n(119))}(0,function(t){return t.mode.CTR=function(){var e=t.lib.BlockCipherMode.extend(),n=e.Encryptor=e.extend({processBlock:function(t,e){var n=this._cipher,i=n.blockSize,r=this._iv,a=this._counter;r&&(a=this._counter=r.slice(0),this._iv=void 0);var o=a.slice(0);n.encryptBlock(o,0),a[i-1]=a[i-1]+1|0;for(var s=0;s<i;s++)t[e+s]^=o[s]}});return e.Decryptor=n,e}(),t.mode.CTR})},function(t,e,n){!function(i,r,a){t.exports=e=r(n(50),n(119))}(0,function(t){return t.mode.ECB=function(){var e=t.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(t,e){this._cipher.encryptBlock(t,e)}}),e.Decryptor=e.extend({processBlock:function(t,e){this._cipher.decryptBlock(t,e)}}),e}(),t.mode.ECB})},function(t,e,n){!function(i,r,a){t.exports=e=r(n(50),n(119))}(0,function(t){return t.mode.OFB=function(){var e=t.lib.BlockCipherMode.extend(),n=e.Encryptor=e.extend({processBlock:function(t,e){var n=this._cipher,i=n.blockSize,r=this._iv,a=this._keystream;r&&(a=this._keystream=r.slice(0),this._iv=void 0),n.encryptBlock(a,0);for(var o=0;o<i;o++)t[e+o]^=a[o]}});return e.Decryptor=n,e}(),t.mode.OFB})},function(t,e,n){!function(i,r,a){t.exports=e=r(n(50),n(119))}(0,function(t){return t.pad.AnsiX923={pad:function(t,e){var n=t.sigBytes,i=4*e,r=i-n%i,a=n+r-1;t.clamp(),t.words[a>>>2]|=r<<24-a%4*8,t.sigBytes+=r},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},t.pad.Ansix923})},function(t,e,n){!function(i,r,a){t.exports=e=r(n(50),n(119))}(0,function(t){return t.pad.Iso10126={pad:function(e,n){var i=4*n,r=i-e.sigBytes%i;e.concat(t.lib.WordArray.random(r-1)).concat(t.lib.WordArray.create([r<<24],1))},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},t.pad.Iso10126})},function(t,e,n){!function(i,r,a){t.exports=e=r(n(50),n(119))}(0,function(t){return t.pad.Iso97971={pad:function(e,n){e.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(e,n)},unpad:function(e){t.pad.ZeroPadding.unpad(e),e.sigBytes--}},t.pad.Iso97971})},function(t,e,n){!function(i,r,a){t.exports=e=r(n(50),n(119))}(0,function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding})},function(t,e,n){!function(i,r,a){t.exports=e=r(n(50),n(119))}(0,function(t){return t.pad.ZeroPadding={pad:function(t,e){var n=4*e;t.clamp(),t.sigBytes+=n-(t.sigBytes%n||n)},unpad:function(t){for(var e=t.words,n=t.sigBytes-1;!(e[n>>>2]>>>24-n%4*8&255);)n--;t.sigBytes=n+1}},t.pad.ZeroPadding})},function(t,e,n){!function(i,r,a){t.exports=e=r(n(50),n(471),n(470))}(0,function(t){return function(){var e=t,n=e.lib,i=n.Base,r=n.WordArray,a=e.algo,o=a.SHA1,s=a.HMAC,l=a.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:o,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,i=s.create(n.hasher,t),a=r.create(),o=r.create([1]),l=a.words,u=o.words,c=n.keySize,f=n.iterations;l.length<c;){var d=i.update(e).finalize(o);i.reset();for(var h=d.words,p=h.length,v=d,m=1;m<f;m++){v=i.finalize(v),i.reset();for(var g=v.words,_=0;_<p;_++)h[_]^=g[_]}a.concat(d),u[0]++}return a.sigBytes=4*c,a}});e.PBKDF2=function(t,e,n){return l.create(n).compute(t,e)}}(),t.PBKDF2})},function(t,e,n){!function(i,r,a){t.exports=e=r(n(50),n(299),n(300),n(280),n(119))}(0,function(t){return function(){function e(){for(var t=this._X,e=this._C,n=0;n<8;n++)s[n]=e[n];e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<s[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<s[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<s[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<s[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<s[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<s[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<s[6]>>>0?1:0)|0,this._b=e[7]>>>0<s[7]>>>0?1:0;for(var n=0;n<8;n++){var i=t[n]+e[n],r=65535&i,a=i>>>16,o=((r*r>>>17)+r*a>>>15)+a*a,u=((4294901760&i)*i|0)+((65535&i)*i|0);l[n]=o^u}t[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,t[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,t[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,t[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,t[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,t[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,t[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,t[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}var n=t,i=n.lib,r=i.StreamCipher,a=n.algo,o=[],s=[],l=[],u=a.RabbitLegacy=r.extend({_doReset:function(){var t=this._key.words,n=this.cfg.iv,i=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],r=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];this._b=0;for(var a=0;a<4;a++)e.call(this);for(var a=0;a<8;a++)r[a]^=i[a+4&7];if(n){var o=n.words,s=o[0],l=o[1],u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),c=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8),f=u>>>16|4294901760&c,d=c<<16|65535&u;r[0]^=u,r[1]^=f,r[2]^=c,r[3]^=d,r[4]^=u,r[5]^=f,r[6]^=c,r[7]^=d;for(var a=0;a<4;a++)e.call(this)}},_doProcessBlock:function(t,n){var i=this._X;e.call(this),o[0]=i[0]^i[5]>>>16^i[3]<<16,o[1]=i[2]^i[7]>>>16^i[5]<<16,o[2]=i[4]^i[1]>>>16^i[7]<<16,o[3]=i[6]^i[3]>>>16^i[1]<<16;for(var r=0;r<4;r++)o[r]=16711935&(o[r]<<8|o[r]>>>24)|4278255360&(o[r]<<24|o[r]>>>8),t[n+r]^=o[r]},blockSize:4,ivSize:2});n.RabbitLegacy=r._createHelper(u)}(),t.RabbitLegacy})},function(t,e,n){!function(i,r,a){t.exports=e=r(n(50),n(299),n(300),n(280),n(119))}(0,function(t){return function(){function e(){for(var t=this._X,e=this._C,n=0;n<8;n++)s[n]=e[n];e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<s[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<s[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<s[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<s[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<s[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<s[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<s[6]>>>0?1:0)|0,this._b=e[7]>>>0<s[7]>>>0?1:0;for(var n=0;n<8;n++){var i=t[n]+e[n],r=65535&i,a=i>>>16,o=((r*r>>>17)+r*a>>>15)+a*a,u=((4294901760&i)*i|0)+((65535&i)*i|0);l[n]=o^u}t[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,t[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,t[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,t[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,t[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,t[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,t[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,t[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}var n=t,i=n.lib,r=i.StreamCipher,a=n.algo,o=[],s=[],l=[],u=a.Rabbit=r.extend({_doReset:function(){for(var t=this._key.words,n=this.cfg.iv,i=0;i<4;i++)t[i]=16711935&(t[i]<<8|t[i]>>>24)|4278255360&(t[i]<<24|t[i]>>>8);var r=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],a=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];this._b=0;for(var i=0;i<4;i++)e.call(this);for(var i=0;i<8;i++)a[i]^=r[i+4&7];if(n){var o=n.words,s=o[0],l=o[1],u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),c=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8),f=u>>>16|4294901760&c,d=c<<16|65535&u;a[0]^=u,a[1]^=f,a[2]^=c,a[3]^=d,a[4]^=u,a[5]^=f,a[6]^=c,a[7]^=d;for(var i=0;i<4;i++)e.call(this)}},_doProcessBlock:function(t,n){var i=this._X;e.call(this),o[0]=i[0]^i[5]>>>16^i[3]<<16,o[1]=i[2]^i[7]>>>16^i[5]<<16,o[2]=i[4]^i[1]>>>16^i[7]<<16,o[3]=i[6]^i[3]>>>16^i[1]<<16;for(var r=0;r<4;r++)o[r]=16711935&(o[r]<<8|o[r]>>>24)|4278255360&(o[r]<<24|o[r]>>>8),t[n+r]^=o[r]},blockSize:4,ivSize:2});n.Rabbit=r._createHelper(u)}(),t.Rabbit})},function(t,e,n){!function(i,r,a){t.exports=e=r(n(50),n(299),n(300),n(280),n(119))}(0,function(t){return function(){function e(){for(var t=this._S,e=this._i,n=this._j,i=0,r=0;r<4;r++){e=(e+1)%256,n=(n+t[e])%256;var a=t[e];t[e]=t[n],t[n]=a,i|=t[(t[e]+t[n])%256]<<24-8*r}return this._i=e,this._j=n,i}var n=t,i=n.lib,r=i.StreamCipher,a=n.algo,o=a.RC4=r.extend({_doReset:function(){for(var t=this._key,e=t.words,n=t.sigBytes,i=this._S=[],r=0;r<256;r++)i[r]=r;for(var r=0,a=0;r<256;r++){var o=r%n,s=e[o>>>2]>>>24-o%4*8&255;a=(a+i[r]+s)%256;var l=i[r];i[r]=i[a],i[a]=l}this._i=this._j=0},_doProcessBlock:function(t,n){t[n]^=e.call(this)},keySize:8,ivSize:0});n.RC4=r._createHelper(o);var s=a.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:function(){o._doReset.call(this);for(var t=this.cfg.drop;t>0;t--)e.call(this)}});n.RC4Drop=r._createHelper(s)}(),t.RC4})},function(t,e,n){!function(i,r){t.exports=e=r(n(50))}(0,function(t){/** @preserve
	(c) 2012 by Cédric Mesnil. All rights reserved.

	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	*/
return function(e){function n(t,e,n){return t^e^n}function i(t,e,n){return t&e|~t&n}function r(t,e,n){return(t|~e)^n}function a(t,e,n){return t&n|e&~n}function o(t,e,n){return t^(e|~n)}function s(t,e){return t<<e|t>>>32-e}var l=t,u=l.lib,c=u.WordArray,f=u.Hasher,d=l.algo,h=c.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),p=c.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),v=c.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),m=c.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),g=c.create([0,1518500249,1859775393,2400959708,2840853838]),_=c.create([1352829926,1548603684,1836072691,2053994217,0]),y=d.RIPEMD160=f.extend({_doReset:function(){this._hash=c.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var l=0;l<16;l++){var u=e+l,c=t[u];t[u]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}var f,d,y,x,b,S,w,E,A,T,M=this._hash.words,I=g.words,P=_.words,k=h.words,L=p.words,C=v.words,R=m.words;S=f=M[0],w=d=M[1],E=y=M[2],A=x=M[3],T=b=M[4];for(var D,l=0;l<80;l+=1)D=f+t[e+k[l]]|0,D+=l<16?n(d,y,x)+I[0]:l<32?i(d,y,x)+I[1]:l<48?r(d,y,x)+I[2]:l<64?a(d,y,x)+I[3]:o(d,y,x)+I[4],D|=0,D=s(D,C[l]),D=D+b|0,f=b,b=x,x=s(y,10),y=d,d=D,D=S+t[e+L[l]]|0,D+=l<16?o(w,E,A)+P[0]:l<32?a(w,E,A)+P[1]:l<48?r(w,E,A)+P[2]:l<64?i(w,E,A)+P[3]:n(w,E,A)+P[4],D|=0,D=s(D,R[l]),D=D+T|0,S=T,T=A,A=s(E,10),E=w,w=D;D=M[1]+y+A|0,M[1]=M[2]+x+T|0,M[2]=M[3]+b+S|0,M[3]=M[4]+f+w|0,M[4]=M[0]+d+E|0,M[0]=D},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;e[i>>>5]|=128<<24-i%32,e[14+(i+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(e.length+1),this._process();for(var r=this._hash,a=r.words,o=0;o<5;o++){var s=a[o];a[o]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return r},clone:function(){var t=f.clone.call(this);return t._hash=this._hash.clone(),t}});l.RIPEMD160=f._createHelper(y),l.HmacRIPEMD160=f._createHmacHelper(y)}(Math),t.RIPEMD160})},function(t,e,n){!function(i,r,a){t.exports=e=r(n(50),n(583))}(0,function(t){return function(){var e=t,n=e.lib,i=n.WordArray,r=e.algo,a=r.SHA256,o=r.SHA224=a.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var t=a._doFinalize.call(this);return t.sigBytes-=4,t}});e.SHA224=a._createHelper(o),e.HmacSHA224=a._createHmacHelper(o)}(),t.SHA224})},function(t,e,n){!function(i,r,a){t.exports=e=r(n(50),n(368))}(0,function(t){return function(e){var n=t,i=n.lib,r=i.WordArray,a=i.Hasher,o=n.x64,s=o.Word,l=n.algo,u=[],c=[],f=[];!function(){for(var t=1,e=0,n=0;n<24;n++){u[t+5*e]=(n+1)*(n+2)/2%64;var i=e%5,r=(2*t+3*e)%5;t=i,e=r}for(var t=0;t<5;t++)for(var e=0;e<5;e++)c[t+5*e]=e+(2*t+3*e)%5*5;for(var a=1,o=0;o<24;o++){for(var l=0,d=0,h=0;h<7;h++){if(1&a){var p=(1<<h)-1;p<32?d^=1<<p:l^=1<<p-32}128&a?a=a<<1^113:a<<=1}f[o]=s.create(l,d)}}();var d=[];!function(){for(var t=0;t<25;t++)d[t]=s.create()}();var h=l.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var t=this._state=[],e=0;e<25;e++)t[e]=new s.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(t,e){for(var n=this._state,i=this.blockSize/2,r=0;r<i;r++){var a=t[e+2*r],o=t[e+2*r+1];a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);var s=n[r];s.high^=o,s.low^=a}for(var l=0;l<24;l++){for(var h=0;h<5;h++){for(var p=0,v=0,m=0;m<5;m++){var s=n[h+5*m];p^=s.high,v^=s.low}var g=d[h];g.high=p,g.low=v}for(var h=0;h<5;h++)for(var _=d[(h+4)%5],y=d[(h+1)%5],x=y.high,b=y.low,p=_.high^(x<<1|b>>>31),v=_.low^(b<<1|x>>>31),m=0;m<5;m++){var s=n[h+5*m];s.high^=p,s.low^=v}for(var S=1;S<25;S++){var s=n[S],w=s.high,E=s.low,A=u[S];if(A<32)var p=w<<A|E>>>32-A,v=E<<A|w>>>32-A;else var p=E<<A-32|w>>>64-A,v=w<<A-32|E>>>64-A;var T=d[c[S]];T.high=p,T.low=v}var M=d[0],I=n[0];M.high=I.high,M.low=I.low;for(var h=0;h<5;h++)for(var m=0;m<5;m++){var S=h+5*m,s=n[S],P=d[S],k=d[(h+1)%5+5*m],L=d[(h+2)%5+5*m];s.high=P.high^~k.high&L.high,s.low=P.low^~k.low&L.low}var s=n[0],C=f[l];s.high^=C.high,s.low^=C.low}},_doFinalize:function(){var t=this._data,n=t.words,i=(this._nDataBytes,8*t.sigBytes),a=32*this.blockSize;n[i>>>5]|=1<<24-i%32,n[(e.ceil((i+1)/a)*a>>>5)-1]|=128,t.sigBytes=4*n.length,this._process();for(var o=this._state,s=this.cfg.outputLength/8,l=s/8,u=[],c=0;c<l;c++){var f=o[c],d=f.high,h=f.low;d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),u.push(h),u.push(d)}return new r.init(u,s)},clone:function(){for(var t=a.clone.call(this),e=t._state=this._state.slice(0),n=0;n<25;n++)e[n]=e[n].clone();return t}});n.SHA3=a._createHelper(h),n.HmacSHA3=a._createHmacHelper(h)}(Math),t.SHA3})},function(t,e,n){!function(i,r,a){t.exports=e=r(n(50),n(368),n(584))}(0,function(t){return function(){var e=t,n=e.x64,i=n.Word,r=n.WordArray,a=e.algo,o=a.SHA512,s=a.SHA384=o.extend({_doReset:function(){this._hash=new r.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var t=o._doFinalize.call(this);return t.sigBytes-=16,t}});e.SHA384=o._createHelper(s),e.HmacSHA384=o._createHmacHelper(s)}(),t.SHA384})},function(t,e,n){!function(i,r,a){t.exports=e=r(n(50),n(299),n(300),n(280),n(119))}(0,function(t){return function(){function e(t,e){var n=(this._lBlock>>>t^this._rBlock)&e;this._rBlock^=n,this._lBlock^=n<<t}function n(t,e){var n=(this._rBlock>>>t^this._lBlock)&e;this._lBlock^=n,this._rBlock^=n<<t}var i=t,r=i.lib,a=r.WordArray,o=r.BlockCipher,s=i.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=s.DES=o.extend({_doReset:function(){for(var t=this._key,e=t.words,n=[],i=0;i<56;i++){var r=l[i]-1;n[i]=e[r>>>5]>>>31-r%32&1}for(var a=this._subKeys=[],o=0;o<16;o++){for(var s=a[o]=[],f=c[o],i=0;i<24;i++)s[i/6|0]|=n[(u[i]-1+f)%28]<<31-i%6,s[4+(i/6|0)]|=n[28+(u[i+24]-1+f)%28]<<31-i%6;s[0]=s[0]<<1|s[0]>>>31;for(var i=1;i<7;i++)s[i]=s[i]>>>4*(i-1)+3;s[7]=s[7]<<5|s[7]>>>27}for(var d=this._invSubKeys=[],i=0;i<16;i++)d[i]=a[15-i]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._subKeys)},decryptBlock:function(t,e){this._doCryptBlock(t,e,this._invSubKeys)},_doCryptBlock:function(t,i,r){this._lBlock=t[i],this._rBlock=t[i+1],e.call(this,4,252645135),e.call(this,16,65535),n.call(this,2,858993459),n.call(this,8,16711935),e.call(this,1,1431655765);for(var a=0;a<16;a++){for(var o=r[a],s=this._lBlock,l=this._rBlock,u=0,c=0;c<8;c++)u|=f[c][((l^o[c])&d[c])>>>0];this._lBlock=l,this._rBlock=s^u}var h=this._lBlock;this._lBlock=this._rBlock,this._rBlock=h,e.call(this,1,1431655765),n.call(this,8,16711935),n.call(this,2,858993459),e.call(this,16,65535),e.call(this,4,252645135),t[i]=this._lBlock,t[i+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});i.DES=o._createHelper(h);var p=s.TripleDES=o.extend({_doReset:function(){var t=this._key,e=t.words;this._des1=h.createEncryptor(a.create(e.slice(0,2))),this._des2=h.createEncryptor(a.create(e.slice(2,4))),this._des3=h.createEncryptor(a.create(e.slice(4,6)))},encryptBlock:function(t,e){this._des1.encryptBlock(t,e),this._des2.decryptBlock(t,e),this._des3.encryptBlock(t,e)},decryptBlock:function(t,e){this._des3.decryptBlock(t,e),this._des2.encryptBlock(t,e),this._des1.decryptBlock(t,e)},keySize:6,ivSize:2,blockSize:2});i.TripleDES=o._createHelper(p)}(),t.TripleDES})},function(t,e,n){e=t.exports=n(281)(),e.push([t.i,'.floor-control{font-size:15px;color:#646464;height:180px;width:38px;background:#fff;position:relative;bottom:83px!important;margin-left:31px;margin-right:30px;border-radius:40px;webkit-user-select:none;ms-user-select:none;moz-user-select:none;apple-user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10}.floor-control:after{position:absolute;top:0;left:0;width:200%;height:200%;transform:scale(.5);transform-origin:left top;border-radius:40px;z-index:1000000;box-shadow:0 0 1px 1px rgba(0,0,0,.12)}.floor-control ul{-webkit-padding-start:0;padding-inline-start:0;-webkit-padding-end:0;padding-inline-end:0;-webkit-margin-before:0;margin-block-start:0;-webkit-margin-after:0;margin-block-end:0}.floor-control .arr-top{width:38px;position:absolute;z-index:100;top:-2px}.floor-control .arr-bottom{width:38px;position:absolute;z-index:100;bottom:-2px}.floor-control .floor-control-wrapper{overflow:hidden;height:160px;width:100%;position:absolute;top:10px}.floor-control .floor-control-wrapper .floor-control-list{font-size:12px;list-style-type:none;margin:0}.floor-control .floor-control-wrapper .floor-control-list .floor-control-item{position:relative;display:block;text-align:center;text-decoration:none;width:38px;height:40px;line-height:40px;transition:color .3s ease-in}.floor-control .floor-control-wrapper .floor-control-list .floor-control-item:after{content:"";position:absolute;width:26px;height:26px;border-radius:30px;z-index:-10;pointer-events:none;left:0;right:0;top:0;bottom:0;margin:auto;opacity:0;transition:opacity .2s ease-out;background-color:#4875fd}.floor-control .floor-control-wrapper .floor-control-list .selected-item{color:#fff!important;opacity:1!important}.floor-control .floor-control-wrapper .floor-control-list .selected-item:after{opacity:1}.floor-control .floor-control-wrapper.freezing .floor-control-list .floor-control-item{color:#4d4d4d;opacity:.4}.floor-control-moveup{bottom:83px!important}',""])},function(t,e,n){e=t.exports=n(281)(),e.push([t.i,".rotate-circle{position:relative;width:60px;height:60px;padding:20px 20px 7px}.rotate-circle,.rotate-circle *{box-sizing:content-box}.rotate-circle .rotate-panel{position:relative;left:0;top:-60px;font-size:16px;line-height:normal;font-family:auto}.rotate-circle .rotate-left{top:15px;left:-6px;transform:rotate(-45deg)}.rotate-circle .rotate-left,.rotate-circle .rotate-top{position:absolute;width:30px;height:30px;border-radius:30px 0 0 0;background:#fff}.rotate-circle .rotate-top{left:15px;top:-6px;transform:rotate(45deg)}.rotate-circle .rotate-right{left:36px;top:15px;border-radius:0 30px 0 0}.rotate-circle .rotate-bottom,.rotate-circle .rotate-right{position:absolute;width:30px;height:30px;background:#fff;transform:rotate(45deg)}.rotate-circle .rotate-bottom{left:15px;top:36px;border-radius:0 0 30px 0}.rotate-circle .compass-circle{width:28px;height:28px;background:#fff;border:1px solid rgba(0,20,51,.1);border-radius:50%;position:relative;left:15px;top:-15px;z-index:100}.rotate-circle .compass-img{height:28px;left:30%;position:relative;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.rotate-circle .compass-circle-background{width:28px;height:28px;background:#e7eaef;border:1px solid rgba(0,20,51,.1);border-radius:50%;position:relative;left:15px;top:15px;z-index:50}.rotate-circle .rotate-left-img{transform:scaleY(-1) rotate(-45deg)}.rotate-circle .rotate-left-img,.rotate-circle .rotate-right-img{width:6px;height:17px;position:relative;left:12px;top:5px;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;vertical-align:baseline}.rotate-circle .rotate-right-img{transform:rotate(135deg)}.rotate-circle .rotate-top-img{transform:rotate(-45deg);left:10px;top:-1px}.rotate-circle .rotate-bottom-img,.rotate-circle .rotate-top-img{width:8px;height:4px;position:relative;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;vertical-align:baseline}.rotate-circle .rotate-bottom-img{transform:rotate(135deg);left:13px;top:2px}.rotate-circle .unclickable-rotate-bottom .rotate-bottom-img,.rotate-circle .unclickable-rotate-left .rotate-left-img,.rotate-circle .unclickable-rotate-right .rotate-right-img,.rotate-circle .unclickable-rotate-top .rotate-top-img{opacity:.3}.rotate-circle .clickable-rotate-bottom:hover,.rotate-circle .clickable-rotate-left:hover,.rotate-circle .clickable-rotate-right:hover,.rotate-circle .clickable-rotate-top:hover{background:#f2f4f8}.rotate-circle .clickable-rotate-bottom:active,.rotate-circle .clickable-rotate-left:active,.rotate-circle .clickable-rotate-right:active,.rotate-circle .clickable-rotate-top:active{background:#e7eaef}",""])},function(t,e,n){e=t.exports=n(281)(),e.push([t.i,".tmap-zoom-control{margin:10px 30px 20px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;position:relative;width:40px;height:80px;background:#fff;box-shadow:0 8px 19px rgba(41,64,102,.12);border-radius:4px}.tmap-zoom-control .tmap-zoom-content{-ms-flex:auto;flex:auto;-ms-flex-order:1;order:1;-ms-flex-positive:0;flex-grow:0;margin:8px 0}.tmap-zoom-control .tmap-zoom-in{position:absolute;width:24px;height:24px;left:8px;top:8px}.tmap-zoom-control .tmap-zoom-out{position:absolute;width:24px;height:24px;left:8px;top:48px}.tmap-zoom-control .tmap-zoom-spliter{height:1px;width:40px;background-color:#dee2e8;margin:auto}.tmap-zoom-control .tmap-zoom-number{display:inline;height:22px;top:40px;text-align:center;font-size:14px;font-weight:600;font-style:medium;font-family:Microsoft YaHei,PingFang SC;color:#000;line-height:22px}",""])},,,function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){"use strict";(function(e){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
function i(t,e){if(t===e)return 0;for(var n=t.length,i=e.length,r=0,a=Math.min(n,i);r<a;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0}function r(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}function a(t){return Object.prototype.toString.call(t)}function o(t){return!r(t)&&("function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}function s(t){if(S.isFunction(t)){if(A)return t.name;var e=t.toString(),n=e.match(M);return n&&n[1]}}function l(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function u(t){if(A||!S.isFunction(t))return S.inspect(t);var e=s(t);return"[Function"+(e?": "+e:"")+"]"}function c(t){return l(u(t.actual),128)+" "+t.operator+" "+l(u(t.expected),128)}function f(t,e,n,i,r){throw new T.AssertionError({message:n,actual:t,expected:e,operator:i,stackStartFunction:r})}function d(t,e){t||f(t,!0,e,"==",T.ok)}function h(t,e,n,s){if(t===e)return!0;if(r(t)&&r(e))return 0===i(t,e);if(S.isDate(t)&&S.isDate(e))return t.getTime()===e.getTime();if(S.isRegExp(t)&&S.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(o(t)&&o(e)&&a(t)===a(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===i(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(r(t)!==r(e))return!1;s=s||{actual:[],expected:[]};var l=s.actual.indexOf(t);return-1!==l&&l===s.expected.indexOf(e)||(s.actual.push(t),s.expected.push(e),v(t,e,n,s))}return n?t===e:t==e}function p(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function v(t,e,n,i){if(null===t||void 0===t||null===e||void 0===e)return!1;if(S.isPrimitive(t)||S.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var r=p(t),a=p(e);if(r&&!a||!r&&a)return!1;if(r)return t=E.call(t),e=E.call(e),h(t,e,n);var o,s,l=I(t),u=I(e);if(l.length!==u.length)return!1;for(l.sort(),u.sort(),s=l.length-1;s>=0;s--)if(l[s]!==u[s])return!1;for(s=l.length-1;s>=0;s--)if(o=l[s],!h(t[o],e[o],n,i))return!1;return!0}function m(t,e,n){h(t,e,!0)&&f(t,e,n,"notDeepStrictEqual",m)}function g(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function _(t){var e;try{t()}catch(t){e=t}return e}function y(t,e,n,i){var r;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(i=n,n=null),r=_(e),i=(n&&n.name?" ("+n.name+").":".")+(i?" "+i:"."),t&&!r&&f(r,n,"Missing expected exception"+i);var a="string"==typeof i,o=!t&&S.isError(r),s=!t&&r&&!n;if((o&&a&&g(r,n)||s)&&f(r,n,"Got unwanted exception"+i),t&&r&&n&&!g(r,n)||!t&&r)throw r}function x(t,e){t||f(t,!0,e,"==",x)}var b=n(1043),S=n(1079),w=Object.prototype.hasOwnProperty,E=Array.prototype.slice,A=function(){return"foo"===function(){}.name}(),T=t.exports=d,M=/\s*function\s+([^\(\s]*)\s*/;T.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=c(this),this.generatedMessage=!0);var e=t.stackStartFunction||f;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var i=n.stack,r=s(e),a=i.indexOf("\n"+r);if(a>=0){var o=i.indexOf("\n",a+1);i=i.substring(o+1)}this.stack=i}}},S.inherits(T.AssertionError,Error),T.fail=f,T.ok=d,T.equal=function(t,e,n){t!=e&&f(t,e,n,"==",T.equal)},T.notEqual=function(t,e,n){t==e&&f(t,e,n,"!=",T.notEqual)},T.deepEqual=function(t,e,n){h(t,e,!1)||f(t,e,n,"deepEqual",T.deepEqual)},T.deepStrictEqual=function(t,e,n){h(t,e,!0)||f(t,e,n,"deepStrictEqual",T.deepStrictEqual)},T.notDeepEqual=function(t,e,n){h(t,e,!1)&&f(t,e,n,"notDeepEqual",T.notDeepEqual)},T.notDeepStrictEqual=m,T.strictEqual=function(t,e,n){t!==e&&f(t,e,n,"===",T.strictEqual)},T.notStrictEqual=function(t,e,n){t===e&&f(t,e,n,"!==",T.notStrictEqual)},T.throws=function(t,e,n){y(!0,t,e,n)},T.doesNotThrow=function(t,e,n){y(!1,t,e,n)},T.ifError=function(t){if(t)throw t},T.strict=b(x,T,{equal:T.strictEqual,deepEqual:T.deepStrictEqual,notEqual:T.notStrictEqual,notDeepEqual:T.notDeepStrictEqual}),T.strict.strict=T.strict;var I=Object.keys||function(t){var e=[];for(var n in t)w.call(t,n)&&e.push(n);return e}}).call(e,n(144))},function(t,e,n){"use strict";function i(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(t){i[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,s,l=i(t),u=1;u<arguments.length;u++){n=Object(arguments[u]);for(var c in n)a.call(n,c)&&(l[c]=n[c]);if(r){s=r(n);for(var f=0;f<s.length;f++)o.call(n,s[f])&&(l[s[f]]=n[s[f]])}}return l}},function(t,e,n){"use strict";function i(t){if(!(this instanceof i))return new i(t);this.options=l.assign({level:p,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:v,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var n=s.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==h)throw new Error(c[n]);if(e.header&&s.deflateSetHeader(this.strm,e.header),e.dictionary){var r;if(r="string"==typeof e.dictionary?u.string2buf(e.dictionary):"[object ArrayBuffer]"===d.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(n=s.deflateSetDictionary(this.strm,r))!==h)throw new Error(c[n]);this._dict_set=!0}}function r(t,e){var n=new i(e);if(n.push(t,!0),n.err)throw n.msg||c[n.err];return n.result}function a(t,e){return e=e||{},e.raw=!0,r(t,e)}function o(t,e){return e=e||{},e.gzip=!0,r(t,e)}var s=n(1046),l=n(262),u=n(586),c=n(476),f=n(590),d=Object.prototype.toString,h=0,p=-1,v=0,m=8;i.prototype.push=function(t,e){var n,i,r=this.strm,a=this.options.chunkSize;if(this.ended)return!1;i=e===~~e?e:!0===e?4:0,"string"==typeof t?r.input=u.string2buf(t):"[object ArrayBuffer]"===d.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;do{if(0===r.avail_out&&(r.output=new l.Buf8(a),r.next_out=0,r.avail_out=a),1!==(n=s.deflate(r,i))&&n!==h)return this.onEnd(n),this.ended=!0,!1;0!==r.avail_out&&(0!==r.avail_in||4!==i&&2!==i)||("string"===this.options.to?this.onData(u.buf2binstring(l.shrinkBuf(r.output,r.next_out))):this.onData(l.shrinkBuf(r.output,r.next_out)))}while((r.avail_in>0||0===r.avail_out)&&1!==n);return 4===i?(n=s.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===h):2!==i||(this.onEnd(h),r.avail_out=0,!0)},i.prototype.onData=function(t){this.chunks.push(t)},i.prototype.onEnd=function(t){t===h&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=i,e.deflate=r,e.deflateRaw=a,e.gzip=o},function(t,e,n){"use strict";function i(t){if(!(this instanceof i))return new i(t);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var n=o.inflateInit2(this.strm,e.windowBits);if(n!==u.Z_OK)throw new Error(c[n]);if(this.header=new d,o.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=l.string2buf(e.dictionary):"[object ArrayBuffer]"===h.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=o.inflateSetDictionary(this.strm,e.dictionary))!==u.Z_OK))throw new Error(c[n])}function r(t,e){var n=new i(e);if(n.push(t,!0),n.err)throw n.msg||c[n.err];return n.result}function a(t,e){return e=e||{},e.raw=!0,r(t,e)}var o=n(1049),s=n(262),l=n(586),u=n(588),c=n(476),f=n(590),d=n(1047),h=Object.prototype.toString;i.prototype.push=function(t,e){var n,i,r,a,c,f=this.strm,d=this.options.chunkSize,p=this.options.dictionary,v=!1;if(this.ended)return!1;i=e===~~e?e:!0===e?u.Z_FINISH:u.Z_NO_FLUSH,"string"==typeof t?f.input=l.binstring2buf(t):"[object ArrayBuffer]"===h.call(t)?f.input=new Uint8Array(t):f.input=t,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new s.Buf8(d),f.next_out=0,f.avail_out=d),n=o.inflate(f,u.Z_NO_FLUSH),n===u.Z_NEED_DICT&&p&&(n=o.inflateSetDictionary(this.strm,p)),n===u.Z_BUF_ERROR&&!0===v&&(n=u.Z_OK,v=!1),n!==u.Z_STREAM_END&&n!==u.Z_OK)return this.onEnd(n),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&n!==u.Z_STREAM_END&&(0!==f.avail_in||i!==u.Z_FINISH&&i!==u.Z_SYNC_FLUSH)||("string"===this.options.to?(r=l.utf8border(f.output,f.next_out),a=f.next_out-r,c=l.buf2string(f.output,r),f.next_out=a,f.avail_out=d-a,a&&s.arraySet(f.output,f.output,r,a,0),this.onData(c)):this.onData(s.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(v=!0)}while((f.avail_in>0||0===f.avail_out)&&n!==u.Z_STREAM_END);return n===u.Z_STREAM_END&&(i=u.Z_FINISH),i===u.Z_FINISH?(n=o.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===u.Z_OK):i!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),f.avail_out=0,!0)},i.prototype.onData=function(t){this.chunks.push(t)},i.prototype.onEnd=function(t){t===u.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=i,e.inflate=r,e.inflateRaw=a,e.ungzip=r},function(t,e,n){"use strict";function i(t,e){return t.msg=D[e],e}function r(t){return(t<<1)-(t>4?9:0)}function a(t){for(var e=t.length;--e>=0;)t[e]=0}function o(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(k.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function s(t,e){L._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,o(t.strm)}function l(t,e){t.pending_buf[t.pending++]=e}function u(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function c(t,e,n,i){var r=t.avail_in;return r>i&&(r=i),0===r?0:(t.avail_in-=r,k.arraySet(e,t.input,t.next_in,r,n),1===t.state.wrap?t.adler=C(t.adler,e,r,n):2===t.state.wrap&&(t.adler=R(t.adler,e,r,n)),t.next_in+=r,t.total_in+=r,r)}function f(t,e){var n,i,r=t.max_chain_length,a=t.strstart,o=t.prev_length,s=t.nice_match,l=t.strstart>t.w_size-ut?t.strstart-(t.w_size-ut):0,u=t.window,c=t.w_mask,f=t.prev,d=t.strstart+lt,h=u[a+o-1],p=u[a+o];t.prev_length>=t.good_match&&(r>>=2),s>t.lookahead&&(s=t.lookahead);do{if(n=e,u[n+o]===p&&u[n+o-1]===h&&u[n]===u[a]&&u[++n]===u[a+1]){a+=2,n++;do{}while(u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&a<d);if(i=lt-(d-a),a=d-lt,i>o){if(t.match_start=e,o=i,i>=s)break;h=u[a+o-1],p=u[a+o]}}}while((e=f[e&c])>l&&0!=--r);return o<=t.lookahead?o:t.lookahead}function d(t){var e,n,i,r,a,o=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=o+(o-ut)){k.arraySet(t.window,t.window,o,o,0),t.match_start-=o,t.strstart-=o,t.block_start-=o,n=t.hash_size,e=n;do{i=t.head[--e],t.head[e]=i>=o?i-o:0}while(--n);n=o,e=n;do{i=t.prev[--e],t.prev[e]=i>=o?i-o:0}while(--n);r+=o}if(0===t.strm.avail_in)break;if(n=c(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=n,t.lookahead+t.insert>=st)for(a=t.strstart-t.insert,t.ins_h=t.window[a],t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+st-1])&t.hash_mask,t.prev[a&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=a,a++,t.insert--,!(t.lookahead+t.insert<st)););}while(t.lookahead<ut&&0!==t.strm.avail_in)}function h(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(d(t),0===t.lookahead&&e===N)return _t;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+n;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,s(t,!1),0===t.strm.avail_out))return _t;if(t.strstart-t.block_start>=t.w_size-ut&&(s(t,!1),0===t.strm.avail_out))return _t}return t.insert=0,e===F?(s(t,!0),0===t.strm.avail_out?xt:bt):(t.strstart>t.block_start&&(s(t,!1),t.strm.avail_out),_t)}function p(t,e){for(var n,i;;){if(t.lookahead<ut){if(d(t),t.lookahead<ut&&e===N)return _t;if(0===t.lookahead)break}if(n=0,t.lookahead>=st&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+st-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-ut&&(t.match_length=f(t,n)),t.match_length>=st)if(i=L._tr_tally(t,t.strstart-t.match_start,t.match_length-st),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=st){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+st-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=L._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(s(t,!1),0===t.strm.avail_out))return _t}return t.insert=t.strstart<st-1?t.strstart:st-1,e===F?(s(t,!0),0===t.strm.avail_out?xt:bt):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?_t:yt}function v(t,e){for(var n,i,r;;){if(t.lookahead<ut){if(d(t),t.lookahead<ut&&e===N)return _t;if(0===t.lookahead)break}if(n=0,t.lookahead>=st&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+st-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=st-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-ut&&(t.match_length=f(t,n),t.match_length<=5&&(t.strategy===W||t.match_length===st&&t.strstart-t.match_start>4096)&&(t.match_length=st-1)),t.prev_length>=st&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-st,i=L._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-st),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+st-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=st-1,t.strstart++,i&&(s(t,!1),0===t.strm.avail_out))return _t}else if(t.match_available){if(i=L._tr_tally(t,0,t.window[t.strstart-1]),i&&s(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return _t}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=L._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<st-1?t.strstart:st-1,e===F?(s(t,!0),0===t.strm.avail_out?xt:bt):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?_t:yt}function m(t,e){for(var n,i,r,a,o=t.window;;){if(t.lookahead<=lt){if(d(t),t.lookahead<=lt&&e===N)return _t;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=st&&t.strstart>0&&(r=t.strstart-1,(i=o[r])===o[++r]&&i===o[++r]&&i===o[++r])){a=t.strstart+lt;do{}while(i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&r<a);t.match_length=lt-(a-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=st?(n=L._tr_tally(t,1,t.match_length-st),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=L._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(s(t,!1),0===t.strm.avail_out))return _t}return t.insert=0,e===F?(s(t,!0),0===t.strm.avail_out?xt:bt):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?_t:yt}function g(t,e){for(var n;;){if(0===t.lookahead&&(d(t),0===t.lookahead)){if(e===N)return _t;break}if(t.match_length=0,n=L._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(s(t,!1),0===t.strm.avail_out))return _t}return t.insert=0,e===F?(s(t,!0),0===t.strm.avail_out?xt:bt):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?_t:yt}function _(t,e,n,i,r){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=r}function y(t){t.window_size=2*t.w_size,a(t.head),t.max_lazy_match=P[t.level].max_lazy,t.good_match=P[t.level].good_length,t.nice_match=P[t.level].nice_length,t.max_chain_length=P[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=st-1,t.match_available=0,t.ins_h=0}function x(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=K,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new k.Buf16(2*at),this.dyn_dtree=new k.Buf16(2*(2*it+1)),this.bl_tree=new k.Buf16(2*(2*rt+1)),a(this.dyn_ltree),a(this.dyn_dtree),a(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new k.Buf16(ot+1),this.heap=new k.Buf16(2*nt+1),a(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new k.Buf16(2*nt+1),a(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function b(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=J,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?ft:mt,t.adler=2===e.wrap?0:1,e.last_flush=N,L._tr_init(e),V):i(t,G)}function S(t){var e=b(t);return e===V&&y(t.state),e}function w(t,e){return t&&t.state?2!==t.state.wrap?G:(t.state.gzhead=e,V):G}function E(t,e,n,r,a,o){if(!t)return G;var s=1;if(e===j&&(e=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),a<1||a>$||n!==K||r<8||r>15||e<0||e>9||o<0||o>q)return i(t,G);8===r&&(r=9);var l=new x;return t.state=l,l.strm=t,l.wrap=s,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=a+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+st-1)/st),l.window=new k.Buf8(2*l.w_size),l.head=new k.Buf16(l.hash_size),l.prev=new k.Buf16(l.w_size),l.lit_bufsize=1<<a+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new k.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=o,l.method=n,S(t)}function A(t,e){return E(t,e,K,tt,et,Q)}function T(t,e){var n,s,c,f;if(!t||!t.state||e>z||e<0)return t?i(t,G):G;if(s=t.state,!t.output||!t.input&&0!==t.avail_in||s.status===gt&&e!==F)return i(t,0===t.avail_out?Y:G);if(s.strm=t,n=s.last_flush,s.last_flush=e,s.status===ft)if(2===s.wrap)t.adler=0,l(s,31),l(s,139),l(s,8),s.gzhead?(l(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),l(s,255&s.gzhead.time),l(s,s.gzhead.time>>8&255),l(s,s.gzhead.time>>16&255),l(s,s.gzhead.time>>24&255),l(s,9===s.level?2:s.strategy>=X||s.level<2?4:0),l(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(l(s,255&s.gzhead.extra.length),l(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(t.adler=R(t.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=dt):(l(s,0),l(s,0),l(s,0),l(s,0),l(s,0),l(s,9===s.level?2:s.strategy>=X||s.level<2?4:0),l(s,St),s.status=mt);else{var d=K+(s.w_bits-8<<4)<<8,h=-1;h=s.strategy>=X||s.level<2?0:s.level<6?1:6===s.level?2:3,d|=h<<6,0!==s.strstart&&(d|=ct),d+=31-d%31,s.status=mt,u(s,d),0!==s.strstart&&(u(s,t.adler>>>16),u(s,65535&t.adler)),t.adler=1}if(s.status===dt)if(s.gzhead.extra){for(c=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>c&&(t.adler=R(t.adler,s.pending_buf,s.pending-c,c)),o(t),c=s.pending,s.pending!==s.pending_buf_size));)l(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>c&&(t.adler=R(t.adler,s.pending_buf,s.pending-c,c)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=ht)}else s.status=ht;if(s.status===ht)if(s.gzhead.name){c=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>c&&(t.adler=R(t.adler,s.pending_buf,s.pending-c,c)),o(t),c=s.pending,s.pending===s.pending_buf_size)){f=1;break}f=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,l(s,f)}while(0!==f);s.gzhead.hcrc&&s.pending>c&&(t.adler=R(t.adler,s.pending_buf,s.pending-c,c)),0===f&&(s.gzindex=0,s.status=pt)}else s.status=pt;if(s.status===pt)if(s.gzhead.comment){c=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>c&&(t.adler=R(t.adler,s.pending_buf,s.pending-c,c)),o(t),c=s.pending,s.pending===s.pending_buf_size)){f=1;break}f=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,l(s,f)}while(0!==f);s.gzhead.hcrc&&s.pending>c&&(t.adler=R(t.adler,s.pending_buf,s.pending-c,c)),0===f&&(s.status=vt)}else s.status=vt;if(s.status===vt&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&o(t),s.pending+2<=s.pending_buf_size&&(l(s,255&t.adler),l(s,t.adler>>8&255),t.adler=0,s.status=mt)):s.status=mt),0!==s.pending){if(o(t),0===t.avail_out)return s.last_flush=-1,V}else if(0===t.avail_in&&r(e)<=r(n)&&e!==F)return i(t,Y);if(s.status===gt&&0!==t.avail_in)return i(t,Y);if(0!==t.avail_in||0!==s.lookahead||e!==N&&s.status!==gt){var p=s.strategy===X?g(s,e):s.strategy===Z?m(s,e):P[s.level].func(s,e);if(p!==xt&&p!==bt||(s.status=gt),p===_t||p===xt)return 0===t.avail_out&&(s.last_flush=-1),V;if(p===yt&&(e===B?L._tr_align(s):e!==z&&(L._tr_stored_block(s,0,0,!1),e===O&&(a(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),o(t),0===t.avail_out))return s.last_flush=-1,V}return e!==F?V:s.wrap<=0?U:(2===s.wrap?(l(s,255&t.adler),l(s,t.adler>>8&255),l(s,t.adler>>16&255),l(s,t.adler>>24&255),l(s,255&t.total_in),l(s,t.total_in>>8&255),l(s,t.total_in>>16&255),l(s,t.total_in>>24&255)):(u(s,t.adler>>>16),u(s,65535&t.adler)),o(t),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?V:U)}function M(t){var e;return t&&t.state?(e=t.state.status)!==ft&&e!==dt&&e!==ht&&e!==pt&&e!==vt&&e!==mt&&e!==gt?i(t,G):(t.state=null,e===mt?i(t,H):V):G}function I(t,e){var n,i,r,o,s,l,u,c,f=e.length;if(!t||!t.state)return G;if(n=t.state,2===(o=n.wrap)||1===o&&n.status!==ft||n.lookahead)return G;for(1===o&&(t.adler=C(t.adler,e,f,0)),n.wrap=0,f>=n.w_size&&(0===o&&(a(n.head),n.strstart=0,n.block_start=0,n.insert=0),c=new k.Buf8(n.w_size),k.arraySet(c,e,f-n.w_size,n.w_size,0),e=c,f=n.w_size),s=t.avail_in,l=t.next_in,u=t.input,t.avail_in=f,t.next_in=0,t.input=e,d(n);n.lookahead>=st;){i=n.strstart,r=n.lookahead-(st-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+st-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++}while(--r);n.strstart=i,n.lookahead=st-1,d(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=st-1,n.match_available=0,t.next_in=l,t.input=u,t.avail_in=s,n.wrap=o,V}var P,k=n(262),L=n(1051),C=n(587),R=n(589),D=n(476),N=0,B=1,O=3,F=4,z=5,V=0,U=1,G=-2,H=-3,Y=-5,j=-1,W=1,X=2,Z=3,q=4,Q=0,J=2,K=8,$=9,tt=15,et=8,nt=286,it=30,rt=19,at=2*nt+1,ot=15,st=3,lt=258,ut=lt+st+1,ct=32,ft=42,dt=69,ht=73,pt=91,vt=103,mt=113,gt=666,_t=1,yt=2,xt=3,bt=4,St=3;P=[new _(0,0,0,0,h),new _(4,4,8,4,p),new _(4,5,16,8,p),new _(4,6,32,32,p),new _(4,4,16,16,v),new _(8,16,32,32,v),new _(8,16,128,128,v),new _(8,32,128,256,v),new _(32,128,258,1024,v),new _(32,258,258,4096,v)],e.deflateInit=A,e.deflateInit2=E,e.deflateReset=S,e.deflateResetKeep=b,e.deflateSetHeader=w,e.deflate=T,e.deflateEnd=M,e.deflateSetDictionary=I,e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,n){"use strict";function i(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}t.exports=i},function(t,e,n){"use strict";t.exports=function(t,e){var n,i,r,a,o,s,l,u,c,f,d,h,p,v,m,g,_,y,x,b,S,w,E,A,T;n=t.state,i=t.next_in,A=t.input,r=i+(t.avail_in-5),a=t.next_out,T=t.output,o=a-(e-t.avail_out),s=a+(t.avail_out-257),l=n.dmax,u=n.wsize,c=n.whave,f=n.wnext,d=n.window,h=n.hold,p=n.bits,v=n.lencode,m=n.distcode,g=(1<<n.lenbits)-1,_=(1<<n.distbits)-1;t:do{p<15&&(h+=A[i++]<<p,p+=8,h+=A[i++]<<p,p+=8),y=v[h&g];e:for(;;){if(x=y>>>24,h>>>=x,p-=x,0===(x=y>>>16&255))T[a++]=65535&y;else{if(!(16&x)){if(0==(64&x)){y=v[(65535&y)+(h&(1<<x)-1)];continue e}if(32&x){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}b=65535&y,x&=15,x&&(p<x&&(h+=A[i++]<<p,p+=8),b+=h&(1<<x)-1,h>>>=x,p-=x),p<15&&(h+=A[i++]<<p,p+=8,h+=A[i++]<<p,p+=8),y=m[h&_];n:for(;;){if(x=y>>>24,h>>>=x,p-=x,!(16&(x=y>>>16&255))){if(0==(64&x)){y=m[(65535&y)+(h&(1<<x)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(S=65535&y,x&=15,p<x&&(h+=A[i++]<<p,(p+=8)<x&&(h+=A[i++]<<p,p+=8)),(S+=h&(1<<x)-1)>l){t.msg="invalid distance too far back",n.mode=30;break t}if(h>>>=x,p-=x,x=a-o,S>x){if((x=S-x)>c&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(w=0,E=d,0===f){if(w+=u-x,x<b){b-=x;do{T[a++]=d[w++]}while(--x);w=a-S,E=T}}else if(f<x){if(w+=u+f-x,(x-=f)<b){b-=x;do{T[a++]=d[w++]}while(--x);if(w=0,f<b){x=f,b-=x;do{T[a++]=d[w++]}while(--x);w=a-S,E=T}}}else if(w+=f-x,x<b){b-=x;do{T[a++]=d[w++]}while(--x);w=a-S,E=T}for(;b>2;)T[a++]=E[w++],T[a++]=E[w++],T[a++]=E[w++],b-=3;b&&(T[a++]=E[w++],b>1&&(T[a++]=E[w++]))}else{w=a-S;do{T[a++]=T[w++],T[a++]=T[w++],T[a++]=T[w++],b-=3}while(b>2);b&&(T[a++]=T[w++],b>1&&(T[a++]=T[w++]))}break}}break}}while(i<r&&a<s);b=p>>3,i-=b,p-=b<<3,h&=(1<<p)-1,t.next_in=i,t.next_out=a,t.avail_in=i<r?r-i+5:5-(i-r),t.avail_out=a<s?s-a+257:257-(a-s),n.hold=h,n.bits=p}},function(t,e,n){"use strict";function i(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function r(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new _.Buf16(320),this.work=new _.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function a(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=O,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new _.Buf32(vt),e.distcode=e.distdyn=new _.Buf32(mt),e.sane=1,e.back=-1,P):C}function o(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,a(t)):C}function s(t,e){var n,i;return t&&t.state?(i=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?C:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,o(t))):C}function l(t,e){var n,i;return t?(i=new r,t.state=i,i.window=null,n=s(t,e),n!==P&&(t.state=null),n):C}function u(t){return l(t,gt)}function c(t){if(_t){var e;for(m=new _.Buf32(512),g=new _.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(S(E,t.lens,0,288,m,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;S(A,t.lens,0,32,g,0,t.work,{bits:5}),_t=!1}t.lencode=m,t.lenbits=9,t.distcode=g,t.distbits=5}function f(t,e,n,i){var r,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new _.Buf8(a.wsize)),i>=a.wsize?(_.arraySet(a.window,e,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(r=a.wsize-a.wnext,r>i&&(r=i),_.arraySet(a.window,e,n-i,r,a.wnext),i-=r,i?(_.arraySet(a.window,e,n-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=r,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=r))),0}function d(t,e){var n,r,a,o,s,l,u,d,h,p,v,m,g,vt,mt,gt,_t,yt,xt,bt,St,wt,Et,At,Tt=0,Mt=new _.Buf8(4),It=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return C;n=t.state,n.mode===Z&&(n.mode=q),s=t.next_out,a=t.output,u=t.avail_out,o=t.next_in,r=t.input,l=t.avail_in,d=n.hold,h=n.bits,p=l,v=u,wt=P;t:for(;;)switch(n.mode){case O:if(0===n.wrap){n.mode=q;break}for(;h<16;){if(0===l)break t;l--,d+=r[o++]<<h,h+=8}if(2&n.wrap&&35615===d){n.check=0,Mt[0]=255&d,Mt[1]=d>>>8&255,n.check=x(n.check,Mt,2,0),d=0,h=0,n.mode=F;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&d)<<8)+(d>>8))%31){t.msg="incorrect header check",n.mode=dt;break}if((15&d)!==B){t.msg="unknown compression method",n.mode=dt;break}if(d>>>=4,h-=4,St=8+(15&d),0===n.wbits)n.wbits=St;else if(St>n.wbits){t.msg="invalid window size",n.mode=dt;break}n.dmax=1<<St,t.adler=n.check=1,n.mode=512&d?W:Z,d=0,h=0;break;case F:for(;h<16;){if(0===l)break t;l--,d+=r[o++]<<h,h+=8}if(n.flags=d,(255&n.flags)!==B){t.msg="unknown compression method",n.mode=dt;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=dt;break}n.head&&(n.head.text=d>>8&1),512&n.flags&&(Mt[0]=255&d,Mt[1]=d>>>8&255,n.check=x(n.check,Mt,2,0)),d=0,h=0,n.mode=z;case z:for(;h<32;){if(0===l)break t;l--,d+=r[o++]<<h,h+=8}n.head&&(n.head.time=d),512&n.flags&&(Mt[0]=255&d,Mt[1]=d>>>8&255,Mt[2]=d>>>16&255,Mt[3]=d>>>24&255,n.check=x(n.check,Mt,4,0)),d=0,h=0,n.mode=V;case V:for(;h<16;){if(0===l)break t;l--,d+=r[o++]<<h,h+=8}n.head&&(n.head.xflags=255&d,n.head.os=d>>8),512&n.flags&&(Mt[0]=255&d,Mt[1]=d>>>8&255,n.check=x(n.check,Mt,2,0)),d=0,h=0,n.mode=U;case U:if(1024&n.flags){for(;h<16;){if(0===l)break t;l--,d+=r[o++]<<h,h+=8}n.length=d,n.head&&(n.head.extra_len=d),512&n.flags&&(Mt[0]=255&d,Mt[1]=d>>>8&255,n.check=x(n.check,Mt,2,0)),d=0,h=0}else n.head&&(n.head.extra=null);n.mode=G;case G:if(1024&n.flags&&(m=n.length,m>l&&(m=l),m&&(n.head&&(St=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),_.arraySet(n.head.extra,r,o,m,St)),512&n.flags&&(n.check=x(n.check,r,m,o)),l-=m,o+=m,n.length-=m),n.length))break t;n.length=0,n.mode=H;case H:if(2048&n.flags){if(0===l)break t;m=0;do{St=r[o+m++],n.head&&St&&n.length<65536&&(n.head.name+=String.fromCharCode(St))}while(St&&m<l);if(512&n.flags&&(n.check=x(n.check,r,m,o)),l-=m,o+=m,St)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=Y;case Y:if(4096&n.flags){if(0===l)break t;m=0;do{St=r[o+m++],n.head&&St&&n.length<65536&&(n.head.comment+=String.fromCharCode(St))}while(St&&m<l);if(512&n.flags&&(n.check=x(n.check,r,m,o)),l-=m,o+=m,St)break t}else n.head&&(n.head.comment=null);n.mode=j;case j:if(512&n.flags){for(;h<16;){if(0===l)break t;l--,d+=r[o++]<<h,h+=8}if(d!==(65535&n.check)){t.msg="header crc mismatch",n.mode=dt;break}d=0,h=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=Z;break;case W:for(;h<32;){if(0===l)break t;l--,d+=r[o++]<<h,h+=8}t.adler=n.check=i(d),d=0,h=0,n.mode=X;case X:if(0===n.havedict)return t.next_out=s,t.avail_out=u,t.next_in=o,t.avail_in=l,n.hold=d,n.bits=h,L;t.adler=n.check=1,n.mode=Z;case Z:if(e===M||e===I)break t;case q:if(n.last){d>>>=7&h,h-=7&h,n.mode=ut;break}for(;h<3;){if(0===l)break t;l--,d+=r[o++]<<h,h+=8}switch(n.last=1&d,d>>>=1,h-=1,3&d){case 0:n.mode=Q;break;case 1:if(c(n),n.mode=nt,e===I){d>>>=2,h-=2;break t}break;case 2:n.mode=$;break;case 3:t.msg="invalid block type",n.mode=dt}d>>>=2,h-=2;break;case Q:for(d>>>=7&h,h-=7&h;h<32;){if(0===l)break t;l--,d+=r[o++]<<h,h+=8}if((65535&d)!=(d>>>16^65535)){t.msg="invalid stored block lengths",n.mode=dt;break}if(n.length=65535&d,d=0,h=0,n.mode=J,e===I)break t;case J:n.mode=K;case K:if(m=n.length){if(m>l&&(m=l),m>u&&(m=u),0===m)break t;_.arraySet(a,r,o,m,s),l-=m,o+=m,u-=m,s+=m,n.length-=m;break}n.mode=Z;break;case $:for(;h<14;){if(0===l)break t;l--,d+=r[o++]<<h,h+=8}if(n.nlen=257+(31&d),d>>>=5,h-=5,n.ndist=1+(31&d),d>>>=5,h-=5,n.ncode=4+(15&d),d>>>=4,h-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=dt;break}n.have=0,n.mode=tt;case tt:for(;n.have<n.ncode;){for(;h<3;){if(0===l)break t;l--,d+=r[o++]<<h,h+=8}n.lens[It[n.have++]]=7&d,d>>>=3,h-=3}for(;n.have<19;)n.lens[It[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Et={bits:n.lenbits},wt=S(w,n.lens,0,19,n.lencode,0,n.work,Et),n.lenbits=Et.bits,wt){t.msg="invalid code lengths set",n.mode=dt;break}n.have=0,n.mode=et;case et:for(;n.have<n.nlen+n.ndist;){for(;Tt=n.lencode[d&(1<<n.lenbits)-1],mt=Tt>>>24,gt=Tt>>>16&255,_t=65535&Tt,!(mt<=h);){if(0===l)break t;l--,d+=r[o++]<<h,h+=8}if(_t<16)d>>>=mt,h-=mt,n.lens[n.have++]=_t;else{if(16===_t){for(At=mt+2;h<At;){if(0===l)break t;l--,d+=r[o++]<<h,h+=8}if(d>>>=mt,h-=mt,0===n.have){t.msg="invalid bit length repeat",n.mode=dt;break}St=n.lens[n.have-1],m=3+(3&d),d>>>=2,h-=2}else if(17===_t){for(At=mt+3;h<At;){if(0===l)break t;l--,d+=r[o++]<<h,h+=8}d>>>=mt,h-=mt,St=0,m=3+(7&d),d>>>=3,h-=3}else{for(At=mt+7;h<At;){if(0===l)break t;l--,d+=r[o++]<<h,h+=8}d>>>=mt,h-=mt,St=0,m=11+(127&d),d>>>=7,h-=7}if(n.have+m>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=dt;break}for(;m--;)n.lens[n.have++]=St}}if(n.mode===dt)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=dt;break}if(n.lenbits=9,Et={bits:n.lenbits},wt=S(E,n.lens,0,n.nlen,n.lencode,0,n.work,Et),n.lenbits=Et.bits,wt){t.msg="invalid literal/lengths set",n.mode=dt;break}if(n.distbits=6,n.distcode=n.distdyn,Et={bits:n.distbits},wt=S(A,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Et),n.distbits=Et.bits,wt){t.msg="invalid distances set",n.mode=dt;break}if(n.mode=nt,e===I)break t;case nt:n.mode=it;case it:if(l>=6&&u>=258){t.next_out=s,t.avail_out=u,t.next_in=o,t.avail_in=l,n.hold=d,n.bits=h,b(t,v),s=t.next_out,a=t.output,u=t.avail_out,o=t.next_in,r=t.input,l=t.avail_in,d=n.hold,h=n.bits,n.mode===Z&&(n.back=-1);break}for(n.back=0;Tt=n.lencode[d&(1<<n.lenbits)-1],mt=Tt>>>24,gt=Tt>>>16&255,_t=65535&Tt,!(mt<=h);){if(0===l)break t;l--,d+=r[o++]<<h,h+=8}if(gt&&0==(240&gt)){for(yt=mt,xt=gt,bt=_t;Tt=n.lencode[bt+((d&(1<<yt+xt)-1)>>yt)],mt=Tt>>>24,gt=Tt>>>16&255,_t=65535&Tt,!(yt+mt<=h);){if(0===l)break t;l--,d+=r[o++]<<h,h+=8}d>>>=yt,h-=yt,n.back+=yt}if(d>>>=mt,h-=mt,n.back+=mt,n.length=_t,0===gt){n.mode=lt;break}if(32&gt){n.back=-1,n.mode=Z;break}if(64&gt){t.msg="invalid literal/length code",n.mode=dt;break}n.extra=15&gt,n.mode=rt;case rt:if(n.extra){for(At=n.extra;h<At;){if(0===l)break t;l--,d+=r[o++]<<h,h+=8}n.length+=d&(1<<n.extra)-1,d>>>=n.extra,h-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=at;case at:for(;Tt=n.distcode[d&(1<<n.distbits)-1],mt=Tt>>>24,gt=Tt>>>16&255,_t=65535&Tt,!(mt<=h);){if(0===l)break t;l--,d+=r[o++]<<h,h+=8}if(0==(240&gt)){for(yt=mt,xt=gt,bt=_t;Tt=n.distcode[bt+((d&(1<<yt+xt)-1)>>yt)],mt=Tt>>>24,gt=Tt>>>16&255,_t=65535&Tt,!(yt+mt<=h);){if(0===l)break t;l--,d+=r[o++]<<h,h+=8}d>>>=yt,h-=yt,n.back+=yt}if(d>>>=mt,h-=mt,n.back+=mt,64&gt){t.msg="invalid distance code",n.mode=dt;break}n.offset=_t,n.extra=15&gt,n.mode=ot;case ot:if(n.extra){for(At=n.extra;h<At;){if(0===l)break t;l--,d+=r[o++]<<h,h+=8}n.offset+=d&(1<<n.extra)-1,d>>>=n.extra,h-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=dt;break}n.mode=st;case st:if(0===u)break t;if(m=v-u,n.offset>m){if((m=n.offset-m)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=dt;break}m>n.wnext?(m-=n.wnext,g=n.wsize-m):g=n.wnext-m,m>n.length&&(m=n.length),vt=n.window}else vt=a,g=s-n.offset,m=n.length;m>u&&(m=u),u-=m,n.length-=m;do{a[s++]=vt[g++]}while(--m);0===n.length&&(n.mode=it);break;case lt:if(0===u)break t;a[s++]=n.length,u--,n.mode=it;break;case ut:if(n.wrap){for(;h<32;){if(0===l)break t;l--,d|=r[o++]<<h,h+=8}if(v-=u,t.total_out+=v,n.total+=v,v&&(t.adler=n.check=n.flags?x(n.check,a,v,s-v):y(n.check,a,v,s-v)),v=u,(n.flags?d:i(d))!==n.check){t.msg="incorrect data check",n.mode=dt;break}d=0,h=0}n.mode=ct;case ct:if(n.wrap&&n.flags){for(;h<32;){if(0===l)break t;l--,d+=r[o++]<<h,h+=8}if(d!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=dt;break}d=0,h=0}n.mode=ft;case ft:wt=k;break t;case dt:wt=R;break t;case ht:return D;case pt:default:return C}return t.next_out=s,t.avail_out=u,t.next_in=o,t.avail_in=l,n.hold=d,n.bits=h,(n.wsize||v!==t.avail_out&&n.mode<dt&&(n.mode<ut||e!==T))&&f(t,t.output,t.next_out,v-t.avail_out)?(n.mode=ht,D):(p-=t.avail_in,v-=t.avail_out,t.total_in+=p,t.total_out+=v,n.total+=v,n.wrap&&v&&(t.adler=n.check=n.flags?x(n.check,a,v,t.next_out-v):y(n.check,a,v,t.next_out-v)),t.data_type=n.bits+(n.last?64:0)+(n.mode===Z?128:0)+(n.mode===nt||n.mode===J?256:0),(0===p&&0===v||e===T)&&wt===P&&(wt=N),wt)}function h(t){if(!t||!t.state)return C;var e=t.state;return e.window&&(e.window=null),t.state=null,P}function p(t,e){var n;return t&&t.state?(n=t.state,0==(2&n.wrap)?C:(n.head=e,e.done=!1,P)):C}function v(t,e){var n,i,r=e.length;return t&&t.state?(n=t.state,0!==n.wrap&&n.mode!==X?C:n.mode===X&&(i=1,(i=y(i,e,r,0))!==n.check)?R:f(t,e,r,r)?(n.mode=ht,D):(n.havedict=1,P)):C}var m,g,_=n(262),y=n(587),x=n(589),b=n(1048),S=n(1050),w=0,E=1,A=2,T=4,M=5,I=6,P=0,k=1,L=2,C=-2,R=-3,D=-4,N=-5,B=8,O=1,F=2,z=3,V=4,U=5,G=6,H=7,Y=8,j=9,W=10,X=11,Z=12,q=13,Q=14,J=15,K=16,$=17,tt=18,et=19,nt=20,it=21,rt=22,at=23,ot=24,st=25,lt=26,ut=27,ct=28,ft=29,dt=30,ht=31,pt=32,vt=852,mt=592,gt=15,_t=!0;e.inflateReset=o,e.inflateReset2=s,e.inflateResetKeep=a,e.inflateInit=u,e.inflateInit2=l,e.inflate=d,e.inflateEnd=h,e.inflateGetHeader=p,e.inflateSetDictionary=v,e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,n){"use strict";var i=n(262),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,n,l,u,c,f,d){var h,p,v,m,g,_,y,x,b,S=d.bits,w=0,E=0,A=0,T=0,M=0,I=0,P=0,k=0,L=0,C=0,R=null,D=0,N=new i.Buf16(16),B=new i.Buf16(16),O=null,F=0;for(w=0;w<=15;w++)N[w]=0;for(E=0;E<l;E++)N[e[n+E]]++;for(M=S,T=15;T>=1&&0===N[T];T--);if(M>T&&(M=T),0===T)return u[c++]=20971520,u[c++]=20971520,d.bits=1,0;for(A=1;A<T&&0===N[A];A++);for(M<A&&(M=A),k=1,w=1;w<=15;w++)if(k<<=1,(k-=N[w])<0)return-1;if(k>0&&(0===t||1!==T))return-1;for(B[1]=0,w=1;w<15;w++)B[w+1]=B[w]+N[w];for(E=0;E<l;E++)0!==e[n+E]&&(f[B[e[n+E]]++]=E);if(0===t?(R=O=f,_=19):1===t?(R=r,D-=257,O=a,F-=257,_=256):(R=o,O=s,_=-1),C=0,E=0,w=A,g=c,I=M,P=0,v=-1,L=1<<M,m=L-1,1===t&&L>852||2===t&&L>592)return 1;for(;;){y=w-P,f[E]<_?(x=0,b=f[E]):f[E]>_?(x=O[F+f[E]],b=R[D+f[E]]):(x=96,b=0),h=1<<w-P,p=1<<I,A=p;do{p-=h,u[g+(C>>P)+p]=y<<24|x<<16|b|0}while(0!==p);for(h=1<<w-1;C&h;)h>>=1;if(0!==h?(C&=h-1,C+=h):C=0,E++,0==--N[w]){if(w===T)break;w=e[n+f[E]]}if(w>M&&(C&m)!==v){for(0===P&&(P=M),g+=A,I=w-P,k=1<<I;I+P<T&&!((k-=N[I+P])<=0);)I++,k<<=1;if(L+=1<<I,1===t&&L>852||2===t&&L>592)return 1;v=C&m,u[v]=M<<24|I<<16|g-c|0}}return 0!==C&&(u[g+C]=w-P<<24|64<<16|0),d.bits=M,0}},function(t,e,n){"use strict";function i(t){for(var e=t.length;--e>=0;)t[e]=0}function r(t,e,n,i,r){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=t&&t.length}function a(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function o(t){return t<256?at[t]:at[256+(t>>>7)]}function s(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function l(t,e,n){t.bi_valid>X-n?(t.bi_buf|=e<<t.bi_valid&65535,s(t,t.bi_buf),t.bi_buf=e>>X-t.bi_valid,t.bi_valid+=n-X):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function u(t,e,n){l(t,n[2*e],n[2*e+1])}function c(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function f(t){16===t.bi_valid?(s(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function d(t,e){var n,i,r,a,o,s,l=e.dyn_tree,u=e.max_code,c=e.stat_desc.static_tree,f=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,h=e.stat_desc.extra_base,p=e.stat_desc.max_length,v=0;for(a=0;a<=W;a++)t.bl_count[a]=0;for(l[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<j;n++)i=t.heap[n],a=l[2*l[2*i+1]+1]+1,a>p&&(a=p,v++),l[2*i+1]=a,i>u||(t.bl_count[a]++,o=0,i>=h&&(o=d[i-h]),s=l[2*i],t.opt_len+=s*(a+o),f&&(t.static_len+=s*(c[2*i+1]+o)));if(0!==v){do{for(a=p-1;0===t.bl_count[a];)a--;t.bl_count[a]--,t.bl_count[a+1]+=2,t.bl_count[p]--,v-=2}while(v>0);for(a=p;0!==a;a--)for(i=t.bl_count[a];0!==i;)(r=t.heap[--n])>u||(l[2*r+1]!==a&&(t.opt_len+=(a-l[2*r+1])*l[2*r],l[2*r+1]=a),i--)}}function h(t,e,n){var i,r,a=new Array(W+1),o=0;for(i=1;i<=W;i++)a[i]=o=o+n[i-1]<<1;for(r=0;r<=e;r++){var s=t[2*r+1];0!==s&&(t[2*r]=c(a[s]++,s))}}function p(){var t,e,n,i,a,o=new Array(W+1);for(n=0,i=0;i<V-1;i++)for(st[i]=n,t=0;t<1<<$[i];t++)ot[n++]=i;for(ot[n-1]=i,a=0,i=0;i<16;i++)for(lt[i]=a,t=0;t<1<<tt[i];t++)at[a++]=i;for(a>>=7;i<H;i++)for(lt[i]=a<<7,t=0;t<1<<tt[i]-7;t++)at[256+a++]=i;for(e=0;e<=W;e++)o[e]=0;for(t=0;t<=143;)it[2*t+1]=8,t++,o[8]++;for(;t<=255;)it[2*t+1]=9,t++,o[9]++;for(;t<=279;)it[2*t+1]=7,t++,o[7]++;for(;t<=287;)it[2*t+1]=8,t++,o[8]++;for(h(it,G+1,o),t=0;t<H;t++)rt[2*t+1]=5,rt[2*t]=c(t,5);ut=new r(it,$,U+1,G,W),ct=new r(rt,tt,0,H,W),ft=new r(new Array(0),et,0,Y,Z)}function v(t){var e;for(e=0;e<G;e++)t.dyn_ltree[2*e]=0;for(e=0;e<H;e++)t.dyn_dtree[2*e]=0;for(e=0;e<Y;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*q]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function m(t){t.bi_valid>8?s(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function g(t,e,n,i){m(t),i&&(s(t,n),s(t,~n)),C.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}function _(t,e,n,i){var r=2*e,a=2*n;return t[r]<t[a]||t[r]===t[a]&&i[e]<=i[n]}function y(t,e,n){for(var i=t.heap[n],r=n<<1;r<=t.heap_len&&(r<t.heap_len&&_(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!_(e,i,t.heap[r],t.depth));)t.heap[n]=t.heap[r],n=r,r<<=1;t.heap[n]=i}function x(t,e,n){var i,r,a,s,c=0;if(0!==t.last_lit)do{i=t.pending_buf[t.d_buf+2*c]<<8|t.pending_buf[t.d_buf+2*c+1],r=t.pending_buf[t.l_buf+c],c++,0===i?u(t,r,e):(a=ot[r],u(t,a+U+1,e),s=$[a],0!==s&&(r-=st[a],l(t,r,s)),i--,a=o(i),u(t,a,n),0!==(s=tt[a])&&(i-=lt[a],l(t,i,s)))}while(c<t.last_lit);u(t,q,e)}function b(t,e){var n,i,r,a=e.dyn_tree,o=e.stat_desc.static_tree,s=e.stat_desc.has_stree,l=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=j,n=0;n<l;n++)0!==a[2*n]?(t.heap[++t.heap_len]=u=n,t.depth[n]=0):a[2*n+1]=0;for(;t.heap_len<2;)r=t.heap[++t.heap_len]=u<2?++u:0,a[2*r]=1,t.depth[r]=0,t.opt_len--,s&&(t.static_len-=o[2*r+1]);for(e.max_code=u,n=t.heap_len>>1;n>=1;n--)y(t,a,n);r=l;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],y(t,a,1),i=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=i,a[2*r]=a[2*n]+a[2*i],t.depth[r]=(t.depth[n]>=t.depth[i]?t.depth[n]:t.depth[i])+1,a[2*n+1]=a[2*i+1]=r,t.heap[1]=r++,y(t,a,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],d(t,e),h(a,u,t.bl_count)}function S(t,e,n){var i,r,a=-1,o=e[1],s=0,l=7,u=4;for(0===o&&(l=138,u=3),e[2*(n+1)+1]=65535,i=0;i<=n;i++)r=o,o=e[2*(i+1)+1],++s<l&&r===o||(s<u?t.bl_tree[2*r]+=s:0!==r?(r!==a&&t.bl_tree[2*r]++,t.bl_tree[2*Q]++):s<=10?t.bl_tree[2*J]++:t.bl_tree[2*K]++,s=0,a=r,0===o?(l=138,u=3):r===o?(l=6,u=3):(l=7,u=4))}function w(t,e,n){var i,r,a=-1,o=e[1],s=0,c=7,f=4;for(0===o&&(c=138,f=3),i=0;i<=n;i++)if(r=o,o=e[2*(i+1)+1],!(++s<c&&r===o)){if(s<f)do{u(t,r,t.bl_tree)}while(0!=--s);else 0!==r?(r!==a&&(u(t,r,t.bl_tree),s--),u(t,Q,t.bl_tree),l(t,s-3,2)):s<=10?(u(t,J,t.bl_tree),l(t,s-3,3)):(u(t,K,t.bl_tree),l(t,s-11,7));s=0,a=r,0===o?(c=138,f=3):r===o?(c=6,f=3):(c=7,f=4)}}function E(t){var e;for(S(t,t.dyn_ltree,t.l_desc.max_code),S(t,t.dyn_dtree,t.d_desc.max_code),b(t,t.bl_desc),e=Y-1;e>=3&&0===t.bl_tree[2*nt[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}function A(t,e,n,i){var r;for(l(t,e-257,5),l(t,n-1,5),l(t,i-4,4),r=0;r<i;r++)l(t,t.bl_tree[2*nt[r]+1],3);w(t,t.dyn_ltree,e-1),w(t,t.dyn_dtree,n-1)}function T(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return D;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return N;for(e=32;e<U;e++)if(0!==t.dyn_ltree[2*e])return N;return D}function M(t){dt||(p(),dt=!0),t.l_desc=new a(t.dyn_ltree,ut),t.d_desc=new a(t.dyn_dtree,ct),t.bl_desc=new a(t.bl_tree,ft),t.bi_buf=0,t.bi_valid=0,v(t)}function I(t,e,n,i){l(t,(O<<1)+(i?1:0),3),g(t,e,n,!0)}function P(t){l(t,F<<1,3),u(t,q,it),f(t)}function k(t,e,n,i){var r,a,o=0;t.level>0?(t.strm.data_type===B&&(t.strm.data_type=T(t)),b(t,t.l_desc),b(t,t.d_desc),o=E(t),r=t.opt_len+3+7>>>3,(a=t.static_len+3+7>>>3)<=r&&(r=a)):r=a=n+5,n+4<=r&&-1!==e?I(t,e,n,i):t.strategy===R||a===r?(l(t,(F<<1)+(i?1:0),3),x(t,it,rt)):(l(t,(z<<1)+(i?1:0),3),A(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),x(t,t.dyn_ltree,t.dyn_dtree)),v(t),i&&m(t)}function L(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(ot[n]+U+1)]++,t.dyn_dtree[2*o(e)]++),t.last_lit===t.lit_bufsize-1}var C=n(262),R=4,D=0,N=1,B=2,O=0,F=1,z=2,V=29,U=256,G=U+1+V,H=30,Y=19,j=2*G+1,W=15,X=16,Z=7,q=256,Q=16,J=17,K=18,$=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],tt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],et=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],nt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],it=new Array(2*(G+2));i(it);var rt=new Array(2*H);i(rt);var at=new Array(512);i(at);var ot=new Array(256);i(ot);var st=new Array(V);i(st);var lt=new Array(H);i(lt);var ut,ct,ft,dt=!1;e._tr_init=M,e._tr_stored_block=I,e._tr_flush_block=k,e._tr_tally=L,e._tr_align=P},function(t,e){t.exports="# WaveFront *.obj file (generated by CINEMA 4D)\n\nmtllib ./escalator.mtl\n\nv -10.38787460327148 3.49382448196411 0.05786377936602\nv -10.38787460327148 2.83549332618713 0.05786377936602\nv 8.37319946289062 3.49382448196411 15.20390701293945\nv 8.37319946289062 2.83549332618713 15.20390701293945\nv -15.11080265045166 2.83549332618713 4.95054340362549\nv -15.11080265045166 3.49382448196411 4.95054340362549\nv -17.63106727600098 3.49382448196411 2.51569700241089\nv -17.63106727600098 2.83549332618713 2.51569700241089\nv -15.63636589050293 2.83549332618713 4.89701271057129\nv -16.17062377929688 2.83549332618713 4.72479200363159\nv -16.67029190063477 2.83549332618713 4.42842483520508\nv -17.09063148498535 2.83549332618713 4.02233219146729\nv -17.39739608764648 2.83549332618713 3.53959894180298\nv -17.57565879821777 2.83549332618713 3.02344822883606\nv -15.63636589050293 3.49382448196411 4.89701271057129\nv -16.17062377929688 3.49382448196411 4.72479200363159\nv -16.67029190063477 3.49382448196411 4.42842483520508\nv -17.09063148498535 3.49382448196411 4.02233219146729\nv -17.39739608764648 3.49382448196411 3.53959894180298\nv -17.57565879821777 3.49382448196411 3.02344822883606\nv -15.11080265045166 3.49382448196411 0.05786377936602\nv -15.11080265045166 2.83549332618713 0.05786377936602\nv -17.63106727600098 3.49382448196411 2.49271011352539\nv -17.63106727600098 2.83549332618713 2.49271011352539\nv -15.63636589050293 3.49382448196411 0.11139420419931\nv -16.17062377929688 3.49382448196411 0.28361487388611\nv -16.67029190063477 3.49382448196411 0.57998245954514\nv -17.09063148498535 3.49382448196411 0.9860748052597\nv -17.39739608764648 3.49382448196411 1.4688081741333\nv -17.57565879821777 3.49382448196411 1.98495888710022\nv -15.63636589050293 2.83549332618713 0.11139420419931\nv -16.17062377929688 2.83549332618713 0.28361487388611\nv -16.67029190063477 2.83549332618713 0.57998245954514\nv -17.09063148498535 2.83549332618713 0.9860748052597\nv -17.39739608764648 2.83549332618713 1.4688081741333\nv -17.57565879821777 2.83549332618713 1.98495888710022\nv 13.17253494262695 3.49382448196411 20.09658622741699\nv 13.17253494262695 2.83549332618713 20.09658622741699\nv 15.69279861450195 2.83549332618713 17.66173934936523\nv 15.69279861450195 3.49382448196411 17.66173934936523\nv 13.69809818267822 3.49382448196411 20.04305648803711\nv 14.23235607147217 3.49382448196411 19.87083435058594\nv 14.73202419281006 3.49382448196411 19.5744686126709\nv 15.15236282348633 3.49382448196411 19.16837501525879\nv 15.45912742614746 3.49382448196411 18.68564224243164\nv 15.63739013671875 3.49382448196411 18.16949081420898\nv 13.69809818267822 2.83549332618713 20.04305648803711\nv 14.23235607147217 2.83549332618713 19.87083435058594\nv 14.73202419281006 2.83549332618713 19.5744686126709\nv 15.15236282348633 2.83549332618713 19.16837501525879\nv 15.45912742614746 2.83549332618713 18.68564224243164\nv 15.63739013671875 2.83549332618713 18.16949081420898\nv 13.17253494262695 2.83549332618713 15.20390701293945\nv 13.17253494262695 3.49382448196411 15.20390701293945\nv 15.69279861450195 2.83549332618713 17.63875389099121\nv 15.69279861450195 3.49382448196411 17.63875389099121\nv 13.69809818267822 2.83549332618713 15.25743770599365\nv 14.23235607147217 2.83549332618713 15.42965793609619\nv 14.73202419281006 2.83549332618713 15.72602558135986\nv 15.15236282348633 2.83549332618713 16.13211822509766\nv 15.45912742614746 2.83549332618713 16.6148509979248\nv 15.63739013671875 2.83549332618713 17.13100242614746\nv 13.69809818267822 3.49382448196411 15.25743770599365\nv 14.23235607147217 3.49382448196411 15.42965793609619\nv 14.73202419281006 3.49382448196411 15.72602558135986\nv 15.15236282348633 3.49382448196411 16.13211822509766\nv 15.45912742614746 3.49382448196411 16.6148509979248\nv 15.63739013671875 3.49382448196411 17.13100242614746\nv -10.38787460327148 2.83549332618713 4.22026777267456\nv -9.80783653259277 2.83549332618713 5.41881465911865\nv -9.80783653259277 3.49382448196411 5.41881465911865\nv -11.14376926422119 2.83549332618713 4.95054340362549\nv -11.14376926422119 3.49382448196411 4.95054340362549\nv -10.38787460327148 3.49382448196411 4.22026777267456\nv -10.93948745727539 2.83549332618713 4.96024227142334\nv -10.7346715927124 2.83549332618713 4.98972845077515\nv -10.53240394592285 2.83549332618713 5.03915452957153\nv -10.33578205108643 2.83549332618713 5.10807466506958\nv -10.14776611328125 2.83549332618713 5.19545078277588\nv -9.97102928161621 2.83549332618713 5.29970645904541\nv -9.97102928161621 3.49382448196411 5.29970645904541\nv -10.14776611328125 3.49382448196411 5.19545078277588\nv -10.33578205108643 3.49382448196411 5.10807466506958\nv -10.53240394592285 3.49382448196411 5.03915452957153\nv -10.7346715927124 3.49382448196411 4.98972845077515\nv -10.93948745727539 3.49382448196411 4.96024227142334\nv 8.37319946289062 2.83549332618713 19.37121200561523\nv 7.79705476760864 2.83549332618713 19.6314582824707\nv 7.79705476760864 3.49382448196411 19.6314582824707\nv 9.12402153015137 3.49382448196411 20.09658622741699\nv 9.12402153015137 2.83549332618713 20.09658622741699\nv 8.37319946289062 3.49382448196411 19.37121200561523\nv 7.95915222167969 2.83549332618713 19.7497673034668\nv 8.13470268249512 2.83549332618713 19.85332298278809\nv 8.32145690917969 2.83549332618713 19.94011306762695\nv 8.51675891876221 2.83549332618713 20.00856971740723\nv 8.71766948699951 2.83549332618713 20.05766487121582\nv 8.92111110687256 2.83549332618713 20.08695220947266\nv 8.92111110687256 3.49382448196411 20.08695220947266\nv 8.71766948699951 3.49382448196411 20.05766487121582\nv 8.51675891876221 3.49382448196411 20.00856971740723\nv 8.32145690917969 3.49382448196411 19.94011306762695\nv 8.13470268249512 3.49382448196411 19.85332298278809\nv 7.95915222167969 3.49382448196411 19.7497673034668\n# 104 vertices\n\nvn 0 0 1\nvn 0 0 0\nvn 1 0 0\nvn 0 0 -1\nvn -1 0 0\nvn 0 1 0\nvn 0.33310228586197 -0.94289070367813 0\nvn 0 -1 0\nvn -0.62815809249878 0.77808576822281 0\nvn -0.1013290733099 0.99485296010971 0\nvn -0.20520241558552 0.97871953248978 0\nvn -0.41104024648666 0.91161721944809 0\nvn -0.6065838932991 0.7950194478035 0\nvn -0.77482038736343 0.63218140602112 0\nvn -0.90074276924133 0.43435296416283 0\nvn -0.97576230764389 0.21883322298527 0\nvn -0.99409872293472 0.10847935080528 0\nvn -0.10132952034473 -0.99485290050507 0\nvn -0.20520263910294 -0.97871953248978 0\nvn -0.41104024648666 -0.91161721944809 0\nvn -0.6065838932991 -0.7950194478035 0\nvn -0.77482026815414 -0.63218152523041 0\nvn -0.90074276924133 -0.43435296416283 0\nvn -0.97576230764389 -0.21883311867714 0\nvn -0.99409866333008 -0.10847944766283 0\nvn 0.10132952034473 0.99485290050507 0\nvn 0.20520223677158 0.97871959209442 0\nvn 0.41103982925415 0.91161739826202 0\nvn 0.60658365488052 0.79501962661743 0\nvn 0.77482026815414 0.63218152523041 0\nvn 0.90074348449707 0.43435138463974 0\nvn 0.97576242685318 0.21883250772953 0\nvn 0.99409848451614 0.10848119109869 0\nvn 0.10132862627506 -0.99485301971436 0\nvn 0.20520259439945 -0.97871953248978 0\nvn 0.41104060411453 -0.91161704063416 0\nvn 0.60658323764801 -0.7950199842453 0\nvn 0.77481991052628 -0.63218206167221 0\nvn 0.90074348449707 -0.43435138463974 0\nvn 0.97576242685318 -0.21883250772953 0\nvn 0.99409848451614 -0.10848119109869 0\nvn -0.58953845500946 0.80774033069611 0\nvn -0.54946291446686 0.83551812171936 0\nvn -0.46531841158867 0.88514333963394 0\nvn -0.37656545639038 0.92638999223709 0\nvn -0.28441932797432 0.95870000123978 0\nvn -0.19015780091286 0.98175352811813 0\nvn -0.09506894648075 0.99547070264816 0\nvn -0.04742458090186 0.99887484312058 0\nvn -0.04742596670985 0.99887478351593 0\nvn -0.09506894648075 0.99547070264816 0\nvn -0.19015677273273 0.98175370693207 0\nvn -0.28441941738129 0.95869994163513 0\nvn -0.37656646966934 0.92638963460922 0\nvn -0.46531823277473 0.88514345884323 0\nvn -0.54946219921112 0.83551859855652 0\n# 56 normals\n\nvt 1 0 0\nvt 0.81572288274765 0 0\nvt 1 1 0\nvt 0 0.49765086174011 0\nvt 0 0.50234913825989 0\nvt 1 0.50234913825989 0\nvt 1 0.49765086174011 0\nvt 0 1 0\nvt 0.8346254825592 1 0\nvt 0.9365501999855 1 0\nvt 0.9365501999855 0 0\nvt 0.8346254825592 0 0\nvt 0.81572288274765 1 0\nvt 0.13769590854645 0 0\nvt 0.05349377542734 0 0\nvt 0.05349377542734 1 0\nvt 0.13769590854645 1 0\nvt 0.15374012291431 0 0\nvt 0.15374012291431 1 0\nvt 0.7953936457634 0 0\nvt 0.17420670390129 0 0\nvt 0.17420670390129 1 0\nvt 0.7953936457634 1 0\nvt 0.18427714705467 0 0\nvt 0.18427714705467 1 0\nvt 0 0 0\nvt -0.02524117194116 0 0\nvt -0.02524117194116 1 0\nvt -0.10397612303495 0 0\nvt -0.10397612303495 1 0\nvt -0.18271106481552 0 0\nvt -0.18271106481552 1 0\nvt -0.26144602894783 0 0\nvt -0.26144602894783 1 0\nvt -0.34018096327782 0 0\nvt -0.34018096327782 1 0\nvt -0.41891592741013 0 0\nvt -0.41891592741013 1 0\nvt -0.49765086174011 0 0\nvt -0.49765086174011 1 0\nvt 0.84625989198685 0 0\nvt 1.01670742034912 1 0\nvt 1.01670742034912 0 0\nvt 1.09686470031738 1 0\nvt 1.09686470031738 0 0\nvt 1.17702186107636 1 0\nvt 1.17702186107636 0 0\nvt 1.25717914104462 1 0\nvt 1.25717914104462 0 0\nvt 1.33733642101288 1 0\nvt 1.33733642101288 0 0\nvt 1.41749358177185 1 0\nvt 1.41749358177185 0 0\nvt 1.49765086174011 1 0\nvt 1.49765086174011 0 0\nvt 0.16899088025093 0 0\nvt 0.16899088025093 1 0\nvt 0.15374012291431 0.850741147995 0\nvt 0.30622574687004 0.35800528526306 0\nvt 0.45763164758682 0.31676697731018 0\nvt 0.60481113195419 0.25926399230957 0\nvt 0.74554884433746 0.18636214733124 0\nvt 0.87784332036972 0.09937715530396 0\nvt 0.15291278064251 0.38260698318481 0\nvt 0.84625989198685 0.850741147995 0\nvt 0.16377504169941 0 0\nvt 0.16377504169941 1 0\nvt 0.15855921804905 0 0\nvt 0.15855921804905 1 0\nvt 0.15334339439869 0 0\nvt 0.15334339439869 1 0\nvt 0.14812757074833 0 0\nvt 0.14812757074833 1 0\nvt 0.14291173219681 0 0\nvt 0.14291173219681 1 0\nvt 0.82902091741562 0 0\nvt 0.82902091741562 1 0\nvt 0.81572288274765 0.85174286365509 0\nvt 0.69377422332764 0.05365812778473 0\nvt 0.84708720445633 0.01328134536743 0\nvt 0.12215665727854 0.47812533378601 0\nvt 0.25445115566254 0.33536338806152 0\nvt 0.39518883824348 0.21571493148804 0\nvt 0.54236835241318 0.12133967876434 0\nvt 0.18427714705467 0.85174286365509 0\nvt 0.82341641187668 0 0\nvt 0.82341641187668 1 0\nvt 0.81781184673309 0 0\nvt 0.81781184673309 1 0\nvt 0.81220728158951 0 0\nvt 0.81220728158951 1 0\nvt 0.80660271644592 0 0\nvt 0.80660271644592 1 0\nvt 0.80099821090698 0 0\nvt 0.80099821090698 1 0\n# 95 texture coordinates\n\no 1\nusemtl escalator3\nf 4/2/2 53/2/1 57/8/1 58/26/1 59/3/1 60/1/1 61/26/1 62/1/1 55/3/1 39/26/1 52/3/1 51/1/1 50/3/1 49/3/1 48/2/1 47/1/1 38/8/1 91/2/1 87/8/1\nf 56/7/3 40/6/3 39/5/3 55/4/3\nf 3/24/2 92/3/4 90/3/4 37/8/4 41/1/4 42/3/4 43/26/4 44/3/4 45/1/4 46/8/4 40/3/4 56/1/4 68/3/4 67/3/4 66/3/4 65/3/4 64/1/4 63/1/4 54/8/4\nf 24/7/5 8/6/5 7/5/5 23/4/5\nf 91/12/6 38/11/6 37/10/6 90/9/6\nf 3/2/7 54/11/8 53/10/8 4/13/7\nf 73/17/6 6/16/6 5/15/6 72/14/6\nf 1/41/2 21/8/4 25/26/4 26/1/4 27/3/4 28/3/4 29/1/4 30/3/4 23/3/4 7/1/4 20/3/4 19/8/4 18/26/4 17/1/4 16/3/4 15/3/4 6/3/4 73/1/4 74/3/4\nf 2/19/7 22/16/8 21/15/8 1/18/7\nf 69/1/2 72/1/1 5/8/1 9/3/1 10/26/1 11/1/1 12/3/1 13/1/1 14/3/1 8/3/1 24/1/1 36/8/1 35/3/1 34/3/1 33/26/1 32/3/1 31/26/1 22/1/1 2/18/1\nf 89/23/9 71/22/9 70/21/9 88/20/9\nf 3/24/2 1/41/4 74/3/4 71/8/4 89/3/4 92/24/4\nf 4/13/7 2/19/7 1/18/7 3/2/7\nf 87/1/2 88/3/1 70/1/1 69/3/1 2/18/1 4/2/1\nf 6/16/10 15/28/11 9/27/11 5/15/10\nf 15/28/11 16/30/12 10/29/12 9/27/11\nf 16/30/12 17/32/13 11/31/13 10/29/12\nf 17/32/13 18/34/14 12/33/14 11/31/13\nf 18/34/14 19/36/15 13/35/15 12/33/14\nf 19/36/15 20/38/16 14/37/16 13/35/15\nf 20/38/16 7/40/17 8/39/17 14/37/16\nf 22/16/18 31/28/19 25/27/19 21/15/18\nf 31/28/19 32/30/20 26/29/20 25/27/19\nf 32/30/20 33/32/21 27/31/21 26/29/20\nf 33/32/21 34/34/22 28/33/22 27/31/21\nf 34/34/22 35/36/23 29/35/23 28/33/22\nf 35/36/23 36/38/24 30/37/24 29/35/23\nf 36/38/24 24/40/25 23/39/25 30/37/24\nf 38/11/26 47/43/27 41/42/27 37/10/26\nf 47/43/27 48/45/28 42/44/28 41/42/27\nf 48/45/28 49/47/29 43/46/29 42/44/28\nf 49/47/29 50/49/30 44/48/30 43/46/29\nf 50/49/30 51/51/31 45/50/31 44/48/30\nf 51/51/31 52/53/32 46/52/32 45/50/31\nf 52/53/32 39/55/33 40/54/33 46/52/32\nf 54/11/34 63/43/35 57/42/35 53/10/34\nf 63/43/35 64/45/36 58/44/36 57/42/35\nf 64/45/36 65/47/37 59/46/37 58/44/36\nf 65/47/37 66/49/38 60/48/38 59/46/37\nf 66/49/38 67/51/39 61/50/39 60/48/38\nf 67/51/39 68/53/40 62/52/40 61/50/39\nf 68/53/40 56/55/41 55/54/41 62/52/40\nf 71/22/42 81/57/43 80/56/43 70/21/42\nf 80/63/2 79/62/1 78/61/1 77/60/1 76/59/1 75/64/1 72/14/1 69/58/1 70/21/1\nf 74/65/2 73/17/4 86/64/4 85/59/4 84/60/4 83/61/4 82/62/4 81/63/4 71/22/4\nf 81/57/43 82/67/44 79/66/44 80/56/43\nf 82/67/44 83/69/45 78/68/45 79/66/44\nf 83/69/45 84/71/46 77/70/46 78/68/45\nf 84/71/46 85/73/47 76/72/47 77/70/46\nf 85/73/47 86/75/48 75/74/48 76/72/47\nf 86/75/48 73/17/49 72/14/49 75/74/48\nf 90/9/50 99/77/51 98/76/51 91/12/50\nf 87/78/1 91/12/1 98/80/1 97/79/1 96/84/1 95/83/1 94/82/1 93/81/1 88/20/1\nf 104/81/4 103/82/4 102/83/4 101/84/4 100/79/4 99/80/4 90/9/4 92/85/4 89/23/4\nf 99/77/51 100/87/52 97/86/52 98/76/51\nf 100/87/52 101/89/53 96/88/53 97/86/52\nf 101/89/53 102/91/54 95/90/54 96/88/53\nf 102/91/54 103/93/55 94/92/55 95/90/54\nf 103/93/55 104/95/56 93/94/56 94/92/55\nf 104/95/56 89/23/42 88/20/42 93/94/56\n\nv -14.80749797821045 -2.56458234786987 0.06820003688335\nv -14.80749797821045 -2.56458234786987 0.12007328867912\nv 13.05556869506836 -2.56458234786987 15.21544075012207\nv 13.05556869506836 -2.56458234786987 15.25115966796875\nv 13.05556869506836 2.8786358833313 15.21544075012207\nv 13.05556869506836 2.8786358833313 15.25115966796875\nv -14.80749797821045 2.8786358833313 0.06820003688335\nv -14.80749797821045 2.8786358833313 0.12007328867912\nv -10.3766450881958 2.8786358833313 0.12007328867912\nv -10.3766450881958 2.8786358833313 0.06820003688335\nv -10.3766450881958 -2.56458234786987 0.06820003688335\nv -10.3766450881958 -2.56458234786987 0.12007328867912\nv 8.33759689331055 2.8786358833313 15.25115966796875\nv 8.33759689331055 -2.56458234786987 15.25115966796875\nv 8.33759689331055 -2.56458234786987 15.21544075012207\nv 8.33759689331055 2.8786358833313 15.21544075012207\n# 16 vertices\n\nvn -0.33345052599907 0.94276762008667 0\nvn 0.33369651436806 -0.94268053770065 0\n# 2 normals\n\nvt 0.21950633823872 1 0\nvt 0.65553259849548 1 0\nvt 0.65553259849548 0 0\nvt 0.21950633823872 0 0\nvt 0.34446743130684 1 0\nvt 0.78049367666244 1 0\nvt 0.78049367666244 0 0\nvt 0.34446743130684 0 0\n# 8 texture coordinates\n\no 2\nusemtl escalator2\nf 115/99/1 119/98/1 118/97/1 116/96/1\nf 109/1/3 110/3/3 108/8/3 107/26/3\nf 120/103/4 114/102/4 113/101/4 117/100/4\nf 105/1/5 106/3/5 112/8/5 111/26/5\nf 116/99/57 118/98/57 117/97/57 113/96/57\nf 114/102/4 111/1/4 112/3/4 113/101/4\nf 115/96/58 105/8/8 111/26/8 114/99/58\nf 116/96/1 106/8/1 105/26/1 115/99/1\nf 113/96/57 112/8/6 106/26/6 116/99/57\nf 118/98/57 108/1/6 110/3/6 117/97/57\nf 119/98/1 107/1/1 108/3/1 118/97/1\nf 117/100/4 110/8/4 109/26/4 120/103/4\n\nusemtl escalator3\nf 114/99/58 120/98/58 119/97/58 115/96/58\nf 120/98/58 109/1/8 107/3/8 119/97/58\n\nv -10.38787460327148 -2.46053695678711 0.05786377936602\nv -10.38787460327148 -3.11886811256409 0.05786377936602\nv 8.37319946289062 -2.46053695678711 15.20390701293945\nv 8.37319946289062 -3.11886811256409 15.20390701293945\nv -15.11080265045166 -3.11886811256409 4.95054340362549\nv -15.11080265045166 -2.46053695678711 4.95054340362549\nv -17.63106727600098 -2.46053695678711 2.51569700241089\nv -17.63106727600098 -3.11886811256409 2.51569700241089\nv -15.63636589050293 -3.11886811256409 4.89701271057129\nv -16.17062377929688 -3.11886811256409 4.72479200363159\nv -16.67029190063477 -3.11886811256409 4.42842483520508\nv -17.09063148498535 -3.11886811256409 4.02233219146729\nv -17.39739608764648 -3.11886811256409 3.53959894180298\nv -17.57565879821777 -3.11886811256409 3.02344822883606\nv -15.63636589050293 -2.46053695678711 4.89701271057129\nv -16.17062377929688 -2.46053695678711 4.72479200363159\nv -16.67029190063477 -2.46053695678711 4.42842483520508\nv -17.09063148498535 -2.46053695678711 4.02233219146729\nv -17.39739608764648 -2.46053695678711 3.53959894180298\nv -17.57565879821777 -2.46053695678711 3.02344822883606\nv -15.11080265045166 -2.46053695678711 0.05786377936602\nv -15.11080265045166 -3.11886811256409 0.05786377936602\nv -17.63106727600098 -2.46053695678711 2.49271011352539\nv -17.63106727600098 -3.11886811256409 2.49271011352539\nv -15.63636589050293 -2.46053695678711 0.11139420419931\nv -16.17062377929688 -2.46053695678711 0.28361487388611\nv -16.67029190063477 -2.46053695678711 0.57998245954514\nv -17.09063148498535 -2.46053695678711 0.9860748052597\nv -17.39739608764648 -2.46053695678711 1.4688081741333\nv -17.57565879821777 -2.46053695678711 1.98495888710022\nv -15.63636589050293 -3.11886811256409 0.11139420419931\nv -16.17062377929688 -3.11886811256409 0.28361487388611\nv -16.67029190063477 -3.11886811256409 0.57998245954514\nv -17.09063148498535 -3.11886811256409 0.9860748052597\nv -17.39739608764648 -3.11886811256409 1.4688081741333\nv -17.57565879821777 -3.11886811256409 1.98495888710022\nv 13.17253494262695 -2.46053695678711 20.09658622741699\nv 13.17253494262695 -3.11886811256409 20.09658622741699\nv 15.69279861450195 -3.11886811256409 17.66173934936523\nv 15.69279861450195 -2.46053695678711 17.66173934936523\nv 13.69809818267822 -2.46053695678711 20.04305648803711\nv 14.23235607147217 -2.46053695678711 19.87083435058594\nv 14.73202419281006 -2.46053695678711 19.5744686126709\nv 15.15236282348633 -2.46053695678711 19.16837501525879\nv 15.45912742614746 -2.46053695678711 18.68564224243164\nv 15.63739013671875 -2.46053695678711 18.16949081420898\nv 13.69809818267822 -3.11886811256409 20.04305648803711\nv 14.23235607147217 -3.11886811256409 19.87083435058594\nv 14.73202419281006 -3.11886811256409 19.5744686126709\nv 15.15236282348633 -3.11886811256409 19.16837501525879\nv 15.45912742614746 -3.11886811256409 18.68564224243164\nv 15.63739013671875 -3.11886811256409 18.16949081420898\nv 13.17253494262695 -3.11886811256409 15.20390701293945\nv 13.17253494262695 -2.46053695678711 15.20390701293945\nv 15.69279861450195 -3.11886811256409 17.63875389099121\nv 15.69279861450195 -2.46053695678711 17.63875389099121\nv 13.69809818267822 -3.11886811256409 15.25743770599365\nv 14.23235607147217 -3.11886811256409 15.42965793609619\nv 14.73202419281006 -3.11886811256409 15.72602558135986\nv 15.15236282348633 -3.11886811256409 16.13211822509766\nv 15.45912742614746 -3.11886811256409 16.6148509979248\nv 15.63739013671875 -3.11886811256409 17.13100242614746\nv 13.69809818267822 -2.46053695678711 15.25743770599365\nv 14.23235607147217 -2.46053695678711 15.42965793609619\nv 14.73202419281006 -2.46053695678711 15.72602558135986\nv 15.15236282348633 -2.46053695678711 16.13211822509766\nv 15.45912742614746 -2.46053695678711 16.6148509979248\nv 15.63739013671875 -2.46053695678711 17.13100242614746\nv -10.38787460327148 -3.11886811256409 4.22026777267456\nv -9.80783653259277 -3.11886811256409 5.41881465911865\nv -9.80783653259277 -2.46053695678711 5.41881465911865\nv -11.14376926422119 -3.11886811256409 4.95054340362549\nv -11.14376926422119 -2.46053695678711 4.95054340362549\nv -10.38787460327148 -2.46053695678711 4.22026777267456\nv -10.93948745727539 -3.11886811256409 4.96024227142334\nv -10.7346715927124 -3.11886811256409 4.98972845077515\nv -10.53240394592285 -3.11886811256409 5.03915452957153\nv -10.33578205108643 -3.11886811256409 5.10807466506958\nv -10.14776611328125 -3.11886811256409 5.19545078277588\nv -9.97102928161621 -3.11886811256409 5.29970645904541\nv -9.97102928161621 -2.46053695678711 5.29970645904541\nv -10.14776611328125 -2.46053695678711 5.19545078277588\nv -10.33578205108643 -2.46053695678711 5.10807466506958\nv -10.53240394592285 -2.46053695678711 5.03915452957153\nv -10.7346715927124 -2.46053695678711 4.98972845077515\nv -10.93948745727539 -2.46053695678711 4.96024227142334\nv 8.37319946289062 -3.11886811256409 19.37121200561523\nv 7.79705476760864 -3.11886811256409 19.6314582824707\nv 7.79705476760864 -2.46053695678711 19.6314582824707\nv 9.12402153015137 -2.46053695678711 20.09658622741699\nv 9.12402153015137 -3.11886811256409 20.09658622741699\nv 8.37319946289062 -2.46053695678711 19.37121200561523\nv 7.95915222167969 -3.11886811256409 19.7497673034668\nv 8.13470268249512 -3.11886811256409 19.85332298278809\nv 8.32145690917969 -3.11886811256409 19.94011306762695\nv 8.51675891876221 -3.11886811256409 20.00856971740723\nv 8.71766948699951 -3.11886811256409 20.05766487121582\nv 8.92111110687256 -3.11886811256409 20.08695220947266\nv 8.92111110687256 -2.46053695678711 20.08695220947266\nv 8.71766948699951 -2.46053695678711 20.05766487121582\nv 8.51675891876221 -2.46053695678711 20.00856971740723\nv 8.32145690917969 -2.46053695678711 19.94011306762695\nv 8.13470268249512 -2.46053695678711 19.85332298278809\nv 7.95915222167969 -2.46053695678711 19.7497673034668\n# 104 vertices\n\n# 0 normal\n\n# 0 texture coordinate\n\no 3\nusemtl escalator3\nf 124/2/2 173/2/1 177/8/1 178/26/1 179/3/1 180/1/1 181/26/1 182/1/1 175/3/1 159/26/1 172/3/1 171/1/1 170/3/1 169/3/1 168/2/1 167/1/1 158/8/1 211/2/1 207/8/1\nf 176/7/3 160/6/3 159/5/3 175/4/3\nf 123/24/2 212/3/4 210/3/4 157/8/4 161/1/4 162/3/4 163/26/4 164/3/4 165/1/4 166/8/4 160/3/4 176/1/4 188/3/4 187/3/4 186/3/4 185/3/4 184/1/4 183/1/4 174/8/4\nf 144/7/5 128/6/5 127/5/5 143/4/5\nf 211/12/6 158/11/6 157/10/6 210/9/6\nf 123/2/7 174/11/8 173/10/8 124/13/7\nf 193/17/6 126/16/6 125/15/6 192/14/6\nf 121/41/2 141/8/4 145/26/4 146/1/4 147/3/4 148/3/4 149/1/4 150/3/4 143/3/4 127/1/4 140/3/4 139/8/4 138/26/4 137/1/4 136/3/4 135/3/4 126/3/4 193/1/4 194/3/4\nf 122/19/7 142/16/8 141/15/8 121/18/7\nf 189/1/2 192/1/1 125/8/1 129/3/1 130/26/1 131/1/1 132/3/1 133/1/1 134/3/1 128/3/1 144/1/1 156/8/1 155/3/1 154/3/1 153/26/1 152/3/1 151/26/1 142/1/1 122/18/1\nf 209/23/9 191/22/9 190/21/9 208/20/9\nf 123/24/2 121/41/4 194/3/4 191/8/4 209/3/4 212/24/4\nf 124/13/7 122/19/7 121/18/7 123/2/7\nf 207/1/2 208/3/1 190/1/1 189/3/1 122/18/1 124/2/1\nf 126/16/10 135/28/11 129/27/11 125/15/10\nf 135/28/11 136/30/12 130/29/12 129/27/11\nf 136/30/12 137/32/13 131/31/13 130/29/12\nf 137/32/13 138/34/14 132/33/14 131/31/13\nf 138/34/14 139/36/15 133/35/15 132/33/14\nf 139/36/15 140/38/16 134/37/16 133/35/15\nf 140/38/16 127/40/17 128/39/17 134/37/16\nf 142/16/18 151/28/19 145/27/19 141/15/18\nf 151/28/19 152/30/20 146/29/20 145/27/19\nf 152/30/20 153/32/21 147/31/21 146/29/20\nf 153/32/21 154/34/22 148/33/22 147/31/21\nf 154/34/22 155/36/23 149/35/23 148/33/22\nf 155/36/23 156/38/24 150/37/24 149/35/23\nf 156/38/24 144/40/25 143/39/25 150/37/24\nf 158/11/26 167/43/27 161/42/27 157/10/26\nf 167/43/27 168/45/28 162/44/28 161/42/27\nf 168/45/28 169/47/29 163/46/29 162/44/28\nf 169/47/29 170/49/30 164/48/30 163/46/29\nf 170/49/30 171/51/31 165/50/31 164/48/30\nf 171/51/31 172/53/32 166/52/32 165/50/31\nf 172/53/32 159/55/33 160/54/33 166/52/32\nf 174/11/34 183/43/35 177/42/35 173/10/34\nf 183/43/35 184/45/36 178/44/36 177/42/35\nf 184/45/36 185/47/37 179/46/37 178/44/36\nf 185/47/37 186/49/38 180/48/38 179/46/37\nf 186/49/38 187/51/39 181/50/39 180/48/38\nf 187/51/39 188/53/40 182/52/40 181/50/39\nf 188/53/40 176/55/41 175/54/41 182/52/40\nf 191/22/42 201/57/43 200/56/43 190/21/42\nf 200/63/2 199/62/1 198/61/1 197/60/1 196/59/1 195/64/1 192/14/1 189/58/1 190/21/1\nf 194/65/2 193/17/4 206/64/4 205/59/4 204/60/4 203/61/4 202/62/4 201/63/4 191/22/4\nf 201/57/43 202/67/44 199/66/44 200/56/43\nf 202/67/44 203/69/45 198/68/45 199/66/44\nf 203/69/45 204/71/46 197/70/46 198/68/45\nf 204/71/46 205/73/47 196/72/47 197/70/46\nf 205/73/47 206/75/48 195/74/48 196/72/47\nf 206/75/48 193/17/49 192/14/49 195/74/48\nf 210/9/50 219/77/51 218/76/51 211/12/50\nf 207/78/1 211/12/1 218/80/1 217/79/1 216/84/1 215/83/1 214/82/1 213/81/1 208/20/1\nf 224/81/4 223/82/4 222/83/4 221/84/4 220/79/4 219/80/4 210/9/4 212/85/4 209/23/4\nf 219/77/51 220/87/52 217/86/52 218/76/51\nf 220/87/52 221/89/53 216/88/53 217/86/52\nf 221/89/53 222/91/54 215/90/54 216/88/53\nf 222/91/54 223/93/55 214/92/55 215/90/54\nf 223/93/55 224/95/56 213/94/56 214/92/55\nf 224/95/56 209/23/42 208/20/42 213/94/56\n\n# 0 vertex\n\n# 0 normal\n\n# 0 texture coordinate\n\no 1_1\nusemtl escalator3\nf 4/2/2 53/2/1 57/8/1 58/26/1 59/3/1 60/1/1 61/26/1 62/1/1 55/3/1 39/26/1 52/3/1 51/1/1 50/3/1 49/3/1 48/2/1 47/1/1 38/8/1 91/2/1 87/8/1\nf 56/7/3 40/6/3 39/5/3 55/4/3\nf 3/24/2 92/3/4 90/3/4 37/8/4 41/1/4 42/3/4 43/26/4 44/3/4 45/1/4 46/8/4 40/3/4 56/1/4 68/3/4 67/3/4 66/3/4 65/3/4 64/1/4 63/1/4 54/8/4\nf 24/7/5 8/6/5 7/5/5 23/4/5\nf 91/12/6 38/11/6 37/10/6 90/9/6\nf 3/2/7 54/11/8 53/10/8 4/13/7\nf 73/17/6 6/16/6 5/15/6 72/14/6\nf 1/41/2 21/8/4 25/26/4 26/1/4 27/3/4 28/3/4 29/1/4 30/3/4 23/3/4 7/1/4 20/3/4 19/8/4 18/26/4 17/1/4 16/3/4 15/3/4 6/3/4 73/1/4 74/3/4\nf 2/19/7 22/16/8 21/15/8 1/18/7\nf 69/1/2 72/1/1 5/8/1 9/3/1 10/26/1 11/1/1 12/3/1 13/1/1 14/3/1 8/3/1 24/1/1 36/8/1 35/3/1 34/3/1 33/26/1 32/3/1 31/26/1 22/1/1 2/18/1\nf 89/23/9 71/22/9 70/21/9 88/20/9\nf 3/24/2 1/41/4 74/3/4 71/8/4 89/3/4 92/24/4\nf 4/13/7 2/19/7 1/18/7 3/2/7\nf 87/1/2 88/3/1 70/1/1 69/3/1 2/18/1 4/2/1\nf 6/16/10 15/28/11 9/27/11 5/15/10\nf 15/28/11 16/30/12 10/29/12 9/27/11\nf 16/30/12 17/32/13 11/31/13 10/29/12\nf 17/32/13 18/34/14 12/33/14 11/31/13\nf 18/34/14 19/36/15 13/35/15 12/33/14\nf 19/36/15 20/38/16 14/37/16 13/35/15\nf 20/38/16 7/40/17 8/39/17 14/37/16\nf 22/16/18 31/28/19 25/27/19 21/15/18\nf 31/28/19 32/30/20 26/29/20 25/27/19\nf 32/30/20 33/32/21 27/31/21 26/29/20\nf 33/32/21 34/34/22 28/33/22 27/31/21\nf 34/34/22 35/36/23 29/35/23 28/33/22\nf 35/36/23 36/38/24 30/37/24 29/35/23\nf 36/38/24 24/40/25 23/39/25 30/37/24\nf 38/11/26 47/43/27 41/42/27 37/10/26\nf 47/43/27 48/45/28 42/44/28 41/42/27\nf 48/45/28 49/47/29 43/46/29 42/44/28\nf 49/47/29 50/49/30 44/48/30 43/46/29\nf 50/49/30 51/51/31 45/50/31 44/48/30\nf 51/51/31 52/53/32 46/52/32 45/50/31\nf 52/53/32 39/55/33 40/54/33 46/52/32\nf 54/11/34 63/43/35 57/42/35 53/10/34\nf 63/43/35 64/45/36 58/44/36 57/42/35\nf 64/45/36 65/47/37 59/46/37 58/44/36\nf 65/47/37 66/49/38 60/48/38 59/46/37\nf 66/49/38 67/51/39 61/50/39 60/48/38\nf 67/51/39 68/53/40 62/52/40 61/50/39\nf 68/53/40 56/55/41 55/54/41 62/52/40\nf 71/22/42 81/57/43 80/56/43 70/21/42\nf 80/63/2 79/62/1 78/61/1 77/60/1 76/59/1 75/64/1 72/14/1 69/58/1 70/21/1\nf 74/65/2 73/17/4 86/64/4 85/59/4 84/60/4 83/61/4 82/62/4 81/63/4 71/22/4\nf 81/57/43 82/67/44 79/66/44 80/56/43\nf 82/67/44 83/69/45 78/68/45 79/66/44\nf 83/69/45 84/71/46 77/70/46 78/68/45\nf 84/71/46 85/73/47 76/72/47 77/70/46\nf 85/73/47 86/75/48 75/74/48 76/72/47\nf 86/75/48 73/17/49 72/14/49 75/74/48\nf 90/9/50 99/77/51 98/76/51 91/12/50\nf 87/78/1 91/12/1 98/80/1 97/79/1 96/84/1 95/83/1 94/82/1 93/81/1 88/20/1\nf 104/81/4 103/82/4 102/83/4 101/84/4 100/79/4 99/80/4 90/9/4 92/85/4 89/23/4\nf 99/77/51 100/87/52 97/86/52 98/76/51\nf 100/87/52 101/89/53 96/88/53 97/86/52\nf 101/89/53 102/91/54 95/90/54 96/88/53\nf 102/91/54 103/93/55 94/92/55 95/90/54\nf 103/93/55 104/95/56 93/94/56 94/92/55\nf 104/95/56 89/23/42 88/20/42 93/94/56\n\n# 0 vertex\n\n# 0 normal\n\n# 0 texture coordinate\n\no 2_1\nusemtl escalator2\nf 115/99/1 119/98/1 118/97/1 116/96/1\nf 109/1/3 110/3/3 108/8/3 107/26/3\nf 120/103/4 114/102/4 113/101/4 117/100/4\nf 105/1/5 106/3/5 112/8/5 111/26/5\nf 116/99/57 118/98/57 117/97/57 113/96/57\nf 114/102/4 111/1/4 112/3/4 113/101/4\nf 115/96/58 105/8/8 111/26/8 114/99/58\nf 116/96/1 106/8/1 105/26/1 115/99/1\nf 113/96/57 112/8/6 106/26/6 116/99/57\nf 118/98/57 108/1/6 110/3/6 117/97/57\nf 119/98/1 107/1/1 108/3/1 118/97/1\nf 117/100/4 110/8/4 109/26/4 120/103/4\n\nusemtl escalator3\nf 114/99/58 120/98/58 119/97/58 115/96/58\nf 120/98/58 109/1/8 107/3/8 119/97/58\n\n# 0 vertex\n\n# 0 normal\n\n# 0 texture coordinate\n\no 3_1\nusemtl escalator3\nf 124/2/2 173/2/1 177/8/1 178/26/1 179/3/1 180/1/1 181/26/1 182/1/1 175/3/1 159/26/1 172/3/1 171/1/1 170/3/1 169/3/1 168/2/1 167/1/1 158/8/1 211/2/1 207/8/1\nf 176/7/3 160/6/3 159/5/3 175/4/3\nf 123/24/2 212/3/4 210/3/4 157/8/4 161/1/4 162/3/4 163/26/4 164/3/4 165/1/4 166/8/4 160/3/4 176/1/4 188/3/4 187/3/4 186/3/4 185/3/4 184/1/4 183/1/4 174/8/4\nf 144/7/5 128/6/5 127/5/5 143/4/5\nf 211/12/6 158/11/6 157/10/6 210/9/6\nf 123/2/7 174/11/8 173/10/8 124/13/7\nf 193/17/6 126/16/6 125/15/6 192/14/6\nf 121/41/2 141/8/4 145/26/4 146/1/4 147/3/4 148/3/4 149/1/4 150/3/4 143/3/4 127/1/4 140/3/4 139/8/4 138/26/4 137/1/4 136/3/4 135/3/4 126/3/4 193/1/4 194/3/4\nf 122/19/7 142/16/8 141/15/8 121/18/7\nf 189/1/2 192/1/1 125/8/1 129/3/1 130/26/1 131/1/1 132/3/1 133/1/1 134/3/1 128/3/1 144/1/1 156/8/1 155/3/1 154/3/1 153/26/1 152/3/1 151/26/1 142/1/1 122/18/1\nf 209/23/9 191/22/9 190/21/9 208/20/9\nf 123/24/2 121/41/4 194/3/4 191/8/4 209/3/4 212/24/4\nf 124/13/7 122/19/7 121/18/7 123/2/7\nf 207/1/2 208/3/1 190/1/1 189/3/1 122/18/1 124/2/1\nf 126/16/10 135/28/11 129/27/11 125/15/10\nf 135/28/11 136/30/12 130/29/12 129/27/11\nf 136/30/12 137/32/13 131/31/13 130/29/12\nf 137/32/13 138/34/14 132/33/14 131/31/13\nf 138/34/14 139/36/15 133/35/15 132/33/14\nf 139/36/15 140/38/16 134/37/16 133/35/15\nf 140/38/16 127/40/17 128/39/17 134/37/16\nf 142/16/18 151/28/19 145/27/19 141/15/18\nf 151/28/19 152/30/20 146/29/20 145/27/19\nf 152/30/20 153/32/21 147/31/21 146/29/20\nf 153/32/21 154/34/22 148/33/22 147/31/21\nf 154/34/22 155/36/23 149/35/23 148/33/22\nf 155/36/23 156/38/24 150/37/24 149/35/23\nf 156/38/24 144/40/25 143/39/25 150/37/24\nf 158/11/26 167/43/27 161/42/27 157/10/26\nf 167/43/27 168/45/28 162/44/28 161/42/27\nf 168/45/28 169/47/29 163/46/29 162/44/28\nf 169/47/29 170/49/30 164/48/30 163/46/29\nf 170/49/30 171/51/31 165/50/31 164/48/30\nf 171/51/31 172/53/32 166/52/32 165/50/31\nf 172/53/32 159/55/33 160/54/33 166/52/32\nf 174/11/34 183/43/35 177/42/35 173/10/34\nf 183/43/35 184/45/36 178/44/36 177/42/35\nf 184/45/36 185/47/37 179/46/37 178/44/36\nf 185/47/37 186/49/38 180/48/38 179/46/37\nf 186/49/38 187/51/39 181/50/39 180/48/38\nf 187/51/39 188/53/40 182/52/40 181/50/39\nf 188/53/40 176/55/41 175/54/41 182/52/40\nf 191/22/42 201/57/43 200/56/43 190/21/42\nf 200/63/2 199/62/1 198/61/1 197/60/1 196/59/1 195/64/1 192/14/1 189/58/1 190/21/1\nf 194/65/2 193/17/4 206/64/4 205/59/4 204/60/4 203/61/4 202/62/4 201/63/4 191/22/4\nf 201/57/43 202/67/44 199/66/44 200/56/43\nf 202/67/44 203/69/45 198/68/45 199/66/44\nf 203/69/45 204/71/46 197/70/46 198/68/45\nf 204/71/46 205/73/47 196/72/47 197/70/46\nf 205/73/47 206/75/48 195/74/48 196/72/47\nf 206/75/48 193/17/49 192/14/49 195/74/48\nf 210/9/50 219/77/51 218/76/51 211/12/50\nf 207/78/1 211/12/1 218/80/1 217/79/1 216/84/1 215/83/1 214/82/1 213/81/1 208/20/1\nf 224/81/4 223/82/4 222/83/4 221/84/4 220/79/4 219/80/4 210/9/4 212/85/4 209/23/4\nf 219/77/51 220/87/52 217/86/52 218/76/51\nf 220/87/52 221/89/53 216/88/53 217/86/52\nf 221/89/53 222/91/54 215/90/54 216/88/53\nf 222/91/54 223/93/55 214/92/55 215/90/54\nf 223/93/55 224/95/56 213/94/56 214/92/55\nf 224/95/56 209/23/42 208/20/42 213/94/56\n\n"},function(t,e,n){var i=function(t){"use strict";function e(t,e,n,r){var a=e&&e.prototype instanceof i?e:i,o=Object.create(a.prototype),s=new d(r||[]);return o._invoke=l(t,n,s),o}function n(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function i(){}function r(){}function a(){}function o(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function s(t,e){function i(r,a,o,s){var l=n(t[r],t,a);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==typeof c&&g.call(c,"__await")?e.resolve(c.__await).then(function(t){i("next",t,o,s)},function(t){i("throw",t,o,s)}):e.resolve(c).then(function(t){u.value=t,o(u)},function(t){return i("throw",t,o,s)})}s(l.arg)}function r(t,n){function r(){return new e(function(e,r){i(t,n,e,r)})}return a=a?a.then(r,r):r()}var a;this._invoke=r}function l(t,e,i){var r=S;return function(a,o){if(r===E)throw new Error("Generator is already running");if(r===A){if("throw"===a)throw o;return p()}for(i.method=a,i.arg=o;;){var s=i.delegate;if(s){var l=u(s,i);if(l){if(l===T)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===S)throw r=A,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=E;var c=n(t,e,i);if("normal"===c.type){if(r=i.done?A:w,c.arg===T)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(r=A,i.method="throw",i.arg=c.arg)}}}function u(t,e){var i=t.iterator[e.method];if(i===v){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=v,u(t,e),"throw"===e.method))return T;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return T}var r=n(i,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,T;var a=r.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=v),e.delegate=null,T):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,T)}function c(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function f(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function d(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(c,this),this.reset(!0)}function h(t){if(t){var e=t[y];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(g.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=v,e.done=!0,e};return i.next=i}}return{next:p}}function p(){return{value:v,done:!0}}var v,m=Object.prototype,g=m.hasOwnProperty,_="function"==typeof Symbol?Symbol:{},y=_.iterator||"@@iterator",x=_.asyncIterator||"@@asyncIterator",b=_.toStringTag||"@@toStringTag";t.wrap=e;var S="suspendedStart",w="suspendedYield",E="executing",A="completed",T={},M={};M[y]=function(){return this};var I=Object.getPrototypeOf,P=I&&I(I(h([])));P&&P!==m&&g.call(P,y)&&(M=P);var k=a.prototype=i.prototype=Object.create(M);return r.prototype=k.constructor=a,a.constructor=r,a[b]=r.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===r||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,b in t||(t[b]="GeneratorFunction")),t.prototype=Object.create(k),t},t.awrap=function(t){return{__await:t}},o(s.prototype),s.prototype[x]=function(){return this},t.AsyncIterator=s,t.async=function(n,i,r,a,o){void 0===o&&(o=Promise);var l=new s(e(n,i,r,a),o);return t.isGeneratorFunction(i)?l:l.next().then(function(t){return t.done?t.value:l.next()})},o(k),k[b]="Generator",k[y]=function(){return this},k.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},t.values=h,d.prototype={constructor:d,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.method="next",this.arg=v,this.tryEntries.forEach(f),!t)for(var e in this)"t"===e.charAt(0)&&g.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=v)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,i){return a.type="throw",a.arg=t,n.next=e,i&&(n.method="next",n.arg=v),!!i}if(this.done)throw t;for(var n=this,i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],a=r.completion;if("root"===r.tryLoc)return e("end");if(r.tryLoc<=this.prev){var o=g.call(r,"catchLoc"),s=g.call(r,"finallyLoc");if(o&&s){if(this.prev<r.catchLoc)return e(r.catchLoc,!0);if(this.prev<r.finallyLoc)return e(r.finallyLoc)}else if(o){if(this.prev<r.catchLoc)return e(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return e(r.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&g.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=t,a.arg=e,r?(this.method="next",this.next=r.finallyLoc,T):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),T},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),f(n),T}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;f(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:h(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=v),T}},t}(t.exports);try{regeneratorRuntime=i}catch(t){Function("r","regeneratorRuntime = r")(i)}},function(t,e){t.exports='<div class="floor-control indoor-control">  <img class="arr-top" src="">  <img class="arr-bottom" src="">  <div class="floor-control-wrapper">    <ul class="floor-control-list transition-animate">      <%Array.prototype.forEach.call(obj.floors, function(fl, idx){%>      <li class="floor-control-item marked-pseudo-background-color" data-index="<%= idx%>" data-floor="<%= fl%>"><%= fl%></li>      <%});%>    </ul>  </div></div>'},function(t,e){t.exports='<div class="rotate-circle">\t\t<div class="compass-circle-background"></div>\t\t<div class="compass-circle">\t\t\t<img class="compass-img" src=""/>\t\t</div>\t\t<div class="rotate-panel">\t\t\t<div class="rotate-left clickable-rotate-left">\t\t\t\t<img class="rotate-left-img" src=""/>\t\t\t</div>\t\t\t<div class="rotate-top  clickable-rotate-top">\t\t\t\t<img class="rotate-top-img" src=""/>\t\t\t</div>\t\t\t<div class="rotate-right  clickable-rotate-right">\t\t\t\t<img class="rotate-right-img" src=""/>\t\t\t</div>\t\t\t<div class="rotate-bottom  clickable-rotate-bottom">\t\t\t\t<img class="rotate-bottom-img" src=""/>\t\t\t</div>\t\t</div>\t</div>'},function(t,e){t.exports='<div class="tmap-zoom-control">    <div class="tmap-zoom-content">        <div class="tmap-zoom-in"><img class="tmap-zoom-in-image" src=""></img></div>        <div class="tmap-zoom-number" style="display:none"></div>        <div class="tmap-zoom-spliter" style="display:block"></div>        <div class="tmap-zoom-out"><img class="tmap-zoom-out-image" src=""></img></div>    </div></div>'},,function(t,e,n){var i=n(1036);"string"==typeof i&&(i=[[t.i,i,""]]);n(283)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){var i=n(1037);"string"==typeof i&&(i=[[t.i,i,""]]);n(283)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){var i=n(1038);"string"==typeof i&&(i=[[t.i,i,""]]);n(283)(i,{});i.locals&&(t.exports=i.locals)},,,,function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAAAgCAYAAAD+Fz2gAAABmElEQVR4AeTVMYrqUBjH0VtZzizBFbiEWYRby7osRRVEFE1SCqqJQvQ8biOveLxp7oXJ5JRJuh//LyElfKI2XDU+wk+GqeGahj5AYXiK0BcYYWY4ZhiFPsEYlUzu97vX6+U78ZvMSoxDH2GCk8SaprFcLu12u/8GOB6Pttut5/MpkxMmoc/whVZCj8fDer02n8/t93v/UpZlfB9DattWBg2+wlv/I51Sn7jVahUjOBwO/lZVVXxusVi43W4yOPU2zjfnrpJQXEZcSIwRz1lU13XuOCUm4TfCGLMc/6MYZbPZvONcr1cZzDAOvxlGKKQTlxKjvONcLhcZFBiFocAUtUTiYuKSzuezxGpMwxDhEwU6CXRdJ6EOBT7C0OFPe3RMwyAUBkD4X3GBBFhYkYMJEhyghPUJwAIbEwYw8IY2vaFbhybta8Nwl3wKrkHCVUpo4iVHtVhwx7+7YUEbb3NUjRE7ft2OEXV8lLM6TFiR8W0ZKyZ0UTRnVegxYEbChgMn8tOJAxsSZgzoUUXBzMzMzMzMzMzMzMzsAXLnMf6Zx2aAAAAAAElFTkSuQmCC"},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAAAgCAYAAAD+Fz2gAAACU0lEQVR4AezRIQ4AIBADQeD4/5uxDQnucDPJyqoOLgAAAADAbI0vh6yoov2ostg2HeaYPOO0Xw6wcwRRGK8dlDGLGHUbFrFRxGZju4pdI3ZSxmlY27bPWOTWm7v3db5gk2O18z9+Z+zM+94vb2berGvXri1yHGdHGIb74jg+Wq/Xr4jIK/X4DqCqHhEffM/v+Bv/w//yGnXtdo7BsboC+ztNoNRqta1RFB0WkZtMPv5fEcfimBz7z2FNwCRQMpnMKpXAAyLyEZrFOTgX52yB1QpqAqZarW5US9Jl5g1Tr4aa+xJjGHdQrUvZrEqlsoF7BQZEjIUxMbbWpW+squbBgwdL4zg+yZxg8FRXsZ24e/fukjGopvblzHGc3QAKSFFhGEKDCoy107I3knDOnj27gFWDlGVZFt68eQPDMKBDjJmxjxakZjizPn/+vEpEniBl2bYNwnn9+jX4ME0TOtRoNJ7SA720QBp+OPl8fp2I5JGyVC+TwPnx4wf4ys+sKB2iB3oZckjNcKrV6g4AqWfMcZwETrlchhKXuAQSK0uTrGKxuFN5m90EaQjhzKYRAAFSluu6ePv2LQhDzdH0W7VanQpI/hBCaq4cteSs11E5vu8ncAqFAjqpUqkkkDzP01ZJ9Dgky10znOfPn68RkQI0KIoifPz4EblcDr3EZS+TyUCnuCfR64BDaoZz8ODBRTzxaO72MSiiV3oeXEjNTeicMAxPYcxEz/Te1CcNWPUwsNnqFLUXYyp6Zw6YiyQvg7S0Xb58eYWIFDGmovfz588vT3Op+wWhHSH6nVaMlQAAAABJRU5ErkJggg=="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAACnklEQVR4AWJwL/ABNGcOPnMFURSv7ai2+Vc07KyS2oxq22ZcI6gdVGGtsLaj6rMxvaf5brL69OYskpzsXZ33m7mjd58n5RgzNNPnWys6l+Hz3ZPXTxnGFIj+iJ7LZ7dEJ0Qzc4PBDl6vU6sf548c2TXTmF2ijwJha6Fy0WP53zI7cmRrOiBMpYe2V/SQddRv6dUFds6cxhRAafVYMf0Fc7K+iPdwz4DW2rpishlmCVRpls83r7aASGlTad15mCRDcq2jdtashjUGxMwMM0gaZI0A5Ycrkw0XpvlVAmYZM0J+VObR/E2Gz3cKQux1TEZPnIhxJz/44bX1WJDVC7HL7MYSFAMoXyx1HENz1AuxixfWyQjADL+/jZj+dTRdoqaIXRdz3XG0xSucZ6HPt1YBERNm9TJ4aXqfOBqiB7eGDZdthBn9+D8gThrYzAk9uE8BERMAy8GG9M4imEEHFBAxwxNsGNAnGGbwUUCmJ8xukczOKiBikuctpOM5KcVXFRAxyfM5zP6wWquArKyADYAFJLM7YT14l+RZgCXhE8nsqQIiZniCDem4R0rxCwVETPK8xzycflBAxAxPsDH2TdXvrFCoD4SYBLgWW90wDiBfKA4gJYSJwheKA+HHrT0E01fZgcAACDEBcFf4gbW7fFjoYpjl882FF4R7Xdf1D2UWBdQ073Zs8SW7bl09CLHj5NgOpkjAkSPbOR77oXeQo8ev8AKTAur6NSUNJsfY6m7c96YQcHO1lQXp3voZPt/1FPTceRSsalY8Gj++VTIhsaWhcFCr8ht6MgnpLkMtyKmAiYkjJhkJgPuBWhCjBKxL0B7XxRyqWMqWIqX0Ijp2HIB62LvLRU9QwUCZJWFV/nDhFBTxGMKYz/EeQ+De1uUxxD/5bqFw0Zjc3QAAAABJRU5ErkJggg=="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANYAAABHCAMAAABMB0n6AAAC9FBMVEUAAAD////////////////8/Pz///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8zMzMTfv//KwDb6/nd6vnZ7Pne6Png5/ni5fnW7vnX7fn9/f7T7/nk5Pnh5vnz+P2CgoLZ5fjR6vj2+P7v9/08PDzk5OT19fXV5vjp6uk2Njbh8vv5+fny9f1ERERBQUHm4/nx8fJSUlLT8Pmvr69JSUnt7e2/v7/d4/jf39+6urqqqqpxcXHZ4vjV6PjKysphYWHX6fh2dnb39/fZ2dq2trZbW1tVVVXc3Nz/LQDQ0NDq7fvd4Ph+fn5tbW0Fdv/3+/7g4vnGxsafn5+IiIh6enr/GgD6/f/Nzc2ZmZmUlJSNjY1paWn0+v7c5fi90uilpaU5OTnp8vvi6frn5+fV1daioqL/IwEAbv/g7frh4eHO7fnZ5/jCwsJMTEzu8fzd7/rF3O4Off8AZ/9lZWXU6/nL6vjN5vbe3t6cnJyWlpb/DwD/BwDy+f7r+P3O4PHF1er//PnT4vaRkZHl8vzm7PvS0tIAkf/w+/3v9Pz/AQDQ///V7/na7fmr9/+y3vXk7PForf7a8/vU3PPV4u272OzN2ui20Ofk5vqzs7NqamrU//8FhP/N2vKOjo630fv47/jV3OSTk5OPj4/wemvsZE/1SCzM///C/P/S9/58r/b89+k4ODjwOR74Lg6w6f9Alv4rjP5NmfZmp/Wpx+vc4uVnY6LhnZnThICWT3Pa/v+eyf0lhv3ox8bUpKWQkJDoiX/dfnQAWf+cxfPTtLr+ubJzXZa+PUeQvfseeOj/5+UGXd1umtrGrLNbZ67ZDA/0l2DFAAAAO3RSTlMADO+f2P7EmUMJJCgSA7ysqNGD5OkfjyoWt3hQB7FciCwawWnccWMw9LQ8WX9IyaNKNFFNV3tOVlVTUu3rZMMAABZ9SURBVGje1Zt5XFRVFMfHYAABARVMTUtTybR9r/NKpGxKQGFYwqGhYcfYl1AQEWQREAhQCLEFNXEpxRYzy8q0fd/3fd/3vX/6nXvfMjOMfeyPPtnv4zDvXd5j7vedc8+599zR5KTTvabPpMOTZebocf6m/4NOGkv/TJbps01Huo5hqG0dV+ydM2fO3r17F+wiqt5wKR9dQXT9ZfPmzbtsXj1Z7r/ubqH77991JxFNDzMd0fIlsmy/HkhzhRZcz1QbLoUE1oJ50HV3W6j+suvuvgy6Crp/O26aZjqCFUwUGwEoyTXn6rkA2LBgrjMWtHEvYK8DlA4Gix1nOmIFqg5QaVwFCdVEexcAUMe6VHLhePtGnQvafgRzwQN3gUfnWhCLBlBBOpbKBYwrNt7txIUxeJ7JXYEjIKfzkfLcEE4DnRvcroVGuraOkBr1D6jOtLCtDCVgYMUmzJXSsCTXZRtbiDC8XOx1lHsHQ4g1IUyDVM+P0T9wArG8TB7kRaqCxzsF6SBS5Xv4WEdRVGSEwVVQUE/VVxfMUbk0LMl13WVELTy8DK5q8ja5yI/s8RAdr1Mmi3M6RqUiwqm9iDzYazauFUqmYIMKN0hZ6LDtNY0sEZDOtQku2LOAqQwsxERIG15wQ+e4QWbZP6MXm+OgcjpdGouK0vj8SwrWMIf4vJPCPI2H2jghmx23q/KhR+KkrLjnMDUWQdCJK2EOXBADyx2LJdxwG9UDaN6eF1/eILlaaLTJWSdTjQK10dni9Fhap7BsFKp9YJo89Ri8ChWpNjicZt0sRVUvHe7UJhC2iXTiSlhIlgK44HAsiN1wHqLhdXtefPrD4peBJ8w103V4kyUFXaiiCepoqVWEbpbP/wTZyyEK9ji0olWCMvLWLTikYVkPG8uXWkAlxVQ9CPYJOPCIxVwbO4j2dH39xl0fvqj6YT2Fm5x1IuWiC3FmEuFsOvXjzDDfRMrhs3V0pngGYf7+ge5Y7QqUSCfLttFUxn8uzsDCXQEBAVNH/A2WN3VECiTJBWNVJxQAa3jIABP/fPnF6u+fX3nXloue3qOOr+10oslZM6hbgfJEv8Kok08M8zE0lE5Tp8wI9ibW2Akn+Tlj5abixyAFq05crEB1aRILDb4+JOU94eyj2TLehoLGyL80k3pihBJYO2Gsnk04uFrTJoT7uZsWaNqz5+UvXti6dc01W59/aePGjdexrnCLhafJ0TRIY0SvMnCsDi5jaPXT9HEExXf2Wu0EnTrCwBpcJS8XTROEE6c5kiTWlNHirqysrMQiHFnOwHh0VTBbnygqalGUpt31CBjayTZWbAuuiN0WC2278847O796YeuWi6656KItnz8asQuN3E6hbsPVzn3Ipcki7kWzpfj5Z9EJJtPRZGXGWkKGyiksi2Of66/aXEQTRhlY66Sb8oRzEpn5mugudWyNpYro/BQ+SUpJrXIQnUHpZamayh5pjKeg8cD6J/rluTXwPtaWF7Z32HeQqqNMLvKhAd060jjF0WJwTWQPdShQBlFRqWKo30q+OlalXbideCzh1MAnJVkSK4gY2dATNBpe7ixbLwUz1sIoXbHVMI2rpLVguju3fw6olTAUa+uHLx0o6Ii9k9XijnUcNSpQF80yzaJyPqRuMbiCeGgV8pOG4+UrQknyLZVCx2tY+cTEKWaaajIdT5UKZG+QWGR/TXY+FRZjNRAlJrlyxdNsYLXG6MIcN3Zngip1bPXw2Nqw58WK57cwlNTKNw7e++ANGFqs+92x/KhCgTbTSZybuYeUzc6WTCNGkYV9aoCkEXJrehOtFauk/WZoWKkyWGZjGh1AydzpNHJILPleazVTUVezOFSxSpubmwfiFNkUAqxITRExtxECSIQ25eUfIhL27NnT9dzKu9YASuqarc/dc/CGTZdJXeGOhfHAz7IZ1gmiZu695KyhM2fJo0YSgaCUpNiAhRSsYfWTXRFG84HhHTLLrZBY0na8gsUrhR1WxSomKB138zMYC6yLdayE3YjuczjQG7oaWJ/sl1C61qwpfungDViFecZC9KrCn38N076jxGfnUHKc6Nxx06QhMuCDon0cEtAMyhAm8taw0lQPTaeAU+RRMW1WsbrzB/JXkc8JJ5zA7mxgNVBQ0PEkBnUczWQsnSummtYngMqZK2EX1X/4BkMZQnR/9JYHN21AcvaMNY6elZ3xk0kni6hZZq7JVCk7LJJ0BUn18pAw0yQNyyIzn4OOo/gkEX00a7noGQ6RKlYeIWGNEc6egv4AS+OKuVb4oCvXnk++f2ErxpSLtnz36H744DzII9YxMlnloFubhSGmUxs/xmTCxEo6XxG/O7KkSviXdgrUsWSKyKdTpA9u1rFmHeeDe8uLWeV17lh+lGdgQRKrAwOtL8KJq++TPU8/v3Ur5ylnY2154c2CfZs2zhPyhBUoH3Ih+VC+mqTK5cSDRP5pIrK3K65qT6fxBhYVqkYdEO86lv8EslemKKrcsTARMLBYAiuKomAsgyvi0Ze/WmP4n2GsL+7Zb+8BlpDE8pi51Kf+MB07VjjdEMaGGpXT3bEwCZxqYMlA2U3pIl6Sj4Y1jqw2HBwmluSqp/WLI3T13f/o569zTB9G9fqb995SFIsCh5QHLHY+qJzWqeuJEKqTzlcoZ8ESq/DZVbq+jKcRBtZMimMvlD5YQhM1LA4hf4dVo2Ndq3K1YmjdFhOpU+2686stWwA1TFs/uufgLebqeRsOjQUnl2O+W41xsl9JyZTGdOidnbvdSc461WRgTaBVzI+fnLt1LOnEtuwsoVzPY8vAYnHWurgVcV5SdTz6kSdTcSq+994Hb7HQ3g2XHhJrvPSeaGGcVeSF2UaxNJ8iGsaR2SYi4ThWMAl5OWGdJ6eOGVUihgcZWN0iT0utcsdClhuGtXgJ1UdC6jplx32//rjyIs/GWv3gJotYrnjGgrypTET0NJGFzzeZQsnGh/GKbPCmVJG+zhJrl3SHw/FwkbMTjpLBJq5dTMLCXbF6KQDCta5YYbNmUr6ONV/DWk8LYzSuvh2f3vTYHR+vXDPcWNc8iHnTgnq6QtajPGP5ikc5UKzOmbCcFwmrbZ3aIBN2LfmMmTFxHJWoKzAnLPngtUmDgdUmsKZBrljFxCpRDKz5KtYiWgQswdUXf9uFay/0wIVU/PU9q2+4ZUE1dch6lGes80XmKuMPLhW1jnDxkc2F6qRqDDUyoOyMtpqe5ITlz26sTfHcsBpJ6gknrBKr1Zq1WX8OwFK5WqMQCCOl4II3XXghuH5YifjuPrJW35CwoIW2A4vlEYszl752GIcGf0wlVLVhfemn1l1ym9pWrMoXR7x4NrCQIwq1Asa5TlibBWkOy1GqY7moSUx1HwKXiIQLday+HU+uXXYhdOMdH7hyXXPXR2ysDRu2ESK81HAsSI4NmYPPwPkonl9I3U6z8Hs4pYuKaaIL1gyeFMuwaTKw2AkMecRKM9NpwMrMzFy8mF8LacnOxTGsa3e8BWOpXGvAZUwwXr/3XszdF6CaGKuVAq73hHUcZmxSybJUM1mvlSFBcXmShozuIGbTKXpBrZ2xTDxLhkrY2GNoUCZAsrjlrVx3rNJOGAtYizRZaOFueURP3nTjhRrXH8722vrFSwf29+yO3V5N9dtjpbZ5wkLCT0mx2Wwp0Wp5F/N0nKMBcwacMldnTuVAaWpqaXO0o4iOmiLmyLUptpQygXUiNeI4LZ7C+OY2HNs6yZcsq8pSndSkYvWXQmWluQ6iEwOB5VFvr2Ukw156vHjh0X374slNnrBGTKeiouTkZFwcLlNZKOFcNMwQDecc71JYmcpt55I5PrkomXxFSiccmymE939lO3B9yV0Sq4JUWWBcsejXZKHqKH5fRJ9+ozK5ja81W7576UBfR1RLy7Z6qt/WIlUNrOGaOpmETgx3bwCV1AnTvI4f7e09OsgrPEBPDMaug5+4ISTQaGfc83xxiyHf0zSs0awTJx5tkljLMyFtbLW2tsasj7yQ44XBxfFQXWfdc3D1DZtQCxBja8MGT2PLMNhIaITHhkNr0oiRxi4Qjifp7bh3lKfHZ8wynER0ySXzWRdnciTkKa8I7i5cyF8iuK/Me3P1DTsLuCoqIuFcPRL+dzo0luTK5LyF9BUfcyOM5aLHJBdn4gdvYaq5V3Pe4oMjGUtwZWKWAayLpbHcuX5ceQ0vSGCsuSjcFBTwLGMu67/GCiOrLJae444luZZiTpg5/+Kix5fBWMO4Hnt9y5bf71l96y2iQF8wt17uw0L/MVYglst1dXXlNMUDFrgyl1A1sDwZC7rj5z+fY6qEuRKLqOfquVL/IZaxp4vs6AELXJlYb83PfKoVYdCDli377f0H4YJ9sszWQ7S34PCwRpn+ZU07NSQkZJrJDeshlSuTV8eLD2GstWtf2QgquKDE6qD6gr/DmjX72Nnnj/c/1h+VIl89K40K85cKk6zjz5iKS88JnDF5hnrBrGOcdE6Y8ff8RroMqICReLnlCs9Yy+dbaP2S+Z6Mteymz97rvZVdUKsexlILfPCQWKOJFUo0k8iCfwGmEaeOPdWXDPnK74PQZFw6lghrFcjfm1w1GWNn6vjxYvfHazwk09hk/pWetv3D/U4KOilw1KSRk0YG+p0RKLEuv0TV0oW0cMdPw41149pl7x54fzVsFaPVsREIdyccGmsM3Z5dUpJB1ofJMUA1DkCgF8DDbhartxPTIK4MZCQSNayjvNxeYosGUUOGk9Ylkp86ciryko3HMZESs4rEi+01ZSaxxhpPTGJpXAiFtP6ztcP9752D1gOrb2UqtX5YgKG16+o5h8Q6Xpb3UBVLrFVIKaPpyC79tWRRNHHgOgOrDAehLkBtnHamjMLixbXM1ki+ZE+HErFKS2dhrTkr/EQsrSvwaiC/cH8scRx56c0ZZDFjxmnPy8ATE1gaF8eMTzF1d/W/tW9/a32aTYVoodVFEzqI5mCYHQrrFCp9raZSSa9UUvqT8pX+GjqZOtuVHMuq6LrmuujoftQnThdfCcgmKlXoYTlTxfQ8KRXLw0e686CcIWWQZE3EUBexPwqsZmBB8GSlNB3PJ02u5wYQEwWWzrWcCOssV6gbX0l/FaPq8Z16qY2xUCgVw+wQWOhMHOUo9sLCfqW0tHCghnyDqMiG2gzllWURDWHReAJGWjl6xlglih0VaB6EqASTNaWypqELv1GaQJrR1tbdllNS4nC0defkpMMfHemUi7VoLtAacIzrcovwp5U0rJhLKuJpjMTSuZbSrmU3ug6qdw52Ju5n/wOVJvFFmw5gQZ6xRkusit7EzUp2YmdvuZkgS7edqJsNFM1YZLm9W2nsovwkFEkbC9vjzIxVRTXqVp7ZDqwxCDvU/AhBic1tPKGnWqVEx0pVbmasQoIXK9FGAmMsKbYWorsr1HvvH7h1376dO1sjIZ0LuyjUo4Z6j1jYzU8qtfWXKe16IdrSUFPMcCVKg4ZlV1hU1x6dpgAlTljriXJRcatD38sZy4t4VyiL+CYHLgiHx3arWF2UgrU3anPt+JwMW+pgU9OKnJtpllyYLF++lLV86VOYNxkxfe0779389OqDB+KjYnY6bVhCO+GDO40dy55hWJPxmbb2FGu5LSWxMy1pHQJfkdhqKC8fUrrLrRIrubFOKWyTGwVtRdGKwFqVF91bVjaY1EgSi5Jz2sqU0meGhrCbPOSgcYhDtVQosMqJi2fYnY6rHIzOsLX3s5VX0ESBtUgXvXKTDrXs3fcSOw/csr91idmyaLdxDRb5uxcRVe+O1dXi2Qm7Ffug0t/YWKrkd6HDJTkozypCKXWMBTv04r1MsXU5UCSsk1hVRMnNsnKbyFhs07g0cVea2BpCc76K1WlRHqEgIjQQN3cl02Z1zutprY9A8e4Nr766b5893kyHIU8hIwXOEqewJdrjeN9OjGxa0VSlFDY5hLXUSGgufQ2BvgE+JsZWnSNNsTmyEf+iKwRWvJJqsZgh/Ey2wFpsojqBZbcqz9Bx0zHCbM3r2B3ykFiwTea66JeFGeSpz95d/Wri/v2t+5bsXhRVjStcFBVFVB+1MEocQy0t7t/K4h3jpNr8pGdrbBjGA6mUjY0pSkbdk0AA09U6YVE+B/jexFRFRsKq1KbBCntxd6nyhIpVRoZ8RdWbogVWfDbuPxdOaKvCpUqZUkei9gnNpIeWS1351FtrESfWvv3KrUhUt976+AOos7Uu5g2HxSgFqOrr28kBI6GvQAhDq2AXTff4RbPXiBRbVRWqlSXkMxJY7DE5MhIiHTOWDPBoNDci9/oQvMpM4uYcsucJrCLezJwEjRqFl9yXTmwSWOkDiEVhMhI2krKqUmlEqguR37Raf6UMhU89uQxD6q1v3+89sBpMD2S2zoew4UDXtkZeHKmpr6+eYhMi+iK0edSc7RTkaWw1Kuh/bn5+JYYK0UjVWgZWYDCCQmMFWyujP6sYOc1Pji1rRrZjRQVGi47lbTJ0NnU1dkprdTnwKEzs3RZlBciwR5hml98A86KFV14pwHbc982F9z2Z/uo+YahMIBlYXPVVxTOMiBjn/eVqmuGGhb1HG+qwjdFPPPvss19m5apYdZSlYXXR7GCxc5rGWAgTBFkkFlrjSnPNdDNjAT3X5atip5/CswyBlYejMzHjQmhUcuyI+48gKiEbQ/5IXJJr/ZOvPLAj/db99n2AQhZzwTL2zSMJMwznffMeMpvchL3EMlirVIHibLdHS6y4VFuzxOpGR4jsNmzplSAUEquk36HOMiixwRFdCFRgcU3bQROdqAhCo53q4IHQaOpSMoAFR+btmG6VKxReKLiWP7XjqaUPPP5AFC1Zeok7ls6FfRULPNDgiogib/dKGhEsM6R0cr0zY8UKpZ3MkyiZw7bESucNB3SnDq6G7tVuhmwi2yaVZWevKy7PKm7Izm5TBsWlZgpwru23PdM02K9UDqYpdYNNQxVse0u8UqlUOZTCrAF4uo/8aq0FVOBiITE/sBtLMIMrk7Ey9f1l3rLsMDaYQdVD+FRXcSxw4NPiCWoW23NBKDmk1dp5x+NhmCCbh1t6J5G3F2WpJfT8ZLaWi4BVYWtwWc8TKS56BhGmDgkwf8CeDw+kWlni5xL+Io0LumT5JajFAwtywwJXTB9KvzF9kQZXRAsiqpumUHl2ERVnY1PhJMrKy7NSqD+csIgAVO6w0pRQKsf6AafTOBlYs1kZRF7HU012iaFsK9jjyftol50Y681QlnhBdiL8S866GZfC/3CmYh1DtETngpYCZL3OZWCxFkdxvHCaH0Zup5kw1rD1FhOgn9xrPp7CsYlCzhW/mWCawr/0HS/W9AFBJDX2ONPR08lVExBXJo83GeJbXRUSQiFePMMNpuBw01k+/KlCk925FqGoIbk0LG3DsoO0PTCVCg1nm4ZryllTTSfgBQX4+cmShCxTHx0eIN6wNtcUdtZs6BhuGHHa7GN1zT7LH+WOYQUL/6OhAPGCcBf+jQyARSW+8d8hvA0uOcDqUY9aOp+5NKz5gupaREHYyuAC1ammI1Y+MIIT19KHiOqXLxf20rDmg+piJJZWXqNoZLFHNJUYAfVLLje4EO8WSq6lOlZmZD0OFxuJebeFsFN4RGviUQDbveQ2jWs9uGQhAFi3LX+IN5iruY4ov8VxbU9HLKBCLzAd6ToVYP9MoWNM/wdNCwo102FqZujk80xHrv4CWUyMHqIvW3YAAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAoCAYAAAD32nqhAAADEklEQVR4AbWWNZgkZRCG3+rZOV3D3Z3za9xJcHc6wXsXi4jIyNAYmfw5C3HIcc7dMnzd/f/Y6+efembOtdrtra++qhVOaAxedvOH/Rdc+yEHiYQDhObd0RgU2oPUvuf8iAHDU5OZiUYza+zr68+OGADWJkAIRNsRAYYW3JkKloIwQGhp71kL0sNXEMj9PCJCID8sgO54sjExMiQMQyhCyHTavMZDAsZ6+zJBI+CfAkhq7BHZYZSgXBJgmIFEEWZGUMgPChi//v5UkJpF62okFFAp7Wi5Mj2wghByJCRBhFiVYMR7rsIBbp6CMsxT4qEIEghl/7mZNYCJkTE3D2K2ahesrqONNjqa7QPAQm61rkleguGqCq6mQl4H0C2PpIhUqslW86GIUL8m7ZhzfuqAALl/6CfyBYwI985MTZEXAD35ZCNmGW68sHKZ8lvtzP3xC5p+/YZZb78J5YZojbe0MLOBTrIgNWIxuxkNbzxP+SX3iVmvvwBBDL3zEZIohgoaJ7u7s0SQu+g4Aw0P3c3eMeOpB/Ekvidv2PbJe0xJKAQEKIirW1soUx+TJ7ey+/tVSBDiuyZIlCQVdyaiu3v72Du6untRVOmjbuGzhNa5y8xsMBqPBP/818m/HV1MTExObxP8/W8Hf/7dUVsBZslg69wZyw1g09ZdnwUpV4iNCyJIQCE3HoUkQMU5ZpWbrl3YlgCUoIKo7bPLrJts7xQkCRUfpKuuunQ1xmqA+mkuQF47ojreq29IF66OAE9RqPCBQhQfSxgFyBVYzF4HKJ3SvAzToMsUHq4GEAw2zSot2wcw7/TTBw1bhvC5rw2LTDMtmzdv3mA9wK+SStVA7asgqiq7/H0AC6fNNNnqav340FQ7k0ybd9Xqg/1WLgySaooGN1JE8w4GKNG6LEkY9F9p/iveps1j2T4J2TdYu2H7Z1LIg+QKBJXrlsxrO6gCV1EuVTDz+iUolZIKRxJrNmz9/fd1W/Tb2s2aPv5+xP8fJFCxqMKwyhEDyqVTlpkxCBqcVT5lGUcTqzdu+2D1+i0fcCLjf0XElF4DYemFAAAAAElFTkSuQmCC"},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAICAYAAADwdn+XAAAASklEQVR4AWPAB9JKWqNAmIEckFHS2pBW1PofhEFssjUjG0KGZkxDyNGMaQhhzYQNwQhtkAQpGCV20ovbQtKL2r4RqxmkFqQHpBcA3gqccd9+wbMAAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAiCAYAAABr0zihAAABkUlEQVR4AWKgCsgs61RPK2p9llbVLwnopBwe5AiiMB7nGtu2nXNs28kwLMQY1atYp+SWY2xbf8ga17V7G4t+vdtVsztofr+Hr5AWECDwwASMAJGX9GJ6s0+QQJkDQGYsZnRSA2ZUR+z8QwRW+4qP3b/f3Yxa4AYCVLz3BYIUNiOx+Q9SURs4c3WYT/3wyAs4ECRbiK3mzBeFrQGWxbHYry44OoP5XiFqnstNnvrlQxVgZv/qrT9fAZh/qAvw66NtsWEYHU37KputlN9CTMSCBD64+zKv4zZw4rzoj6IxkULZTVutHkxgkv0gQuVc1CCDoHI6mORG1CCHlRpAnMAZxBQ1QIDgDNfHKgGrZjcQ4ddnqDMwsRuPKizWZJAbkK1cLlUD9OoyBBC5RQlECYzzzJu4ErCnNhHFzYB4iwQ+1v5vAojI0QMU7rvLOnYO+mqshQO4D7lDCRw7fW2IPefb1AcVf1zbS2X4rOyp2yLDqCwGh/TbJBXVrvF4l45b71zACy0QIbeGmsInZnlP0Y7X3k89HCaJpH6+oPwAAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABdSURBVHgB7dTBCQAhDATA9bgO7grQGuy/BGvQBqxBMS/B1woiYgbyCcIiLAHUWT4fZQgv8xgGFqQHi2nA/gAzbFoNJ9oiChJycP1q+Q84vy8yBG3RBQHcNW09V8epFRQL9pWRYd8AAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAA4SURBVHgB7cixEQAQEEXBTwsaoAb9l6AGGlADQjMCM5dc8jZcCQC+wjOp9rNZFktDs5W7ogDA3wZy7gUEOT7xUAAAAABJRU5ErkJggg=="},,,,function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFNWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHRpZmY6T3JpZW50YXRpb249IjEiIHhtcDpDcmVhdGVEYXRlPSIyMDIwLTA1LTI2VDE2OjUyOjAxKzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMC0wOC0wN1QxMDo0OTo1OCswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMC0wOC0wN1QxMDo0OTo1OCswODowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5OGM1MjA3My00NzRmLTQ5YTUtYTBiMy04YTBiNjUxOTg4MTkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OThjNTIwNzMtNDc0Zi00OWE1LWEwYjMtOGEwYjY1MTk4ODE5IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6OThjNTIwNzMtNDc0Zi00OWE1LWEwYjMtOGEwYjY1MTk4ODE5Ij4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OThjNTIwNzMtNDc0Zi00OWE1LWEwYjMtOGEwYjY1MTk4ODE5IiBzdEV2dDp3aGVuPSIyMDIwLTA4LTA3VDEwOjQ5OjU4KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+BNIWNwAAANBJREFUOI2lk7FtwzAQRZ9UpPIGAtyr8RaZwMgA2SGtN/AGadMZaTyFao9gQJ1bw0AKPTdHwTBCkUgO+MDxePcIkneNSsE64Dv8LTAuZqtLelcv6i10iVi2JrexUo8PoGcdI6cK+KqOC7CkMXKzwFb9VK8VsKRr1LSJ08SnbIADsC79UMbOwBtwatQd8AG8/BGW7AfYN+qtJjH84sEl4HyVWBefps3EJ+AL6B9ghN/H3vRrZW071LbXMzDbsLUDkIDFkSpoHlHUQe3+AUvq1OEOLQ87IC/d1y4AAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABqSURBVHgB7dDRCYAgGATgqwkcwQ1rE0d0hEa4LhAq7I8/89EPDnzQEw5wILkoK3pQUVS2kog/VBCUzNNxDmilx4m1hBZlN8u3PS+7Wfx7Puxmya49jd0s1Z6T4wPeHsjb/RmdjcJROAo9do2y5zKNIp3eAAAAAElFTkSuQmCC"},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e,n){(function(t){function i(t,n){var i={seen:[],stylize:a};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),p(n)?i.showHidden=n:n&&e._extend(i,n),x(i.showHidden)&&(i.showHidden=!1),x(i.depth)&&(i.depth=2),x(i.colors)&&(i.colors=!1),x(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=r),s(i,t,i.depth)}function r(t,e){var n=i.styles[e];return n?"["+i.colors[n][0]+"m"+t+"["+i.colors[n][1]+"m":t}function a(t,e){return t}function o(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function s(t,n,i){if(t.customInspect&&n&&A(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var r=n.inspect(i,t);return _(r)||(r=s(t,r,i)),r}var a=l(t,n);if(a)return a;var p=Object.keys(n),v=o(p);if(t.showHidden&&(p=Object.getOwnPropertyNames(n)),E(n)&&(p.indexOf("message")>=0||p.indexOf("description")>=0))return u(n);if(0===p.length){if(A(n)){var m=n.name?": "+n.name:"";return t.stylize("[Function"+m+"]","special")}if(b(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(w(n))return t.stylize(Date.prototype.toString.call(n),"date");if(E(n))return u(n)}var g="",y=!1,x=["{","}"];if(h(n)&&(y=!0,x=["[","]"]),A(n)){g=" [Function"+(n.name?": "+n.name:"")+"]"}if(b(n)&&(g=" "+RegExp.prototype.toString.call(n)),w(n)&&(g=" "+Date.prototype.toUTCString.call(n)),E(n)&&(g=" "+u(n)),0===p.length&&(!y||0==n.length))return x[0]+g+x[1];if(i<0)return b(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var S;return S=y?c(t,n,i,v,p):p.map(function(e){return f(t,n,i,v,e,y)}),t.seen.pop(),d(S,g,x)}function l(t,e){if(x(e))return t.stylize("undefined","undefined");if(_(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return g(e)?t.stylize(""+e,"number"):p(e)?t.stylize(""+e,"boolean"):v(e)?t.stylize("null","null"):void 0}function u(t){return"["+Error.prototype.toString.call(t)+"]"}function c(t,e,n,i,r){for(var a=[],o=0,s=e.length;o<s;++o)k(e,String(o))?a.push(f(t,e,n,i,String(o),!0)):a.push("");return r.forEach(function(r){r.match(/^\d+$/)||a.push(f(t,e,n,i,r,!0))}),a}function f(t,e,n,i,r,a){var o,l,u;if(u=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]},u.get?l=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(l=t.stylize("[Setter]","special")),k(i,r)||(o="["+r+"]"),l||(t.seen.indexOf(u.value)<0?(l=v(n)?s(t,u.value,null):s(t,u.value,n-1),l.indexOf("\n")>-1&&(l=a?l.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+l.split("\n").map(function(t){return"   "+t}).join("\n"))):l=t.stylize("[Circular]","special")),x(o)){if(a&&r.match(/^\d+$/))return l;o=JSON.stringify(""+r),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+l}function d(t,e,n){var i=0;return t.reduce(function(t,e){return i++,e.indexOf("\n")>=0&&i++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function h(t){return Array.isArray(t)}function p(t){return"boolean"==typeof t}function v(t){return null===t}function m(t){return null==t}function g(t){return"number"==typeof t}function _(t){return"string"==typeof t}function y(t){return"symbol"==typeof t}function x(t){return void 0===t}function b(t){return S(t)&&"[object RegExp]"===M(t)}function S(t){return"object"==typeof t&&null!==t}function w(t){return S(t)&&"[object Date]"===M(t)}function E(t){return S(t)&&("[object Error]"===M(t)||t instanceof Error)}function A(t){return"function"==typeof t}function T(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function M(t){return Object.prototype.toString.call(t)}function I(t){return t<10?"0"+t.toString(10):t.toString(10)}function P(){var t=new Date,e=[I(t.getHours()),I(t.getMinutes()),I(t.getSeconds())].join(":");return[t.getDate(),O[t.getMonth()],e].join(" ")}function k(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function L(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}function C(e){function n(){for(var n=[],i=0;i<arguments.length;i++)n.push(arguments[i]);var r=n.pop();if("function"!=typeof r)throw new TypeError("The last argument must be of type Function");var a=this,o=function(){return r.apply(a,arguments)};e.apply(this,n).then(function(e){t.nextTick(o,null,e)},function(e){t.nextTick(L,e,o)})}if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),Object.defineProperties(n,R(e)),n}var R=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},i=0;i<e.length;i++)n[e[i]]=Object.getOwnPropertyDescriptor(t,e[i]);return n},D=/%[sdj%]/g;e.format=function(t){if(!_(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(i(arguments[n]));return e.join(" ")}for(var n=1,r=arguments,a=r.length,o=String(t).replace(D,function(t){if("%%"===t)return"%";if(n>=a)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),s=r[n];n<a;s=r[++n])v(s)||!S(s)?o+=" "+s:o+=" "+i(s);return o},e.deprecate=function(n,i){function r(){if(!a){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),a=!0}return n.apply(this,arguments)}if(void 0!==t&&!0===t.noDeprecation)return n;if(void 0===t)return function(){return e.deprecate(n,i).apply(this,arguments)};var a=!1;return r};var N,B={};e.debuglog=function(n){if(x(N)&&(N=t.env.NODE_DEBUG||""),n=n.toUpperCase(),!B[n])if(new RegExp("\\b"+n+"\\b","i").test(N)){var i=t.pid;B[n]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",n,i,t)}}else B[n]=function(){};return B[n]},e.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=h,e.isBoolean=p,e.isNull=v,e.isNullOrUndefined=m,e.isNumber=g,e.isString=_,e.isSymbol=y,e.isUndefined=x,e.isRegExp=b,e.isObject=S,e.isDate=w,e.isError=E,e.isFunction=A,e.isPrimitive=T,e.isBuffer=n(1078);var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",P(),e.format.apply(e,arguments))},e.inherits=n(1041),e._extend=function(t,e){if(!e||!S(e))return t;for(var n=Object.keys(e),i=n.length;i--;)t[n[i]]=e[n[i]];return t};var F="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;e.promisify=function(t){function e(){for(var e,n,i=new Promise(function(t,i){e=t,n=i}),r=[],a=0;a<arguments.length;a++)r.push(arguments[a]);r.push(function(t,i){t?n(t):e(i)});try{t.apply(this,r)}catch(t){n(t)}return i}if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(F&&t[F]){var e=t[F];if("function"!=typeof e)throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,F,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),F&&Object.defineProperty(e,F,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,R(t))},e.promisify.custom=F,e.callbackify=C}).call(e,n(477))},,function(t,e,n){"use strict";function i(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}Object.defineProperty(e,"__esModule",{value:!0}),e.getCoord=i}]);